(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[9389],{93943:(e,t,i)=>{"use strict";i.d(t,{Z:()=>p});var o,n,a,s,r,l,d=i(91051);function c(){return c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},c.apply(this,arguments)}const p=function(e){return d.createElement("svg",c({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 200 200",width:"1em",height:"1em"},e),o||(o=d.createElement("path",{fill:"#161823",fillRule:"evenodd",d:"M189.562 1.164a9.278 9.278 0 019.279 9.279v11.546a1.031 1.031 0 01-2.062 0V10.443a7.217 7.217 0 00-7.217-7.217h-11.546a1.031 1.031 0 010-2.062h11.546z",clipRule:"evenodd"})),d.createElement("path",{fill:"#25F4E8",fillRule:"evenodd",d:"M188.394 0a9.278 9.278 0 019.279 9.278v11.547a1.031 1.031 0 01-2.062 0V9.278a7.217 7.217 0 00-7.217-7.216h-11.546a1.031 1.031 0 010-2.062h11.546z",clipRule:"evenodd",style:{mixBlendMode:"multiply"}}),d.createElement("path",{fill:"#FE2C55",fillRule:"evenodd",d:"M190.722 2.328A9.278 9.278 0 01200 11.606v11.547a1.03 1.03 0 11-2.061 0V11.606a7.217 7.217 0 00-7.217-7.216h-11.546a1.03 1.03 0 110-2.062h11.546z",clipRule:"evenodd",style:{mixBlendMode:"multiply"}}),n||(n=d.createElement("path",{fill:"url(#qr-code-wrapper_svg__pattern0)",d:"M12.675 12.674h174.656v174.651H12.675V12.674z"})),a||(a=d.createElement("path",{fill:"white",d:"M80.931 81.443h38.146v38.144H80.931V81.443z"})),s||(s=d.createElement("path",{fill:"#161823",fillRule:"evenodd",d:"M1.163 10.443a9.278 9.278 0 019.279-9.279h11.546a1.03 1.03 0 110 2.062H10.442a7.216 7.216 0 00-7.217 7.217v11.546a1.031 1.031 0 11-2.062 0V10.443z",clipRule:"evenodd"})),d.createElement("path",{fill:"#25F4E8",fillRule:"evenodd",d:"M0 9.278A9.278 9.278 0 019.277 0h11.546a1.031 1.031 0 110 2.062H9.278A7.216 7.216 0 002.06 9.278v11.547a1.03 1.03 0 01-2.062 0V9.278z",clipRule:"evenodd",style:{mixBlendMode:"multiply"}}),d.createElement("path",{fill:"#FE2C55",fillRule:"evenodd",d:"M2.327 11.606a9.278 9.278 0 019.279-9.278h11.546a1.031 1.031 0 110 2.062H11.606a7.216 7.216 0 00-7.217 7.216v11.547a1.03 1.03 0 01-2.062 0V11.606z",clipRule:"evenodd",style:{mixBlendMode:"multiply"}}),r||(r=d.createElement("path",{fill:"#161823",fillRule:"evenodd",d:"M198.841 189.558a9.278 9.278 0 01-9.279 9.278h-11.546a1.03 1.03 0 110-2.062h11.546a7.217 7.217 0 007.217-7.216v-11.547a1.03 1.03 0 012.062 0v11.547z",clipRule:"evenodd"})),d.createElement("path",{fill:"#25F4E8",fillRule:"evenodd",d:"M197.673 188.393a9.278 9.278 0 01-9.278 9.278h-11.547a1.03 1.03 0 110-2.061h11.547a7.217 7.217 0 007.216-7.217v-11.546a1.03 1.03 0 112.062 0v11.546z",clipRule:"evenodd",style:{mixBlendMode:"multiply"}}),d.createElement("path",{fill:"#FE2C55",fillRule:"evenodd",d:"M200.001 190.722a9.278 9.278 0 01-9.279 9.278h-11.546a1.032 1.032 0 010-2.062h11.546a7.217 7.217 0 007.217-7.216v-11.547a1.03 1.03 0 112.062 0v11.547z",clipRule:"evenodd",style:{mixBlendMode:"multiply"}}),l||(l=d.createElement("path",{fill:"#161823",fillRule:"evenodd",d:"M10.442 198.836a9.278 9.278 0 01-9.279-9.278v-11.546a1.03 1.03 0 112.062 0v11.546a7.216 7.216 0 007.217 7.216h11.546a1.031 1.031 0 010 2.062H10.442z",clipRule:"evenodd"})))}},1723:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s});var o,n=i(91051);function a(){return a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},a.apply(this,arguments)}const s=function(e){return n.createElement("svg",a({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 8",width:"1em",height:"1em"},e),o||(o=n.createElement("path",{d:"M0 8c7 0 10-8 12-8s5 8 12 8z"})))}},21985:(e,t,i)=>{"use strict";i.d(t,{U:()=>a});var o=i(21041),n=i(22597);const a=()=>{const{pathname:e}=(0,o.TH)();return{isDetailPage:(0,n.ws)(e)||(0,n.Dj)(e)||(0,n.bf)(e)||(0,n.u7)(e)||(0,n.cQ)(e)||(0,n.wy)(e)||(0,n.Qu)(e)}}},75470:(e,t,i)=>{"use strict";i(77173);var o,n=i(11362),a=i(60998),s=i(95554),r=i(90293),l=i(36301),d=i(89232),c=i(95872);!function(e){e.FypFeedHit="data_prefetch_fyp_feed_hit"}(o||(o={}));var p=i(48936),u=i(97751);const g="__prefetch_item_list";var m=i(11040),h=i(41697),_=i(74820),v=i(3198),y=i(96042),b=i(68927),f=i.n(b),x=i(32667),k=i(11467),w=i(64047);const S=["fetch"],C=["includes"],j=["values","entries","getOwnPropertyDescriptors"];var P=i(2844);function T(){var e,t;return(0,w.__awaiter)(this,void 0,void 0,(function*(){if(!(null===(t=null===(e=window[n.ho])||void 0===e?void 0:e.BizContext)||void 0===t?void 0:t.initialized)){const e=a.n.getInstance(P.r),t=e.getActions().init({lang:(0,d.G3)()});e.store.dispatch(t),yield new Promise((t=>{e.state$.subscribe((e=>{e.initialized&&t()}))}))}}))}var O=i(58990),L=i.n(O),I=i(45966),A=i(22296),E=i(97115),M=i(72679);const R={isPhoenix:"object"==typeof window&&"www.tiktok.in"===window.location.host,textReplace:"undefined"==typeof window?null:new(i(93905).Z)({condition:{APPID:"8660"},tccUrl:"https://sf16-tcc-tos-sg.byteoversea.com/obj/tcc-config-web-alisg/tcc-v2-data-webcast.starling.proxy-default"}),loadTcc(){return this.isPhoenix?this.textReplace.getWithCache("webapp-phoenix-tcc"):Promise.resolve()},getPlugin:e=>({type:"postProcessor",name:"text-replace-plugin",process:(t,i)=>R.textReplace.processSync(t,e,i)}),getProcessName(){return this.isPhoenix?["text-replace-plugin"]:void 0}};function F(e,t){const i=a.n.getInstance(k.n),o=[];return new Promise(((n,a)=>{R.loadTcc().then((s=>{(R.isPhoenix?A.ZP.use(R.getPlugin(s)):A.ZP).init({debug:!1,fallbackLng:["en"],initImmediate:!0,defaultNS:null!=t?t:"Webapp",postProcess:R.getProcessName(),saveMissing:!0,missingKeyHandler:(e,t,n,a)=>{o.includes(n)||(console.warn("[i18n] missing key",e,t,n,a),i.emitEvent("i18n.missingKey",{count:1},{lngs:e[0],n:t,key:n}),o.push(n))}},(e=>{e?a(e):n()})),A.ZP.setLang(e)}))}))}function D(e,t){return(0,w.__awaiter)(this,void 0,void 0,(function*(){const{starling:i,tea:o}=(0,M.N)();return new I.Z({namespace:e,api_key:E.$h,locale:t,zoneHost:i,timeout:1e4,TEAChannelDomain:o}).load()}))}const B=L()(((e,t)=>{Object.entries(e).forEach((([e,i])=>{A.ZP.addResourceBundle(t,e,i,!0,!0)}))}));var z=i(83138),N=i(28188),U=i(91051);const W="__UNIVERSAL_DATA_FOR_REHYDRATION__",$="__DEFAULT_SCOPE__",q=Symbol("i"),H=Symbol("s");function G(e,t){var i,o,n,a;if(!window.__$UNIVERSAL_DATA$__){let e={};try{e=JSON.parse(null!==(o=null===(i=document.getElementById(W))||void 0===i?void 0:i.textContent)&&void 0!==o?o:"{}")}catch(e){console.error("error while parsing rehydration data")}window.__$UNIVERSAL_DATA$__=e}return null!==(a=null===(n=window.__$UNIVERSAL_DATA$__[null!=t?t:$])||void 0===n?void 0:n[e])&&void 0!==a?a:null}function Z(e,t){var i,o;if(null===(i=window.__$UNIVERSAL_DATA$__)||void 0===i?void 0:i[H])throw new Error("set universal data is not allowed after ReactDom kicked in");let n="",a="";"string"==typeof e?n=e:(n=e.key,a=null!==(o=e.scope)&&void 0!==o?o:""),window.__$UNIVERSAL_DATA$__=window.__$UNIVERSAL_DATA$__||{[q]:!0},function(e,t,i){let o=e,n=0;for(;o&&n<t.length-1;){const e=t[n];o[e]=o[e]||{},o=o[e],n++}o&&(o[t[n]]=i)}(window.__$UNIVERSAL_DATA$__,[a||$,n],t)}var V=i(26641);function Q(e){return(0,w.__awaiter)(this,void 0,void 0,(function*(){try{let t=G(N.Hx);if(!t){const i=yield fetch((0,r.stringifyUrl)({url:"/node-webapp/api/common-app-context",query:{lang:e}})),o=yield i.json();if(0!==(null==o?void 0:o.statusCode))throw new Error("AppContext API response statusCode is not 0");t=o,Z(N.Hx,o)}yield function(e){return(0,w.__awaiter)(this,void 0,void 0,(function*(){const t=a.n.getInstance(V.G),i=t.getActions().init({appContext:e});t.store.dispatch(i),yield new Promise((e=>{t.state$.subscribe((t=>{t.initialized&&e()}))}))}))}(t)}catch(e){console.error(`[Fetch Base App Context Error]: ${e}`)}}))}var Y=i(66891);function K(e,t){return(0,w.__awaiter)(this,void 0,void 0,(function*(){try{if(!G(Y.lu)){const i={};yield Promise.all(t.map((t=>D(t,e).then((e=>{i[t]=e}))))),Z(Y.lu,i)}}catch(e){console.error(`[Fetch Error]: translation data fetch failed: ${e}`)}}))}i(48148),Boolean(window[n.ho]);var J=i(22612),X=i.n(J),ee=i(9236),te=i(22763),ie=i(66967),oe=i(98154),ne=i(21041),ae=i(16926),se=i(6091),re=i.n(se);function le(e,t){let i="",o="";"string"==typeof e?i=e:(i=e.key,o=e.scope);const[n,a]=(0,U.useState)((()=>{var e,n,a,s;if(!window.__$UNIVERSAL_DATA$__||window.__$UNIVERSAL_DATA$__[q]){let t={};try{t=JSON.parse(null!==(n=null===(e=document.getElementById(W))||void 0===e?void 0:e.textContent)&&void 0!==n?n:"{}")}catch(e){console.error("error while parsing rehydration data")}window.__$UNIVERSAL_DATA$__=window.__$UNIVERSAL_DATA$__||{},window.__$UNIVERSAL_DATA$__[q]=!1,window.__$UNIVERSAL_DATA$__[H]=!0,window.__$UNIVERSAL_DATA$__=re()(window.__$UNIVERSAL_DATA$__,t)}return null!==(s=null===(a=window.__$UNIVERSAL_DATA$__[o||$])||void 0===a?void 0:a[i])&&void 0!==s?s:t}));return[n,a,()=>null]}const de={MT_Analytics:null,WebApp_Login:null,MT_Reflow:null,Webapp:null},ce={MT_Analytics:null,WebApp_Login:null,MT_Reflow:null,Webapp:null},pe=({children:e,t,initialNamespaces:i,translations:o=de})=>{const[n,a,s]=function(e,t){var i;if(Boolean(document.getElementById(W)))return le(e,t);const o=(0,U.useRef)(null!=t?t:null);(null===(i=window.__$UNIVERSAL_DATA$__)||void 0===i?void 0:i[e])&&(o.current=window.__$UNIVERSAL_DATA$__[e]);const[n,a]=(0,U.useState)(o.current);return[n,a,()=>{const t=`data-hydration-${e}`;return(0,m.jsx)("div",{style:{display:"none"},suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:`\x3c!-- [data-hydration]: ${e} --\x3e`}},t)}]}(Y.lu,o),r=(0,U.useRef)(n),[l]=(0,U.useState)((0,d.G3)()),c=(0,U.useCallback)((e=>Boolean(e&&r.current[e])),[]),p=(0,U.useCallback)(((e,t)=>(0,w.__awaiter)(void 0,void 0,void 0,(function*(){try{if(!r.current[e]){ce[e]||(ce[e]=D(e,t));const i=yield ce[e];A.ZP.addResourceBundle(l,e,i,!0,!0),r.current=Object.assign(Object.assign({},r.current),{[e]:i})}return!0}catch(e){return console.error("[I18nContext] load starling error",e),!1}}))),[a]),u=(0,U.useMemo)((()=>null!=t?t:A.ZP.t),[t]),g=(0,U.useMemo)((()=>({t:u,hasLoaded:c,loadStarling:p,initialNamespaces:i,lang:l})),[c,i,l,p,u]),h=(0,U.useMemo)((()=>[{provide:Y.s$,useValue:u}]),[u]);return B(n,l),(0,m.jsxs)(Y.LX.Provider,Object.assign({value:g},{children:[(0,m.jsx)(ae.yx,Object.assign({providers:h},{children:e}),void 0),(0,m.jsx)(s,{data:n},void 0)]}),void 0)};var ue=i(39664),ge=i(99603),me=i(4589),he=i(34685),_e=i.n(he);var ve=i(22597);function ye(e){return(0,ve.Dj)(e)||(0,ve.Io)(e)||(0,ve.FZ)(e)||(0,ve.oC)(e)||(0,ve.ws)(e)||(0,ve.cQ)(e)||(0,ve.bf)(e)&&!(0,ve.TO)(e)||(0,ve.I8)(e)||(0,ve.TX)(e)||(0,ve.Gc)(e)||(0,ve.at)(e)||(0,ve.$4)(e)||(0,ve.u7)(e)||(0,ve.wy)(e)||(0,ve.Qu)(e)}var be=i(28626),fe=i(10178),xe=i(38149);function ke(){window.location.reload()}function we(){return(0,m.jsx)(fe.Z,{width:90,height:90,fill:"rgba(128, 130, 133, 1)"},void 0)}const Se=(0,be.Z)("div",{target:"e7iph6u0"})({height:"100vh",display:"flex",flexDirection:"column"},"label:DivContainer;");function Ce(){const{t:e}=(0,U.useContext)(Y.LX);return(0,m.jsx)(Se,{children:(0,m.jsx)(xe.T,{isFullScreen:!0,onButtonClick:ke,iconElem:we,title:e("Page not available"),desc:e("server_error_sub"),buttonText:e("try_again_btn")},void 0)},void 0)}function je({children:e,supportRoutes:t}){const i=function(e,t){const i=(0,me.lX)(t);function o(t){return(o,n)=>{const{pathname:a,href:s}=function(e){if("string"==typeof e){const t=new URL(e,window.location.origin);return{pathname:t.pathname,href:t.href}}const{pathname:t="",search:i="",hash:o=""}=e;return{pathname:t,href:`${t}${i}${o}`}}(o);!function(e,t){return t.some((t=>_e()(t).test(e)))}(a,e)?t?window.location.replace(s):window.location.href=s:t?i.replace(o,n):i.push(o,n)}}return Object.create(i,{push:{enumerable:!0,value:o(!1)},replace:{enumerable:!0,value:o(!0)}})}(t);return(0,m.jsx)(ne.F0,Object.assign({history:i},{children:e}),void 0)}function Pe({children:e}){const t=(0,ne.k6)();return(0,m.jsx)(te.o,Object.assign({history:t},{children:e}),void 0)}function Te({children:e}){const[t,i]=(0,U.useState)(!1),{user:o}=(0,ee.mp)(V.G,{selector:e=>{var t;return{user:null===(t=e.appContext)||void 0===t?void 0:t.user}},dependencies:[]}),{isMobile:n}=(0,ee.mp)(P.r,{selector:e=>{var t;return{isMobile:null===(t=e.bizContext)||void 0===t?void 0:t.isMobile}},dependencies:[]}),a=Boolean(o),s=(0,U.useRef)(!1),{pathname:r}=(0,ne.TH)(),l=ye(r)&&!n;(0,U.useEffect)((()=>{let e=a;l?(s.current||"light"!==ie.Z.get(u.u7)?s.current||"dark"!==ie.Z.get(u.u7)?s.current=!0:e=!0:e=!1,ie.Z.set(u.u7,e?"dark":"light",{secure:!0,expires:300,domain:"www.tiktok.com"}),i(Boolean(e))):i(!1)}),[a,l]);const d=(0,U.useMemo)((()=>({value:t,toggle:i})),[t]);return(0,m.jsx)(ge.hb.Provider,Object.assign({value:d},{children:e}),void 0)}const Oe=({children:e,supportRoutes:t,initialNamespaces:i,errorStateComponent:o})=>{(0,U.useEffect)((()=>{(null===history||void 0===history?void 0:history.scrollRestoration)&&(history.scrollRestoration="manual")}));const[n]=le(N.Hx);return n?(0,m.jsx)(N.iz,Object.assign({value:n},{children:(0,m.jsx)(oe.B6,{children:(0,m.jsx)(pe,Object.assign({lang:n.language,initialNamespaces:i,clusterRegion:null==n?void 0:n.clusterRegion},{children:(0,m.jsx)(U.StrictMode,{children:(0,m.jsx)(je,Object.assign({supportRoutes:t},{children:(0,m.jsx)(Pe,{children:(0,m.jsx)(ue.rJ,{children:(0,m.jsx)(Te,{children:e},void 0)},void 0)},void 0)}),void 0)},void 0)}),void 0)},void 0)}),void 0):(0,m.jsx)(_.a,Object.assign({theme:ge.XU},{children:null!=o?o:(0,m.jsx)(Ce,{},void 0)}),void 0)};var Le=i(11838),Ie=i(94582),Ae=i(69056),Ee=i(33642),Me=i(75200),Re=i(40340),Fe=i(24421),De=i(89974),Be=i.n(De),ze=i(17133),Ne=i(58854),Ue=i(28139),We=i(32913),$e=i(36488);const qe=(0,We.Z)("a",{target:"e1k110iq0"})((({theme:e})=>(0,$e.GI)({theme:e,fontFamily:"Proxima",fontWeight:"semiBold",color:"TextPrimary"})),"label:ALink;");var He=i(73566),Ge=i(48185),Ze=i(19630),Ve=i(60595),Qe=i(56979),Ye=i(49584),Ke=i(21005),Je=i(99835);let Xe=class extends He.D{constructor(e){super(),this.service=e,this.defaultState={popupConfig:null}}setPopupConfig(e,t){e.popupConfig=t}getPopupConfig(e){return e.pipe((0,Qe.U)((e=>({locale:null!=e?e:"en"}))),(0,Ye.z)((({locale:e})=>this.service.getUniversalPopConfig({locale:e}).pipe((0,Qe.U)((({policy_notices:e})=>{var t;return this.getActions().setPopupConfig(null!==(t=null==e?void 0:e[0])&&void 0!==t?t:null)}))))),(0,Ke.n)({}))}};function et({link:e,lang:t}){return e.replace("${locale}",t)}function tt({onHide:e,report:t,popupService:i,common:{business:o,policy_version:n,style:a},action:{text:s,approve:r,operation:l,dismiss:d,link:c,extra:p,new_web_tab:u,link_type:g}}){return m=>{if(null==m||m.preventDefault(),t.handleUniversalPopClick({style:a,business:o,button_info:s}),"callback"===g||r)return i.setUniversalPopOperation({business:o,extra:p,policy_version:n,style:a,operation:null==l?void 0:l.toString()}).subscribe(),void(null==e||e());d?null==e||e():g&&"h5"!==g||!c||(u?window.open(c):window.location.href=c)}}(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,Object]),(0,w.__metadata)("design:returntype",void 0)],Xe.prototype,"setPopupConfig",null),(0,w.__decorate)([(0,Ge.Qm)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Ve.y]),(0,w.__metadata)("design:returntype",void 0)],Xe.prototype,"getPopupConfig",null),Xe=(0,w.__decorate)([(0,Ze.Y)("UniversalPop"),(0,w.__metadata)("design:paramtypes",[Je.Q])],Xe);var it=i(18571),ot=i(7992),nt=i(47741);function at(e){return null==e||"number"==typeof e||"boolean"==typeof e?e:"string"==typeof e?e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"):Array.isArray(e)?e.map((e=>at(e))):"[object Object]"===Object.prototype.toString.call(e)?Object.keys(e).reduce(((t,i)=>(t[i]=at(e[i]),t)),{}):at(String(e))}class st extends U.PureComponent{dynamicAddCompKey(e=[]){return e&&e.length?e.map(at).reduce(((e,t,i)=>{var o;const[n="",a={},s]=t;return""!==n&&0!==Object.keys(a).length&&e.push((0,m.jsx)(nt.wd,Object.assign({dangerouslyExposeHtml:!0,id:null!==(o=null==s?void 0:s.name)&&void 0!==o?o:n},{children:(0,m.jsx)(nt.TV,{genericType:n,genericKey:n,schema:a},void 0)}),`${n}-${i}`)),e}),[]):null}render(){const{wrappedHead:e,metaParams:t={},jsonldList:i=[],children:o}=this.props,{title:n="",keywords:a="",description:s="",robotsContent:r="",canonicalHref:l="",alternateHref:d="",amphtmlHref:c="",applicableDevice:p="",hreflangList:u=[]}=t;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(e,{children:[(0,m.jsx)("title",{children:n},void 0),a&&(0,m.jsx)("meta",{name:"keywords",content:a},"keywords"),s&&(0,m.jsx)("meta",{name:"description",content:s},"description"),r&&(0,m.jsx)("meta",{name:"robots",content:r},"robots"),p&&(0,m.jsx)("meta",{name:"applicable-device",content:p},"applicable-device"),l&&(0,m.jsx)("link",{rel:"canonical",href:l},"canonical"),c&&(0,m.jsx)("link",{rel:"amphtml",href:c},"amphtml"),d&&(0,m.jsx)("link",{rel:"alternate",media:"only screen and (max-width: 640px)",href:d},"alternate-media"),u.length?u.map((({hreflang:e,href:t})=>(0,m.jsx)("link",{rel:"alternate",hrefLang:e,href:t},e))):null,o]},void 0),this.dynamicAddCompKey(i)]},void 0)}}const rt=st;var lt=i(17288);const dt=function({appContext:e}){const{pathname:t}=(0,ne.TH)(),{metaParams:i,jsonldList:o}=(0,ee.mp)(lt.q,{selector:({metaParams:e,jsonldList:t})=>({metaParams:e,jsonldList:t}),dependencies:[t]});let n=t;try{n=encodeURI(decodeURI(t))}catch(e){}const a=(0,U.useMemo)((()=>{let t=[];const{robotsContent:o}=null!=i?i:{};if(o&&!o.includes("noindex")){const{host:i}=null!=e?e:{},o=(0,ve.Hg)(n);t=[{hreflang:"x-default",href:o?`https://${i}`:`https://${i}${n}`}],E.tF.forEach((({value:e})=>{const a=e.replace(/(^zh([_-]\w+)*)/g,"zh-Hant"),s=o?`https://${i}/${a}/`:`https://${i}${n}?lang=${a}`;t.push({hreflang:a,href:s})}))}return Object.assign(Object.assign({},i),{hreflangList:t})}),[e,i,n]);return(0,m.jsx)(rt,{wrappedHead:oe.ql,metaParams:a,jsonldList:o},void 0)};var ct=i(49996);const pt=function(e){const{appContext:t}=e,{location:i}=(0,ne.k6)(),o=`https://${null==t?void 0:t.host}${i.pathname}${i.search}`,n=Object.assign(Object.assign({},(0,ee.mp)(ct.I).value),{"og:url":o});return(0,m.jsx)(oe.ql,{children:Object.keys(n).map((e=>(0,m.jsx)("meta",{property:e,content:n[e]},e)))},void 0)};var ut=i(33761);const gt=(0,We.Z)("div",{target:"eyt76ed0"})({width:"100vw",top:$e.Mz-1+"px",left:"0",marginTop:"1px",position:"fixed",boxShadow:"0 2px 8px rgba(0, 0, 0, .06)",zIndex:999,background:"#fff",display:"flex",justifyContent:"center",":after":Object.assign({content:'""',background:"rgba(33, 33, 33, .08)"},(0,$e.Cx)("bottom"))},"label:DivBannerContainer;"),mt=(0,We.Z)("div",{target:"eyt76ed1"})([{width:$e.XP,maxWidth:$e.XP,paddingTop:"16px",paddingBottom:"16px",display:"flex",justifyContent:"space-between"},({theme:{direction:e}})=>(0,$e.YJ)({direction:e,paddingStart:"20px",paddingEnd:"24px"})],"label:DivBannerWrapper;"),ht=(0,We.Z)("div",{target:"eyt76ed2"})([{display:"flex",alignItems:"center"},({theme:{direction:e}})=>(0,$e.YJ)({direction:e,marginEnd:"24px"})],"label:DivLeftContainer;"),_t=(0,We.Z)("div",{target:"eyt76ed3"})([{display:"flex",alignItems:"center"}],"label:DivRightContainer;"),vt="48px",yt=(0,We.Z)("div",{target:"eyt76ed4"})((({theme:{direction:e}})=>({":not(:empty)":Object.assign({display:"inline-block",width:vt,height:vt,flex:"0 0 48px",padding:"0"},(0,$e.YJ)({direction:e,marginEnd:"16px"}))})),"label:DivImgWrapper;"),bt=(0,We.Z)("img",{target:"eyt76ed5"})({width:vt,height:vt},"label:ImgIcon;"),ft=(0,We.Z)("div",{target:"eyt76ed6"})([({theme:e})=>(0,$e.GI)({theme:e,fontFamily:"Proxima",fontWeight:"semiBold",typography:"P2",color:"TextSecondary"}),{alignSelf:"center"}],"label:DivContentWrapper;"),xt=(0,We.Z)("h4",{target:"eyt76ed8"})((({theme:{colors:e}})=>({color:e.TextPrimary})),"label:H4Title;"),kt=(0,We.Z)(ut.Z,{target:"eyt76ed9"})({width:"24px",height:"24px",cursor:"pointer"},"label:StyledCloseIcon;"),wt=(0,We.Z)("div",{target:"eyt76ed10"})((({theme:{direction:e}})=>({margin:"9px 0","&:not(:last-of-type)":(0,$e.YJ)({direction:e,marginEnd:"24px"})})),"label:DivButton;"),St=(0,We.Z)("a",{target:"eyt76ed11"})((({theme:e})=>[(0,$e.GI)({theme:e,color:"Primary",typography:"P2"}),{":link, :active, :hover, :visited":{color:e.colors.Primary}}]),{textDecoration:"none",whiteSpace:"nowrap",":hover":{textDecoration:"none"}},"label:AButtonLink;"),Ct=(0,U.memo)((function({title:e,content:t,icon:i,buttons:o,onShow:n}){const a=(0,U.useRef)(null);return(0,U.useEffect)((()=>{var e,t;null==n||n(null!==(t=null===(e=a.current)||void 0===e?void 0:e.clientHeight)&&void 0!==t?t:0)}),[]),(0,m.jsx)(gt,Object.assign({ref:a},{children:(0,m.jsxs)(mt,{children:[(0,m.jsxs)(ht,{children:[(0,m.jsx)(yt,{children:i&&(0,m.jsx)(bt,{alt:"icon",src:i},void 0)},void 0),(0,m.jsxs)(ft,{children:[e&&(0,m.jsx)(xt,{},void 0),(0,m.jsx)("p",{children:Array.isArray(t)?t.map(((e,t)=>(0,m.jsx)(U.Fragment,{children:e},t))):t},void 0)]},void 0)]},void 0),(0,m.jsx)(_t,{children:o.map((({text:e,link:t,onClick:i,isCloseStyle:o})=>o?(0,m.jsx)("div",Object.assign({onClick:i},{children:(0,m.jsx)(kt,{},void 0)}),e):(0,m.jsx)(wt,{children:t?(0,m.jsx)(St,Object.assign({target:"_blank",onClick:i,rel:"noopener noreferer noreferrer",href:t},{children:e}),void 0):(0,m.jsx)(St,Object.assign({onClick:i},{children:e}),void 0)},e)))},void 0)]},void 0)}),void 0)})),jt="inline-block",Pt=(0,We.Z)("div",{target:"e1qek5np0"})((({theme:{colors:e}})=>({width:"100vw",top:0,left:0,position:"fixed",zIndex:999,background:e.ConstBGInverse2,display:"flex",justifyContent:"center",boxShadow:"0 2px 8px rgba(0, 0, 0, .06)",":after":Object.assign({content:'""',background:"rgba(33, 33, 33, .08)"},(0,$e.Cx)("bottom"))})),"label:DivBannerContainer;"),Tt=(0,We.Z)("div",{target:"e1qek5np1"})([{width:$e.XP,maxWidth:$e.XP,padding:"12px 12px 12px 16px",display:"flex",justifyContent:"space-between"},({theme:{direction:e}})=>(0,$e.YJ)({direction:e,paddingStart:"20px",paddingEnd:"24px"})],"label:DivBannerWrapper;"),Ot=(0,We.Z)("div",{target:"e1qek5np2"})([{display:"flex",alignItems:"center"},({theme:{direction:e}})=>(0,$e.YJ)({direction:e,marginEnd:"8px"})],"label:DivLeftContainer;"),Lt=(0,We.Z)("div",{target:"e1qek5np3"})([{display:"flex",alignItems:"flex-start"}],"label:DivRightContainer;"),It="48px",At=(0,We.Z)("div",{target:"e1qek5np4"})((({theme:{direction:e}})=>({":not(:empty)":Object.assign({display:jt,width:It,height:It,flex:"0 0 48px",padding:"0"},(0,$e.YJ)({direction:e,marginEnd:"16px"}))})),"label:DivImgWrapper;"),Et=(0,We.Z)("img",{target:"e1qek5np5"})({width:It,height:It},"label:ImgIcon;"),Mt=(0,We.Z)("div",{target:"e1qek5np6"})((({theme:e})=>[(0,$e.GI)({theme:e,fontFamily:"Proxima",fontWeight:"normal",color:"ConstTextInverse"}),{display:jt,fontSize:"15px",lineHeight:"18px",alignSelf:"center",a:{display:jt,alignSelf:"center",fontSize:"15px",lineHeight:"18px",fontWeight:700,color:`${e.colors.ConstTextInverse} !important`}}]),"label:DivContentWrapper;"),Rt=(0,We.Z)("h4",{target:"e1qek5np7"})((({theme:e})=>[(0,$e.GI)({theme:e,fontFamily:"Proxima",fontWeight:"semiBold",color:"ConstTextInverse"})]),"label:H4Title;"),Ft=(0,We.Z)(ut.Z,{target:"e1qek5np8"})({width:"24px",height:"24px",display:"flex",justifyContent:"center",alignItems:"center"},"label:StyledCloseIcon;"),Dt=(0,We.Z)("div",{target:"e1qek5np9"})((({theme:{direction:e}})=>({margin:"9px 0","&:not(:last-child)":(0,$e.YJ)({direction:e,marginEnd:"24px"})})),"label:DivButton;"),Bt=(0,We.Z)("a",{target:"e1qek5np10"})((({theme:e})=>[(0,$e.GI)({theme:e,color:"Primary",typography:"P2"})]),{textDecoration:"none",whiteSpace:"nowrap",textAlign:"center"},"label:AButtonLink;"),zt=(0,U.memo)((function({title:e,content:t,icon:i,buttons:o,onShow:n}){const a=(0,U.useRef)(null);return(0,U.useEffect)((()=>{var e,t;null==n||n(null!==(t=null===(e=a.current)||void 0===e?void 0:e.clientHeight)&&void 0!==t?t:0)}),[]),(0,m.jsx)(Pt,Object.assign({ref:a},{children:(0,m.jsxs)(Tt,{children:[(0,m.jsxs)(Ot,{children:[(0,m.jsx)(At,{children:i&&(0,m.jsx)(Et,{alt:"icon",src:i},void 0)},void 0),(0,m.jsxs)(Mt,{children:[e&&(0,m.jsx)(Rt,{children:e},void 0),(0,m.jsx)("p",{children:Array.isArray(t)?t.map(((e,t)=>(0,m.jsx)(U.Fragment,{children:e},t))):t},void 0)]},void 0)]},void 0),(0,m.jsx)(Lt,{children:o.map((({text:e,link:t,onClick:i,isCloseStyle:o})=>o?(0,m.jsx)("div",Object.assign({onClick:i},{children:(0,m.jsx)(Ft,{fill:"#fff"},void 0)}),e):(0,m.jsx)(Dt,{children:t?(0,m.jsx)(Bt,Object.assign({target:"_blank",onClick:i,rel:"noopener noreferer noreferrer",href:t},{children:e}),void 0):(0,m.jsx)(Bt,Object.assign({onClick:i},{children:e}),void 0)},e)))},void 0)]},void 0)}),void 0)}));var Nt=i(80827),Ut=i(41928);const Wt=(0,We.Z)("div",{target:"es36pgp0"})({pointerEvents:"auto",position:"absolute",boxSizing:"border-box",left:"0",bottom:"0",width:"100%",background:"#fff",borderRadius:"12px 12px 0 0",padding:"16px 20px 20px"},"label:DivContainer;"),$t=(0,We.Z)("div",{target:"es36pgp1"})({textAlign:"center",position:"relative",":not(:empty)":{paddingBottom:"16px",marginBottom:"12px","::after":Object.assign({content:'""',background:"rgba(33, 33, 33, .08)"},(0,$e.Cx)("bottom"))}},"label:DivTitleContainer;"),qt=(0,We.Z)("img",{target:"es36pgp2"})({display:"inline-block"},"label:ImgIcon;"),Ht=(0,We.Z)("h4",{target:"es36pgp3"})((({theme:e})=>(0,$e.GI)({theme:e,typography:"P2",fontFamily:"Proxima",fontWeight:"semiBold"})),"label:H4Title;"),Gt=(0,We.Z)("p",{target:"es36pgp4"})((({theme:e})=>(0,$e.GI)({theme:e,typography:"P3",fontFamily:"Proxima"})),{marginBottom:"32px"},"label:PContent;"),Zt=(0,We.Z)("div",{target:"es36pgp5"})({display:"flex",width:"100%",flexDirection:"row",alignItems:"center",justifyContent:"flex-end"},"label:DivButtonWrapper;"),Vt=(0,We.Z)(Ut.W,{target:"es36pgp6"})((({theme:{direction:e}})=>({"& + &":(0,$e.YJ)({direction:e,marginStart:"24px"})})),"label:StyledButton;"),Qt=(0,U.memo)((function({icon:e,title:t,content:i,buttons:o}){return(0,m.jsx)(Nt.AR,Object.assign({compact:!0,isOpen:!0},{children:(0,m.jsxs)(Wt,{children:[(0,m.jsxs)($t,{children:[e&&(0,m.jsx)(qt,{src:e},void 0),t&&(0,m.jsx)(Ht,{children:t},void 0)]},void 0),(0,m.jsx)(Gt,{children:i},void 0),(0,m.jsx)(Zt,{children:o.map((({text:e,highlight:t,line:i,onClick:o})=>(0,m.jsx)(Vt,Object.assign({size:"medium",buttonTheme:t?"primary":i?"line":"default",onClick:o},{children:e}),e)))},void 0)]},void 0)}),void 0)}));var Yt=i(85640);const Kt=(0,We.Z)("div",{target:"e1uf1l9s0"})((({theme:e,theme:{colors:t}})=>[{position:"relative",width:"400px",background:t.BGTertiary,display:"flex",flexDirection:"column",alignItems:"center",paddingTop:"32px",borderRadius:"8px",whiteSpace:"pre-line"},(0,$e.GI)({theme:e,fontFamily:"Proxima"})]),"label:DivContainer;"),Jt=(0,We.Z)(Kt,{target:"e1uf1l9s1"})({width:"84vw",maxWidth:"360px",maxHeight:"480px",overflow:"auto",paddingTop:"20px"},"label:DivContainerMobile;"),Xt=(0,We.Z)("img",{target:"e1uf1l9s2"})({height:"48px"},"label:ImgIcon;"),ei=(0,We.Z)("h4",{target:"e1uf1l9s3"})((({theme:e})=>[(0,$e.GI)({theme:e,typography:"P0",fontWeight:"bold"}),{textAlign:"center",padding:"0 32px",flex:"0 0 auto",order:0,wordBreak:"break-word"}]),"label:H4Title;"),ti=(0,We.Z)("h2",{target:"e1uf1l9s4"})((({theme:e})=>[(0,$e.GI)({theme:e,fontWeight:"bold"}),{textAlign:"center",padding:"0 20px",flex:"0 0 auto",order:0,wordBreak:"break-word",fontSize:"20px",lineHeight:"24px"}]),"label:H2Title;"),ii=(0,We.Z)("p",{target:"e1uf1l9s5"})((({theme:e})=>({color:e.colors.TextSecondary,fontSize:"15px",lineHeight:"18px",padding:"0 32px",textAlign:"center",marginTop:"7px"})),"label:PContent;"),oi=(0,We.Z)(ii,{target:"e1uf1l9s6"})({maxHeight:"300px",overflow:"auto",padding:"0 20px"},"label:PContentMobile;"),ni=(0,We.Z)("div",{target:"e1uf1l9s7"})({display:"flex",width:"100%",flexDirection:"row",alignItems:"center",justifyContent:"space-between",padding:"24px 32px 32px"},"label:DivButtonWrapper;"),ai=(0,We.Z)(ni,{target:"e1uf1l9s8"})((({theme:{colors:e}})=>({borderTop:`.5px solid ${e.LineSecondary}`,padding:0,marginTop:"20px",boxSizing:"border-box"})),"label:DivButtonWrapperMobile;"),si=(0,We.Z)("div",{target:"e1uf1l9s9"})({display:"flex",width:"100%",flexDirection:"column",alignItems:"center",justifyContent:"space-between",boxSizing:"border-box",padding:"22px 20px 6px"},"label:DivButtonWrapperVertical;"),ri=(0,We.Z)(Ut.W,{target:"e1uf1l9s10"})((({theme:e,theme:{direction:t}})=>[{flex:"1 1 0%",minWidth:"initial",width:"100%",padding:"0 16px",whiteSpace:"nowrap",overflow:"hidden",":not(:first-of-type)":(0,$e.YJ)({direction:t,marginStart:"16px"})},(0,$e.GI)({theme:e,typography:"P2"})]),"label:StyledButton;"),li=(0,We.Z)(Ut.W,{target:"e1uf1l9s11"})((({theme:{colors:e}})=>[{flex:"1 1 0%",minWidth:"initial",width:"100%",padding:"0 16px",whiteSpace:"nowrap",overflow:"hidden",fontSize:"15px",lineHeight:"18px",":not(:first-child)":{marginTop:"2px",border:"none",color:e.TextTertiary}}]),"label:StyledButtonMobile;"),di=(0,We.Z)(ri,{target:"e1uf1l9s12"})((({isBold:e=!1,theme:{colors:t}})=>({width:"50%",border:"none",borderRadius:0,borderRight:`.5px solid ${t.LineSecondary}`,margin:"0 !important",color:e?t.TextPrimary:t.TextTertiary})),"label:StyledButtonLine;"),ci=(0,U.memo)((function({title:e,content:t,isMobile:i=!1,icon:o,buttons:n}){const a=i&&n.some((e=>e.highlight)),s=i?a?si:ai:ni,r=i?a?li:di:ri;return i?(0,m.jsx)(Yt.u_,Object.assign({maskCloseable:!1,visible:!0},{children:(0,m.jsxs)(Jt,{children:[o&&(0,m.jsx)(Xt,{src:o},void 0),e&&(0,m.jsx)(ti,{children:e},void 0),t&&(0,m.jsx)(oi,{children:t},void 0),(0,m.jsx)(s,{children:n.map((({text:e,isBold:t,highlight:i,line:o,onClick:n})=>(0,m.jsx)(r,Object.assign({isBold:t,buttonTheme:i?"primary":o?"default":"line",onClick:n},{children:e}),e)))},void 0)]},void 0)}),void 0):(0,m.jsx)(Nt.AR,Object.assign({compact:!0,closeOnBackdropClick:!1,isOpen:!0},{children:(0,m.jsxs)(Kt,{children:[o&&(0,m.jsx)(Xt,{src:o},void 0),e&&(0,m.jsx)(ei,{children:e},void 0),t&&(0,m.jsx)(ii,{children:t},void 0),(0,m.jsx)(s,{children:n.map((({text:e,highlight:t,line:i,onClick:o})=>(0,m.jsx)(r,Object.assign({buttonTheme:t?"primary":i?"default":"line",onClick:o},{children:e}),e)))},void 0)]},void 0)}),void 0)})),pi=function(e){var t,i;const{onHide:o}=e,[n,a]=(0,U.useState)(!0),s=(0,U.useCallback)((()=>{null==o||o(),a(!1)}),[o]),{language:r}=null!==(t=(0,ze.Lh)((()=>["language"]),[]))&&void 0!==t?t:{},{isMobile:l}=null!==(i=(0,Ne.h)((()=>["isMobile"]),[]))&&void 0!==i?i:{},d=function({onHide:e}){var t,i;const{popupConfig:o}=(0,ee.mp)(Xe),{language:n="en"}=null!==(t=(0,ze.Lh)((()=>["language"]),[]))&&void 0!==t?t:{},{isMobile:a=!1}=null!==(i=(0,Ne.h)((()=>["isMobile"]),[]))&&void 0!==i?i:{},s=function({onHide:e,lang:t,isMobile:i}){const{popupConfig:o}=(0,ee.mp)(Xe),n=(0,ae.fz)(Je.Q),a=(0,ae.fz)(Ue.a);return(0,U.useMemo)((()=>{if(!o)return[];const s=i?0:1,r=i?-1:0,{actions:l=[],first_button_highlight:d,business:c,policy_version:p,style:u}=o;return(d&&i?l:[...l].reverse()).map((({text:i,is_bold:o=!1,link:l,link_type:g,approve:m,extra:h,operation:_,dismiss:v,is_close_style:y,new_web_tab:b},f)=>{const x="string"==typeof l?et({link:l,lang:t}):void 0;return{text:i,isBold:o,highlight:Boolean(d)&&s===f,line:!d||r===f,link:x,isCloseStyle:y,onClick:tt({onHide:e,report:a,popupService:n,common:{business:c,policy_version:p,style:u},action:{text:i,approve:m,dismiss:v,extra:h,link:l,link_type:g,new_web_tab:b,operation:_}})}}))}),[i,t,e,o,n,a])}({onHide:e,lang:n,isMobile:a}),r=function({lang:e,onHide:t}){const{popupConfig:i}=(0,ee.mp)(Xe),o=(0,ae.fz)(Je.Q),n=(0,ae.fz)(Ue.a);return(0,U.useMemo)((()=>{if(!i)return null;const{body_link_list:a,body:s}=i;if(!(null==a?void 0:a.length)||!/%s/.test(s))return s;const r=[],l=s;let d=0;const c=/%s/g;return a.forEach((({link:a="",name:s,dismiss:p,approve:u,operation:g,new_web_tab:h})=>{const _=c.exec(l);if(!_)return;const v=et({link:a,lang:e}),y=tt({onHide:t,popupService:o,report:n,common:Be()(i,["business","policy_version","style"]),action:{text:s,approve:u,dismiss:p,operation:g,new_web_tab:h,link:v}}),b=(0,m.jsx)(qe,Object.assign({target:"_blank",rel:"noopener noreferer",href:v,onClick:y},{children:s}),void 0);r.push(l.slice(d,_.index)),r.push(b),d=Number(_.index)+_[0].length})),r.push(l.slice(d)),r}),[e,t,i,o,n])}({lang:n,onHide:e});if(!o)return null;const{title:l,icon_url:d,body:c,style:p}=o;return{title:l,icon:d,body:c,style:p,content:r,buttons:s}}({onHide:s}),c=(0,ee.qj)(Xe);if((0,U.useEffect)((()=>{c.getPopupConfig(r)}),[c,r]),!d||"none"===d.style||!n)return null;const{title:p,icon:u,content:g,style:h,buttons:_}=d;switch(h){case"pc_banner":return(0,m.jsx)(Ct,{title:p,content:g,icon:u,buttons:_,onShow:e.onShow},void 0);case"mobile_banner":return(0,m.jsx)(zt,{title:p,content:g,icon:u,buttons:_,onShow:e.onShow},void 0);case"pop":return(0,m.jsx)(ci,{isMobile:l,title:p,content:g,icon:u,buttons:_},void 0);case"float":case"bottom":return(0,m.jsx)(Qt,{title:p,content:g,icon:u,buttons:_},void 0);default:return null}};var ui=i(68676);const gi=function({path:e}){const t=(0,U.useCallback)((()=>(window.location.href=`/404?fromUrl=${encodeURIComponent(window.location.pathname)}`,null)),[]);return(0,m.jsx)(ne.AW,{path:e,render:t},void 0)};var mi=i(55198),hi=i(9343),_i=i(99116);const vi=(0,We.Z)("div",{target:"eaxh4gs0"})((({theme:{direction:e}})=>[{position:"relative",borderRadius:"8px",overflow:"hidden"},(0,$e.YJ)({direction:e,start:"unset"})]),"label:DivFrameContainer;");vi.defaultProps=Object.assign(Object.assign({},vi.defaultProps),{"data-e2e":"login-frame"});const yi=(0,We.Z)("button",{target:"eaxh4gs1"})((({theme:{direction:e}})=>[$e.Ph,{position:"absolute",top:"24px",width:"40px",height:"40px",cursor:"pointer",background:"rgba(22, 24, 35, .06)",borderRadius:"100%",transition:"all ease-in-out 200ms",":hover":{background:"rgba(22, 24, 35, .1)"},":active":{background:"rgba(22, 24, 35, .14)"}},(0,$e.YJ)({direction:e,end:"24px"})]),"label:ButtonCloseWrapper;"),bi=(0,We.Z)(ut.Z,{target:"eaxh4gs2"})({position:"absolute",top:"8px",right:"8px",width:"24px",height:"24px"},"label:StyledXMark;"),fi=(0,We.Z)("iframe",{target:"eaxh4gs3"})({overflow:"hidden",display:"block",width:"472px",height:"calc(100vh - 64px)",maxHeight:"660px",background:"transparent",border:"none"},"label:IframeLoginSite;"),xi=function(){const[e,t]=(0,ee.b7)(hi.r),i=(0,U.useCallback)(((e="click_x")=>{t.closeModal({enter_method:e})}),[t]),o=(0,U.useCallback)((()=>{i("click_x")}),[i]),n=(0,U.useCallback)((e=>{let i="click_x";i=0===e||2===e?"click_x":"click_blank",t.closeModal({enter_method:i})}),[t]);return(0,U.useEffect)((()=>{function e(e){if("object"==typeof e.data&&e.origin===location.origin)switch(e.data.event){case"deleteSuccess":i(),window.location.href="https://www.tiktok.com/logout";break;case"loginCancel":i();break;case"hasLogin":i(),window.location.reload();break;case"loginSuccess":if(i("login_success"),e.data.message)return mi.h.open({content:e.data.message,duration:3,widthType:"half",style:{zIndex:10011}}),void setTimeout((()=>{e.data.redirectUrl&&e.data.redirectUrl!==location.href?/^https?:\/\//.test(e.data.redirectUrl)&&(window.location.href=e.data.redirectUrl):window.location.reload()}),3e3);e.data.redirectUrl&&e.data.redirectUrl!==location.href?/^https?:\/\//.test(e.data.redirectUrl)&&(window.location.href=e.data.redirectUrl):window.location.reload();break;case"hideOuterClose":t.setCloseable(!1)}}return window.addEventListener("message",e,!1),()=>{window.removeEventListener("message",e,!1)}}),[t,i]),(0,m.jsx)(Yt.u_,Object.assign({visible:e.isOpen,zIndex:10010,maskCloseable:!1,keyboardCloseable:e.closeable,onClose:n},{children:(0,m.jsxs)(vi,{children:[e.closeable&&(0,m.jsx)(yi,Object.assign({onClick:o},{children:(0,m.jsx)(bi,{},void 0)}),void 0),(0,m.jsx)(fi,{src:e.url,style:e.iframeStyle},e.url)]},void 0)}),void 0)};var ki,wi=i(52372),Si=i.n(wi),Ci=i(32863),ji=i(32273);!function(e){e.OrderDetails="ecom_email_redesign_order_details_page",e.LogisticsDetails="ecom_email_redesign_logistics_page",e.OrderRating="ecom_email_redesign_write_review_page",e.RefundDetails="ecom_email_redesign_refund_detail_page",e.RequestRefund="ecom_email_redesign_request_refund",e.Orders="ecom_email_redesign_orders",e.Vouchers="ecom_email_redesign_vouchers",e.ShoppingCart="ecom_email_redesign_shopping_cart"}(ki||(ki={}));const Pi={title:{ecom_email_redesign_order_details_page:"email_redesign_webapp_order_details_page_title",ecom_email_redesign_logistics_page:"email_redesign_webapp_logistics_page_title",ecom_email_redesign_write_review_page:"email_redesign_webapp_write_review_page_title",ecom_email_redesign_refund_detail_page:"email_redesign_webapp_refund_detail_page_title",ecom_email_redesign_request_refund:"email_redesign_webapp_request_refund_title",ecom_email_redesign_orders:"email_redesign_webapp_orders_title",ecom_email_redesign_vouchers:"email_redesign_webapp_vouchers_title",ecom_email_redesign_shopping_cart:"email_redesign_webapp_shopping_cart_title"},desc:{ecom_email_redesign_order_details_page:"email_redesign_webapp_order_details_page_context",ecom_email_redesign_logistics_page:"email_redesign_webapp_logistics_page_context",ecom_email_redesign_write_review_page:"email_redesign_webapp_write_review_page_context",ecom_email_redesign_refund_detail_page:"email_redesign_webapp_refund_detail_page_context",ecom_email_redesign_request_refund:"email_redesign_webapp_request_refund_context",ecom_email_redesign_orders:"email_redesign_webapp_orders_context",ecom_email_redesign_vouchers:"email_redesign_webapp_vouchers_context",ecom_email_redesign_shopping_cart:"email_redesign_webapp_shopping_cart_context"}},Ti=(0,We.Z)("div",{target:"eiv77n20"})({display:"flex",flexDirection:"column",alignItems:"center",width:"311px",padding:"40px 28px 12px",textAlign:"center",wordBreak:"break-word"},"label:DivContainer;"),Oi=(0,We.Z)("p",{target:"eiv77n21"})((({theme:e})=>[{marginBottom:"16px",fontSize:"17px",lineHeight:"18px"},(0,$e.GI)({theme:e,fontWeight:"semiBold"})]),"label:PTitle;"),Li=(0,We.Z)("p",{target:"eiv77n22"})((({theme:e})=>[{margin:"16px 0 4px",fontSize:"12px",lineHeight:"13px"},(0,$e.GI)({theme:e,color:"TextSecondary"})]),"label:POtherDesc;"),Ii=Pi.title.ecom_email_redesign_order_details_page,Ai=Pi.desc.ecom_email_redesign_order_details_page,Ei=function({url:e}){var t,i;const o=(0,ji.Q)(),{search:n}=(0,ne.TH)(),[a,s]=(0,U.useState)(!0),[r,l]=(0,U.useState)(""),d=new URLSearchParams(n);(0,U.useEffect)((()=>{var e;l(null!==(e=d.get("scene"))&&void 0!==e?e:""),history.replaceState(null,"","/")}),[]);const c=(0,U.useCallback)((()=>{s(!1)}),[]);return(0,m.jsx)(Yt.u_,Object.assign({visible:a,onClose:c},{children:(0,m.jsxs)(Ti,{children:[(0,m.jsx)(Oi,{children:o(null!==(t=Pi.title[r])&&void 0!==t?t:Ii)},void 0),(0,m.jsx)(Si(),{size:170,value:e,style:{padding:"12px",borderRadius:"12px",border:"1px solid #f2f2f2"}},void 0),(0,m.jsx)(Li,{children:o(null!==(i=Pi.desc[r])&&void 0!==i?i:Ai)},void 0),(0,m.jsx)("img",{src:Ci,width:131,height:40},void 0)]},void 0)}),void 0)};var Mi,Ri;function Fi(){return Fi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Fi.apply(this,arguments)}var Di=i(26890),Bi=i(57718),zi=i(74005),Ni=i(39712),Ui=i(45949),Wi=i(10668),$i=i(24703),qi=i(7650),Hi=i(38554),Gi=i(71300),Zi=i(23434),Vi=i(98224);const Qi=()=>{const e=(0,U.useRef)(""),t=[Le.Ad.searchHome,Le.Ad.searchUser,Le.Ad.searchVideo],{pathname:i}=(0,ne.TH)(),o=t.includes(i)&&!t.includes(e.current)||!t.includes(i),n=(0,U.useCallback)((t=>e.current=t),[]);return{needRefresh:o,setPathname:n,pathname:i}},Yi=({intersectionHandler:e,element:t,threshold:i})=>{const o=(0,U.useRef)();(0,U.useEffect)((()=>{const n=t=>{t[0].isIntersecting&&e()};try{const e={rootMargin:"0px",threshold:i};o.current=new IntersectionObserver(n,e),t.current&&o.current&&o.current.observe(t.current)}catch(e){console.error(e)}return()=>{var e;null===(e=o.current)||void 0===e||e.disconnect()}}),[])};var Ki=i(89749),Ji=i.n(Ki),Xi=i(9472),eo=i(48659);function to(){const{pathname:e}=(0,ne.TH)();return(0,U.useMemo)((()=>(0,ne.LX)(e,{path:eo.$J.liveGoLive,exact:!0})),[e])}var io=i(53095),oo=i(82346),no=i(68854),ao=i(11348),so=i(57244);let ro=class{constructor(e){this.service=e,this.reportErrorLog=e=>{var t;this.service.sendLog(null!==(t=null==e?void 0:e.stack)&&void 0!==t?t:null==e?void 0:e.message,"error")}}};ro=(0,w.__decorate)([(0,so.G)(),(0,w.__metadata)("design:paramtypes",[k.n])],ro);var lo=i(9663),co=i.n(lo);const po="REPORT_FIRST_FRAME_SUCCESS_FOR_OPEN_LIVE_FLAG";function uo(){(0,Ui.D$)(po,"1")}function go(){(0,Ui.e8)(po)}var mo;!function(e){e.TraceSuccess="live_sdk_go_live_trace_success",e.TraceError="live_sdk_go_live_trace_fail",e.CreateRoomInfoSuccess="live_sdk_create_room_info_success",e.CreateRoomInfoFail="live_sdk_craete_room_info_fail",e.GoLiveSuccess="live_sdk_openLive_success",e.GoLivePreviewFirstFrameSuccess="live_sdk_openLive_preview_first_frame_success",e.GoLivePlayerError="live_sdk_go_live_player_error",e.GoLiveError="live_sdk_openLive_error",e.GoLiveWarning="live_sdk_openLive_warning",e.GoLiveStreamkeyError="live_sdk_openLive_streamkey_error",e.GoLiveStreamurlError="live_sdk_openLive_serverUrl_error",e.EndLiveSuccess="live_sdk_end_live_success",e.EndLiveFail="live_sdk_end_live_fail",e.LoadingTooLong="live_sdk_go_live_page_loading_too_long",e.EndLiveDataSuccess="live_sdk_end_live_data_success",e.EndLiveDataFailed="live_sdk_end_live_data_fail"}(mo||(mo={}));let ho=class{constructor(e){this.service=e,this.defaultTag={where:"GoLive"},this.defaultMetrics={count:1},this.handlePlayerError=(e,t)=>{this.service.emitEvent("live_sdk_go_live_player_error",this.defaultMetrics,Object.assign(Object.assign({},this.defaultTag),{roomId:String(t),code:String(e.status),message:e.message}))},this.handleTraceSuccess=()=>{this.service.emitEvent("live_sdk_go_live_trace_success",this.defaultMetrics,this.defaultTag)},this.handleTraceError=({errorCode:e,errorMessage:t})=>{this.service.emitEvent("live_sdk_go_live_trace_fail",this.defaultMetrics,Object.assign(Object.assign({},this.defaultTag),{errorCode:e,errorMessage:t}))},this.handleCreateRoomSuccess=()=>{this.service.emitEvent("live_sdk_openLive_success",this.defaultMetrics,this.defaultTag)},this.handleCreateRoomFirstFrameSuccess=()=>{"1"===(0,Ui.le)(po)&&(this.service.emitEvent("live_sdk_openLive_preview_first_frame_success",this.defaultMetrics,this.defaultTag),go())},this.reportGoLiveError=e=>{this.service.sendLog(null==e?void 0:e.message,"error")},this.handleCreateRoomFail=({errorCode:e,errorMessage:t})=>{this.service.sendLog(null!=t?t:"","error"),this.service.emitEvent("live_sdk_openLive_error",this.defaultMetrics,Object.assign(Object.assign({},this.defaultTag),{errorCode:e,errorMessage:t}))},this.handleCreateRoomWarning=({errorCode:e,errorMessage:t})=>{this.service.emitEvent("live_sdk_openLive_warning",this.defaultMetrics,Object.assign(Object.assign({},this.defaultTag),{errorCode:e,errorMessage:t}))},this.handleGoLiveStreamkeyError=()=>{this.service.emitEvent("live_sdk_openLive_streamkey_error",this.defaultMetrics,this.defaultTag)},this.handleGoLiveStreamurlError=()=>{this.service.emitEvent("live_sdk_openLive_serverUrl_error",this.defaultMetrics,this.defaultTag)},this.handleGetCreateRoomInfoSuccess=()=>{this.service.emitEvent("live_sdk_create_room_info_success",this.defaultMetrics,this.defaultTag)},this.handleGetCreateRoomInfoFail=({errorCode:e,errorMessage:t})=>{this.service.emitEvent("live_sdk_craete_room_info_fail",this.defaultMetrics,Object.assign(Object.assign({},this.defaultTag),{errorCode:e,errorMessage:t}))},this.handleEndLiveSuccess=()=>{this.service.emitEvent("live_sdk_end_live_success",this.defaultMetrics,this.defaultTag)},this.handleEndLiveFail=()=>{this.service.emitEvent("live_sdk_end_live_fail",this.defaultMetrics,this.defaultTag)},this.handleLoadingTooLong=({errorCode:e,errorMessage:t})=>{this.service.emitEvent("live_sdk_go_live_page_loading_too_long",this.defaultMetrics,Object.assign(Object.assign({},this.defaultTag),{errorCode:e,errorMessage:t}))},this.handleEndLiveDataFail=({errorCode:e,errorMessage:t})=>{this.service.emitEvent("live_sdk_end_live_data_fail",this.defaultMetrics,Object.assign(Object.assign({},this.defaultTag),{errorCode:e,errorMessage:t}))},this.handleEndLiveDataSuccess=()=>{this.service.emitEvent("live_sdk_end_live_data_success",this.defaultMetrics,this.defaultTag)}}};function _o(e){return(0,io.z)((t=>{var i,o;return 0!==t.status_code&&(null===(i=t.data)||void 0===i?void 0:i.prompts)?((!e||e&&t.status_code&&(null==e?void 0:e(t.status_code)))&&mi.h.open({content:null===(o=t.data)||void 0===o?void 0:o.prompts,duration:3}),(0,oo.of)(Object.assign(Object.assign({},t),{error:t}))):(0,oo.of)(t)}))}ho=(0,w.__decorate)([(0,so.G)(),(0,w.__metadata)("design:paramtypes",[k.n])],ho);let vo=class{constructor(e){this.fetch=e,this.getLivePermission=()=>this.fetch.get("/webcast/room/live_podcast/",{baseUrlType:4}).pipe(_o()),this.applyPermission=e=>this.fetch.post("/webcast/room/live_permission/apply/",{query:e,baseUrlType:4}).pipe(_o()),this.getApplyInfo=e=>this.fetch.get("/webcast/room/live_permission/apply_info/",{query:e,baseUrlType:4}).pipe(_o())}};vo=(0,w.__decorate)([(0,so.G)(),(0,w.__metadata)("design:paramtypes",[p.r])],vo);let yo=class extends He.D{constructor(e,t,i){super(),this.service=e,this.errorSlardar=t,this.goLiveSlardar=i,this.defaultState={}}setPermissionData(e,t){e.permissionInfo={showComputerLiveEntrance:t.showComputerLiveEntrance,hasOBSLivePermission:t.hasOBSLivePermission,hasLiveApplyPermission:t.hasLiveApplyPermission}}getLivePermission(e){return e.pipe((0,io.z)((()=>this.service.getLivePermission().pipe((0,io.z)((({data:e,error:t})=>{var i,o,n,a;if(t)return(0,oo.of)(this.getActions().setPermissionData({showComputerLiveEntrance:!1,hasOBSLivePermission:!1,hasLiveApplyPermission:!1}));if(null==e?void 0:e.can_be_live_podcast){const t=null!==(o=null===(i=null==e?void 0:e.live_scenario)||void 0===i?void 0:i.enable_live_third_party)&&void 0!==o&&o,s=!t&&null!==(a=null===(n=null==e?void 0:e.live_permission_apply)||void 0===n?void 0:n.enable_third_party)&&void 0!==a&&a;return(0,oo.of)(this.getActions().setPermissionData({showComputerLiveEntrance:t||s,hasOBSLivePermission:t,hasLiveApplyPermission:s}))}return(0,oo.of)(this.getActions().setPermissionData({showComputerLiveEntrance:!1,hasOBSLivePermission:!1,hasLiveApplyPermission:!1}))})),(0,no.K)((e=>(this.goLiveSlardar.handleTraceError({errorCode:"1001",errorMessage:e.message}),this.errorSlardar.reportErrorLog(e),ao.E)))))))}};(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,Object]),(0,w.__metadata)("design:returntype",void 0)],yo.prototype,"setPermissionData",null),(0,w.__decorate)([(0,Ge.Qm)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Ve.y]),(0,w.__metadata)("design:returntype",void 0)],yo.prototype,"getLivePermission",null),yo=(0,w.__decorate)([(0,Ze.Y)("LivePermission"),(0,w.__metadata)("design:paramtypes",[vo,ro,ho])],yo);var bo,fo,xo,ko,wo,So=i(35435),Co=i(93859),jo=i(10026),Po=i(5549),To=i(20948),Oo=i(87930);!function(e){e.GoLivePlayerError="livesdk_go_live_player_error",e.TakePageShow="livesdk_pm_live_takepage_show",e.ScreenshotClick="livesdk_cover_modify_screenshot_click",e.ScreenshotButtonShow="livesdk_cover_modify_screenshot_show",e.Take="livesdk_live_take",e.CoverChange="livesdk_cover_modify_click",e.WebTopicClick="livesdk_web_topic_click",e.AutoStopChange="livesdk_thirdparty_auto_stop",e.ServerUrlCopy="livesdk_server_url_copy",e.StreamKeyCopy="livesdk_stream_key_copy",e.StreamKeyChangePop="livesdk_stream_key_change_pop",e.ThirdPartyStatus="livesdk_thirdparty_status",e.ShareLinkCopy="livesdk_anchor_link_copy",e.EndLiveClick="livesdk_end_live_click",e.LiveOver="livesdk_live_over",e.AppealClick="livesdk_anchor_appeal_click",e.OBSRevokeAnchorPop="livesdk_obs_revoke_anchor_pop",e.OBSRevokeRemind="livesdk_obs_revoke_remind",e.LiveCenterEntranceShow="livesdk_anchor_live_center_entrance_show",e.LiveTakepageShow="livesdk_pm_live_takepage_show",e.LiveContentClick="livesdk_live_content_click",e.LiveContentResultShow="livesdk_live_content_result_show",e.LiveTopicClick="livesdk_live_topic_click",e.LiveMatureThemeIconClick="livesdk_mature_theme_icon_click",e.LiveMatureThemePopup="livesdk_mature_theme_popup",e.LiveMatureThemePopupClick="livesdk_mature_theme_popup_click"}(bo||(bo={})),function(e){e.FromObs="third_party",e.FromDirect="video_live"}(fo||(fo={})),function(e){e.On="on",e.Off="off"}(xo||(xo={})),function(e){e.On="on",e.Off="off"}(ko||(ko={})),function(e){e[e.Temp=0]="Temp",e[e.Permanent=1]="Permanent"}(wo||(wo={}));var Lo;!function(e){e.GoLiveStreamKeyInfo="__tiktok_stream_key",e.GoLiveTopicId="goLive_topic_id",e.GoLiveGameTagId="goLive_game_tag_id",e.GoLiveTopicShow="__tiktok_topic_info",e.GoLiveEndStreamSetting="go_live_stream_setting",e.GoLivePermissionApply="go_live_permission_apply",e.HideMatureThemesRedDot="hide_go_live_mature_themes_red_dot",e.StudioDownloadVisited="studio_download_visited",e.CompleteSubscritionGuide="live_anchor_complete_subscription_guide",e.SubscriptionSubOnlyChat="live_subscription_sub_only_chat",e.SharePlatform="webapp-share-platform",e.LiveCreatorHubPopup="webapp-live-creator-hub-popup"}(Lo||(Lo={}));const Io=6048e5;let Ao=class{constructor(){this.getGoLiveStreamKeyInfo=(e,t)=>{const i=(0,Ui.le)("__tiktok_stream_key");if(i){const{streamKey:e,expiration:o,roomId:n}=JSON.parse(i);if(o-Date.now()>1e3&&t===n)return{streamKey:e,expiration:o-Date.now(),roomId:n}}return{streamKey:e,roomId:t,expiration:Io}},this.setGoLiveStreamKeyInfo=(e,t)=>{const i={streamKey:e,roomId:t,expiration:Date.now()+Io};return(0,Ui.D$)("__tiktok_stream_key",JSON.stringify(i))},this.getGoLiveTopicId=e=>(0,Ui.le)("goLive_topic_id"+e),this.setGoLiveTopicId=(e,t)=>(0,Ui.D$)("goLive_topic_id"+t,e),this.getGoLiveGameTagId=e=>(0,Ui.le)("goLive_game_tag_id"+e),this.setGoLiveGameTagId=(e,t)=>(0,Ui.D$)("goLive_game_tag_id"+t,e),this.getGoLiveTopicShow=e=>!!e&&"0"===(0,Ui.le)(`__tiktok_topic_info${e}`,"0"),this.setGoLiveTopicShow=e=>(0,Ui.D$)(`__tiktok_topic_info${e}`,"1"),this.setGoLiveEndStreamSetting=e=>(0,Ui.D$)("go_live_stream_setting",e?"1":"0"),this.getGoLiveEndStreamSetting=()=>"1"===(0,Ui.le)("go_live_stream_setting","0"),this.setHideGoLiveMatureThemesRedDot=()=>(0,Ui.D$)("hide_go_live_mature_themes_red_dot","1"),this.getHideGoLiveMatureThemesRedDot=()=>"1"===(0,Ui.le)("hide_go_live_mature_themes_red_dot","0"),this.getLiveRoomPreviousPage=()=>{try{const{twoPrev:e}=JSON.parse((0,Ui.St)(u.m8));return!(0,Ui.St)(u.vN)&&e}catch(e){return!1}}}setHasAppliedPermission(e){return(0,Ui.D$)(`go_live_permission_apply${e}`,"1")}getHasApplyPermissionBefore(e){return"1"===(0,Ui.le)(`go_live_permission_apply${e}`,"0")}getHasCompleteSubscriptionGuide(){return"1"===(0,Ui.le)("live_anchor_complete_subscription_guide","0")}setHasCompleteSubscriptionGuide(){return(0,Ui.D$)("live_anchor_complete_subscription_guide","1")}getSubscriptionSubOnlyChat(){return"1"===(0,Ui.le)("live_subscription_sub_only_chat","0")}setSubscriptionSubOnlyChat(e){return(0,Ui.D$)("live_subscription_sub_only_chat",e?"1":"0")}get studioDownloadVisited(){return"1"===(0,Ui.le)("studio_download_visited","0")}setStudioDownloadVisited(){return(0,Ui.D$)("studio_download_visited","1")}getSharePlatform(e){const t=(0,Ui.le)("webapp-share-platform");return t?JSON.parse(t)[e]:{}}setSharePlatform(e,t){return(0,Ui.D$)("webapp-share-platform",JSON.stringify({[e]:t}))}sortSharePlatform(e,t){var i,o;const n=null!==(i=this.getSharePlatform(e))&&void 0!==i?i:{},a=null!==(o=n[t])&&void 0!==o?o:0;if(n[t]=a+1,a===Number.MAX_SAFE_INTEGER){const e=Object.keys(n).sort(((e,t)=>{var i,o;return(null!==(i=n[e])&&void 0!==i?i:0)-(null!==(o=n[t])&&void 0!==o?o:0)}));e.forEach(((e,t)=>{n[e]=t}))}this.setSharePlatform(e,n)}getLiveCreatorHubPopup(){return"0"===(0,Ui.le)("webapp-live-creator-hub-popup","0")}setLiveCreatorHubPopup(e){return(0,Ui.D$)("webapp-live-creator-hub-popup",e?"1":"0")}};Ao=(0,w.__decorate)([(0,so.G)()],Ao);var Eo=i(80279),Mo=i.n(Eo);const Ro=Object.values(eo.$J);function Fo(e){return Ro.some((t=>Mo()(t).test(e.replace(/\?(.*)/,""))))}var Do;!function(e){e.VideoLive="video_live",e.ThirdParty="third_party",e.Audio="audio",e.ScreenShare="screen_share",e.SocialLive="social_live",e.LiveStudio="live_studio"}(Do||(Do={}));var Bo=i(35167);const zo="ls_golive_livecontent_othergame",No="ls_golive_livecontent_other";var Uo=i(70526);let Wo=class{constructor(e){this.fetch=e,this.checkRoomAlive=e=>this.fetch.get("/webcast/room/check_alive/",{query:e,baseUrlType:4}),this.getRoomInfo=e=>this.fetch.get("/webcast/room/info/",{query:e,baseUrlType:4}),this.getTopicTagsAndGameTags=()=>this.fetch.get("/webcast/room/hashtag/list/",{baseUrlType:4}),this.sendLiveChat=e=>this.fetch.post("/webcast/room/chat/",{query:e,baseUrlType:4,headers:{"Content-Type":Uo.zv.FORM_ENCODE}}).pipe(_o()),this.sendLiveEmoteChat=e=>this.fetch.post("/webcast/room/emote_chat/",{query:e,baseUrlType:4,headers:{"Content-Type":Uo.zv.FORM_ENCODE}}).pipe(_o())}};Wo=(0,w.__decorate)([(0,so.G)(),(0,w.__metadata)("design:paramtypes",[p.r])],Wo);let $o=class extends He.D{constructor(e,t,i){super(),this.service=e,this.errorSlardar=t,this.t=i,this.defaultState={roomTopics:[],roomGameTags:[],roomGameTopic:null,roomInfo:null,sensitiveWarning:null,hotLiveRoomInfo:null,loadingState:{roomInfo:0,roomTopics:0}}}setSensitiveWarning(e,t){e.sensitiveWarning=t}setRoomInfo(e,t){e.roomInfo=t}setHotLiveRoomInfo(e,t){e.hotLiveRoomInfo=t}setRoomTopicsAndGameTags(e,t){var i,o,n,a,s,r,l;e.roomTopics=null!==(n=null===(o=null===(i=null==t?void 0:t.data)||void 0===i?void 0:i.hashtag)||void 0===o?void 0:o.map((e=>Object.assign({id:0,title:"",image:{},namespace:0},e))))&&void 0!==n?n:[];const d={id:"0",show_name:(c=this.t)(No),short_name:c(No),full_name:c(No),game_category:[{game_type:0,title:""}]};var c;const p=function(e){return{id:"-1",show_name:e(zo),short_name:e(zo),full_name:e(zo),game_category:[{game_type:3,title:""},{game_type:2,title:""},{game_type:1,title:""}]}}(this.t);e.roomGameTags=(null!==(s=null===(a=null==t?void 0:t.data)||void 0===a?void 0:a.game_tag_list)&&void 0!==s?s:[]).concat([d,p]).map((e=>Object.assign(Object.assign({},e),{id:`${e.id}`}))),e.roomGameTopic=null!==(l=null===(r=null==t?void 0:t.data)||void 0===r?void 0:r.game_hashtag)&&void 0!==l?l:null}setLoadingState(e,t){e.loadingState=Object.assign(Object.assign({},e.loadingState),t)}getRoomInfo(e){return e.pipe((0,So.w)((e=>this.service.getRoomInfo(e).pipe((0,Co.b)((({status_code:e})=>{(0,Oo.k)(e,[0])})),(0,io.z)((({status_code:e,data:t})=>0!==e?ao.E:(0,oo.of)(this.getActions().setRoomInfo(t)))),(0,jo.O)(this.getActions().setLoadingState({roomInfo:1})),(0,Po.l)(this.getActions().setLoadingState({roomInfo:2})),(0,no.K)((e=>(this.errorSlardar.reportErrorLog(e),(0,oo.of)(this.getActions().setLoadingState({roomInfo:3})))))))))}getRoomTopics(e){return e.pipe((0,So.w)((()=>this.service.getTopicTagsAndGameTags().pipe((0,io.z)((e=>(0,oo.of)(this.getActions().setRoomTopicsAndGameTags(e)))),(0,jo.O)(this.getActions().setLoadingState({roomTopics:1})),(0,Po.l)(this.getActions().setLoadingState({roomTopics:2})),(0,no.K)((e=>(this.errorSlardar.reportErrorLog(e),(0,oo.of)(this.getActions().setLoadingState({roomTopics:3})))))))))}};var qo;(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,Object]),(0,w.__metadata)("design:returntype",void 0)],$o.prototype,"setSensitiveWarning",null),(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,Object]),(0,w.__metadata)("design:returntype",void 0)],$o.prototype,"setRoomInfo",null),(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,Object]),(0,w.__metadata)("design:returntype",void 0)],$o.prototype,"setHotLiveRoomInfo",null),(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,Object]),(0,w.__metadata)("design:returntype",void 0)],$o.prototype,"setRoomTopicsAndGameTags",null),(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,Object]),(0,w.__metadata)("design:returntype",void 0)],$o.prototype,"setLoadingState",null),(0,w.__decorate)([(0,Ge.Qm)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Ve.y]),(0,w.__metadata)("design:returntype",void 0)],$o.prototype,"getRoomInfo",null),(0,w.__decorate)([(0,Ge.Qm)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Ve.y]),(0,w.__metadata)("design:returntype",void 0)],$o.prototype,"getRoomTopics",null),$o=(0,w.__decorate)([(0,Ze.Y)("Room"),(0,w.__param)(2,(0,Bo.t)(Y.s$)),(0,w.__metadata)("design:paramtypes",[Wo,ro,Function])],$o),function(e){e.StreamNotSupport="livesdk_stream_not_support",e.OptimizeStyleForCohost="livesdk_optimize_style_for_cohost"}(qo||(qo={}));let Ho=class{constructor(e){this.service=e,this.handleStreamNotSupported=({roomId:e,streamData:t})=>{this.service.emitEvent("livesdk_stream_not_support",{count:1},{roomId:e,streamData:t})}}handleOptimizeStyleForCohost(e,t){const{uidsStr:i,needOptimize:o,successOptimize:n}=t;this.service.emitEvent("livesdk_optimize_style_for_cohost",{count:1},{uniqueId:e,uidsStr:i,needOptimize:String(o),successOptimize:String(n)})}};Ho=(0,w.__decorate)([(0,so.G)(),(0,w.__metadata)("design:paramtypes",[k.n])],Ho);var Go,Zo,Vo=i(14379),Qo=i.n(Vo);!function(e){e[e.On=1]="On",e[e.Off=2]="Off"}(Go||(Go={})),function(e){e.LD="ld",e.SD="sd",e.HD="hd",e.HD60="hd_60",e.UHD="uhd",e.UHD60="uhd_60",e.ORIGIN="origin",e.AUTO="auto"}(Zo||(Zo={}));const Yo={origin:"Original",uhd:"1080p",uhd_60:"1080p60",hd:"720p",hd_60:"720p60",sd:"540p",ld:"360p"};var Ko,Jo,Xo;!function(e){e.H264="h264",e.Bytevc1="bytevc1"}(Ko||(Ko={})),function(e){e[e.NORMAL=0]="NORMAL",e[e.OBS=1]="OBS",e[e.MEDIA=2]="MEDIA",e[e.AUDIO=3]="AUDIO",e[e.SCREEN=4]="SCREEN",e[e.SOCIAL_LIVE=5]="SOCIAL_LIVE",e[e.STUDIO=6]="STUDIO"}(Jo||(Jo={})),function(e){e.Normal="normal",e.PoorConnection="poor_connection",e.Offline="offline"}(Xo||(Xo={}));const en=Object.freeze(["auto","origin","uhd_60","uhd","hd_60","hd","sd","ld"]);function tn(e){return"bytevc1"===e.VCodec}function on(e,t){const i=function(e){return e.map((e=>{var t;return{key:e.sdkKey,label:null!==(t=e.definition)&&void 0!==t?t:""}}))}(e).map((e=>e.key)),o=function(e,t){return e.find((e=>e.sdkKey===t))}(e,t&&i.includes(t)?t:i[0]);return o||(console.error(`[stream] getMainStream: no stream found by ${t}`),null)}const nn="URL_DEFINITION_KEY";let an=class extends He.D{constructor(e,t,i){super(),this.liveStreamSlardar=e,this.bizContext=t,this.appContext=i,this.defaultState={streamId:"",streamItems:[],isSupportDefinition:!1,currentDefinitionKey:"auto",abrDefinitionLabel:"",abrDefinitionKey:void 0,abrBitrate:0,networkStatus:"normal",canUpdateActiveStream:!0,isFatal:!1}}setStreamId(e,t){e.streamId=t}setNetworkStatus(e,t){e.networkStatus=t}setStreamInfo(e,t){e.streamItems=t}clearStreamInfo(e){e.streamItems=[],e.abrDefinitionLabel="",e.isSupportDefinition=!1,e.isFatal=!1}setActiveStream(e,t){const{key:i,url:o}=t;e.streamItems=e.streamItems.map((e=>Object.assign(Object.assign({},e),{isActive:i===e.sdkKey,activeUrl:o})))}setSupportDefinition(e,t){e.isSupportDefinition=t}setCurrentDefinitionKey(e,t){var i;e.currentDefinitionKey=t,e.isSupportDefinition&&(i=t,!(0,qi.y)()&&localStorage.setItem(nn,i))}setAbrDefinitionLabel(e,t){e.abrDefinitionLabel=t}setAbrDefinitionKey(e,t){e.abrDefinitionKey=t}setAbrBitrate(e,t){e.abrBitrate=t}setIsFatal(e,t){e.isFatal=t}updateAbrDefinition(e){return e.pipe((0,io.z)((e=>{var t,i;return(0,oo.of)(this.getActions().setAbrDefinitionLabel(null!==(t=null==e?void 0:e.definition)&&void 0!==t?t:""),this.getActions().setAbrDefinitionKey(null==e?void 0:e.sdkKey),this.getActions().setAbrBitrate(null!==(i=null==e?void 0:e.bitrate)&&void 0!==i?i:0))})))}updateDefinition(e){return e.pipe((0,To.M)(this.state$,this.bizContext.state$),(0,io.z)((([e,t,{bizContext:i}])=>{var o,n,a;if("auto"===e)return(0,oo.of)(this.getActions().setCurrentDefinitionKey(e));{const s=on(t.streamItems,e),r=(null==i?void 0:i.isIOS)?null!==(o=null==s?void 0:s.url.mainHLS)&&void 0!==o?o:"":null!==(n=null==s?void 0:s.url.mainFLV)&&void 0!==n?n:"",l={key:null!==(a=null==s?void 0:s.sdkKey)&&void 0!==a?a:"",url:r};return(0,oo.of)(this.getActions().setCurrentDefinitionKey(e),this.getActions().setActiveStream(l),this.getActions().updateAbrDefinition(s))}})))}updateDefinitionByBitrate(e){return e.pipe((0,To.M)(this.state$),(0,io.z)((([e,t])=>{const i=(o=t.streamItems,n=e,o.find((e=>e.bitrate===n)));var o,n;return(null==i?void 0:i.sdkKey)?(0,oo.of)(this.getActions().updateAbrDefinition(i)):ao.E})))}updateRoomStream(e){return e.pipe((0,To.M)(this.appContext.state$,this.bizContext.state$),(0,io.z)((([e,{appContext:t},i])=>{var o,n,a,s,r,l,d,c,p,u,g,m,h,_,v,y,b,f;const x=Boolean(null===(o=i.bizContext)||void 0===o?void 0:o.isIOS),{streamData:k,notSupportData:w}=function(e){var t,i,o,n,a,s;try{const r={common:{},data:{}},l={},d=e?JSON.parse(null!==(n=null===(o=null===(i=null===(t=e.stream_url)||void 0===t?void 0:t.live_core_sdk_data)||void 0===i?void 0:i.pull_data)||void 0===o?void 0:o.stream_data)&&void 0!==n?n:""):{};if(r.common=d.common,d.data)for(const e in d.data){if(d.data[e].main){const t=JSON.parse(d.data[e].main.sdk_params);tn(t)?(l[e]={},l[e].main=d.data[e].main):(r.data[e]={},r.data[e].main=d.data[e].main,r.data[e].main.sdk_params=t)}if(d.data[e].backup){const t=JSON.parse(d.data[e].backup.sdk_params);tn(t)?(l[e]=null!==(a=l[e])&&void 0!==a?a:{},l[e].backup=d.data[e].backup):(r.data[e]=null!==(s=r.data[e])&&void 0!==s?s:{},r.data[e].backup=d.data[e].backup,r.data[e].backup.sdk_params=t)}}return{streamData:r,notSupportData:l}}catch(e){return{streamData:{},notSupportData:{}}}}(e.roomInfo),S=function(e){return Qo()(e,(e=>en.indexOf(e.sdkKey)))}((P=k,T=null!==(l=null===(r=null===(s=null===(a=null===(n=e.roomInfo.stream_url)||void 0===n?void 0:n.live_core_sdk_data)||void 0===a?void 0:a.pull_data)||void 0===s?void 0:s.options)||void 0===r?void 0:r.qualities)&&void 0!==l?l:[],Object.keys(P.data).map((e=>{var t,i,o,n;const a=P.data[e],s=null!==(i=null===(t=T.find((t=>t.sdk_key===e)))||void 0===t?void 0:t.name)&&void 0!==i?i:Yo[e];let r=a.main.sdk_params.vbitrate;return"origin"===e&&(r=2e6),{sdkKey:e,definition:s,bitrate:r,url:{mainFLV:a.main.flv,mainHLS:a.main.hls,backupFLV:null===(o=a.backup)||void 0===o?void 0:o.flv,backupHLS:null===(n=a.backup)||void 0===n?void 0:n.hls},activeUrl:"",isActive:!1,pullFailedCount:0}})))),C=null!==(d=(0,Fe.xX)(null==t?void 0:t.abTestVersion,"live_abr_version"))&&void 0!==d?d:"v1",j=null!==(c=(0,qi.y)()?void 0:localStorage.getItem(nn))&&void 0!==c?c:"auto";var P,T;Object.keys(w).length&&this.liveStreamSlardar.handleStreamNotSupported({roomId:null!==(p=e.roomInfo.id_str)&&void 0!==p?p:"",streamData:JSON.stringify(w)});const O="v3"===C||!!(L=e.roomInfo.live_room_mode)&&[1,4,6].includes(L);var L;let I=null===(_=null===(h=null===(m=null===(g=null===(u=e.roomInfo.stream_url)||void 0===u?void 0:u.live_core_sdk_data)||void 0===g?void 0:g.pull_data)||void 0===m?void 0:m.options)||void 0===h?void 0:h.default_quality)||void 0===_?void 0:_.sdk_key;"v3"===C&&(S.find((e=>e.sdkKey===j))?I=j:"auto"===j&&(I="auto"));const A=on(S,null!=I?I:S[0].sdkKey);return(0,oo.of)(this.getActions().setStreamId(null!==(v=e.roomInfo.id_str)&&void 0!==v?v:""),this.getActions().setIsFatal(!1),this.getActions().setCurrentDefinitionKey(I&&"v3"===C?I:"auto"),this.getActions().setSupportDefinition(O),this.getActions().setStreamInfo(S),this.getActions().updateAbrDefinition(A),this.getActions().setActiveStream({key:null!==(y=null==A?void 0:A.sdkKey)&&void 0!==y?y:"",url:x?null!==(b=null==A?void 0:A.url.mainHLS)&&void 0!==b?b:"":null!==(f=null==A?void 0:A.url.mainFLV)&&void 0!==f?f:""}))})))}changeAvailableStream(e){return e.pipe((0,To.M)(this.state$),(0,io.z)((([e,t])=>{const i=t.streamItems.map((e=>e.isActive?Object.assign(Object.assign({},e),{pullFailedCount:e.pullFailedCount+1}):e)),o="auto"===t.currentDefinitionKey,n=[],a=function(e){let t=0;const i=function(e){return e.reduce(((e,t)=>(e.push(t.url.mainFLV),e.push(t.url.mainHLS),t.url.backupFLV&&e.push(t.url.backupFLV),t.url.backupHLS&&e.push(t.url.backupHLS),e)),[])}(e).length;let o;const n=4*(2*e.length<i?2:1);for(;!o&&t<n;)o=e.find((e=>e.pullFailedCount===t)),t++;if(o){const t=function(e,t){var i,o;let n=e.url.mainFLV;switch(t){case 1:n=null!==(i=e.url.backupFLV)&&void 0!==i?i:e.url.mainHLS;break;case 2:n=e.url.backupFLV?e.url.mainHLS:e.url.mainFLV;break;case 3:n=null!==(o=e.url.backupHLS)&&void 0!==o?o:e.url.mainHLS;break;default:n=e.url.mainFLV}return n}(o,o.pullFailedCount%4);return function(e,t,i){return e.map((e=>Object.assign(Object.assign({},e),{isActive:t===e.sdkKey,activeUrl:i})))}(e,o.sdkKey,t)}return e.map((e=>Object.assign(Object.assign({},e),{isActive:!1})))}(i),s=a.find((e=>e.isActive));return s?o?n.push(this.getActions().updateAbrDefinition(s)):n.push(this.getActions().setCurrentDefinitionKey(s.sdkKey)):t.streamItems.length>0&&n.push(this.getActions().setIsFatal(!0)),(0,oo.of)(this.getActions().setStreamInfo(a),...n)})))}};(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,String]),(0,w.__metadata)("design:returntype",void 0)],an.prototype,"setStreamId",null),(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,String]),(0,w.__metadata)("design:returntype",void 0)],an.prototype,"setNetworkStatus",null),(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,Array]),(0,w.__metadata)("design:returntype",void 0)],an.prototype,"setStreamInfo",null),(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object]),(0,w.__metadata)("design:returntype",void 0)],an.prototype,"clearStreamInfo",null),(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,Object]),(0,w.__metadata)("design:returntype",void 0)],an.prototype,"setActiveStream",null),(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,Boolean]),(0,w.__metadata)("design:returntype",void 0)],an.prototype,"setSupportDefinition",null),(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,String]),(0,w.__metadata)("design:returntype",void 0)],an.prototype,"setCurrentDefinitionKey",null),(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,String]),(0,w.__metadata)("design:returntype",void 0)],an.prototype,"setAbrDefinitionLabel",null),(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,Object]),(0,w.__metadata)("design:returntype",void 0)],an.prototype,"setAbrDefinitionKey",null),(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,Number]),(0,w.__metadata)("design:returntype",void 0)],an.prototype,"setAbrBitrate",null),(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,Boolean]),(0,w.__metadata)("design:returntype",void 0)],an.prototype,"setIsFatal",null),(0,w.__decorate)([(0,Ge.Qm)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Ve.y]),(0,w.__metadata)("design:returntype",void 0)],an.prototype,"updateAbrDefinition",null),(0,w.__decorate)([(0,Ge.Qm)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Ve.y]),(0,w.__metadata)("design:returntype",void 0)],an.prototype,"updateDefinition",null),(0,w.__decorate)([(0,Ge.Qm)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Ve.y]),(0,w.__metadata)("design:returntype",void 0)],an.prototype,"updateDefinitionByBitrate",null),(0,w.__decorate)([(0,Ge.Qm)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Ve.y]),(0,w.__metadata)("design:returntype",Ve.y)],an.prototype,"updateRoomStream",null),(0,w.__decorate)([(0,Ge.Qm)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Ve.y]),(0,w.__metadata)("design:returntype",void 0)],an.prototype,"changeAvailableStream",null),an=(0,w.__decorate)([(0,Ze.Y)("Stream"),(0,w.__metadata)("design:paramtypes",[Ho,P.r,V.G])],an);let sn=class{constructor(e){this.fetch=e,this.getCreateInfo=()=>this.fetch.get("/webcast/room/create_info/",{query:{aid:u.CO},baseUrlType:5}),this.updateScreenshotStatus=e=>this.fetch.post("/webcast/room/screenshot_cover/update/",{query:e,baseUrlType:5,headers:{"Content-Type":Uo.zv.FORM_ENCODE}}),this.createRoom=e=>this.fetch.post("/webcast/room/create/",{query:e,baseUrlType:5,headers:{"Content-Type":Uo.zv.FORM_ENCODE}}).pipe(_o((e=>[4003035,20063].includes(e)))),this.endLive=()=>this.fetch.post("/webcast/room/finish_abnormal/",{baseUrlType:5}),this.setTopicTag=e=>this.fetch.post("/webcast/room/hashtag/set/",{query:e,baseUrlType:4,headers:{"Content-Type":Uo.zv.FORM_ENCODE}}),this.uploadImage=e=>{const t=new FormData;return t.append("image",e),this.fetch.post("/webcast/room/upload/image/",{body:t,omitContentType:!0,baseUrlType:5})},this.getEndLiveInfo=e=>this.fetch.get("/webcast/data/data_center/room_stats/",{query:e,baseUrlType:5}),this.getLastBanRecord=e=>this.fetch.get("/webcast/review/get_latest_ban_record/",{query:Object.assign(Object.assign({},e),{ban_type:2}),baseUrlType:5})}};sn=(0,w.__decorate)([(0,so.G)(),(0,w.__metadata)("design:paramtypes",[p.r])],sn);let rn=class extends He.D{constructor(e,t,i,o,n,a){super(),this.service=e,this.roomModule=t,this.roomService=i,this.streamModule=o,this.slardar=n,this.storage=a,this.defaultState={liveStatus:0,roomCreateInfo:null,showSuicidePrevention:!1,showAppealModal:!1,roomStats:null,isTempPermission:!1,streamKey:"",streamKeyExpiration:Io,loadingState:{createRoomInfo:0,roomCreateInfo:0,OBSAccessRecallInfo:0}}}setLiveStatus(e,t){e.liveStatus=t}setIsTempPermission(e,t){e.isTempPermission=t}setRoomCreateInfo(e,t){e.roomCreateInfo=t}setRoomStatsData(e,t){e.roomStats=t}setLoadingState(e,t){e.loadingState=Object.assign(Object.assign({},e.loadingState),t)}setSuicidePrevention(e,t){e.showSuicidePrevention=t}setStreamKey(e,t){e.streamKey=t.streamKey,e.streamKeyExpiration=t.expiration}setAppealVisible(e,t){e.showAppealModal=t}getCreateRoomInfo(e){return e.pipe((0,So.w)((e=>{const{shouldGetRoomInfo:t}=e;return this.service.getCreateInfo().pipe((0,Co.b)((({status_code:e})=>{(0,Oo.k)(e,[0])})),(0,io.z)((({data:e,status_code:i})=>{if(0!==i)return this.slardar.handleGetCreateRoomInfoFail({errorCode:i.toString(),errorMessage:""}),this.slardar.handleTraceError({errorCode:"1002",errorMessage:`status_code: ${i}`}),ao.E;const{last_room_id_str:o,live_status:n,ban_status:a}=e,s=!(null==a?void 0:a.is_ban),r=[2,1,3].includes(n);var l;return s&&t&&(l=n,co()(l)&&(1===l?uo():go())),s&&r&&t?this.roomService.getRoomInfo({is_anchor:!0,room_id:o}).pipe((0,io.z)((({data:t})=>(this.slardar.handleGetCreateRoomInfoSuccess(),(0,oo.of)(this.getActions().setRoomCreateInfo(e),...this.setRoomInfo(t),this.getActions().setLiveStatus(n)))))):(0,oo.of)(this.getActions().setRoomCreateInfo(e),this.getActions().setLiveStatus(n))})),(0,jo.O)(this.getActions().setLoadingState({roomCreateInfo:1})),(0,Po.l)(this.getActions().setLoadingState({roomCreateInfo:2})),(0,no.K)((e=>(this.slardar.reportGoLiveError(e),this.slardar.handleTraceError({errorCode:"1002",errorMessage:e.message}),this.slardar.handleGetCreateRoomInfoFail({errorCode:"-1",errorMessage:e.message}),(0,oo.of)(this.getActions().setLoadingState({roomCreateInfo:3}))))))})))}createRoomInfo(e){return e.pipe((0,To.M)(this.roomModule.state$),(0,io.z)((([e,t])=>this.service.createRoom(e).pipe((0,io.z)((({data:i,status_code:o})=>{var n,a;if(o&&0!==o)switch(o){case 2403:return this.slardar.handleCreateRoomWarning({errorCode:o.toString(),errorMessage:""}),(0,oo.of)(this.getActions().setSuicidePrevention(!0),this.getActions().setLoadingState({createRoomInfo:3}));case 10018:case 4003035:return this.slardar.handleCreateRoomWarning({errorCode:o.toString(),errorMessage:""}),(0,oo.of)(this.getActions().setLiveStatus(-1),this.getActions().setLoadingState({createRoomInfo:3}));case 50004:case 20063:case 30009:return this.slardar.handleCreateRoomWarning({errorCode:o.toString(),errorMessage:""}),(0,oo.of)(this.getActions().setLoadingState({createRoomInfo:3}));case 4003105:return i.prompts&&mi.h.open({content:i.prompts,duration:3}),this.slardar.handleCreateRoomWarning({errorCode:o.toString(),errorMessage:""}),(0,oo.of)(this.getActions().setLoadingState({createRoomInfo:3}));default:throw new Error(`status_code: ${o}`)}this.slardar.handleCreateRoomSuccess(),uo(),this.slardar.handleTraceSuccess();const s=t.roomGameTags.find((t=>t.id===e.game_tag_id));return r={anchor_id:null===(n=i.owner)||void 0===n?void 0:n.id_str,room_id:i.id_str,live_type:(null==i?void 0:i.live_type_third_party)?"third_party":"video_live",game_label:null==s?void 0:s.show_name,game_label_id:null==s?void 0:s.id,choose_hashtag_id:e.hashtag_id,choose_hashtag_name:null===(a=t.roomTopics.find((t=>t.id===e.hashtag_id)))||void 0===a?void 0:a.title,cover_type:1===e.screenshot_cover_status?"screen_shot":"user_upload"},c.W.event("livesdk_live_take",Object.assign({live_type:"third_party",send_gift_type:"open",event_type:"click",is_active_fans_show:0,show_active_user_ucnt:0,event_page:"live_take_button",game_label:r.game_label,game_label_id:r.game_label_id},r)),(0,oo.of)(...this.setRoomInfo(i),this.getActions().setLiveStatus(1),this.getActions().setLoadingState({createRoomInfo:2}));var r})),(0,jo.O)(this.getActions().setLoadingState({createRoomInfo:1})),(0,no.K)((e=>(this.slardar.handleTraceError({errorCode:"1003",errorMessage:e.message}),this.slardar.handleCreateRoomFail({errorCode:"-1",errorMessage:e.message}),(0,oo.of)(this.getActions().setLoadingState({createRoomInfo:3})))))))))}setRoomInfo(e){const t=[],[,i]=function(e){if(e){const t=e.lastIndexOf("/");return[e.substr(0,t),e.substr(t+1)]}return[]}(function(e){var t,i;const o=null==e?void 0:e.stream_url,n=null===(t=null==o?void 0:o.push_urls)||void 0===t?void 0:t[0];return null!==(i=null!=n?n:null==o?void 0:o.rtmp_push_url)&&void 0!==i?i:""}(e));if(i&&e.id_str){let o=i;const{streamKey:n,expiration:a}=this.storage.getGoLiveStreamKeyInfo(o,e.id_str);o!==n?o=n:this.storage.setGoLiveStreamKeyInfo(o,e.id_str),t.push(this.getActions().setStreamKey({streamKey:o,expiration:a}))}return t.push(this.roomModule.getActions().setRoomInfo(e)),t.push(this.streamModule.getActions().updateRoomStream({roomInfo:e})),t}endLive(e){return e.pipe((0,io.z)((()=>this.service.endLive().pipe((0,io.z)((()=>(this.slardar.handleEndLiveSuccess(),(0,oo.of)(this.getActions().setLiveStatus(4),this.streamModule.getActions().setStreamInfo([]))))),(0,no.K)((e=>(this.slardar.handleEndLiveFail(),this.slardar.reportGoLiveError(e),ao.E)))))))}setTopicTag(e){return e.pipe((0,So.w)((e=>this.service.setTopicTag(e).pipe((0,Qe.U)((()=>this.noop())),(0,no.K)((e=>(this.slardar.reportGoLiveError(e),ao.E)))))))}getRoomStatsData(e){return e.pipe((0,io.z)((e=>this.service.getEndLiveInfo({room_id:e}).pipe((0,Co.b)((({status_code:e})=>{(0,Oo.k)(e,[0])})),(0,io.z)((({data:e})=>(0,oo.of)(this.getActions().setRoomStatsData(e.room_stats)))),(0,no.K)((e=>(this.slardar.reportGoLiveError(e),ao.E)))))))}};(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,Number]),(0,w.__metadata)("design:returntype",void 0)],rn.prototype,"setLiveStatus",null),(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,Boolean]),(0,w.__metadata)("design:returntype",void 0)],rn.prototype,"setIsTempPermission",null),(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,Object]),(0,w.__metadata)("design:returntype",void 0)],rn.prototype,"setRoomCreateInfo",null),(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,Object]),(0,w.__metadata)("design:returntype",void 0)],rn.prototype,"setRoomStatsData",null),(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,Object]),(0,w.__metadata)("design:returntype",void 0)],rn.prototype,"setLoadingState",null),(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,Boolean]),(0,w.__metadata)("design:returntype",void 0)],rn.prototype,"setSuicidePrevention",null),(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,Object]),(0,w.__metadata)("design:returntype",void 0)],rn.prototype,"setStreamKey",null),(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,Boolean]),(0,w.__metadata)("design:returntype",void 0)],rn.prototype,"setAppealVisible",null),(0,w.__decorate)([(0,Ge.Qm)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Ve.y]),(0,w.__metadata)("design:returntype",void 0)],rn.prototype,"getCreateRoomInfo",null),(0,w.__decorate)([(0,Ge.Qm)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Ve.y]),(0,w.__metadata)("design:returntype",void 0)],rn.prototype,"createRoomInfo",null),(0,w.__decorate)([(0,Ge.Qm)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Ve.y]),(0,w.__metadata)("design:returntype",void 0)],rn.prototype,"endLive",null),(0,w.__decorate)([(0,Ge.Qm)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Ve.y]),(0,w.__metadata)("design:returntype",void 0)],rn.prototype,"setTopicTag",null),(0,w.__decorate)([(0,Ge.Qm)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Ve.y]),(0,w.__metadata)("design:returntype",void 0)],rn.prototype,"getRoomStatsData",null),rn=(0,w.__decorate)([(0,Ze.Y)("GoLive"),(0,w.__metadata)("design:paramtypes",[sn,$o,Wo,an,ho,Ao])],rn);var ln=i(96942),dn=i.n(ln),cn=i(49845),pn=i.n(cn),un=i(66599);let gn=class{constructor(e){this.fetch=e}getUserDiscoverData(e,t){let i=28,o=17;return(0,ve.FZ)(e)?i=50:(0,ve.bf)(e)?(i=30,o=15):i=30,this.fetch.get("/node/share/discover",{query:{noUser:"0",count:i,scene:o,pageId:t,userId:t}}).pipe((0,Qe.U)((e=>e.body[0].exploreList)))}getFollowingUserList(e){return this.fetch.get("/api/user/list/",{query:e})}};var mn;gn=(0,w.__decorate)([(0,so.G)(),(0,w.__metadata)("design:paramtypes",[p.r])],gn),function(e){e.Recommend="suggest",e.Following="following",e.Follower="follower"}(mn||(mn={}));let hn=class extends He.D{constructor(e,t){super(),this.service=e,this.user=t,this.defaultState={following:{list:[],hasMore:!0,loading:!0,maxCursor:0,minCursor:0,total:0},follower:{list:[],hasMore:!0,loading:!0,maxCursor:0,minCursor:0,total:0},suggest:{list:[],hasMore:!0,loading:!0,maxCursor:0,minCursor:0,total:0}}}setList(e,t){const{list:i,key:o,maxCursor:n,minCursor:a,total:s}=t;e[o].list=pn()(e[o].list.concat(i)),e[o].maxCursor=n,e[o].minCursor=a,s&&(e[o].total=s)}resetList(e,t){const{key:i}=t;e[i].list=[],e[i].maxCursor=0,e[i].minCursor=0}setLoading(e,t){const{loading:i,key:o}=t;e[o].loading=i}getRecommendList(e){return e.pipe((0,Ye.z)((({pathname:e,userId:t=""})=>this.service.getUserDiscoverData(e,t).pipe((0,io.z)((e=>{const t=e.map((({cardItem:e})=>({avatarLarger:e.cover,avatarMedium:e.cover,avatarThumb:e.cover,id:e.id,nickname:e.title,relation:e.extraInfo.relation,signature:e.description,uniqueId:e.subTitle.replace(/^@/,""),verified:e.extraInfo.verified,secUid:e.extraInfo.secUid,roomId:e.extraInfo.roomId}))).sort(((e,t)=>{var i,o;return(null!==(i=null==e?void 0:e.relation)&&void 0!==i?i:0)-(null!==(o=null==t?void 0:t.relation)&&void 0!==o?o:0)})).sort(((e,t)=>{var i,o,n,a;return(null!==(o=null===(i=null==t?void 0:t.roomId)||void 0===i?void 0:i.length)&&void 0!==o?o:0)-(null!==(a=null===(n=null==e?void 0:e.roomId)||void 0===n?void 0:n.length)&&void 0!==a?a:0)}));return(0,oo.of)(this.user.getActions().multiSetUser(t),this.getActions().setList({key:"suggest",list:t.map((({uniqueId:e})=>e)),hasMore:!1}))})),(0,jo.O)(this.getActions().resetList({key:"suggest"}),this.getActions().setLoading({key:"suggest",loading:!0})),(0,Po.l)(this.getActions().setLoading({key:"suggest",loading:!1}),this.terminate()),(0,Ke.n)({})))))}getFollowingList(e){return e.pipe((0,To.M)(this.state$),(0,Qe.U)((([{count:e},t])=>Object.assign(Object.assign({},t.following),{count:e}))),(0,Ye.z)((({list:e,maxCursor:t=0,minCursor:i=0,count:o})=>this.service.getFollowingUserList({scene:21,maxCursor:t,minCursor:i,count:o}).pipe((0,io.z)((t=>{const{maxCursor:i,minCursor:o,userList:n=[],total:a}=t;return(0,oo.of)(this.user.getActions().multiSetUser(n.map((({user:e})=>e))),this.user.getActions().multiSetUserStats(n.map((({user:e,stats:t})=>({uniqueId:e.uniqueId,stats:t})))),this.getActions().setList({key:"following",list:n.sort(((e,t)=>{var i,o,n,a,s,r;return(null!==(n=null===(o=null===(i=null==t?void 0:t.user)||void 0===i?void 0:i.roomId)||void 0===o?void 0:o.length)&&void 0!==n?n:0)-(null!==(r=null===(s=null===(a=null==e?void 0:e.user)||void 0===a?void 0:a.roomId)||void 0===s?void 0:s.length)&&void 0!==r?r:0)})).map((({user:{uniqueId:e}})=>e)).filter((t=>!e||e.indexOf(t)<0)),maxCursor:i,minCursor:o,total:a}))})),(0,jo.O)(this.getActions().setLoading({key:"following",loading:!0})),(0,Po.l)(this.getActions().setLoading({key:"following",loading:!1})),(0,Ke.n)({})))))}getFollowerList(e){return e.pipe((0,To.M)(this.state$),(0,Qe.U)((([{count:e},t])=>Object.assign(Object.assign({},t.follower),{count:e}))),(0,Ye.z)((({list:e,maxCursor:t=0,minCursor:i=0,count:o})=>this.service.getFollowingUserList({scene:67,maxCursor:t,minCursor:i,count:o}).pipe((0,io.z)((t=>{const{maxCursor:i,minCursor:o,userList:n=[],total:a}=t;return(0,oo.of)(this.user.getActions().multiSetUser(n.map((({user:e})=>e))),this.user.getActions().multiSetUserStats(n.map((({user:e,stats:t})=>({uniqueId:e.uniqueId,stats:t})))),this.getActions().setList({key:"follower",list:n.map((({user:{uniqueId:e}})=>e)).filter((t=>!e||e.indexOf(t)<0)),maxCursor:i,minCursor:o,total:a}))})),(0,jo.O)(this.getActions().setLoading({key:"follower",loading:!0})),(0,Po.l)(this.getActions().setLoading({key:"follower",loading:!1})),(0,Ke.n)({})))))}};(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,Object]),(0,w.__metadata)("design:returntype",void 0)],hn.prototype,"setList",null),(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,Object]),(0,w.__metadata)("design:returntype",void 0)],hn.prototype,"resetList",null),(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,Object]),(0,w.__metadata)("design:returntype",void 0)],hn.prototype,"setLoading",null),(0,w.__decorate)([(0,Ge.Qm)({payloadGetter:1}),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Ve.y]),(0,w.__metadata)("design:returntype",void 0)],hn.prototype,"getRecommendList",null),(0,w.__decorate)([(0,Ge.Qm)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Ve.y]),(0,w.__metadata)("design:returntype",void 0)],hn.prototype,"getFollowingList",null),(0,w.__decorate)([(0,Ge.Qm)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Ve.y]),(0,w.__metadata)("design:returntype",void 0)],hn.prototype,"getFollowerList",null),hn=(0,w.__decorate)([(0,Ze.Y)("AccountList"),(0,w.__metadata)("design:paramtypes",[gn,un.z])],hn);var _n=i(68852),vn=i(51146),yn=i(86254),bn=i.n(yn),fn=i(83488),xn=i(94215),kn=i(68457),wn=i(22381),Sn=i(19813),Cn=i(45313),jn=i(83236),Pn=i(58590),Tn=i(15679),On=i(50894),Ln=i(35199),In=i(88683),An=i(88146),En=i(33111);const Mn=(0,We.Z)(En.v,{target:"e85wp610"})({":hover":{textDecoration:"none"}},"label:StyledLink;"),Rn=(0,We.Z)("div",{target:"e85wp611"})((({theme:{colors:e}})=>({display:"flex",alignItems:"center",padding:"8px 12px",borderRadius:"4px",transition:"background-color 300ms",":hover":{backgroundColor:e.BGView},":active":{backgroundColor:e.BGInput}})),"label:DivUserContainer;"),Fn=(0,We.Z)("div",{target:"e85wp612"})((({theme:{direction:e}})=>[{display:"flex",flex:"1"},(0,$e.YJ)({direction:e,paddingEnd:"24px"})]),"label:DivUserInfo;"),Dn=(0,We.Z)("div",{target:"e85wp613"})((({theme:{direction:e}})=>[{maxWidth:"450px",padding:"1px 0"},(0,$e.YJ)({direction:e,paddingStart:"12px"})]),"label:DivUserDesc;"),Bn=(0,We.Z)("div",{target:"e85wp614"})({display:"flex",alignItems:"center",height:"22px",lineHeight:"22px"},"label:DivTopPart;"),zn=(0,We.Z)("span",{target:"e85wp615"})((({theme:e})=>[(0,$e.GI)({theme:e,fontFamily:"Proxima",fontWeight:"bold",typography:"P2"})]),"label:SpanUniqueId;"),Nn=(0,We.Z)("span",{target:"e85wp616"})((({theme:e,theme:{direction:t,colors:i}})=>[(0,$e.GI)({theme:e,fontFamily:"Proxima",fontWeight:"normal",lineHeight:"15px",typography:"P4"}),{color:i.TextSecondary},(0,$e.YJ)({direction:t,paddingStart:"4px"})]),"label:SpanNickname;"),Un=(0,We.Z)("div",{target:"e85wp617"})((({theme:e,theme:{colors:t}})=>[(0,$e.GI)({theme:e,fontFamily:"Proxima",fontWeight:"normal",typography:"P3"}),{height:"20px",marginTop:"4px",color:t.TextSecondary}]),"label:DivBottomPart;"),Wn=(0,We.Z)("p",{target:"e85wp618"})({maxWidth:"450px"},$e.wj,"label:PSignature;"),$n=(0,We.Z)("p",{target:"e85wp619"})({maxWidth:"450px"},$e.wj,"label:POther;"),qn=(0,We.Z)("span",{target:"e85wp6110"})((({theme:{direction:e}})=>(0,$e.YJ)({direction:e,paddingStart:"8px"})),"label:SpanSecond;"),Hn=(0,We.Z)(Ut.W,{target:"e85wp6111"})((({theme:{direction:e}})=>({flexShrink:0,"& > svg":[(0,$e.YJ)({direction:e,marginEnd:"6px"})]})),"label:StyledFollowButton;"),Gn=(0,We.Z)(An.Z,{target:"e85wp6112"})((({theme:{direction:e}})=>(0,$e.YJ)({direction:e,marginStart:"4px"})),"label:StyledVerifiedBadgeColor;"),Zn=(0,U.memo)((function({uniqueId:e,enterMethod:t,onClose:i}){const o=(0,ji.Q)(),n=(0,ee.mp)(un.z,{selector:t=>{const i=t.users[e],o=t.stats[e];if(!i)return null;const{verified:n,avatarThumb:a,secUid:s,nickname:r,roomId:l,id:d,relation:c,signature:p,secret:u}=i,{followerCount:g=0,videoCount:m=0}=null!=o?o:{};return{avatarThumb:a,secUid:s,verified:n,nickname:r,roomId:l,id:d,uniqueId:e,signature:p,relation:c,secret:u,followerCount:g,videoCount:m}},dependencies:[e]}),{id:a,nickname:s,secUid:r,signature:l,verified:d,followerCount:c,videoCount:p}=(0,Ee.m7)(n),u=(0,Cn.yl)({uniqueId:e,secUid:null!=r?r:""}),g=(0,Ln.zW)(n),{isShowLive:h}=g,_=h?Pn.G:Tn.D,v=(0,Ln.CN)({user:n,enterMethod:t}),y=(0,On.Q)(),{handleFollow:b,text:f,isFollowing:x,relation:k}=(0,In.wB)({uniqueId:e,onNeedLogin:y}),w=x?"default":"line",S=(0,U.useCallback)((e=>{e.stopPropagation(),e.preventDefault(),b(e)}),[b]),C=(0,U.useCallback)((()=>{Sn.W.handleEnterUser({to_user_id:a,enter_method:t}),null==i||i()}),[t,a,i]),j=(0,U.useCallback)((e=>{e.stopPropagation(),null==i||i()}),[i]);return(0,m.jsx)(Mn,Object.assign({to:u,onClick:C},{children:(0,m.jsxs)(Rn,{children:[(0,m.jsxs)(Fn,{children:[(0,m.jsx)(_,Object.assign({uniqueId:e,secUid:r,teaParams:v,shouldStopPropagation:!1,onClick:j},{children:(0,m.jsx)(jn.k,Object.assign({},g,{liveTheme:6,size:48}),void 0)}),void 0),(0,m.jsxs)(Dn,{children:[(0,m.jsxs)(Bn,{children:[(0,m.jsx)(zn,{children:e},void 0),d&&(0,m.jsx)(Gn,{width:14,height:14},void 0),(0,m.jsx)(Nn,{children:s},void 0)]},void 0),(0,m.jsx)(Un,Object.assign({className:"bottom-part"},{children:l?(0,m.jsx)(Wn,Object.assign({className:"signature"},{children:l}),void 0):(0,m.jsxs)($n,{children:[(0,m.jsxs)("span",{children:[o("Video"),": ",p]},void 0),(0,m.jsxs)(qn,{children:[o("Followers"),": ",(0,Ee.BT)(c)]},void 0)]},void 0)}),void 0)]},void 0)]},void 0),(0,m.jsxs)(Hn,Object.assign({size:"small",id:a,buttonTheme:w,onClick:S},{children:[2===k?(0,m.jsx)(wn.Z,{},void 0):null,f]}),void 0)]},void 0)}),a)})),Vn=(0,We.Z)("div",{target:"exlovqy0"})({display:"flex",flexDirection:"column",position:"absolute",width:"700px",height:"500px",left:"50%",top:"50%",transform:"translate(-50%, -50%)",background:"#fff",boxShadow:"0 2px 12px rgba(0, 0, 0, .12)",borderRadius:"8px"},"label:DivAccountListModal;"),Qn=(0,We.Z)("div",{target:"exlovqy1"})((({theme:{colors:e}})=>({position:"relative",height:"56px","::after":{position:"absolute",left:"0",bottom:"0",content:'""',width:"100%",height:"1px",transform:"scaleY(.5)",background:e.LinePrimary}})),"label:DivHeader;"),Yn=(0,We.Z)("div",{target:"exlovqy2"})((({theme:{direction:e}})=>[{display:"flex"},(0,$e.YJ)({direction:e,marginStart:"14px"})]),"label:DivTabsContainer;"),Kn=(0,We.Z)("div",{target:"exlovqy3"})((({theme:e,active:t,theme:{colors:i}})=>[(0,$e.GI)({theme:e,fontFamily:"Proxima",fontWeight:t?"bold":"semiBold",typography:"P2"}),{position:"relative",margin:"24px 30px 0",color:t?i.TextPrimary:i.TextTertiary,cursor:"pointer"},t?{"::after":{position:"absolute",left:"0",bottom:"-10px",content:'""',width:"100%",height:"2px",background:i.TextPrimary}}:null]),"label:DivTab;"),Jn=(0,We.Z)("span",{target:"exlovqy4"})((({theme:{direction:e}})=>[(0,$e.YJ)({direction:e,paddingStart:"4px"})]),"label:SpanCount;"),Xn=(0,We.Z)("div",{target:"exlovqy5"})((({theme:{colors:e,direction:t}})=>[{display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",top:"16px",width:"32px",height:"32px",background:e.BGView,borderRadius:"16px",cursor:"pointer"},(0,$e.YJ)({direction:t,end:"16px"})]),"label:DivCloseBtn;"),ea=(0,We.Z)("div",{target:"exlovqy6"})((({isHidden:e})=>({flex:"1",overflowY:e?"hidden":"auto"})),"label:DivMain;"),ta=(0,We.Z)("div",{target:"exlovqy7"})({boxSizing:"border-box",width:"100%",padding:"16px 0 16px 12px"},"label:DivUserList;"),ia=(0,We.Z)("div",{target:"exlovqy8"})({boxSizing:"border-box",display:"flex",alignItems:"center",width:"100%",padding:"8px 12px"},"label:DivLoadingContainer;"),oa=(0,We.Z)("div",{target:"exlovqy9"})({width:"48px",height:"48px",flexShrink:0},"label:DivAvatarContainer;"),na=(0,We.Z)("div",{target:"exlovqy10"})((({theme:{direction:e}})=>[{flexGrow:1},(0,$e.YJ)({direction:e,marginStart:"12px"})]),"label:DivSkeletonTitleContainer;"),aa=(0,We.Z)("div",{target:"exlovqy11"})({display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"100%",height:"100%"},"label:DivEmptyContainer;"),sa=(0,We.Z)("p",{target:"exlovqy12"})((({theme:e})=>[(0,$e.GI)({theme:e,fontFamily:"Proxima",fontWeight:"bold",lineHeight:"24px",typography:"P1"})]),"label:PTitle;"),ra=(0,We.Z)("p",{target:"exlovqy13"})((({theme:e,theme:{colors:t}})=>[(0,$e.GI)({theme:e,fontFamily:"Proxima",fontWeight:"normal",typography:"P2"}),{marginTop:"8px",color:t.TextSecondary}]),"label:PDesc;"),la={following:{title:"following",empty:"following_my_empty_desc"},follower:{title:"Followers",empty:"followers_my_empty_desc"},suggest:{title:"common_registration_username_suggested",empty:"profile_suggested_empty_toast"}},da=(0,U.memo)((function(e){var t;const{visible:i,type:o,shouldShowSuggested:n=!0}=e,a=(0,ji.Q)(),{user:s}=null!==(t=(0,ze.Lh)((()=>["user"]),[]))&&void 0!==t?t:{},r=(0,U.useRef)(null),[l,d]=(0,ee.b7)(hn,{selector:e=>({following:Object.assign(Object.assign({},e.following),{hasMore:-1!==e.following.maxCursor}),follower:Object.assign(Object.assign({},e.follower),{hasMore:-1!==e.follower.maxCursor}),suggest:Object.assign(Object.assign({},e.suggest),{hasMore:!1})}),dependencies:[],equalFn:(e,t)=>bn()(e,t)}),c={following:"pop_up_following",follower:"pop_up_follower",suggest:"pop_up_suggest"},[p,u]=(0,U.useState)(s?o:"suggest");(0,U.useEffect)((()=>{const{loading:e,list:t}=l.follower;i&&!t.length&&e&&d.getFollowerList({count:20})}),[l,d,i]),(0,U.useEffect)((()=>{i&&u(o)}),[o,i]);const g=(0,U.useCallback)((e=>()=>{u(e),r.current&&(r.current.scrollTop=0)}),[u]),{list:h,loading:_,hasMore:v}=l[p],y=0!==h.length||_,b=(0,kn.fB)((()=>{var e;if("suggest"===p||_||!v)return;const{scrollTop:t=0,scrollHeight:i=0}=null!==(e=null==r?void 0:r.current)&&void 0!==e?e:{};t&&i-t<480&&("following"===p?d.getFollowingList({count:20}):d.getFollowerList({count:20}))}),[d,p,_,v],200),f=(0,U.useMemo)((()=>Array.from({length:h.length?1:7}).fill(0)),[h.length]);return(0,m.jsx)(Nt.AR,Object.assign({isOpen:i,compact:!0,closeOnBackdropClick:!0,onClose:e.onClose},{children:(0,m.jsxs)(Vn,{children:[(0,m.jsxs)(Qn,{children:[(0,m.jsxs)(Yn,{children:[s&&["following","follower"].map((e=>(0,m.jsxs)(Kn,Object.assign({active:p===e,onClick:g(e)},{children:[(0,m.jsx)("span",{children:a(la[e].title)},void 0),(l[e].total||!l[e].loading)&&(0,m.jsx)(Jn,{children:(0,Ee.BT)(l[e].total)},void 0)]}),e))),n&&(0,m.jsx)(Kn,Object.assign({active:"suggest"===p,onClick:g("suggest")},{children:(0,m.jsx)("span",{children:a("common_registration_username_suggested")},void 0)}),void 0)]},void 0),(0,m.jsx)(Xn,Object.assign({onClick:e.onClose},{children:(0,m.jsx)(fn.Z,{width:14,height:14,style:{color:"rgba(22, 24, 35, 0.75)"}},void 0)}),void 0)]},void 0),(0,m.jsx)(ea,Object.assign({isHidden:_&&!h.length,ref:r,onScroll:b},{children:y?(0,m.jsxs)(ta,{children:[l[p].list.map((t=>(0,m.jsx)(Zn,{uniqueId:t,enterMethod:c[p],onClose:e.onClose},t))),_&&f.map(((e,t)=>(0,m.jsxs)(ia,{children:[(0,m.jsx)(oa,{children:(0,m.jsx)(xn.Od.Avatar,{},void 0)},void 0),(0,m.jsxs)(na,{children:[(0,m.jsx)(xn.Od.Title,{style:{width:"119px",height:"16px",margin:"4px 0 12px"}},void 0),(0,m.jsx)(xn.Od.Title,{style:{width:"254px",height:"12px"}},void 0)]},void 0),(0,m.jsx)(xn.Od.Button,{style:{width:"106px",height:"36px",flexShrink:0}},void 0)]},t)))]},void 0):(0,m.jsxs)(aa,{children:[(0,m.jsx)(sa,{children:a(la[p].title)},void 0),(0,m.jsx)(ra,{children:a(la[p].empty)},void 0)]},void 0)}),void 0)]},void 0)}),void 0)}));var ca;!function(e){e.Logo="click_logo",e.Click="click_navigation_bar",e.ClickHamburgerMenu="click_hamburger_menu",e.ClickEhWebEntrance="click_eh_web_entrance",e.EhWebEntranceShow="eh_web_entrance_show",e.ShowFollowingRedDot="red_dot_show",e.RemoveFollowingRedDot="red_dot_exit"}(ca||(ca={}));const pa=e=>{c.W.event("click_navigation_bar",e)},ua=e=>{c.W.event("eh_web_entrance_show",e)},ga=e=>{c.W.event("click_eh_web_entrance",e)};var ma=i(29025),ha=i(88833);const _a=(0,be.Z)("div",{target:"e797se20"})((({theme:e})=>[{padding:"8px",display:"flex",flexDirection:"row",alignItems:"center",position:"relative",borderRadius:"4px",":hover":{textDecoration:"none"}},(0,$e.VZ)({theme:e})]),"label:DivUserLinkContainer;"),va=(0,be.Z)(jn.k,{target:"e797se22"})((({isSmall:e=!1})=>[({theme:{direction:t}})=>[(0,$e.YJ)({direction:t,marginEnd:e?"6px":"12px"}),(0,$e.f1)({max:1071,style:(0,$e.YJ)({direction:t,marginStart:"2px",marginEnd:"0"})})],{flex:"0 0 48px"}]),"label:StyledUserAvatar;"),ya=(0,be.Z)(Tn.D,{target:"e797se24"})([{flexGrow:1,height:"32px",":hover":{textDecoration:"none"}},(0,$e.f1)({max:1071,style:{display:"none"}})],"label:StyledUserContentLink;"),ba=($e.wj,(0,be.Z)("div",{target:"e797se26"})({display:"flex",flexDirection:"row",alignItems:"center"},"label:DivUserTitleWrapper;")),fa=(0,be.Z)("span",{target:"e797se27"})((({theme:e})=>[(0,$e.GI)({theme:e,typography:"P2",color:"TextPrimary",fontWeight:"bold",fontFamily:"Sofia"}),{marginTop:"-2px",maxWidth:"260px"}]),$e.wj,"label:SpanUserTitle;"),xa=(0,be.Z)("h4",{target:"e797se28"})((({theme:e})=>[(0,$e.GI)({theme:e,typography:"P2",color:"TextPrimary",fontWeight:"bold",fontFamily:"Sofia"}),{marginTop:"-2px",maxWidth:"260px"}]),$e.wj,"label:H4UserTitle;"),ka=(0,be.Z)("p",{target:"e797se210"})((({theme:e})=>[(0,$e.GI)({theme:e,fontWeight:"normal",typography:"P4",fontFamily:"Proxima",color:"TextSecondary"}),{lineHeight:"15px",maxWidth:"260px"}]),$e.wj,"label:PUserDesc;"),wa=(0,be.Z)("div",{target:"e797se214"})((({theme:{direction:e}})=>[{padding:"8px",display:"flex",flexDirection:"row",alignItems:"center",height:"48px"},(0,$e.f1)({max:1071,style:[{justifyContent:"center",width:"48px",height:"48px",marginBottom:"0",padding:"0 8px",borderRadius:"4px"},(0,$e.YJ)({direction:e,marginStart:"2px"})]})]),"label:DivUserSkeletonContainerV2;"),Sa=(0,be.Z)("div",{target:"e797se215"})((({theme:{direction:e}})=>[{display:"flex",flexDirection:"column",justifyContent:"space-around",height:"48px"},(0,$e.YJ)({direction:e,marginStart:"12px"}),(0,$e.f1)({max:1071,style:{display:"none"}})]),"label:DivSkeletonTitleGroup;"),Ca=(0,U.memo)((0,U.forwardRef)((function(e,t){const{uniqueId:i,e2ePrefix:o="",style:n,enterMethod:a="click_panel",id:s}=e,r=(0,ee.mp)(un.z,{selector:e=>{const t=e.users[i];if(!t)return null;const{verified:o,avatarThumb:n,secUid:a,nickname:s,roomId:r,id:l,relation:d}=t;return{avatarThumb:n,secUid:a,verified:o,nickname:s,roomId:r,id:l,uniqueId:i,relation:d}},dependencies:[i]}),{secUid:l,verified:d,nickname:c,relation:p}=(0,Ee.m7)(r),u=(0,Ln.zW)(r),{isShowLive:g}=u,h=g?Pn.G:Tn.D,_=(0,U.useRef)(null),v=(0,U.useCallback)((()=>{var e;null===(e=document.querySelector(`#${s}`))||void 0===e||e.focus()}),[s]);(0,U.useImperativeHandle)(t,(()=>({get offsetTop(){var e,t;return null!==(t=null===(e=_.current)||void 0===e?void 0:e.offsetTop)&&void 0!==t?t:0},get offsetLeft(){var e,t;return null!==(t=null===(e=_.current)||void 0===e?void 0:e.offsetLeft)&&void 0!==t?t:0},setFocus:v})),[v]),(0,Ln.TB)({isShowLive:g,autoReport:!0,once:!0,enterMethod:"suggested_others_photo",reportTrigger:g,reportValidator:()=>void 0!==p,user:r});const y=(0,Ln.CN)({user:r,enterMethod:a}),{isInVideoFeedRedesign:b}=(0,ma.y7)(),{pathname:f}=(0,ne.TH)(),x=(0,ve.ws)(f)||(0,ve.Dj)(f)||(0,ve.Qu)(f)||(0,ve.bf)(f)||(0,ve.u7)(f)||(0,ve.cQ)(f),k=b||x,w=(0,U.useMemo)((()=>k?{maxWidth:"145px"}:{}),[k]),S=(0,U.useCallback)((()=>{Sn.W.handleEnterUser({to_user_id:null==r?void 0:r.id,enter_method:a}),pa({target:g?"live_detail":"others_homepage"})}),[g,null==r?void 0:r.id,a]);return(0,m.jsxs)(_a,Object.assign({onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,ref:_,onClick:S,style:n},{children:[(0,m.jsx)(h,Object.assign({uniqueId:i,secUid:l,teaParams:y,"data-e2e":`${o}-user-avatar`,onClick:Ui.UW},{children:(0,m.jsx)(va,Object.assign({liveTheme:6,size:32},u,{isShowLiveTag:!1}),void 0)}),void 0),(0,m.jsxs)(ya,Object.assign({id:s,uniqueId:i,secUid:l,teaParams:y,onClick:Ui.UW},{children:[(0,m.jsxs)(ba,{children:[(0,In.p_)()?(0,m.jsx)(fa,Object.assign({style:w,"data-e2e":`${o}-user-title`},{children:i}),void 0):(0,m.jsx)(xa,Object.assign({style:w,"data-e2e":`${o}-user-title`},{children:i}),void 0),d&&(0,m.jsx)("div",Object.assign({"data-e2e":`${o}-user-bluev`},{children:(0,m.jsx)(ha.Q,{width:14,height:14},void 0)}),void 0)]},void 0),(0,m.jsx)(ka,Object.assign({style:w,"data-e2e":`${o}-user-desc`},{children:c}),void 0)]}),void 0)]}),void 0)}))),ja=(0,U.memo)((function(){return(0,m.jsxs)(wa,{children:[(0,m.jsx)(xn.Od.Avatar,{style:{width:32,height:32}},void 0),(0,m.jsxs)(Sa,{children:[(0,m.jsx)(xn.Od.Title,{style:{width:107,height:12}},void 0),(0,m.jsx)(xn.Od.Title,{style:{width:66,height:12}},void 0)]},void 0)]},void 0)}));var Pa=i(94506);const Ta=({color:e,position:t="relative",isBottom:i=!1})=>({position:t,[i?"::after":"::before"]:{content:'""',position:"absolute",left:"8px",right:"8px",[i?"bottom":"top"]:0,height:"1px",background:e,transform:"scaleY(0.5)"}}),Oa=(0,be.Z)("div",{target:"e4a681b0"})((({theme:e,theme:{colors:t}})=>[{padding:"16px 0"},(0,$e.GI)({theme:e,color:"TextSecondary",fontFamily:"Proxima",fontWeight:"semiBold",typography:"P3"}),Ta({color:t.LineSecondary}),(0,$e.f1)({max:1071,style:{padding:"8px 0"}})]),"label:DivUserContainer;"),La=(0,be.Z)("p",{target:"e4a681b1"})([{padding:"0 8px",marginBottom:"8px"},({theme:e})=>(0,$e.GI)({theme:e,typography:"P3"}),(0,$e.f1)({max:1071,style:{display:"none"}})],"label:PTitle;"),Ia=((0,$e.f1)({max:1071,style:{display:"none"}}),(0,be.Z)("p",{target:"e4a681b3"})((({theme:e})=>(0,$e.GI)({theme:e,color:"Primary",fontFamily:"Proxima",fontWeight:"semiBold",typography:"P3"})),"label:PShowMoreText;")),Aa=(0,be.Z)("button",{target:"e4a681b4"})([{background:"transparent",border:"none",padding:"0 8px",marginTop:"8px",cursor:"pointer"},(0,$e.f1)({max:1071,style:{display:"none"}})],"label:ButtonShowMoreText;");Aa.defaultProps=Object.assign(Object.assign({},Aa.defaultProps),{"data-e2e":"see-all"});const Ea=(0,be.Z)(Pa.Z,{target:"e4a681b5"})((({up:e,theme:{direction:t}})=>[(0,$e.YJ)({direction:t,marginStart:"4px"}),{transition:"all 0.3s",transform:e?"rotate(180deg)":"none",display:"none"}]),"label:StyledArrowDown;"),Ma=(0,be.Z)("p",{target:"e4a681b6"})((({theme:e})=>[(0,$e.GI)({theme:e,color:"TextTertiary",fontFamily:"Proxima",fontWeight:"normal",typography:"P3"}),{padding:"0 8px"},(0,$e.f1)({max:1071,style:{display:"none"}})]),"label:PFollowEmptyHint;"),Ra=(0,U.forwardRef)((function({title:e,listType:t,loading:i=!0,children:o},n){const a=(0,ee.mp)(hn,{selector:e=>0===e[t].list.length,dependencies:[t]});return(0,m.jsxs)(Oa,Object.assign({bottomBar:"following"===t,ref:n},{children:[(0,m.jsx)(La,Object.assign({"data-e2e":`${t}-accounts`},{children:e}),void 0),a&&i?Array(1).fill("").map(((e,t)=>(0,m.jsx)(ja,{},t))):o]}),void 0)})),Fa=(0,U.memo)((0,U.forwardRef)((function(e,t){const i=(0,_.u)(),o=(0,ji.Q)(),[n,a]=(0,U.useState)(!1),[s,r]=(0,U.useState)(!1),l=10,[{authorIdList:d,loading:c,hasMore:p,totalLength:u},g]=(0,ee.b7)(hn,{selector:e=>{const{list:t,loading:i,maxCursor:o}=e.following;return{authorIdList:n?t:t.slice(0,l),loading:i,hasMore:-1!==o,totalLength:t.length}},dependencies:[n],equalFn:(e,t)=>dn()(e,t)}),h=(0,U.useRef)(0);h.current=d.length,(0,U.useImperativeHandle)(t,(()=>({handleHitBottom:f()})),[]);const{needRefresh:v,setPathname:y,pathname:b}=Qi();(0,U.useEffect)((()=>{v&&g.getFollowingList({count:l}),y(b)}),[g,v,l]);const{setPlaying:x}=(0,ee.qj)(_n.x),k=(0,U.useRef)(!1),w=(0,U.useCallback)((()=>{k.current=!0,p&&n||a(!n),p&&g.getFollowingList({count:l}),!n||(p||!n)&&pa({target:"see_more"})}),[g,p,n,l,x]),S=(0,U.useRef)([]),C=(0,U.useCallback)((e=>t=>{S.current[e]=t}),[]),{shouldShowToggle:j,showMoreText:P,isSeeMore:T}=(({hasMore:e,isShowingMore:t,totalLength:i,showNum:o,loading:n})=>{const a=(0,ji.Q)(),s=e||!t;return{shouldShowToggle:Boolean(i)&&(e&&!t||!e&&i>o||!n),showMoreText:a(s?"feed_caption_see_more":"see_less"),isSeeMore:s}})({hasMore:p,isShowingMore:n,totalLength:u,showNum:l,loading:c}),O=k.current&&T&&p||!p&&!T,L=(0,U.useCallback)((()=>{var e;w(),(p&&T||!p&&T)&&(null===(e=S.current[h.current-1])||void 0===e||e.setFocus())}),[w,p,T]),I=(0,vn.w)(L,[w,p,T]),A=o("desktop_logged_in_profile"),E=(0,U.useCallback)((()=>{r(!1),x(!0)}),[x]);return(0,m.jsxs)(Ra,Object.assign({loading:c,listType:"following",title:A},{children:[u?d.map(((e,t)=>e?(0,m.jsx)(Ca,{id:`sidenav-follow-account-list-item-${t}`,ref:C(t),uniqueId:e,e2ePrefix:"following",enterMethod:"click_navigation"},e):null)):(0,m.jsx)(Ma,{children:o("sidenav_follow_hint")},void 0),c?(0,m.jsx)("div",Object.assign({style:{marginTop:"4px"}},{children:(0,m.jsx)(ja,{},void 0)}),void 0):null,j&&(0,m.jsxs)(Aa,Object.assign({"data-e2e":"following-see-all",onClick:w,onKeyDown:I,"aria-expanded":O,"aria-labelledby":"side-nav-following-see-all"},{children:[(0,m.jsx)(Ia,Object.assign({id:"side-nav-following-see-all"},{children:P}),void 0),(0,m.jsx)(Ea,{fill:i.colors.Primary,width:16,height:16,up:n},void 0)]}),void 0),(0,m.jsx)(da,{visible:s,type:"following",onClose:E},void 0)]}),void 0)})));var Da=i(66046);const Ba=(0,U.memo)((function(e){const{onEnterItem:t,onLeaveItem:i}=e,o=(0,ji.Q)(),{pathname:n}=(0,ne.TH)(),a=(0,ee.mp)(Da.R,{selector:e=>e.uniqueId,dependencies:[]}),s=(0,ee.mp)(un.z,{selector:e=>e.users[null!=a?a:""],dependencies:[a]}),r=(0,U.useRef)(""),[l,d]=(0,U.useState)(!1),[c,p]=(0,U.useState)(!1),[{list:u,totalLength:g},h]=(0,ee.b7)(hn,{selector:e=>{const{list:t}=e.suggest;return{list:t,totalLength:t.length}},dependencies:[l]}),{needRefresh:_,setPathname:v}=Qi();(0,U.useEffect)((()=>{var e;(0,ve.bf)(n)?r.current!==(null==s?void 0:s.id)&&s&&(r.current=null!==(e=s.id)&&void 0!==e?e:"",h.getRecommendList({pathname:n,userId:null==s?void 0:s.id})):(r.current="-1",_&&h.getRecommendList({pathname:n})),v(n)}),[h,_,n,v,s]);const{setPlaying:y}=(0,ee.qj)(_n.x),b=(0,U.useCallback)((()=>{d(!l),!l&&pa({target:"see_more"})}),[l,y]),f=(0,U.useRef)([]),x=(0,U.useRef)(null),k=(0,U.useCallback)((e=>t=>{f.current[e]=t}),[]),w=(0,U.useCallback)((()=>{var e;b(),!l&&(null===(e=f.current[4])||void 0===e||e.setFocus())}),[b,l]),S=(0,vn.w)(w,[b,l]),C=(0,U.useCallback)(((e,i)=>()=>{var o,n,a,s;null==t||t(e,(null!==(n=null===(o=f.current[i])||void 0===o?void 0:o.offsetTop)&&void 0!==n?n:0)+(null!==(s=null===(a=x.current)||void 0===a?void 0:a.offsetTop)&&void 0!==s?s:0),0)}),[t]),j=(0,U.useCallback)((e=>()=>{null==i||i(e)}),[i]),P=(0,U.useCallback)((()=>{p(!1),y(!0)}),[y]),T=(({pathname:e,user:t})=>{var i;const{user:o}=null!==(i=(0,ze.Lh)((()=>["user"]),[]))&&void 0!==i?i:{};return!((0,ve.BL)(e)||(0,ve.ws)(e)||(0,ve.Dj)(e)||(0,ve.FZ)(e)&&!o||(0,ve.bf)(e)&&((null==t?void 0:t.secret)||void 0!==t&&(null==t?void 0:t.uniqueId)===(null==o?void 0:o.uniqueId)))})({pathname:n,user:s}),O=(0,U.useMemo)((()=>o(l?"see_less":"see_all")),[l,o]);return T?(0,m.jsxs)(Ra,Object.assign({ref:x,listType:"suggest",title:o("sug_accounts")},{children:[u.map(((e,t)=>e?(0,m.jsx)(Ca,{id:`sidenav-recommend-account-list-item-${t}`,ref:k(t),onMouseEnter:C(e,t),onMouseLeave:j(e),uniqueId:e,e2ePrefix:"suggest",style:!l&&t>=5?{display:"none"}:void 0,enterMethod:"click_panel"},e):null)),g>5&&(0,m.jsx)(Aa,Object.assign({isRecommend:!0,onClick:b,onKeyDown:S,"aria-expanded":l,"aria-labelledby":"side-nav-suggest-see-all"},{children:(0,m.jsx)(Ia,Object.assign({"data-e2e":"suggest-see-all",id:"side-nav-suggest-see-all"},{children:O}),void 0)}),void 0),(0,m.jsx)(da,{visible:c,type:"suggest",onClose:P},void 0)]}),void 0):null}));let za=class{constructor(e){this.fetch=e}getKeywords(){return this.fetch.get("/api/discovery/words/",{baseUrlType:2}).pipe((0,Qe.U)((e=>{var t;return null!==(t=e.keywords)&&void 0!==t?t:[]})))}};za=(0,w.__decorate)([(0,so.G)(),(0,w.__metadata)("design:paramtypes",[p.r])],za);let Na=class extends He.D{constructor(e){super(),this.service=e,this.defaultState={init:!1,loading:!1,keywords:[]}}setInit(e,t){e.init=t}setLoading(e,t){e.loading=t}setKeywords(e,t){e.keywords=t}fetchKeywords(e){return e.pipe((0,To.M)(this.state$),(0,io.z)((([e,{init:t}])=>t?ao.E:this.service.getKeywords().pipe((0,no.K)((()=>(0,oo.of)([]))),(0,io.z)((e=>(0,oo.of)(this.getActions().setKeywords(e),this.getActions().setInit(!0)))),(0,jo.O)(this.getActions().setLoading(!0)),(0,Po.l)(this.getActions().setLoading(!1),this.terminate())))))}};(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,Boolean]),(0,w.__metadata)("design:returntype",void 0)],Na.prototype,"setInit",null),(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,Boolean]),(0,w.__metadata)("design:returntype",void 0)],Na.prototype,"setLoading",null),(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,Array]),(0,w.__metadata)("design:returntype",void 0)],Na.prototype,"setKeywords",null),(0,w.__decorate)([(0,Ge.Qm)({payloadGetter:1}),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Ve.y]),(0,w.__metadata)("design:returntype",Ve.y)],Na.prototype,"fetchKeywords",null),Na=(0,w.__decorate)([(0,Ze.Y)("KeywordsModule"),(0,w.__metadata)("design:paramtypes",[za])],Na);var Ua,Wa=i(21590);!function(e){e.DiscoverLinkShow="discover_link_show",e.ClickDiscoverLink="click_discover_link",e.DiscoverModuleClick="discover_module_click",e.DiscoverModuleExpand="discover_module_expand_click"}(Ua||(Ua={}));let $a=class{constructor(e){this.fetch=e}getDiscoverList(e){return this.fetch.get("/node/share/discover/list",{query:{pageType:e}}).pipe((0,Qe.U)((e=>e.body.discoverList)))}};$a=(0,w.__decorate)([(0,so.G)(),(0,w.__metadata)("design:paramtypes",[p.r])],$a);let qa=class extends He.D{constructor(e){super(),this.service=e,this.defaultState={list:[],loading:!1}}setList(e,t){const{list:i}=t;e.list=i}setLoading(e,t){const{loading:i}=t;e.loading=i}getDiscoverList(e){return e.pipe((0,Ye.z)((({pageType:e})=>this.service.getDiscoverList(e).pipe((0,Co.b)((e=>{e.forEach(((e,t)=>{const{type:i,title:o,isInternalLink:n}=e;var a;a={link_type:i,order:t,content:o,is_experiment:n?1:0},c.W.event("discover_link_show",a)}))})),(0,Qe.U)((e=>this.getActions().setList({list:e}))),(0,jo.O)(this.getActions().setLoading({loading:!0})),(0,Po.l)(this.getActions().setLoading({loading:!1}),this.terminate()),(0,Ke.n)({})))))}};(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,Object]),(0,w.__metadata)("design:returntype",void 0)],qa.prototype,"setList",null),(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,Object]),(0,w.__metadata)("design:returntype",void 0)],qa.prototype,"setLoading",null),(0,w.__decorate)([(0,Ge.Qm)({payloadGetter:1}),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Ve.y]),(0,w.__metadata)("design:returntype",void 0)],qa.prototype,"getDiscoverList",null),qa=(0,w.__decorate)([(0,Ze.Y)("DiscoverList"),(0,w.__metadata)("design:paramtypes",[$a])],qa);var Ha=i(28327),Ga=i(65598),Za=i(29469),Va=i(78036),Qa=i(74340);const Ya=(0,Ha.F4)({"0%":{transform:"translateX(-240px)"},"100%":{transform:"translateX(328px)"}}),Ka=(0,be.Z)("div",{target:"eikhr9j0"})((({theme:{colors:e}})=>({overflow:"hidden",width:"208px",height:"24px",marginBottom:"12px",borderRadius:"12px",background:e.BGPlaceholderOpaque})),"label:DivDiscoverSkeletonItem;"),Ja=(0,be.Z)("div",{target:"eikhr9j1"})({width:"120px",height:"24px",background:"linear-gradient(90deg, rgba(22, 24, 35, 0) 0%, rgba(22, 24, 35, .06) 50.52%, rgba(22, 24, 35, 0) 100%)",animation:`${Ya} 1.5s cubic-bezier(0, 0, 1, 1) infinite`},"label:DivLinearGradient;"),Xa=(0,be.Z)("div",{target:"eikhr9j2"})((({theme:{colors:e}})=>[{position:"relative",boxSizing:"border-box",width:"100%",padding:"16px 8px 8px 8px","::after":{content:'""',position:"absolute",top:"0",width:"calc(100% - 16px)",height:"1px",background:e.LineSecondary,transform:"scaleY(.5)"}},(0,$e.f1)({max:1071,style:{display:"none"}})]),"label:DivDiscoverContainer;"),es=(0,be.Z)("p",{target:"eikhr9j3"})((({theme:e})=>[(0,$e.GI)({theme:e,color:"TextSecondary",fontFamily:"Proxima",fontWeight:"semiBold",typography:"P3"}),{paddingBottom:"16px"}]),"label:PDiscoverTitle;");es.defaultProps=Object.assign(Object.assign({},es.defaultProps),{"data-e2e":"nav-discover-title"});const ts=(0,be.Z)("div",{target:"eikhr9j4"})({display:"flex",flexWrap:"wrap",width:"100%"},"label:DivDiscoverListContainer;");ts.defaultProps=Object.assign(Object.assign({},ts.defaultProps),{"data-e2e":"nav-discover-list"});const is={display:"block",width:"fit-content",maxWidth:"100%",":hover":{textDecoration:"none"}},os=(0,be.Z)(Ga.rU,{target:"eikhr9j5"})(is,"label:StyledLink;");os.defaultProps=Object.assign(Object.assign({},os.defaultProps),{"data-e2e":"nav-discover-href"});const ns=(0,be.Z)(En.v,{target:"eikhr9j6"})(is,"label:StyledTmpLink;");ns.defaultProps=Object.assign(Object.assign({},ns.defaultProps),{"data-e2e":"nav-discover-href"});const as=(0,be.Z)("div",{target:"eikhr9j7"})((({theme:e,theme:{colors:t,direction:i}})=>[{display:"flex",boxSizing:"border-box",width:"fit-content",maxWidth:"100%",height:"24px",marginBottom:"12px",padding:"3px 10px",border:`1px solid ${t.LinePrimary}`,borderRadius:"12px",background:t.BGSecondary2},(0,$e.VZ)({theme:e}),(0,$e.YJ)({direction:i,marginEnd:"8px"})]),"label:DivDiscoverItemContainer;"),ss=(0,be.Z)(Za.Z,{target:"eikhr9j9"})({flexShrink:0},"label:StyledNumber;"),rs=(0,be.Z)(Va.Z,{target:"eikhr9j10"})({flexShrink:0},"label:StyledMusicNote;"),ls=(0,be.Z)(Qa.Z,{target:"eikhr9j11"})({flexShrink:0},"label:StyledMagnifyingGlass;"),ds=(0,be.Z)("p",{target:"eikhr9j12"})($e.wj,(({theme:e,theme:{direction:t}})=>[(0,$e.GI)({theme:e,color:"TextSecondary",fontFamily:"Proxima",fontWeight:"normal",typography:"P3"}),{lineHeight:"18px"},(0,$e.YJ)({direction:t,paddingStart:"6px"})]),"label:PText;"),cs=function(){var e,t;const i=(0,ji.Q)(),{pathname:o}=(0,ne.TH)(),{isGoogleBot:n}=(0,Ee.m7)((0,Ne.h)((()=>["isGoogleBot"]),[])),{language:a,abTestVersion:s}=null!==(e=(0,ze.Lh)((()=>["language","abTestVersion"]),[]))&&void 0!==e?e:{},[r,l]=(0,U.useState)(n),d=null!==(t=(0,Fe.N8)(s,"kep_crawling"))&&void 0!==t?t:"v1",p=(0,ve.oC)(o)&&("v2"===d||n),[{list:u,loading:g},h]=(0,ee.b7)(qa,{selector:e=>{const{list:t,loading:i}=e;return{list:t,loading:i}},dependencies:[]}),{needRefresh:_,setPathname:v}=Qi(),[{keywords:y},b]=(0,ee.b7)(Na,{selector:e=>({keywords:e.keywords}),dependencies:[]});(0,U.useEffect)((()=>{const e=(0,ve.C2)(o);_&&h.getDiscoverList({pageType:e}),v(o)}),[h,o]),(0,U.useEffect)((()=>{p&&b.fetchKeywords()}),[b,p]);const f=(0,U.useCallback)(((e,t)=>()=>{const{type:i,title:o,isInternalLink:n}=e;switch(a={link_type:i,order:t,content:o,is_experiment:n?1:0},c.W.event("click_discover_link",a),i){case 3:Sn.W.handleEnterTagDetail({enter_method:"discover"});break;case 4:Sn.W.handleEnterMusicDetail({enter_method:"discover"});break;default:Sn.W.handleDiscoveryPage({enter_method:"discover"})}var a}),[]),x=(0,U.useCallback)((e=>()=>{(e=>{c.W.event("discover_module_click",{click_url:e})})(`${Wa.o}${e}`)}),[]),k=(0,U.useCallback)((()=>{var e;e=r?"see_less":"see_all",c.W.event("discover_module_expand_click",{buton_name:e}),l(!r)}),[r]),w=(0,U.useCallback)((()=>{const e=y.length>0?u.length:u.length-1;k(),!r&&setTimeout((()=>{var t;null===(t=document.querySelector(`#sidenav-discover-list-item-${e}`))||void 0===t||t.focus()}),0)}),[k,y.length,u.length,r]),S=(0,vn.w)(w,[r,u.length,y.length,k]),C=(0,U.useMemo)((()=>i(r?"see_less":"see_all")),[i,r]);return!g&&u.length<4?null:(0,m.jsxs)(Xa,{children:[(0,m.jsx)(es,{children:i("Discover")},void 0),g?(0,m.jsxs)("div",{children:[(0,m.jsx)(Ka,{children:(0,m.jsx)(Ja,{},void 0)},void 0),(0,m.jsx)(Ka,{children:(0,m.jsx)(Ja,{},void 0)},void 0)]},void 0):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(ts,{children:[u.map(((e,t)=>{const{type:i,title:o}=e;let{link:n}=e,s=null;switch(n=`${n.replace("https://www.tiktok.com","")}?lang=${a}`,i){case 3:s=(0,m.jsx)(ss,{width:16,height:16},void 0);break;case 4:s=(0,m.jsx)(rs,{width:16,height:16},void 0);break;default:s=(0,m.jsx)(ls,{width:16,height:16},void 0)}return(0,m.jsx)(ns,Object.assign({id:`sidenav-discover-list-item-${t}`,to:n,onClick:f(e,t)},{children:(0,m.jsxs)(as,{children:[s,(0,m.jsx)(ds,{children:o},void 0)]},void 0)}),t)})),p&&r&&y.map(((e,t)=>{const i=`/discovery/${e}?lang=${a}`,o=e.replace(/-/g," ");return(0,m.jsx)(ns,Object.assign({id:`sidenav-discover-list-item-${u.length+t}`,to:i,onClick:x(i)},{children:(0,m.jsxs)(as,{children:[(0,m.jsx)(ls,{width:16,height:16},void 0),(0,m.jsx)(ds,Object.assign({title:o},{children:o}),void 0)]},void 0)}),e)}))]},void 0),p&&y.length>0&&(0,m.jsx)(Aa,Object.assign({onClick:k,onKeyDown:S,"aria-expanded":r,"aria-labelledby":"sidenav-discover-list-see-more"},{children:(0,m.jsx)(Ia,Object.assign({id:"sidenav-discover-list-see-more"},{children:C}),void 0)}),void 0)]},void 0)]},void 0)};var ps=i(39198),us=i(92326),gs=i(27545),ms=i(66185);const hs=(0,be.Z)("div",{target:"e125wy4z0"})((({theme:{colors:e}})=>[{display:"none"},Ta({color:e.LineSecondary}),(0,$e.f1)({max:1071,style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"8px 0"}})]),"label:DivEhEntranceSideContainer;");hs.defaultProps=Object.assign(Object.assign({},hs.defaultProps),{"data-e2e":"eh-footer-icon"});const _s=(0,be.Z)("div",{target:"e125wy4z1"})((({isDark:e})=>[{display:"block",width:"32px",height:"32px",margin:"8px",backgroundSize:"cover",backgroundImage:e?`url(${us})`:`url(${ms})`,": hover":{backgroundImage:e?`url(${ps})`:`url(${gs})`}}]),"label:DivEhEntranceSide;"),vs=function(){const{isDark:e}=(0,_.u)(),t=(0,U.useCallback)((()=>{ga({enter_method:"click_banner"})}),[]),i=(0,U.useRef)(null);Yi({intersectionHandler:()=>{ua({enter_method:"banner"})},element:i,threshold:[.5]});const o="https://effecthouse.tiktok.com/?utm_source=tiktok_webapp_main&utm_content=left_sidebar";return(0,m.jsx)(hs,Object.assign({ref:i},{children:(0,m.jsx)(En.v,Object.assign({forceSSR:!0,to:o,target:"_blank",onClick:t},{children:(0,m.jsx)(_s,{isDark:e},void 0)}),o)}),void 0)};var ys,bs=i(48088),fs=i(39696),xs=i(27051),ks=i(93394);function ws(){return ws=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},ws.apply(this,arguments)}const Ss=function(e){return U.createElement("svg",ws({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 18 18",width:"1em",height:"1em"},e),ys||(ys=U.createElement("path",{fill:"white",d:"M0 18V9a9 9 0 0118 0v9H0zm15.75-2.25V9a6.75 6.75 0 00-9.978-5.93 6.744 6.744 0 016.619 2.971A4.483 4.483 0 0113.5 9v6.75h2.25zM6.502 5.257A4.5 4.5 0 002.25 9.75v6H4.5V9c0-1.56.795-2.936 2.002-3.743zm4.096 2.16A2.25 2.25 0 006.75 9v6.75h4.5v-6a4.48 4.48 0 00-.652-2.333z"})))};var Cs;function js(){return js=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},js.apply(this,arguments)}const Ps=function(e){return U.createElement("svg",js({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 18 18",width:"1em",height:"1em"},e),Cs||(Cs=U.createElement("path",{fill:"black",d:"M0 18V9a9 9 0 0118 0v9H0zm15.75-2.25V9a6.75 6.75 0 00-9.978-5.93 6.744 6.744 0 016.619 2.971A4.483 4.483 0 0113.5 9v6.75h2.25zM6.502 5.257A4.5 4.5 0 002.25 9.75v6H4.5V9c0-1.56.795-2.936 2.002-3.743zm4.096 2.16A2.25 2.25 0 006.75 9v6.75h4.5v-6a4.48 4.48 0 00-.652-2.333z"})))},Ts=(0,be.Z)("div",{target:"el3hfgg0"})((({theme:{colors:e,direction:t}})=>[{position:"relative",paddingTop:"16px","::before":{content:'""',position:"absolute",left:"8px",right:"8px",top:0,height:"1px",background:e.LineSecondary,transform:"scaleY(0.5)"}},(0,$e.YJ)({direction:t,paddingStart:"8px"}),(0,$e.f1)({max:1071,style:{display:"none"}})]),"label:DivFooterContainer;"),Os=(0,be.Z)("div",{target:"el3hfgg1"})({marginBottom:"8px"},"label:DivLinkContainer;"),Ls=e=>[(0,$e.GI)({theme:e,color:"TextTertiary",fontFamily:"Proxima",fontWeight:"semiBold",typography:"P4",isLink:!0}),{display:"inline-block",marginRight:"6px",marginTop:"5px"}],Is=(0,be.Z)("span",{target:"el3hfgg2"})((({theme:e})=>Ls(e)),"label:SpanCopyright;");Is.defaultProps=Object.assign(Object.assign({},Is.defaultProps),{"data-e2e":"copyright"});const As=(0,be.Z)(En.v,{target:"el3hfgg3"})((({theme:e})=>Ls(e)),"label:StyledNavLink;"),Es=(0,be.Z)("div",{target:"el3hfgg4"})({marginBottom:"8px",position:"relative"},"label:DivMoreContainer;"),Ms=(0,be.Z)("div",{target:"el3hfgg5"})((({theme:{direction:e}})=>[(0,$e.YJ)({direction:e,paddingEnd:"8px"}),{height:"50px",textAlign:"center",position:"relative",marginBottom:"30px"}]),"label:DivEffectHouseEntranceContainer;");Ms.defaultProps=Object.assign(Object.assign({},Ms.defaultProps),{"data-e2e":"eh-footer-banner"});const Rs=(0,be.Z)("div",{target:"el3hfgg6"})((({theme:{direction:e}})=>(0,$e.YJ)({direction:e})),{position:"absolute",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",maxWidth:"200px"},"label:DivEntranceTextContainer;"),Fs=(0,be.Z)(En.v,{target:"el3hfgg7"})([{display:"flex",alignItems:"center",justifyContent:"center",":hover":{[`${Rs}`]:{transform:"scale(1.06)",transition:"transform 200ms cubic-bezier(0.25, 0, 0.25, 1)",textDecoration:"none"}}}],"label:StyledEHEntranceLink;"),Ds=(0,be.Z)("img",{target:"el3hfgg8"})({height:"52px",borderRadius:"8px"},"label:ImgEffectBg;"),Bs=(0,be.Z)(Ss,{target:"el3hfgg10"})((({theme:{direction:e}})=>[(0,$e.YJ)({direction:e,marginEnd:"9px"}),{width:"19px",height:"19px",marginTop:"2px"}]),"label:StyledEHLogoDark;"),zs=(0,be.Z)("h4",{target:"el3hfgg11"})((({theme:e})=>[(0,$e.GI)({theme:e,typography:"P2",color:"TextPrimary",fontWeight:"semiBold",fontFamily:"Sofia"})]),{display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},"label:H4EhText;"),Ns=(0,be.Z)(Ps,{target:"el3hfgg12"})((({theme:{direction:e}})=>[(0,$e.YJ)({direction:e,marginEnd:"9px"}),{width:"19px",height:"19px",marginTop:"2px"}]),"label:StyledEHLogo;"),Us=(0,be.Z)("span",{target:"el3hfgg13"})((({theme:e})=>Ls(e)),{cursor:"pointer"},"label:SpanMoreText;");Us.defaultProps=Object.assign(Object.assign({},Us.defaultProps),{"data-e2e":"more-link"});const Ws=(0,be.Z)("div",{target:"el3hfgg14"})({padding:"15px 16px 20px",width:"fit-content",maxWidth:"200px"},"label:DivMorePopupWrapper;"),$s=(0,be.Z)(En.v,{target:"el3hfgg15"})((({theme:e})=>[(0,$e.GI)({theme:e,typography:"P2",fontWeight:"semiBold"}),{display:"block",":hover":{textDecoration:"none",color:e.colors.Primary},"& + &":{marginTop:"20px"}}]),"label:StyledMoreLink;"),qs=(0,U.memo)((function({navList:e,e2e:t}){return(0,m.jsx)(Os,{children:e.map((e=>(0,m.jsx)(As,Object.assign({forceSSR:!0,to:e.href,"data-e2e":t,target:"_blank"},{children:e.title}),e.href)))},void 0)}));var Hs;!function(e){e.Sidebar="sidebar",e.Footer="footer"}(Hs||(Hs={}));const Gs="copyright-policy",Zs=[{title:"terms",key:"terms-of-service",href:""},{title:"privacy",key:"privacy-policy-row",href:""},{title:"copyright",key:"copyright-policy",href:""}];function Vs(e){var t;return null!==(t=null==e?void 0:e.children.filter((({placements:e=[]})=>0===e.length||e.includes("sidebar"))))&&void 0!==t?t:[]}const Qs=(0,U.memo)((function({lang:e}){var t;const i=(0,ji.Q)(),{active:o,handleMouseEnter:n,handleMouseLeave:a}=(0,bs.R)(),{isDark:s}=(0,_.u)(),{region:r}=(0,ee.mp)(V.G,{selector:e=>{var t;return{region:null===(t=e.appContext)||void 0===t?void 0:t.region}},dependencies:[]}),{navList:l=[],$legalList:d}=(0,ee.mp)(P.r,{selector:e=>{var t,o,n;return{$legalList:null===(o=null===(t=e.bizContext)||void 0===t?void 0:t.navList.find((({title:e})=>e===i("Legal"))))||void 0===o?void 0:o.children,navList:null===(n=e.bizContext)||void 0===n?void 0:n.navList}},dependencies:[]}),{pageList:c,programList:p,legalList:u}=(0,U.useMemo)((()=>{const t=[{title:i("help"),key:"help-center",href:`https://support.tiktok.com/${e}`},{title:i("safety"),key:"safety-center",href:`https://www.tiktok.com/safety?lang=${e}`},...Zs.reduce(((t,o)=>{var n;const a=(null!=d?d:[]).map((({key:e})=>e)).indexOf(o.key);return o.key===Gs&&(t.push({title:i("help_center_creator_portal"),key:"create-portal",href:"https://www.tiktok.com/creators/creator-portal/en-us/"}),t.push({title:i("Community Guidelines"),key:"community-guidelines",href:`https://www.tiktok.com/community-guidelines?lang=${e}`})),a>=0&&t.push(Object.assign(Object.assign({},o),{title:i(o.title),href:null!==(n=null==d?void 0:d[a].href)&&void 0!==n?n:""})),t}),[])],o=Vs(l[0]),n=Vs(l[1]);return n.splice(3,0,{href:`https://www.tiktok.com/transparency?lang=${e}`,key:"transparency",title:i("Transparency")}),{pageList:o,programList:n,legalList:t}}),[d,e,l,i]),g=(0,ze.Lh)((()=>["abTestVersion"]),[]),h="v2"===(null!==(t=(0,Fe.N8)(null==g?void 0:g.abTestVersion,"studio_web_eh_entrance"))&&void 0!==t?t:"v1"),v=(0,U.useCallback)((()=>{ga({enter_method:"click_banner"})}),[]),y=(0,U.useRef)(null);Yi({intersectionHandler:()=>{ua({enter_method:"banner"})},element:y,threshold:[.5]});const b=`${(new Date).getFullYear()} TikTok`,f=(null!=d?d:[]).filter((e=>-1===u.findIndex((({key:t})=>t===e.key))||e.key===Gs));"DE"===(null==r?void 0:r.trim().toUpperCase())&&f.splice(3,0,{href:"https://www.tiktok.com/transparency/de-de/netzdg-about/",key:"netzdg",title:"NetzDG"}),"AT"===(null==r?void 0:r.trim().toUpperCase())&&f.push({href:"https://www.tiktok.com/transparency/de-de/koplg-about/",key:"kopig",title:"KoPi-G"});const x="https://effecthouse.tiktok.com/?utm_source=tiktok_webapp_main&utm_content=left_sidebar";return(0,m.jsxs)(Ts,{children:[h&&(0,m.jsx)(Ms,Object.assign({ref:y},{children:(0,m.jsxs)(Fs,Object.assign({forceSSR:!0,to:x,target:"_blank",onClick:v},{children:[(0,m.jsx)(Ds,{src:s?xs:ks,alt:"eh-background"},void 0),(0,m.jsxs)(Rs,{children:[s?(0,m.jsx)(Bs,{},void 0):(0,m.jsx)(Ns,{},void 0),(0,m.jsx)(zs,{children:i("webapp_ttehEntrance_createEffects")},void 0)]},void 0)]}),x)}),void 0),(0,m.jsx)(qs,{navList:c,e2e:"page-link"},void 0),(0,m.jsx)(qs,{navList:p,e2e:"program-link"},void 0),(0,m.jsx)(qs,{navList:u,e2e:"legal-link"},void 0),f.length>0&&(0,m.jsx)(Es,{children:(0,m.jsxs)(Us,Object.assign({onMouseEnter:n,onMouseLeave:a},{children:[i("more"),(0,m.jsx)(fs.G,Object.assign({active:o,placement:"topLeft",verticalOffset:5},{children:(0,m.jsx)(Ws,{children:f.map((({title:e,href:t})=>(0,m.jsx)($s,Object.assign({forceSSR:!0,to:t,target:"_blank"},{children:e}),e)))},void 0)}),void 0)]}),void 0)},void 0),(0,m.jsxs)(Is,{children:["© ",b]},void 0)]},void 0)}));var Ys=i(14500);const Ks="https://livecenter.tiktok.com",Js="=+~#$@",Xs={"[]":/\[([^[\]]+)\]/g,"{}":/\{([^{}]*)\}/g,"%s":/%s/g,"<>":/<([^<>]*)>/g},er=({text:e,matchArr:t,replaceComponents:i})=>{const[o,n]=(0,U.useState)([]);return(0,U.useEffect)((()=>{let o=[];const a=[],s=Xs[t];let r=e;r=e.replace(s,((...e)=>(a.push(e[1]),Js))),o=r.split(Js);const l=[];o.forEach(((e,t)=>{if(l.push(e),a.length>t&&i.length>0){const e=i[t%i.length];l.push((0,m.jsx)(e,{text:a[t],matchIndex:t},t))}})),n(l)}),[e,t,i]),(0,m.jsx)(m.Fragment,{children:o},void 0)};var tr,ir,or,nr,ar,sr=i(70040);function rr(){return rr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},rr.apply(this,arguments)}const lr=function(e){return U.createElement("svg",rr({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 84 81",width:"1em",height:"1em"},e),tr||(tr=U.createElement("path",{fill:"white",d:"M36.802 9.019c2.308-4.005 8.088-4.005 10.396 0l31.117 53.985c2.305 4-.582 8.996-5.199 8.996H10.884c-4.617 0-7.504-4.996-5.199-8.996L36.802 9.019z"})),ir||(ir=U.createElement("path",{fill:"url(#video-warning_svg__paint0_linear_1104_6141)",d:"M38.522 10.121c1.534-2.699 5.422-2.699 6.956 0l30.627 53.903C77.62 66.69 75.694 70 72.627 70H11.373c-3.067 0-4.993-3.31-3.478-5.976l30.627-53.903z"})),or||(or=U.createElement("path",{fill:"white",d:"M38.5 28a1 1 0 011-1h4a1 1 0 011 1v23a1 1 0 01-1 1h-4a1 1 0 01-1-1V28z"})),nr||(nr=U.createElement("circle",{cx:41.5,cy:59,r:3,fill:"white"})),ar||(ar=U.createElement("defs",null,U.createElement("linearGradient",{id:"video-warning_svg__paint0_linear_1104_6141",x1:33.5,x2:64,y1:20.5,y2:67,gradientUnits:"userSpaceOnUse"},U.createElement("stop",{stopColor:"#FF796B"}),U.createElement("stop",{offset:1,stopColor:"#FF4C3A"})))))},dr=(0,sr.Z)("div",{target:"e1m9td0x0"})({width:400,display:"flex",flexDirection:"column",alignItems:"center",padding:"36px 19px 32px 19px"},"label:DivContainer;"),cr=(0,sr.Z)(lr,{target:"e1m9td0x1"})([{width:83,height:81,marginBottom:24}],"label:StyledVideoWarningIcon;"),pr=(0,sr.Z)("div",{target:"e1m9td0x2"})((({theme:e})=>[(0,$e.GI)({theme:e,typography:"P3",fontFamily:"Proxima",color:"TextPrimary"}),{textAlign:"center",marginBottom:24}]),"label:DivContent;"),ur=(0,sr.Z)("div",{target:"e1m9td0x3"})((({theme:e})=>[(0,$e.GI)({theme:e,typography:"P4",fontFamily:"Proxima",color:"TextTertiary"}),{marginBottom:24}]),"label:DivTips;"),gr=(0,sr.Z)("span",{target:"e1m9td0x4"})((({theme:e})=>[(0,$e.GI)({theme:e,typography:"P4",fontFamily:"Proxima",color:"Primary"}),{marginBottom:24}]),"label:SpanTipsHighlight;"),mr=(0,sr.Z)(Ut.W,{target:"e1m9td0x5"})((({theme:e,theme:{colors:t}})=>[(0,$e.GI)({theme:e,typography:"P3",fontFamily:"Proxima",color:"ConstTextInverse",fontWeight:"semiBold"}),{padding:"12px auto",textAlign:"center",width:"100%",backgroundColor:t.Primary,":hover":{backgroundColor:t.Primary}}]),"label:StyledButton;"),hr=function({onOkClick:e,visible:t,duration:i}){const o=(0,ji.Q)(),n=(0,U.useMemo)((()=>[({text:e})=>(0,m.jsx)(gr,{children:e},void 0)]),[]);return(0,m.jsx)(Yt.u_,Object.assign({visible:t,maskClosable:!1},{children:(0,m.jsxs)(dr,{children:[(0,m.jsx)(cr,{},void 0),(0,m.jsx)(pr,{children:o("pm_mt_obs_revoke_desc")},void 0),(0,m.jsx)(ur,{children:(0,m.jsx)(er,{text:o("pm_mt_revoke_duration",{num:i,number:i}).replace("%s",i),matchArr:"%s",replaceComponents:n},void 0)},void 0),(0,m.jsx)(mr,Object.assign({type:"submit",onClick:e},{children:o("pm_mt_modal_revoke_confirm_btn")}),void 0)]},void 0)}),void 0)},_r=(0,be.Z)("div",{target:"enmnmya0"})((({theme:e})=>[(0,$e.GI)({theme:e,fontFamily:"Proxima",typography:"P3",color:"ConstTextInverse",fontWeight:"normal"}),{display:"none",position:"fixed",left:0,top:0,padding:"12px",borderRadius:"8px",zIndex:100,background:"#4b4b4b"},(0,$e.f1)({max:1071,style:{display:"block"}})]),"label:DivNavHintContainer;"),vr=function({text:e,active:t,containerRef:i,scrollRef:o}){const{transform:n}=function({containerRef:e,scrollRef:t}){const{direction:i}=(0,_.u)(),[o,n]=(0,U.useState)(-1e3),[a,s]=(0,U.useState)(-1e3),r=()=>{var t,o;if(!e.current)return;const a=e.current.getBoundingClientRect();s(null!==(t="ltr"===i?a.left+a.width+12:a.left-12)&&void 0!==t?t:0),n(null!==(o=a.top+a.height/2)&&void 0!==o?o:0)},l=(0,kn.fB)(r,[e,i],200),d=(0,U.useCallback)(r,[e,i]);return(0,U.useEffect)((()=>{var e;const i=null===(e=t.current)||void 0===e?void 0:e.dom;return window.addEventListener("resize",l),null==i||i.addEventListener("scroll",d),window.addEventListener("recalculate-tip-position",d),l(),()=>{window.removeEventListener("resize",l),window.removeEventListener("recalculate-tip-position",d),null==i||i.removeEventListener("scroll",d)}}),[e,l,d,t]),{top:o,left:a,transform:`translate(${"ltr"===i?"0":"-100%"}, -50%) translate(${a}px, ${o}px)`}}({containerRef:i,scrollRef:o});return t?(0,x.createPortal)((0,m.jsx)(_r,Object.assign({style:{transform:n}},{children:e}),void 0),document.body):null},yr=(0,be.Z)("div",{target:"e1k5k7j00"})((({theme:{colors:e,direction:t}})=>[{padding:"8px",position:"relative","::before":{content:'""',position:"absolute",left:"8px",top:"0px",right:"8px",height:"1px",background:e.LineSecondary,transform:"scaleY(0.5)"}},(0,$e.f1)({max:1071,style:{[`${xr}`]:{display:"none"},[`${wr}`]:[(0,$e.YJ)({direction:t,marginEnd:"0"})]}})]),"label:DivGoLiveEntranceContainer;"),br=(0,be.Z)(En.v,{target:"e1k5k7j01"})((({theme:e})=>[(0,$e.GI)({theme:e,typography:"P2",fontWeight:"bold",fontFamily:"Proxima"}),{textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"4px",height:"36px",background:e.colors.BGInput,":hover":{textDecoration:"none"}},(0,$e.VZ)({theme:e,hover:"rgba(22, 24, 35, 0.1)",active:"rgba(22, 24, 35, 0.14)"})]),"label:StyledLink;"),fr=(0,be.Z)("div",{target:"e1k5k7j02"})((({theme:e})=>[(0,$e.GI)({theme:e,typography:"P2",fontWeight:"bold",fontFamily:"Proxima"}),{textAlign:"center",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"4px",height:"36px",background:e.colors.BGInput,":hover":{textDecoration:"none"}},(0,$e.VZ)({theme:e,hover:"rgba(22, 24, 35, 0.1)",active:"rgba(22, 24, 35, 0.14)"})]),"label:DivText;"),xr=(0,be.Z)("span",{target:"e1k5k7j03"})((({theme:{colors:e},isLiveStreaming:t,isDisabled:i})=>({color:i?e.TextQuaternary:t?e.Primary:e.TextPrimary})),"label:SpanText;"),kr=[(0,Ha.F4)({"0%":{y:"4px",height:"10px"},"40%":{y:"4px",height:"12px"},"70%":{y:"4px",height:"6px"},"100%":{y:"4px",height:"10px"}}),(0,Ha.F4)({"0%":{y:"4px",height:"6px"},"40%":{y:"4px",height:"10px"},"70%":{y:"4px",height:"12px"},"100%":{y:"4px",height:"6px"}}),(0,Ha.F4)({"0%":{y:"4px",height:"8px"},"40%":{y:"4px",height:"12px"},"70%":{y:"4px",height:"6px"},"100%":{y:"4px",height:"8px"}})],wr=(0,be.Z)("svg",{target:"e1k5k7j04"})((({isLiveStreaming:e,theme:{direction:t}})=>[(0,$e.YJ)({direction:t,marginEnd:"4px"}),e?{rect:{transformOrigin:"center",transform:"rotateZ(180deg)",":nth-of-type(1)":{animation:`${kr[0]} .5s ease-out infinite`},":nth-of-type(2)":{animation:`${kr[1]} .5s ease-out infinite`},":nth-of-type(3)":{animation:`${kr[2]} .5s ease-out infinite`}}}:null]),"label:SvgLiveIcon;"),Sr=(0,U.memo)((function({isLiveStreaming:e,isDisabled:t}){const{colors:i}=(0,_.u)(),o=t?i.TextQuaternary:e?i.Primary:i.Primary2;return(0,m.jsxs)(wr,Object.assign({isLiveStreaming:!t&&e,width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},{children:[(0,m.jsx)("rect",{x:"4.1665",y:"4.16797",width:"2.69231",height:"11.6667",rx:"0.5",fill:o},void 0),(0,m.jsx)("rect",{x:"8.65381",y:"9.02734",width:"2.69231",height:"6.80555",rx:"0.5",fill:o},void 0),(0,m.jsx)("rect",{x:"13.1406",y:"7.08594",width:"2.69231",height:"8.75",rx:"0.5",fill:o},void 0)]}),void 0)})),Cr=function({scrollRef:e}){var t,i;const o=(0,ji.Q)(),[n,a]=(0,U.useState)(!1),[s,l]=(0,U.useState)(!1),d=function(){const{liveStatus:e}=(0,ee.mp)(rn);return[1,2,3].includes(e)}(),{permissionInfo:p}=(0,ee.mp)(yo),{roomCreateInfo:g}=(0,ee.mp)(rn),h=1===Number(null===(t=null==g?void 0:g.obs_accees_recall_info)||void 0===t?void 0:t.status),_=(v=Number(null===(i=null==g?void 0:g.obs_accees_recall_info)||void 0===i?void 0:i.duration),parseInt((v/86400).toString())||1).toString();var v;const{user:y,lang:b}=(0,ee.mp)(V.G,{dependencies:[],selector:({appContext:e,lang:t})=>{var i,o,n;return{user:{uniqueId:null===(i=null==e?void 0:e.user)||void 0===i?void 0:i.uniqueId,secUid:null===(o=null==e?void 0:e.user)||void 0===o?void 0:o.secUid,uid:null===(n=null==e?void 0:e.user)||void 0===n?void 0:n.uid},lang:t}}}),f=(0,ae.fz)(Ys.yB),x=o(h?"go_live":d?"live_on_status":"go_live"),k=(0,U.useRef)(null),w=(0,U.useCallback)((()=>{var e;if(!d&&!h){const t=(0,Ui.le)(u.AH);f.handleLiveStreamEntranceClick({anchor_id:null!==(e=y.uid)&&void 0!==e?e:"",is_notified:t?0:1,is_application_needed:(null==p?void 0:p.hasLiveApplyPermission)?1:0})}h&&a(!0),(0,Ui.D$)(u.AH,JSON.stringify({name:y.uniqueId}))}),[d,f,y.uid,y.uniqueId,null==p?void 0:p.hasLiveApplyPermission,h]),S=(0,U.useCallback)((()=>{l(!0)}),[]),C=(0,U.useCallback)((()=>{l(!1)}),[]),j=`${Ks}/producer?enter_from=webapp`,P=(0,r.stringifyUrl)({url:j,query:{lang:b}}),T=(0,U.useMemo)((()=>h?(0,m.jsxs)(fr,Object.assign({onClick:w},{children:[(0,m.jsx)(Sr,{isDisabled:!0,isLiveStreaming:d},void 0),(0,m.jsx)(xr,Object.assign({isLiveStreaming:d,"data-e2e":"go-live-entrance-text",isDisabled:!0},{children:x}),void 0)]}),void 0):(0,m.jsxs)(br,Object.assign({forceSSR:!0,to:P,onClick:w},{children:[(0,m.jsx)(Sr,{isDisabled:!1,isLiveStreaming:d},void 0),(0,m.jsx)(xr,Object.assign({isLiveStreaming:d,"data-e2e":"go-live-entrance-text",isDisabled:!1},{children:x}),void 0)]}),void 0)),[h,!1,P,d,w,x]),O=(0,U.useCallback)((()=>a(!1)),[]);return(0,U.useEffect)((()=>{var e,t;n&&(t={anchor_id:null!==(e=y.uid)&&void 0!==e?e:""},c.W.event("livesdk_obs_revoke_remind",t))}),[n,y.uid]),(0,m.jsxs)(yr,Object.assign({ref:k,onMouseEnter:S,onMouseLeave:C,"data-e2e":"go-live-entrance"},{children:[T,(0,m.jsx)(vr,{active:s,text:x,scrollRef:e,containerRef:k},void 0),(0,m.jsx)(hr,{visible:n,onOkClick:O,duration:_},void 0)]}),void 0)};var jr=i(48304);const Pr=(0,be.Z)("div",{target:"efna91q0"})([{position:"relative",padding:"20px 8px 24px 8px",margin:"0","::before":{content:'""',position:"absolute",height:"1px",left:"8px",right:"8px",background:"rgba(22, 24, 35, .12)",transform:"scaleY(.5)",top:"0"}},(0,$e.f1)({max:1071,style:{display:"none"}})],"label:DivFrameContainer;"),Tr=(0,be.Z)("p",{target:"efna91q1"})((({theme:e})=>(0,$e.GI)({theme:e,typography:"P2",color:"TextTertiary"})),"label:PLoginHint;");Tr.defaultProps=Object.assign(Object.assign({},Tr.defaultProps),{"data-e2e":"nav-login-tip"});const Or=(0,be.Z)(Ut.W,{target:"efna91q2"})({marginTop:"20px",width:"100%"},"label:StyledLogin;");Or.defaultProps=Object.assign(Object.assign({},Or.defaultProps),{"data-e2e":"nav-login-button"});const Lr=function(){var e,t;const i=(0,ji.Q)(),o=(0,ee.qj)(hi.r),n=(0,ze.Lh)((()=>["abTestVersion"]),[]),a=null!==(e=(0,Fe.N8)(null==n?void 0:n.abTestVersion,"search_video"))&&void 0!==e?e:"v1",{user:s}=null!==(t=(0,ze.Lh)((()=>["user"]),[]))&&void 0!==t?t:{},r=Boolean(s),l=(0,U.useCallback)((()=>{o.openModal({query:{enter_method:"click_navigation",enter_from:c.W.commonParams.page_name,redirect_url:(0,jr.AY)(),type:"general_search"!==c.W.commonParams.page_name&&"search_video"!==c.W.commonParams.page_name&&"search_user"!==c.W.commonParams.page_name||"v3"!==a&&"v4"!==a||r?"":"loginsearchmore"}}),pa({target:"login"})}),[o,a,r]);return(0,m.jsxs)(Pr,{children:[(0,m.jsx)(Tr,{children:i("sidenav_login_cta")},void 0),(0,m.jsx)(Or,Object.assign({buttonTheme:"line",onClick:l},{children:i("Log In")}),void 0)]},void 0)};var Ir=i(65027),Ar=i(57725);function Er(e){return U.createElement("svg",(0,Ir.g)({fill:"currentColor"},e,{viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",className:e.className}),U.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M24 37.4a13.4 13.4 0 100-26.8 13.4 13.4 0 000 26.8zM40.5 24a16.5 16.5 0 11-33 0 16.5 16.5 0 0133 0z"}),U.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M27.13 27.18a2 2 0 00.93-1.32l1.84-9.33a.6.6 0 00-.9-.63l-8.14 4.92a2 2 0 00-.92 1.32l-1.84 9.33c-.1.52.45.9.9.63l8.13-4.92zm-5.04-.45l3.11-1.89.7-3.57-3.1 1.89-.7 3.57z"}))}function Mr(e){return U.createElement("svg",(0,Ir.g)({fill:"currentColor"},e,{viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",className:e.className}),U.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M24 40.5a16.5 16.5 0 100-33 16.5 16.5 0 000 33zm4.43-14.54c-.12.6-.49 1.12-1.01 1.44l-8.88 5.37a.65.65 0 01-.98-.69l2.01-10.18c.12-.6.49-1.12 1.01-1.44l8.88-5.37a.65.65 0 01.98.69l-2.01 10.18z"}),U.createElement("path",{d:"M21.92 26.89l3.4-2.05.76-3.9-3.4 2.06-.76 3.89z"}))}(0,Ar.$)(Er),(0,Ar.$)(Mr);var Rr,Fr=i(21817),Dr=i(32525),Br=i(82022),zr=i(24954),Nr=i(96251),Ur=i(31911),Wr=i(33966),$r=i(51963),qr=i(72700);function Hr(){const{canShowliveEntry:e}=function(){const e=(0,ze.Lh)((()=>["user","abTestVersion"]),[]),t=(0,Ne.h)((()=>["liveSuggestConfig","liveCommonConfig"]),[]),i=function(){var e;const{botType:t}=null!==(e=(0,ze.Lh)((()=>["botType"]),[]))&&void 0!==e?e:{};return"others"!==t}();return(0,U.useMemo)((()=>{var o,n,a;if((null===(o=null==t?void 0:t.liveCommonConfig)||void 0===o?void 0:o.regionEntry)||i)return{canShowliveEntry:!0,canLoadFeed:!0,canEnterRoom:!0};const s=null===(n=null==t?void 0:t.liveSuggestConfig)||void 0===n?void 0:n.isBlockedArea,r=null===(a=null==t?void 0:t.liveSuggestConfig)||void 0===a?void 0:a.isRiskArea,l=Boolean(null==e?void 0:e.user);return s?{canShowliveEntry:!1,canLoadFeed:!1,canEnterRoom:!1}:r&&!l?{canShowliveEntry:!0,canLoadFeed:!1,canEnterRoom:!1}:{canShowliveEntry:!0,canLoadFeed:!0,canEnterRoom:!0}}),[i,t,e])}();return e}i(88008),function(e){e.Show="livesdk_live_tab_show"}(Rr||(Rr={}));var Gr,Zr=i(64176),Vr=i(3148);!function(e){e.SwitchFeedMode="switch_feed_mode"}(Gr||(Gr={}));var Qr,Yr=i(44798),Kr=i(24864);function Jr(){return Jr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Jr.apply(this,arguments)}const Xr=function(e){return U.createElement("svg",Jr({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},e),Qr||(Qr=U.createElement("path",{fill:"#161823",fillRule:"evenodd",d:"M2.5 6.5A2.5 2.5 0 015 4h14a2.5 2.5 0 012.5 2.5v11A2.5 2.5 0 0119 20H5a2.5 2.5 0 01-2.5-2.5v-11zM13 6h6a.5.5 0 01.5.5v11a.5.5 0 01-.5.5h-6V6zm-2 0H5a.5.5 0 00-.5.5v11a.5.5 0 00.5.5h6V6z",clipRule:"evenodd"})))},el=(0,be.Z)(Kr.w,{target:"e14l9ebt0"})((({extraTop:e=0,extraWidth:t,theme:{colors:i,direction:o}})=>[{top:$e.Mz+e,bottom:"0",width:`${null!=t?t:356}px`,background:i.BGPrimary,position:"fixed",zIndex:99},(0,$e.YJ)({direction:o,paddingEnd:"8px"}),(0,$e.f1)({max:1071,style:{padding:"0 8px",width:"72px",flex:"0 0 72px",borderRight:`1px solid ${i.LineSecondary}`,boxShadow:`0px 2px 8px ${i.ShadowSecondary}`}})]),"label:StyledScroll;"),tl=(0,be.Z)("div",{target:"e14l9ebt1"})((({transStatus:e,extraWidth:t})=>{const i=e===Yr.d0||e===Yr.Ix;return[{position:"relative",width:`${null!=t?t:356}px`,flex:`0 0 ${null!=t?t:356}px`},(0,$e.f1)({max:767,style:{zIndex:99,[`${el}`]:[null,i?{transition:"all 0.3s"}:null]}}),(0,$e.f1)({max:1071,style:{width:"72px",flex:"0 0 72px"}})]}),"label:DivSideNavContainer;"),il=(0,be.Z)("div",{target:"e14l9ebt2"})((({theme:{direction:e}})=>[{flexShrink:0,padding:"20px 0 26px",boxSizing:"border-box",display:"flex",flexDirection:"column",alignItems:"stretch",minHeight:"100%"},(0,$e.YJ)({direction:e,paddingStart:"8px"}),(0,$e.f1)({max:1071,style:{padding:"12px 0 26px"}})]),"label:DivWrapper;"),ol=({theme:e})=>[{position:"relative",display:"flex",justifyContent:"flex-start",alignItems:"center",padding:"8px",boxSizing:"border-box",borderRadius:"4px",fontSize:"32px",":hover":{textDecoration:"none"},":active":{textDecoration:"none"}},(0,$e.VZ)({theme:e}),(0,$e.f1)({max:1071,style:{justifyContent:"center"}})],nl=(0,be.Z)(En.v,{target:"e14l9ebt5"})(ol,"label:StyledTmpLink;"),al=(0,be.Z)("div",{target:"e14l9ebt6"})({flex:"1 1 0px"},"label:DivPlaceholder;"),sl=({theme:e,theme:{direction:t},active:i})=>[(0,$e.GI)({theme:e,fontFamily:"Proxima",fontWeight:"bold",typography:"P1",lineHeight:"32px",color:i?"Primary":"Primary2"}),(0,$e.YJ)({direction:t,marginStart:"8px"}),(0,$e.f1)({max:1071,style:{display:"none"}})],rl=(0,be.Z)("h2",{target:"e14l9ebt7"})(sl,"label:H2MainNavText;"),ll=(0,be.Z)("span",{target:"e14l9ebt8"})(sl,"label:SpanMainNavText;"),dl=(0,be.Z)("div",{target:"e14l9ebt9"})([{marginBottom:"8px",padding:"0"},(0,$e.f1)({max:1071,style:{padding:"0"}})],"label:DivMainNavContainer;"),cl=(0,be.Z)("div",{target:"e14l9ebt10"})((({theme:{direction:e,colors:t}})=>[(0,$e.YJ)({direction:e,end:"16px"}),{position:"absolute",top:"32px",width:"24px",height:"24px",display:"flex",justifyContent:"center",alignItems:"center",zIndex:10,cursor:"pointer",":after":{content:'""',position:"absolute",display:"block",width:"1px",height:"20px",left:"rtl"===e?"unset":"-8px",right:"rtl"===e?"-8px":"unset",top:"50%",transform:"translateY(-50%)",background:t.LineSecondary}},(0,$e.f1)({max:1071,style:{display:"none",":after":{display:"none"}}})]),"label:DivSwitchFeedModeContainer;"),pl=(0,be.Z)(Xr,{target:"e14l9ebt11"})((({theme:{colors:e},isHorizontal:t})=>({width:"24px",height:"24px",transform:t?"rotateZ(90deg)":"rotateZ(0deg)",transition:"all 0.3s ease","*":{fill:e.TextPrimary}})),"label:StyledFeedToggleIcon;"),ul=(0,be.Z)("svg",{target:"e14l9ebt12"})({width:"6px",height:"6px",verticalAlign:"top"},"label:SvgRedDot;"),gl=(0,be.Z)("div",{target:"e14l9ebt13"})((({theme:e})=>[{marginInlineStart:"2px",marginTop:"3px"},(0,$e.GI)({theme:e,typography:"P1"})]),"label:DivRedDotContainer;"),ml={path:"/",Icon:Fr.Z,ActiveIcon:Dr.Z,text:"for_you",teaReport:()=>{pa({target:"trending"}),Sn.W.handleEnterTrending({enter_method:"navigation_bar"})},linkProps:{"data-e2e":"nav-foryou",disableAutoLang:!0}},hl={path:"/following",Icon:Br.Z,ActiveIcon:zr.Z,text:"Following",teaReport:()=>{pa({target:"following"}),Sn.W.handleEnterFollowing({enter_method:"navigation_bar"})},linkProps:{"data-e2e":"nav-following",disableAutoLang:!1}},_l={path:"/explore",Icon:Er,ActiveIcon:Mr,text:"pc_web_explore_main_header",teaReport:()=>{pa({target:"explore"})},linkProps:{"data-e2e":"nav-explore",disableAutoLang:!1}},vl={path:"/live",Icon:Nr.Z,ActiveIcon:Ur.Z,text:"LIVE",teaReport:()=>{pa({target:"live"}),Sn.W.handleEnterLiveDiscover({enter_method:"navigation_bar"})},linkProps:{"data-e2e":"nav-live",disableAutoLang:!1}};function yl({currentPath:e,configPath:t}){return e===t}const bl=function(e){const{text:t,path:i,onClick:o,onLoad:n,onCheckActive:a=yl,Container:s=nl,Icon:r,ActiveIcon:l,linkProps:d,teaReport:c,scrollRef:p,forceSSR:u}=e,g=(0,ji.Q)(),{pathname:h}=(0,ne.TH)(),{colors:v}=(0,_.u)(),[y,b]=(0,U.useState)(a({configPath:i,currentPath:h})),f=y?l:r,[x,k]=(0,U.useState)(!1),w=(0,U.useCallback)((e=>{c(),null==o||o(e)}),[o,c]);(0,U.useEffect)((()=>{b(a({configPath:i,currentPath:location.pathname}))}),[a,i,h]),(0,U.useEffect)((()=>{null==n||n()}),[n]);const S=(0,U.useRef)(null),C=(0,U.useCallback)((()=>{k(!0)}),[]),j=(0,U.useCallback)((()=>{k(!1)}),[]);return(0,m.jsx)("div",Object.assign({ref:S},{children:(0,m.jsxs)(s,Object.assign({to:i,onClick:w},d,{forceSSR:u,onMouseEnter:C,onMouseLeave:j},{children:[(0,m.jsx)(f,{fill:y?v.Primary:v.Primary2,width:32,height:32},void 0),(0,In.p_)()?(0,m.jsx)(ll,Object.assign({active:y},{children:g(t)}),void 0):(0,m.jsx)(rl,Object.assign({active:y},{children:g(t)}),void 0),e.topRightBadge,(0,m.jsx)(vr,{active:x,text:g(t),scrollRef:p,containerRef:S},void 0)]}),void 0)}),void 0)},fl=(0,U.memo)((function({scrollRef:e}){var t;const i=Hr(),{pathname:o}=(0,ne.TH)(),n=(0,ee.qj)(Wr.h),[{enterForyou:a},{setEnterForyou:s}]=(0,ee.b7)($r.e),{lang:r=""}=(0,ee.mp)(V.G,{selector:({appContext:e})=>{const{language:t}=null!=e?e:{};return{lang:t}},dependencies:[]}),{hasVisitedFollowing:l,redDotCount:d}=(0,ee.mp)(qr.r);(0,U.useEffect)((()=>{!(0,ve.oC)(o)&&s(!1)}),[s,o]);const p=(0,U.useCallback)((()=>a&&(0,ve.cQ)(o)||(0,ve.oC)(o)),[o,a]),{abTestVersion:g,language:h,user:_}=(0,Ee.m7)((0,ze.Lh)((()=>["abTestVersion","language","user"]),[])),v=(0,U.useCallback)((e=>{var t,i;(0,ve.oC)(o)&&(e.preventDefault(),n.resetItemList({key:"foryou"}),n.getRecommendList({key:"foryou",routeName:null!==(i=null===(t=(0,Le.Nd)(o))||void 0===t?void 0:t.name)&&void 0!==i?i:Le.a8.foryou,abTestVersion:g,language:h,user:_}))}),[n,o,g,h,_]),y="v2"===(null!==(t=(0,Fe.N8)(g,"following_red_dot"))&&void 0!==t?t:"v1")&&!l&&d>0;(0,U.useEffect)((()=>{y&&c.W.event("red_dot_show")}),[y]);const b=(0,U.useCallback)((()=>{var e;y&&(e={enter_method:"click_homepage_follow"},c.W.event("red_dot_exit",e))}),[y]),f=(0,U.useMemo)((()=>y?(0,m.jsx)(gl,{children:(0,m.jsx)(ul,{children:(0,m.jsx)("circle",{cx:3,cy:3,r:3,fill:"#FE2C55"},void 0)},void 0)},void 0):void 0),[y]);ml.path=`/${r}`;const x=Fo(o),k=(0,U.useCallback)((()=>{c.W.event("livesdk_live_tab_show")}),[]),{tooltipText:w,tooltipTheme:S,feedMode:C,showTip:j,isRealInVideoFeedRedesign:P,handleFeedToggleIconEnter:T,handleFeedToggleIconLeave:O,handleSwitchFeedMode:L}=(()=>{const[e,t]=(0,U.useState)(!1),[i,o]=(0,U.useState)(!1),{isRealInVideoFeedRedesign:n}=(0,ma.y7)(),a=(0,ji.Q)(),{feedMode:s,switchFeedMode:r}=(0,U.useContext)(ue.yb),l=(0,U.useMemo)((()=>a(e?"pc_web_column_mode_tooltip":"swiper_mode"===s?"pc_web_browser_mode_btn":"pc_web_column_mode_btn")),[s,e,a]),d=(0,U.useMemo)((()=>e?"blue":"black"),[e]),p=(0,U.useCallback)((()=>{o(!0)}),[]),g=(0,U.useCallback)((()=>{o(!1)}),[]),m=(0,U.useCallback)((i=>{(0,Ui.NS)(i);const o="swiper_mode"===s?"one_column_mode":"swiper_mode";var n;r(o),n={from_mode:"swiper_mode"===s?"swiper_mode":"one_column_mode",to_mode:"swiper_mode"===o?"swiper_mode":"one_column_mode",enter_method:"switch_button"},c.W.event("switch_feed_mode",n),e&&t(!1),ie.Z.set(u.qC,o,{secure:!0,expires:300,domain:"www.tiktok.com"})}),[s,e,r]),h=(0,U.useRef)(0),_=(0,U.useCallback)((()=>{Vr.F3.setItem("feed_mode_toggle_guide_shown",!0),setTimeout((()=>{t(!1)}),3e3)}),[]);return(0,U.useEffect)((()=>{n&&(Vr.F3.getItem("feed_mode_toggle_guide_shown")||(t(!0),h.current=window.setTimeout((()=>{_()}),3e3),window.addEventListener("swiper_mode_onboarding_showing",(()=>{t(!1),window.clearTimeout(h.current)})),window.addEventListener("swiper_mode_onboarding_dismissed",(()=>{t(!0),_()}))))}),[n,_]),{feedMode:s,tooltipText:l,tooltipTheme:d,isRealInVideoFeedRedesign:n,showTip:e||i,handleFeedToggleIconEnter:p,handleFeedToggleIconLeave:g,handleSwitchFeedMode:m}})(),{isExploreEnable:I}=(0,ma.Rj)();return(0,m.jsxs)(dl,{children:[P&&(0,m.jsx)(Zr.u,Object.assign({overlay:w,tooltipTheme:S,visible:j,placement:"bottom"},{children:(0,m.jsx)(cl,Object.assign({onClick:L,onMouseEnter:T,onMouseLeave:O},{children:(0,m.jsx)(pl,{isHorizontal:"one_column_mode"===C},void 0)}),void 0)}),void 0),(0,m.jsx)(bl,Object.assign({},ml,{scrollRef:e,onClick:v,onCheckActive:p}),void 0),(0,m.jsx)(bl,Object.assign({},hl,{onClick:b,topRightBadge:f,scrollRef:e}),void 0),I&&(0,m.jsx)(bl,Object.assign({},_l,{scrollRef:e}),void 0),i&&(0,m.jsx)(bl,Object.assign({onLoad:k,forceSSR:!x,Container:nl,scrollRef:e},vl),void 0)]},void 0)}));var xl=i(94328),kl=i(53046);let wl=class extends He.D{constructor(){super(...arguments),this.defaultState={profileUserId:null,itemOffset:0,offsetLeft:0}}setShowing(e,t){e.profileUserId=t.userId,t.itemOffset&&(e.itemOffset=t.itemOffset),t.offsetLeft&&(e.offsetLeft=t.offsetLeft)}itemEnter(e){return e.pipe((0,So.w)((({userId:e,itemOffset:t,offsetLeft:i,timeout:o})=>(0,xl.H)(o).pipe((0,kl.h)(this.getActions().setShowing({userId:e,itemOffset:t,offsetLeft:i}))))))}};(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,Object]),(0,w.__metadata)("design:returntype",void 0)],wl.prototype,"setShowing",null),(0,w.__decorate)([(0,Ge.Qm)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Ve.y]),(0,w.__metadata)("design:returntype",void 0)],wl.prototype,"itemEnter",null),wl=(0,w.__decorate)([(0,Ze.Y)("SideNavigation")],wl);const Sl=(0,U.memo)((function({lang:e,slot:t,transStatus:i,extraTop:o,extraWidth:n}){var a;const{user:s}=(0,ee.mp)(V.G,{selector:e=>{var t;return{user:null===(t=e.appContext)||void 0===t?void 0:t.user,isSideNavActive:e.sideNavActive}},dependencies:[]}),r=(0,ze.Lh)((()=>["abTestVersion","region"]),[]),l="v2"===(null!==(a=(0,Fe.N8)(null==r?void 0:r.abTestVersion,"studio_web_eh_entrance"))&&void 0!==a?a:"v1"),{pathname:d}=(0,ne.TH)(),c=to(),{permissionInfo:p}=(0,ee.mp)(yo),u=Boolean(s),g=(0,U.useRef)(null),h=(0,U.useRef)(null),[{profileUserId:_,offsetTop:v,offsetLeft:y},b]=(0,ee.b7)(wl,{selector:({profileUserId:e,itemOffset:t,offsetLeft:i})=>({profileUserId:e,offsetTop:t,offsetLeft:i}),dependencies:[]}),[f,x]=(0,U.useState)(!1),k=(0,U.useCallback)(((e,t,i)=>{var o,n;const a=document.documentElement.scrollTop||document.body.scrollTop,s=null!==(n=null===(o=h.current)||void 0===o?void 0:o.scrollTop)&&void 0!==n?n:0;let r;window.innerWidth<1072?(r=t-s+a-$e.Mz+20,x(!0)):(r=t-s+a+10,x(!1)),b.itemEnter({userId:e,itemOffset:r,timeout:1e3,offsetLeft:i})}),[b]),w=(0,U.useCallback)((()=>{b.itemEnter({userId:null,timeout:0})}),[b]),S=(0,U.useCallback)((()=>{b.itemEnter({userId:_,timeout:0})}),[b,_]),C=(0,U.useCallback)((()=>{b.itemEnter({userId:null,timeout:500})}),[b]),j=(0,U.useCallback)((()=>{_&&b.itemEnter({userId:null,timeout:0})}),[b,_]);(0,U.useEffect)((()=>{const e=Ji()((()=>{b.itemEnter({userId:null,timeout:0})}),1e3);return window.addEventListener("scroll",e),()=>{window.addEventListener("scroll",e)}}),[b]);const P=(0,ee.qj)(rn);(0,U.useEffect)((()=>{(null==s?void 0:s.uid)&&!c&&(null==p?void 0:p.showComputerLiveEntrance)&&P.getCreateRoomInfo({})}),[P,s,null==p?void 0:p.showComputerLiveEntrance,c]);const T=f,O=(0,ee.qj)(yo);return(0,U.useEffect)((()=>{(null==s?void 0:s.uid)&&O.getLivePermission()}),[O,s]),(0,U.useEffect)((()=>{_&&C()}),[C,d]),(0,m.jsxs)(tl,Object.assign({transStatus:i,extraWidth:n},{children:[(0,m.jsxs)(el,Object.assign({extraTop:o,extraWidth:n,Wrapper:il,onScroll:j,ref:h},{children:[(0,m.jsx)(fl,{scrollRef:h},void 0),(null==p?void 0:p.showComputerLiveEntrance)&&(0,m.jsx)(Cr,{scrollRef:h},void 0),!u&&(0,m.jsx)(Lr,{},void 0),t||(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(Ba,{onEnterItem:k,onLeaveItem:w},void 0),u&&(0,m.jsx)(Fa,{ref:g},void 0),l&&(0,m.jsx)(vs,{},void 0),(0,m.jsx)(cs,{},void 0),(0,m.jsx)(al,{},void 0)]},void 0),(0,m.jsx)(Qs,{lang:e},void 0)]}),void 0),_&&(0,m.jsx)(Xi.C,{followTheme:"primary",paddingTop:24,paddingStart:T?20:0,hideSignature:!0,fixedLeft:T?52:y,top:v,uniqueId:_,onMouseEnter:S,onMouseLeave:C},void 0)]}),void 0)}));var Cl=i(37535),jl=i.n(Cl),Pl=i(6718);let Tl=class{constructor(e){this.fetch=e,this.initTargetIdcRequest=()=>this.fetch.get("/passport/web/account/info/",{baseUrlType:2,query:{aid:1459}})}checkTTwid(){return(0,w.__awaiter)(this,void 0,void 0,(function*(){const e=new Pl.t({aid:u.CO,service:"www.tiktok.com",union:!1,unionHost:""});try{yield e.checkWebId()}catch(e){console.error(e)}}))}};Tl=(0,w.__decorate)([(0,so.G)(),(0,w.__metadata)("design:paramtypes",[p.r])],Tl);var Ol=i(22240),Ll=i(270);const Il=[{"@font-face":{fontFamily:"ProximaNova",src:'local("ProximaNova-Regular"),url(//lf16-tiktok-web.ttwstatic.com/obj/tiktok-web-common-sg/falcon/tiktok_fonts/Proxima-Nova-Regular.woff2) format("woff2"),url(//lf16-tiktok-web.ttwstatic.com/obj/tiktok-web-common-sg/falcon/tiktok_fonts/Proxima-Nova-Regular.woff) format("woff"),url(//lf16-tiktok-web.ttwstatic.com/obj/tiktok-web-common-sg/falcon/tiktok_fonts/Proxima-Nova-Regular.otf) format("opentype")',fontWeight:400,fontStyle:"normal",fontDisplay:"swap"}},{"@font-face":{fontFamily:"ProximaNova",src:'local("ProximaNova-Semibold"),url(//lf16-tiktok-common.ttwstatic.com/obj/tiktok-web-common-sg/mtact/static/fonts/ProximaNova-Semibold.woff2) format("woff2"),url(//lf16-tiktok-common.ttwstatic.com/obj/tiktok-web-common-sg/mtact/static/fonts/ProximaNova-Semibold.woff) format("woff"),url(//lf16-tiktok-common.ttwstatic.com/obj/tiktok-web-common-sg/mtact/static/fonts/ProximaNova-Semibold.otf) format("opentype")',fontWeight:600,fontStyle:"normal",fontDisplay:"swap"}},{"@font-face":{fontFamily:"ProximaNova",src:'local("ProximaNova-Bold"),url(//lf16-tiktok-web.ttwstatic.com/obj/tiktok-web-common-sg/falcon/tiktok_fonts/Proxima-Nova-Bold.woff) format("woff"),url(//lf16-tiktok-web.ttwstatic.com/obj/tiktok-web-common-sg/falcon/tiktok_fonts/Proxima-Nova-Bold.otf) format("opentype")',fontWeight:700,fontStyle:"normal",fontDisplay:"swap"}},{"@font-face":{fontFamily:"SofiaPro",src:'local("SofiaPro-Regular"),url(//lf16-tiktok-web.ttwstatic.com/obj/tiktok-web-common-sg/falcon/tiktok_fonts/sofiapro-regular.woff) format("woff"),url(//lf16-tiktok-web.ttwstatic.com/obj/tiktok-web-common-sg/falcon/tiktok_fonts/sofiapro-regular.otf) format("opentype")',fontWeight:400,fontStyle:"normal",fontDisplay:"swap"}},{"@font-face":{fontFamily:"SofiaPro",src:'local("SofiaPro-Medium"),url(//lf16-tiktok-web.ttwstatic.com/obj/tiktok-web-common-sg/falcon/tiktok_fonts/sofiapro-medium.woff) format("woff"),url(//lf16-tiktok-web.ttwstatic.com/obj/tiktok-web-common-sg/falcon/tiktok_fonts/sofiapro-medium.otf) format("opentype")',fontWeight:500,fontStyle:"normal",fontDisplay:"swap"}},{"@font-face":{fontFamily:"SofiaPro",src:'local("SofiaPro-Semibold"),url(//lf16-tiktok-web.ttwstatic.com/obj/tiktok-web-common-sg/falcon/tiktok_fonts/sofiapro-semibold.otf) format("opentype")',fontWeight:600,fontStyle:"normal",fontDisplay:"swap"}},{"@font-face":{fontFamily:"SofiaPro",src:'local("SofiaPro-Bold"),url(//lf16-tiktok-web.ttwstatic.com/obj/tiktok-web-common-sg/falcon/tiktok_fonts/sofiapro-bold.woff) format("woff"),url(//lf16-tiktok-web.ttwstatic.com/obj/tiktok-web-common-sg/falcon/tiktok_fonts/sofiapro-bold.otf) format("opentype")',fontWeight:700,fontStyle:"normal",fontDisplay:"swap"}}],Al=[{"*, *::before, *::after":{boxSizing:"border-box"},"body,h1,h2,h3,h4,p,figure,blockquote,dl,dd":{margin:0},'ul[role="list"], ol[role="list"]':{listStyle:"none"},"html:focus-within":{scrollBehavior:"smooth"},body:{minHeight:"100vh",textRendering:"optimizeSpeed",lineHeight:1.5},"a:not([class])":{textDecorationSkipInk:"auto"},"img, picture":{maxWidth:"100%",display:"block"},"input,button,textarea,select":{font:"inherit"},"@media (prefers-reduced-motion: reduce)":{"html:focus-within":{scrollBehavior:"auto"},"*,*::before,*::after":{animationDuration:"0.01ms !important",animationIterationCount:"1 !important",transitionDuration:"0.01ms !important",scrollBehavior:"auto !important"}},"@supports (-webkit-touch-callout: none)":{body:{minHeight:"-webkit-fill-available"}}}];var El=i(24615);const Ml=(0,be.Z)("div",{target:"eyhjz840"})({height:"100vh",display:"flex",flexDirection:"column"},"label:DivErrorBoundaryContainer;");class Rl extends U.Component{constructor(){super(...arguments),this.state={isNetOffline:!1,hasError:!1},this.handleOnlineStatusChange=()=>{this.setState({isNetOffline:!navigator.onLine})}}get iconElem(){const{hasError:e}=this.state;return e?(0,m.jsx)(fe.Z,{width:90,height:90,fill:"rgba(128, 130, 133, 1)"},void 0):(0,m.jsx)(El.Z,{width:90,height:90,fill:"rgba(128, 130, 133, 1)"},void 0)}get text(){const{hasError:e}=this.state;return e?{title:"Page not available",desc:"server_error_sub",button:"try_again_btn"}:{title:"network_error_title",desc:"network_error_sub",button:"try_again_btn"}}componentDidMount(){window.addEventListener("online",this.handleOnlineStatusChange),window.addEventListener("offline",this.handleOnlineStatusChange)}componentWillUnmount(){window.removeEventListener("online",this.handleOnlineStatusChange),window.removeEventListener("offline",this.handleOnlineStatusChange)}handleRetry(){window.location.reload()}componentDidCatch(e,t){const{onCatchError:i}=this.props;i(e,t),this.setState({hasError:!0})}render(){const{isNetOffline:e,hasError:t}=this.state,{children:i,isMobile:o}=this.props,{t:n}=this.context;if(e||t){const{title:e,desc:t,button:i}=this.text;return o?(0,m.jsx)(Ml,{children:(0,m.jsx)(xe.T,{brightness:0,isFullScreen:!0,iconElem:this.iconElem,title:n(e),desc:n(t),buttonText:n(i),onButtonClick:this.handleRetry},void 0)},void 0):(0,m.jsx)(xe.T,{isFullScreen:!0,onButtonClick:this.handleRetry,iconElem:this.iconElem,title:n(e),desc:n(t),buttonText:n(i)},void 0)}return i}}Rl.contextType=Y.LX;let Fl=class{constructor(e){this.fetch=e}reportRenderError(e){return this.fetch.get("/node-webapp/page/error",{query:{page:e}})}};function Dl({children:e,isMobile:t,delayFonts:i=!1}){const[o]=(0,ee.b7)(P.r,{selector:e=>({bizContext:e.bizContext&&jl()(e.bizContext,"statusCode"),bizInitialized:e.initialized}),dependencies:[]}),{pathname:n}=(0,ne.TH)(),a=(0,ae.fz)(Tl);(0,U.useEffect)((()=>{var e;!(null===(e=o.bizContext)||void 0===e?void 0:e.isBot)&&a.checkTTwid(),a.initTargetIdcRequest().subscribe()}),[]);const s=(0,U.useContext)(N.Il),r=(0,ae.fz)(Uo.GV);(0,Ol.L)((()=>{s&&o.bizContext&&r.setContext(s,o.bizContext)}),[r,s,o.bizContext]);const{GlobalModalProvider:l,value:d}=(0,Ll.R)(),{value:c}=(0,U.useContext)(ge.hb),p=(0,U.useMemo)((()=>(0,ge.gh)({isDark:c,isMobile:t,lang:null==s?void 0:s.language})),[c,t,null==s?void 0:s.language]),u=(b={isDark:c,lang:null==s?void 0:s.language,isMobile:t,withFonts:!i},(0,U.useMemo)((()=>function(e,t,i=!0){return[Al,{body:{fontFamily:e.fontFamilies.Proxima,fontSize:e.text.fontSize,color:e.colors.TextPrimary,backgroundColor:e.colors.BGPrimary,overscrollBehavior:"contain",direction:e.direction,a:{color:e.colors.TextPrimary,transition:"color 250ms",textDecoration:"none",cursor:"pointer"},"a:visited":{color:e.colors.TextPrimary},"a:hover":{color:e.colors.TextPrimary,textDecoration:"underline"},"a:active":{color:e.colors.TextPrimary},"a:focus":{color:e.colors.TextPrimary},input:{"::-ms-clear":{display:"none",width:0,height:0},"::-ms-reveal":{display:"none",width:0,height:0},"::-webkit-search-decoration, ::-webkit-search-cancel-button, ::-webkit-search-results-button, ::-webkit-search-results-decoration":{display:"none"}},"&.hidden":{overflow:"hidden"},WebkitFontSmoothing:"antialiased"}},...i?Il:[],{html:t?{}:{body:{overflowY:"overlay"},"*":{"::-webkit-scrollbar":{borderRadius:"0",width:"8px"},"::-webkit-scrollbar-track":{borderRadius:"0",backgroundColor:"rgba(0, 0, 0, 0)"},"::-webkit-scrollbar-thumb":{borderRadius:"4px",backgroundColor:e.colors.BGPlaceholderDefault}}}}]}((0,ge.gh)(b),b.isMobile,b.withFonts)),[b])),g=(0,ae.fz)(k.n),h=(0,ae.fz)(Fl),v=(0,U.useMemo)((()=>(0,jr.BB)(n)),[n]),y=(0,U.useCallback)(((e,t)=>{try{h.reportRenderError(v),g.captureMessage(`Page render Error: ${e.message}`,"fatal",{page:v}),console.info("Error occurs in render time:",e),console.info("Error occurs in component:",t.componentStack)}catch(e){console.error("Error occurs when reporting error:",e)}}),[h,v,g]);var b;return(0,m.jsx)(l,Object.assign({value:d},{children:(0,m.jsx)(_.a,Object.assign({theme:p},{children:(0,m.jsxs)(Rl,Object.assign({onCatchError:y,isMobile:t},{children:[(0,m.jsx)(Ha.xB,{styles:u},void 0),e]}),void 0)}),void 0)}),void 0)}Fl=(0,w.__decorate)([(0,so.G)(),(0,w.__metadata)("design:paramtypes",[p.r])],Fl);const Bl=(0,be.Z)(En.v,{target:"e1an6zpe0"})({fontSize:0},"label:StyledLinkLogo;");Bl.defaultProps=Object.assign(Object.assign({},Bl.defaultProps),{"data-e2e":"tiktok-logo"});const zl=(0,v.ZP)({resolved:{},chunkName:()=>"logo-light.svg",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>i.e(1605).then(i.bind(i,93886)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>93886}),Nl=(0,v.ZP)({resolved:{},chunkName:()=>"logo-muted-white.svg",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>i.e(1255).then(i.bind(i,41830)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>41830}),Ul=(0,v.ZP)({resolved:{},chunkName:()=>"logo-muted-black.svg",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>i.e(2798).then(i.bind(i,82757)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>82757}),Wl=function({alt:e}){return(0,m.jsx)("svg",Object.assign({height:42,width:118,alt:e},{children:(0,m.jsx)("use",{xlinkHref:"#svg-header-logo"},void 0)}),void 0)},$l=(0,U.memo)((function({isDark:e,isGrayFilter:t,onKeyDown:i=f()}){const o=(0,ji.Q)(),{pathname:n}=(0,ne.TH)(),a=(0,ee.qj)(Wr.h),{abTestVersion:s,language:r,user:l}=(0,Ee.m7)((0,ze.Lh)((()=>["abTestVersion","language","user"]),[])),d=(0,U.useCallback)((e=>{var t,i;(0,ve.oC)(n)&&(e.preventDefault(),a.resetItemList({key:"foryou"}),a.getRecommendList({key:"foryou",routeName:null!==(i=null===(t=(0,Le.Nd)(n))||void 0===t?void 0:t.name)&&void 0!==i?i:Le.a8.foryou,abTestVersion:s,language:r,user:l})),c.W.event("click_logo")}),[a,n,s,r,l]),p=o("TikTok i18n title"),u=(0,U.useMemo)((()=>e?t?(0,m.jsx)(Nl,{height:42,width:118},void 0):(0,m.jsx)(zl,{alt:p,height:42,width:118},void 0):t?(0,m.jsx)(Ul,{height:42,width:118},void 0):(0,m.jsx)(Wl,{alt:p},void 0)),[e,t,p]);return(0,m.jsxs)(Bl,Object.assign({to:Le.Ad.home,onClick:d,onKeyDown:i,style:{position:"relative"},ariaLabel:o("accessibilityLabels_forYou_nav_tiktok_btn")},{children:[u,(0,m.jsx)("strong",{children:p},void 0)]}),void 0)}));var ql=i(95764),Hl=i(72083),Gl=i(73090),Zl=i(60871),Vl=i(4825),Ql=i(50121),Yl=i(53120),Kl=i(93943);const Jl=(0,be.Z)("div",{target:"e8cpz260"})({padding:"29px 26px 48px",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",borderBottom:"1px solid #979797",transition:"all .3s cubic-bezier"},(0,$e.f1)({max:ql.gq[ql.T9.Medium]-1,style:{padding:"48px 0",flexDirection:"column",alignItems:"center"}}),"label:DivContainer;"),Xl=(0,be.Z)("div",{target:"e8cpz261"})({display:"flex",flexDirection:"column",alignItems:"center"},"label:DivWrapper;"),ed=(0,be.Z)("p",{target:"e8cpz262"})({fontSize:"24px",lineHeight:"24px",marginBottom:"16px"},(({theme:e})=>(0,$e.GI)({theme:e,fontFamily:"Sofia",fontWeight:"semiBold"})),"label:PTitle;"),td=(0,be.Z)("div",{target:"e8cpz263"})({display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"},(0,$e.f1)({max:ql.gq[ql.T9.Medium]-1,style:{flexDirection:"column"}}),"label:DivIconContainer;"),id=(0,be.Z)("a",{target:"e8cpz264"})({margin:"0 4px",width:"170px",height:"50px",display:"flex",alignItems:"center",justifyContent:"center",textDecoration:"none",":active, :hover, :link, :visited":{textDecoration:"none"}},(({withBorder:e})=>e?{border:"1px solid rgba(255, 255, 255, .5)",borderRadius:"8px"}:null),(({theme:e})=>(0,$e.GI)({theme:e,fontFamily:"Sofia",fontWeight:"bold",typography:"P1",color:"ConstTextInverse",isLink:!0})),(0,$e.f1)({max:ql.gq[ql.T9.Medium]-1,style:{marginBottom:"20px"}}),"label:AIconContainer;");var od;!function(e){e.Apple="apple",e.Amazon="amazon",e.Google="google",e.Download="download",e.Microsoft="microsoft"}(od||(od={}));const nd={amazon:{backgroundPosition:"0 0"},apple:{backgroundPosition:"0 -53px"},google:{backgroundPosition:"0 -106px"}},ad=(0,be.Z)("img",{target:"e8cpz265"})((({platform:e,lang:t})=>function(e,t){return"download"===e?{backgroundImage:"url('https://p16-ttug-sg.ibyteimg.com/img/ttfe-malisg/tiktok_web/store-badge/download.png~296x0.image')"}:"microsoft"!==e?Object.assign(Object.assign({},nd[e]),{backgroundImage:`url(https://p16-ttug-sg.ibyteimg.com/img/ttfe-malisg/tiktok_web/store-badge/${t}.png~296x0.image)`}):void 0}(e,t)),{width:"170px",height:"50px",backgroundSize:"170px",objectFit:"cover",backgroundRepeat:"no-repeat",boxSizing:"border-box",lineHeight:0},"label:ImgIcon;"),sd=(0,be.Z)("img",{target:"e8cpz266"})({marginRight:"8px",width:"20px"},"label:ImgQRCode;"),rd=(0,be.Z)("p",{target:"e8cpz267"})({marginBottom:"60px",textAlign:"center"},(({theme:e})=>(0,$e.GI)({theme:e,color:"TextPrimary",fontFamily:"Sofia",fontWeight:"bold",typography:"H3"})),"label:PQRTitle;"),ld=(0,be.Z)("div",{target:"e8cpz268"})({display:"flex",flexDirection:"column",alignItems:"center",padding:"80px 85px"},"label:DivBodyContainer;"),dd=(0,be.Z)(Kl.Z,{target:"e8cpz269"})({display:"block"},"label:StyledQrBg;"),cd=(0,be.Z)("div",{target:"e8cpz2610"})({position:"relative",width:"202px",height:"202px"},"label:DivQRCodeWrapper;"),pd=(0,be.Z)("img",{target:"e8cpz2611"})({width:"200px",position:"absolute",left:"1px",top:"1px",borderRadius:"8px",overflow:"hidden"},"label:ImgQRCodeDownload;"),ud=function(e){const t=(0,ji.Q)(),[i,o]=(0,U.useState)(!1),n=(0,ee.mp)(V.G,{selector:e=>{var t;return"t"===(null===(t=e.appContext)||void 0===t?void 0:t.appType)?Ql:Vl},dependencies:[]}),a=(0,U.useCallback)((e=>{e.preventDefault(),o(!0)}),[]),s=(0,U.useCallback)((()=>{o(!1)}),[]);return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(id,Object.assign({onClick:a,withBorder:!0,href:"#"},{children:[(0,m.jsx)(sd,{src:"https://lf16-tiktok-common.ibytedtos.com/obj/tiktok-web-common-sg/mtact/static/images/share/video/ic-qrcode.svg"},void 0),(0,m.jsx)("span",{children:"QR CODE"},void 0)]}),void 0),(0,m.jsxs)(ql.AR,Object.assign({isOpen:i,onClose:s},{children:[(0,m.jsx)(ql.EZ,{},void 0),(0,m.jsxs)(ld,{children:[(0,m.jsx)(rd,{children:t("QR CODE Text")},void 0),(0,m.jsxs)(cd,{children:[(0,m.jsx)(dd,{width:"202",height:"202"},void 0),(0,m.jsx)(pd,{src:n},void 0)]},void 0)]},void 0)]}),void 0)]},void 0)},gd=function(e){const t=(0,ji.Q)(),{language:i}=(0,Ee.m7)((0,ze.Lh)((()=>["language"]),[])),o=(0,Ee.m7)((0,Ne.h)((()=>["downloadLink","isAndroid","isIOS"]),[])),{iconLanguage:n,iconConfig:a}=(0,U.useMemo)((()=>(0,Hl.lk)(Object.assign({lang:i},o))),[i,o]),s=(0,U.useCallback)((e=>{Yl.Fx.handleClickAppStore(e)}),[]);return(0,m.jsx)(Jl,{children:(0,m.jsxs)(Xl,{children:[(0,m.jsx)(ed,{children:t("pc_reflow_download")},void 0),(0,m.jsxs)(td,{children:[(0,m.jsx)(ud,{},void 0),a.map((({alt:e,href:t,platform:i})=>(0,m.jsx)(id,Object.assign({withBorder:"microsoft"===i,href:t,target:"_blank",rel:"nofollow noopener noreferrer",onClick:s.bind(null,i)},{children:(0,m.jsx)(ad,{src:"microsoft"===i?(0,Gl.Aq)(n):Zl,platform:i,alt:e,lang:n},void 0)}),i)))]},void 0)]},void 0)},void 0)};var md,hd=i(7280),_d=i(91623),vd=i.n(_d);!function(e){e.ClickLanguage="click_change_language",e.ChangeLanguage="change_langauage"}(md||(md={}));const yd=e=>{c.W.event("click_change_language",e)};function bd(){return(0,U.useCallback)((({lang:e,url:t,currentLang:i,isMobile:o})=>{var n;n={language:i,to_language:e,enter_method:o?"top_bar":void 0},c.W.event("change_langauage",n),vd().remove(E.ci,{domain:"www.tiktok.com"}),vd().set(E.ci,e,{secure:!0,expires:300,domain:".tiktok.com"}),window.location.replace(t)}),[])}const fd=(0,be.Z)("div",{target:"e1g150f60"})({boxSizing:"border-box",position:"relative",width:"172px",height:"36px",padding:"0 16px",display:"flex",border:"1px solid #8a8b91",borderRadius:"2px",alignItems:"center",justifyContent:"space-between",cursor:"pointer"},(({theme:e})=>[(0,$e.GI)({theme:e,typography:"P2",fontFamily:"Proxima",fontWeight:"normal"}),(0,$e.YJ)({direction:e.direction,textAlign:"end"})]),"label:DivLangSelectionContainer;"),xd=(0,be.Z)("p",{target:"e1g150f61"})({display:"block",lineHeight:"36px",fontSize:"14px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},"label:PLabel;"),kd=(0,be.Z)("select",{target:"e1g150f62"})({position:"absolute",left:0,right:0,top:0,width:"100%",height:"100%",opacity:0},"label:SelectLangForm;"),wd=E.tF.map((e=>{const{label:t,value:i}=e;return(0,m.jsx)("option",Object.assign({value:i},{children:t}),i)})),Sd=function(){const e=(0,ee.mp)(V.G,{selector:e=>{var t,i;return null!==(i=null===(t=e.appContext)||void 0===t?void 0:t.language)&&void 0!==i?i:"en"},dependencies:[]}),t=(0,U.useMemo)((()=>{var t;return null===(t=E.tF.find((({value:t})=>t===e)))||void 0===t?void 0:t.label}),[e]),{pathname:i,search:o}=(0,ne.TH)(),n=bd(),a=(0,U.useCallback)((t=>{const{value:a}=t.target;let s;s=(0,ve.Hg)(i)?`/${a}`:(0,r.stringifyUrl)({url:i,query:Object.assign(Object.assign({},(0,r.parse)(o)),{lang:a})}),n({url:s,lang:a,currentLang:e,isMobile:!0})}),[e,i,n,o]),s=(0,U.useCallback)((()=>{yd({language:e})}),[e]);return(0,m.jsxs)(fd,{children:[(0,m.jsx)(xd,{children:(0,m.jsx)("span",{children:t},void 0)},void 0),(0,m.jsx)(hd.Z,{width:30,height:30,fill:"#B0B0B4"},void 0),(0,m.jsx)(kd,Object.assign({value:e,onChange:a,onClick:s},{children:wd}),void 0)]},void 0)},Cd=(0,be.Z)("div",{target:"eks331y0"})((({theme:{direction:e,colors:t}})=>[{flex:"1 1 0%",maxWidth:"226px",color:t.ConstTextInverse},(0,$e.YJ)({direction:e,paddingEnd:"8px"}),(0,$e.f1)({max:ql.gq[ql.T9.Medium]-1,style:{flex:"auto",padding:0,marginTop:"32px"}})]),"label:DivContainer;"),jd=(0,be.Z)("h4",{target:"eks331y1"})({fontSize:"14px",lineHeight:"28px",margin:0},(({theme:e})=>(0,$e.GI)({theme:e,fontFamily:"Sofia",fontWeight:"bold"})),"label:H4Title;"),Pd=(0,be.Z)("span",{target:"eks331y2"})({},"label:SpanContent;"),Td=(0,be.Z)("a",{target:"eks331y3"})({display:"block",textDecoration:"none",position:"relative",[`:hover ${Pd}`]:{paddingBottom:"2px",borderBottom:"2px solid #ccc"},fontSize:"14px",lineHeight:"28px"},(({theme:e})=>[(0,$e.GI)({theme:e,fontFamily:"Sofia",fontWeight:"medium",color:"ConstTextInverse3",isLink:!0}),{":link, :hover, :active, :visited":{textDecoration:"none",color:e.colors.ConstTextInverse3}}]),"label:ALink;"),Od=function(e){const t=(0,ee.mp)(P.r,{selector:e=>{var t;const i=null===(t=e.bizContext)||void 0===t?void 0:t.navList;return(null!=i?i:[]).map((e=>{const t=Object.assign({},e);return t.children=t.children.filter((({placements:e=[]})=>0===e.length||e.includes("footer"))),t}))},dependencies:[]});return(0,m.jsx)(m.Fragment,{children:t.map((({title:e,children:t})=>(0,m.jsx)(U.Fragment,{children:(0,m.jsxs)(Cd,{children:[(0,m.jsx)(jd,{children:e},void 0),t.map((({title:e,href:t,newWindow:i=!1})=>(0,m.jsx)(Td,Object.assign({href:t,target:i?"_blank":void 0,rel:"noreferrer"},{children:(0,m.jsx)(Pd,{children:e},void 0)}),e)))]},void 0)},e)))},void 0)},Ld=(0,be.Z)("div",{target:"e1j0kpjo0"})((({theme:{colors:e}})=>({width:"100%",color:e.ConstTextInverse,backgroundColor:e.ConstBGInverse})),(({hasPaddingBottom:e})=>[{paddingBottom:e?"24px":0},(0,$e.f1)({max:ql.gq[ql.T9.Medium]-1,style:{paddingBottom:e?"80px":0,textAlign:"center"}})]),"label:DivFooterContainer;"),Id=(0,be.Z)("footer",{target:"e1j0kpjo1"})({position:"relative",display:"flex",flexDirection:"row",alignItems:"flex-start",paddingTop:"40px"},(({theme:{direction:e}})=>(0,$e.YJ)({direction:e,paddingStart:"378px"})),(0,$e.f1)({max:ql.gq[ql.T9.Medium]-1,style:{padding:"40px 0 0",flexDirection:"column",alignItems:"center"}}),"label:FooterWrapper;"),Ad=(0,be.Z)("div",{target:"e1j0kpjo2"})({display:"block",position:"absolute",top:"43px","& > strong":{visibility:"hidden",position:"absolute",left:0,top:0}},(({theme:{direction:e}})=>[(0,$e.YJ)({direction:e,start:"144px"}),(0,$e.f1)({max:ql.gq[ql.T9.Medium]-1,style:Object.assign({position:"relative",top:0},(0,$e.YJ)({direction:e,start:"0"}))})]),"label:DivLogoWrapper;"),Ed=(0,be.Z)("div",{target:"e1j0kpjo3"})({padding:"0 144px",marginTop:"60px",display:"flex",flexDirection:"row",alignItems:"flex-end",justifyContent:"space-between"},(0,$e.f1)({max:ql.gq[ql.T9.Medium]-1,style:{padding:0,marginTop:"72px",flexDirection:"column",alignItems:"center",justifyContent:"flex-start"}}),"label:DivBottomWrapper;"),Md=(0,be.Z)("div",{target:"e1j0kpjo4"})((({theme:e})=>(0,$e.GI)({theme:e,fontFamily:"Sofia",fontWeight:"medium",typography:"P3",color:"ConstTextInverse3"})),{lineHeight:"24px"},(0,$e.f1)({max:ql.gq[ql.T9.Medium]-1,style:{marginTop:"20px"}}),"label:DivCopyright;"),Rd=(new Date).getFullYear(),Fd=function({hideContent:e,hideDownload:t,hideLanguageSelection:i}){const o=(0,ji.Q)(),{config:n}=(0,Ee.m7)((0,Ne.h)((()=>["config"]),[]));return(0,m.jsxs)(Ld,Object.assign({hasPaddingBottom:!e},{children:[!t&&!(null==n?void 0:n.shouldBlock)&&(0,m.jsx)(gd,{},void 0),(0,m.jsxs)(Id,{children:[(0,m.jsxs)(Ad,{children:[(0,m.jsx)($l,{isDark:!0,isGrayFilter:null==n?void 0:n.isGrayFilter},void 0),(0,m.jsx)("strong",{children:o("TikTok i18n title")},void 0)]},void 0),(0,m.jsx)(Od,{},void 0)]},void 0),(0,m.jsxs)(Ed,{children:[i?(0,m.jsx)("div",{},void 0):(0,m.jsx)(Sd,{},void 0),(0,m.jsxs)(Md,{children:["© ",Rd," TikTok"]},void 0)]},void 0)]}),void 0)};var Dd=i(22323);var Bd=i(48319),zd=i(84991);const Nd=(0,We.Z)("button",{target:"eh4s6m80"})((({theme:{colors:e,fontFamilies:t,fontWeights:i,typography:o,direction:n}})=>[Object.assign(Object.assign({},o.P2),{fontFamily:t.Proxima,fontWeight:i.semiBold,minWidth:"140px",height:"30px",padding:0,lineHeight:"30px",color:e.TextPrimary,background:"inherit",borderRadius:"15px",cursor:"pointer",border:`1px solid ${e.TextPrimary}`,outline:"none","&:hover":{borderColor:"transparent",background:"#909090"}}),(0,$e.YJ)({direction:n,marginStart:"30px"})]),"label:ButtonSkipNav;"),Ud=(0,U.memo)((function({visible:e,onKeyDown:t,onClick:i}){const o=(0,ji.Q)();return e?(0,m.jsx)(Nd,Object.assign({type:"button",onKeyDown:t,onClick:i},{children:(0,m.jsx)("span",{children:o("Skip Navigation")},void 0)}),void 0):null})),Wd=e=>{var t;try{if(!e)return;const i=document.querySelector(`#${e}`);if(!i)return;const o=(0,zd.s2)(i);o.length>0?null===(t=o[0])||void 0===t||t.focus():i.focus()}catch(e){}},$d=(0,be.Z)("div",{target:"e10win0d0"})((({theme:{colors:e}})=>[{display:"flex",justifyContent:"space-around",boxShadow:`0px 1px 1px ${e.ShadowPrimary}`,height:$e.Mz,width:"100%",top:0,position:"fixed",alignItems:"center",background:e.BGPrimary,zIndex:1e3}]),"label:DivHeaderContainer;"),qd=(0,be.Z)("div",{target:"e10win0d1"})({width:"100%",display:"flex",height:"100%",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},(({expand:e})=>e?{}:{maxWidth:$e.XP}),(({theme:{direction:e}})=>(0,$e.YJ)({direction:e,paddingStart:"20px",paddingEnd:"24px"})),"label:DivHeaderWrapperMain;"),Hd=(0,be.Z)(qd,{target:"e10win0d2"})([{maxWidth:"100%"},({theme:{direction:e}})=>(0,$e.YJ)({direction:e,paddingStart:"16px",paddingEnd:"24px"})],"label:StyledDivHeaderWrapperMainV2;");var Gd=i(54769),Zd=i(21555),Vd=i(63827),Qd=i(76126),Yd=i(42143),Kd=i(6056),Jd=i(55383),Xd=i(26204);const ec=(0,be.Z)("form",{target:"ev30f210"})((({theme:{colors:e}})=>({display:"flex",flexDirection:"row",alignItems:"center",padding:"12px 16px",background:e.BGInput,borderRadius:"92px",position:"relative",overflow:"hidden",zIndex:1,margin:"0"})),"label:FormElement;"),tc=(0,be.Z)("div",{target:"ev30f211"})((({theme:{colors:e}})=>({display:"none",position:"absolute",left:"0",top:"0",right:"0",bottom:"0",border:`1.5px solid ${e.LinePrimary}`,borderRadius:"92px",zIndex:-1})),"label:DivInputBorder;"),ic=(0,be.Z)("input",{target:"ev30f212"})((({theme:{colors:e,typography:t,fontFamilies:i,fontWeights:o},withIcon:n})=>Object.assign(Object.assign({fontFamily:i.Proxima,fontWeight:o.normal},t.P2),{border:"none",background:"transparent",outline:"none",padding:"0",width:n?"252px":"292px",color:e.TextPrimary,caretColor:e.Primary,appearance:"textfield",[`:focus ~ ${tc}`]:{display:"block"}})),"label:InputElement;");ic.defaultProps=Object.assign(Object.assign({},ic.defaultProps),{"data-e2e":"search-user-input"});const oc=(0,be.Z)("div",{target:"ev30f213"})({fontSize:0},"label:DivIconWrapper;"),nc=(0,be.Z)(Xd.Z,{target:"ev30f214"})({animation:"loading-circle-anim linear 1s infinite","@keyframes loading-circle-anim":{"0%":{transform:"rotate(0)"},"100%":{transform:"rotate(360deg)"}}},"label:StyledLoadingCircle;"),ac=(0,be.Z)("span",{target:"ev30f215"})((({theme:{colors:e}})=>({width:"1px",height:"28px",margin:"-3px 0",background:e.LineSecondary})),"label:SpanSpliter;"),sc=(0,be.Z)("button",{target:"ev30f216"})((({theme:{colors:e,direction:t}})=>[{padding:"11px 16px 11px 12px",margin:"-12px -16px",fontSize:"0",cursor:"pointer",outline:"none",border:"none",background:"transparent",":hover":{background:e.BGView},":active":{background:e.BGInput2}},(0,$e.YJ)({direction:t,marginStart:"0"})]),"label:ButtonSearch;");sc.defaultProps=Object.assign(Object.assign({},sc.defaultProps),{"data-e2e":"search-button"});const rc=(0,be.Z)("div",{target:"ev30f217"})((({focused:e})=>({outline:e?"2px solid #5E9ED6":"none"})),"label:DivSearchIconContainer;"),lc=(0,U.memo)((function({initialValue:e,onEnter:t,onTab:i}){var o,n;const[{searchValue:a,loading:s,activeIndex:r,inputFocus:l,sugList:d},{handleInputFocusChange:c,setSearchValue:p,setActiveUp:u,setActiveDown:g,setActiveIndex:h}]=(0,ee.b7)(Zd.B,{dependencies:[],selector:e=>({searchValue:e.searchValue,loading:e.loading,activeIndex:e.activeIndex,inputFocus:e.inputFocus,sugList:e.sugList})}),{user:v}=null!==(o=(0,ze.Lh)((()=>["user"]),[]))&&void 0!==o?o:{},{searchVideoForLoggedin:y}=null!==(n=(0,Ne.h)((()=>["searchVideoForLoggedin"]),[]))&&void 0!==n?n:{},b=Boolean(v),f=(0,U.useRef)(null),{pathname:x}=(0,ne.TH)(),k=Boolean((0,ne.LX)(x,{path:Le.Ad.searchHome})),w=(0,ji.Q)()(b||!y?"search_bar_login":"search_users"),{colors:S}=(0,_.u)(),C=(0,U.useMemo)((()=>({fill:S.TextQuaternary,width:16,height:16,style:{margin:"0 12px"}})),[S]),j=(0,U.useMemo)((()=>!s&&Boolean(a)&&d.length>0&&l),[l,s,a,d.length]);(0,U.useEffect)((()=>{p(e)}),[e,p]);const P=(0,U.useCallback)((e=>{const t=e.target.value;(e=>!e.startsWith(" "))(t)&&p(t)}),[p]),T=(0,Jd.J)({upHandler:u,downHandler:g,confirmHandler:t,tabHandler:i}),O=(0,U.useCallback)((()=>{c(!0)}),[c]),L=(0,U.useCallback)((()=>{c(!1),h(-1)}),[c,h]),I=(0,U.useCallback)((()=>{var e;p(""),null===(e=f.current)||void 0===e||e.focus()}),[p]);(0,U.useEffect)((()=>{k||p("")}),[k,p]);const A=(0,U.useCallback)((()=>s?(0,m.jsx)(oc,{children:(0,m.jsx)(nc,Object.assign({},C),void 0)},void 0):a?(0,m.jsx)(oc,Object.assign({onClick:I,"data-e2e":"reset-search-form"},{children:(0,m.jsx)(Kd.Z,Object.assign({},C),void 0)}),void 0):null),[s,a,C,I]);return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(ic,{ref:f,withIcon:Boolean(a)||s,value:a,onChange:P,onKeyDown:T,onFocus:O,onBlur:L,placeholder:w,name:"q",type:"search",autoComplete:"off",role:"combobox","aria-controls":j?"header-sug-results":"","aria-label":w,"aria-expanded":j,"aria-autocomplete":"list","aria-activedescendant":r>-1&&Boolean(a)?`sug-list-item-${r}`:void 0},void 0),A()]},void 0)})),dc=(0,U.memo)((function({initialValue:e,onSubmit:t,onKeyDown:i}){const[{searchValue:o,activeIndex:n},a]=(0,ee.b7)(Zd.B,{dependencies:[],selector:e=>({searchValue:e.searchValue,activeIndex:e.activeIndex})}),{search:s}=(0,ne.TH)(),{q:l}=(0,r.parse)(s),d=(0,ji.Q)(),{colors:c}=(0,_.u)(),{pathname:p}=(0,ne.TH)(),u=(0,U.useRef)(!1),g=(0,U.useCallback)((()=>{u.current=!0}),[]),h=(0,U.useCallback)((e=>{e.preventDefault(),a.setInputFocus(!1),null==t||t(u.current),u.current=!1}),[a,t]),v=(0,U.useCallback)((e=>{e.shiftKey&&(null==i||i(e)),n<0||(a.setInputFocus(!1),null==t||t(!0))}),[a,t,n,i]),y=Boolean((0,ne.LX)(p,{path:Le.Ad.searchHome})),[b,f]=(0,U.useState)(!1),[x,k]=(0,U.useState)(!1),w=(0,U.useCallback)((e=>()=>{e&&x||f(e)}),[x]),S=(0,U.useCallback)((()=>{k(!0),f(!1)}),[]),C=(0,U.useCallback)((()=>{k(!1)}),[]),j=(0,U.useCallback)((e=>{13!==e.keyCode&&32!==e.keyCode||(e.preventDefault(),e.stopPropagation(),a.setInputFocus(!1),null==t||t(!0),u.current=!1)}),[a,t]);return(0,m.jsxs)(ec,Object.assign({className:"search-input",action:"/search",onSubmit:h},{children:[y&&(0,m.jsx)("h1",Object.assign({style:{display:"none",alignItems:"center"}},{children:l}),void 0),(0,m.jsx)(lc,{initialValue:e,onEnter:g,onTab:v},void 0),(0,m.jsx)(ac,{},void 0),(0,m.jsx)(sc,Object.assign({type:"submit",onFocus:w(!0),onBlur:w(!1),onMouseDown:S,onMouseUp:C,onKeyDown:j,"aria-label":d("accessibilityLabels_search_button")},{children:(0,m.jsx)(rc,Object.assign({focused:b},{children:(0,m.jsx)(Qa.Z,{fill:o?c.TextSecondary:c.TextQuaternary,width:24,height:24},void 0)}),void 0)}),void 0),(0,m.jsx)(tc,{},void 0)]}),void 0)})),cc=(0,be.Z)("div",{target:"eagc08l0"})({position:"relative"},"label:DivSearchFormContainer;"),pc=e=>{const[{activeIndex:t},i]=(0,ee.b7)(Zd.B),o=t===e,n=(0,U.useCallback)((()=>{o||i.setActiveIndex(e)}),[o,i,e]);return{active:o,handleMouseEnter:n}};var uc=i(75311);const gc=(0,be.Z)("ul",{target:"e1yapk9z0"})((({theme:{colors:e,isDark:t}})=>({position:"absolute",width:"100%",marginTop:"8px",background:e.BGSecondary,boxShadow:t?"":`0 2px 12px ${e.ShadowPrimary}`,borderRadius:"8px",paddingTop:"8px",boxSizing:"border-box",maxHeight:`min(calc(100vh - 96px - ${$e.Mz}px), 734px)`,overflowY:"auto",overflowX:"hidden",listStyleType:"none",paddingInlineStart:0})),"label:UlContainer;");gc.defaultProps=Object.assign(Object.assign({},gc.defaultProps),{"data-e2e":"sug-container"});const mc=(0,be.Z)("li",{target:"e1yapk9z1"})((({paddingVertical:e,active:t,theme:{colors:i}})=>({padding:`${e}px 16px`,cursor:"pointer",background:t?i.BGView:void 0,display:"flex",alignItems:"center"})),"label:LiItemContainer;"),hc=(0,be.Z)("h4",{target:"e1yapk9z2"})((({theme:{typography:e,fontWeights:t}})=>Object.assign(Object.assign({},e.P2),{fontWeight:t.semiBold,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"})),"label:H4ItemTitle;"),_c=(0,be.Z)("p",{target:"e1yapk9z3"})((({theme:{typography:e,fontWeights:t,colors:i}})=>Object.assign(Object.assign({},e.P3),{color:i.TextTertiary,fontWeight:t.normal,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"})),"label:PItemDesc;"),vc=(0,be.Z)("p",{target:"e1yapk9z4"})((({theme:{fontFamilies:e,fontWeights:t,typography:i,colors:o}})=>Object.assign(Object.assign({fontFamily:e.Proxima,fontWeight:t.semiBold},i.P2),{color:o.TextPrimary,whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"})),"label:PMoreText;"),yc=(0,be.Z)("div",{target:"e1yapk9z5"})((({theme:{direction:e}})=>Object.assign({height:"20px",flex:"0 0 20px",borderRadius:"50%",display:"flex",justifyContent:"center",alignItems:"center",fontSize:"15px"},(0,$e.YJ)({direction:e,marginEnd:"8px"}))),"label:DivSearchIconContainer;"),bc=(0,be.Z)(uc.q,{target:"e1yapk9z6"})((({theme:{direction:e}})=>Object.assign({},(0,$e.YJ)({direction:e,marginEnd:"12px"}))),"label:StyledAvatar;"),fc=(0,be.Z)("div",{target:"e1yapk9z7"})({flex:"0 1 auto",minWidth:0},"label:DivSugItemContent;"),xc=(0,be.Z)("div",{target:"e1yapk9z8"})((({theme:{fontWeights:e,typography:t,colors:i}})=>Object.assign(Object.assign({height:"30px",padding:"5px 12px"},t.P3),{fontWeight:e.semiBold,color:i.TextTertiary})),"label:DivSugAccountTitle;"),kc=(0,U.memo)((function(e){const{item:t,index:i,onSelect:o}=e,{active:n,handleMouseEnter:a}=pc(i),{content:s,extra_info:r}=t,{nickname:l,unique_id:d,is_verified:c,rich_sug_avatar_uri:p}=r,u=Boolean(d),g=(0,U.useCallback)((()=>{null==o||o(t,i)}),[i,t,o]),h=u?"user-sug-item":"content-sug-item";return(0,m.jsxs)(mc,Object.assign({id:`sug-list-item-${i}`,"data-e2e":h,paddingVertical:9,active:n,onMouseDown:g,onMouseMove:a,role:"option"},{children:[u?(0,m.jsx)(bc,{"data-e2e":"sug-user-avatar",src:p,size:40},void 0):(0,m.jsx)(yc,{children:(0,m.jsx)(Qa.Z,{},void 0)},void 0),(0,m.jsx)(fc,{children:u?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(hc,Object.assign({"data-e2e":"sug-username"},{children:[d," ",c&&(0,m.jsx)(ha.Q,{"data-e2e":"sug-bluev",width:14,height:14},"badge")]}),void 0),(0,m.jsx)(_c,Object.assign({"data-e2e":"sug-nickname"},{children:l}),void 0)]},void 0):(0,m.jsx)(hc,{children:s},void 0)},void 0)]}),void 0)})),wc=(0,U.memo)((function({index:e,onClick:t}){const i=(0,ee.mp)(Zd.B,{dependencies:[],selector:e=>e.searchValue}),{active:o,handleMouseEnter:n}=pc(e),a=(0,ji.Q)()("view_all_results",{keyword:i}),s=(0,U.useCallback)((()=>{null==t||t("click_view_all")}),[t]);return(0,m.jsx)(mc,Object.assign({id:`sug-list-item-${e}`,"data-e2e":"sug-more",paddingVertical:15,active:o,onMouseMove:n,onMouseDown:s,role:"option"},{children:(0,m.jsx)(vc,{children:a},void 0)}),void 0)})),Sc=(0,U.memo)((function(e){const t=(0,ji.Q)(),[i,o]=(0,ee.b7)(Zd.B,{selector:e=>e.sugList,dependencies:[]}),n=(0,U.useCallback)((()=>{o.setActiveIndex(-1)}),[o]),[a,s]=(0,U.useMemo)((()=>i.reduce((([e,t],i)=>(i.extra_info.sug_user_id?e.push(i):t.push(i),[e,t])),[[],[]])),[i]),r=(t,i=0)=>t.map(((t,o)=>(0,m.jsx)(kc,{item:t,index:o+i,onSelect:e.onSelect},t.content)));return(0,m.jsxs)(gc,Object.assign({id:"header-sug-results",onMouseLeave:n,role:"listbox","aria-label":t("accessibilityLabels_search_suggestions")},{children:[r(s),0===a.length?null:(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(xc,Object.assign({"data-e2e":"sug-account"},{children:t("search_account")}),void 0),r(a,s.length)]},void 0),(0,m.jsx)(wc,{index:i.length,onClick:e.onSelectMore},void 0)]}),void 0)})),Cc={[Le.Ad.searchHome]:"general",[Le.Ad.searchUser]:"user",[Le.Ad.searchVideo]:"video"},jc=Le.Ad.searchReminder,Pc=(0,U.memo)((function({onKeyDown:e}){const{search:t,pathname:i}=(0,ne.TH)(),{q:o}=(0,r.parse)(t),n=(0,Gd.if)(Cc[i]),[{searchValue:a,loading:s,sugList:l,inputFocus:c,activeIndex:p},u]=(0,ee.b7)(Zd.B,{dependencies:[],selector:e=>({searchValue:e.searchValue,loading:e.loading,sugList:e.sugList,inputFocus:e.inputFocus,activeIndex:e.activeIndex})}),{lang:g,user:h}=(0,ee.mp)(V.G,{selector:e=>{var t;return{lang:e.lang,user:null===(t=e.appContext)||void 0===t?void 0:t.user}},dependencies:[]}),{searchVideoForLoggedin:_}=(0,ee.mp)(P.r,{selector:e=>{var t,i;return{searchVideoForLoggedin:null!==(i=null===(t=e.bizContext)||void 0===t?void 0:t.searchVideoForLoggedin)&&void 0!==i?i:[]}},dependencies:[]}),[{currentKeyword:v},y]=(0,ee.b7)(Vd.t8,{selector:e=>{var t,o;return{currentKeyword:null!==(o=null===(t=e[Cc[i]])||void 0===t?void 0:t.keyword)&&void 0!==o?o:""}},dependencies:[i]}),b=Boolean(h),f=(0,U.useRef)([]),x=(0,ne.k6)(),k=(0,ne.TH)(),w=(0,U.useCallback)((()=>{u.getSugList({app_language:(0,d.s)(g),history_list:encodeURIComponent(JSON.stringify(f.current)),keyword:a})}),[u,g,a]),S=!Boolean((0,ne.LX)(i,{path:jc}))&&Boolean((0,ne.LX)(i,{path:Le.Ad.searchHome}));(0,U.useEffect)((()=>{S&&o&&u.setSearchValue(String(o))}),[o,S]),(0,U.useEffect)((()=>{w()}),[w]);const C=(0,U.useCallback)(((e,t)=>{u.setInputFocus(!1);const i=Date.now();let o=S?k.pathname:Le.zp.searchHome();if(S&&e===v)return void n(!0,!0);!b&&_&&(o=Le.zp.searchUser());const a=(0,Qd.C)({location:k,to:{pathname:o,search:{q:e,t:i}}});x.push(a,Object.assign({searchSource:"normal_search"},t))}),[S,k,b,n,x,u,_,v]),j=(0,U.useCallback)(((e,t)=>{const{extra_info:{unique_id:o,sug_user_id:n},word_record:{words_content:s,group_id:l},content:d,impr_id:c}=e;f.current.push(d);const p=Boolean(n);Yd.xq.handleSugClick({impr_id:c,words_source:"sug",words_position:t,words_content:s,raw_query:a,sug_type:p?"enrich_sug":"normal_sug",query_id:"",group_id:l}),p?(Sn.W.handleEnterUser({enter_from:"search_sug",search_keyword:a,to_user_id:n,search_id:c,impr_id:c,rank:t,search_type:Cc[i]}),window.location.href=(0,r.stringifyUrl)({url:(0,Cn.yl)({uniqueId:o}),query:{lang:g}})):C(d,{enterMethod:"click_icon"})}),[g,a,C,i]),T=(0,U.useCallback)((e=>{y.resetSearchResult(),C(a,{enterMethod:e})}),[C,y,a]),O=(0,U.useCallback)((e=>{a&&(e&&l[p]?j(l[p],p):T(e?"click_enter":"click_icon"))}),[p,T,j,a,l]);return(0,m.jsxs)(cc,{children:[(0,m.jsx)(dc,{initialValue:"",onSubmit:O,onKeyDown:e},void 0),!s&&Boolean(a)&&l.length>0&&c?(0,m.jsx)(Sc,{onSelect:j,onSelectMore:T},void 0):null]},void 0)}));var Tc=i(90012),Oc=i(78658);let Lc=class{constructor(e){this.fetch=e}getReportNotices(e){return this.fetch.get("/aweme/v1/report/inbox/notice",{query:e,baseUrlType:2})}getReportList(e){return this.fetch.get("/node/report/inbox/list",{query:e,baseUrlType:2})}getReportDetail(e){return this.fetch.get("/node/report/inbox/detail",{query:e,baseUrlType:2})}};Lc=(0,w.__decorate)([(0,so.G)(),(0,w.__metadata)("design:paramtypes",[p.r])],Lc);let Ic=class{constructor(e){this.fetch=e}getNoticeCount(){return this.fetch.get("/api/notice/count/",{query:{source:7},baseUrlType:2})}};Ic=(0,w.__decorate)([(0,so.G)(),(0,w.__metadata)("design:paramtypes",[p.r])],Ic);let Ac=class extends He.D{constructor(e,t,i,o){super(),this.service=e,this.reportInboxService=t,this.bizContext=i,this.followingRedDotModule=o,this.defaultState={noticeCount:[],reportInbox:{noticeList:[],count:0},isFooterRequest:!1}}setNoticeCount(e,t){e.noticeCount=t}setIsFooterRequest(e,t){e.isFooterRequest=t}setReportInboxNoticeList(e,t){e.reportInbox.noticeList=t}setReportInboxNoticeCount(e,t){e.reportInbox.count=t}fetchNoticeCount(e){return e.pipe((0,io.z)((()=>this.service.getNoticeCount().pipe((0,Co.b)((e=>{(0,Oo.k)(e.status_code,[0])})),(0,io.z)((e=>{var t;if(0===e.status_code){let i=0;const o=(null!==(t=e.notice_count)&&void 0!==t?t:[]).filter((e=>(5===e.group&&e.count>0&&(i=e.count),[500,2,7,3,6].indexOf(e.group)>=0&&500!==e.group)));return(0,oo.of)(this.getActions().setNoticeCount(o),this.getActions().setIsFooterRequest(!0),this.followingRedDotModule.getActions().setRedDotCount(i))}return(0,oo.of)(this.noop())})),(0,Ke.n)({})))))}fetchReportInbox(e){return e.pipe((0,To.M)(this.bizContext.state$),(0,Ye.z)((([{region:e="",language:t=""},{bizContext:i}])=>this.reportInboxService.getReportNotices({request_tag_from:(null==i?void 0:i.isMobile)?"h5":"pc",carrier_region:e,sys_region:e,current_region:e,locale:t}).pipe((0,io.z)((({notice_lists:e})=>{var t;if(!e)return[this.noop()];const{notice_list:i}=e[0];if(!i)return[this.noop()];const o=!1===(null===(t=i[0])||void 0===t?void 0:t.has_read)?1:0;return[this.getActions().setReportInboxNoticeList(i),this.getActions().setReportInboxNoticeCount(o)]})),(0,Ke.n)({})))))}};(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,Array]),(0,w.__metadata)("design:returntype",void 0)],Ac.prototype,"setNoticeCount",null),(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,Boolean]),(0,w.__metadata)("design:returntype",void 0)],Ac.prototype,"setIsFooterRequest",null),(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,Array]),(0,w.__metadata)("design:returntype",void 0)],Ac.prototype,"setReportInboxNoticeList",null),(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,Number]),(0,w.__metadata)("design:returntype",void 0)],Ac.prototype,"setReportInboxNoticeCount",null),(0,w.__decorate)([(0,Ge.Qm)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Ve.y]),(0,w.__metadata)("design:returntype",void 0)],Ac.prototype,"fetchNoticeCount",null),(0,w.__decorate)([(0,Ge.Qm)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Ve.y]),(0,w.__metadata)("design:returntype",void 0)],Ac.prototype,"fetchReportInbox",null),Ac=(0,w.__decorate)([(0,Ze.Y)("InboxTooltip"),(0,w.__metadata)("design:paramtypes",[Ic,Lc,P.r,qr.r])],Ac);const Ec=/^\(\d+\+?\)/;var Mc=i(29769),Rc=i(16763);const Fc=(0,We.Z)("div",{target:"e1nx07zo0"})((({theme:{direction:e},removeMarginLeft:t})=>(0,$e.YJ)({direction:e,marginStart:t?"0px":"16px"})),{cursor:"pointer",height:"32px",padding:"3px 3px 0",position:"relative"},"label:DivMessageIconContainer;");Fc.defaultProps=Object.assign(Object.assign({},Fc.defaultProps),{"data-e2e":"top-dm-icon"});const Dc=({theme:{direction:e}})=>({display:"block",width:"26px",height:"26px",transform:"rtl"===e?"rotateY(180deg)":"none"}),Bc=(0,We.Z)(Mc.Z,{target:"e1nx07zo1"})(Dc,"label:StyledIcon;"),zc=(0,We.Z)(Rc.Z,{target:"e1nx07zo2"})(Dc,"label:StyledActiveIcon;"),Nc=(0,We.Z)("sup",{target:"e1nx07zo3"})((({theme:e,long:t})=>[(0,$e.GI)({theme:e,fontFamily:"Proxima",typography:"P3",color:"ConstTextInverse",fontWeight:"semiBold"}),(0,$e.YJ)({direction:e.direction,start:"16px"}),{position:"absolute",top:"-7px",minWidth:"20px",borderRadius:"10px",height:"20px",background:e.colors.Primary,textAlign:"center",padding:t?"0 6px":"0"}]),"label:SupMsgBadge;"),Uc=function({removeMarginLeft:e}){const{pathname:t}=(0,ne.TH)(),i=t.startsWith("/message")?zc:Bc,o=(0,ji.Q)(),n=(0,ee.mp)(V.G,{dependencies:[],selector:e=>e.lang}),a=(0,ee.mp)(Oc.O,{dependencies:[],selector:e=>e.messageCount});!function(){const e=(0,M.N)(),{user:t,encryptedWebid:i,lang:o,appType:n,abTestVersion:a,env:s,wid:r,$apiUrl:l,$wsUrl:d}=(0,ee.mp)(V.G,{dependencies:[],selector:t=>{var i,o,n,a,s,r;return{user:null===(i=t.appContext)||void 0===i?void 0:i.user,wid:null===(o=t.appContext)||void 0===o?void 0:o.wid,encryptedWebid:null===(n=t.appContext)||void 0===n?void 0:n.encryptedWebid,appType:null===(a=t.appContext)||void 0===a?void 0:a.appType,lang:t.lang,env:null===(s=t.appContext)||void 0===s?void 0:s.env,$apiUrl:e.imApi,$wsUrl:e.imFrontier,abTestVersion:null===(r=t.appContext)||void 0===r?void 0:r.abTestVersion}}}),c=(0,ee.qj)(Oc.O),p=(0,ae.fz)(Uo.GV);(0,U.useEffect)((()=>{p.getRiskParams(0).then((e=>{var n;Object.keys(e).forEach((t=>{void 0!==e[t]?e[t]=String(e[t]):e[t]=""})),e.referer||(e.referer=window.location.href);const s={appId:1459,userId:null!==(n=null==t?void 0:t.uid)&&void 0!==n?n:"",secUid:null==t?void 0:t.secUid,deviceId:null!=r?r:"",appKey:"e1bd35ec9db7b8d846de66ed140b1ad9",fpId:9,method:1,apiUrl:l,frontierUrl:d,headers:Object.assign(Object.assign({},e),{from_appID:"1988",app_language:o,app_name:"tiktok_web",channel:"web",user_agent:navigator.userAgent}),extended:{device_id:void 0,ttwid:window.decodeURIComponent(null!=i?i:"")},timeout:5e3,disableInitPull:!0,eventListner(e){c.handleImEvent(Object.assign(Object.assign({},e),{abTestVersion:a}))}};Object.assign(s,{debug:!1,service:5,withCredentials:!0}),c.initSDK(s)}))}),[n,null==s?void 0:s.name,null==t?void 0:t.secUid,null==t?void 0:t.uid,r,i,c,o,p,l,d,a])}(),function(){const e=(0,ee.mp)(Oc.O,{dependencies:[],selector:e=>e.messageCount}),t=(0,ee.mp)(Ac,{dependencies:[],selector:e=>e.noticeCount.reduce(((e,{count:t})=>e+t),0)}),i=(0,U.useMemo)((()=>e+t),[e,t]);(0,U.useEffect)((()=>{if(i>0){const e=(0,Ee.a1)(i);Ec.test(document.title)?document.title=document.title.replace(Ec,`(${e})`):document.title=`(${e})${document.title}`}else document.title=document.title.replace(Ec,"")}),[i])}();const s=(0,U.useCallback)((()=>{Tc.R.handleEnterChatList(a)}),[a]),r=(0,Ee.a1)(a),l=(0,Gi.qO)(n);return(0,m.jsx)(Zr.u,Object.assign({overlay:o("webdm_message_button"),placement:"bottom"},{children:(0,m.jsxs)(Fc,Object.assign({removeMarginLeft:e},{children:[(0,m.jsx)(En.v,Object.assign({forceSSR:!1,to:l,onClick:s,ariaLabel:o("accessibilityLabels_forYou_nav_messages_btn")},{children:(0,m.jsx)("span",{children:(0,m.jsx)(i,{},void 0)},void 0)}),void 0),a>0&&(0,m.jsx)(Nc,Object.assign({long:a>10},{children:r}),void 0)]}),void 0)}),void 0)};var Wc,$c,qc,Hc,Gc,Zc=i(80416);function Vc(){return Vc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Vc.apply(this,arguments)}const Qc=function(e){return U.createElement("svg",Vc({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 22 22",width:"1em",height:"1em"},e),Wc||(Wc=U.createElement("path",{fill:"black",d:"M0 22V11C0 4.925 4.925 0 11 0s11 4.925 11 11v11H0zm19.25-2.75V11A8.25 8.25 0 007.055 3.753a8.243 8.243 0 018.09 3.632A5.479 5.479 0 0116.5 11v8.25h2.75zM7.946 6.425a5.5 5.5 0 00-5.196 5.492v7.333H5.5V11c0-1.908.971-3.589 2.446-4.575zm5.008 2.64A2.75 2.75 0 008.25 11v8.25h5.5v-7.333c0-1.044-.291-2.02-.796-2.852z"})),$c||($c=U.createElement("path",{fill:"url(#eh-header-logo_svg__paint0_linear_1104_31608)",d:"M0 22V11C0 4.925 4.925 0 11 0s11 4.925 11 11v11H0zm19.25-2.75V11A8.25 8.25 0 007.055 3.753a8.243 8.243 0 018.09 3.632A5.479 5.479 0 0116.5 11v8.25h2.75zM7.946 6.425a5.5 5.5 0 00-5.196 5.492v7.333H5.5V11c0-1.908.971-3.589 2.446-4.575zm5.008 2.64A2.75 2.75 0 008.25 11v8.25h5.5v-7.333c0-1.044-.291-2.02-.796-2.852z"})),qc||(qc=U.createElement("path",{fill:"url(#eh-header-logo_svg__paint1_radial_1104_31608)",fillOpacity:.6,d:"M0 22V11C0 4.925 4.925 0 11 0s11 4.925 11 11v11H0zm19.25-2.75V11A8.25 8.25 0 007.055 3.753a8.243 8.243 0 018.09 3.632A5.479 5.479 0 0116.5 11v8.25h2.75zM7.946 6.425a5.5 5.5 0 00-5.196 5.492v7.333H5.5V11c0-1.908.971-3.589 2.446-4.575zm5.008 2.64A2.75 2.75 0 008.25 11v8.25h5.5v-7.333c0-1.044-.291-2.02-.796-2.852z"})),Hc||(Hc=U.createElement("path",{fill:"url(#eh-header-logo_svg__paint2_radial_1104_31608)",fillOpacity:.6,d:"M0 22V11C0 4.925 4.925 0 11 0s11 4.925 11 11v11H0zm19.25-2.75V11A8.25 8.25 0 007.055 3.753a8.243 8.243 0 018.09 3.632A5.479 5.479 0 0116.5 11v8.25h2.75zM7.946 6.425a5.5 5.5 0 00-5.196 5.492v7.333H5.5V11c0-1.908.971-3.589 2.446-4.575zm5.008 2.64A2.75 2.75 0 008.25 11v8.25h5.5v-7.333c0-1.044-.291-2.02-.796-2.852z"})),Gc||(Gc=U.createElement("defs",null,U.createElement("radialGradient",{id:"eh-header-logo_svg__paint1_radial_1104_31608",cx:0,cy:0,r:1,gradientTransform:"rotate(137.121 8.563 5.382) scale(19.105)",gradientUnits:"userSpaceOnUse"},U.createElement("stop",{stopColor:"#FF00E5"}),U.createElement("stop",{offset:1,stopColor:"#FF00E5",stopOpacity:0})),U.createElement("radialGradient",{id:"eh-header-logo_svg__paint2_radial_1104_31608",cx:0,cy:0,r:1,gradientTransform:"rotate(-40.03 25.148 1.387) scale(16.3248)",gradientUnits:"userSpaceOnUse"},U.createElement("stop",{stopColor:"#00FFFF"}),U.createElement("stop",{offset:1,stopColor:"#000AFF",stopOpacity:0})),U.createElement("linearGradient",{id:"eh-header-logo_svg__paint0_linear_1104_31608",x1:0,x2:22,y1:0,y2:22,gradientUnits:"userSpaceOnUse"},U.createElement("stop",{stopColor:"#FF698D",stopOpacity:.806}),U.createElement("stop",{offset:.318,stopColor:"#926BFF"}),U.createElement("stop",{offset:.538,stopColor:"#294FFF",stopOpacity:.85}),U.createElement("stop",{offset:.807,stopColor:"#0075FF"}),U.createElement("stop",{offset:1,stopColor:"#00D1FF"})))))},Yc="header-more-menu-icon",Kc="header-setting-popup-list",Jc="language-selection-menu-header";let Xc=class{constructor(e){this.fetch=e}postScheduleRecord(e){return this.fetch.post("/api/v1/post_schedule/ack/",{query:Object.assign(Object.assign({},e),{tt_csrf_token:this.fetch.csrfToken})})}updateRedDot(e){return this.fetch.post("/api/reddot/report",{query:Object.assign({},e)})}};Xc=(0,w.__decorate)([(0,so.G)(),(0,w.__metadata)("design:paramtypes",[p.r])],Xc);const ep="upload-long-video",tp="series-tip";var ip,op;!function(e){e[e.None=0]="None",e[e.Upload=1]="Upload",e[e.Inbox=2]="Inbox",e[e.EditProfile=3]="EditProfile",e[e.LiveCreatorTooltip=4]="LiveCreatorTooltip",e[e.DarkMode=5]="DarkMode",e[e.Series=6]="Series"}(ip||(ip={})),function(e){e[e.Schedule=0]="Schedule",e[e.LongVideo=1]="LongVideo"}(op||(op={}));let np=class extends He.D{constructor(e,t){var i,o,n,a,s,r,l,d,c,p,u,g,m;super(),this.service=e,this.home=t,this.defaultState={tooltipPriority:(null===(o=null===(i=this.home.state.appContext)||void 0===i?void 0:i.user)||void 0===o?void 0:o.showScheduleTips)||(null!==(s=null===(a=null===(n=this.home.state.appContext)||void 0===n?void 0:n.user)||void 0===a?void 0:a.longVideoMinutes)&&void 0!==s?s:0)>0&&!Vr.iv.getItem(ep)?1:(null===(l=null===(r=this.home.state.appContext)||void 0===r?void 0:r.user)||void 0===l?void 0:l.hasCollectionsAccess)&&!Vr.iv.getItem(tp)?6:5,uploadTooltipType:(null!==(p=null===(c=null===(d=this.home.state.appContext)||void 0===d?void 0:d.user)||void 0===c?void 0:c.longVideoMinutes)&&void 0!==p?p:0)>0&&!Vr.iv.getItem(ep)?1:0,redDot:null!==(m=null===(g=null===(u=this.home.state.appContext)||void 0===u?void 0:u.user)||void 0===g?void 0:g.redDot)&&void 0!==m?m:[]}}setTooltipPriority(e,t){e.tooltipPriority=t}deleteTypeRedDot(e,t){const i=[...e.redDot],o=i.indexOf(t);i.splice(o,1),e.redDot=i}postScheduleRecord(e){return e.pipe((0,io.z)((e=>this.service.postScheduleRecord(e).pipe((0,Qe.U)((()=>this.noop()))))))}updateRedDot(e){return e.pipe((0,io.z)((({redirect:e,type:t})=>this.service.updateRedDot({type:t}).pipe((0,Co.b)((()=>{e&&(location.href=e)})),(0,Qe.U)((()=>this.getActions().deleteTypeRedDot(t)))))))}};(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,Number]),(0,w.__metadata)("design:returntype",void 0)],np.prototype,"setTooltipPriority",null),(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,Number]),(0,w.__metadata)("design:returntype",void 0)],np.prototype,"deleteTypeRedDot",null),(0,w.__decorate)([(0,Ge.Qm)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Ve.y]),(0,w.__metadata)("design:returntype",void 0)],np.prototype,"postScheduleRecord",null),(0,w.__decorate)([(0,Ge.Qm)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Ve.y]),(0,w.__metadata)("design:returntype",void 0)],np.prototype,"updateRedDot",null),np=(0,w.__decorate)([(0,Ze.Y)("Header"),(0,w.__metadata)("design:paramtypes",[Xc,V.G])],np);const ap=(0,be.Z)("div",{target:"efubjyv0"})((({theme:{direction:e}})=>(0,$e.YJ)({direction:e,marginStart:"24px"})),{position:"relative",width:"32px",height:"32px",background:"center no-repeat",backgroundSize:"cover",borderRadius:"50%",cursor:"pointer"},"label:DivProfileContainer;");ap.defaultProps=Object.assign(Object.assign({},ap.defaultProps),{"data-e2e":"profile-icon"});const sp=(0,U.memo)((function(e){var t;const{children:i,style:o={},id:n,ariaLabel:a,ariaExpanded:s}=e,{appContext:r}=(0,ee.mp)(V.G);return(0,m.jsx)(ap,Object.assign({id:n,tabIndex:0,style:Object.assign({backgroundImage:`url(${null===(t=null==r?void 0:r.user)||void 0===t?void 0:t.avatarUri[0]})`},o),onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,onKeyDown:e.onKeyDown,role:"button","aria-label":a,"aria-expanded":s,"aria-haspopup":"menu","aria-controls":s?Kc:""},{children:i}),void 0)}));var rp;!function(e){e.DarkModeShow="dark_mode_show",e.DarkModeClick="dark_mode_click",e.DarkModePopUpShow="dark_mode_pop_up_show",e.DarkModePopUpClose="dark_mode_pop_up_close",e.DarkModePopUpDisappear="dark_mode_pop_up_disappear"}(rp||(rp={}));const lp={handleDarkModeShow:()=>{c.W.event("dark_mode_show")},handleDarkModeClick:()=>{c.W.event("dark_mode_click")},handleDarkModePopUpShow:()=>{c.W.event("dark_mode_pop_up_show")},handleDarkModePopUpClose:()=>{c.W.event("dark_mode_pop_up_close")},handleDarkModePopUpDisappear:()=>{c.W.event("dark_mode_pop_up_disappear")}},dp=(0,be.Z)("div",{target:"ercuxj60"})({padding:"16px",width:"264px",wordBreak:"break-word"},"label:DivTipWrapper;"),cp=(0,be.Z)("h3",{target:"ercuxj61"})((({theme:e})=>(0,$e.GI)({theme:e,typography:"P2",color:"ConstTextInverse",fontWeight:"semiBold"})),{marginBottom:"4px"},"label:H3TipTitle;"),pp=(0,be.Z)("p",{target:"ercuxj62"})((({theme:e})=>(0,$e.GI)({theme:e,typography:"P3",color:"ConstTextInverse"})),"label:PTipDesc;"),up=(0,be.Z)("div",{target:"ercuxj63"})({display:"flex",justifyContent:"flex-end"},"label:DivButtonWrapper;"),gp=(0,be.Z)("button",{target:"ercuxj65"})($e.Ph,(({theme:e})=>(0,$e.GI)({theme:e,typography:"P2",color:"ConstTextInverse",fontWeight:"semiBold"})),{cursor:"pointer"},"label:ButtonCancel;"),mp=(0,U.memo)((({userPopupActive:e})=>{const{colors:t,direction:i}=(0,_.u)(),o=(0,ji.Q)(),[n,a]=(0,U.useState)(!1),[{tooltipPriority:s},r]=(0,ee.b7)(np),l=(0,U.useRef)(!1),d=(0,U.useRef)(null),c=(0,U.useCallback)((e=>{var t;e.target===d.current||(null===(t=d.current)||void 0===t?void 0:t.contains(e.target))||(a(!1),lp.handleDarkModePopUpDisappear(),r.setTooltipPriority(3),window.removeEventListener("click",c))}),[r]),p=(0,U.useCallback)((e=>{a(!1),lp[null!=e?e:"handleDarkModePopUpDisappear"](),r.setTooltipPriority(3),window.removeEventListener("click",c)}),[r,c]);(0,U.useEffect)((()=>{let e;return n&&(e=window.setTimeout((()=>{l.current=!0,p()}),5e3),window.addEventListener("click",c)),()=>{clearTimeout(e),n&&!l.current&&(lp.handleDarkModePopUpDisappear(),r.setTooltipPriority(3)),window.removeEventListener("click",c)}}),[n,c]);const{pathname:g}=(0,ne.TH)(),h=ye(g);(0,U.useEffect)((()=>{const e=(0,Ui.le)(u.HW);Number(e)<2&&5===s&&h?(a(!0),lp.handleDarkModePopUpShow(),(0,Ui.D$)(u.HW,String(Number(e)+1))):(a(!1),5===s&&r.setTooltipPriority(3))}),[s]),(0,U.useEffect)((()=>{e&&n&&(l.current=!0,p())}),[e,n]);const v=(0,U.useCallback)((()=>{l.current=!0,p("handleDarkModePopUpClose")}),[p]),y="ltr"===i?"bottomRight":"bottomLeft";return(0,m.jsx)(fs.G,Object.assign({active:n,backgroundColor:t.ConstSecondary2,placement:y,arrowMargin:"16px",margin:"-12px"},{children:(0,m.jsxs)(dp,Object.assign({ref:d},{children:[(0,m.jsx)(cp,{children:o("pc_web_dark_mode_popup_header")},void 0),(0,m.jsx)(pp,{children:o("pc_web_dark_mode_popup_body")},void 0),(0,m.jsx)(up,{children:(0,m.jsx)(gp,Object.assign({onClick:v},{children:o("editprofile_close")}),void 0)},void 0)]}),void 0)}),void 0)}));var hp,_p=i(17750),vp=i(26288),yp=i(90442),bp=i(44505),fp=i(24433),xp=i(56163),kp=i.n(xp);!function(e){e.MessagePopShow="message_pop_notice_show",e.ChangeNoticeTab="change_notification_tab",e.EnterFollowRequest="enter_follow_request",e.FollowRequestAction="follow_request_action",e.EnterFoldMessage="enter_folded_message"}(hp||(hp={}));const wp="homepage_message";let Sp=class{handlePopShow(e){c.W.event("message_pop_notice_show",e)}handleChangeTab(e){c.W.event("change_notification_tab",this.getNoticeParams(e))}handleEnterFollow(e){c.W.event("enter_follow_request",this.getNoticeParams(e))}handleFollowRequestAction(e){c.W.event("follow_request_action",kp()(e,{enter_from:"follow_request_page",previous_page:"homepage_message"}))}handleEnterFold(e){c.W.event("enter_folded_message",kp()(e,{enter_from:wp,account_type:"like"}))}getNoticeParams(e){return kp()(e,{enter_from:wp,page_name:wp,previous_page:c.W.commonParams.page_name})}};Sp=(0,w.__decorate)([(0,so.G)()],Sp);let Cp=class{constructor(e){this.fetch=e}getNoticeGroupData(e){return this.fetch.get("/api/notice/multi/",{query:e,baseUrlType:2})}getNoticeDiggList(e){return this.fetch.get("/api/notice/digg/list/",{query:e})}getNoticeFollowRequestList(e){return this.fetch.get("/api/user/following/request/list/",{query:e})}postFollowReplyApprove(e){return this.fetch.post("/api/commit/follow/request/approve/",{query:{from_user_id:e,from:33},headers:{[Uo.eD]:this.fetch.csrfToken}})}postFollowReplyReject(e){return this.fetch.post("/api/commit/follow/request/reject/",{query:{from_user_id:e,from:33},headers:{[Uo.eD]:this.fetch.csrfToken}})}};Cp=(0,w.__decorate)([(0,so.G)(),(0,w.__metadata)("design:paramtypes",[p.r])],Cp);var jp=i(22069);const Pp=e=>33===e.type&&Boolean(e.follow),Tp=e=>41===e.type&&Boolean(e.digg),Op=e=>31===e.type&&Boolean(e.comment),Lp=e=>21===e.type&&Boolean(e.duet),Ip=e=>45===e.type&&Boolean(e.at),Ap=e=>213===e.type&&Boolean(e.template_notice);var Ep,Mp;!function(e){e[e.All=500]="All",e[e.Like=3]="Like",e[e.Comment=2]="Comment",e[e.Mention=6]="Mention",e[e.Follow=7]="Follow"}(Ep||(Ep={})),function(e){e[e.Approve=0]="Approve",e[e.Reject=1]="Reject"}(Mp||(Mp={}));const Rp={500:"all",2:"comments",7:"followers",3:"likes",6:"mentions"};let Fp=class extends He.D{constructor(e,t,i){super(),this.report=e,this.service=t,this.user=i,this.defaultNoticeList={has_more:1,max_time:0,min_time:0,notice_list:[],loading:!1},this.defaultFollowRequest={has_more:!1,min_time:0,total:0,users:[],loading:!1},this.defaultState={diggList:{users:[],loading:!1,has_more:1,max_cursor:0,min_cursor:0},activeGroup:500,noticeList:this.defaultNoticeList,followRequest:this.defaultFollowRequest}}setActiveGroup(e,t){e.activeGroup=t}setNoticeList(e,t){e.noticeList=t}setNoticeListLoading(e,t){e.noticeList.loading=t}changeActiveGroup(e){return e.pipe((0,Co.b)((e=>{this.report.handleChangeTab({to_tab_name:Rp[e]})})),(0,io.z)((e=>(0,oo.of)(this.getActions().setActiveGroup(e),this.getActions().setNoticeList(this.defaultNoticeList),this.getActions().fetchNoticeData()))))}fetchNoticeData(e){return e.pipe((0,To.M)(this.state$),(0,So.w)((([e,{activeGroup:t,noticeList:i}])=>{if(i.loading||!i.has_more)return ao.E;const o={count:20,is_mark_read:1,group:t,max_time:i.max_time,min_time:i.min_time};return this.service.getNoticeGroupData({aid:1988,group_list:JSON.stringify([o])}).pipe((0,Co.b)((e=>{(0,Oo.k)(e.status_code,[0])})),(0,io.z)((e=>{var t;if(0===e.status_code){const{notice_lists:o}=e;if(!(null==o?void 0:o.length))return(0,oo.of)(this.getActions().setNoticeList({has_more:0,min_time:i.min_time,max_time:i.max_time,notice_list:i.notice_list,loading:!1}));const{has_more:n,max_time:a,min_time:s,notice_list:r=[]}=o[0];return r.forEach((e=>{(e=>{var t,i,o,n,a,s,r,l,d,c,p,u,g,m,h,_,v,y,b,f;if(Tp(e)){const s=null===(o=null===(i=null===(t=e.digg.aweme)||void 0===t?void 0:t.video)||void 0===i?void 0:i.cover)||void 0===o?void 0:o.url_list;if(0!==(null===(a=null===(n=e.digg.aweme)||void 0===n?void 0:n.status)||void 0===a?void 0:a.private_status)&&s){const e=(0,jp.X)({src:s[0]});s[0]=e}}if(Op(e)){const t=null===(l=null===(r=null===(s=e.comment.aweme)||void 0===s?void 0:s.video)||void 0===r?void 0:r.cover)||void 0===l?void 0:l.url_list;if(0!==(null===(c=null===(d=e.comment.aweme)||void 0===d?void 0:d.status)||void 0===c?void 0:c.private_status)&&t){const e=(0,jp.X)({src:t[0]});t[0]=e}}if(Lp(e)){const t=null===(g=null===(u=null===(p=e.duet.aweme)||void 0===p?void 0:p.video)||void 0===u?void 0:u.cover)||void 0===g?void 0:g.url_list;if(0!==(null===(h=null===(m=e.duet.aweme)||void 0===m?void 0:m.status)||void 0===h?void 0:h.private_status)&&t){const e=(0,jp.X)({src:t[0]});t[0]=e}}if(Ip(e)){const t=null===(y=null===(v=null===(_=e.at.aweme)||void 0===_?void 0:_.video)||void 0===v?void 0:v.cover)||void 0===y?void 0:y.url_list;if(0!==(null===(f=null===(b=e.at.aweme)||void 0===b?void 0:b.status)||void 0===f?void 0:f.private_status)&&t){const e=(0,jp.X)({src:t[0]});t[0]=e}}})(e)})),(0,oo.of)(this.user.getActions().multiSetUser(this.getNoticeUsers(r)),this.getActions().setNoticeList({has_more:n,max_time:a,min_time:s,notice_list:[...null!==(t=i.notice_list)&&void 0!==t?t:[],...r],loading:!1}))}return(0,oo.of)(this.noop())})),(0,jo.O)(this.getActions().setNoticeListLoading(!0)),(0,Po.l)(this.getActions().setNoticeListLoading(!1)),(0,Ke.n)({}))})))}setDiggList(e,t){e.diggList.users=t}setDiggListLoading(e,t){e.diggList.loading=t}fetchDiggListData(e){return e.pipe((0,To.M)(this.state$),(0,Ye.z)((([{ref_id:e},{diggList:t}])=>{if(t.loading||!t.has_more)return ao.E;const i={count:20,max_cursor:t.max_cursor,min_cursor:t.min_cursor,digg_type:1,ref_id:e,aid:1988};return this.service.getNoticeDiggList(i).pipe((0,io.z)((e=>{var t;const i=(null!==(t=e.digg_infos)&&void 0!==t?t:[]).map((({simple_user:e})=>(0,Ee.yk)(e)));return(0,oo.of)(this.user.getActions().multiSetUser(i),this.getActions().setDiggList(i.map((({uniqueId:e})=>e))))})),(0,jo.O)(this.getActions().setDiggListLoading(!0)),(0,Po.l)(this.getActions().setDiggListLoading(!1)))})))}setNoticeFollowRequest(e,t){e.followRequest=t}setNoticeFollowRequestLoading(e,t){e.followRequest.loading=t}fetchNoticeFollowRequest(e){return e.pipe((0,To.M)(this.state$),(0,io.z)((([{uid:e,refresh:t},{followRequest:i}])=>{const o={user_id:e,count:20,max_time:t?0:i.min_time,aid:1988};return this.service.getNoticeFollowRequestList(o).pipe((0,Co.b)((e=>{(0,Oo.k)(e.status_code,[0])})),(0,io.z)((e=>{var o;if(0===e.status_code){const n=(null!==(o=e.request_users)&&void 0!==o?o:[]).map((e=>(0,Ee.yk)(e))),a=n.map((({uniqueId:e})=>e));return(0,oo.of)(this.user.getActions().multiSetUser(n),this.getActions().setNoticeFollowRequest({has_more:e.has_more,loading:!1,min_time:e.min_time,total:e.total,users:t?a:i.users.concat(a),from:"fetchNoticeFollowRequest"}))}return(0,oo.of)(this.noop())})),(0,jo.O)(this.getActions().setNoticeFollowRequestLoading(!0)),(0,Po.l)(this.getActions().setNoticeFollowRequestLoading(!1)),(0,Ke.n)({}))})))}setNoticeFollowRequestReply(e,t){const i=e.followRequest.users.indexOf(t);if(i>=0){e.followRequest.users.splice(i,1);const{total:t}=e.followRequest;e.followRequest.total="string"==typeof t?t.replace(/(.+?)(\d0*$)/,((e,t,i)=>t+String(Number(i)-1))):t-1}}postFollowReply(e){return e.pipe((0,Co.b)((({approveOrReject:e,uid:t=""})=>{this.report.handleFollowRequestAction({action:0===e?"accept":"delete",to_user_id:t})})),(0,io.z)((({approveOrReject:e,uniqueId:t,uid:i=""})=>(0===e?this.service.postFollowReplyApprove(i):this.service.postFollowReplyReject(i)).pipe((0,kl.h)(this.getActions().setNoticeFollowRequestReply(t))))))}getNoticeUsers(e){return e.reduce(((e,t)=>{var i;return Pp(t)&&e.push((0,Ee.yk)(t.follow.from_user)),Tp(t)&&(null===(i=t.digg.from_user)||void 0===i||i.forEach((t=>e.push((0,Ee.yk)(t))))),Op(t)&&e.push((0,Ee.yk)(t.comment.comment.user)),Lp(t)&&e.push((0,Ee.yk)(t.duet.aweme.author)),Ip(t)&&t.at.user_info&&e.push((0,Ee.yk)(t.at.user_info)),e}),[])}};var Dp;function Bp(){return Bp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Bp.apply(this,arguments)}(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,Number]),(0,w.__metadata)("design:returntype",void 0)],Fp.prototype,"setActiveGroup",null),(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,Object]),(0,w.__metadata)("design:returntype",void 0)],Fp.prototype,"setNoticeList",null),(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,Boolean]),(0,w.__metadata)("design:returntype",void 0)],Fp.prototype,"setNoticeListLoading",null),(0,w.__decorate)([(0,Ge.Qm)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Ve.y]),(0,w.__metadata)("design:returntype",void 0)],Fp.prototype,"changeActiveGroup",null),(0,w.__decorate)([(0,Ge.Qm)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Ve.y]),(0,w.__metadata)("design:returntype",void 0)],Fp.prototype,"fetchNoticeData",null),(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,Array]),(0,w.__metadata)("design:returntype",void 0)],Fp.prototype,"setDiggList",null),(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,Boolean]),(0,w.__metadata)("design:returntype",void 0)],Fp.prototype,"setDiggListLoading",null),(0,w.__decorate)([(0,Ge.Qm)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Ve.y]),(0,w.__metadata)("design:returntype",void 0)],Fp.prototype,"fetchDiggListData",null),(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,Object]),(0,w.__metadata)("design:returntype",void 0)],Fp.prototype,"setNoticeFollowRequest",null),(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,Boolean]),(0,w.__metadata)("design:returntype",void 0)],Fp.prototype,"setNoticeFollowRequestLoading",null),(0,w.__decorate)([(0,Ge.Qm)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Ve.y]),(0,w.__metadata)("design:returntype",void 0)],Fp.prototype,"fetchNoticeFollowRequest",null),(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,String]),(0,w.__metadata)("design:returntype",void 0)],Fp.prototype,"setNoticeFollowRequestReply",null),(0,w.__decorate)([(0,Ge.Qm)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Ve.y]),(0,w.__metadata)("design:returntype",void 0)],Fp.prototype,"postFollowReply",null),Fp=(0,w.__decorate)([(0,Ze.Y)("Notice"),(0,w.__metadata)("design:paramtypes",[Sp,Cp,un.z])],Fp);const zp=function(e){return U.createElement("svg",Bp({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},e),Dp||(Dp=U.createElement("path",{fill:"#161823",fillRule:"evenodd",d:"M4.123 12l7.586 7.586a.5.5 0 010 .707l-1.414 1.414a.5.5 0 01-.707 0L.94 13.061a1.5 1.5 0 010-2.122l8.647-8.646a.5.5 0 01.707 0l1.414 1.414a.5.5 0 010 .707L4.123 12z",clipRule:"evenodd"})))};let Np=class extends He.D{constructor(e,t){super(),this.service=e,this.t=t,this.defaultState={reportDetail:{isLoading:!1,data:null},reportList:{data:[],hasNextPage:!0,pageCount:0},activeReport:null}}setReportDetail(e,t){e.reportDetail.data=t}setReportDetailLoading(e,t){e.reportDetail.isLoading=t}setReportListData(e,t){e.reportList.data.push(...t.data),e.reportList.hasNextPage=t.hasNextPage,e.reportList.pageCount=t.pageCount}setActiveReport(e,t){e.activeReport=t}getReportDetail(e){return e.pipe((0,Ye.z)((({reportId:e,reportType:t})=>this.service.getReportDetail({report_id:e,report_type:t}).pipe((0,Qe.U)((({body:{detail:e}})=>e?this.getActions().setReportDetail(e):this.noop())),(0,jo.O)(this.getActions().setReportDetailLoading(!0)),(0,Po.l)(this.getActions().setReportDetailLoading(!1)),(0,Ke.n)({callback:this.commonToastError})))))}getReportList(e){return e.pipe((0,To.M)(this.state$),(0,Ye.z)((([e,{reportList:{pageCount:t,hasNextPage:i}}])=>i?this.service.getReportList({start:t,count:15}).pipe((0,Qe.U)((({body:{status_code:e,list:i,has_more:o}})=>0!==e?this.noop():this.getActions().setReportListData({data:null!=i?i:[],hasNextPage:o,pageCount:t+15}))),(0,Ke.n)({callback:this.commonToastError})):(0,oo.of)(this.noop()))))}updateActiveReport(e){return e.pipe((0,io.z)((e=>[this.getActions().setActiveReport(e)])))}commonToastError(){mi.h.destroy(),mi.h.open({content:this.t(u.kU),duration:3,widthType:"half"})}};(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,Object]),(0,w.__metadata)("design:returntype",void 0)],Np.prototype,"setReportDetail",null),(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,Boolean]),(0,w.__metadata)("design:returntype",void 0)],Np.prototype,"setReportDetailLoading",null),(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,Object]),(0,w.__metadata)("design:returntype",void 0)],Np.prototype,"setReportListData",null),(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,Object]),(0,w.__metadata)("design:returntype",void 0)],Np.prototype,"setActiveReport",null),(0,w.__decorate)([(0,Ge.Qm)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Ve.y]),(0,w.__metadata)("design:returntype",void 0)],Np.prototype,"getReportDetail",null),(0,w.__decorate)([(0,Ge.Qm)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Ve.y]),(0,w.__metadata)("design:returntype",void 0)],Np.prototype,"getReportList",null),(0,w.__decorate)([(0,Ge.Qm)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Ve.y]),(0,w.__metadata)("design:returntype",void 0)],Np.prototype,"updateActiveReport",null),Np=(0,w.__decorate)([(0,Ze.Y)("ReportInbox"),(0,w.__param)(1,(0,Bo.t)(Y.s$)),(0,w.__metadata)("design:paramtypes",[Lc,Function])],Np);var Up,Wp,$p,qp=i(21145),Hp=i(97125);function Gp(){return Gp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Gp.apply(this,arguments)}const Zp=function(e){return U.createElement("svg",Gp({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 21 20",width:"1em",height:"1em"},e),Up||(Up=U.createElement("rect",{width:1.501,height:17.768,fill:"#fff",rx:.5,transform:"scale(1 -1) rotate(45.638 27.162 10.536)"})),Wp||(Wp=U.createElement("path",{fill:"#fff",fillRule:"evenodd",d:"M10.57 14.556c1.11 0 2.163-.17 3.11-.472L12.5 12.93a.512.512 0 01-.058-.068 9.006 9.006 0 01-1.873.193c-1.802 0-3.368-.514-4.445-1.267-1.08-.757-1.557-1.658-1.557-2.484 0-.826.476-1.728 1.557-2.485a5.44 5.44 0 01.075-.051L5.11 5.702c-1.266.94-2.043 2.207-2.043 3.602 0 2.9 3.36 5.252 7.503 5.252zM7.475 4.518c.943-.3 1.99-.466 3.093-.466 4.144 0 7.503 2.351 7.503 5.252 0 1.39-.77 2.652-2.03 3.592l-1.09-1.066a5.9 5.9 0 00.062-.042c1.08-.757 1.557-1.658 1.557-2.484 0-.826-.476-1.728-1.557-2.485-1.076-.753-2.643-1.267-4.445-1.267-.65 0-1.268.067-1.844.188l-1.25-1.222z",clipRule:"evenodd"})),$p||($p=U.createElement("path",{fill:"#fff",fillRule:"evenodd",d:"M11.357 11.81a2.626 2.626 0 01-3.31-3.236l3.31 3.236zM9.803 6.792a2.626 2.626 0 013.296 3.224L9.804 6.792z",clipRule:"evenodd"})))};var Vp=i(39556),Qp=i.n(Vp);function Yp(e){if(isNaN(Number(e)))return"";const t=Qp().unix(Number(e)),i=e=>e.toString().padStart(2,"0"),o=i(t.month()+1),n=i(t.date()),a=i(t.hour()),s=i(t.minute()),r=i(t.second());return`${t.year()}-${o}-${n} ${a}:${s}:${r}`}const Kp=(0,We.Z)("div",{target:"egjh0py0"})({display:"flex",padding:"10px 0"},"label:DivItemContainer;"),Jp=(0,We.Z)("div",{target:"egjh0py1"})((({theme:{direction:e,colors:t}})=>[{height:"48px",width:"48px",borderRadius:"50%",border:`1px solid ${t.LinePrimary}`,backgroundColor:t.BGTertiary,display:"flex",alignItems:"center",justifyContent:"center","> svg > path":{fill:t.TextPrimary}},(0,$e.YJ)({direction:e,marginEnd:"12px"})]),"label:DivLogoContainer;"),Xp=(0,We.Z)("img",{target:"egjh0py2"})((({theme:{direction:e}})=>[{height:"48px",width:"48px",borderRadius:"50%"},(0,$e.YJ)({direction:e,marginEnd:"12px"})]),"label:ImgLeftIcon;"),eu=(0,We.Z)("img",{target:"egjh0py3"})((({theme:{colors:e}})=>({objectFit:"cover",backgroundColor:e.TextTertiary})),"label:ImgCover;"),tu=(0,We.Z)("div",{target:"egjh0py4"})({flex:1,display:"flex",justifyContent:"space-between"},"label:DivRightContent;"),iu=(0,We.Z)("div",{target:"egjh0py5"})((({theme:{colors:e,direction:t}})=>[{flex:1,color:e.TextPrimary},(0,$e.YJ)({direction:t,marginEnd:"12px"})]),"label:DivDialogContent;"),ou=(0,We.Z)("span",{target:"egjh0py6"})((({theme:e})=>[(0,$e.GI)({theme:e,fontFamily:"Proxima",fontWeight:"semiBold",typography:"P3"}),{lineHeight:"17px"}]),"label:SpanTitle;"),nu=(0,We.Z)("div",{target:"egjh0py7"})((({theme:e})=>[(0,$e.GI)({theme:e,fontFamily:"Proxima",fontWeight:"normal",typography:"P3"}),{lineHeight:"17px"}]),"label:DivContent;"),au=(0,We.Z)("span",{target:"egjh0py8"})((({theme:e})=>[(0,$e.GI)({theme:e,fontFamily:"Proxima",fontWeight:"normal",typography:"P3",color:"TextQuaternary"}),{lineHeight:"17px"}]),"label:SpanTime;"),su=(0,We.Z)("div",{target:"egjh0py9"})({width:"42px",height:"56px",borderRadius:"2px",overflow:"hidden",position:"relative"},"label:DivImgWrapper;"),ru=(0,We.Z)("div",{target:"egjh0py10"})((({theme:{direction:e}})=>[{display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",width:"100%",height:"100%",top:0,backgroundColor:"rgba(0, 0, 0, .5)"},(0,$e.YJ)({direction:e,start:0})]),"label:DivViolationMask;"),lu=({item:e,isV2:t})=>{const[i,o]=(0,U.useState)(!1),n=(0,U.useCallback)((()=>{o(!0)}),[]),{title:a="",content:s="",time:r="",cover_url:l="",avatar_url:d="",has_mask:c=!1}=e;return(0,m.jsxs)(Kp,Object.assign({role:"listitem",tabIndex:0,"aria-label":s},{children:[d&&""!==d?(0,m.jsx)(Xp,{src:d||qp},void 0):(0,m.jsx)(Jp,{children:(0,m.jsx)(Hp.L,{size:32},void 0)},void 0),(0,m.jsxs)(tu,{children:[(0,m.jsxs)(iu,{children:[(0,m.jsx)(ou,{children:a},void 0),(0,m.jsxs)(nu,{children:[s," ",(0,m.jsx)(au,{children:t?Yp(r):r},void 0)]},void 0)]},void 0),l&&(0,m.jsxs)(su,{children:[(0,m.jsx)(eu,{width:"100%",height:"100%",src:(0,jp.X)({src:l}),onLoad:n},void 0),c&&i&&(0,m.jsx)(ru,{children:(0,m.jsx)(Zp,{width:20,height:20},void 0)},void 0)]},void 0)]},void 0)]}),void 0)},du=(0,We.Z)("div",{target:"eaptjjg0"})((({theme:{direction:e}})=>[{paddingTop:"8px",display:"flex",flexGrow:1,flexDirection:"column",alignItems:"stretch",overflowY:"auto"},(0,$e.YJ)({direction:e,paddingStart:"16px",paddingEnd:"24px"})]),"label:DivReportDetail;"),cu=({reportId:e,reportType:t})=>{const{reportDetail:{isLoading:i,data:o}}=(0,ee.mp)(Np),n=(0,ee.qj)(Np),a=(0,U.useCallback)((()=>{n.getReportDetail({reportId:e,reportType:t})}),[e,t,n]);if((0,U.useEffect)((()=>{a()}),[a]),i)return(0,m.jsx)(_i.g,{center:!0,size:"small"},void 0);if(!o)return(0,m.jsx)("div",{},void 0);const{text_infos:s}=o,r=void 0!==t;return(0,m.jsx)(du,Object.assign({role:"list"},{children:null==s?void 0:s.map(((e,t)=>(0,m.jsx)(lu,{item:e,isV2:r},t)))}),void 0)};var pu,uu=i(4776),gu=i(87458);function mu(){return mu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},mu.apply(this,arguments)}const hu=function(e){return U.createElement("svg",mu({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 32",width:"1em",height:"1em"},e),pu||(pu=U.createElement("path",{fill:"#161823",fillRule:"evenodd",d:"M16.58 6.023c-2.175-1.546-4.752-1.507-6.651-1.157a14.519 14.519 0 00-3.097.948 8.763 8.763 0 00-.252.116l-.016.008-.006.003-.004.001A1 1 0 006 6.838v20.495c0 .369.298.667.667.667h.666A.667.667 0 008 27.333v-8.247l.233-.09c.515-.19 1.236-.42 2.059-.57 1.674-.31 3.597-.27 5.129.819 2.174 1.546 4.751 1.506 6.65 1.156a14.515 14.515 0 003.097-.948 8.48 8.48 0 00.253-.116l.015-.007h.001l.005-.003.003-.002A1 1 0 0026 18.43V6.838a1 1 0 00-1.444-.896h-.001l-.006.003a3.144 3.144 0 01-.186.085 12.52 12.52 0 01-2.654.812c-1.675.309-3.598.27-5.13-.82zm-6.288.81c1.674-.308 3.597-.269 5.129.82 2.174 1.546 4.751 1.506 6.65 1.156a14.358 14.358 0 001.929-.5v9.464a12.486 12.486 0 01-2.292.661c-1.674.309-3.597.27-5.129-.82-2.174-1.545-4.751-1.506-6.65-1.156a14.35 14.35 0 00-1.929.5V7.495l.233-.09c.515-.19 1.236-.42 2.059-.57z",clipRule:"evenodd"})))};var _u;function vu(){return vu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},vu.apply(this,arguments)}const yu=function(e){return U.createElement("svg",vu({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 17 16",width:"1em",height:"1em"},e),_u||(_u=U.createElement("path",{fill:"#161823",fillOpacity:.5,fillRule:"evenodd",d:"M12.305 7.529L6.874 2.098a.333.333 0 00-.472 0l-.471.471a.333.333 0 000 .471L10.891 8l-4.96 4.96a.333.333 0 000 .471l.471.471c.13.13.342.13.472 0l5.43-5.43a.667.667 0 000-.943z",clipRule:"evenodd"})))},bu={101:"report_inbox_video",102:"report_inbox_comment",103:"report_inbox_account",107:"report_inbox_live",130:"report_inbox_livecomment",106:"report_inbox_directmessage",115:"report_inbox_directmessage",123:"report_inbox_directmessage",105:"report_inbox_sound",119:"report_inbox_hashtag",141:"shoutouts_detail_comment_report_title",142:"tns_intro_reporter_title",160:"%s - qareport_question",230:"profile_page_events_list",210:"photo_name_nocaption"},fu={1:"report_inbox_inreview",3:"report_inbox_violation",2:"report_inbox_noviolation"},xu=(0,We.Z)("div",{target:"e1cbfxtu0"})((({theme:{colors:e,direction:t},isNotice:i,isMobile:o=!1})=>[{height:"68px",minHeight:"68px",display:"flex",flexDirection:"row",alignItems:"center",position:"relative",cursor:"pointer",":hover":o?{}:{backgroundColor:e.BGPlaceholderDefault}},(0,$e.YJ)({direction:t,paddingStart:"16px",paddingEnd:i?"16px":"24px"})]),"label:DivReportItemContainer;"),ku=(0,We.Z)("div",{target:"e1cbfxtu1"})((({theme:{colors:e}})=>[{minWidth:"48px",width:"48px",height:"48px",borderRadius:"24px",border:`1px solid ${e.LinePrimary}`,backgroundColor:e.BGTertiary,display:"flex",justifyContent:"center",alignItems:"center","> svg > path":{fill:e.TextPrimary}}]),"label:DivFlagContainer;"),wu=(0,We.Z)("div",{target:"e1cbfxtu2"})((({theme:{direction:e}})=>[{display:"flex",flexGrow:1,flexDirection:"column",justifyContent:"center",overflow:"hidden",wordWrap:"break-word"},(0,$e.YJ)({direction:e,marginStart:"12px"})]),"label:DivReportItemContent;"),Su=(0,We.Z)("div",{target:"e1cbfxtu3"})((({theme:{direction:e,colors:t}})=>[Object.assign(Object.assign({minWidth:"16px",width:"16px",height:"16px"},"rtl"===e&&{transform:"rotate(180deg)"}),{"> svg > path":{fill:t.TextPrimary}})]),"label:DivArrowContainer;"),Cu=(0,We.Z)("span",{target:"e1cbfxtu4"})((({theme:e,isNotice:t})=>[(0,$e.GI)({theme:e,fontFamily:"Proxima",typography:"P3",color:"TextPrimary",fontWeight:"semiBold"}),{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:t?"normal":"nowrap",lineHeight:"17px"}]),"label:SpanTitle;"),ju=(0,We.Z)("span",{target:"e1cbfxtu5"})((({theme:e,isNotice:t})=>[(0,$e.GI)({theme:e,fontFamily:"Proxima",typography:"P3",fontWeight:"normal",color:t?"TextPrimary":"TextTertiary"}),{lineHeight:"17px"}]),"label:SpanSubtitle;"),Pu=(0,We.Z)("span",{target:"e1cbfxtu6"})((({theme:e})=>[(0,$e.GI)({theme:e,fontFamily:"Proxima",typography:"P3",fontWeight:"normal",color:"TextQuaternary"}),{lineHeight:"17px"}]),"label:SpanTimestamp;"),Tu=(0,We.Z)("div",{target:"e1cbfxtu7"})((({theme:{direction:e}})=>[{position:"relative",width:"42px",minWidth:"42px",height:"56px",minHeight:"56px",borderRadius:"2px",overflow:"hidden"},(0,$e.YJ)({direction:e,marginStart:"12px"})]),"label:DivCoverImageWrapper;"),Ou=(0,We.Z)("img",{target:"e1cbfxtu8"})((({theme:{colors:e},isNotLoaded:t})=>[Object.assign({width:"100%",height:"100%",objectFit:"cover"},t?{backgroundColor:e.TextTertiary}:{})]),"label:ImgCoverImage;"),Lu=(0,We.Z)("div",{target:"e1cbfxtu9"})({display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",width:"100%",height:"100%",top:0,left:0,backgroundColor:"rgba(0, 0, 0, .5)"},"label:DivViolationMask;"),Iu=(0,We.Z)("span",{target:"e1cbfxtu10"})({textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",maxWidth:"70%",float:"left"},"label:SpanReportBoxRow;"),Au=({report:e,index:t,onClick:i,onKeyDown:o})=>{const{timeTranslator:n}=(0,gu.e)(),a=(0,ji.Q)(),{isMobile:s}=(0,Ee.m7)((0,Ne.h)((()=>["isMobile"]),[])),[r,l]=(0,U.useState)(!1),d=bu[e.report_type]?a(bu[e.report_type]):"",c=n(1e3*Number(e.modify_time)),p=(0,U.useCallback)((()=>{i()}),[i]),u=(0,U.useCallback)((()=>{l(!0)}),[]),g=fu[e.status]?a(fu[e.status]):"";return(0,m.jsxs)(xu,Object.assign({onClick:p,onKeyDown:o,isMobile:s,tabIndex:0,role:"button","aria-labelledby":`report-item-content-${t}`},{children:[(0,m.jsx)(ku,{children:(0,m.jsx)(hu,{width:32,height:32},void 0)},void 0),(0,m.jsxs)(wu,Object.assign({id:`report-item-content-${t}`},{children:[(0,m.jsx)(Cu,{children:(()=>{if(e.title)return e.title;if(160===e.report_type){const t=` - ${a("qareport_question")||"Question"}`;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(Iu,{children:e.object_desc},void 0),(0,m.jsx)("span",{children:t.padStart(t.length+1)},void 0)]},void 0)}return d.replace("%s",e.object_owner_name||e.object_desc||"")})()},void 0),(0,m.jsxs)(ju,{children:[a("report_inbox_status"),": ",g,(0,m.jsx)(Pu,{children:c.padStart(c.length+1)},void 0)]},void 0)]}),void 0),e.cover_image?(0,m.jsxs)(Tu,{children:[(0,m.jsx)(Ou,{isNotLoaded:!r,src:(0,jp.X)({src:e.cover_image}),onLoad:u},void 0),3===e.status&&r&&(0,m.jsx)(Lu,{children:(0,m.jsx)(Zp,{width:20,height:20},void 0)},void 0)]},void 0):(0,m.jsx)(Su,{children:(0,m.jsx)(yu,{width:16,height:16},void 0)},void 0)]}),void 0)},Eu=(0,We.Z)("div",{target:"eq5dlep0"})({display:"flex",flexGrow:1,flexDirection:"column",alignItems:"stretch",overflow:"auto",height:"100%"},"label:DivReportList;"),Mu=()=>{const{reportList:{data:e,hasNextPage:t}}=(0,ee.mp)(Np),i=(0,ee.qj)(Np),o=(0,U.useRef)(null);(0,U.useEffect)((()=>{e.length>0||i.getReportList()}),[i,e.length]);const n=(0,U.useCallback)((()=>{i.getReportList()}),[i]),a=(0,U.useCallback)((e=>()=>{i.updateActiveReport({reportId:e.report_id,reportType:e.report_type})}),[i]),s=(0,U.useCallback)((e=>t=>{13!==t.keyCode&&32!==t.keyCode||i.updateActiveReport({reportId:e.report_id,reportType:e.report_type})}),[i]);return(0,uu.s)({elemRef:o,onHitBottom:n,bottomThreshold:200,throttle:200}),(0,m.jsxs)(Eu,Object.assign({ref:o},{children:[e.map(((e,t)=>(0,m.jsx)(Au,{report:e,index:t,onClick:a(e),onKeyDown:s(e)},t))),t&&(0,m.jsx)("div",{children:(0,m.jsx)(_i.g,{center:!0,size:"small"},void 0)},void 0)]}),void 0)},Ru=(0,We.Z)("div",{target:"e115u39r0"})({height:"100%",width:"100%",display:"flex",flexDirection:"column",alignItems:"stretch",overflow:"hidden"},"label:DivReportInboxContainer;"),Fu=(0,We.Z)("div",{target:"e115u39r1"})({display:"flex",flexDirection:"row",alignItems:"center",padding:"0 16px",margin:"24px 0 18px"},"label:DivHeader;"),Du=(0,We.Z)("span",{target:"e115u39r2"})((({theme:e})=>[(0,$e.GI)({theme:e,fontFamily:"Sofia",typography:"H4",color:"TextPrimary",fontWeight:"bold"})]),"label:SpanHeaderTitle;"),Bu=(0,We.Z)("div",{target:"e115u39r3"})((({theme:{direction:e,colors:t}})=>[Object.assign(Object.assign({width:"24px",height:"24px",cursor:"pointer"},"rtl"===e&&{transform:"rotate(180deg)"}),{"> svg > path":{fill:t.TextPrimary}})]),"label:DivBackButton;"),zu=({onClose:e})=>{var t,i;const{reportDetail:o,activeReport:n}=(0,ee.mp)(Np),a=(0,ji.Q)(),s=(0,ee.qj)(Np),r=(0,U.useCallback)((()=>{null===n?e():s.setActiveReport(null)}),[n,s,e]),l=(0,U.useCallback)((e=>{13!==e.keyCode&&32!==e.keyCode||(e.preventDefault(),e.stopPropagation(),r())}),[r]),d=a("report_inbox_title"),c=null!==n&&null!==(i=null===(t=o.data)||void 0===t?void 0:t.tab_title)&&void 0!==i?i:d,p=null!==n?"Back to report list":"Back to notification list";return(0,m.jsxs)(Ru,{children:[(0,m.jsxs)(Fu,{children:[(0,m.jsx)(Bu,Object.assign({onClick:r,onKeyDown:l,tabIndex:0,role:"button","aria-label":p},{children:(0,m.jsx)(zp,{width:24,height:24},void 0)}),void 0),(0,m.jsx)(Du,{children:c},void 0)]},void 0),null!==n?(0,m.jsx)(cu,{reportId:n.reportId,reportType:n.reportType},void 0):(0,m.jsx)(Mu,{},void 0)]},void 0)},Nu=[500,3,2,6,7];var Uu=i(25615),Wu=i.n(Uu),$u=i(3984),qu=i(5687),Hu=i(59878),Gu=i(67672),Zu=i(40208),Vu=i(75658),Qu=i(99369);const Yu=(0,We.Z)("div",{target:"e1d0xjxi0"})({padding:"88px 32px 0",display:"flex",flexDirection:"column",alignItems:"center"},"label:DivErrorContainer;"),Ku=(0,We.Z)("p",{target:"e1d0xjxi1"})((({theme:e})=>(0,$e.GI)({theme:e,typography:"P2",fontWeight:"semiBold"})),{marginTop:"20px"},"label:PErrorTitle;"),Ju=(0,We.Z)("p",{target:"e1d0xjxi2"})((({theme:e})=>(0,$e.GI)({theme:e,typography:"H6",color:"TextSecondary"})),{marginTop:"12px",textAlign:"center"},"label:PErrorDesc;"),Xu={500:{title:"inbox_all_activity",desc:"inbox_default_text",Icon:Hu.Z},2:{title:"Inbox_Comments_on_your_videos",desc:"Inbox_When_someone_comments_on__one_of_your_videos_you_ll_see_it_here",Icon:Gu.Z},7:{title:"Inbox_New_followers",desc:"Inbox_When_someone_new_follows_you_you_ll_see_it_here",Icon:Zu.Z},3:{title:"Inbox_Likes_on_your_videos",desc:"Inbox_When_someone_likes_one_of_your_videos_you_ll_see_it_here",Icon:Vu.Z},6:{title:"Inbox_Mentions_of_You",desc:"Inbox_When_someone_mentions_you_you_ll_see_it_here",Icon:Qu.Z}},eg=(0,U.memo)((function({type:e}){const t=(0,ji.Q)(),{colors:i}=(0,_.u)(),{title:o,desc:n,Icon:a}=Xu[e];return(0,m.jsxs)(Yu,{children:[(0,m.jsx)(a,{width:70,height:70,fill:i.TextQuaternary},void 0),(0,m.jsx)(Ku,{children:t(o)},void 0),(0,m.jsx)(Ju,{children:t(n)},void 0)]},void 0)})),tg=({item:e,onClick:t})=>{var i,o,n,a,s,r,l;const{isMobile:d=!1}=null!==(i=(0,Ne.h)((()=>["isMobile"]),[]))&&void 0!==i?i:{},{timeTranslator:c}=(0,gu.e)(),p=c(1e3*Number(e.create_time)),u=null!==(a=null===(n=null===(o=e.template_notice)||void 0===o?void 0:o.notice)||void 0===n?void 0:n.content)&&void 0!==a?a:"",g=(0,U.useCallback)((()=>{d?window.location.href="/report/inbox":null==t||t()}),[d,t]),h=(0,U.useCallback)((e=>{13!==e.keyCode&&32!==e.keyCode||(e.preventDefault(),e.stopPropagation(),g())}),[g]);return(0,m.jsxs)(xu,Object.assign({isNotice:!0,onClick:g,onKeyDown:h,tabIndex:0,role:"button","aria-labelledby":"notice-report-title"},{children:[(0,m.jsx)(ku,{children:(0,m.jsx)(hu,{width:32,height:32},void 0)},void 0),(0,m.jsx)(wu,{children:(0,m.jsxs)(Cu,Object.assign({isNotice:!0,id:"notice-report-title"},{children:[null===(l=null===(r=null===(s=e.template_notice)||void 0===s?void 0:s.notice)||void 0===r?void 0:r.title)||void 0===l?void 0:l.title,":",(0,m.jsxs)(ju,Object.assign({isNotice:!0},{children:[u.padStart(u.length+1),(0,m.jsx)(Pu,{children:p.padStart(p.length+1)},void 0)]}),void 0)]}),void 0)},void 0),(0,m.jsx)(Su,{children:(0,m.jsx)(yu,{width:16,height:16},void 0)},void 0)]}),void 0)};var ig=i(57317);function og({beforeStart:e,href:t,shouldUsePush:i,state:o}){const n=(0,qu.e)();return t=(0,ig.ot)(t),(0,U.useCallback)((a=>{null==e||e(a),n(a,{href:t,shouldUsePush:i,state:o})}),[e,n,t,i,o])}function ng(e){let t=e.target;for(;!((null==t?void 0:t.dataset.method)||t===e.currentTarget&&t);)t=t.parentElement;return t.dataset.method}function ag({uniqueId:e,onClick:t,enter_method:i,enter_from:o,previous_page:n,shouldHandleDom:a}){const s=(0,ee.mp)(V.G,{selector:t=>{var i;const{appContext:o}=t;return(null==o?void 0:o.user)&&(null===(i=null==o?void 0:o.user)||void 0===i?void 0:i.uniqueId)===e},dependencies:[e]});return(0,U.useCallback)((e=>{var r;let l=i;a&&(l=null!==(r=ng(e))&&void 0!==r?r:i),null==t||t(e);const d={enter_method:l,page_name:null!=o?o:"homepage_message",enter_from:null!=o?o:"homepage_message",previous_page:null!=n?n:c.W.commonParams.page_name};s?Sn.W.handleEnterProfile(d):Sn.W.handleEnterUser(d)}),[i,a,t,s,o,n])}function sg(e){const{vid:t,authorId:i}=e;return(0,U.useCallback)((()=>{Sn.W.handleEnterVideo({enter_method:"click_noti",group_id:t,to_group_id:t,to_author_id:i})}),[i,t])}const rg=(0,We.Z)("div",{target:"exfus50"})((({theme:e})=>[(0,$e.GI)({theme:e,typography:"H6"}),$e.gi,{display:"flex",flexDirection:"row",padding:"10px 16px",alignItems:"flex-start",cursor:"pointer",":hover":{background:e.colors.BGView}}]),"label:DivItemContainer;"),lg=(0,We.Z)("div",{target:"exfus51"})({position:"relative",width:"48px",height:"48px",flex:"0 0 48px"},"label:DivAvatarContainer;"),dg=(0,We.Z)(uc.q,{target:"exfus52"})((({size:e,multiple:t,theme:i})=>t?{position:"absolute",border:`1px solid ${i.colors.BGPrimary}`,background:i.colors.BGPrimary,boxSizing:"content-box",":first-of-type":{right:0,top:0},":last-of-type":{left:0,bottom:0}}:{flex:`0 0 ${e}px`}),"label:StyledAvatar;"),cg=(0,We.Z)(Ut.W,{target:"exfus53"})({alignSelf:"center",flex:"0 0 auto","& > svg":{marginRight:"6px"},"&:focus-visible":{outline:"2px solid #5E9ED6"}},"label:StyledFollowButton;"),pg=(0,We.Z)("div",{target:"exfus54"})({flex:"0 0 42px",width:"42px",height:"56px",background:"center no-repeat",backgroundSize:"cover",borderRadius:"2px"},"label:DivVideoCover;"),ug=(0,We.Z)(En.v,{target:"exfus55"})({flex:"0 0 42px",width:"42px",height:"56px",background:"center no-repeat",backgroundSize:"cover",borderRadius:"2px"},"label:StyledLinkVideoCover;"),gg=(0,We.Z)("div",{target:"exfus56"})({padding:"0 12px",flex:"1 1 auto"},"label:DivContentContainer;"),mg=({theme:e})=>({fontWeight:e.fontWeights.semiBold}),hg=(0,We.Z)("p",{target:"exfus57"})(mg,"label:PTitleText;"),_g=(0,We.Z)("a",{target:"exfus58"})(mg,"label:ATitleLink;"),vg=(0,We.Z)(En.v,{target:"exfus59"})(mg,"label:StyledTitleTextLink;"),yg=(0,We.Z)("p",{target:"exfus510"})((0,$e.FC)(7),(({theme:e})=>({color:e.colors.TextTertiary,maxHeight:130,wordBreak:"break-word"})),"label:PDescText;"),bg=(0,We.Z)("span",{target:"exfus511"})((({theme:{colors:e}})=>({color:e.TextPrimary})),"label:SpanPrimary;"),fg=(0,We.Z)(yg,{target:"exfus512"})((({theme:e})=>({position:"relative",paddingLeft:"8px",marginTop:"4px",lineClamp:1,WebkitLineClamp:1,"::before":{content:'""',position:"absolute",top:0,left:0,width:"2px",height:"100%",background:e.colors.LineSecondary}})),"label:StyledExtraText;"),xg=(0,We.Z)("div",{target:"exfus513"})({marginTop:"8px"},"label:DivFollowReqButtonWrapper;"),kg=(0,We.Z)(Ut.W,{target:"exfus514"})({display:"inline-flex",":not(:first-of-type)":{marginLeft:"8px"},"&:focus-visible":{outline:"2px solid #5E9ED6"}},"label:StyledFollowReqButton;"),wg=(0,U.memo)((function({item:e}){var t,i,o,n,a;const s=(0,ee.mp)(un.z,{selector:t=>{var i;return t.users[null!==(i=e.comment.comment.user.unique_id)&&void 0!==i?i:""]},dependencies:[e]}),{businessPermission:r}=(0,ee.mp)(Zi.Y),{user:l}=(0,Ee.m7)((0,ze.Lh)((()=>["user"]),[])),d=e.comment.aweme,c=r.comment&&(null==d?void 0:d.author.uid)===(null==l?void 0:l.uid)?`/business-suite/comments?video_id=${null==d?void 0:d.aweme_id}&comment_id=${e.comment.comment.cid}&from=homepage`:`/@${null==d?void 0:d.author.uid}/video/${null==d?void 0:d.aweme_id}`,p=(0,Cn.yl)({uniqueId:null!==(t=null==s?void 0:s.uniqueId)&&void 0!==t?t:"",secUid:null==s?void 0:s.secUid}),u=sg({vid:null==d?void 0:d.aweme_id,authorId:null==d?void 0:d.author.uid}),{handleBefore:g,state:h}=(0,U.useMemo)((()=>({handleBefore:()=>{Vr.To.setItem("highlight_comment",{id:e.comment.comment.cid,groupId:e.comment.aweme.aweme_id,uid:null==s?void 0:s.id,uniqueId:null==s?void 0:s.uniqueId,show:!0}),u()},state:{browserMode:!0,cid:e.comment.comment.cid,vid:e.comment.aweme.aweme_id}})),[u,e.comment.aweme.aweme_id,e.comment.comment.cid,null==s?void 0:s.id,null==s?void 0:s.uniqueId]),_=og({href:`${c}${r.comment?"":"?browserMode=1"}`,state:h,shouldUsePush:!0,beforeStart:g}),v=ag({uniqueId:null==s?void 0:s.uniqueId,onClick:Ui.UW,enter_method:"click_head"}),y=ag({uniqueId:null==s?void 0:s.uniqueId,onClick:Ui.UW,enter_method:"click_name"}),b=(0,U.useCallback)((e=>{e.stopPropagation(),Sn.W.handleEnterVideo({enter_method:"click_noti",group_id:null==d?void 0:d.aweme_id,to_group_id:null==d?void 0:d.aweme_id,to_author_id:null==d?void 0:d.author.uid})}),[null==d?void 0:d.author.uid,null==d?void 0:d.aweme_id]);return s?(0,m.jsxs)(rg,Object.assign({"data-e2e":"inbox-list-item",onClick:_},{children:[(0,m.jsx)(En.v,Object.assign({to:p,onClick:v},{children:(0,m.jsx)(dg,{size:48,src:s.avatarThumb,multiple:!1,alt:""},void 0)}),void 0),(0,m.jsxs)(gg,{children:[(0,m.jsx)(vg,Object.assign({"data-e2e":"inbox-title",to:p,onClick:y},{children:s.uniqueId}),void 0),(0,m.jsx)(Sg,{item:e,user:s},void 0)]},void 0),(0,m.jsx)(En.v,Object.assign({to:c,onClick:b},{children:(0,m.jsx)(pg,{style:{backgroundImage:`url(${null===(a=null===(n=null===(o=null===(i=e.comment.aweme)||void 0===i?void 0:i.video)||void 0===o?void 0:o.cover)||void 0===n?void 0:n.url_list)||void 0===a?void 0:a[0]})`}},void 0)}),void 0)]}),void 0):(0,Oo.G)(["user"])})),Sg=(0,U.memo)((function({item:e,user:t}){var i,o;const{timeTranslator:n,t:a}=(0,gu.e)(),{comment:s,create_time:r}=e,{comment_type:l,reply_comment:d}=s,c=(0,m.jsxs)(m.Fragment,{children:[" ",n(1e3*Number(r))]},void 0);return 2===l||11===l?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(yg,Object.assign({"data-e2e":"inbox-content"},{children:[(0,m.jsx)(bg,{children:`${a("Inbox_replied_to_your_comment").replace("%s","")}: ${null!==(i=s.comment.text)&&void 0!==i?i:""}`},void 0),c]}),void 0),(0,m.jsx)(fg,{children:`${null!==(o=null==t?void 0:t.uniqueId)&&void 0!==o?o:""}: ${null==d?void 0:d.text}`},void 0)]},void 0):17===l||18===l?(0,m.jsxs)(yg,Object.assign({"data-e2e":"inbox-content"},{children:[(0,m.jsx)(bg,{children:a("inbox_videoreply")},void 0),c]}),void 0):(0,m.jsxs)(yg,Object.assign({"data-e2e":"inbox-content"},{children:[(0,m.jsx)(bg,{children:a("Inbox_commented").replace(/%(s|@)/g,"")+s.comment.text},void 0),c]}),void 0)})),Cg=(0,U.memo)((function({item:e}){var t,i,o,n,a,s;const{t:r,timeTranslator:l}=(0,gu.e)(),d=(0,ee.mp)(un.z,{selector:t=>{var i;return t.users[null!==(i=e.duet.aweme.author.unique_id)&&void 0!==i?i:""]},dependencies:[e]}),c=(0,Cn.fH)({videoId:e.duet.aweme.aweme_id,uniqueId:null!==(t=null==d?void 0:d.uniqueId)&&void 0!==t?t:"",secUid:null==d?void 0:d.secUid}),p=(0,Cn.yl)({uniqueId:null!==(i=null==d?void 0:d.uniqueId)&&void 0!==i?i:"",secUid:null==d?void 0:d.secUid}),u=ag({uniqueId:null==d?void 0:d.uniqueId,enter_method:"click_head"}),g=ag({uniqueId:null==d?void 0:d.uniqueId,enter_method:"click_name"}),h=og({href:c,shouldUsePush:!0,beforeStart:sg({vid:e.duet.aweme.aweme_id,authorId:e.duet.aweme.author.uid})});return d?(0,m.jsxs)(rg,Object.assign({"data-e2e":"inbox-list-item",onClick:h},{children:[(0,m.jsx)(En.v,Object.assign({to:p,onClick:u},{children:(0,m.jsx)(dg,{size:48,src:d.avatarThumb,alt:""},void 0)}),void 0),(0,m.jsxs)(gg,{children:[(0,m.jsx)(vg,Object.assign({"data-e2e":"inbox-title",to:p,onClick:g},{children:d.uniqueId}),void 0),(0,m.jsxs)(yg,Object.assign({"data-e2e":"inbox-content"},{children:[r("Inbox_created_a_duet_with_you").replace(/%(s|#)/g,"")," ",l(1e3*Number(e.create_time))]}),void 0)]},void 0),(0,m.jsx)(pg,{style:{backgroundImage:`url(${null===(s=null===(a=null===(n=null===(o=e.duet.aweme)||void 0===o?void 0:o.video)||void 0===n?void 0:n.cover)||void 0===a?void 0:a.url_list)||void 0===s?void 0:s[0]})`}},void 0)]}),void 0):(0,Oo.G)(["user"])})),jg=(0,U.memo)((function({item:e}){var t,i,o;const n=(0,ee.mp)(V.G,{selector:e=>{const{lang:t}=e;return"ja-JP"===t||"zh-Hant-TW"===t||"zh-Hans"===t?"。":"."},dependencies:[]}),{t:a,timeTranslator:s}=(0,gu.e)(),r=(0,ee.mp)(un.z,{selector:t=>{var i;return t.users[null!==(i=e.follow.from_user.unique_id)&&void 0!==i?i:""]},dependencies:[e.follow.from_user.unique_id]}),{handleFollow:l,isFollowing:d,text:p,relation:u}=(0,In.wB)({uniqueId:null!==(t=null==r?void 0:r.uniqueId)&&void 0!==t?t:"",followerStatus:null===(i=null==r?void 0:r.extraInfo)||void 0===i?void 0:i.followerStatus,prevent:!0,teaParams:{enter_from:"homepage_message",page_name:"homepage_message",page_type:c.W.commonParams.page_name,previous_page:c.W.commonParams.page_name}}),g=(0,U.useCallback)((e=>{13!==e.keyCode&&32!==e.keyCode||l(e)}),[l]),h=0===e.follow.follow_button_type?a("Inbox_is_following_you").replace(/%s/g,"")+n:a("Inbox_started_following_you").replace(/%s/g,"")+n,_=s(1e3*Number(e.create_time)),v=(0,Cn.yl)({uniqueId:null!==(o=null==r?void 0:r.uniqueId)&&void 0!==o?o:"",secUid:null==r?void 0:r.secUid}),y=og({href:v,shouldUsePush:!0,beforeStart:ag({uniqueId:e.follow.from_user.unique_id,enter_method:"click_noti",shouldHandleDom:!0})});return r?(0,m.jsxs)(rg,Object.assign({"data-e2e":"inbox-list-item",onClick:y},{children:[(0,m.jsx)(uc.q,{size:48,src:r.avatarThumb,style:{flex:"0 0 48px"},"data-method":"click_head",alt:""},void 0),(0,m.jsxs)(gg,{children:[(0,m.jsx)(_g,Object.assign({"data-e2e":"inbox-title",href:v,onClick:Ui.PF,"data-method":"click_name"},{children:r.uniqueId}),void 0),(0,m.jsxs)(yg,Object.assign({"data-e2e":"inbox-content"},{children:[h," ",_]}),void 0)]},void 0),(0,m.jsxs)(cg,Object.assign({"data-e2e":2===u?"":"follow-back",onClick:l,onKeyDown:g,size:"tiny",buttonTheme:d?"default":"primary"},{children:[2===u?(0,m.jsx)(wn.Z,{},void 0):null,p]}),void 0)]}),void 0):(0,Oo.G)(["user"])}));var Pg,Tg=i(73487),Og=i(78772);!function(e){e[e.Single=48]="Single",e[e.Multiple=36]="Multiple"}(Pg||(Pg={}));const Lg=(0,U.memo)((function({item:e,onClick:t}){var i,o,n;const a=(0,ee.mp)(un.z,{selector:t=>{var i;return null===(i=e.digg.from_user)||void 0===i?void 0:i.map((({unique_id:e})=>t.users[null!=e?e:""]))},dependencies:[e.digg.from_user]}),s=`/@${e.digg.aweme.author.uid}/video/${e.digg.aweme.aweme_id}`,r=(0,U.useCallback)((i=>{i.preventDefault(),i.stopPropagation(),t(e)}),[e,t]),l=(0,U.useCallback)((t=>{t.stopPropagation(),Sn.W.handleEnterVideo({enter_method:"click_noti",group_id:e.digg.aweme.aweme_id,to_group_id:e.digg.aweme.aweme_id,to_author_id:e.digg.aweme.author.uid})}),[e.digg.aweme.author.uid,e.digg.aweme.aweme_id]);return(0,m.jsxs)(rg,Object.assign({"data-e2e":"inbox-list-item",onClick:r},{children:[(0,m.jsx)(Ig,{users:a},void 0),(0,m.jsxs)(gg,{children:[(0,m.jsx)(hg,Object.assign({"data-e2e":"inbox-title",onClick:Ui.UW},{children:(0,m.jsx)(Eg,{users:a,merge_count:e.digg.merge_count},void 0)}),void 0),(0,m.jsx)(Ag,{item:e},void 0)]},void 0),(0,m.jsx)(ug,{onClick:l,to:s,style:{backgroundImage:`url(${null===(n=null===(o=null===(i=e.digg.aweme)||void 0===i?void 0:i.video)||void 0===o?void 0:o.cover.url_list)||void 0===n?void 0:n[0]})`}},void 0)]}),void 0)})),Ig=(0,U.memo)((function({users:e}){var t,i,o,n,a;const s=Boolean(null==e?void 0:e[1]),r=ag({uniqueId:null===(t=null==e?void 0:e[0])||void 0===t?void 0:t.uniqueId,enter_method:"click_head"});if(!s){const{uniqueId:t="",secUid:n}=null!==(i=null==e?void 0:e[0])&&void 0!==i?i:{},a=(0,Cn.yl)({uniqueId:t,secUid:n});return(0,m.jsx)(lg,Object.assign({onClick:Ui.UW},{children:(0,m.jsx)(Tg.rU,Object.assign({to:a,onClick:r},{children:(0,m.jsx)(dg,{size:48,src:null===(o=null==e?void 0:e[0])||void 0===o?void 0:o.avatarThumb,alt:""},void 0)}),void 0)}),void 0)}return(0,m.jsxs)(lg,Object.assign({"data-e2e":"inbox-avatar-multiple"},{children:[(0,m.jsx)(dg,{size:36,multiple:!0,src:null===(n=null==e?void 0:e[1])||void 0===n?void 0:n.avatarThumb,alt:""},void 0),(0,m.jsx)(dg,{size:36,multiple:!0,src:null===(a=null==e?void 0:e[0])||void 0===a?void 0:a.avatarThumb,alt:""},void 0)]}),void 0)})),Ag=(0,U.memo)((function({item:e}){var t,i,o,n;const{t:a,timeTranslator:s}=(0,gu.e)(),r=(0,ee.mp)(V.G,{selector:e=>{const{lang:t}=e;return"ja-JP"===t||"zh-Hant-TW"===t||"zh-Hans"===t?"。":"."},dependencies:[]}),l=(0,Og.Af)(),d=void 0!==e.digg.aweme.image_post_info,c=s(1e3*Number(e.create_time),!0);if(1===e.digg.digg_type){if(d&&l){const n=null!==(o=null===(i=null===(t=e.digg.aweme.image_post_info)||void 0===t?void 0:t.images)||void 0===i?void 0:i.length)&&void 0!==o?o:0;return(0,m.jsxs)(yg,Object.assign({"data-e2e":"inbox-content"},{children:[a("photomode_inbox_liked",{num:n})," ",c]}),void 0)}return(0,m.jsxs)(yg,Object.assign({"data-e2e":"inbox-content"},{children:[a("Inbox_liked_your_video").replace(/%s/g,"")+r," ",c]}),void 0)}if(3===e.digg.digg_type){const{text:t,user:i}=null!==(n=e.digg.comment)&&void 0!==n?n:{};return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(yg,Object.assign({"data-e2e":"inbox-content"},{children:[a("Inbox_liked_your_comment").replace(/%s/g,"")+r," ",c]}),void 0),(0,m.jsxs)(fg,{children:[null==i?void 0:i.unique_id,": ",t]},void 0)]},void 0)}return null})),Eg=function({merge_count:e,users:t}){const i=(0,ji.Q)();return(null==t?void 0:t[1])?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(Mg,{user:null==t?void 0:t[0]},void 0),","," ",(0,m.jsx)(Mg,{user:null==t?void 0:t[1]},void 0),"number"==typeof e&&e>2&&(0,m.jsxs)(m.Fragment,{children:[" ",i("Inbox_and")," ",i("Inbox_others").replace(/%d/,String(e-2))]},void 0)]},void 0):(0,m.jsx)(Mg,{user:null==t?void 0:t[0]},void 0)},Mg=function({user:e}){const t=ag({uniqueId:null==e?void 0:e.uniqueId,enter_method:"click_name"});if(!e)return null;const{uniqueId:i,secUid:o}=e,n=(0,Cn.yl)({uniqueId:i,secUid:o});return(0,m.jsx)(Tg.rU,Object.assign({to:n,onClick:t},{children:e.uniqueId}),void 0)},Rg=(0,U.memo)((function({item:e}){var t,i,o,n,a,s,r;const l=(0,ee.mp)(un.z,{selector:t=>{var i,o;return t.users[null!==(o=null===(i=e.at.user_info)||void 0===i?void 0:i.unique_id)&&void 0!==o?o:""]},dependencies:[e]}),d=e.at.aweme,c=`/@${null==d?void 0:d.author.uid}/video/${null==d?void 0:d.aweme_id}`,p=(0,Cn.yl)({uniqueId:null!==(t=null==l?void 0:l.uniqueId)&&void 0!==t?t:"",secUid:null==l?void 0:l.secUid}),{schema_url:u}=e.at,g=(null!==(i=null==u?void 0:u.match(/cid=(\d+)/))&&void 0!==i?i:[])[1],h=(null!==(o=null==u?void 0:u.match(/detail\/(\d+)/))&&void 0!==o?o:[])[1],_=(0,U.useMemo)((()=>{if(g)return{browserMode:!0,cid:g,vid:h}}),[g,h]),v=sg({vid:null==d?void 0:d.aweme_id,authorId:null==d?void 0:d.author.uid}),y=ag({uniqueId:null==l?void 0:l.uniqueId,onClick:Ui.UW,enter_method:"click_head"}),b=ag({uniqueId:null==l?void 0:l.uniqueId,onClick:Ui.UW,enter_method:"click_name"}),f=og({href:`${c}?browserMode=1`,state:_,shouldUsePush:!0,beforeStart:(0,U.useCallback)((()=>{v(),g&&Vr.To.setItem("highlight_comment",{id:g,groupId:h,show:!0})}),[g,v,h])}),x=(0,U.useCallback)((e=>{e.stopPropagation(),Sn.W.handleEnterVideo({enter_method:"click_noti",group_id:null==d?void 0:d.aweme_id,to_group_id:null==d?void 0:d.aweme_id,to_author_id:null==d?void 0:d.author.uid})}),[null==d?void 0:d.author.uid,null==d?void 0:d.aweme_id]);return l?(0,m.jsxs)(rg,Object.assign({"data-e2e":"inbox-list-item",onClick:f},{children:[(0,m.jsx)(En.v,Object.assign({to:p,onClick:y},{children:(0,m.jsx)(dg,{size:48,src:l.avatarThumb,alt:""},void 0)}),void 0),(0,m.jsxs)(gg,{children:[(0,m.jsx)(vg,Object.assign({"data-e2e":"inbox-title",to:p,onClick:b},{children:l.uniqueId}),void 0),(0,m.jsx)(Fg,{item:e},void 0)]},void 0),(0,m.jsx)(En.v,Object.assign({to:c,onClick:x},{children:(0,m.jsx)(pg,{style:{backgroundImage:`url(${null===(r=null===(s=null===(a=null===(n=e.at.aweme)||void 0===n?void 0:n.video)||void 0===a?void 0:a.cover)||void 0===s?void 0:s.url_list)||void 0===r?void 0:r[0]})`}},void 0)}),void 0)]}),void 0):(0,Oo.G)(["user"])})),Fg=({item:e})=>{var t,i,o,n;const{t:a,timeTranslator:s}=(0,gu.e)(),{create_time:r,at:l}=e,{sub_type:d,content:c,reply_comment:p,aweme:u}=l,g=(0,Og.Af)(),h=void 0!==(null==u?void 0:u.image_post_info),_=(0,m.jsxs)(m.Fragment,{children:[" ",s(1e3*Number(r))]},void 0);if(1===d){if(h&&g){const e=null!==(o=null===(i=null===(t=null==u?void 0:u.image_post_info)||void 0===t?void 0:t.images)||void 0===i?void 0:i.length)&&void 0!==o?o:0;return(0,m.jsxs)(yg,Object.assign({"data-e2e":"inbox-content"},{children:[a("in_app_push_mention_in_photo",{num:e}),_]}),void 0)}return(0,m.jsxs)(yg,Object.assign({"data-e2e":"inbox-content"},{children:[a("Inbox_mentioned_you_in_a_video").replace(/%(s|#)/g,""),_]}),void 0)}return 2===d?(0,m.jsxs)(yg,Object.assign({"data-e2e":"inbox-content"},{children:[(0,m.jsx)(bg,{children:a("Inbox_mentioned_you_in_a_comment").replace("%@"," ").replace("%#","")+c},void 0),_]}),void 0):5===d?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(yg,Object.assign({"data-e2e":"inbox-content"},{children:[(0,m.jsx)(bg,{children:a("Inbox_replied_to_your_comment").replace("%s","")+c},void 0),_]}),void 0),(0,m.jsx)(fg,{children:null!==(n=null==p?void 0:p.text)&&void 0!==n?n:""},void 0)]},void 0):null},Dg=(0,U.memo)((function({item:e,onLikeClick:t,onReportInboxClick:i}){const o=(0,U.useCallback)((e=>{t(e)}),[t]);return Pp(e)?(0,m.jsx)(jg,{item:e},void 0):Tp(e)?(0,m.jsx)(Lg,{item:e,onClick:o},void 0):Op(e)?(0,m.jsx)(wg,{item:e},void 0):Lp(e)?(0,m.jsx)(Cg,{item:e},void 0):Ip(e)?(0,m.jsx)(Rg,{item:e},void 0):Ap(e)?(0,m.jsx)(tg,{item:e,onClick:i},void 0):null})),Bg=(0,U.memo)((function({uniqueId:e}){var t;const i=(0,ji.Q)(),o=(0,ee.mp)(un.z,{selector:t=>t.users[e],dependencies:[e]}),n=(0,ee.qj)(Fp),a=(0,U.useCallback)((t=>i=>{i.preventDefault(),i.stopPropagation(),n.postFollowReply({approveOrReject:t,uniqueId:e,uid:null==o?void 0:o.id})}),[n,e,null==o?void 0:o.id]),s=(0,U.useCallback)((t=>i=>{13!==i.keyCode&&32!==i.keyCode||(i.preventDefault(),i.stopPropagation(),n.postFollowReply({approveOrReject:t,uniqueId:e,uid:null==o?void 0:o.id}))}),[n,e,null==o?void 0:o.id]),r=(0,Cn.yl)({uniqueId:null!==(t=null==o?void 0:o.uniqueId)&&void 0!==t?t:"",secUid:null==o?void 0:o.secUid}),l=og({href:r,shouldUsePush:!0,beforeStart:ag({uniqueId:null==o?void 0:o.uniqueId,enter_method:"click_noti",enter_from:"follow_request_page",previous_page:"homepage_message",shouldHandleDom:!0})}),d=function({uniqueId:e,onKeyDown:t,enter_method:i,enter_from:o,previous_page:n,shouldHandleDom:a}){const s=(0,ee.mp)(V.G,{selector:t=>{var i;const{appContext:o}=t;return(null==o?void 0:o.user)&&(null===(i=null==o?void 0:o.user)||void 0===i?void 0:i.uniqueId)===e},dependencies:[e]});return(0,U.useCallback)((e=>{var r;let l=i;a&&(l=null!==(r=ng(e))&&void 0!==r?r:i),null==t||t(e);const d={enter_method:l,page_name:null!=o?o:"homepage_message",enter_from:null!=o?o:"homepage_message",previous_page:null!=n?n:c.W.commonParams.page_name};s?Sn.W.handleEnterProfile(d):Sn.W.handleEnterUser(d)}),[i,a,t,s,o,n])}({uniqueId:null==o?void 0:o.uniqueId,enter_method:"click_noti",enter_from:"follow_request_page",previous_page:"homepage_message",shouldHandleDom:!0}),p=function({beforeStart:e,href:t,shouldUsePush:i,state:o}){const n=(0,qu.e)();return t=(0,ig.ot)(t),(0,U.useCallback)((a=>{null==e||e(a),n(a,{href:t,shouldUsePush:i,state:o})}),[e,n,t,i,o])}({href:r,shouldUsePush:!0,beforeStart:d}),u=(0,U.useCallback)((e=>{13!==e.keyCode&&32!==e.keyCode||(e.preventDefault(),e.stopPropagation(),p(e))}),[p]);return o?(0,m.jsxs)(rg,Object.assign({"data-e2e":"inbox-list-item",onClick:l,onKeyDown:u,tabIndex:0,role:"listitem","aria-label":`Go to ${o.nickname}'s page`},{children:[(0,m.jsx)(dg,{size:48,src:o.avatarThumb,"data-method":"click_head",alt:""},void 0),(0,m.jsxs)(gg,{children:[(0,m.jsx)(_g,Object.assign({"data-e2e":"inbox-title",href:r,onClick:Ui.PF,"data-method":"click_name",tabIndex:-1},{children:o.uniqueId}),void 0),(0,m.jsx)(yg,{children:o.nickname},void 0),(0,m.jsxs)(xg,{children:[(0,m.jsx)(kg,Object.assign({size:"tiny",onClick:a(1),onKeyDown:s(1),"aria-label":i("delete")},{children:i("delete")}),void 0),(0,m.jsx)(kg,Object.assign({"data-e2e":"inbox-request-accept",size:"tiny",buttonTheme:"primary",onClick:a(0),onKeyDown:s(0),"aria-label":i("inbox_request_accept")},{children:i("inbox_request_accept")}),void 0)]},void 0)]},void 0)]}),void 0):(0,Oo.G)(["user"])}));var zg=i(45274);const Ng=(0,We.Z)("div",{target:"e11z9zg00"})({flex:"1 1 auto",overflow:"auto"},"label:DivInboxContentContainer;"),Ug=(0,We.Z)("p",{target:"e11z9zg01"})((({theme:e})=>(0,$e.GI)({theme:e,typography:"P3",fontWeight:"semiBold",color:"TextTertiary"})),{padding:"0 16px",marginTop:"8px"},"label:PTimeGroupTitle;"),Wg=(0,We.Z)(En.v,{target:"e11z9zg02"})({display:"block",width:"54px",height:"72px",background:"center no-repeat",backgroundSize:"cover",borderRadius:"2px",margin:"auto"},"label:StyledAnchor;"),$g=(0,We.Z)("p",{target:"e11z9zg03"})((({theme:e})=>(0,$e.GI)({theme:e,typography:"H6",color:"TextTertiary"})),$e.wj,{padding:"8px 48px 2px"},"label:PCommentText;"),qg=(0,We.Z)("div",{target:"e11z9zg04"})((({theme:{colors:e}})=>({height:"1px",background:e.LineSecondary,transform:"scaleY(0.5)",margin:"8px 16px"})),"label:DivSplit;"),Hg=(0,We.Z)("div",{target:"e11z9zg05"})({cursor:"pointer",display:"flex",flexDirection:"row",alignItems:"center",marginBottom:"8px"},(({theme:{direction:e}})=>(0,$e.YJ)({direction:e,marginStart:"16px",marginEnd:"auto"})),"label:DivBack;"),Gg=(0,We.Z)(zg.Z,{target:"e11z9zg06"})((({theme:{direction:e}})=>"ltr"===e?null:{transform:"rotate(180deg)"}),"label:StyledChevronLeftOffset;"),Zg=(0,We.Z)("div",{target:"e11z9zg07"})((({theme:e})=>(0,$e.GI)({theme:e,typography:"P3"})),{padding:"8px 24px 8px 16px",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",cursor:"pointer"},"label:DivFollowReqEntranceContainer;"),Vg=(0,We.Z)("span",{target:"e11z9zg08"})({display:"flex",flexDirection:"row",alignItems:"center"},"label:SpanHintContainer;"),Qg=(0,We.Z)("i",{target:"e11z9zg09"})((({theme:{colors:e,direction:t}})=>[{width:"8px",height:"8px",borderRadius:"8px",background:e.Primary},(0,$e.YJ)({direction:t,marginEnd:"8px"})]),"label:IDot;"),Yg=(0,We.Z)("span",{target:"e11z9zg010"})((({theme:{colors:e,direction:t}})=>[{color:e.TextTertiary,marginRight:"8px"},(0,$e.YJ)({direction:t,marginEnd:"8px"})]),"label:SpanHintText;"),Kg=(0,We.Z)("ul",{target:"e11z9zg011"})({padding:0,margin:0,listStyleType:"none"},"label:UlInboxItemListContainer;"),Jg=(0,We.Z)("li",{target:"e11z9zg012"})({padding:0,margin:0,listStyleType:"none"},"label:LiInboxItemWrapper;"),Xg=(0,U.memo)((function(e){const t=(0,ji.Q)(),i=(0,U.useMemo)((()=>t("Back")),[t]);return(0,m.jsxs)(Hg,Object.assign({"data-e2e":"inbox-second-back",onClick:e.onClickBack,onKeyDown:e.onBackKeyDown,tabIndex:0,role:"button","aria-label":i},{children:[(0,m.jsx)(zg.Z,{},void 0),(0,m.jsx)("span",{children:i},void 0)]}),void 0)})),em=(0,U.memo)((function(e){const{item:t}=e;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(Xg,{onClickBack:e.onClickBack,onBackKeyDown:e.onBackKeyDown},void 0),(0,m.jsx)(Ng,Object.assign({"data-e2e":"inbox-list",role:"list"},{children:t.users.map((e=>(0,m.jsx)(Bg,{uniqueId:e},e)))}),void 0)]},void 0)}));var tm=i(26378);const im=(0,U.memo)((function(e){const{total:t}=e,i=(0,ji.Q)(),{colors:o}=(0,_.u)();return(0,m.jsxs)(Zg,Object.assign({"data-e2e":"inbox-follow-request",onClick:e.onClick,onKeyDown:e.onKeyDown,tabIndex:0,role:"button","aria-labelledby":"inbox-follow-req-entrance-header"},{children:[(0,m.jsx)("h4",Object.assign({id:"inbox-follow-req-entrance-header"},{children:i("Inbox_Follow_requests")}),void 0),(0,m.jsxs)(Vg,{children:[(0,m.jsx)(Qg,{},void 0),(0,m.jsx)(Yg,{children:t},void 0),(0,m.jsx)(tm.Z,{fill:o.TextTertiary,width:12,height:12},void 0)]},void 0)]}),void 0)})),om=(0,U.memo)((function({uniqueId:e}){var t;const i=(0,ee.mp)(un.z,{selector:t=>t.users[e],dependencies:[e]}),{handleFollow:o,isFollowing:n,text:a,relation:s}=(0,In.wB)({uniqueId:e,prevent:!0,teaParams:{enter_from:"homepage_message"}}),r=(0,U.useCallback)((e=>{13!==e.keyCode&&32!==e.keyCode||o(e)}),[o]),l=(0,Cn.yl)({uniqueId:null!==(t=null==i?void 0:i.uniqueId)&&void 0!==t?t:"",secUid:null==i?void 0:i.secUid}),d=og({href:l,shouldUsePush:!0,beforeStart:ag({uniqueId:e,enter_method:"click_noti",shouldHandleDom:!0})});return i?(0,m.jsxs)(rg,Object.assign({"data-e2e":"inbox-list-item",onClick:d},{children:[(0,m.jsx)(dg,{size:48,src:i.avatarThumb,"data-method":"click_head",alt:""},void 0),(0,m.jsxs)(gg,{children:[(0,m.jsx)(_g,Object.assign({"data-e2e":"inbox-title",href:l,onClick:Ui.PF,"data-method":"click_name"},{children:i.uniqueId}),void 0),(0,m.jsx)(yg,Object.assign({"data-e2e":"inbox-content"},{children:i.nickname}),void 0)]},void 0),(0,m.jsxs)(cg,Object.assign({onClick:o,onKeyDown:r,size:"tiny",buttonTheme:n?"default":"primary"},{children:[2===s?(0,m.jsx)(wn.Z,{},void 0):null,a]}),void 0)]}),void 0):(0,Oo.G)(["user"])})),nm=(0,U.memo)((function(e){var t,i,o;const{item:n}=e,a=(0,ji.Q)(),[{loading:s,users:r},l]=(0,ee.b7)(Fp,{selector:e=>e.diggList,dependencies:[]});(0,U.useEffect)((()=>{var e,t;return l.fetchDiggListData({ref_id:null!==(t=null===(e=n.digg.comment)||void 0===e?void 0:e.cid)&&void 0!==t?t:n.digg.aweme.aweme_id}),()=>{l.setDiggList([]),l.setDiggListLoading(!1)}}),[l,n.digg.aweme.aweme_id,null===(t=n.digg.comment)||void 0===t?void 0:t.cid]);const d=(0,U.useCallback)((()=>s&&!r.length?(0,m.jsx)(_i.g,{size:"small",center:!0},void 0):r.map((e=>(0,m.jsx)(om,{uniqueId:e},e)))),[s,r]),c=(0,ig.ot)(`/@${n.digg.aweme.author.uid}/video/${n.digg.aweme.aweme_id}`),p=(0,U.useCallback)((()=>{location.href=c}),[c]);return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(Hg,Object.assign({"data-e2e":"inbox-second-back",onClick:e.onClickBack,onKeyDown:e.onBackKeyDown,tabIndex:0,role:"button","aria-label":a("Back")},{children:[(0,m.jsx)(Gg,{},void 0),(0,m.jsx)("span",{children:a("Back")},void 0)]}),void 0),(0,m.jsxs)(Ng,Object.assign({"data-e2e":"inbox-list"},{children:[(0,m.jsx)(Wg,{to:c,style:{backgroundImage:`url(${null===(i=n.digg.aweme.video.cover.url_list)||void 0===i?void 0:i[0]})`},onClick:p},void 0),(null===(o=n.digg.comment)||void 0===o?void 0:o.text)&&(0,m.jsx)($g,{children:n.digg.comment.text},void 0),(0,m.jsx)(qg,{},void 0),d()]}),void 0)]},void 0)}));var am;!function(e){e[e.New=0]="New",e[e.Today=1]="Today",e[e.Yesterday=2]="Yesterday",e[e.ThisWeek=3]="ThisWeek",e[e.ThisMonth=4]="ThisMonth",e[e.Previous=5]="Previous"}(am||(am={}));const sm={0:"Inbox_New",1:"Inbox_Today",2:"Inbox_Yesterday",3:"Inbox_This_Week",4:"Inbox_This_Month",5:"Inbox_Previous"},rm=[0,1,6,(new Date).getDate()].map((e=>function(e=0){return(new Date).setHours(0,0,0,0)/1e3-86400*e}(e))),lm=e=>{if(!e||!e.has_read)return 0;const t=rm.findIndex((t=>t<e.create_time));return-1===t?5:t+1},dm=(0,U.memo)((function(e){var t;const{activeGroup:i,item:o,likeItem:n,reportInboxList:a,onLikeItemChange:s,followItem:r,showFollow:l,onFollowChange:d,onHitBottom:c,onReportInboxClick:p}=e,u=(0,ae.fz)(Sp),g=(0,U.useCallback)((()=>{s(null)}),[s]),h=(0,U.useCallback)((e=>{13!==e.keyCode&&32!==e.keyCode||s(null)}),[s]),_=(0,U.useRef)(null);(0,$u.s)({elementRef:_,onHitBottom:c,threshold:100});const v=(0,U.useCallback)((()=>{d(!1)}),[d]),y=(0,U.useCallback)((e=>{13!==e.keyCode&&32!==e.keyCode||d(!1)}),[d]),b=(0,U.useCallback)((()=>{d(!0),u.handleEnterFollow({request_cnt:Number(r.total)})}),[r.total,d,u]),f=(0,U.useCallback)((e=>{13!==e.keyCode&&32!==e.keyCode||b()}),[b]);return n?(0,m.jsx)(nm,{item:n,onClickBack:g,onBackKeyDown:h},void 0):l?(0,m.jsx)(em,{onClickBack:v,onBackKeyDown:y,item:r},void 0):(0,m.jsxs)(Ng,Object.assign({"data-e2e":"inbox-list",id:"header-inbox-list",ref:_,tabIndex:0,role:"tabpanel","aria-labelledby":`inbox-tab-${Nu.indexOf(i)}`},{children:[500===i&&Boolean(r.total)&&(0,m.jsx)(im,{onClick:b,onKeyDown:f,total:r.total},void 0),(0,m.jsx)(pm,{item:o,onLikeItemChange:e.onLikeItemChange,reportInboxList:a,activeGroup:i,onReportInboxClick:p},void 0),Boolean(null===(t=o.notice_list)||void 0===t?void 0:t.length)&&o.loading&&(0,m.jsx)(_i.g,{center:!0,size:"small"},void 0)]}),void 0)})),cm={preventDefault:Wu()},pm=(0,U.memo)((function({item:e,onLikeItemChange:t,activeGroup:i,reportInboxList:o,onReportInboxClick:n}){var a;const s=(0,ji.Q)(),r=o[0],l=(0,ae.fz)(Sp),d=(0,qu.e)(),c=(0,U.useCallback)((e=>{var o,n,a;if(3===(null==e?void 0:e.digg.digg_type)||1===(null===(o=null==e?void 0:e.digg.from_user)||void 0===o?void 0:o.length)){const t=`/@${e.digg.aweme.author.uid}/video/${e.digg.aweme.aweme_id}`;let i;return 3===e.digg.digg_type&&(null===(n=e.digg.comment)||void 0===n?void 0:n.cid)&&(Vr.To.setItem("highlight_comment",{id:e.digg.comment.cid,groupId:e.digg.aweme.aweme_id,show:!0}),i={browserMode:!0,cid:e.digg.comment.cid,vid:e.digg.aweme.aweme_id}),Sn.W.handleEnterVideo({enter_method:"click_noti",group_id:e.digg.aweme.aweme_id,to_group_id:e.digg.aweme.aweme_id,to_author_id:e.digg.aweme.author.uid}),void d(cm,{href:t,state:i,shouldUsePush:!0})}t(e),l.handleEnterFold({tab_name:500===i?"all":"likes",group_id:null!==(a=null==e?void 0:e.digg.aweme.aweme_id)&&void 0!==a?a:""})}),[i,d,t,l]),p=(0,U.useMemo)((()=>{var t;if(500!==i||!r)return e.notice_list;const o=lm(r),n=(null!==(t=e.notice_list)&&void 0!==t?t:[]).slice();for(let e=0;e<n.length;e++){const t=n[e],i=lm(t);if(0===o&&0!==i)return n.splice(e,0,r),n;if(r.create_time>t.create_time)return n.splice(e,0,r),n}return n.push(r),n}),[i,r,e.notice_list]);let u=lm(null==p?void 0:p[0]);const g=(0,U.useMemo)((()=>{const e=[];let t=0;return(null==p?void 0:p.length)?(null==p||p.map(((i,o)=>((0===o||0===u&&i.has_read||i.create_time<rm[u-1])&&(u=lm(i),0!==o&&e.push(p.slice(t,o)),t=o),i))),t<p.length&&e.push(p.slice(t)),e):null}),[u,p]);return e.loading&&!(null===(a=e.notice_list)||void 0===a?void 0:a.length)?(0,m.jsx)(_i.g,{center:!0,size:"small"},void 0):(null==g?void 0:g.length)&&(null==p?void 0:p.length)?(0,m.jsx)(m.Fragment,{children:null==g?void 0:g.map((e=>{const t=lm(e[0]),i=(0,m.jsx)(Ug,{children:s(sm[t])},t);return(0,m.jsxs)(m.Fragment,{children:[i,(0,m.jsx)(Kg,{children:e.map((e=>(0,m.jsx)(Jg,{children:(0,m.jsx)(Dg,{item:e,onLikeClick:c,onReportInboxClick:n},void 0)},e.nid)))},void 0)]},void 0)}))},void 0):(0,m.jsx)(eg,{type:i},void 0)})),um=(0,We.Z)("div",{target:"e1bp8k4k0"})((({theme:{direction:e}})=>[{paddingTop:"24px",flex:"0 0 auto"},(0,$e.YJ)({direction:e,paddingStart:"16px"})]),"label:DivInboxHeaderContainer;"),gm=(0,We.Z)("h2",{target:"e1bp8k4k1"})((({theme:e})=>(0,$e.GI)({theme:e,fontFamily:"Sofia",fontWeight:"bold",typography:"H4",color:"TextPrimary"})),"label:H2InboxTitle;"),mm=(0,We.Z)("div",{target:"e1bp8k4k2"})((({theme:e})=>(0,$e.GI)({theme:e,fontFamily:"Proxima",fontWeight:"semiBold",typography:"P3",color:"TextPrimary"})),{marginTop:"16px",display:"flex",flexDirection:"row",flexWrap:"wrap"},"label:DivGroupContainer;"),hm=e=>({0:{color:e.TextPrimary,background:e.BGPlaceholderDefault,":hover":{background:e.ShadowPrimary}},1:{color:e.BGPrimary,background:e.TextPrimary}}),_m=(0,We.Z)("button",{target:"e1bp8k4k3"})((({theme:{colors:e,direction:t},active:i})=>[hm(e)[Number(i)],{":not(:last-child)":[(0,$e.YJ)({direction:t,marginEnd:"8px"})]}]),{border:"none",padding:"2px 8px",marginBottom:"12px",textAlign:"center",cursor:"pointer",borderRadius:"12px",transition:"all 300ms","&:focus-visible":{outline:"2px solid #5E9ED6"}},"label:ButtonGroupItem;"),vm={500:"Inbox_All",3:"Inbox_Likes",2:"Inbox_Comments",6:"Inbox_Mentions",7:"Followers"},ym=["all","likes","comments","mentions","followers"],bm=(0,U.memo)((0,U.forwardRef)((({value:e,onChange:t,onKeyDown:i},o)=>{const n=(0,ji.Q)(),a=(0,U.useCallback)((e=>()=>{t(e)}),[t]),s=(0,U.useRef)(null),r=(0,U.useCallback)((e=>{var t,i;null===(i=null===(t=s.current)||void 0===t?void 0:t.children[Nu.indexOf(e)])||void 0===i||i.focus()}),[]);return(0,U.useImperativeHandle)(o,(()=>({setFocus:r}))),(0,m.jsxs)(um,{children:[(0,m.jsx)(gm,Object.assign({id:"header-inbox-title"},{children:n("Inbox_Notifications")}),void 0),(0,m.jsx)(mm,Object.assign({"data-e2e":"inbox-bar",id:"header-inbox-bar",onKeyDown:i,ref:s,role:"tablist","aria-labelledby":"header-inbox-title"},{children:Nu.map(((t,i)=>(0,m.jsx)(_m,Object.assign({"data-e2e":ym[i],id:`inbox-tab-${i}`,active:t===e,tabIndex:t===e?0:-1,onClick:a(t),role:"tab","aria-selected":t===e,"aria-controls":"header-inbox-list"},{children:n(vm[t])}),t)))}),void 0)]},void 0)}))),fm=(0,We.Z)("div",{target:"e32s1fi0"})({height:"100%",display:"flex",flexDirection:"column"},"label:DivInboxContainer;"),xm=(0,U.memo)((function(){const[e,t]=(0,U.useState)("main"),i=(0,U.useCallback)((()=>{t("report-inbox")}),[]),o=(0,U.useCallback)((()=>{t("main")}),[]),n=(0,ee.mp)(V.G,{selector:e=>{var t,i,o,n,a;return{uid:null!==(o=null===(i=null===(t=e.appContext)||void 0===t?void 0:t.user)||void 0===i?void 0:i.uid)&&void 0!==o?o:"",did:null!==(a=null===(n=e.appContext)||void 0===n?void 0:n.wid)&&void 0!==a?a:""}},dependencies:[]}),a=(0,ee.mp)(Ac,{selector:e=>e.reportInbox.noticeList,dependencies:[]}),[{activeGroup:s,noticeList:r,followRequest:l},d]=(0,ee.b7)(Fp,{selector:e=>{const{activeGroup:t,noticeList:i,followRequest:o}=e;return{activeGroup:t,noticeList:i,followRequest:o}},dependencies:[]}),[c,p]=(0,U.useState)(null),[u,g]=(0,U.useState)(!1),[h,_]=(0,U.useState)(Nu.indexOf(s)),v=(0,U.useCallback)((e=>{d.changeActiveGroup(e),p(null),g(!1),_(Nu.indexOf(e))}),[d]);(0,U.useEffect)((()=>{u||setTimeout((()=>{d.fetchNoticeFollowRequest(Object.assign(Object.assign({},n),{refresh:!0}))}),2e3)}),[d,n,u]),(0,U.useEffect)((()=>{l.has_more||0!==l.total?l.has_more&&l.users.length<=10&&d.fetchNoticeFollowRequest(n):g(!1)}),[d,l.has_more,l.total,l.users.length,n]);const y=(0,U.useRef)(!0),b=(0,U.useRef)(null),f=(0,U.useCallback)((()=>{y.current||(y.current=!0,d.fetchNoticeData())}),[d]),x=(0,U.useCallback)((e=>{var t,i,o,n;switch(e.keyCode){case 39:e.stopPropagation(),e.preventDefault();const a=h<Nu.length-1?h+1:0;_(a),v(Nu[a]),null===(t=b.current)||void 0===t||t.setFocus(Nu[a]);break;case 37:e.stopPropagation(),e.preventDefault();const s=0===h?Nu.length-1:h-1;_(s),v(Nu[s]),null===(i=b.current)||void 0===i||i.setFocus(Nu[s]);break;case 36:_(0),v(Nu[0]),null===(o=b.current)||void 0===o||o.setFocus(Nu[0]);break;case 35:_(Nu.length-1),v(Nu[Nu.length-1]),null===(n=b.current)||void 0===n||n.setFocus(Nu[Nu.length-1]);break;default:return}}),[h,v]);return(0,U.useEffect)((()=>{y.current=Boolean(r.loading)}),[r.loading]),"report-inbox"===e?(0,m.jsx)(zu,{onClose:o},void 0):(0,m.jsxs)(fm,Object.assign({"data-e2e":"inbox-notifications"},{children:[(0,m.jsx)(bm,{value:s,onChange:v,onKeyDown:x,ref:b},void 0),(0,m.jsx)(dm,{activeGroup:s,item:r,onHitBottom:f,likeItem:c,onLikeItemChange:p,followItem:l,showFollow:u,onFollowChange:g,reportInboxList:a,onReportInboxClick:i},void 0)]}),void 0)}));var km=i(88725),wm=i(8220),Sm=i(1723);const Cm=(0,be.Z)("div",{target:"e18kkhh40"})((({theme:{direction:e}})=>(0,$e.YJ)({direction:e,marginStart:"16px"})),{position:"relative"},"label:DivHeaderInboxContainer;");Cm.defaultProps=Object.assign(Object.assign({},Cm.defaultProps),{"data-e2e":"inbox-icon"});const jm={cursor:"pointer",display:"block"},Pm=(0,be.Z)(km.Z,{target:"e18kkhh41"})(jm,"label:StyledInboxIcon;"),Tm=(0,be.Z)(wm.Z,{target:"e18kkhh42"})(jm,"label:StyledInboxIconActive;"),Om=(0,be.Z)("sup",{target:"e18kkhh43"})((({long:e,theme:t})=>[(0,$e.GI)({theme:t,fontFamily:"Proxima",typography:"P3",fontWeight:"semiBold",color:"ConstTextInverse"}),(0,$e.YJ)({direction:t.direction,start:"16px"}),{background:t.colors.Primary,minWidth:"20px",height:"20px",display:"flex",justifyContent:"center",borderRadius:"10px",position:"absolute",top:"-20%"},e?{padding:"0 6px"}:{}]),"label:SupBadge;"),Lm=(0,be.Z)("div",{target:"e18kkhh44"})((({theme:e})=>(0,$e.GI)({theme:e,typography:"P4",color:"ConstTextInverse",fontWeight:"semiBold"})),{display:"flex",padding:"12px",fontSize:"12px"},"label:DivTipWrapper;"),Im=(0,be.Z)("span",{target:"e18kkhh47"})({display:"flex",alignItems:"center",justifyContent:"center","& + &":{marginLeft:"16px"},b:{marginLeft:"2px",fontWeight:600}},"label:SpanTipItem;"),Am=(0,be.Z)(Sm.Z,{target:"e18kkhh48"})({position:"absolute",top:"-8px"},(({theme:{direction:e}})=>(0,$e.YJ)({direction:e,end:"70px"})),"label:StyledArrow;"),Em=(0,be.Z)("div",{target:"e18kkhh49"})((({theme:{colors:e,direction:t},state:i,duration:o})=>[{display:i===Yr.Wj?"none":"block",position:"absolute",width:"376px",height:"640px",top:"45px",background:e.BGSecondary,borderRadius:"8px",boxShadow:"0 -4px 32px rgba(0, 0, 0, 0.12)",transition:`all ${o}ms linear`,zIndex:1e3,opacity:Number(i===Yr.cn)},(0,$e.YJ)({direction:t,end:"-66px"})]),"label:DivHeaderInboxWrapper;"),Mm={width:16,height:16},Rm={2:(0,m.jsx)(vp.Z,Object.assign({},Mm),void 0),3:(0,m.jsx)(yp.Z,Object.assign({},Mm),void 0),6:(0,m.jsx)(bp.Z,Object.assign({},Mm),void 0),7:(0,m.jsx)(fp.Z,Object.assign({},Mm),void 0)},Fm=(0,U.memo)((function(){const e=(0,ji.Q)(),t=(0,_.u)(),{pathname:i}=(0,ne.TH)(),[{noticeList:o,reportInboxNoticeCount:n},a]=(0,ee.b7)(Ac,{selector:e=>({noticeList:e.noticeCount,reportInboxNoticeCount:e.reportInbox.count}),dependencies:[]}),[{tooltipPriority:s},r]=(0,ee.b7)(np),{totalText:l,totalLong:d,countList:c,isShowTotal:p,totalUnreadCount:u}=(0,U.useMemo)((()=>{const e=o.reduce(((e,{count:t})=>e+t),0),t=e+n;return{isShowTotal:e>0,totalText:(0,Ee.a1)(t),totalLong:t>10,countList:o.filter((e=>e.count>=0)),totalUnreadCount:t}}),[o,n]),g=function(){const[e,t]=(0,U.useState)(!1);return(0,U.useEffect)((()=>(t(!0),()=>{t(!1)})),[]),e}(),[h,v]=(0,U.useState)(!1);(0,U.useEffect)((()=>{let e;return p&&2===s&&(v(!0),e=window.setTimeout((()=>{v(!1),r.setTooltipPriority(5)}),5e3)),()=>{e&&clearTimeout(e)}}),[s,p,r]);const y=(0,U.useRef)(null),{handleEnter:b}=function({showTip:e}){const t=(0,U.useRef)(0),i=(0,ae.fz)(Sp),{total:o,countList:n}=(0,ee.mp)(Ac,{dependencies:[],selector:e=>{const t=e.noticeCount;return{total:t.reduce(((e,{count:t})=>e+t),0),countList:t.filter((e=>e.count>=0))}}});(0,U.useEffect)((()=>{t.current=Date.now()}),[]);const a=(0,U.useCallback)((()=>{const e=Date.now()-t.current;Sn.W.handleEnterMessage({show_cnt:o,enter_within_30s:e<3e4?1:0})}),[o]);return(0,U.useEffect)((()=>{if(e){const e=n.reduce(((e,{group:t,count:i})=>{switch(t){case 2:e.comment_cnt=i;break;case 3:e.like_cnt=i;break;case 6:e.mention_cnt=i;break;case 7:e.follower_cnt=i}return e}),{like_cnt:0,comment_cnt:0,mention_cnt:0,follower_cnt:0});i.handlePopShow(e)}}),[n,i,e]),{handleEnter:a}}({showTip:h}),[f,x]=(0,U.useState)(!1),k=(0,U.useCallback)((()=>{x(!f),a.setNoticeCount([]),a.setReportInboxNoticeCount(0),f||b()}),[a,b,f]),w=(0,U.useCallback)((e=>{e&&(e.preventDefault(),e.stopPropagation()),k()}),[k]),S=(0,U.useCallback)((e=>{13===e.keyCode||32===e.keyCode?(e.stopPropagation(),e.target===y.current&&k()):27===e.keyCode?f&&x(!1):9===e.keyCode&&(e.shiftKey&&e.target===y.current&&f&&x(!1),setTimeout((()=>{var e,t;!(null===(t=Array.from(null===(e=y.current)||void 0===e?void 0:e.querySelectorAll("*")))||void 0===t?void 0:t.includes(document.activeElement))&&f&&x(!1)}),0))}),[k,f]);(0,U.useEffect)((()=>{-1!==location.search.indexOf("open_inbox=1")&&w()}),[]);const C=(0,U.useMemo)((()=>f?Tm:Pm),[f]),{showModal:j,hideModal:P}=(0,Ll.J)(),T=(0,U.useCallback)((e=>{e.preventDefault(),e.stopPropagation()}),[]),O=(0,U.useCallback)((e=>{32!==e.keyCode&&38!==e.keyCode&&40!==e.keyCode||(e.stopPropagation(),e.preventDefault())}),[]),{region:L,language:I}=(0,Ee.m7)((0,ze.Lh)((()=>["region","language"]),[]));(0,U.useEffect)((()=>{a.fetchNoticeCount(),a.fetchReportInbox({region:L,language:I})}),[a,L,I]);const A=(0,U.useRef)(null),E=(0,U.useRef)(!1),M=(0,U.useCallback)((()=>{j(),E.current=!0}),[j]),R=(0,U.useCallback)((()=>{P(),E.current=!1}),[P]);(0,U.useEffect)((()=>{const e=()=>{E.current||x(!1)};return window.addEventListener("click",e),()=>{window.removeEventListener("click",e)}}),[]),(0,U.useEffect)((()=>{f&&x(!1)}),[i]);const F=(0,U.useRef)(!1),D=(0,ee.qj)(Fp);(0,U.useEffect)((()=>{f&&!F.current&&(D.fetchNoticeData(),F.current=!0)}),[D,f]);const B=(0,U.useCallback)((()=>(P(),!0)),[P]),z=(0,U.useMemo)((()=>e("accessibilityLabels_forYou_btn_inbox",{number:u})),[e,u]);return(0,m.jsxs)(Cm,Object.assign({tabIndex:0,onClick:w,onKeyDown:S,ref:y,role:"button","aria-expanded":f,"aria-label":z},{children:[(0,m.jsx)(ne.NL,{when:f,message:B},void 0),f?(0,m.jsx)(C,{width:32,height:32},void 0):(0,m.jsx)(Zr.u,Object.assign({placement:"bottom",overlay:e("Inbox")},{children:(0,m.jsx)("span",{children:(0,m.jsx)(C,{width:32,height:32},void 0)},void 0)}),void 0),(p||n>0)&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(fs.G,Object.assign({active:h,placement:c.length>2?"bottomRight":"bottom",margin:"-54px",arrowMargin:"52px",backgroundColor:t.colors.Primary},{children:(0,m.jsx)(Lm,{children:c.filter((({count:e})=>e>0)).map((({group:e,count:t})=>(0,m.jsxs)(Im,{children:[Rm[e],(0,m.jsx)("b",{children:(0,Ee.BT)(t)},void 0)]},e)))},void 0)}),void 0),!h&&(0,m.jsx)(Om,Object.assign({long:d},{children:l}),void 0)]},void 0),g&&(0,m.jsx)(Yr.ZP,Object.assign({timeout:200,in:f,nodeRef:A},{children:i=>(0,m.jsx)(_p.ZP,Object.assign({autoFocus:!1,disabled:!f,returnFocus:!0},{children:(0,m.jsxs)(Em,Object.assign({ref:A,state:i,duration:200,onClick:T,onKeyDown:O,onMouseEnter:M,onMouseLeave:R,role:"dialog","aria-label":e("Inbox_Notifications")},{children:[(0,m.jsx)(Am,{width:24,height:8,fill:t.colors.BGSecondary},void 0),(0,m.jsx)(xm,{},void 0)]}),void 0)}),void 0)}),void 0)]}),void 0)})),Dm=({children:e})=>{var t;const[i,o]=(0,U.useState)(!1),n=(0,ae.fz)(Ao),{direction:a}=(0,_.u)(),s=(0,U.useMemo)((()=>({offset:"ltr"===a?[30,20]:[-30,20]})),[a]),r=(0,U.useMemo)((()=>"ltr"===a?"bottomRight":"bottomLeft"),[a]),{tooltipPriority:l}=(0,ee.mp)(np),d=(0,ze.Lh)((()=>["region"]),[]),c=(0,Ne.h)((()=>["liveCenterConfig"]),[]),p=null!==(t=null==d?void 0:d.region)&&void 0!==t?t:"",u=(0,U.useMemo)((()=>{var e,t;return(null!==(t=null===(e=null==c?void 0:c.liveCenterConfig)||void 0===e?void 0:e.showCreatorHubRegion)&&void 0!==t?t:[]).includes(p)}),[c,p]),g=(0,U.useMemo)((()=>({width:180,padding:12,fontSize:14})),[]),h=(0,ji.Q)();(0,U.useEffect)((()=>{if(u){const e=n.getLiveCreatorHubPopup()&&4===l;o(e)}}),[u,n,l]);const v=(0,U.useCallback)((e=>{e||(o(!1),n.setLiveCreatorHubPopup(!0))}),[n]);return(0,m.jsx)(Zr.u,Object.assign({visible:i,trigger:"click",tooltipTheme:"blue",placement:r,align:s,overlay:h("live_creator_hub_home_desc",{},"Explore the endless possibilities of TikTok LIVE. It's the place to be for real-time fun, expression, creativity, and connection."),overlayInnerStyle:g,onVisibleChange:v},{children:e}),void 0)};var Bm=i(17919);const zm=(0,be.Z)("div",{target:"e5vohn00"})({padding:"16px",width:"264px",wordBreak:"break-word"},"label:DivTipWrapper;"),Nm=(0,be.Z)("h3",{target:"e5vohn01"})((({theme:e})=>(0,$e.GI)({theme:e,typography:"P2",color:"ConstTextInverse",fontWeight:"semiBold"})),{marginBottom:"4px"},"label:H3TipTitle;"),Um=(0,be.Z)("p",{target:"e5vohn02"})((({theme:e})=>(0,$e.GI)({theme:e,typography:"P3",color:"ConstTextInverse"})),"label:PTipDesc;"),Wm=(0,be.Z)("div",{target:"e5vohn03"})({display:"flex",justifyContent:"flex-end"},"label:DivButtonWrapper;"),$m=(0,be.Z)(Ga.rU,{target:"e5vohn04"})((({theme:e})=>(0,$e.GI)({theme:e,typography:"P2",color:"ConstTextInverse",fontWeight:"semiBold"})),(({theme:e})=>(0,$e.YJ)({direction:e.direction,marginStart:"16px"})),{color:"#ffffff!important",cursor:"pointer","&:hover":{textDecoration:"none"}},"label:StyledLink;"),qm=(0,be.Z)("button",{target:"e5vohn05"})($e.Ph,(({theme:e})=>(0,$e.GI)({theme:e,typography:"P2",color:"ConstTextInverse",fontWeight:"semiBold"})),{cursor:"pointer"},"label:ButtonCancel;"),Hm=(0,U.memo)((({uniqueId:e,secUid:t,userPopupActive:i})=>{const{colors:o,direction:n}=(0,_.u)(),a=(0,ji.Q)(),{pathname:s}=(0,ne.TH)(),r=(0,ve.Xq)(s),l="fyp"===r?"homepage_hot_tooltip":`${r}_tooltip`,[d,c]=(0,U.useState)(!1),[{tooltipPriority:p},g]=(0,ee.b7)(np),h=(0,ve.bf)(s)&&s.replace("/@","")===e,v=(0,U.useRef)(!1);(0,U.useEffect)((()=>{let e;return d&&(e=window.setTimeout((()=>{v.current=!0,Bm.p.handleCloseProfileTooltip({enter_from:l,close_method:"auto_cancel"}),c(!1)}),5e3)),()=>clearTimeout(e)}),[d]),(0,U.useEffect)((()=>()=>{d&&!v.current&&Bm.p.handleCloseProfileTooltip({enter_from:l,close_method:"other"})}),[d]),(0,U.useEffect)((()=>{(0,Ui.le)(u.S0)||h||3!==p?(c(!1),3===p&&g.setTooltipPriority(4)):(c(!0),Bm.p.handleShowProfileTooltip({enter_from:l}),(0,Ui.D$)(u.S0,"1"))}),[p]),(0,U.useEffect)((()=>{i&&d&&(v.current=!0,Bm.p.handleCloseProfileTooltip({enter_from:l,close_method:"other"}),c(!1))}),[i,l,d]);const y=(0,U.useCallback)((()=>{Bm.p.handleCloseProfileTooltip({enter_from:l,close_method:"edit_profile"}),Bm.p.handleClickEditProfile({enter_from:l}),(0,Ui.D9)(u.OB,l),v.current=!0,c(!1)}),[l]),b=(0,U.useCallback)((()=>{v.current=!0,c(!1),Bm.p.handleCloseProfileTooltip({enter_from:l,close_method:"cancel"})}),[l]),f=(0,ig.ot)({pathname:(0,Cn.yl)({uniqueId:e,secUid:t}),search:{}}),x=(0,U.useMemo)((()=>({pathname:f})),[f]),k="ltr"===n?"bottomRight":"bottomLeft";return(0,m.jsx)(fs.G,Object.assign({active:d,backgroundColor:o.ConstSecondary2,placement:k,arrowMargin:"16px",margin:"-12px"},{children:(0,m.jsxs)(zm,{children:[(0,m.jsx)(Nm,{children:a("editprofile_feedtooltip_title")},void 0),(0,m.jsx)(Um,{children:a("editprofile_feedtooltip_subtitle")},void 0),(0,m.jsxs)(Wm,{children:[(0,m.jsx)(qm,Object.assign({onClick:b},{children:a("editprofile_close")}),void 0),(0,m.jsx)($m,Object.assign({to:x,onClick:y},{children:a("editprofile_editprofile")}),void 0)]},void 0)]},void 0)}),void 0)}));var Gm,Zm=i(22535);!function(e){e.LiveRechargeShow="livesdk_recharge_show",e.LiveRechargeClick="livesdk_recharge_click",e.LiveRechargeCashierShow="livesdk_web_cashier_show",e.LiveRechargePay="livesdk_recharge_pay",e.LiveRechargeSuccess="livesdk_recharge_success",e.LiveRechargeFailed="livesdk_recharge_failed",e.LiveBillingAddressClick="livesdk_billing_address_click",e.LiveWebGetCoinShow="livesdk_web_getcoin_show",e.LiveWebGetCoinClick="livesdk_web_getcoin_click",e.LiveWebPayFeedbackShow="livesdk_web_pay_feedback_show",e.LiveWebPayFeedbackClick="livesdk_web_pay_feedback_click",e.LiveWebPayMethodClick="livesdk_web_pay_method_click",e.LiveWebLinkEWalletShow="livesdk_link_ewallet_show",e.LiveWebLinkEWalletClick="livesdk_link_ewallet_click",e.LiveWebLinkEWalletSuccess="livesdk_link_ewallet_success",e.LiveWebLinkEWalletFailed="livesdk_link_ewallet_failed",e.LiveRechargeExchangeEntranceShow="livesdk_recharge_exchange_entrance_show",e.LiveRechargeExchangeEntranceClick="livesdk_recharge_exchange_entrance_click",e.LiveRechargeExchangeClick="livesdk_recharge_exchange_click",e.LiveRechargeExchangePopupShow="livesdk_recharge_exchange_popup_show",e.LiveRechargeExchangeConfirm="livesdk_recharge_exchange_confirm",e.LiveRechargeExchangeCancel="livesdk_recharge_exchange_cancel",e.LiveRechargeExchangeSuccess="livesdk_recharge_exchange_success",e.LiveRechargeExchangeFailed="livesdk_recharge_exchange_failed",e.LiveRechargeLogoutClick="livesdk_logout_click",e.LiveBillingAddressShow="livesdk_billing_address_show",e.LiveBillingAddressConfirm="livesdk_billing_address_confirm",e.LiveBillingAddressCancel="livesdk_billing_address_cancel",e.LiveBillingAddressFailed="livesdk_billing_address_failed",e.LiveRechargeNoticeShow="livesdk_webapp_top_notice_show",e.LiveRechargeNoticeClick="livesdk_webapp_top_notice_click",e.LiveRechargeNoticeClose="livesdk_webapp_top_notice_close",e.LiveAbnormalFeatureToast="livesdk_feature_abnormal_toast",e.LiveKycReminderPopup="livesdk_kyc_reminder_popup",e.LiveKycReminderPopupClick="livesdk_kyc_reminder_popup_click",e.LiveKycPopupShow="livesdk_kyc_popup_show",e.LiveKycPopupClick="livesdk_kyc_popup_click",e.LivePaymentBindShow="livesdk_payment_bind_show",e.LivePaymentBindClick="livesdk_payment_bind_click",e.LivePaymentBindSuccess="livesdk_payment_bind_success",e.LivePaymentBindFail="livesdk_payment_bind_fail",e.LiveRechargePackageShow="livesdk_recharge_package_show",e.LiveRechargeBanPopupShow="livesdk_recharge_ban_popup_show",e.LiveRechargeBanPopupClick="livesdk_recharge_ban_popup_click",e.LiveRechargePackagePreview="livesdk_recharge_package_preview",e.LiveRechargeCompletedEducationPopupShow="livesdk_payment_completed_popup_show",e.LiveRechargeCompletedEducationPopupClick="livesdk_payment_completed_click",e.LiveRechargeNegativeBalancePopupShow="livesdk_negative_balance_popup_show",e.LiveRechargeNegativeBalancePopupClick="livesdk_negative_balance_click",e.LiveRechargeLimitToastShow="livesdk_wallet_limit_toast_show",e.LiveRechargeLimitPopupShow="livesdk_wallet_limit_popup_show",e.LiveRechargeLimitPopupClick="livesdk_wallet_limit_popup_click"}(Gm||(Gm={}));let Vm=class{constructor(){this.handleRechargeShow=e=>{c.W.event("livesdk_recharge_show",e)},this.handleRechargeClick=e=>{c.W.event("livesdk_recharge_click",e)},this.handleCashierShow=e=>{c.W.event("livesdk_web_cashier_show",e)},this.handlePayAction=e=>{c.W.event("livesdk_recharge_pay",e)},this.handleRechargeSuccess=e=>{c.W.event("livesdk_recharge_success",e)},this.handleRechargeFailed=e=>{c.W.event("livesdk_recharge_failed",e)},this.handleBillingAddressClick=e=>{c.W.event("livesdk_billing_address_click",e)},this.handleLiveWebGetCoinShow=e=>{c.W.event("livesdk_web_getcoin_show",e)},this.handleLiveWebGetCoinClick=e=>{c.W.event("livesdk_web_getcoin_click",e)},this.handleRechargeFeedbackShow=e=>{c.W.event("livesdk_web_pay_feedback_show",e)},this.handleRechargeFeedbackClick=e=>{c.W.event("livesdk_web_pay_feedback_click",e)},this.handleRechargeCashierSelectPaymentMethod=e=>{c.W.event("livesdk_web_pay_method_click",e)},this.handleRechargeCashierEWalletShow=e=>{c.W.event("livesdk_link_ewallet_show",e)},this.handleRechargeCashierEWalletClick=e=>{c.W.event("livesdk_link_ewallet_click",e)},this.handleRechargeCashierEWalletSuccess=e=>{c.W.event("livesdk_link_ewallet_success",e)},this.handleRechargeCashierEWalletFailed=e=>{c.W.event("livesdk_link_ewallet_failed",e)},this.handleExchangeEntranceShow=e=>{c.W.event("livesdk_recharge_exchange_entrance_show",e)},this.handleExchangeEntranceClick=e=>{c.W.event("livesdk_recharge_exchange_entrance_click",e)},this.handleExchangeClick=e=>{c.W.event("livesdk_recharge_exchange_click",e)},this.handleExchangePopupShow=e=>{c.W.event("livesdk_recharge_exchange_popup_show",e)},this.handleExchangeConfirm=e=>{c.W.event("livesdk_recharge_exchange_confirm",e)},this.handleExchangeCancel=e=>{c.W.event("livesdk_recharge_exchange_cancel",e)},this.handleExchangeSuccess=e=>{c.W.event("livesdk_recharge_exchange_success",e)},this.handleExchangeFailed=e=>{c.W.event("livesdk_recharge_exchange_failed",e)},this.handleRechargeLogoutClick=e=>{c.W.event("livesdk_logout_click",e)},this.handleBillingAddressShow=e=>{c.W.event("livesdk_billing_address_show",e)},this.handleBillingAddressConfirm=e=>{c.W.event("livesdk_billing_address_confirm",e)},this.handleBillingAddressCancel=e=>{c.W.event("livesdk_billing_address_cancel",e)},this.handleBillingAddressFailed=e=>{c.W.event("livesdk_billing_address_failed",e)},this.handleNoticeShow=e=>{c.W.event("livesdk_webapp_top_notice_show",e)},this.handleNoticeClick=e=>{c.W.event("livesdk_webapp_top_notice_click",e)},this.handleNoticeClose=e=>{c.W.event("livesdk_webapp_top_notice_close",e)},this.handleAbnormalFeatureToast=e=>{c.W.event("livesdk_feature_abnormal_toast",e)},this.liveKycReminderPopup=e=>{c.W.event("livesdk_kyc_reminder_popup",e)},this.liveKycReminderPopupClick=e=>{c.W.event("livesdk_kyc_reminder_popup_click",e)},this.liveKycPopupShow=e=>{c.W.event("livesdk_kyc_popup_show",e)},this.liveKycPopupClick=e=>{c.W.event("livesdk_kyc_popup_click",e)},this.handlePaymentBindShow=e=>{c.W.event("livesdk_payment_bind_show",e)},this.handlePaymentBindClick=e=>{c.W.event("livesdk_payment_bind_click",e)},this.handlePaymentBindSuccess=e=>{c.W.event("livesdk_payment_bind_success",e)},this.handlePaymentBindFail=e=>{c.W.event("livesdk_payment_bind_fail",e)},this.handleRechargePackageShow=e=>{c.W.event("livesdk_recharge_package_show",e)},this.handleRechargeBanPopupShow=e=>{c.W.event("livesdk_recharge_ban_popup_show",e)},this.handleRechargeBanPopupClick=e=>{c.W.event("livesdk_recharge_ban_popup_click",e)},this.handleRechargePackagePreview=e=>{c.W.event("livesdk_recharge_package_preview",e)},this.handleRechargeCompletedEducationPopupShow=e=>{c.W.event("livesdk_payment_completed_popup_show",e)},this.handleRechargeCompletedEducationPopupClick=e=>{c.W.event("livesdk_payment_completed_click",e)},this.handleNegativeBalancePopupShow=e=>{c.W.event("livesdk_negative_balance_popup_show",e)},this.handleNegativeBalancePopupClick=e=>{c.W.event("livesdk_negative_balance_click",e)},this.handleRechargeLimitToastShow=e=>{c.W.event("livesdk_wallet_limit_toast_show",e)},this.handleRechargeLimitPopupShow=e=>{c.W.event("livesdk_wallet_limit_popup_show",e)},this.handleRechargeLimitPopupClick=e=>{c.W.event("livesdk_wallet_limit_popup_click",e)}}};Vm=(0,w.__decorate)([(0,so.G)()],Vm);var Qm,Ym=i(51858),Km=i(80357),Jm=i.n(Km);!function(e){e[e.SLARDAR=0]="SLARDAR",e[e.TEA=1]="TEA"}(Qm||(Qm={}));const Xm={key:"rd_live_webapp_recharge_get_coins_api_err",platform:0},eh={key:"rd_live_webapp_recharge_get_permission_api_err",platform:0},th={key:"rd_live_webapp_recharge_get_permission_api_referrer",platform:0},ih={key:"rd_live_webapp_recharge_place_order_result_api_err",platform:0},oh={key:"rd_live_webapp_recharge_place_order_result_api_res",platform:0},nh={key:"rd_live_webapp_recharge_place_order_result_api_send",platform:0},ah={key:"rd_live_webapp_recharge_save_address_api_err",platform:0},sh={key:"rd_live_webapp_exchange_diamond_exchange_api_err",platform:0},rh={key:"rd_live_webapp_exchange_diamond_exchange_api_success",platform:0},lh={key:"rd_live_webapp_transaction_history_getTransactionHistoryList_api_err",platform:0},dh={key:"rd_live_webapp_transaction_history_load_transaction_history_api_err",platform:0};let ch=class{constructor(e){this.service=e,this.defaultMetrics={count:1},this.handleReport=(e,t)=>{switch(e.platform){case 0:this.service.emitEvent(e.key,this.defaultMetrics,Object.assign(Object.assign({},t),{version:"wallet_v2"}));break;case 1:c.W.event(e.key,null!=t?t:{});break;default:console.error(`rdLog platform ${e.platform} not registered`)}}}};ch=(0,w.__decorate)([(0,so.G)(),(0,w.__metadata)("design:paramtypes",[k.n])],ch);const ph=e=>{const{count:t,realDot:i,keepDot:o,currentPrice:n}=e,a=t*n;if(0===a)return{showAmount:"0.00",localAmount:"0",total:0};let s=i-o,r=a,l=!1;for(;s>0;)r%10>0&&(l=!0),s--,r=Math.trunc(r/10);const d=(l?Number(r)+1:Number(r)).toString().split(""),c=i-o,p=d.splice(-c),u=p.length>0?`.${p.join("").padStart(o,"0")}`:".00",g=`${d.join("")||0}${u}`,m=g.toString().split("."),h=(m[1]||"").padEnd(o,"0").split("").slice(0,o).join("");return{showAmount:g,localAmount:`${m[0]}${h}`,total:a}},uh=e=>{const{keepDot:t,currentPrice:i}=e,o=i,n=o.toString().split(""),a=n.splice(-t),s=a.length>0?`.${a.join("").padStart(t,"0")}`:".00";return{showAmount:`${n.join("")||0}${s}`,localAmount:o.toString(),total:o}},gh=4005205,mh=[42030,42031,42032,4005265,4005266,4005267,4005268,4005269,4005270,4005271];var hh;!function(e){e.GetPackagesError="live_sdk_get_packages_error",e.GetBasePackageError="live_sdk_get_basepackage_error",e.PlaceOrderError="live_sdk_place_exchange_order_error"}(hh||(hh={}));let _h=class{constructor(e){this.service=e,this.defaultTag={where:"Exchange"},this.defaultMetrics={count:1},this.reportError=e=>{this.service.sendLog(null==e?void 0:e.message,"error")},this.handlePackagesFail=e=>{this.reportError(e),this.service.emitEvent("live_sdk_get_packages_error",this.defaultMetrics,this.defaultTag)},this.handleBasePackageFail=e=>{this.reportError(e),this.service.emitEvent("live_sdk_get_basepackage_error",this.defaultMetrics,this.defaultTag)},this.handlePlaceOrderFail=e=>{this.reportError(e),this.service.emitEvent("live_sdk_place_exchange_order_error",this.defaultMetrics,this.defaultTag)}}};_h=(0,w.__decorate)([(0,so.G)(),(0,w.__metadata)("design:paramtypes",[k.n])],_h);var vh=i(65515),yh=i.n(vh),bh=i(11392),fh=i.n(bh);yh().extend(fh());const xh=(e,t,i)=>{var o,n,a;let s=0;const r=(null==e?void 0:e.currency_price)&&null!==(o=null==e?void 0:e.currency_price[0].price)&&void 0!==o?o:0,l=(null==e?void 0:e.currency_price)&&null!==(n=null==e?void 0:e.currency_price[0].price_dot)&&void 0!==n?n:0,d=(null==e?void 0:e.currency_price)&&null!==(a=e.currency_price[0].keep_dot)&&void 0!==a?a:0;if(t){const e=i*r;if(0===e)return 0;let t=l-d,o=e,n=!1;if(d>=l)for(let e=l;e<d;e++)o*=10;for(;t>0;)o%10>0&&(n=!0),t--,o=Math.trunc(o/10);const a=n?Number(o)+1:Number(o);if(0===d)return a;const s=a.toString().split(""),c=s.splice(-d);for(;d>c.length;)c.unshift("0");const p=c.length>0?`.${c.join("")}`:"",u=s.join("");return Number(`${u}${p}`)}{if(s=r,d>=l)for(let e=l;e<d;e++)s*=10;const e=s.toString().split("");let t=[];if(e.length<d)for(let t=e.length;t<d;t++)e.unshift("0");t=0===d&&0!==l?e.splice(d-l):0===d&&0===l?e.splice(e.length):e.splice(-d);const i=t.length>0?`.${t.join("")}`:"",o=e.join("");return Number(`${o}${i}`)}},kh=(e,t,i)=>{let o;return o=e.inAppState.isInApp?"recharge"===t?"official_web_mobile_recharge_inapp_guide":"official_web_mobile_income_exchange_inapp_guide":i?"recharge"===t?"official_web_mobile_recharge_browser":"official_web_mobile_income_exchange_browser":"recharge"===t?"official_web_pc_recharge":"official_web_pc_income_exchange",o},wh=Object.values(Ym.Tp).map((e=>{var t;return null===(t=e.match(/\/coin\/([^/@:]+)\/?.*/))||void 0===t?void 0:t[1]})).filter((e=>Boolean(e))),Sh=(e,t,i)=>(kh(e,t,i),{hit_entry:kh(e,t,i),entry_type:t,request_id:e.reportState.coinsConfigLogId});var Ch=i(40235);let jh=class{constructor(e){this.fetch=e}getPermission(e){return this.fetch.get("/webcast/wallet_api/diamond_buy/permission/",{query:e,baseUrlType:4,requireSecSdk:!0})}getCoinsConfig(e){return this.fetch.get("/webcast/diamond/",{query:e,baseUrlType:4,requireSecSdk:!0})}getNonce(){return this.fetch.get("/webcast/wallet_api/diamond_buy/nonce",{baseUrlType:4,requireSecSdk:!0})}placeOrder(e){return this.fetch.get("/webcast/wallet_api/diamond_buy_external/",{query:e,baseUrlType:4,requireSecSdk:!0})}getTransactionHistory(e){return this.fetch.get("/webcast/wallet_api/query_web_order/",{query:e,baseUrlType:4,requireSecSdk:!0})}getInvoiceAddressApi(e){return this.fetch.get("/webcast/wallet_api/invoice/download/",{query:e,baseUrlType:4,requireSecSdk:!0})}getNoticeContent(){return this.fetch.get("/webcast/wallet_api_tiktok/notifycenter/notices",{query:{view_name:"recharge"},baseUrlType:4,requireSecSdk:!0})}getExchangeCustomPackage(e){return this.fetch.post("/webcast/recharge/base_package/",{query:e,baseUrlType:4,requireSecSdk:!0})}getExchangePackages(e){return this.fetch.post("/webcast/recharge/packages/",{query:e,baseUrlType:4,requireSecSdk:!0})}exchangeEarningsToCoins(e){return this.fetch.post("/webcast/wallet_api/diamond_exchange/",{query:e,baseUrlType:4,requireSecSdk:!0})}verifyZipCode(e){return this.fetch.get("/webcast/wallet_api/verify_zip_code/",{query:e,baseUrlType:4,requireSecSdk:!0})}saveBillingAddress(e){return this.fetch.post("/webcast/wallet_api/save_billing_address_info/",{query:e,body:(0,Ch.stringify)(e),baseUrlType:4,requireSecSdk:!0})}};var Ph,Th;jh=(0,w.__decorate)([(0,so.G)(),(0,w.__metadata)("design:paramtypes",[p.r])],jh),function(e){e[e.WebAppPage=2]="WebAppPage",e[e.WebAppH5=3]="WebAppH5"}(Ph||(Ph={})),function(e){e.Default="default",e.From3ds="From3ds"}(Th||(Th={}));let Oh=class extends He.D{constructor(e,t,i,o,n){super(),this.service=e,this.bizContext=t,this.report=i,this.exchangeSlardar=o,this.rdReport=n,this.defaultState={userState:{loadingState:0,hasRechargePermission:!1,showEntry:!1,notLoggedIn:!0,coins:0,exchangePermission:{currency:"",enable:!1,has_short_video_gift:!1,price_dot:0,region:"",revenue:0,unit_price:0}},orderInfo:{loadingState:0},coins:{loadingState:0,coinsData:[]},coinsExtra:{},exchangePackages:{loadingState:0,packagesData:{}},exchangeCustomPackage:{loadingState:0,customPackageData:{}},exchangeState:{loadingState:0,packageList:[],selectedPackageIndex:-1,selectedComboId:0,currency:"",coinAmount:0,currencyDot:0,localAmount:0,showAmountLocal:"0.00",showAmountUSD:"0.00",dontToast:!1,showFailureModal:!1,isConfirmModalVisible:!1},nonce:{loadingState:0,nonce:"",expiredAt:Date.now()},customerCoinId:0,customCoinIndex:-1,customCoinMaxNum:0,customCoinMinNum:0,priceUnit:"",apUnitPrice:{},gpUnitPrice:{},merchantId:"",paymentMethod:"",paymentState:{selectedComboId:0,coinAmount:0,priceDot:0,keepDot:0,totalPrice:0,coinPrice:0,price:0,currency:"",selectedComboIndex:-1,isCustom:!1},transactionHistory:{loadingState:0,total:0,pageNumber:1,pageSize:8,pageData:[],extraData:void 0,totalData:[],isWebRechargedBefore:void 0},noticeData:{loadingState:0,notices:[]},inAppState:{hideHeader:!1,hidePadding:!1,rechargeFrom:"others",fullSheet:!1,isInApp:!1},reportState:{coinsConfigLogId:""},mobileInputVisible:!1,cashierModalLoaded:!1,billingAddress:{postalCode:"",validating:!1,validated:!1,isValid:!1,hasClickedConfirm:!1,isSaved:!1},showVerifyNow:!1,errorPrompt:"",region:void 0,kycErrorInfo:void 0,showRechargeLimitModal:!1}}setUserPermission(e,t){e.userState=Object.assign(Object.assign({},e.userState),t)}setNotice(e,t){e.noticeData=Object.assign(Object.assign({},e.noticeData),t)}setCoinsConfig(e,t){e.coins=Object.assign(Object.assign({},e.coins),t)}setCoinsExtra(e,t){e.coinsExtra=t}setPaymentState(e,t){e.paymentState=Object.assign(Object.assign({},e.paymentState),t)}setPaymentMethod(e,t){e.paymentMethod=t}setExchangePackages(e,t){e.exchangePackages=Object.assign(Object.assign({},e.exchangePackages),t)}setExchangeCustomPackage(e,t){e.exchangeCustomPackage=Object.assign(Object.assign({},e.exchangeCustomPackage),t)}setExchangeState(e,t){e.exchangeState=Object.assign(Object.assign({},e.exchangeState),t)}setCustomCoin(e,t){const{customerCoinId:i,customCoinMaxNum:o,customCoinMinNum:n,priceUnit:a,apUnitPrice:s,gpUnitPrice:r,merchantId:l,customCoinIndex:d}=t;e.customerCoinId=i,e.customCoinMaxNum=o,e.customCoinMinNum=n,e.priceUnit=a,e.apUnitPrice=s,e.gpUnitPrice=r,e.merchantId=l,e.customCoinIndex=d}updateOrder(e,t){e.orderInfo=Object.assign(Object.assign({},e.orderInfo),t)}updateNonce(e,t){t.nonce?e.nonce=Object.assign(Object.assign(Object.assign({},e.nonce),t),{loadingState:2,expiredAt:Date.now()+24e4}):e.nonce=Object.assign(Object.assign({},e.nonce),t)}setTransactionHistory(e,t){e.transactionHistory=Object.assign(Object.assign({},e.transactionHistory),t)}setTransactionSize(e,t){e.transactionHistory=Object.assign(Object.assign({},e.transactionHistory),{pageSize:t.pageSize,pageNumber:t.pageNumber})}setInAppState(e,t){e.inAppState=Object.assign(Object.assign({},e.inAppState),t)}setRefHash(e,t){t&&!wh.includes(t)&&(e.refhash=t)}setReportState(e,t){e.reportState=Object.assign(Object.assign({},e.reportState),t)}setEnterFrom(e,t){e.reportState.enterFrom=t}setMobileInputVisible(e,t){e.mobileInputVisible=t}setCashierModalLoaded(e,t){e.cashierModalLoaded=t}setBillingAddress(e,t){e.billingAddress=Object.assign(Object.assign({},e.billingAddress),t)}setDefaultSelectedMethod(e,t){e.defaultSelectedMethod=Object.assign(Object.assign({},e.defaultSelectedMethod),t)}setShowVerifyNow(e,t){e.showVerifyNow=t}setErrorPrompt(e,t){e.errorPrompt=t}setRegion(e,t){e.region=t}resetErrorState(e){var t,i;e.orderInfo.statusCode=void 0,e.orderInfo.noPrompts=!1,e.exchangeState.statusCode=void 0,e.exchangeState.dontToast=!1,(null===(t=e.orderInfo)||void 0===t?void 0:t.extra)&&(e.orderInfo.extra=void 0),(null===(i=e.exchangeState)||void 0===i?void 0:i.extra)&&(e.exchangeState.extra=void 0)}setKycErrorInfo(e,t){e.kycErrorInfo=t}setGridColCount(e,t){e.gridColCount=t}setExchangeIsConfirmModalVisible(e,t){e.exchangeState.isConfirmModalVisible=t}setShowRechargeLimitModal(e,t){e.showRechargeLimitModal=t}initPayment(e){return e.pipe((0,io.z)((()=>(0,oo.of)(this.getActions().updateOrder({orderData:void 0,loadingState:0})))))}updateCoinsAmount(e){return e.pipe((0,To.M)(this.state$),(0,io.z)((([e,t])=>{var i,o;const{coinComboIndex:n}=e;if(n<0)return(0,oo.of)();const{coins:a}=t,{coinsData:s}=a,r=s[n];let l=null!==(i=null==r?void 0:r.diamond_count)&&void 0!==i?i:0,d=0;1===(null==r?void 0:r.stall_type)?(l=e.coinAmount,r&&(d=xh(r,!0,l))):r&&(d=xh(r,!1,l));const c=(null!==(o=r.currency_price)&&void 0!==o?o:[])[0],{currency:p,price:u,price_dot:g,keep_dot:m}=c;return(0,oo.of)(this.getActions().setPaymentState({selectedComboId:Number(r.id),selectedComboIndex:n,coinAmount:l,totalPrice:d,currency:p,price:u,priceDot:g,keepDot:m,isCustom:1===r.stall_type}))})))}fetchPermission(e){return e.pipe((0,io.z)((({user:e,region:t})=>{const i=void 0!==typeof window?null===window||void 0===window?void 0:window.location.pathname:"";return this.rdReport.handleReport(th,{path:i}),this.service.getPermission({user_id:null==e?void 0:e.uid,local_country:t,live_id:12}).pipe((0,io.z)((t=>{var o,n,a;if(null==t?void 0:t.data){const s={hasRechargePermission:null===(o=t.data)||void 0===o?void 0:o.is_allow,showEntry:t.data.is_show,coins:(null===(n=t.data)||void 0===n?void 0:n.coins)||0,exchangePermission:null===(a=t.data)||void 0===a?void 0:a.exchange,loadingState:2,notLoggedIn:20003===t.status_code};return i===Ym.Tp.coinTransactions?(0,oo.of)(this.getActions().setUserPermission(s),this.getActions().fetchCustomExchangePackage()):Jm()(Object.values(Ym.Tp)).includes(i)?(0,oo.of)(this.getActions().setUserPermission(s),this.getActions().fetchCustomExchangePackage(),this.getActions().getTransactionHistoryList({pageNumber:1,pageSize:1,user:e})):(0,oo.of)(this.getActions().setUserPermission(s))}return this.rdReport.handleReport(eh,t),(0,oo.of)(this.getActions().setUserPermission({loadingState:3}))})),(0,jo.O)(this.getActions().setUserPermission({loadingState:1})),(0,no.K)((e=>(this.rdReport.handleReport(eh,e),(0,oo.of)(this.getActions().setUserPermission({loadingState:3}))))))})))}fetchNotice(e){return e.pipe((0,io.z)((()=>this.service.getNoticeContent().pipe((0,io.z)((e=>{var t,i;if(null==e?void 0:e.data){const o=(null!==(t=localStorage.getItem("webapp_recharge_hidden_notices_history"))&&void 0!==t?t:"").split(","),n=null===(i=e.data.notices)||void 0===i?void 0:i.filter((e=>!o.includes(e.id)));return(0,oo.of)(this.getActions().setNotice({loadingState:2,notices:null!=n?n:[]}))}return(0,oo.of)(this.getActions().setNotice({loadingState:3}))})),(0,jo.O)(this.getActions().setNotice({loadingState:1})),(0,no.K)((()=>(0,oo.of)(this.getActions().setNotice({loadingState:3}))))))))}placeOrder(e){return e.pipe((0,To.M)(this.state$,this.bizContext.state$),(0,Ye.z)((([e,t,i])=>{var o;const{type:n="default",skipKyc:a,user:s,region:r,useWalletCashier:l}=e,{paymentState:d,customerCoinId:c,refhash:p}=t,u=null===(o=i.bizContext)||void 0===o?void 0:o.geo;if(!r)return(0,oo.of)(this.getActions().updateOrder({loadingState:3,prompts:""}));let g={use_wallet_cashier:l};if("AE"===r&&(g.sub_region=null==u?void 0:u[0]),"default"===n){const{selectedComboId:t,currency:i,coinAmount:o,totalPrice:n,keepDot:s,price:l}=d;let u=l.toString();if(t===c){const e=n.toString().split("."),t=(e[1]||"").padEnd(s,"0").split("").slice(0,s).join("");u=`${e[0]}${t}`}g=Object.assign(Object.assign({},g),{diamond_id:t,currency:i,source:e.source,coins_count:o,local_amount:u,region:r,refhash:p,skip_kyc_reminder:a})}else if("From3ds"===n){const{diamond_id:t,coins_count:i,local_amount:o,currency:n}=e;if(!(t&&i&&o&&n))return(0,oo.of)(this.getActions().updateOrder({loadingState:3,prompts:""}));g=Object.assign(Object.assign({},g),{diamond_id:t,currency:n,source:e.source,coins_count:i,local_amount:o,region:r,refhash:p})}return this.rdReport.handleReport(nh,g),this.service.placeOrder(g).pipe((0,io.z)((e=>{var o,n,a,r,l,d,c,p,u,g,m,h;if(0===e.status_code&&e.data)return this.rdReport.handleReport(oh,e),e.data.nonce?[this.getActions().updateOrder({orderData:e.data,loadingState:2}),this.getActions().updateNonce({nonce:e.data.nonce})]:[this.getActions().updateOrder({orderData:e.data,loadingState:2}),this.getActions().getNonce()];{const _=Object.assign(Object.assign({},e),{loadingState:3,statusCode:null!==(o=null==e?void 0:e.status_code)&&void 0!==o?o:"",prompts:null!==(a=null===(n=e.data)||void 0===n?void 0:n.prompts)&&void 0!==a?a:""});if(this.rdReport.handleReport(ih,_),null===(r=null==e?void 0:e.extra)||void 0===r?void 0:r.custom_error){if(1===e.extra.custom_error.prompt_type)return(0,oo.of)(this.getActions().resetErrorState(),this.getActions().updateOrder(Object.assign(Object.assign({},_),{noPrompts:!0})),this.getActions().setShowRechargeLimitModal(!0));2===e.extra.custom_error.prompt_type&&this.report.handleRechargeLimitToastShow(Object.assign(Object.assign({},Sh(t,"recharge",null===(l=i.bizContext)||void 0===l?void 0:l.isMobile)),{error_code:e.status_code}))}return 4005284===(null==e?void 0:e.status_code)?[this.getActions().setErrorPrompt(null!==(c=null===(d=e.data)||void 0===d?void 0:d.prompts)&&void 0!==c?c:""),this.getActions().updateOrder(Object.assign(Object.assign({},_),{noPrompts:!0,showFailureModal:!0}))]:mh.includes(e.status_code)?[this.getActions().setErrorPrompt(null!==(u=null===(p=e.data)||void 0===p?void 0:p.prompts)&&void 0!==u?u:""),this.getActions().updateOrder(Object.assign(Object.assign({},_),{noPrompts:!0})),this.getActions().setKycErrorInfo(null!==(g=e.extra)&&void 0!==g?g:void 0),this.getActions().setShowVerifyNow(!0)]:((null==e?void 0:e.status_code)===gh&&this.report.handleAbnormalFeatureToast({user_id:null==s?void 0:s.uid,scenario:"recharge"}),4005192===e.status_code?(0,oo.of)(this.getActions().resetErrorState(),this.getActions().updateOrder(Object.assign(Object.assign({},_),{redirectToPaymentResult:!0}))):(0,oo.of)(this.getActions().resetErrorState(),this.getActions().updateOrder(_),this.getActions().setErrorPrompt(null!==(h=null===(m=e.data)||void 0===m?void 0:m.prompts)&&void 0!==h?h:"")))}})),(0,jo.O)(this.getActions().updateOrder({loadingState:1})),(0,no.K)((e=>{this.rdReport.handleReport(ih,{error:JSON.stringify(e)});let t="";return/Network/.test(null==e?void 0:e.message)&&(t="Network issue, please try again"),(0,oo.of)(this.getActions().updateOrder({loadingState:3,prompts:t}))})))})))}fetchExchangePackages(e){return e.pipe((0,To.M)(this.state$),(0,Ye.z)((([e,t])=>{if(!t.userState.exchangePermission)return(0,oo.of)(this.noop());const{region:i}=t.userState.exchangePermission;return this.service.getExchangePackages({currency:"USD",package_region:i,type:101}).pipe((0,io.z)((e=>(null==e?void 0:e.data)?(0,oo.of)(this.getActions().setExchangePackages({loadingState:2,packagesData:e.data})):(0,oo.of)(this.getActions().setExchangePackages({loadingState:3})))),(0,jo.O)(this.getActions().setExchangePackages({loadingState:1})),(0,no.K)((e=>(this.exchangeSlardar.handlePackagesFail(e),(0,oo.of)(this.getActions().setExchangePackages({loadingState:3}))))))})))}fetchCustomExchangePackage(e){return e.pipe((0,To.M)(this.state$),(0,Ye.z)((([e,t])=>{if(!t.userState.exchangePermission)return(0,oo.of)(this.noop());const{region:i,revenue:o}=t.userState.exchangePermission;return this.service.getExchangeCustomPackage({currency:"USD",package_region:i,balance:o,type:101,real_dot:2}).pipe((0,io.z)((e=>(null==e?void 0:e.data)?(0,oo.of)(this.getActions().setExchangeCustomPackage({loadingState:2,customPackageData:e.data})):(0,oo.of)(this.getActions().setExchangeCustomPackage({loadingState:3})))),(0,jo.O)(this.getActions().setExchangeCustomPackage({loadingState:1})),(0,no.K)((e=>(this.exchangeSlardar.handleBasePackageFail(e),(0,oo.of)(this.getActions().setExchangeCustomPackage({loadingState:3}))))))})))}setExchangePackageList(e){return e.pipe((0,To.M)(this.state$),(0,io.z)((([e,t])=>(0,oo.of)(this.getActions().setExchangeState({packageList:e})))))}updateExchangeAmount(e){return e.pipe((0,To.M)(this.state$),(0,io.z)((([e,t])=>{var i;const{selectedPackageIndex:o,coinAmount:n}=e,{packageList:a}=t.exchangeState,s=a[o],{coins:r,price:l,realDot:d,keepDot:c,localRealDot:p,localKeepDot:u,localPrice:g}=s,m=t.exchangePackages.packagesData,h=o===a.length-1,_=o===a.length-2,v=h?n:r,y=Boolean(m.local_currency_info),b=null===(i=null==m?void 0:m.currency_info)||void 0===i?void 0:i.code,{total:f,showAmount:x,localShowAmount:k}=(e=>{const{count:t,realDot:i,keepDot:o,isCustom:n=!1,currentPrice:a,useLocal:s=!1,localRealDot:r=0,localKeepDot:l=0,localCurrentPrice:d=0}=e,c=n?ph:uh,{showAmount:p,localAmount:u,total:g}=c({count:t,realDot:i,keepDot:o,currentPrice:a}),m={showAmount:p,localAmount:u,total:g};if(s){const{showAmount:e,localAmount:i,total:o}=c({count:t,realDot:r,keepDot:l,currentPrice:d});m.localShowAmount=e||"",m.localTotal=o||0,m.localAmountString=i||""}return m})({isCustom:_||h,count:_?Number(s.coins):v,realDot:d,keepDot:c,currentPrice:l,useLocal:y,localRealDot:p,localKeepDot:u,localCurrentPrice:g});return(0,oo.of)(this.getActions().setExchangeState({selectedComboId:s.id,selectedPackageIndex:o,currency:b,currencyDot:d,localAmount:f,coinAmount:Number(v),showAmountUSD:x,showAmountLocal:k}))})))}placeExchangeOrder(e){return e.pipe((0,To.M)(this.state$),(0,Ye.z)((([e,t])=>{const{isMobile:i,reportParams:o,skipKyc:n,user:a,region:s}=e,{exchangeState:r}=t,{selectedComboId:l,currency:d,coinAmount:c,currencyDot:p,localAmount:u}=r;return this.service.exchangeEarningsToCoins({diamond_id:l,way:1,source:i?3:2,currency:d,currency_dot:p,coins_count:c,local_amount:u,skip_kyc_reminder:n}).pipe((0,io.z)((e=>{var n,r,l,d,c,p,u,g,m,h,_,v;if(e.data&&1===e.data.status)return this.report.handleExchangeSuccess(Object.assign({},o)),this.rdReport.handleReport(rh),(0,oo.of)(this.getActions().setExchangeState({loadingState:2,statusCode:e.data.status}),this.getActions().fetchBalanceAndHistory({user:a,region:s}));{const s=Object.assign(Object.assign({},e),{loadingState:3,statusCode:null!==(n=null==e?void 0:e.status_code)&&void 0!==n?n:"",prompts:null!==(l=null===(r=null==e?void 0:e.data)||void 0===r?void 0:r.prompts)&&void 0!==l?l:""});if(this.report.handleExchangeFailed(Object.assign(Object.assign({},o),{error_code:null===(d=e.data)||void 0===d?void 0:d.status})),this.rdReport.handleReport(sh,{error:JSON.stringify(e)}),null===(c=null==e?void 0:e.extra)||void 0===c?void 0:c.custom_error){if(1===e.extra.custom_error.prompt_type)return(0,oo.of)(this.getActions().resetErrorState(),this.getActions().setExchangeState(Object.assign(Object.assign({},s),{dontToast:!0})),this.getActions().setShowRechargeLimitModal(!0));2===e.extra.custom_error.prompt_type&&this.report.handleRechargeLimitToastShow(Object.assign(Object.assign({},Sh(t,"exchange",i)),{error_code:e.status_code}))}return e.status_code===gh&&this.report.handleAbnormalFeatureToast({user_id:null==a?void 0:a.uid,scenario:"recharge_page_exchange"}),4005285===(null==e?void 0:e.status_code)?[this.getActions().setErrorPrompt(null!==(u=null===(p=e.data)||void 0===p?void 0:p.prompts)&&void 0!==u?u:""),this.getActions().setExchangeState(Object.assign(Object.assign({},s),{dontToast:!0,showFailureModal:!0}))]:mh.includes(e.status_code)?[this.getActions().setErrorPrompt(null!==(m=null===(g=e.data)||void 0===g?void 0:g.prompts)&&void 0!==m?m:""),this.getActions().setExchangeState(Object.assign(Object.assign({},s),{dontToast:!0})),this.getActions().setKycErrorInfo(null!==(h=e.extra)&&void 0!==h?h:void 0),this.getActions().setShowVerifyNow(!0)]:(0,oo.of)(this.getActions().resetErrorState(),this.getActions().setExchangeState(s),this.getActions().setErrorPrompt(null!==(v=null===(_=e.data)||void 0===_?void 0:_.prompts)&&void 0!==v?v:""))}})),(0,jo.O)(this.getActions().setExchangeState({loadingState:1})),(0,no.K)((e=>{this.exchangeSlardar.handlePlaceOrderFail(e),this.rdReport.handleReport(sh,e);let t="";return/Network/.test(null==e?void 0:e.message)&&(t="Network issue, please try again"),(0,oo.of)(this.getActions().setExchangeState({loadingState:3,prompts:t}))})))})))}initExchangeOrderStatus(e){return e.pipe((0,io.z)((()=>(0,oo.of)(this.getActions().setExchangeState({loadingState:0,coinAmount:0,selectedComboId:0,prompts:""}),this.getActions().setPaymentState({selectedComboIndex:-1,selectedComboId:0,coinAmount:0,totalPrice:0})))))}fetchCoinsConfig(e){return e.pipe((0,To.M)(this.state$),(0,Ye.z)((([e,t])=>{const{refHash:i}=e;let o="others";return i&&!wh.includes(i)&&(o=i),this.service.getCoinsConfig({recommend_strategy_param:JSON.stringify({charge_from:o})}).pipe((0,io.z)((i=>{var o,n,a,s,r,l,d,c,p,u,g,m,h,_,v,y,b,f,x,k,w,S,C,j,P;if(0===i.status_code&&i.data&&i.extra){if(0===(null===(o=i.data)||void 0===o?void 0:o.length))throw new Error("empty diamond list");let e=(e=>{const t=[];let i=null,o=0;for(const n of e)1===n.stall_type?i=n:t.push(Object.assign(Object.assign({},n),{index:o++}));return i&&t.push(Object.assign(Object.assign({},i),{index:o})),t})(i.data),t=-1;return e=e.map(((e,o)=>{var n,a,s;return(null===(n=i.extra)||void 0===n?void 0:n.use_default_packet)&&(0===e.stall_type&&e.id===(null===(a=i.extra)||void 0===a?void 0:a.recommended_packet_id)||2===e.stall_type&&e.diamond_count===(null===(s=i.extra)||void 0===s?void 0:s.default_packet_coin))?(t=o,Object.assign(Object.assign({},e),{isDefaultPackage:1})):Object.assign(Object.assign({},e),{isDefaultPackage:0})})),-1===t&&(null===(n=i.extra)||void 0===n?void 0:n.use_default_packet)&&(t=0,e[0].isDefaultPackage=1),(0,oo.of)(this.getActions().setCoinsConfig({coinsData:e}),this.getActions().setCoinsExtra(i.extra),this.getActions().updateCoinsAmount(i.extra.use_default_packet?{coinComboIndex:t,coinAmount:0}:{coinComboIndex:-1,coinAmount:0}),this.getActions().setCustomCoin({customerCoinId:(null===(a=null==i?void 0:i.extra)||void 0===a?void 0:a.customized_ids)?null===(s=null==i?void 0:i.extra)||void 0===s?void 0:s.customized_ids[0]:0,customCoinIndex:e.length-1,customCoinMaxNum:null!==(l=null===(r=null==i?void 0:i.extra)||void 0===r?void 0:r.max_customized_diamond_cnt)&&void 0!==l?l:0,customCoinMinNum:null!==(d=null==i?void 0:i.extra.min_customized_diamond_cnt)&&void 0!==d?d:0,priceUnit:(null===(c=null==i?void 0:i.data[0])||void 0===c?void 0:c.currency_price)&&null!==(g=null===(u=null===(p=null==i?void 0:i.data[0])||void 0===p?void 0:p.currency_price[0])||void 0===u?void 0:u.price_show_form)&&void 0!==g?g:"",apUnitPrice:null!==(h=null===(m=null==i?void 0:i.extra)||void 0===m?void 0:m.ap_unit_price)&&void 0!==h?h:{},gpUnitPrice:null!==(v=null===(_=null==i?void 0:i.extra)||void 0===_?void 0:_.gp_unit_price)&&void 0!==v?v:{},merchantId:null!==(b=null===(y=null==i?void 0:i.extra)||void 0===y?void 0:y.merchant_id)&&void 0!==b?b:""}),this.getActions().setRegion(null!==(x=null===(f=null==i?void 0:i.extra)||void 0===f?void 0:f.region)&&void 0!==x?x:void 0),this.getActions().setReportState({coinsConfigLogId:i.extra.request_id}),this.getActions().setCoinsConfig({loadingState:2}))}{const o={error_code:null!==(k=String(null==i?void 0:i.status_code))&&void 0!==k?k:"unknown",message:null!==(S=null===(w=null==i?void 0:i.data)||void 0===w?void 0:w.prompts)&&void 0!==S?S:"some error in get_coins"};return this.report.handleRechargeFailed(Object.assign(Object.assign({},o),{error_from:"get_coins",charge_from:null!==(C=t.refhash)&&void 0!==C?C:"",request_page:e.isMobile?"mobile_h5":"webapp",is_web_recharged_before:t.transactionHistory.isWebRechargedBefore?"yes":"no",recharge_type:"feature_available",order_id:null!==(P=null===(j=t.orderInfo.orderData)||void 0===j?void 0:j.order_id)&&void 0!==P?P:"",event_module:(null==t?void 0:t.paymentState.isCustom)?"customized":"normal",recharge_from:t.inAppState.rechargeFrom,pay_method:t.paymentMethod})),this.rdReport.handleReport(Xm,o),(0,oo.of)(this.getActions().setCoinsConfig({loadingState:3}))}})),(0,jo.O)(this.getActions().setCoinsConfig({loadingState:1})),(0,no.K)((e=>(this.rdReport.handleReport(Xm,{errorMessage:String(e)}),(0,oo.of)(this.getActions().setCoinsConfig({loadingState:3}))))))})))}getTransactionHistoryList(e){return e.pipe((0,Ye.z)((e=>{const{pageSize:t,pageNumber:i,user:o}=e;if(!o)return(0,oo.of)(this.noop());const n=o.uid;return this.service.getTransactionHistory({page:i,count:t,user_id:n}).pipe((0,io.z)((e=>(0,oo.of)(this.getActions().setTransactionHistory({pageData:e.data.list_recharge_order,extraData:e.extra,total:e.data.total_count,pageNumber:i,pageSize:t,loadingState:2,isWebRechargedBefore:0!==e.data.total_count})))),(0,jo.O)(this.getActions().setTransactionHistory({loadingState:1})),(0,no.K)((e=>(this.rdReport.handleReport(lh,{pageSize:String(t),pageNumber:String(i),error:e}),(0,oo.of)(this.getActions().setTransactionHistory({loadingState:3}))))))})))}loadTransactionHistory(e){return e.pipe((0,To.M)(this.state$),(0,So.w)((([e,t])=>{const{pageSize:i,pageNumber:o,totalData:n}=t.transactionHistory;if(!e)return(0,oo.of)(this.noop());const a=e.uid;return this.service.getTransactionHistory({page:o,count:i,user_id:a}).pipe((0,io.z)((e=>(0,oo.of)(this.getActions().setTransactionHistory({pageData:e.data.list_recharge_order,totalData:[...n,...e.data.list_recharge_order],total:e.data.total_count,pageNumber:o+1,pageSize:i,loadingState:2,isWebRechargedBefore:0!==e.data.total_count})))),(0,jo.O)(this.getActions().setTransactionHistory({loadingState:1})),(0,no.K)((()=>(this.rdReport.handleReport(dh,{page:String(o),count:String(i),user_id:a}),(0,oo.of)(this.getActions().setTransactionHistory({loadingState:3}))))))})))}getNonce(e){return e.pipe((0,io.z)((()=>this.service.getNonce().pipe((0,io.z)((e=>{var t;return 0===e.status_code?(0,oo.of)(this.getActions().updateNonce({nonce:null===(t=e.data)||void 0===t?void 0:t.nonce,loadingState:2})):(0,oo.of)(this.getActions().updateNonce({loadingState:3}))})),(0,jo.O)(this.getActions().updateNonce({loadingState:1}))))))}init(e){return e.pipe((0,io.z)((e=>{const{refHash:t,user:i,region:o}=e;return[this.getActions().setRefHash(null!=t?t:""),this.getActions().fetchPermission({user:i,region:o}),this.getActions().fetchCoinsConfig({}),this.getActions().fetchNotice()]})),(0,no.K)((()=>(0,oo.of)(this.noop()))))}fetchBalanceAndHistory(e){return e.pipe((0,To.M)(this.bizContext.state$),(0,io.z)((([{region:e,user:t},i])=>{var o;return(null===(o=i.bizContext)||void 0===o?void 0:o.isMobile)?[this.getActions().fetchPermission({user:t,region:e}),this.getActions().setTransactionHistory({pageNumber:1,pageSize:12,totalData:[],containerScrollTop:0})]:(0,oo.of)(this.getActions().fetchPermission({user:t,region:e}))})))}updateInAppState(e){return e.pipe((0,io.z)((e=>[this.getActions().setInAppState(e)])),(0,no.K)((()=>(0,oo.of)(this.noop()))))}verifyPostalCode(e){return e.pipe((0,To.M)(this.state$),(0,So.w)((([e,t])=>{var i;const o=null!==(i=t.region)&&void 0!==i?i:e;return this.service.verifyZipCode({region:o,zip_code:t.billingAddress.postalCode}).pipe((0,io.z)((e=>{var t;return(0,oo.of)(this.getActions().setBillingAddress({isValid:null===(t=e.data)||void 0===t?void 0:t.is_valid,validating:!1,validated:!0}))})),(0,no.K)((()=>(0,oo.of)(this.getActions().setBillingAddress({validating:!1})))),(0,jo.O)(this.getActions().setBillingAddress({validating:!0})))})))}saveBillingAddress(e){return e.pipe((0,To.M)(this.state$,this.bizContext.state$),(0,io.z)((([e,t,i])=>{var o,n,a,s;const r=null!==(o=t.region)&&void 0!==o?o:e,l=null===(n=i.bizContext)||void 0===n?void 0:n.isMobile,{paymentState:d}=t,{isCustom:c,coinAmount:p}=d,u={enter_from:null!==(a=t.reportState.enterFrom)&&void 0!==a?a:"",is_web_recharged_before:t.transactionHistory.isWebRechargedBefore?"yes":"no",request_page:l?"mobile_h5":"webapp",event_module:c?"customized":"normal",recharge_package:p,charge_from:null!==(s=t.refhash)&&void 0!==s?s:""};return this.service.saveBillingAddress({region:r,zip_code:t.billingAddress.postalCode}).pipe((0,io.z)((e=>{var t;return(null===(t=e.data)||void 0===t?void 0:t.is_saved)?(0,oo.of)(this.getActions().setBillingAddress({isSaved:!0})):(this.report.handleBillingAddressFailed(u),this.rdReport.handleReport(ah),(0,oo.of)(this.getActions().updateOrder({loadingState:3})))})),(0,no.K)((e=>(this.report.handleBillingAddressFailed(u),this.rdReport.handleReport(ah,e),(0,oo.of)(this.getActions().updateOrder({loadingState:3}))))))})))}};(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,Object]),(0,w.__metadata)("design:returntype",void 0)],Oh.prototype,"setUserPermission",null),(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,Object]),(0,w.__metadata)("design:returntype",void 0)],Oh.prototype,"setNotice",null),(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,Object]),(0,w.__metadata)("design:returntype",void 0)],Oh.prototype,"setCoinsConfig",null),(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,Object]),(0,w.__metadata)("design:returntype",void 0)],Oh.prototype,"setCoinsExtra",null),(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,Object]),(0,w.__metadata)("design:returntype",void 0)],Oh.prototype,"setPaymentState",null),(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,String]),(0,w.__metadata)("design:returntype",void 0)],Oh.prototype,"setPaymentMethod",null),(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,Object]),(0,w.__metadata)("design:returntype",void 0)],Oh.prototype,"setExchangePackages",null),(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,Object]),(0,w.__metadata)("design:returntype",void 0)],Oh.prototype,"setExchangeCustomPackage",null),(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,Object]),(0,w.__metadata)("design:returntype",void 0)],Oh.prototype,"setExchangeState",null),(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,Object]),(0,w.__metadata)("design:returntype",void 0)],Oh.prototype,"setCustomCoin",null),(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,Object]),(0,w.__metadata)("design:returntype",void 0)],Oh.prototype,"updateOrder",null),(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,Object]),(0,w.__metadata)("design:returntype",void 0)],Oh.prototype,"updateNonce",null),(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,Object]),(0,w.__metadata)("design:returntype",void 0)],Oh.prototype,"setTransactionHistory",null),(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,Object]),(0,w.__metadata)("design:returntype",void 0)],Oh.prototype,"setTransactionSize",null),(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,Object]),(0,w.__metadata)("design:returntype",void 0)],Oh.prototype,"setInAppState",null),(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,String]),(0,w.__metadata)("design:returntype",void 0)],Oh.prototype,"setRefHash",null),(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,Object]),(0,w.__metadata)("design:returntype",void 0)],Oh.prototype,"setReportState",null),(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,String]),(0,w.__metadata)("design:returntype",void 0)],Oh.prototype,"setEnterFrom",null),(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,Boolean]),(0,w.__metadata)("design:returntype",void 0)],Oh.prototype,"setMobileInputVisible",null),(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,Boolean]),(0,w.__metadata)("design:returntype",void 0)],Oh.prototype,"setCashierModalLoaded",null),(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,Object]),(0,w.__metadata)("design:returntype",void 0)],Oh.prototype,"setBillingAddress",null),(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,Object]),(0,w.__metadata)("design:returntype",void 0)],Oh.prototype,"setDefaultSelectedMethod",null),(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,Boolean]),(0,w.__metadata)("design:returntype",void 0)],Oh.prototype,"setShowVerifyNow",null),(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,String]),(0,w.__metadata)("design:returntype",void 0)],Oh.prototype,"setErrorPrompt",null),(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,Object]),(0,w.__metadata)("design:returntype",void 0)],Oh.prototype,"setRegion",null),(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object]),(0,w.__metadata)("design:returntype",void 0)],Oh.prototype,"resetErrorState",null),(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,Object]),(0,w.__metadata)("design:returntype",void 0)],Oh.prototype,"setKycErrorInfo",null),(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,Number]),(0,w.__metadata)("design:returntype",void 0)],Oh.prototype,"setGridColCount",null),(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,Boolean]),(0,w.__metadata)("design:returntype",void 0)],Oh.prototype,"setExchangeIsConfirmModalVisible",null),(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,Boolean]),(0,w.__metadata)("design:returntype",void 0)],Oh.prototype,"setShowRechargeLimitModal",null),(0,w.__decorate)([(0,Ge.Qm)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Ve.y]),(0,w.__metadata)("design:returntype",void 0)],Oh.prototype,"initPayment",null),(0,w.__decorate)([(0,Ge.Qm)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Ve.y]),(0,w.__metadata)("design:returntype",void 0)],Oh.prototype,"updateCoinsAmount",null),(0,w.__decorate)([(0,Ge.Qm)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Ve.y]),(0,w.__metadata)("design:returntype",void 0)],Oh.prototype,"fetchPermission",null),(0,w.__decorate)([(0,Ge.Qm)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Ve.y]),(0,w.__metadata)("design:returntype",void 0)],Oh.prototype,"fetchNotice",null),(0,w.__decorate)([(0,Ge.Qm)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Ve.y]),(0,w.__metadata)("design:returntype",void 0)],Oh.prototype,"placeOrder",null),(0,w.__decorate)([(0,Ge.Qm)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Ve.y]),(0,w.__metadata)("design:returntype",void 0)],Oh.prototype,"fetchExchangePackages",null),(0,w.__decorate)([(0,Ge.Qm)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Ve.y]),(0,w.__metadata)("design:returntype",void 0)],Oh.prototype,"fetchCustomExchangePackage",null),(0,w.__decorate)([(0,Ge.Qm)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Ve.y]),(0,w.__metadata)("design:returntype",void 0)],Oh.prototype,"setExchangePackageList",null),(0,w.__decorate)([(0,Ge.Qm)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Ve.y]),(0,w.__metadata)("design:returntype",void 0)],Oh.prototype,"updateExchangeAmount",null),(0,w.__decorate)([(0,Ge.Qm)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Ve.y]),(0,w.__metadata)("design:returntype",void 0)],Oh.prototype,"placeExchangeOrder",null),(0,w.__decorate)([(0,Ge.Qm)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Ve.y]),(0,w.__metadata)("design:returntype",void 0)],Oh.prototype,"initExchangeOrderStatus",null),(0,w.__decorate)([(0,Ge.Qm)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Ve.y]),(0,w.__metadata)("design:returntype",void 0)],Oh.prototype,"fetchCoinsConfig",null),(0,w.__decorate)([(0,Ge.Qm)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Ve.y]),(0,w.__metadata)("design:returntype",void 0)],Oh.prototype,"getTransactionHistoryList",null),(0,w.__decorate)([(0,Ge.Qm)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Ve.y]),(0,w.__metadata)("design:returntype",void 0)],Oh.prototype,"loadTransactionHistory",null),(0,w.__decorate)([(0,Ge.Qm)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Ve.y]),(0,w.__metadata)("design:returntype",void 0)],Oh.prototype,"getNonce",null),(0,w.__decorate)([(0,Ge.Qm)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Ve.y]),(0,w.__metadata)("design:returntype",void 0)],Oh.prototype,"init",null),(0,w.__decorate)([(0,Ge.Qm)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Ve.y]),(0,w.__metadata)("design:returntype",void 0)],Oh.prototype,"fetchBalanceAndHistory",null),(0,w.__decorate)([(0,Ge.Qm)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Ve.y]),(0,w.__metadata)("design:returntype",void 0)],Oh.prototype,"updateInAppState",null),(0,w.__decorate)([(0,Ge.Qm)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Ve.y]),(0,w.__metadata)("design:returntype",void 0)],Oh.prototype,"verifyPostalCode",null),(0,w.__decorate)([(0,Ge.Qm)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Ve.y]),(0,w.__metadata)("design:returntype",void 0)],Oh.prototype,"saveBillingAddress",null),Oh=(0,w.__decorate)([(0,Ze.Y)("Recharge"),(0,w.__metadata)("design:paramtypes",[jh,P.r,Vm,_h,ch])],Oh);const Lh=(0,be.Z)("div",{target:"equhrky0"})((({theme:{direction:e}})=>(0,$e.YJ)({direction:e,marginStart:"16px"})),{cursor:"pointer",height:"32px",position:"relative",width:"32px",display:"flex",alignItems:"center",justifyContent:"center"},"label:DivRechargeContainer;");Lh.defaultProps=Object.assign(Object.assign({},Lh.defaultProps),{"data-e2e":"recharge-icon"});const Ih=(0,be.Z)("span",{target:"equhrky1"})({width:"24px",height:"24px",display:"block"},"label:SpanLogoContainer;"),Ah=(0,be.Z)("span",{target:"equhrky2"})((({theme:{direction:e}})=>(0,$e.YJ)({direction:e,marginEnd:"8px"})),{width:"20px",height:"20px",display:"block"},"label:SpanLogoContainerInner;"),Eh=(0,be.Z)("div",{target:"equhrky3"})((({theme:{direction:e}})=>(0,$e.YJ)({direction:e,marginStart:"16px"})),{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",cursor:"pointer",height:"36px",position:"relative",padding:"7px 16px",borderRadius:"2px",border:"1px solid rgba(22, 24, 35, 0.12)",boxSizing:"border-box"},"label:DivRechargeContainerWithText;");Eh.defaultProps=Object.assign(Object.assign({},Eh.defaultProps),{"data-e2e":"recharge-icon"});const Mh=(0,be.Z)("h2",{target:"equhrky4"})((({theme:{direction:e}})=>(0,$e.YJ)({direction:e})),{fontFamily:"Proxima Nova",height:"24px",position:"relative",fontStyle:"normal",whiteSpace:"nowrap",fontWeight:600,fontSize:"16px",lineHeight:"24px",color:"#161823"},"label:H2RechargeTextContainer;"),Rh="HAS_ENTERED_KEY",Fh="HAS_ENTERED_VALUE";var Dh;!function(e){e[e.Showing=0]="Showing",e[e.Clicking=1]="Clicking"}(Dh||(Dh={}));const Bh=()=>(0,m.jsx)(Ah,{children:(0,m.jsx)(Zm.Z,{width:20,height:20},void 0)},void 0),zh=()=>{const e=(0,ji.Q)();return(0,m.jsx)(Zr.u,Object.assign({placement:"bottom",overlay:e("WebApp_coin_recharge_1")},{children:(0,m.jsx)(Ih,{children:(0,m.jsx)(Zm.Z,{width:22.5,height:22.5},void 0)},void 0)}),void 0)},Nh=()=>{const e=(0,ji.Q)(),t=(0,ne.k6)(),i=(0,ae.fz)(Vm),o=(0,ee.mp)(Oh),n=o.userState.showEntry,a=(0,U.useCallback)((()=>{i.handleLiveWebGetCoinShow({show_page:"live_page",is_web_recharged_before:o.transactionHistory.isWebRechargedBefore?"yes":"no",request_page:"webapp",style:"icon_and_text"})}),[o.transactionHistory.isWebRechargedBefore,i]);(0,U.useEffect)((()=>{a()}),[a]);const s=(0,U.useCallback)((()=>{i.handleLiveWebGetCoinClick({show_page:"live_page",is_web_recharged_before:o.transactionHistory.isWebRechargedBefore?"yes":"no",request_page:"webapp",style:"icon_and_text"})}),[o.transactionHistory.isWebRechargedBefore,i]),r=(0,U.useCallback)((()=>{t.push(`${Ym.O5.coin}?enter_from=web_live_nav`)}),[t]),l=(0,U.useCallback)((()=>{s(),r()}),[s,r]);return n?(0,m.jsxs)(Eh,Object.assign({onClick:l},{children:[(0,m.jsx)(Bh,{},void 0),(0,m.jsx)(Mh,{children:e("WebApp_coin_recharge_1")},void 0)]}),void 0):null},Uh=()=>{const[e,t]=(0,U.useState)(!0),[i,o]=(0,U.useState)(!1),n=(0,ne.k6)(),a=(0,ji.Q)(),s=(0,ae.fz)(Vm),r=(0,ze.Lh)((()=>["abTestVersion"]),[]),l=(0,ee.mp)(Oh),d=l.userState.showEntry,c=(0,Fe.xX)(null==r?void 0:r.abTestVersion,"expose_recharge_entry_pc"),p=void 0===c||"v1"===c,u=void 0!==c&&"v2"===c,g=u&&e;(0,U.useEffect)((()=>{e&&u&&(0,Ui.le)(Rh)===Fh&&t(!1),o(!0)}),[e,u]);const h=(0,U.useCallback)((e=>{const t={show_page:"main_page",is_web_recharged_before:l.transactionHistory.isWebRechargedBefore?"yes":"no",request_page:"webapp",style:g?"icon_and_text":"icon_only"};0===e?s.handleLiveWebGetCoinShow(t):1===e&&s.handleLiveWebGetCoinClick(t)}),[s,l.transactionHistory.isWebRechargedBefore,g]),_=(0,U.useCallback)((()=>{h(0)}),[h]);(0,U.useEffect)((()=>{i&&d&&!p&&_()}),[i,e,d,p,_]);const v=(0,U.useCallback)((()=>{(0,Ui.D$)(Rh,Fh)}),[]),y=(0,U.useCallback)((()=>{n.push(`${Ym.O5.coin}?enter_from=web_main_nav`)}),[n]),b=(0,U.useCallback)((()=>{h(1)}),[h]),f=(0,U.useCallback)((()=>{u&&e&&v(),b(),y()}),[u,e,v,y,b]);return!d||p?null:g?(0,m.jsxs)(Eh,Object.assign({onClick:f},{children:[(0,m.jsx)(Bh,{},void 0),(0,m.jsx)(Mh,{children:a("WebApp_coin_recharge_1")},void 0)]}),void 0):(0,m.jsx)(Lh,Object.assign({onClick:f},{children:(0,m.jsx)(zh,{},void 0)}),void 0)},Wh=({alwaysShowRechargeIconAndText:e})=>e?(0,m.jsx)(Nh,{},void 0):(0,m.jsx)(Uh,{},void 0);var $h;!function(e){e.ShowCollectionsTooltip="show_collections_tooltip",e.EnterCollectionsPage="enter_collections_page"}($h||($h={}));const qh=(0,be.Z)("div",{target:"e15tt1x80"})({padding:"12px",width:"180px",wordBreak:"break-word"},"label:DivTipWrapper;"),Hh=(0,be.Z)("p",{target:"e15tt1x81"})((({theme:e})=>(0,$e.GI)({theme:e,typography:"P3",color:"ConstTextInverse"})),"label:PTipDesc;"),Gh=(0,U.memo)((({userPopupActive:e})=>{const t=(0,ji.Q)(),{colors:i,direction:o}=(0,_.u)(),[n,a]=(0,U.useState)(!1),{tooltipPriority:s}=(0,ee.mp)(np),r="ltr"===o?"bottomRight":"bottomLeft";return(0,U.useEffect)((()=>{Vr.iv.getItem(tp)||6!==s?a(!1):(a(!0),c.W.event("show_collections_tooltip"),Vr.iv.setItem(tp,!0))}),[s]),(0,U.useEffect)((()=>{let e;return n&&(e=window.setTimeout((()=>{a(!1)}),15e3)),()=>clearTimeout(e)})),(0,U.useEffect)((()=>{e&&n&&a(!1)}),[n,e]),(0,m.jsx)(fs.G,Object.assign({active:n,backgroundColor:i.ConstSecondary2,placement:r,arrowMargin:"16px",margin:"-12px"},{children:(0,m.jsx)(qh,{children:(0,m.jsx)(Hh,{children:t("tiktok_series_webapp_tooltip_get_started")},void 0)},void 0)}),void 0)}));var Zh,Vh,Qh=i(58494),Yh=i(4785),Kh=i(29308),Jh=i(85101),Xh=i(49179),e_=i(49670),t_=i(31133),i_=i(91485),o_=i(4873),n_=i(46573),a_=i(72593),s_=i(11541),r_=i(75617),l_=i(91110);function d_(){return d_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},d_.apply(this,arguments)}const c_=function(e){return U.createElement("svg",d_({xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 48 48",width:"1em",height:"1em"},e),Zh||(Zh=U.createElement("path",{fillRule:"evenodd",d:"M15.83 4A3.83 3.83 0 0012 7.83V12H7.83A3.83 3.83 0 004 15.83v24.34A3.83 3.83 0 007.83 44h24.34A3.83 3.83 0 0036 40.17v-4.34h4.17A3.83 3.83 0 0044 32V7.83A3.83 3.83 0 0040.17 4H15.83zm16.34 8H16V8h24v23.83h-4v-16A3.83 3.83 0 0032.17 12zM8 40V16h24v24H8z",clipRule:"evenodd"})),Vh||(Vh=U.createElement("path",{fillRule:"evenodd",d:"M19.57 37h1.1c.42 0 .76-.32.76-.71v-1.11c1.5-.2 2.64-.74 3.41-1.52A4.09 4.09 0 0026 30.74c0-1.42-.63-2.39-1.56-3.05a9.05 9.05 0 00-3-1.23v-2.51c.65.2 1.28.5 1.81.95.33.26.85.25 1.13-.1l1.03-1.27c.23-.29.2-.7-.1-.95a7.76 7.76 0 00-3.88-1.69v-1.18c0-.4-.34-.71-.76-.71h-1.1c-.41 0-.76.32-.76.71v1.15c-2.65.36-4.44 2.04-4.44 4.22 0 1.38.6 2.32 1.51 2.96.84.6 1.92.93 2.93 1.19v2.95a5.68 5.68 0 01-2.47-1.31.8.8 0 00-1.16.09l-1.04 1.33c-.2.28-.19.67.09.92 1.1 1 2.63 1.75 4.58 1.97v1.1c0 .4.35.72.76.72zm2.97-6.04c0 .44-.27.97-1.1 1.23v-2.27c.34.13.6.27.79.42.2.18.3.37.3.62zm-4.7-6.06c0-.46.3-.87.97-1.07v1.94a2.59 2.59 0 01-.71-.37c-.19-.15-.26-.3-.26-.5z",clipRule:"evenodd"})))};var p_;!function(e){e.UploadEmoteError="live_sdk_subscription_upload_emote_error",e.GetEmoteDetailSuccess="live_sdk_subscription_get_emote_success",e.GetEmoteDetailError="live_sdk_subscription_get_emote_error",e.PermissionError="live_sdk_subscription_get_permission_error",e.GetBadgeDetailError="live_sdk_subscription_get_badge_detail_error",e.UpdateBadgeError="live_sdk_subscription_update_badge_error",e.GetPrivilegeDetailError="live_sdk_subscription_get_previlege_detail_error"}(p_||(p_={}));let u_=class{constructor(e){this.service=e,this.defaultTag={where:"Subscription"},this.defaultMetrics={count:1},this.reportError=e=>{this.service.sendLog(null==e?void 0:e.message,"error")},this.handleUploadEmoteError=e=>{this.reportError(e),this.service.emitEvent("live_sdk_subscription_upload_emote_error",this.defaultMetrics,this.defaultTag)},this.handleGetEmoteDetailSuccess=()=>{this.service.emitEvent("live_sdk_subscription_get_emote_success",this.defaultMetrics,this.defaultTag)},this.handleGetEmoteDetailError=(e,t)=>{try{const i=Object.assign({},this.defaultTag);(null==e?void 0:e.message)?(i.status_msg=e.message,this.reportError(e)):t&&(i.status_msg=t),this.service.emitEvent("live_sdk_subscription_get_emote_error",this.defaultMetrics,i)}catch(e){}},this.handleGetBadgeDetailError=e=>{this.reportError(e),this.service.emitEvent("live_sdk_subscription_get_badge_detail_error",this.defaultMetrics,this.defaultTag)},this.handleUpdateBadgeError=e=>{this.reportError(e),this.service.emitEvent("live_sdk_subscription_update_badge_error",this.defaultMetrics,this.defaultTag)},this.handlePermissionError=e=>{this.reportError(e),this.service.emitEvent("live_sdk_subscription_get_permission_error",this.defaultMetrics,this.defaultTag)}}};u_=(0,w.__decorate)([(0,so.G)(),(0,w.__metadata)("design:paramtypes",[k.n])],u_);let g_=class{constructor(e){this.fetch=e,this.getSubPermissionInfo=e=>this.fetch.get("/webcast/sub/privilege/get_sub_info",{query:e,baseUrlType:4}),this.getDetails=e=>this.fetch.get("/webcast/sub/privilege/get_sub_privilege_detail",{query:{sec_anchor_id:e,for_anchor:!0},baseUrlType:4}),this.getBadgeDetail=e=>this.fetch.get("/webcast/sub/privilege/get_sub_badge_detail",{query:e,baseUrlType:4}),this.getSubscriberList=e=>this.fetch.get("/webcast/sub/anchor/subscriber/",{query:e,baseUrlType:4}),this.updateBadge=e=>this.fetch.post("/webcast/sub/privilege/update_badge",{body:JSON.stringify(e),headers:{"Content-Type":"application/json"},baseUrlType:4}),this.getEmoteDetail=e=>this.fetch.get("/webcast/sub/privilege/get_sub_emote_detail/",{query:e,baseUrlType:4}),this.updateEmote=e=>this.fetch.post("/webcast/sub/privilege/update_emote",{body:JSON.stringify(Object.assign({},e)),headers:{"Content-Type":"application/json"},baseUrlType:4}),this.uploadImage=e=>{const t=new FormData;return t.append("data",e),this.fetch.post("/webcast/resource/upload/",{query:{scene:"tikcast_subscription"},body:t,omitContentType:!0,baseUrlType:4})}}};var m_;g_=(0,w.__decorate)([(0,so.G)(),(0,w.__metadata)("design:paramtypes",[p.r])],g_),function(e){e[e.Guide=0]="Guide",e[e.Badge=1]="Badge",e[e.Emote=2]="Emote"}(m_||(m_={}));let h_=class extends He.D{constructor(e,t){super(),this.service=e,this.slardar=t,this.defaultState={loading:0,showInitModal:!1,showUpdateModal:!1,enableSubscription:!1,initializedSubscription:!1,emoteStatus:0,badgeStatus:0,hasFetchedPermission:!1,initStep:0,hasEditEmote:!1,hasEditBadge:!1}}setEnableSubscription(e,t){e.enableSubscription=t}setInitializedSubscription(e,t){e.initializedSubscription=t}setBadgeStatus(e,t){e.badgeStatus=t}setEmoteStatus(e,t){e.emoteStatus=t}setLoading(e,t){e.loading=t}setShowInitModal(e,t){e.showInitModal=t}setShowUpdateModal(e,t){e.showUpdateModal=t}setInitStep(e,t){e.initStep=t}setHasFetchedPermission(e,t){e.hasFetchedPermission=t}setHasEditEmote(e,t){e.hasEditEmote=t}setHasEditBadge(e,t){e.hasEditBadge=t}getSubPermissionInfo(e){return e.pipe((0,To.M)(this.state$),(0,Ye.z)((([e,{hasFetchedPermission:t}])=>t?(0,oo.of)(this.noop()):this.service.getSubPermissionInfo(e).pipe((0,io.z)((({status_code:e,data:t})=>{var i,o;if(0!==e||!t)return(0,oo.of)(this.noop());const{enable:n,initialized:a,badge_info:s,emote_info:r}=t;return(0,oo.of)(this.getActions().setEnableSubscription(null!=n&&n),this.getActions().setInitializedSubscription(null!=a&&a),this.getActions().setBadgeStatus(null!==(i=null==s?void 0:s.current_status)&&void 0!==i?i:0),this.getActions().setEmoteStatus(null!==(o=null==r?void 0:r.current_status)&&void 0!==o?o:0),this.getActions().setHasFetchedPermission(!0))})),(0,jo.O)(this.getActions().setLoading(1)),(0,Po.l)(this.getActions().setLoading(2)),(0,no.K)((e=>(this.slardar.handlePermissionError(e),(0,oo.of)(this.noop()))))))))}};(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,Boolean]),(0,w.__metadata)("design:returntype",void 0)],h_.prototype,"setEnableSubscription",null),(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,Boolean]),(0,w.__metadata)("design:returntype",void 0)],h_.prototype,"setInitializedSubscription",null),(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,Number]),(0,w.__metadata)("design:returntype",void 0)],h_.prototype,"setBadgeStatus",null),(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,Number]),(0,w.__metadata)("design:returntype",void 0)],h_.prototype,"setEmoteStatus",null),(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,Number]),(0,w.__metadata)("design:returntype",void 0)],h_.prototype,"setLoading",null),(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,Boolean]),(0,w.__metadata)("design:returntype",void 0)],h_.prototype,"setShowInitModal",null),(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,Boolean]),(0,w.__metadata)("design:returntype",void 0)],h_.prototype,"setShowUpdateModal",null),(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,Number]),(0,w.__metadata)("design:returntype",void 0)],h_.prototype,"setInitStep",null),(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,Boolean]),(0,w.__metadata)("design:returntype",void 0)],h_.prototype,"setHasFetchedPermission",null),(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,Boolean]),(0,w.__metadata)("design:returntype",void 0)],h_.prototype,"setHasEditEmote",null),(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,Boolean]),(0,w.__metadata)("design:returntype",void 0)],h_.prototype,"setHasEditBadge",null),(0,w.__decorate)([(0,Ge.Qm)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Ve.y]),(0,w.__metadata)("design:returntype",void 0)],h_.prototype,"getSubPermissionInfo",null),h_=(0,w.__decorate)([(0,Ze.Y)("SubscriptionCommonModule"),(0,w.__metadata)("design:paramtypes",[g_,u_])],h_);var __=i(47871),v_=i(17296),y_=i(69405),b_=i(24930),f_=i(78757);const x_=(0,be.Z)("div",{target:"e1xkydcv0"})((({theme:e})=>(0,$e.GI)({theme:e,typography:"P3",fontFamily:"Proxima"})),{minWidth:"223px"},"label:DivContainer;"),k_=(0,be.Z)("div",{target:"e1xkydcv1"})({display:"flex",alignItems:"center",position:"relative",height:"50px"},"label:DivHeader;"),w_=(0,be.Z)(f_.Z,{target:"e1xkydcv2"})((({theme:{direction:e}})=>[(0,$e.YJ)({direction:e,marginStart:"28px"}),"ltr"===e?null:{transform:"rotate(180deg)"}]),{width:"20px",height:"20px"},"label:StyledBackIcon;"),S_=(0,be.Z)("p",{target:"e1xkydcv3"})((({theme:e})=>(0,$e.GI)({theme:e,typography:"P2",fontWeight:"semiBold"})),{position:"absolute",left:"50%",transform:"translateX(-50%)"},"label:PTitle;"),C_=(0,be.Z)("ul",{target:"e1xkydcv4"})({listStyle:"none",margin:0,padding:0,maxHeight:"590px",overflowY:"auto"},"label:UlListWrapper;"),j_=(0,be.Z)("li",{target:"e1xkydcv5"})((({theme:e,theme:{colors:t},active:i})=>[{padding:"10px 24px",background:i?t.BGPlaceholderDefault:"transparent",":hover":{background:t.BGPlaceholderDefault}},(0,$e.GI)({theme:e,fontFamily:"Sofia"})]),"label:LiListItem;"),P_=function(e){var t,i;const o=(0,ji.Q)(),{language:n}=null!==(t=(0,ze.Lh)((()=>["language"]),[]))&&void 0!==t?t:{},a=null!==(i=E.tF.reduce(((e,t)=>(t.value===n?e.unshift(t):e.push(t),e)),[]))&&void 0!==i?i:[],{pathname:s,search:l}=(0,ne.TH)(),d=bd(),c=(0,U.useCallback)((e=>()=>{let t;t=(0,ve.Hg)(s)?`/${e}`:(0,r.stringifyUrl)({url:s,query:Object.assign(Object.assign({},(0,r.parse)(l)),{lang:e})}),d({lang:e,url:t})}),[s,d,l]),p=(0,U.useCallback)((e=>()=>{c(e)()}),[c]),u=(0,U.useCallback)((e=>t=>{13===t.keyCode&&(t.stopPropagation(),c(e)())}),[c]),{showModal:g,hideModal:h}=(0,Ll.J)();(0,U.useEffect)((()=>(g(),()=>{h()})),[h,g]);const[_,v]=(0,U.useState)(0),y=(0,U.useCallback)((t=>{9===t.keyCode&&(t.shiftKey?_>0&&v(_-1):(_<a.length-1&&v(_+1),setTimeout((()=>{var t,i;const o=document.querySelector("#lang-setting-popup-list");(null===(t=Array.from(null==o?void 0:o.querySelectorAll("*")))||void 0===t?void 0:t.includes(document.activeElement))||null===(i=e.onBlur)||void 0===i||i.call(e)}),0)))}),[_,e,a.length]);return(0,m.jsxs)(x_,{children:[(0,m.jsxs)(k_,{children:[(0,m.jsx)("i",Object.assign({onClick:e.onBack,tabIndex:0,onKeyDown:e.onKeyDown,"aria-label":o("accessibilityLabels_forYou_nav_language_back_btn"),role:"button"},{children:(0,m.jsx)(w_,{},void 0)}),void 0),(0,m.jsx)(S_,Object.assign({id:Jc},{children:o("Language")}),void 0)]},void 0),(0,m.jsx)(C_,Object.assign({id:"lang-setting-popup-list",onKeyDown:y,role:"listbox","aria-labelledby":Jc},{children:a.map((({value:e,label:t},i)=>(0,m.jsx)(j_,Object.assign({active:n===e||i===_,tabIndex:0,onClick:p(e),onKeyDown:u(e),role:"option"},{children:t}),e)))}),void 0)]},void 0)};var T_=i(10881),O_=i(21666);const L_=(0,be.Z)("ul",{target:"exws2ct0"})((({theme:e})=>(0,$e.GI)({theme:e,typography:"P2",fontWeight:"semiBold",fontFamily:"Proxima"})),{padding:"8px 0",margin:0,minWidth:"223px",listStyle:"none"},"label:UlPopupContainer;"),I_=(0,be.Z)("li",{target:"exws2ct1"})((({theme:{colors:e},withBorder:t,needPadding:i})=>[{padding:i?"10px 8px 10px 16px":0,":hover":{background:e.BGView},display:"flex",justifyContent:"space-between"},t?{borderTop:`1px solid ${e.LineSecondary}`}:null]),"label:LiItemWrapper;"),A_={display:"flex",whiteSpace:"nowrap",flexDirection:"row",width:"100%",alignItems:"center",":hover":{textDecoration:"none"}},E_=(0,be.Z)(En.v,{target:"exws2ct2"})(A_,"label:StyledLinkItem;"),M_=(0,be.Z)(Tn.D,{target:"exws2ct3"})(A_,"label:StyledUserLink;"),R_=(0,be.Z)("div",{target:"exws2ct4"})(A_,"label:DivSettingItem;"),F_=(0,be.Z)("i",{target:"exws2ct5"})((({theme:{colors:e,direction:t}})=>[{width:"8px",height:"8px",borderRadius:"50%",background:e.Primary},(0,$e.YJ)({direction:t,marginStart:"8px"})]),"label:INewIcon;");var D_;F_.defaultProps=Object.assign(Object.assign({},F_.defaultProps),{"data-e2e":"red-dot"}),function(e){e[e.Main=0]="Main",e[e.Language=1]="Language"}(D_||(D_={}));const B_=function({Icon:e,text:t,href:i,renderLink:o,withBorder:n,hasNew:a,forceSSR:s=!1,e2eTag:r,onClick:l,onKeyDown:d,nativeFocusable:c=Boolean(o)||Boolean(i),isNativeComposite:p=!1,ariaLabel:u,children:g,style:h}){const v=(0,ji.Q)(),{direction:y}=(0,_.u)(),b=function(e){const t=(0,$e.YJ)({direction:e,marginEnd:"8px"});return(0,O_.iv)([t,{width:"20px",height:"20px",flex:"0 0 20px"}])}(y),f=(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(e,{className:b},void 0),(0,m.jsx)("span",{children:v(t)},void 0),a&&(0,m.jsx)(F_,{},void 0)]},void 0);return(0,m.jsxs)(I_,Object.assign({withBorder:n,"data-e2e":r,onClick:l,onKeyDown:d,tabIndex:c?void 0:0,needPadding:!c||p,role:"option","aria-label":u},{children:[o?o(f):i?(0,m.jsx)(E_,Object.assign({forceSSR:s,to:null!=i?i:"#",style:h},{children:f}),void 0):(0,m.jsx)(R_,{children:f},void 0),g]}),void 0)},z_="series-red-dot",N_={padding:"10px 8px 10px 16px"},U_=(0,U.memo)((function({active:e,margin:t=-17,e2eTag:i,onKeyDown:o,onBlur:n}){var a,s,l,d,p,g;const{direction:h}=(0,_.u)(),v=(0,ji.Q)(),{pathname:y,search:b}=(0,ne.TH)(),f=(0,ee.qj)(rn),x=(0,ne.k6)(),k=to(),{switchedType:w}=(0,ee.mp)(r_.Rt,{selector:e=>({switchedType:e.switchedType}),dependencies:[]}),S=(0,ae.fz)(Vm),C=(0,ze.Lh)((()=>["user","language","abTestVersion","region"]),[]),j=(0,Ne.h)((()=>["searchVideoForLoggedin","studioDownloadEntrance","liveStudioEnable","liveCenterConfig"]),[]),{isInVideoFeedRedesign:P}=(0,ma.y7)(),{isVideoDetailExperiment:T}=(0,ma.iA)(),O=P||T,L=(0,ee.qj)(Ni.D),I=(0,U.useCallback)((()=>{__.C.handleClickGetApp({enter_method:"under_profile_icon_button"}),L.setIsModalShow(!0)}),[L]),A=(0,U.useCallback)((e=>{13===e.keyCode&&I()}),[I]),M=(0,U.useMemo)((()=>{var e,t;return(null!==(t=null===(e=E.tF.find((({value:e})=>e===(null==C?void 0:C.language))))||void 0===e?void 0:e.label)&&void 0!==t?t:"Language").replace(/[(（].+?$/,"")}),[null==C?void 0:C.language]),R=null==C?void 0:C.user,F=null!==(a=null==C?void 0:C.region)&&void 0!==a?a:"",D=(0,U.useMemo)((()=>y===eo.$J.studioDownload),[y]),{roomCreateInfo:B}=(0,ee.mp)(rn),z=Boolean(null===(s=null==j?void 0:j.liveCenterConfig)||void 0===s?void 0:s.entrance)&&0===(null==B?void 0:B.never_go_live_flag),N=(null!==(d=null===(l=null==j?void 0:j.liveCenterConfig)||void 0===l?void 0:l.showCreatorHubRegion)&&void 0!==d?d:[]).includes(F),W=R?"portrait":"more",$=(0,U.useMemo)((()=>Fo(y)),[y]),[q,H]=(0,ee.b7)(np,{selector:e=>{var t;return null!==(t=e.redDot)&&void 0!==t?t:[]},dependencies:[]});(0,U.useEffect)((()=>{var e;(null===(e=null==C?void 0:C.user)||void 0===e?void 0:e.uid)&&!k&&f.getCreateRoomInfo({})}),[f,null===(p=null==C?void 0:C.user)||void 0===p?void 0:p.uid,k]),(0,U.useEffect)((()=>{var e,t;z&&(t={anchor_id:null===(e=null==C?void 0:C.user)||void 0===e?void 0:e.uid},c.W.event("livesdk_anchor_live_center_entrance_show",{anchor_id:t.anchor_id,enter_from:"profile_hover",app_name:"webapp"}))}),[z,null===(g=null==C?void 0:C.user)||void 0===g?void 0:g.uid]);const[G,Z]=(0,U.useState)(!1),{keyboardMenuItem:V}=(({setShowKeyboardShortcut:e})=>{const t=(0,U.useCallback)((()=>{e(!0),Sn.W.handleEnterKeyboardShortcut(),Vr.u8.setItem("hasCloseKeyboardShortcut",!0)}),[e]),i=(0,U.useCallback)((e=>{13===e.keyCode&&t()}),[t]);return{keyboardMenuItem:(0,m.jsx)(B_,{Icon:T_.Z,text:"desktop_kb_shortcuts_menu",href:null,onClick:t,onKeyDown:i,e2eTag:"keyboard-shortcut-entrance"},void 0)}})({setShowKeyboardShortcut:Z}),Q=(0,ee.mp)(Wi.e,{selector:e=>e.hasNewFeedbackReply,dependencies:[]}),Y=(0,U.useCallback)((()=>{v_.e.handleEnterFeedback(Q?"history":"new")}),[Q]),K=Q?"/feedback/report":"/feedback",J=(0,U.useCallback)((e=>{13===e.keyCode&&Y()}),[Y]),X=(0,U.useCallback)((()=>{Sn.W.handleEnterSet({enter_method:"top_bar"})}),[]),te=(0,U.useCallback)((e=>{13===e.keyCode&&X()}),[X]),oe=(0,U.useCallback)((()=>{Z(!1),Vr.u8.setItem("hasCloseKeyboardShortcut",!0)}),[]),[se,re]=(0,U.useState)(0),[le,de]=(0,U.useState)(),ce=(0,U.useCallback)((e=>{de(e)}),[]);(0,U.useEffect)((()=>{e?lp.handleDarkModeShow():re(0)}),[e]);const pe=(0,U.useCallback)((()=>{yd({enter_method:"top_bar"}),re(1),ce(Jc)}),[ce]),ue=(0,U.useCallback)((e=>{var t;13===e.keyCode&&(pe(),null===(t=document.querySelector("#header-setting-popup-list"))||void 0===t||t.focus())}),[pe]),me=(0,U.useCallback)((()=>{re(0),de(void 0)}),[]),he=(0,U.useCallback)((e=>{var t;13!==e.keyCode&&32!==e.keyCode||(e.preventDefault(),e.stopPropagation(),me(),null===(t=document.querySelector("#header-setting-popup-list"))||void 0===t||t.focus())}),[me]),{value:_e,toggle:ve}=(0,U.useContext)(ge.hb),be=(0,ae.fz)(y_.ec);(0,U.useEffect)((()=>{be.setIsDarkMode(_e)}),[be,_e]);const fe=(0,U.useCallback)((e=>{lp.handleDarkModeClick(),ve(e),ie.Z.set(u.u7,e?"dark":"light",{secure:!0,expires:300,domain:"www.tiktok.com"})}),[ve]),xe=(0,U.useMemo)((()=>v(_e?"accessibilityLabels_settings_darkModeOn":"accessibilityLabels_settings_darkModeOff")),[v,_e]),ke="ltr"===h?"bottomRight":"bottomLeft",we=(0,U.useCallback)((e=>R?(0,m.jsx)(M_,Object.assign({secUid:R.secUid,uniqueId:R.uniqueId,shouldStopPropagation:!1,reportTea:!1,teaParams:{to_user_id:R.uid},style:N_},{children:e}),void 0):null),[R]),Se=(0,U.useCallback)((()=>{Sn.W.handleEnterProfile({enter_method:"top_bar"})}),[]),Ce=(0,U.useCallback)((e=>{13===e.keyCode&&Se()}),[Se]),je=(0,U.useCallback)((()=>{Zc.F.handleClickAnalyticsButton()}),[]),Pe=(0,U.useCallback)((e=>{13===e.keyCode&&je()}),[je]),Te=(0,U.useCallback)((()=>{window.location.href=`${eo.$J.studioDownload}?enter_from=profile`}),[]),Oe=(0,U.useCallback)((e=>{13===e.keyCode&&Te()}),[Te]),Ie=(0,U.useCallback)((()=>{-1!==q.indexOf(2)&&H.updateRedDot({type:2,redirect:`${location.origin}/business-suite`}),Sn.W.handleEnterBusiness()}),[q,H]),Ae=(0,U.useCallback)((e=>{13===e.keyCode&&Ie()}),[Ie]),[Ee,Me]=(0,ee.b7)(Oh);(0,U.useEffect)((()=>{var e;(null==C?void 0:C.user)&&Me.fetchPermission({user:null==C?void 0:C.user,region:null!==(e=null==C?void 0:C.region)&&void 0!==e?e:""})}),[C,Me]);const Re=Ee.userState.showEntry,De=(0,Fe.xX)(null==C?void 0:C.abTestVersion,"expose_recharge_entry_pc"),Be=Re&&!$&&(void 0===De||"v1"===De),[Ue,We]=(0,ee.b7)(h_);(0,U.useEffect)((()=>{var e;(null==C?void 0:C.user)&&We.getSubPermissionInfo({sec_anchor_id:null===(e=null==C?void 0:C.user)||void 0===e?void 0:e.secUid,need_current_state:!0})}),[We,C]);const $e=(null==j?void 0:j.searchVideoForLoggedin)&&[Le.zp.searchHome(),Le.zp.searchVideo()].includes(y)||[Le.zp.messages()].includes(y),qe=(0,r.stringify)(jl()((0,r.parse)(b),"q","t")),He=qe?`?${qe}`:"",Ge=`https://www.tiktok.com${Le.zp.foryou()}${He}`,Ze=`/logout?redirect_url=${encodeURIComponent($e?Ge:"undefined"==typeof window?"":(0,jr.AY)())}`,Ve=(0,U.useCallback)((()=>{S.handleLiveWebGetCoinShow({show_page:"setting",is_web_recharged_before:Ee.transactionHistory.isWebRechargedBefore?"yes":"no",request_page:"webapp",style:"icon_and_text"})}),[S,Ee.transactionHistory.isWebRechargedBefore]);(0,U.useEffect)((()=>{Be&&Ve()}),[Be,Ve]);const Qe=(0,U.useCallback)((()=>{S.handleLiveWebGetCoinClick({show_page:"setting",is_web_recharged_before:Ee.transactionHistory.isWebRechargedBefore?"yes":"no",request_page:"webapp",style:"icon_and_text"})}),[S,Ee.transactionHistory.isWebRechargedBefore]),Ye=(0,U.useCallback)((()=>{Qe(),x.push(`${Ym.O5.coin}?enter_from=web_main_nav`)}),[Qe,x]),Ke=(0,U.useCallback)((e=>{13===e.keyCode&&Ye()}),[Ye]),Je=(0,U.useMemo)((()=>!Vr.iv.getItem(z_)||(null==R?void 0:R.hasCollectionsRedDot)),[null==R?void 0:R.hasCollectionsRedDot]),Xe=(0,U.useCallback)((()=>{c.W.event("enter_collections_page",{enterMethod:"top_bar"}),Vr.iv.setItem(z_,!0)}),[]),et=(0,U.useCallback)((e=>{13===e.keyCode&&Xe()}),[Xe]),tt=(0,U.useCallback)((e=>(0,m.jsx)(c_,Object.assign({},e),void 0)),[]),it=ye(y),ot=(0,U.useCallback)((e=>{if(9===e.keyCode){if(!e.target)return;setTimeout((()=>{var e;try{const t=document.querySelector("#header-setting-popup-list");(null===(e=Array.from(null==t?void 0:t.querySelectorAll("*")))||void 0===e?void 0:e.includes(document.activeElement))||null==n||n()}catch(e){console.error(e)}}),0)}null==o||o(e)}),[n,o]),{colors:nt}=(0,_.u)();return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(fs.G,Object.assign({backgroundColor:nt.BGSecondary,placement:ke,active:e,arrowMargin:15,margin:t,id:Kc,onKeyDown:ot,ariaLabelledBy:le},{children:(()=>{var e,t;switch(se){case 0:return(0,m.jsxs)(L_,Object.assign({"data-e2e":i,id:Kc,role:"listbox"},{children:[R&&(0,m.jsx)(B_,{renderLink:we,onClick:Se,onKeyDown:Ce,Icon:Qh.Z,text:"View profile",href:null,e2eTag:"profile-info"},void 0),Be&&(0,m.jsx)(B_,{Icon:Zm.Z,text:"WebApp_coin_recharge_1",href:"/coin?enter_from=web_main_nav",forceSSR:!0,e2eTag:"recharge-entrance",onClick:Ye,onKeyDown:Ke,style:N_},void 0),Boolean(null==R?void 0:R.hasCollectionsAccess)&&(0,m.jsx)(B_,{Icon:tt,text:"tiktok_series_webapp_option",href:"/series",forceSSR:!0,e2eTag:"tiktok-series-entrance",hasNew:Je,onClick:Xe,onKeyDown:et,style:N_},void 0),Boolean((null==R?void 0:R.analyticsOn)&&!(null===(e=R.proAccountInfo)||void 0===e?void 0:e.businessSuiteEntrance))&&(0,m.jsx)(B_,{Icon:Yh.Z,text:"view_analytics",forceSSR:!0,href:"/analytics",e2eTag:"analytics-entrance",onClick:je,onKeyDown:Pe,style:N_},void 0),!D&&(null==j?void 0:j.liveStudioEnable)&&R&&!R.ftcUser&&(0,m.jsx)(B_,{Icon:Kh.Z,text:"ls_live_studio",forceSSR:!0,href:null,e2eTag:"live-studio-entrance",onClick:Te,onKeyDown:Oe},void 0),(null===(t=null==R?void 0:R.proAccountInfo)||void 0===t?void 0:t.businessSuiteEntrance)&&"personal_account"!==w&&(0,m.jsx)(B_,{Icon:Jh.Z,text:"web_business_suite_entry",href:-1!==q.indexOf(2)?"":"/business-suite",forceSSR:!0,hasNew:-1!==q.indexOf(2),onClick:Ie,onKeyDown:Ae,e2eTag:"business-entrance",style:N_},void 0),z&&(0,m.jsx)(B_,{Icon:Xh.Z,text:"live_center_title",href:`${Ks}?enter_from=profile_hover&lang=${null==C?void 0:C.language}`,forceSSR:!0,e2eTag:"live-center",style:N_},void 0),N&&(0,m.jsx)(B_,{Icon:e_.Z,text:"live_creator_hub_name",href:`https://www.tiktok.com/live/creators?enter_from=${W}&lang=${null==C?void 0:C.language}&region=${null==C?void 0:C.region}`,forceSSR:!0,e2eTag:"live-creator-hub",style:N_},void 0),R&&(0,m.jsx)(B_,{Icon:t_.Z,text:"settings",href:"/setting",onClick:X,onKeyDown:te,forceSSR:!0,e2eTag:"settings-entrance",style:N_},void 0),(0,m.jsx)(B_,{Icon:i_.Z,text:M,href:null,onClick:pe,onKeyDown:ue,e2eTag:"language-select",ariaLabel:v("accessibilityLabels_settings_language",{language:M})},void 0),(0,m.jsx)(B_,{Icon:o_.Z,text:"Feedback and help",href:K,onClick:Y,onKeyDown:J,hasNew:Q,forceSSR:!0,e2eTag:"feedback-entrance",style:N_},void 0),V,it&&(0,m.jsx)(B_,Object.assign({Icon:n_.Z,text:"pc_web_dark_mode",href:null,forceSSR:!0,nativeFocusable:!0,isNativeComposite:!0},{children:(0,m.jsx)(b_.r,{checked:_e,onChange:fe,ariaLabel:xe},void 0)}),void 0),O&&(0,m.jsx)(B_,{onClick:I,onKeyDown:A,Icon:a_.Z,text:"get_app",href:null,forceSSR:!0},void 0),R&&(0,m.jsx)(B_,{withBorder:!0,Icon:s_.Z,text:"Log out",forceSSR:!0,href:Ze,e2eTag:"logout-entrance",style:N_},void 0)]}),void 0);case 1:return(0,m.jsx)(P_,{onBack:me,onKeyDown:he,onBlur:n},void 0);default:return null}})()}),void 0),(0,m.jsx)(Yt.u_,Object.assign({visible:G,onClose:oe,maskCloseable:!1,cancelMouseLeaveBubble:!0},{children:(0,m.jsx)(l_.e,{onClose:oe,isModal:!0},void 0)}),void 0)]},void 0)}));var W_=i(60435);const $_=(0,be.Z)("div",{target:"e13wiwn60"})({display:"flex",flexDirection:"row",alignItems:"center",position:"relative"},"label:DivHeaderRightContainer;"),q_=(0,be.Z)("button",{target:"e13wiwn61"})($e.Ph,(({theme:e})=>[(0,$e.GI)({theme:e,typography:"P2",fontFamily:"Sofia",fontWeight:"semiBold",color:"Primary"}),(0,$e.YJ)({direction:e.direction,marginStart:"6px",marginEnd:"-24px"})]),{minWidth:"88px",padding:"6px 8px",userSelect:"none",cursor:"pointer"},"label:ButtonSignUp;"),H_=(0,be.Z)(Ut.W,{target:"e13wiwn62"})((({theme:e,theme:{direction:t}})=>[(0,$e.GI)({theme:e,typography:"P2",fontFamily:"Proxima",fontWeight:"bold"}),(0,$e.YJ)({direction:t,marginStart:"16px"}),{minWidth:"100px"}]),"label:StyledLoginButton;");H_.defaultProps=Object.assign(Object.assign({},H_.defaultProps),{"data-e2e":"top-login-button"});const G_=(0,be.Z)("div",{target:"e13wiwn63"})((({theme:{direction:e},isLoggedin:t})=>[(0,$e.YJ)({direction:e,marginStart:t?"23px":"16px",marginEnd:t?"0":"-10px",paddingStart:"5px"}),{alignItems:"center",width:"32px",height:"32px",paddingTop:"5px"}]),"label:DivEhIconContainer;");G_.defaultProps=Object.assign(Object.assign({},G_.defaultProps),{"data-e2e":"eh-header-icon"});const Z_=(0,be.Z)("i",{target:"e13wiwn64"})((({theme:{direction:e}})=>(0,$e.YJ)({direction:e,marginStart:"16px"})),{position:"relative",cursor:"pointer",fontStyle:"normal",padding:"0 4px","&:focus-visible":{outline:"2px solid #5E9ED6"}},"label:IMoreIconWrapper;");Z_.defaultProps=Object.assign(Object.assign({},Z_.defaultProps),{"data-e2e":"see-more-icon"});const V_=(0,be.Z)(W_.Z,{target:"e13wiwn65"})({width:"20px",height:"20px",display:"block"},"label:StyledEllipsisVertical;"),Q_=(0,be.Z)("i",{target:"e13wiwn66"})((({theme:e})=>[(0,$e.YJ)({direction:e.direction,right:"unset",left:0}),{position:"absolute",width:"8px",height:"8px",borderRadius:"50%",background:e.colors.Primary,border:`1px solid ${e.colors.ConstTextInverse}`,boxSizing:"content-box",right:0,top:"-4px"}]),"label:IStyledRedDot;");var Y_;Q_.defaultProps=Object.assign(Object.assign({},Q_.defaultProps),{"data-e2e":"profile-icon-red"}),function(e){e.ClickEntrance="click_upload_entrance"}(Y_||(Y_={}));const K_=e=>{c.W.event("click_upload_entrance",e)};var J_=i(17828);const X_=(0,be.Z)("div",{target:"e18d3d940"})((({needMarginLeft:e})=>({marginLeft:e?"16px":"0px",position:"relative",height:"36px","a:hover":[{textDecoration:"none"}],"@media screen and (max-width: 479px)":{display:"none"}})),"label:DivUploadContainer;");X_.defaultProps=Object.assign(Object.assign({},X_.defaultProps),{"data-e2e":"upload-icon"});const ev=(0,be.Z)(En.v,{target:"e18d3d941"})((({theme:e})=>(0,$e.GI)({theme:e,typography:"P2",fontWeight:"bold",fontFamily:"Proxima"})),{display:"block",":hover":{textDecoration:"none"}},"label:StyledLinkText;");ev.defaultProps=Object.assign(Object.assign({},ev.defaultProps),{"data-e2e":"upload-icon"});const tv=(0,be.Z)("div",{target:"e18d3d942"})({padding:"16px",width:"282px",wordBreak:"break-word"},"label:DivTipWrapper;"),iv=(0,be.Z)("div",{target:"e18d3d943"})((({theme:{colors:e}})=>({minWidth:"110px",padding:"0 16px",height:"36px",border:"1px solid rgba(22, 24, 35, 0.12)",borderRadius:"2px",display:"flex",alignItems:"center",justifyContent:"center",background:e.BGSecondary2,":hover":{backgroundColor:e.BGView},":target":{backgroundColor:"rgba(22, 24, 35, 0.06)"}})),"label:DivUpload;"),ov=(0,be.Z)(J_.Z,{target:"e18d3d944"})({height:"20px",width:"20px",marginRight:"8px"},"label:StyledPlusIcon;"),nv=(0,be.Z)("span",{target:"e18d3d945"})({fontStyle:"normal",fontWeight:600,fontSize:"16px",lineHeight:"24px",color:"ConstTextInverse2"},"label:SpanUploadText;"),av=(0,be.Z)("h3",{target:"e18d3d946"})((({theme:e})=>(0,$e.GI)({theme:e,typography:"P2",color:"ConstTextInverse",fontWeight:"semiBold"})),{marginBottom:"4px"},"label:H3TipTitle;"),sv=(0,be.Z)("p",{target:"e18d3d947"})((({theme:e})=>(0,$e.GI)({theme:e,typography:"P3",color:"ConstTextInverse"})),"label:PTipDesc;"),rv=(0,be.Z)("div",{target:"e18d3d948"})({display:"flex",justifyContent:"flex-end"},"label:DivButtonWrapper;"),lv=(0,be.Z)("button",{target:"e18d3d949"})($e.Ph,(({theme:e})=>(0,$e.GI)({theme:e,typography:"P2",color:"ConstTextInverse",fontWeight:"semiBold"})),{cursor:"pointer"},"label:ButtonOk;"),dv=(0,be.Z)(lv,{target:"e18d3d9410"})({width:"100%",height:"36px",borderRadius:"4px",backgroundColor:"rgba(255, 255, 255, .12)",marginTop:"8px"},"label:StyledButtonUpload;"),cv=function({needMarginLeft:e}){var t,i;const o=(0,ji.Q)(),{colors:n,direction:a}=(0,_.u)(),[{tooltipPriority:s,uploadTooltipType:r},l]=(0,ee.b7)(np),d=(0,ze.Lh)((()=>["user"]),[]),c=null!==(i=null===(t=null==d?void 0:d.user)||void 0===t?void 0:t.longVideoMinutes)&&void 0!==i?i:0,[p,u]=(0,U.useState)(!1),{lang:g}=(0,ee.mp)(V.G,{selector:e=>({lang:e.lang}),dependencies:[]}),h=(0,U.useCallback)((()=>{l.setTooltipPriority(2),l.postScheduleRecord({ack_type:1})}),[l]),{isInVideoFeedRedesign:v}=(0,ma.y7)(),y=(0,U.useMemo)((()=>v?{play_mode:"swiper_mode"}:{}),[v]),b=(0,U.useCallback)((()=>{K_(Object.assign({enter_method:"navigation_bar"},y)),pa({target:"upload",order:1})}),[y]);(0,U.useEffect)((()=>{1===s?setTimeout((()=>{u(!0)}),1e3):u(!1)}),[s]),(0,U.useEffect)((()=>{p&&1===r&&(Vr.iv.setItem(ep,!0),setTimeout((()=>{l.setTooltipPriority(2)}),15e3))}),[p,r,l]);const f=(0,U.useCallback)((()=>{l.setTooltipPriority(2),window.location.href=`https://www.tiktok.com/upload?lang=${g}`}),[l,g]),x=(0,m.jsxs)(iv,{children:[(0,m.jsx)(ov,{},void 0),(0,m.jsx)(nv,{children:o("Upload")},void 0)]},void 0),k="ltr"===a?"bottomRight":"bottomLeft";return(0,m.jsxs)(X_,Object.assign({needMarginLeft:e},{children:[(0,m.jsx)(En.v,Object.assign({forceSSR:!0,to:`/upload?lang=${g}`,onClick:b,ariaLabel:o("accessibilityLabels_forYou_nav_upload_btn")},{children:x}),void 0),(0,m.jsx)(fs.G,Object.assign({active:p,backgroundColor:n.ConstSecondary2,placement:k,arrowMargin:"16px",margin:"-12px"},{children:(0,m.jsxs)(tv,{children:[(0,m.jsx)(av,{children:o(0===r?"scheduler_welcome_tooltip_title":"new_video_length_tooltip_header")},void 0),(0,m.jsx)(sv,{children:0===r?o("scheduler_welcome_tooltip_des"):o("new_feature_guidance_text",{num:c}).replace(/%\w/,String(c))},void 0),0===r?(0,m.jsx)(rv,{children:(0,m.jsx)(lv,Object.assign({onClick:h},{children:o("OK")}),void 0)},void 0):(0,m.jsx)(dv,Object.assign({onClick:f},{children:o("new_feature_guidance_Upload")}),void 0)]},void 0)}),void 0)]}),void 0)},pv=function(){const e=(0,ji.Q)(),t=(0,ee.qj)(hi.r),{isInVideoFeedRedesign:i}=(0,ma.y7)(),o=(0,U.useMemo)((()=>i?{play_mode:"swiper_mode"}:{}),[i]),n=(0,U.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),K_(Object.assign({enter_method:"navigation_bar"},o)),t.openModal({query:{enter_method:"click_navigation_bar",redirect_url:"https://www.tiktok.com/upload/"}})}),[o,t]);return(0,m.jsx)("div",{children:(0,m.jsx)(ev,Object.assign({forceSSR:!0,to:"/upload",onClick:n,ariaLabel:e("accessibilityLabels_forYou_nav_upload_btn")},{children:(0,m.jsxs)(iv,{children:[(0,m.jsx)(ov,{},void 0),(0,m.jsx)(nv,{children:e("Upload")},void 0)]},void 0)}),void 0)},void 0)},uv=function({alwaysShowRechargeIconAndText:e=!1}){var t,i,o;const n=(0,ji.Q)(),{user:a}=(0,ee.mp)(V.G,{selector:e=>{var t;return{user:null===(t=e.appContext)||void 0===t?void 0:t.user}},dependencies:[]}),{deviceLimitRegisterExpired:s,signUpOpen:r=!0}=(0,ee.mp)(P.r,{selector:e=>{var t,i,o;return{deviceLimitRegisterExpired:null===(t=e.bizContext)||void 0===t?void 0:t.deviceLimitRegisterExpired,signUpOpen:null===(o=null===(i=e.bizContext)||void 0===i?void 0:i.config)||void 0===o?void 0:o.signUpOpen}},dependencies:[]}),[l,d]=(0,U.useState)(!0),{hasNewFeedbackReply:p}=(0,ee.mp)(Wi.e),u=(0,ee.qj)(hi.r),g=(0,ze.Lh)((()=>["abTestVersion"]),[]),h=null!==(t=(0,Fe.N8)(null==g?void 0:g.abTestVersion,"search_video"))&&void 0!==t?t:"v1",{user:_}=null!==(i=(0,ze.Lh)((()=>["user"]),[]))&&void 0!==i?i:{},v=Boolean(_),[y,b]=(0,ee.b7)(np,{selector:e=>-1!==e.redDot.indexOf(1),dependencies:[]}),f=(0,U.useCallback)(((e=!1)=>()=>{u.openModal({closeable:!0,isSignup:e,query:{enter_method:"click_top_bar",redirect_url:(0,jr.AY)(),type:"general_search"!==c.W.commonParams.page_name&&"search_video"!==c.W.commonParams.page_name&&"search_user"!==c.W.commonParams.page_name||"v3"!==h&&"v4"!==h||v?"":"loginsearchmore"}})}),[u,h,v]),{active:x,handleMouseEnter:k,handleMouseLeave:w}=(0,bs.R)(500),S=(0,Fe.xX)(null==g?void 0:g.abTestVersion,"expose_recharge_entry_pc"),C=void 0!==S&&"v2"===S,j=C&&l,T="v3"===(null!==(o=(0,Fe.N8)(null==g?void 0:g.abTestVersion,"studio_web_eh_entrance"))&&void 0!==o?o:"v1"),O="https://effecthouse.tiktok.com/?utm_source=tiktok_webapp_main&utm_content=header";(0,U.useEffect)((()=>{T&&ua({enter_method:"icon"})}),[T]),(0,U.useEffect)((()=>{l&&C&&"HAS_ENTERED_VALUE"===(0,Ui.le)("HAS_ENTERED_KEY")&&d(!1)}),[l,C]);const L=(0,U.useCallback)((()=>{y&&b.updateRedDot({type:1}),k(),Zc.F.handleProfileHoveShow()}),[y,b,k]),I=(0,U.useCallback)((e=>{const t=document.querySelector("#header-more-menu-icon"),i=e.target===t;13===e.keyCode||32===e.keyCode?(e.stopPropagation(),i&&L()):9===e.keyCode&&e.shiftKey&&x&&i&&w()}),[x,L,w]),A=(0,U.useCallback)((e=>{27===e.keyCode&&(e.preventDefault(),e.stopPropagation(),w())}),[w]),E=(0,U.useCallback)((()=>{ga({enter_method:"click_icon"})}),[]);if(!a)return(0,m.jsxs)($_,{children:[(0,m.jsx)(pv,{},void 0),!s&&r&&(0,m.jsx)(q_,Object.assign({onClick:f(!0)},{children:n("common_notification_unlogged_button")}),void 0),(0,m.jsx)(H_,Object.assign({size:"medium",buttonTheme:"primary",onClick:f(!1)},{children:n("Log In")}),void 0),T&&(0,m.jsx)(G_,Object.assign({isLoggedin:!1},{children:(0,m.jsx)(Zr.u,Object.assign({overlay:n("webapp_ttehEntrance_createEffects"),placement:"bottom"},{children:(0,m.jsx)(En.v,Object.assign({forceSSR:!0,to:O,target:"_blank",onClick:E,ariaLabel:n("accessibilityLabels_nav_effects_btn")},{children:(0,m.jsx)(Qc,{height:"22px",width:"22px"},void 0)}),O)}),void 0)}),void 0),(0,m.jsxs)(Z_,Object.assign({id:Yc,tabIndex:0,onMouseEnter:L,onMouseLeave:w,onKeyDown:I,role:"button","aria-label":n("accessibilityLabels_forYou_nav_settings_btn"),"aria-expanded":x,"aria-controls":x?Kc:""},{children:[(0,m.jsx)(V_,{},void 0),(0,m.jsx)(U_,{active:x,e2eTag:"see-more-popup",margin:-13,onKeyDown:A,onBlur:w},void 0)]}),void 0),(0,m.jsx)(mp,{userPopupActive:x},void 0)]},void 0);const{uniqueId:M,secUid:R}=a;return(0,m.jsxs)($_,{children:[!j&&(0,m.jsx)(cv,{},void 0),T&&(0,m.jsx)(G_,Object.assign({isLoggedin:!0},{children:(0,m.jsx)(Zr.u,Object.assign({overlay:n("webapp_ttehEntrance_createEffects"),placement:"bottom"},{children:(0,m.jsx)(En.v,Object.assign({forceSSR:!0,to:O,target:"_blank",onClick:E,ariaLabel:n("accessibilityLabels_nav_effects_btn")},{children:(0,m.jsx)(Qc,{height:"22px",width:"22px"},void 0)}),O)}),void 0)}),void 0),(null==a?void 0:a.hasIMPermission)&&j&&(0,m.jsx)(Uc,{removeMarginLeft:!0},void 0),(null==a?void 0:a.hasIMPermission)&&!j&&(0,m.jsx)(Uc,{},void 0),(0,m.jsx)(Fm,{},void 0),j&&(0,m.jsx)(cv,{needMarginLeft:!0},void 0),(0,m.jsx)(Wh,{alwaysShowRechargeIconAndText:e},void 0),(0,m.jsx)(Dm,{children:(0,m.jsxs)(sp,Object.assign({id:Yc,onMouseEnter:L,onMouseLeave:w,onKeyDown:I,role:"button",ariaLabel:n("accessibilityLabels_forYou_nav_settings_btn"),ariaExpanded:x},{children:[(p||y)&&(0,m.jsx)(Q_,{className:"red-dot"},void 0),(0,m.jsx)(U_,{margin:-12,active:x,e2eTag:"profile-popup",onKeyDown:A,onBlur:w},void 0)]}),void 0)},void 0),(0,m.jsx)(Hm,{uniqueId:M,secUid:R,userPopupActive:x},void 0),(0,m.jsx)(mp,{userPopupActive:x},void 0),(null==a?void 0:a.hasCollectionsAccess)&&(0,m.jsx)(Gh,{userPopupActive:x},void 0)]},void 0)};var gv,mv;!function(e){e.Show="browser_push_notifications_show",e.Granted="browser_push_notifications_allow",e.Denied="browser_push_notifications_block",e.Default="browser_push_notifications_close"}(gv||(gv={})),function(e){e.Show="guide_permission_popup_show",e.Yes="guide_permission_popup_turn_on",e.No="guide_permission_popup_cancel"}(mv||(mv={}));var hv,_v=i(15608),vv=i(96980),yv=i(14716),bv=i(18791);function fv(){return e=this,t=void 0,n=function*(){const{FCM:e}=yield Promise.all([i.e(9207),i.e(7954),i.e(5079),i.e(9602),i.e(9026),i.e(1565)]).then(i.bind(i,22343));return e},new((o=void 0)||(o=Promise))((function(i,a){function s(e){try{l(n.next(e))}catch(e){a(e)}}function r(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}l((n=n.apply(e,t||[])).next())}));var e,t,o,n}!function(e){e.GrantedSuccess="GRANTED_SUCCESS",e.GrantedFailed="GRANTED_FAILED",e.Denied="DENIED",e.Default="DEFAULT",e.Failed="FAILED"}(hv||(hv={}));const xv="web-push-permission";let kv=class{constructor(e){this.security=e}initFCM(e,t){const i={firebaseConfig:{apiKey:"AIzaSyDHGqRfibWT6DffZBTYlhXfTQHAP_ri1MI",appId:"1:943363548815:web:f9a03b69b49a48fb5c72fa",authDomain:"tiktok-webapp.firebaseapp.com",databaseURL:"https://tiktok-webapp.firebaseio.com",measurementId:"G-WTKRD0C8TF",messagingSenderId:"943363548815",projectId:"tiktok-webapp",storageBucket:"tiktok-webapp.appspot.com"},messagingConfig:{vapidKey:"BAxZo-Q87DGZeDuCG33n7l9hsdXb2Zwf3-Cc9_NPuaNZvqMCHhCtCm-5kivnFwhVef1N06SoKbWlJBpZU0jcfa4",onMessageShow:!0,requestPermission:!1},commonParameter:{aid:1988,sender_id:17,app_region:e,app_language:t,version_code:"1.0.0"}};return(0,_v.D)([fv(),this.security.init$.pipe((0,vv.q)(1))]).pipe((0,io.z)((([e])=>{const t=new e(i.firebaseConfig,i.messagingConfig,i.commonParameter);return(0,yv.D)(t.requestPermission().then((e=>{switch(e){case"granted":return t.onTokenRefresh().then((()=>"GRANTED_SUCCESS")).catch((()=>"GRANTED_FAILED"));case"denied":return"DENIED";default:return"DEFAULT"}})))})),(0,no.K)((()=>(console.warn("fcm init failed"),(0,oo.of)("FAILED")))))}getPushPermissionAllowed(){var e;try{const t=null!==(e=Vr.iv.getItem(xv))&&void 0!==e?e:[],i=Date.now();return 0===t.length?(t.unshift(i),Vr.iv.setItem(xv,t),(0,oo.of)(!0)):i-t[0]<864e5?(0,oo.of)(!1):t.length<3?(t.unshift(i),Vr.iv.setItem(xv,t),(0,oo.of)(!0)):i-t[2]<2592e6?(0,oo.of)(!1):(t.unshift(i),Vr.iv.setItem(xv,t.slice(0,3)),(0,oo.of)(!0))}catch(e){return(0,oo.of)(!1)}}};kv=(0,w.__decorate)([(0,so.G)(),(0,w.__metadata)("design:paramtypes",[bv.$])],kv);let wv=class extends He.D{constructor(e){super(),this.service=e,this.defaultState={pushPermissionOn:!1}}setPushPermissionOn(e,t){e.pushPermissionOn=t}initFCM(e){return e.pipe((0,Co.b)((({showMethod:e})=>{e&&(e=>{c.W.event("browser_push_notifications_show",{show_method:e})})(e)})),(0,io.z)((({region:e,lang:t,showMethod:i,callback:o})=>this.service.initFCM(e,t).pipe((0,Co.b)((e=>{if(null==o||o(e),i)switch(e){case"GRANTED_SUCCESS":case"GRANTED_FAILED":(e=>{c.W.event("browser_push_notifications_allow",{show_method:e})})(i);break;case"DENIED":(e=>{c.W.event("browser_push_notifications_block",{show_method:e})})(i);break;case"DEFAULT":(e=>{c.W.event("browser_push_notifications_close",{show_method:e})})(i)}})),(0,Qe.U)((()=>this.noop()))))))}judgeIfPush(e){return e.pipe((0,io.z)((({region:e,lang:t})=>this.service.getPushPermissionAllowed().pipe((0,Qe.U)((i=>i?this.getActions().initFCM({region:e,lang:t,showMethod:"direct_ask_notification_permission"}):this.noop())),(0,no.K)((()=>(0,oo.of)(this.noop())))))))}};(0,w.__decorate)([(0,Ge.lF)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Object,Boolean]),(0,w.__metadata)("design:returntype",void 0)],wv.prototype,"setPushPermissionOn",null),(0,w.__decorate)([(0,Ge.Qm)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Ve.y]),(0,w.__metadata)("design:returntype",void 0)],wv.prototype,"initFCM",null),(0,w.__decorate)([(0,Ge.Qm)(),(0,w.__metadata)("design:type",Function),(0,w.__metadata)("design:paramtypes",[Ve.y]),(0,w.__metadata)("design:returntype",void 0)],wv.prototype,"judgeIfPush",null),wv=(0,w.__decorate)([(0,Ze.Y)("Push"),(0,w.__metadata)("design:paramtypes",[kv])],wv);var Sv=i(21985);const Cv=()=>{const{pathname:e}=(0,ne.TH)();return(0,U.useMemo)((()=>(0,ve.BL)(e)||(0,ve.I8)(e)||(0,ve.Ho)(e)),[e])},jv=(0,U.memo)((e=>{const{isInVideoFeedRedesign:t}=(0,ma.y7)(),{isDetailPage:i}=(0,Sv.U)(),o=Cv(),n=t||i||o?Hd:qd;return(0,m.jsx)(n,Object.assign({},e),void 0)}));var Pv=i(4139);const Tv=(0,Pv.Z)("div",{target:"e1gxxrd20"})((({theme:{colors:e}})=>({position:"absolute",boxSizing:"border-box",width:"400px",padding:"32px",top:"0",left:"50%",transform:"translateX(-50%)",background:e.BGPrimary,boxShadow:"0 2px 12px rgba(0, 0, 0, .12)",borderRadius:"8px",zIndex:2,textAlign:"center"})),"label:DivPushPermissionContainer;"),Ov=(0,Pv.Z)("div",{target:"e1gxxrd21"})((({theme:e})=>(0,$e.GI)({theme:e,typography:"P0",fontWeight:"bold",fontFamily:"Proxima"})),"label:DivPushPermissionTitle;"),Lv=(0,Pv.Z)("div",{target:"e1gxxrd22"})((({theme:e})=>(0,$e.GI)({theme:e,typography:"P2",fontFamily:"Proxima"})),(({theme:{colors:e}})=>({margin:"8px 0 24px",color:e.TextPrimary})),"label:DivPushPermissionSubtitle;"),Iv=(0,Pv.Z)("div",{target:"e1gxxrd23"})({display:"flex","flex-direction":"row","justify-content":"space-between","align-items":"center"},"label:DivPushPermissionButtonContainer;"),Av=(0,Pv.Z)(Ut.W,{target:"e1gxxrd24"})({"min-width":"164px"},"label:StyledButton;"),Ev=function({permissionCallback:e}){const t=(0,ji.Q)();(0,U.useEffect)((()=>{c.W.event("guide_permission_popup_show")}),[]);const i=(0,U.useCallback)((()=>{e("denied"),c.W.event("guide_permission_popup_cancel")}),[e]),o=(0,U.useCallback)((()=>{e("granted"),c.W.event("guide_permission_popup_turn_on")}),[e]);return(0,m.jsxs)(Tv,{children:[(0,m.jsx)(Ov,{children:t("push_popup_title")},void 0),(0,m.jsx)(Lv,{children:t("push_popup_content")},void 0),(0,m.jsxs)(Iv,{children:[(0,m.jsx)(Av,Object.assign({buttonTheme:"default",size:"largeNew",onClick:i},{children:t("push_popup_btn1")}),void 0),(0,m.jsx)(Av,Object.assign({buttonTheme:"primary",size:"largeNew",onClick:o},{children:t("push_popup_btn2")}),void 0)]},void 0)]},void 0)},Mv=(0,Pv.Z)("div",{target:"e15qqn8h0"})({position:"relative",minWidth:"200px",padding:"0 8px"},(0,$e.f1)({max:767,style:{display:"none"}}),"label:DivHeaderCenterContainer;"),Rv=(0,Pv.Z)("div",{target:"e15qqn8h1"})({display:"flex",alignItems:"center",minWidth:"300px"},"label:DivHeaderLeftContainer;"),Fv=(0,U.memo)(function(e){const t=t=>{var i;const{pathname:o}=(0,ne.TH)(),n=(0,jr.BB)(o),a=(0,U.useMemo)((()=>"unknown"===n?"":`main-content-${n}`),[n]),s=null!==(i=t.focusedTargetID)&&void 0!==i?i:a,[r,l]=(0,U.useState)(!1),d=(0,U.useCallback)((e=>{9!==e.keyCode||e.shiftKey||l(!1)}),[]),c=(0,U.useCallback)((e=>{9===e.keyCode&&e.shiftKey&&l(!1)}),[]),p=(0,U.useCallback)((e=>{9===e.keyCode?l(!1):32===e.keyCode&&(e.preventDefault(),e.stopPropagation(),Wd(s),l(!1))}),[s]),u=(0,U.useCallback)((e=>{e.preventDefault(),l(!1),Wd(s)}),[s]),g=(0,U.useMemo)((()=>Object.assign(Object.assign({},t),{handleLeftKeyDown:d,handleRightKeyDown:c,SkipNavBtn:(0,m.jsx)(Ud,{visible:r&&Boolean(s),onKeyDown:p,onClick:u},void 0)})),[t,d,c,r,s,p,u]);return(0,m.jsx)(m.Fragment,{children:(0,m.jsx)(e,Object.assign({},g),void 0)},void 0)};return t.displayName=`WithSkipNavigation(${(0,Bd.i)(e)})`,t}((function({visible:e=!0,handleLeftKeyDown:t,handleRightKeyDown:i,SkipNavBtn:o}){const{isAppContextLoaded:n}=(0,ee.mp)(V.G,{selector:({appContext:e})=>({isAppContextLoaded:Boolean(e)}),dependencies:[]}),{isBizContextLoaded:a,isGrayFilter:s}=(0,ee.mp)(P.r,{selector:({bizContext:e})=>({isBizContextLoaded:Boolean(e),isGrayFilter:null==e?void 0:e.config.isGrayFilter}),dependencies:[]}),r=(0,U.useMemo)((()=>n&&a),[n,a]),[l,d]=(0,U.useState)(0),c=(0,U.useCallback)((({hasModal:e,scrollWidth:t})=>{d(e?t:0)}),[]),{pushPermissionOn:p,permissionCallback:u}=function(){const[{pushPermissionOn:e},t]=(0,ee.b7)(wv),{lang:i,region:o,user:n}=(0,ee.mp)(V.G,{selector:e=>{var t,i,o,n;return{lang:e.lang,region:null!==(i=null===(t=e.appContext)||void 0===t?void 0:t.region)&&void 0!==i?i:"",user:null===(o=e.appContext)||void 0===o?void 0:o.user,abTestVersion:null===(n=e.appContext)||void 0===n?void 0:n.abTestVersion}},dependencies:[]}),a=(0,U.useCallback)((e=>{t.setPushPermissionOn(!1),"granted"===e&&t.initFCM({region:o,lang:i,showMethod:"click_guide_permission_popup_turn_on"})}),[o,i,t]),s=(0,U.useCallback)((()=>{fv().then((e=>{if(e.isAvailable()&&("US"!==o||n))switch(Notification.permission){case"denied":return;case"granted":t.initFCM({region:o,lang:i});break;default:t.judgeIfPush({region:o,lang:i})}})).catch((()=>{console.warn("load fcm failed")}))}),[o,n,t,i]);return(0,U.useEffect)((()=>{s()}),[s]),{pushPermissionOn:e,permissionCallback:a}}(),{subscribeModalChange:g}=(0,Ll.J)();(0,U.useEffect)((()=>{const e=g(c);return()=>{e()}}),[c,g]);const{value:h}=(0,U.useContext)(ge.hb);return(0,m.jsxs)($d,Object.assign({style:{right:l/2+"px",display:e?"flex":"none"}},{children:[p?(0,m.jsx)(Ev,{permissionCallback:u},void 0):null,(0,m.jsxs)(jv,{children:[(0,m.jsxs)(Rv,{children:[(0,m.jsx)($l,{isGrayFilter:s,isDark:h,onKeyDown:t},void 0),o]},void 0),(0,m.jsx)(Mv,{children:(0,m.jsx)(Pc,{onKeyDown:i},void 0)},void 0),r&&(0,m.jsx)(uv,{},void 0)]},void 0)]}),void 0)})));var Dv=i(50482);const Bv=(0,Dv.ZP)({resolved:{},chunkName:()=>"following",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>Promise.all([i.e(800),i.e(3975),i.e(8844),i.e(3944),i.e(7785),i.e(5029),i.e(9013),i.e(8674),i.e(4067),i.e(4585),i.e(528),i.e(492),i.e(966),i.e(5690),i.e(7494),i.e(9503),i.e(7736),i.e(2092),i.e(8938),i.e(937),i.e(8376),i.e(9349),i.e(6609),i.e(8457),i.e(8839),i.e(1853),i.e(3262),i.e(889),i.e(4922),i.e(6189),i.e(4398),i.e(8215),i.e(3442),i.e(2842),i.e(2969),i.e(6741),i.e(7166),i.e(2539),i.e(7039),i.e(8863),i.e(9922),i.e(3175),i.e(627),i.e(5590),i.e(7885),i.e(9470),i.e(6580),i.e(8320),i.e(1601),i.e(6048),i.e(3276),i.e(2827),i.e(9959),i.e(9786),i.e(2209),i.e(302),i.e(8757),i.e(3239),i.e(556)]).then(i.bind(i,11959)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>11959}),zv=(0,Dv.ZP)({resolved:{},chunkName:()=>"search",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>Promise.all([i.e(800),i.e(3063),i.e(3975),i.e(8844),i.e(3944),i.e(7785),i.e(5029),i.e(9013),i.e(8674),i.e(4067),i.e(4585),i.e(528),i.e(492),i.e(966),i.e(5690),i.e(7494),i.e(9503),i.e(7736),i.e(2092),i.e(8938),i.e(937),i.e(8376),i.e(9349),i.e(6609),i.e(8457),i.e(8839),i.e(1853),i.e(3262),i.e(889),i.e(4922),i.e(6189),i.e(4398),i.e(8215),i.e(7991),i.e(7039),i.e(9922),i.e(3175),i.e(627),i.e(5590),i.e(7885),i.e(6048),i.e(3276),i.e(3645),i.e(6974),i.e(6464)]).then(i.bind(i,3509)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>3509}),Nv=(0,Dv.ZP)({resolved:{},chunkName:()=>"user",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>Promise.all([i.e(800),i.e(3063),i.e(3975),i.e(8844),i.e(3944),i.e(7785),i.e(5029),i.e(9013),i.e(8674),i.e(4067),i.e(4585),i.e(528),i.e(492),i.e(966),i.e(5690),i.e(7494),i.e(9503),i.e(7736),i.e(2092),i.e(8938),i.e(937),i.e(8376),i.e(9349),i.e(6609),i.e(8457),i.e(8839),i.e(1853),i.e(3262),i.e(889),i.e(4922),i.e(6189),i.e(4398),i.e(8215),i.e(3442),i.e(2842),i.e(7991),i.e(2969),i.e(6741),i.e(7166),i.e(6646),i.e(1033),i.e(5469),i.e(2843),i.e(5038),i.e(1454),i.e(8617),i.e(5383),i.e(2143),i.e(4265),i.e(6016),i.e(8394),i.e(7654),i.e(6203),i.e(4890),i.e(2116),i.e(4296),i.e(4990),i.e(9754),i.e(8992),i.e(7039),i.e(8863),i.e(9922),i.e(3175),i.e(627),i.e(5590),i.e(7885),i.e(9470),i.e(6580),i.e(8320),i.e(1601),i.e(6048),i.e(3276),i.e(2535),i.e(2827),i.e(3645),i.e(6974),i.e(9959),i.e(1728),i.e(4674),i.e(755),i.e(3653),i.e(378)]).then(i.bind(i,56679)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>56679}),Uv=(0,Dv.ZP)({resolved:{},chunkName:()=>"challenge",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>Promise.all([i.e(800),i.e(3063),i.e(3975),i.e(8844),i.e(3944),i.e(7785),i.e(5029),i.e(9013),i.e(8674),i.e(4067),i.e(4585),i.e(528),i.e(492),i.e(966),i.e(5690),i.e(7494),i.e(9503),i.e(7736),i.e(2092),i.e(8938),i.e(937),i.e(8376),i.e(9349),i.e(6609),i.e(8457),i.e(8839),i.e(1853),i.e(3262),i.e(889),i.e(4922),i.e(6189),i.e(4398),i.e(8215),i.e(3442),i.e(2842),i.e(7991),i.e(2969),i.e(6741),i.e(7039),i.e(8863),i.e(9922),i.e(3175),i.e(627),i.e(5590),i.e(7885),i.e(9470),i.e(6580),i.e(8320),i.e(1601),i.e(6048),i.e(3276),i.e(2535),i.e(2827),i.e(3645),i.e(6974),i.e(9959),i.e(1728),i.e(4674),i.e(3043),i.e(7454)]).then(i.bind(i,83662)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>83662}),Wv=(0,Dv.ZP)({resolved:{},chunkName:()=>"video",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>Promise.all([i.e(800),i.e(3975),i.e(8844),i.e(3944),i.e(7785),i.e(5029),i.e(9013),i.e(8674),i.e(4067),i.e(4585),i.e(528),i.e(492),i.e(966),i.e(5690),i.e(7494),i.e(9503),i.e(7736),i.e(2092),i.e(8938),i.e(937),i.e(8376),i.e(9349),i.e(6609),i.e(8457),i.e(8839),i.e(1853),i.e(3262),i.e(889),i.e(3442),i.e(2842),i.e(2969),i.e(6741),i.e(7166),i.e(2539),i.e(6646),i.e(1033),i.e(7039),i.e(8863),i.e(9922),i.e(3175),i.e(627),i.e(7885),i.e(9470),i.e(6580),i.e(8320),i.e(6048),i.e(2827),i.e(1728),i.e(9786),i.e(2209),i.e(302),i.e(935),i.e(3653),i.e(6791)]).then(i.bind(i,4267)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>4267}),$v=(0,Dv.ZP)({resolved:{},chunkName:()=>"playlist",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>Promise.all([i.e(800),i.e(3975),i.e(8844),i.e(3944),i.e(7785),i.e(5029),i.e(9013),i.e(8674),i.e(4067),i.e(4585),i.e(528),i.e(492),i.e(966),i.e(5690),i.e(7494),i.e(9503),i.e(7736),i.e(2092),i.e(8938),i.e(937),i.e(8376),i.e(9349),i.e(6609),i.e(8457),i.e(8839),i.e(1853),i.e(3262),i.e(889),i.e(7039),i.e(8863),i.e(9922),i.e(3175),i.e(627),i.e(5590),i.e(7885),i.e(9470),i.e(6580),i.e(8320),i.e(2535),i.e(6875),i.e(7449)]).then(i.bind(i,66381)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>66381}),qv=(0,Dv.ZP)({resolved:{},chunkName:()=>"music",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>Promise.all([i.e(800),i.e(3063),i.e(3975),i.e(8844),i.e(3944),i.e(7785),i.e(5029),i.e(9013),i.e(8674),i.e(4067),i.e(4585),i.e(528),i.e(492),i.e(966),i.e(5690),i.e(7494),i.e(9503),i.e(7736),i.e(2092),i.e(8938),i.e(937),i.e(8376),i.e(9349),i.e(6609),i.e(8457),i.e(8839),i.e(1853),i.e(3262),i.e(889),i.e(4922),i.e(6189),i.e(4398),i.e(8215),i.e(3442),i.e(2842),i.e(7991),i.e(2969),i.e(6741),i.e(7039),i.e(8863),i.e(9922),i.e(3175),i.e(627),i.e(5590),i.e(7885),i.e(9470),i.e(6580),i.e(8320),i.e(1601),i.e(6048),i.e(3276),i.e(2535),i.e(2827),i.e(3645),i.e(6974),i.e(9959),i.e(1728),i.e(4674),i.e(6875),i.e(4106)]).then(i.bind(i,6499)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>6499}),Hv=(0,Dv.ZP)({resolved:{},chunkName:()=>"foryou",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>Promise.all([i.e(800),i.e(3975),i.e(8844),i.e(3944),i.e(7785),i.e(5029),i.e(9013),i.e(8674),i.e(4067),i.e(4585),i.e(528),i.e(492),i.e(966),i.e(5690),i.e(7494),i.e(9503),i.e(7736),i.e(2092),i.e(8938),i.e(937),i.e(8376),i.e(9349),i.e(6609),i.e(8457),i.e(8839),i.e(1853),i.e(3262),i.e(889),i.e(4922),i.e(6189),i.e(4398),i.e(8215),i.e(3442),i.e(2842),i.e(2969),i.e(6741),i.e(7166),i.e(2539),i.e(7039),i.e(8863),i.e(9922),i.e(3175),i.e(627),i.e(5590),i.e(7885),i.e(1601),i.e(6048),i.e(3276),i.e(2827),i.e(1728),i.e(9786),i.e(2209),i.e(302),i.e(8757),i.e(3239),i.e(4566),i.e(935),i.e(8782)]).then(i.bind(i,58868)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>58868}),Gv=(0,Dv.ZP)({resolved:{},chunkName:()=>"topics",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>Promise.all([i.e(800),i.e(3975),i.e(8844),i.e(3944),i.e(7785),i.e(5029),i.e(9013),i.e(8674),i.e(4067),i.e(4585),i.e(528),i.e(492),i.e(966),i.e(5690),i.e(7494),i.e(9503),i.e(7736),i.e(2092),i.e(8938),i.e(937),i.e(8376),i.e(9349),i.e(6609),i.e(8457),i.e(8839),i.e(1853),i.e(3262),i.e(889),i.e(3442),i.e(2842),i.e(2969),i.e(6741),i.e(7166),i.e(7039),i.e(8863),i.e(9922),i.e(3175),i.e(627),i.e(5590),i.e(7885),i.e(1601),i.e(3276),i.e(2827),i.e(9786),i.e(8757),i.e(4566),i.e(3062)]).then(i.bind(i,90752)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>90752},{resolveComponent:e=>e.Topics}),Zv=(0,Dv.ZP)({resolved:{},chunkName:()=>"question",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>Promise.all([i.e(800),i.e(3063),i.e(3975),i.e(8844),i.e(3944),i.e(7785),i.e(5029),i.e(9013),i.e(8674),i.e(4067),i.e(4585),i.e(528),i.e(492),i.e(966),i.e(5690),i.e(7494),i.e(9503),i.e(7736),i.e(2092),i.e(8938),i.e(937),i.e(8376),i.e(9349),i.e(6609),i.e(8457),i.e(8839),i.e(1853),i.e(3262),i.e(889),i.e(4922),i.e(6189),i.e(4398),i.e(8215),i.e(7991),i.e(7039),i.e(8863),i.e(9922),i.e(3175),i.e(627),i.e(5590),i.e(7885),i.e(9470),i.e(6580),i.e(8320),i.e(1601),i.e(6048),i.e(3276),i.e(2535),i.e(3645),i.e(6974),i.e(9959),i.e(6516)]).then(i.bind(i,90246)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>90246}),Vv=(0,Dv.ZP)({resolved:{},chunkName:()=>"kep",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>Promise.all([i.e(3975),i.e(8844),i.e(3944),i.e(3442),i.e(2842),i.e(2969),i.e(6741),i.e(7039),i.e(8863),i.e(9922),i.e(1601),i.e(2827),i.e(1728),i.e(8726)]).then(i.bind(i,257)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>257}),Qv=(0,Dv.ZP)({resolved:{},chunkName:()=>"messages",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>Promise.all([i.e(800),i.e(3063),i.e(3975),i.e(8844),i.e(3944),i.e(7785),i.e(5029),i.e(9013),i.e(8674),i.e(4067),i.e(4585),i.e(528),i.e(492),i.e(966),i.e(5690),i.e(7494),i.e(9503),i.e(7736),i.e(2092),i.e(8938),i.e(937),i.e(8376),i.e(9349),i.e(6609),i.e(8457),i.e(8839),i.e(1853),i.e(3262),i.e(889),i.e(4922),i.e(6189),i.e(4398),i.e(8215),i.e(7039),i.e(8863),i.e(9922),i.e(3175),i.e(627),i.e(5590),i.e(9470),i.e(3645),i.e(4158)]).then(i.bind(i,96497)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>96497}),Yv=(0,Dv.ZP)({resolved:{},chunkName:()=>"discover",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>Promise.all([i.e(800),i.e(3975),i.e(8844),i.e(3944),i.e(7785),i.e(5029),i.e(9013),i.e(8674),i.e(4067),i.e(4585),i.e(528),i.e(492),i.e(966),i.e(5690),i.e(7494),i.e(9503),i.e(7736),i.e(2092),i.e(8938),i.e(937),i.e(8376),i.e(9349),i.e(6609),i.e(8457),i.e(8839),i.e(1853),i.e(3262),i.e(889),i.e(4922),i.e(6189),i.e(4398),i.e(8215),i.e(7039),i.e(8863),i.e(9922),i.e(3175),i.e(627),i.e(5590),i.e(6875),i.e(5023)]).then(i.bind(i,72989)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>72989}),Kv=(0,Dv.ZP)({resolved:{},chunkName:()=>"setting",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>Promise.all([i.e(3975),i.e(8844),i.e(3944),i.e(9013),i.e(4067),i.e(7166),i.e(9207),i.e(7954),i.e(5079),i.e(1454),i.e(9602),i.e(8617),i.e(5383),i.e(9026),i.e(2143),i.e(6016),i.e(8394),i.e(7654),i.e(6203),i.e(1565),i.e(4990),i.e(7039),i.e(8863),i.e(3175),i.e(9470),i.e(6580),i.e(4314)]).then(i.bind(i,91763)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>91763}),Jv=(0,Dv.ZP)({resolved:{},chunkName:()=>"faq",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>Promise.all([i.e(3975),i.e(4922),i.e(6189),i.e(4398),i.e(8215),i.e(9770),i.e(4372),i.e(7039),i.e(8863),i.e(3757),i.e(1720)]).then(i.bind(i,12980)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>12980}),Xv=(0,Dv.ZP)({resolved:{},chunkName:()=>"report",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>Promise.all([i.e(3975),i.e(5029),i.e(8994),i.e(7039),i.e(8863),i.e(3757),i.e(8983)]).then(i.bind(i,92436)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>92436}),ey=(0,Dv.ZP)({resolved:{},chunkName:()=>"poi",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>Promise.all([i.e(800),i.e(3063),i.e(3975),i.e(8844),i.e(3944),i.e(7785),i.e(5029),i.e(9013),i.e(8674),i.e(4067),i.e(4585),i.e(528),i.e(492),i.e(966),i.e(5690),i.e(7494),i.e(9503),i.e(7736),i.e(2092),i.e(8938),i.e(937),i.e(8376),i.e(9349),i.e(6609),i.e(8457),i.e(8839),i.e(1853),i.e(3262),i.e(889),i.e(4922),i.e(6189),i.e(4398),i.e(8215),i.e(7991),i.e(7039),i.e(8863),i.e(9922),i.e(3175),i.e(627),i.e(5590),i.e(7885),i.e(9470),i.e(6580),i.e(8320),i.e(1601),i.e(6048),i.e(3276),i.e(2535),i.e(3645),i.e(6974),i.e(9959),i.e(4674),i.e(9573)]).then(i.bind(i,50861)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>50861}),ty=(0,Dv.ZP)({resolved:{},chunkName:()=>"collection",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>Promise.all([i.e(800),i.e(3063),i.e(3975),i.e(8844),i.e(3944),i.e(7785),i.e(5029),i.e(9013),i.e(8674),i.e(4067),i.e(4585),i.e(528),i.e(492),i.e(966),i.e(5690),i.e(7494),i.e(9503),i.e(7736),i.e(2092),i.e(8938),i.e(937),i.e(8376),i.e(9349),i.e(6609),i.e(8457),i.e(8839),i.e(1853),i.e(3262),i.e(889),i.e(4922),i.e(6189),i.e(4398),i.e(8215),i.e(7991),i.e(7039),i.e(8863),i.e(9922),i.e(3175),i.e(627),i.e(5590),i.e(7885),i.e(9470),i.e(6580),i.e(8320),i.e(1601),i.e(6048),i.e(3276),i.e(2535),i.e(3645),i.e(6974),i.e(9959),i.e(4674),i.e(3043),i.e(8137)]).then(i.bind(i,13830)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>13830}),iy=(0,Dv.ZP)({resolved:{},chunkName:()=>"explore",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>Promise.all([i.e(800),i.e(3975),i.e(8844),i.e(3944),i.e(7785),i.e(5029),i.e(9013),i.e(8674),i.e(4067),i.e(4585),i.e(528),i.e(492),i.e(966),i.e(5690),i.e(7494),i.e(9503),i.e(7736),i.e(2092),i.e(8938),i.e(937),i.e(8376),i.e(9349),i.e(6609),i.e(8457),i.e(8839),i.e(1853),i.e(3262),i.e(889),i.e(9922),i.e(3175),i.e(627),i.e(5590),i.e(7885),i.e(9470),i.e(6580),i.e(8320),i.e(2535),i.e(9782)]).then(i.bind(i,47617)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>47617}),oy=(0,Dv.ZP)({resolved:{},chunkName:()=>"video-playlist",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>Promise.all([i.e(800),i.e(3975),i.e(8844),i.e(3944),i.e(7785),i.e(5029),i.e(9013),i.e(8674),i.e(4067),i.e(4585),i.e(528),i.e(492),i.e(966),i.e(5690),i.e(7494),i.e(9503),i.e(7736),i.e(2092),i.e(8938),i.e(937),i.e(8376),i.e(9349),i.e(6609),i.e(8457),i.e(8839),i.e(1853),i.e(3262),i.e(889),i.e(4922),i.e(7991),i.e(6646),i.e(1033),i.e(5469),i.e(2843),i.e(5038),i.e(4265),i.e(4890),i.e(2116),i.e(4296),i.e(7039),i.e(8863),i.e(9922),i.e(3175),i.e(627),i.e(5590),i.e(7885),i.e(9470),i.e(6580),i.e(8320),i.e(1601),i.e(6048),i.e(2535),i.e(755),i.e(3721)]).then(i.bind(i,99499)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>99499}),ny=(0,Pv.Z)("div",{target:"e1irlpdw0"})((({extraTop:e=0,maxWidth:t,isHideSideComponent:i})=>({marginTop:i?0:$e.Mz+e,display:"flex",width:"100vw",maxWidth:null!=t?t:$e.XP,justifyContent:"space-between",alignSelf:"center",flex:"1 1 auto"})),"label:DivBodyContainer;"),ay=(0,Pv.Z)("div",{target:"e1irlpdw1"})({},"label:DivSideNavContainer;"),sy=(0,Pv.Z)("div",{target:"e1irlpdw2"})((({status:e,theme:{colors:t}})=>(0,$e.f1)({max:767,style:[{position:"fixed",inset:$e.Mz-1+"px 0 0",zIndex:99,backgroundColor:t.ConstBGInverse2,opacity:e===Ie.d0||e===Ie.cn?1:0},e===Ie.d0||e===Ie.Ix?{transition:"all 0.3s"}:null,e===Ie.Wj?{pointerEvents:"none"}:null]})),"label:DivSideNavMask;"),ry=(0,Pv.Z)(ny,{target:"e1x8fefz0"})({maxWidth:"unset",justifyContent:"flex-start"},"label:StyledDivBodyContainerV2;"),ly=(0,U.memo)((e=>{const{pathname:t}=(0,ne.TH)(),{isInVideoFeedRedesign:i}=(0,ma.y7)(),o=i||(0,ve.BL)(t)?ry:ny;return(0,m.jsx)(o,Object.assign({},e),void 0)})),dy=[Le.Ad.messages,Le.Ad.setting,Le.Ad.settingBlockList,Le.Ad.feedback,Le.Ad.feedbackReport,Le.Ad.feedbackHistory],cy=[Le.Ad.feedback,Le.Ad.feedbackReport,Le.Ad.feedbackHistory],py=[Le.Ad.expansion,Le.Ad.discovery],uy=(0,m.jsx)((function(e){return U.createElement("svg",Fi({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 88 88",width:"1em",height:"1em"},e),Mi||(Mi=U.createElement("g",{fillRule:"evenodd",clipPath:"url(#tiktok-icon_svg__clip0_18497_176148)",clipRule:"evenodd"},U.createElement("path",{fill:"#25F4EE",d:"M59.338 5.009A20.23 20.23 0 0158.712 0H44.313v57.2c0 6.596-5.325 11.943-11.894 11.943-6.57 0-11.894-5.347-11.894-11.943 0-6.596 5.325-11.943 11.894-11.943 1.313 0 2.575.214 3.756.608V30.432a27.04 27.04 0 00-3.756-.26C17.552 30.171 5.5 42.271 5.5 57.2c0 14.927 12.052 27.029 26.919 27.029 14.658 0 26.586-11.763 26.919-26.4V28.56a34.175 34.175 0 0019.407 6.011V20.114c-9.342 0-17.19-6.42-19.407-15.105z"}),U.createElement("path",{fill:"black",d:"M63.093 8.781a20.23 20.23 0 01-.626-5.009H48.069v57.2c0 6.596-5.326 11.943-11.895 11.943S24.28 67.568 24.28 60.972c0-6.596 5.325-11.943 11.894-11.943 1.313 0 2.575.214 3.756.608V34.205a27.04 27.04 0 00-3.756-.261c-14.867 0-26.919 12.1-26.919 27.028 0 14.928 12.052 27.029 26.92 27.029 14.657 0 26.585-11.763 26.918-26.4V32.333a34.174 34.174 0 0019.407 6.01V23.888c-9.342 0-17.19-6.42-19.407-15.106z"}),U.createElement("path",{fill:"#FE2C55",d:"M59.063 3.77a20.135 20.135 0 007.514 12.209 20.07 20.07 0 01-4.11-12.208h-3.404zm19.68 19.762V34.57a34.174 34.174 0 01-19.406-6.011v29.268c-.333 14.637-12.261 26.4-26.919 26.4a26.742 26.742 0 01-17.069-6.128c4.937 6.044 12.432 9.9 20.824 9.9 14.658 0 26.587-11.763 26.92-26.4V32.331a34.174 34.174 0 0019.406 6.01V23.886c-1.284 0-2.539-.121-3.755-.353zm-42.569 10.41v11.921a11.837 11.837 0 00-3.756-.608c-6.569 0-11.894 5.347-11.894 11.943 0 4.263 2.224 8.004 5.57 10.117a11.923 11.923 0 01-1.815-6.344c0-6.596 5.325-11.943 11.894-11.943 1.313 0 2.576.213 3.756.607V34.203a27.044 27.044 0 00-3.755-.261z"}))),Ri||(Ri=U.createElement("defs",null,U.createElement("clipPath",{id:"tiktok-icon_svg__clip0_18497_176148"},U.createElement("path",{fill:"white",d:"M0 0h88v88H0z"})))))}),{style:{margin:"auto",width:"77px",height:"88px"}},void 0);function gy({location:e}){const t=(0,U.useMemo)((()=>({pathname:e.pathname.replace(/\/\/+/g,"/"),search:e.search})),[e.pathname,e.search]);return(0,m.jsx)(ne.l_,{to:t},void 0)}function my(){return(0,m.jsx)("link",{rel:"stylesheet",href:Ae},void 0)}const hy=()=>{const[{appContext:e,isSideNavActive:t},i]=(0,ee.b7)(V.G,{selector:e=>({appContext:e.appContext,isSideNavActive:e.sideNavActive}),dependencies:[]}),[{bizContext:o}]=(0,ee.b7)(P.r,{selector:e=>({bizContext:e.bizContext}),dependencies:[]}),n=function(){const{pathname:e}=(0,ne.TH)(),t=(0,ve.cQ)(e)||(0,ve.ll)(e);return(0,Gi.HX)()&&t}(),a=(0,ne.$B)(dy)||n,s=(0,ne.$B)(cy),{user:r,language:l="en",appId:d,env:c}=(0,Ee.m7)(e),p=(0,U.useRef)(null);((e="production",t=!0)=>{const{language:i,clusterRegion:o}=(0,Ee.m7)((0,ze.Lh)((()=>["language","clusterRegion"]),[])),n=(0,ee.qj)($i.X),a=(0,U.useCallback)((()=>{n.setCookieBannerShowing(!0)}),[n]),s=(0,U.useCallback)((()=>{n.setCookieBannerShowing(!1)}),[n]);(0,U.useEffect)((()=>{if(!(0,qi.W)()){(0,Bi.j)({locale:i,dangerouslyDisableCookieBanner:!t,region:o,business:"webapp",env:e});const n=[(0,Bi.on)("show",a),(0,Bi.on)("hide",s)];return()=>{for(const e of n)e()}}t&&zi.f2.loadCookieBanner({locale:i,onShow:a,onHide:s})}),[i,t,a,s])})(null==c?void 0:c.type),function(e){const t=(0,ee.qj)(Wi.e);(0,U.useEffect)((()=>{e&&!e.ftcUser&&t.getNewestReply()}),[e,t])}(r),function(e,t,i){(0,U.useEffect)((()=>{e&&new Di.R({aid:1459,service:"www.tiktok.com",host:1180===t?"https://ttwid-sg.byteoversea.com":"https://ttwid-va.byteoversea.com"}).init()}),[t,null==i?void 0:i.type,e])}(r,d,c),function(){const[e,t]=(0,ee.b7)(Ni.D);(0,U.useEffect)((()=>{const i=i=>{if(e.isModalShow)return;i.preventDefault();const o=e.isExpand||!(0,Ui.le)(u.OV);o&&t.handleShowSnack(!0),t.storeDeferredPrompt(i),t.setIsPwaInstallable(!0),t.setIsExpand(o)};return window.addEventListener("beforeinstallprompt",i),()=>{window.removeEventListener("beforeinstallprompt",i)}}),[t,e.isExpand,e.isModalShow])}(),(0,Me.u8)(!1),function(){const e=(0,ee.qj)(Re.f),t=(0,U.useCallback)((()=>{window.ttWebappFocusTime||(window.ttWebappFocusTime=Date.now(),window.ttWebappBlurTime=null)}),[]),i=(0,U.useCallback)((()=>{const t=Date.now();e.updateVideoFocusTime({blurTime:t}),window.ttWebappFocusTime=null,window.ttWebappBlurTime=t}),[e]);(0,U.useEffect)((()=>{window.ttWebappFocusTime=Date.now()}),[]),(0,U.useEffect)((()=>(window.addEventListener("blur",i),window.addEventListener("focus",t),()=>{window.removeEventListener("blur",t),window.removeEventListener("focus",i)})),[i,t])}(),function(){const{pathname:e}=(0,ne.TH)();(0,U.useEffect)((()=>{window.scrollTo(0,0)}),[e])}(),function(){const{photoSensitiveVideosSetting:e}=(0,ee.mp)(Hi.P);(0,U.useEffect)((()=>{Vi.W.handleRemovePhotosensitiveStatus(1===e?"on":"off")}),[])}(),function(){const e=(0,ee.qj)(Zi.Y);(0,U.useEffect)((()=>{e.getBusinessPermissionList()}),[e])}();const{isShow:g,url:h=""}=function(){const{search:e,pathname:t}=(0,ne.TH)();return(0,U.useMemo)((()=>{const i=new URLSearchParams(e),o=i.get("scene"),n=i.get("redirect_url");return 0!==(null==o?void 0:o.indexOf("ecom_email"))||!n||0!==n.indexOf("aweme")&&0!==n.indexOf("sslocal")?{isShow:!1}:{isShow:!0,url:`https://www.tiktok.com${t}${e}`}}),[])}(),_=(0,Fe.Sf)("pc_video_playlist"),{bodyContainerWidth:v,sideNavWidth:y}=(()=>{const{isInVideoFeedRedesign:e}=(0,ma.y7)(),t=Cv(),{isDetailPage:i}=(0,Sv.U)(),o=e||i||t;return{sideNavWidth:o?240:void 0,bodyContainerWidth:o?"100vw":void 0}})(),b=(0,U.useCallback)((()=>{i.setSideNavActive(!1)}),[i]),{popupHeight:f,handlePopupHide:x,handlePopupShow:k}=function(){const[e,t]=(0,U.useState)(0),i=(0,U.useCallback)((()=>{t(0)}),[]);return{popupHeight:e,handlePopupShow:(0,U.useCallback)((e=>{t(e)}),[]),handlePopupHide:i}}(),w=(0,m.jsx)(Ie.ZP,Object.assign({timeout:300,in:t,nodeRef:p},{children:e=>(0,m.jsxs)("div",Object.assign({ref:p},{children:[(0,m.jsx)(sy,{status:e,onClick:b},void 0),(0,m.jsx)(Sl,{extraWidth:y,extraTop:f,transStatus:e,lang:l},void 0)]}),void 0)}),void 0);return(0,m.jsxs)(Dl,Object.assign({isMobile:!1,loading:uy},{children:[(0,m.jsx)(it.F,{appContext:e,bizContext:o,slardarBid:ot.Li},void 0),(0,m.jsx)(dt,{appContext:e},void 0),(0,m.jsx)(pt,{appContext:e},void 0),(0,m.jsx)(Fv,{visible:!n},void 0),(0,m.jsx)(my,{},void 0),(0,m.jsx)(pi,{onShow:k,onHide:x},void 0),(0,m.jsxs)(ly,Object.assign({isHideSideComponent:n,extraTop:f,maxWidth:v},{children:[!a&&(0,m.jsx)(ay,{children:w},void 0),(0,m.jsxs)(ne.rs,{children:[(0,m.jsx)(ne.AW,{path:"(.*//+.*)",exact:!0,strict:!0,component:gy},void 0),(0,m.jsx)(ne.AW,{exact:!0,path:Le.Ad.following,component:Bv},void 0),(0,m.jsx)(ne.AW,{path:Le.Ad.searchHome,component:zv},void 0),(0,m.jsx)(ne.AW,{exact:!0,path:Le.Ad.user,component:Nv},void 0),(0,m.jsx)(ne.AW,{exact:!0,path:Le.Ad.challenge,component:Uv},void 0),(0,m.jsx)(ne.AW,{exact:!0,path:Le.Ad.video,component:Wv},void 0),(0,m.jsx)(ne.AW,{exact:!0,path:Le.Ad.musicPlaylist,component:$v},void 0),(0,m.jsx)(ne.AW,{exact:!0,path:Le.Ad.music,component:qv},void 0),(0,m.jsx)(ne.AW,{exact:!0,path:ui.Vh,component:Hv},void 0),(0,m.jsx)(ne.AW,{exact:!0,path:Le.Ad.topics,component:Gv},void 0),(0,m.jsx)(ne.AW,{exact:!0,path:Le.Ad.question,component:Zv},void 0),(0,m.jsx)(ne.AW,{exact:!0,path:py,component:Vv},void 0),(0,m.jsx)(ne.AW,{exact:!0,path:Le.Ad.messages,component:Qv},void 0),(0,m.jsx)(ne.AW,{exact:!0,path:Le.Ad.discover,component:Yv},void 0),(0,m.jsx)(ne.AW,{path:Le.Ad.setting,component:Kv},void 0),(0,m.jsx)(ne.AW,{exact:!0,path:Le.Ad.feedbackReport,component:Xv},void 0),(0,m.jsx)(ne.AW,{exact:!0,path:Le.Ad.feedbackHistory,component:Xv},void 0),(0,m.jsx)(ne.AW,{exact:!0,path:Le.Ad.feedback,component:Jv},void 0),(0,m.jsx)(ne.AW,{exact:!0,path:Le.Ad.poi,component:ey},void 0),(0,m.jsx)(ne.AW,{exact:!0,path:Le.Ad.collection,component:ty},void 0),(0,m.jsx)(ne.AW,{exact:!0,path:Le.Ad.explore,component:iy},void 0),_&&(0,m.jsx)(ne.AW,{exact:!0,path:Le.Ad.videoPlaylist,component:oy},void 0),(0,m.jsx)(gi,{path:"*"},void 0)]},void 0)]}),void 0),s&&(0,m.jsx)(Fd,{},void 0),(0,m.jsx)(xi,{},void 0),(0,m.jsx)(Dd.b,{},void 0),g&&(0,m.jsx)(Ei,{url:h},void 0),(0,m.jsx)("script",{src:"https://sf16-website-login.neutral.ttwstatic.com/obj/tiktok_web_login_static/tiktok/static/nginx/service-worker.js"},void 0)]}),void 0)},_y=X()(Object.values(Le.Ad));!function(e,t){const o=a.n.getInstance(k.n);o.sendCustomPerfMetric("js_start_app");const{beforeStart:n=f(),defaultNS:s,nss:r,customInitBiz:l}=t;(function(){return(0,w.__awaiter)(this,void 0,void 0,(function*(){"Promise"in window?(S.some((e=>!(e in window)))&&(yield i.e(1342).then(i.bind(i,16376))),(C.some((e=>!(e in Array.prototype)))||j.some((e=>!(e in Object))))&&(yield Promise.all([i.e(800).then(i.t.bind(i,67735,23)),i.e(800).then(i.t.bind(i,76299,23)),i.e(800).then(i.t.bind(i,58935,23)),i.e(800).then(i.t.bind(i,33759,23))]))):window.location.href="https://www.tiktok.com/unsupported"}))})().then((()=>(0,y.g)())).then((()=>{const e=(0,d.G3)();return Promise.all([Q(e),K(e,r),l?Promise.resolve():T(),(0,z.Bs)(),n(),(0,v.TA)(),F(e,s)]).then((()=>function(e){const t=G(Y.lu);t?B(t,e):console.error("[Error]: No translation data to be added")}(e)))})).then((()=>{o.sendCustomPerfMetric("js_render_app"),function(e){const t=document.querySelector("#app");{const i=(0,h.Z)({key:"tiktok"});(0,x.hydrate)((0,m.jsx)(_.C,Object.assign({value:i},{children:(0,m.jsx)(e,{},void 0)}),void 0),t)}}(e)})).catch((e=>{console.error(e)}))}((()=>(0,m.jsx)(Oe,Object.assign({supportRoutes:_y},{children:(0,m.jsx)(hy,{},void 0)}),void 0)),{beforeStart:()=>{return e=void 0,t=void 0,o=function*(){try{(()=>{var e,t,i,o,m,h,_;if(!window[n.ho])return;const{AppContext:v,BizContext:y}=window[n.ho];if(!v.appContext||!y.bizContext)return;const{appContext:b}=v,f=null===(i=null===(t=null===(e=b.abTestVersion)||void 0===e?void 0:e.parameters)||void 0===t?void 0:t.feed_csr)||void 0===i?void 0:i.vid;if("v2"!==f&&"v3"!==f)return;const x=a.n.getInstance(p.r);x.util.setContext(b,y.bizContext);const k=(0,r.parse)(location.search),w=(0,d.s)(b.language),{isMobile:S}=y.bizContext;let C,j=!1;try{const e=null!==(o=window.localStorage.getItem(g))&&void 0!==o?o:"{}",t=JSON.parse(e),i=null!==(m=null==t?void 0:t.query)&&void 0!==m?m:{};if(k.item_id===i.insertedItemID&&w===i.language){const e=t.res;let o=null===(h=e.itemList)||void 0===h?void 0:h.filter((e=>{var t;const i=null===(t=e.video)||void 0===t?void 0:t.cover,o=/x-expires=(\d+)/.exec(i);return o&&Date.now()<1e3*Number(o[1])}));if(null==o?void 0:o.length){let t=!1;Object.defineProperty(e,"itemList",{get(){if(!t&&(t=!0,!j))try{window.localStorage.setItem(g,JSON.stringify({res:Object.assign(Object.assign({},e),{itemList:null==o?void 0:o.slice(S?1:2)}),query:i}))}catch(e){}return o},set(e){o=e},enumerable:!0,configurable:!0}),C=e}}}catch(e){}var P;P=Boolean(C),c.W.event("data_prefetch_fyp_feed_hit",{hit:P?1:0}),null===(_=s.Z.context)||void 0===_||_.set("use_data_prefetched",C?1:0);const T={language:w,insertedItemID:k.item_id,aid:u.CO,count:S?u.LN:u.lK},O=()=>{x.get("/api/recommend/item_list/",{query:Object.assign(Object.assign({},T),{csr_prefetch:1}),baseUrlType:2}).subscribe((e=>{var t,i,o,n;try{window.localStorage.setItem(g,JSON.stringify({res:e,query:T})),j=!0;const a=null===(n=null===(o=null===(i=null===(t=e.itemList)||void 0===t?void 0:t[0])||void 0===i?void 0:i.video)||void 0===o?void 0:o.zoomCover)||void 0===n?void 0:n[720];if(a){const e=document.createElement("link");e.rel="prefetch",e.href=a,document.head.appendChild(e)}}catch(e){}}))};C?(window.__preload_item_list=Promise.resolve(C),O()):window.__preload_item_list=(0,l.z)(x.get("/api/recommend/item_list/",{query:Object.assign(Object.assign({},T),{csr_preload:1}),baseUrlType:2})).then((e=>(O(),e)))})()}catch(e){}yield},new((i=void 0)||(i=Promise))((function(n,a){function s(e){try{l(o.next(e))}catch(e){a(e)}}function r(e){try{l(o.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,r)}l((o=o.apply(e,t||[])).next())}));var e,t,i,o},nss:["Webapp"]})},65027:(e,t,i)=>{"use strict";function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},o.apply(this,arguments)}i.d(t,{g:()=>o})},57725:(e,t,i)=>{"use strict";i.d(t,{$:()=>n});var o=i(91051);function n(e){return function(t){var i=t.color,n=t.size,a=t.circleBackground,s={};if(void 0!==i&&(s.className="text-color-".concat(i)),void 0!==n&&(s.fontSize="".concat(n,"px")),void 0!==a){var r=a.backgroundColor,l=a.circleSize,d="".concat(l,"px"),c={width:d,height:d};return o.createElement("div",{className:"inline-flex items-center justify-center rounded-full background-color-".concat(r),style:c},o.createElement(e,s))}return o.createElement(e,s)}}},68676:(e,t,i)=>{"use strict";i.d(t,{Jc:()=>s,Vh:()=>r});var o=i(38616),n=i.n(o),a=i(11838);const s=["/en","/ar","/de-DE","/es","/fi-FI","/fr","/id-ID","/ja-JP","/ko-KR","/ms-MY","/ru-RU","/th-TH","/tr-TR","/vi-VN","/zh-Hans","/zh-Hant-TW","/he-IL","/jv-ID","/ceb-PH","/cs-CZ","/it-IT","/hu-HU","/nl-NL","/pl-PL","/pt-BR","/ro-RO","/sv-SE","/fil-PH","/el-GR","/uk-UA","/ur","/hi-IN","/bn-IN","/my-MM","/km-KH"],r=[a.Ad.home,a.Ad.foryou,...s],l=(a.gs.home,a.gs.foryou,a.gs.discover,a.gs.topics,[a.gs.expansion,a.gs.report,a.gs.reportinbox,a.gs.amp]);var d;n()(Object.values(a.gs)).filter((e=>!l.includes(e))),function(e){e.Video="video",e.User="user",e.Challenge="hashtag",e.Trending="fyp",e.Live="live",e.Message="message",e.Setting="setting",e.Music="music",e.SearchResults="search",e.Discover="discover",e.Following="following",e.Topics="topics",e.Profile="profile",e.Expansion="expansion",e.Inbox="inbox",e.Report="report",e.Feedback="feedback"}(d||(d={}))},22240:(e,t,i)=>{"use strict";i.d(t,{L:()=>o});const o=i(91051).useLayoutEffect},68457:(e,t,i)=>{"use strict";i.d(t,{fB:()=>l,Nr:()=>d});var o=i(57341),n=i.n(o),a=i(53586),s=i.n(a),r=i(91051);function l(e,t,i){return(0,r.useMemo)((()=>n()(e,i)),t)}function d(e,t,i){return(0,r.useMemo)((()=>s()(e,i)),t)}},32273:(e,t,i)=>{"use strict";i.d(t,{Q:()=>s,y:()=>r});var o=i(91051),n=i(89232),a=i(66891);const s=(e="Webapp")=>{const{t}=(0,o.useContext)(a.LX);return(0,o.useCallback)(((i,o,n)=>t(i,Object.assign({ns:e},o),n)),[e,t])};function r(e){const t=(0,n.G3)(),{loadStarling:i,hasLoaded:s}=(0,o.useContext)(a.LX),[r,l]=(0,o.useState)((null!=e?e:[]).reduce(((e,t)=>e&&s(t)),!0));return(0,o.useEffect)((()=>{e&&Promise.all(e.map((e=>!!s(e)||i(e,t)))).then((e=>{l(e.reduce(((e,t)=>e&&t),!0))}))}),[]),r}},45313:(e,t,i)=>{"use strict";i.d(t,{P4:()=>n,MB:()=>a,JD:()=>s,yl:()=>l,fH:()=>d,Pz:()=>p,_9:()=>c,cC:()=>h,U_:()=>_});var o=i(25508);const{getPureLivePath:n,getPureMusicPath:a,getPureTagPath:s,getPureStickerPath:r,getPureUserPath:l,getPureVideoPath:d,getPureQuestionPath:c}=o.Z,{getPureUniqueId:p,hasIllegalText:u,isPureNumber:g,isRealUniqueId:m,purifyMusicName:h,purifyPlainText:_}=o.c},22597:(e,t,i)=>{"use strict";i.d(t,{Hg:()=>s,oC:()=>r,Xq:()=>l,Io:()=>d,FZ:()=>c,cQ:()=>p,TO:()=>u,ws:()=>g,Dj:()=>m,Qu:()=>h,bf:()=>_,BL:()=>v,TX:()=>y,Gc:()=>b,at:()=>f,$4:()=>x,u7:()=>k,ll:()=>w,I8:()=>S,Ho:()=>C,wy:()=>j,C2:()=>P});var o=i(21041),n=i(11838),a=i(68676);function s(e){const t=e.replace(/\/$/,"");return e===n.Ad.home||a.Jc.includes(t)}function r(e){return e.replace(/\/$/,"")===n.Ad.foryou||s(e)}function l(e){if(r(e))return"fyp";if(e.match("/following"))return"following";if(e.match("/setting"))return"setting";if(e.match("/search"))return"search";if(e.match("/message"))return"message";if(e.match("/video"))return"video";if(e.match("/@"))return"user";if(e.match("/report"))return"report";if(e.match("/music"))return"music";if(e.match("/tag"))return"hashtag";if(e.match(/\/discover\/.+/))return"expansion";if(e.match("/discover"))return"discover";if(e.match("/live"))return"live";if(d(e)){const t=(0,o.LX)(e,{path:n.Ad.topics,exact:!0});return`topics_${null==t?void 0:t.params.name}`}return e.match("/profile")?"profile":e.match("/inbox")?"inbox":e.match("/feedback")?"feedback":""}function d(e){return Boolean((0,o.LX)(e,{path:n.Ad.topics,exact:!0}))}function c(e){return e===n.Ad.following}function p(e){return/^\/@[^/]*\/video\/\d+/.test(e)}function u(e){return/^\/@.+\/playlist\/.+/.test(e)}function g(e){return/^\/music\/.+/.test(e)}function m(e){return/^\/tag\/.+/.test(e)}function h(e){return/^\/@.*\/collection\/.+/.test(e)}function _(e){return!/^\/@.+\/live/.test(e)&&!/^\/@.*\/video\/\d+/.test(e)&&/^\/@.+/.test(e)&&!/^\/@.*\/collection\/.+/.test(e)}function v(e){return/^\/discover\/.+/.test(e)||/^\/discovery\/.+/.test(e)}function y(e){return e===n.Ad.searchHome}function b(e){return e===n.Ad.searchUser}function f(e){return e===n.Ad.searchVideo}function x(e){return e===n.Ad.searchReminder}function k(e){return/^\/question\/.+/.test(e)}function w(e){return/^\/messages/.test(e)}function S(e){return Boolean((0,o.LX)(e,{path:n.Ad.discover,exact:!0}))}function C(e){return Boolean((0,o.LX)(e,{path:n.Ad.explore,exact:!0}))}function j(e){return/^\/place\/.+/.test(e)}function P(e){return r(e)?5:c(e)?11:p(e)?0:g(e)?4:m(e)?3:h(e)?121:_(e)?1:b(e)?106:f(e)?107:y(e)?105:k(e)?16:d(e)?113:w(e)?13:S(e)?103:v(e)?104:5}},70526:(e,t,i)=>{"use strict";i.d(t,{eD:()=>g,zv:()=>m,GV:()=>h});var o=i(64047),n=i(57244),a=i(37729),s=i(72679),r=i(22597),l=i(45949),d=i(73078);const c="webapp-session-referer";var p,u;!function(e){e[e.Default=0]="Default",e[e.Simple=1]="Simple",e[e.None=2]="None"}(p||(p={})),function(e){e[e.None=0]="None",e[e.AWEME=1]="AWEME",e[e.FixedWww=2]="FixedWww",e[e.AutoMOrT=3]="AutoMOrT",e[e.Webcast=4]="Webcast",e[e.AutoWebcastMOrT=5]="AutoWebcastMOrT",e[e.AWEMEV1=6]="AWEMEV1",e[e.PostLikeTest=7]="PostLikeTest",e[e.CommentTest=8]="CommentTest",e[e.WebcastT=9]="WebcastT",e[e.Now=10]="Now",e[e.Alligator=11]="Alligator"}(u||(u={}));const g="tt-csrf-token",m={FORM_ENCODE:"application/x-www-form-urlencoded; charset=UTF-8"};let h=class{constructor(){this.appContext$=new a.t(1),this.bizContext$=new a.t(1),this.appLanguage="en",this.isPageVisible=!0,this.isFocus=!0}setContext(e,t){this.appContext||this.bizContext||(this.appContext$.next(e),this.appContext=e,this.bizContext$.next(t),this.bizContext=t,(0,l.Y8)(this.handleVisibilityChange.bind(this,!1),this.handleVisibilityChange.bind(this,!0)),this.bindFocusChange())}getBaseUrl(e=0){var t,i,o,n,a,r,l,d,c;const p=(0,s.N)();switch(e){case 9:{let e="https://webcast-t.tiktok.com";return"us"===p.kind&&(e="https://webcast.us.tiktok.com"),e}case 1:return null!==(t=p.aweme)&&void 0!==t?t:"https://api.tiktok.com";case 2:return null!==(i=p.rootApi)&&void 0!==i?i:"https://www.tiktok.com";case 3:return null!==(o=p.mTApi)&&void 0!==o?o:"";case 6:return null!==(n=p.rootApi)&&void 0!==n?n:"";case 4:return null!==(a=p.webcastRootApi)&&void 0!==a?a:"https://webcast.tiktok.com";case 5:return null!==(r=p.webcastApi)&&void 0!==r?r:"";case 0:return null!==(l=p.rootApi)&&void 0!==l?l:"";case 7:return null!==(d=p.mTApi)&&void 0!==d?d:"";case 8:return null!==(c=p.rootApi)&&void 0!==c?c:"";case 10:return"https://now.tiktok.com";case 11:return"https://t.tiktok.com"}}addExtraQueryByUrlType(e=0){var t,i,o;return(null===(i=null===(t=this.bizContext)||void 0===t?void 0:t.liveCommonConfig)||void 0===i?void 0:i.regionEntry)&&[4,5,9].includes(e)?{channel:"local_test",carrier_region:null!==(o=localStorage.getItem("LIVE_OFFICE_REGION"))&&void 0!==o?o:"TW"}:{}}getRiskParams(e,t=!1){var i,n,a,s;return(0,o.__awaiter)(this,void 0,void 0,(function*(){if(!this.appContext)return{};if(2===e)return{};(0,l.St)(c)||(0,l.D9)(c,document.referrer);const o=1===e;let p=null;const u="v2"===(null===(s=null===(a=null===(n=null===(i=this.appContext)||void 0===i?void 0:i.abTestVersion)||void 0===n?void 0:n.parameters)||void 0===a?void 0:a.feed_csr)||void 0===s?void 0:s.vid);if(t||!navigator.getBattery||u||(p=(yield navigator.getBattery()).level),o)return Object.assign(Object.assign({},(0,d.$b)()),{from_page:(0,r.Xq)(location.pathname)});const g={};return"ageVerify"===(0,l.St)("enter_method")&&(g.security_verification_aid="1459"),Object.assign(Object.assign(Object.assign({},(0,d.Kj)(Object.assign(Object.assign({},this.appContext),this.bizContext),this.isPageVisible,this.isFocus,p)),{from_page:(0,r.Xq)(location.pathname)}),g)}))}handleVisibilityChange(e){this.isPageVisible=e}bindFocusChange(){const e=()=>{this.isFocus=!0},t=()=>{this.isFocus=!1};return window.addEventListener("focus",e),window.addEventListener("blur",t),()=>{window.removeEventListener("focus",e),window.removeEventListener("blur",t)}}};h=(0,o.__decorate)([(0,n.G)()],h)},48936:(e,t,i)=>{"use strict";i.d(t,{r:()=>O});var o=i(64047),n=i(57244),a=i(57001),s=i.n(a),r=i(40316),l=i.n(r),d=i(90293),c=i(82346),p=i(96980),u=i(14716),g=i(60595),m=i(56979),h=i(53095),_=i(72679),v=i(11467),y=i(70526),b=i(73078),f=i(18791),x=i(71024);const k=1e4;var w;!function(e){e[e.Pass=0]="Pass",e[e.Reject=1]="Reject",e[e.Retry=2]="Retry"}(w||(w={}));let S=class{constructor(){this.domId="tiktok-verify-ele",this.captcha=null,this.verifyElement=null,this.open=!1,this.rejectPass=!1,this.checkVerify=(e,t,i,n)=>(0,o.__awaiter)(this,void 0,void 0,(function*(){var o;if("object"!=typeof e)return e;const{statusCode:a,code:s}=null!=e?e:{};if(a===k||s===String(k)){const a=s===String(k)?e:e.verifyConfig,r=yield this.loadCaptcha(n&&i?"ttp":a.region,t);if(-1===a.fp){const e=yield null===(o=this.captcha)||void 0===o?void 0:o.getFp();a.fp=e}return r?this.open?(yield this.updateState(),this.rejectPass?1:2):yield this.goVerify(a,n):1}return 0})),this.destroy=()=>{var e;null===(e=this.captcha)||void 0===e||e.close(),this.verifyElement&&(document.body.removeChild(this.verifyElement),this.verifyElement=null)}}init(){this.verifyElement||(this.verifyElement=document.createElement("div"),this.verifyElement.setAttribute("id",this.domId),document.body.appendChild(this.verifyElement))}goVerify(e,t){return this.init(),new Promise((i=>{this.openVerify((()=>{this.closeVerify(),i(2)}),(()=>{this.closeVerify(!0),i(1)}),e,t)}))}closeVerify(e=!1){var t;this.open=!1,this.rejectPass=e,null===(t=this.captcha)||void 0===t||t.close()}openVerify(e,t,i,o){var n;const a={ele:this.domId,lang:"en",successCb:e,showMode:"mask",closeCb:t,errorCb:()=>{},fpCookieOption:{domain:".tiktok.com",sameSite:"None",secure:!0}};o&&(a.host=o),this.open=!0,this.rejectPass=!0,null===(n=this.captcha)||void 0===n||n.render({verify_data:i,captchaOptions:a})}updateState(){return new Promise((e=>{if(!this.open)return void e();const t=setInterval((()=>{this.open||(clearInterval(t),e())}),800)}))}loadCaptcha(e,t){return(0,o.__awaiter)(this,void 0,void 0,(function*(){if(!this.captcha){let o;switch(e){case"boe":case"sg":o=i.e(3975).then(i.bind(i,39075));break;case"va":o=i.e(3975).then(i.bind(i,43435));break;case"in":case"ttp":o=i.e(3975).then(i.bind(i,22336));break;default:return!1}const n=yield o;this.captcha=n,n.init({commonOptions:{aid:1988,did:t||"0",iid:"0"},captchaOptions:{fpCookieOption:{domain:".tiktok.com",sameSite:"None",secure:!0}}})}return!0}))}};S=(0,o.__decorate)([(0,n.G)()],S);const C="content-type",j=["application/pdf"],P={m:"va",t:"sg",us:"ttp",boe:"boe"},T="bdturing-verify";let O=class{constructor(e,t,i,o){this.verify=e,this.util=t,this.security=i,this.slardar=o,this.get=this.rxFetchFactory("GET"),this.post=this.fetchPost,this.put=this.rxFetchFactory("PUT"),this.delete=this.rxFetchFactory("DELETE")}get csrfToken(){var e,t;return this.util.appContext,null!==(t=null===(e=this.util.appContext)||void 0===e?void 0:e.csrfToken)&&void 0!==t?t:""}get appContext(){return this.util.appContext,this.util.appContext}get bizContext(){return this.util.bizContext,this.util.bizContext}rxFetchFactory(e){return(t,i)=>this.rxFetch(t,Object.assign(Object.assign({},i),{method:e}))}judgeNeedEncryption(e){return x.kS.some((t=>e.indexOf(t)>-1))}fetchPost(e,t={}){var{omitContentType:i=!1}=t,n=(0,o.__rest)(t,["omitContentType"]);const a=new Headers(n.headers);return a.get(C)||i||a.set(C,"application/x-www-form-urlencoded"),n.body||(n.body=""),n.headers=a,this.rxFetch(e,Object.assign(Object.assign({},n),{method:"POST"}))}getVerifyJson(e,t){var i;const o=e.status_code||e.code,n=3058===o,a=3059===o,s=P[null!==(i=(0,_.N)().kind)&&void 0!==i?i:""];return t.includes("/api/update/profile/")&&(n||a)?{code:"10000",from:"shark_admin",type:"verify",version:1,region:s,subtype:n?"slide":"text",verify_event:"",detail:{},fp:-1}:e}rawFetch(e,t){var i,n,a,s,r;return(0,o.__awaiter)(this,void 0,void 0,(function*(){const o=yield window.fetch.call(null,e,t);if(o.status>=400)return yield Promise.reject(o);{const l=o.headers.get(C);if(null==l?void 0:l.includes("application/json")){const r=o.headers.has(T)?JSON.parse(null!==(i=o.headers.get(T))&&void 0!==i?i:"{}"):yield o.json(),l=this.getVerifyJson(r,e),d="TTP"===(null===(n=this.appContext)||void 0===n?void 0:n.clusterRegion),c=yield this.verify.checkVerify(l,null!==(s=null===(a=this.appContext)||void 0===a?void 0:a.wid)&&void 0!==s?s:"0",null!=d&&d,(0,_.N)().captcha);return 0===c?r:2===c?yield this.rawFetch(e,t):{statusCode:-1}}return(null===(r=o.headers.get(C))||void 0===r?void 0:r.includes("text/"))?yield o.text():-1!==j.indexOf(String(l))?yield o.blob():(null==l?void 0:l.includes("application/x-protobuf"))?yield o.arrayBuffer():yield o.text()}}))}rxFetch(e,t){var{credentials:i="include"}=t,n=(0,o.__rest)(t,["credentials"]);return(!e.startsWith("/")||e.startsWith("//")||"GET"!==n.method||x.rJ.some((t=>Boolean(e.match(new RegExp(t)))))?this.security.init$.pipe((0,p.q)(1)):(0,c.of)([!0,!0])).pipe((0,m.U)((([e,t])=>{if(!t&&(null==n?void 0:n.requireSecSdk))throw new Error("secsdk load error")})),(0,h.z)((()=>{var e;const t=null!==(e=n.riskParamsType)&&void 0!==e?e:0,{isInstantApp:i}=n;return(0,u.D)(this.util.getRiskParams(t,i))})),(0,h.z)((t=>new g.y((o=>{var a;const r="AbortController"in window?new AbortController:{signal:{aborted:!1},abort(){this.signal.aborted=!0}},c=Object.assign({},t,n.query,this.util.addExtraQueryByUrlType(n.baseUrlType));e.startsWith("http:")||e.startsWith("https:")||(e=`${this.util.getBaseUrl(n.baseUrlType)}${e}`);const p=l()(s()(n,{signal:r.signal,credentials:i}),"query","riskParamsType","baseUrlType");if(this.judgeNeedEncryption(e)){const i=(0,b.J4)(c);p.headers=Object.assign(Object.assign({},null!==(a=p.headers)&&void 0!==a?a:{}),{"x-tt-params":i}),t&&(e=(0,d.stringifyUrl)({url:e,query:t}))}else e=(0,d.stringifyUrl)({url:e,query:c});return-1!==e.indexOf("csr_preload")&&this.slardar.sendCustomPerfMetric("js_feed_preload_start"),this.rawFetch(e,p).then((t=>{-1!==e.indexOf("csr_preload")&&this.slardar.sendCustomPerfMetric("js_feed_preload_done"),o.next(t),o.complete()})).catch((e=>{o.error(e)})),()=>{r.signal.aborted||r.abort()}})))))}};O=(0,o.__decorate)([(0,n.G)(),(0,o.__metadata)("design:paramtypes",[S,y.GV,f.$,v.n])],O)},73078:(e,t,i)=>{"use strict";i.d(t,{Kj:()=>a,$b:()=>s,J4:()=>r});const o=i(70745),n=(e,t)=>{try{return sessionStorage.getItem(e)||t}catch(e){return console.warn("sessionStorage get failed"),t}},a=(e,t,i,o)=>{const a=document.cookie.match(/s_v_web_id=(\w+)/);try{const s={aid:"1988",app_name:"tiktok_web",channel:"tiktok_web",device_platform:(e||{}).isMobile?"web_mobile":"web_pc",device_id:(e||{}).wid,region:(e||{}).region,priority_region:((e||{}).user||{}).region||"",os:(e||{}).os,referer:document.referrer,root_referer:n("webapp-session-referer"),cookie_enabled:navigator.cookieEnabled,screen_width:screen.width,screen_height:screen.height,browser_language:navigator.language,browser_platform:navigator.platform,browser_name:navigator.appCodeName,browser_version:navigator.appVersion,browser_online:navigator.onLine,verifyFp:(a||"")[1],app_language:(e||{}).language,webcast_language:(e||{}).language,tz_name:Intl.DateTimeFormat().resolvedOptions().timeZone,is_page_visible:t,focus_state:i,is_fullscreen:window.matchMedia("(display-mode: fullscreen)").matches,history_len:window.history.length};return"ageVerify"===n("enter_method")&&(s.security_verification_aid="1459"),navigator.getBattery&&(s.battery_info=o),s}catch(e){}return{}},s=()=>({cookie_enabled:navigator.cookieEnabled,screen_width:screen.width,screen_height:screen.height,browser_language:navigator.language,browser_platform:navigator.platform,browser_name:navigator.appCodeName,browser_version:navigator.appVersion,browser_online:navigator.onLine,timezone_name:Intl.DateTimeFormat().resolvedOptions().timeZone}),r=e=>{const t=[];return Object.keys(e).forEach((i=>{const o=`${i}=${e[i]}`;t.push(o)})),t.push("is_encryption=1"),((e,t)=>{const i=((e,t)=>{let i=e.toString();const o=i.length;return o<16?i=new Array(16-o+1).join("0")+i:o>16&&(i=i.slice(0,16)),i})("webapp1.0+20210628"),n=o.enc.Utf8.parse(i);return o.AES.encrypt(e,n,{iv:n,mode:o.mode.CBC,padding:o.pad.Pkcs7}).toString()})(t.join("&"))}},71024:(e,t,i)=>{"use strict";var o;i.d(t,{rJ:()=>n,kS:()=>c,Yf:()=>p}),function(e){e[e.LoginMode=513]="LoginMode",e[e.USUnloginMode=514]="USUnloginMode",e[e.USUnloginHighRiskMode=515]="USUnloginHighRiskMode",e[e.NonUSUnloginMode=516]="NonUSUnloginMode",e[e.U13Mode=517]="U13Mode"}(o||(o={}));const n=["/node/share/","/share/item/list","/discover/render/undefined","/share/item/explore/list","/api/comment/list/","/api/comment/list/reply/","/api/commit/follow/user/","/api/commit/item/digg/","/aweme/v1/upload/image2/","/api/notice/multi/","/api/notice/count/","/api/notice/digg/list/","/api/user/following/request/list/","/api/commit/follow/request/approve/","/api/commit/follow/request/reject/","/api/comment/digg/","/api/comment/publish/","/api/comment/delete/","/api/sticker/item_list/","/api/user/contact/list/","/api/at/default/list/","/api/comment/search/user/","/web/aweme/v1/search/challengesug","/web/aweme/v1/discover/search/","/api/v1/item/create/","/api/ba/business/suite/permission/list","/api/search/user/full/","/api/search/user/preview/","/api/search/item/full/","/api/search/general/full/","/api/music/detail/","/api/challenge/detail/","/api/user/detail/","/api/user/list/","/api/item/detail/","/api/question/detail/","/api/question/item_list/","/api/discover/challenge/","/api/discover/user/","/api/discover/music/","/api/discover/expansion/video/","/api/discover/expansion/detail/","/api/discover/expansion/topic/","/api/discover/expansion/user/","/api/discover/expansion/challenge/","/api/discover/expansion/music/","/api/challenge/item_list/","/api/music/item_list/","/api/post/item_list/","/api/favorite/item_list/","/api/following/item_list/","/api/recommend/item_list/","/api/recommend/user/","/api/recommend/embed_videos/","/api/live/detail/","/api/im/multi_user/","/api/user/get/animation/","/api/user/settings/","/aweme/v1/music/list/","/aweme/v1/adult/verify/get/accepted/id/types/","/api/mix/detail","/api/mix/item_list","/api/uniqueid/check/","/api/user/playlist/","/api/impression/write/","/api/user/set/animation/","/api/aweme/set/react_duet_stitch/","/api/aweme/modify/visibility/","/api/aweme/delete/","/api/schedule/aweme/delete/","/passport/web/login_name/update/","/api/update/profile/","/api/commit/follow/request/approve/","/api/commit/follow/request/reject/","/api/commit/follow/user/","/tiktok/v1/username/save_async/","/api/ba/business/suite/account/off","/api/ba/business/suite/account/quitcheck","/node/report/reasons","/aweme/v1/aweme/feedback/","/webcast.*","/v1/message/send","/v2/conversation/create","/v1/voip/call","/v1/conversation/add_participants","/1/conversation/remove_participants","/v1/conversation/update_participant","/v1/conversation/set_setting_info","/v1/conversation/get_setting_info","/v1/conversation/upsert_core_ext_info","/v1/conversation/upsert_settings_ext","/v1/conversation/dissolve","/v1/message/mark","/v1/message/batch_unmark","/v1/message/set_property","/api-live/event/list","/api-live/event/related-videos","/api-live/event/detail","/api-live/share/live","/node-a/send/download_link","/api/uniqueid/check/","/api/v3/register/user/info/sync/","/api/policy/notice/approve/","/api/private_banner/ack/","/api/privacy/agreement/record/agree/v1","/api/v3/register/verification/age/","/api/register/check/login/name/","/api/user/detail/self/","/api/policy/notice/","api/compliance/settings","/passport/web/","/shorten/","/api/discover/expansion/detail/","/api/discover/expansion/video/","/api/discover/expansion/user/","/api/discover/expansion/challenge/","/api/discover/expansion/music/","/api/discover/expansion/topic/","/api/commit/ads/action/"],a=[/^\/webcast\/diamond/,/^\/webcast\/wallet_api/,/^\/webcast\/recharge/,/^\/webcast\/wallet_api_tiktok\/notifycenter/,/^\/webcast\/wallet_api_tiktok\/payment/,/^\/webcast\/wallet_api_tiktok\/periodic_payout_onboarding/,/^\/webcast\/wallet_api_tiktok\/payout_onboarding_confirm/,/^\/webcast\/wallet_api_tiktok\/payment_instrument_bind_url/],s=["/webcast/api/money/kyc/v1/info/detail","/webcast/api/money/kyc/v1/upload_file","/webcast/api/compliance/kyc/v1/submission","/webcast/room/chat/","/webcast/room/create_info/","/webcast/room/enter/","/webcast/room/leave/","/webcast/room/live_podcast/","/webcast/room/ping/audience/","/webcast/user/relation/update/","/webcast/gift/send/","/webcast/room/emote_chat/","/webcast/room/share/",...a,"/webcast/wallet_api_tiktok/payment/initialize_payment","/webcast/wallet_api_tiktok/payment/initialize_agreement","/webcast/wallet_api_tiktok/payment/payment_methods/primary/set","/webcast/wallet_api_tiktok/payment/payment_methods/delete","/webcast/wallet_api_tiktok/payment/payment_methods/link","/webcast/wallet_api_tiktok/income_plus/tax/get_tax/","/webcast/wallet_api_tiktok/income_plus/tax/create_tax/","/webcast/wallet_api_tiktok/income_plus/tax/update_tax/","/webcast/wallet_api_tiktok/income_plus/agreement/","/webcast/wallet_api_tiktok/payout_onboarding_confirm/"],r=[...a,"/webcast/wallet_api_tiktok/periodic_payout_onboarding/","/webcast/wallet_api_tiktok/payment_instrument_bind_url/","/webcast/wallet_api_tiktok/payment/payment_methods","/webcast/wallet_api_tiktok/notifycenter/notices/","/webcast/wallet_api_tiktok/income_plus/get_user_region_info/","/webcast/wallet_api_tiktok/income_plus/account_steps/","/webcast/wallet_api_tiktok/income_plus/user/"],l=["/webcast/gift/send/",...a],d=["/api/private_banner/ack/","/cloudpush/update_sender_token/","/cloudpush/app_notice_status/","/api/user/set/settings/","/api/reddot/report","/api/comment/digg/","/api/comment/publish/","/api/comment/delete/","/api/aweme/delete/","/api/schedule/aweme/delete/","/api/privacy/user/private_account/update/v1","/api/im_setting/update/v1","/api/privacy/agreement/record/agree/v1","/api/commit/follow/request/approve/","/api/commit/follow/request/reject/","/api/commit/follow/user/","/api/impression/write/","/api/user/set/animation/","/api/aweme/set/react_duet_stitch/","/api/aweme/modify/visibility/","/passport/web/login_name/update/","/api/update/profile/","/api/upload/image/","/tiktok/v1/username/save_async/","/api/commit/ads/action/"],c=["/api/post/item_list/","/api/music/item_list/"],p={"webcast.tiktok.com":{POST:s,GET:r},"webcast-t.tiktok.com":{POST:s,GET:r},"webcast-m.tiktok.com":{POST:s,GET:r},"webcast.us.tiktok.com":{POST:l,GET:r},"www.tiktok.com":{POST:d},"us.tiktok.com":{POST:d},"m.tiktok.com":{POST:d},"t.tiktok.com":{POST:d}}},18791:(e,t,i)=>{"use strict";i.d(t,{$:()=>_,M:()=>v});var o=i(64047),n=i(57244),a=i(37729),s=i(82346),r=i(14716),l=i(49584),d=i(93859),c=i(68854),p=i(56979),u=i(83138),g=i(11467),m=i(70526),h=i(71024);let _=class{constructor(e,t){this.util=e,this.slardar=t,this.init$=new a.t(1),this.acrawlerInitliazed=!1,this.csrfInitliazed=!1;{const e={settled:!1,value:!1},t={settled:!1,value:!1},i=setTimeout((()=>this.init$.next([e.value,t.value])),1e4);this.initAcrawler().subscribe((o=>{e.settled=!0,e.value=o,t.settled&&(clearTimeout(i),this.init$.next([e.value,t.value]),e.value&&t.value&&this.slardar.sendCustomPerfMetric("js_load_secsdk"))})),this.initCSRF().subscribe((o=>{t.settled=!0,t.value=o,e.settled&&(clearTimeout(i),this.init$.next([e.value,t.value]),e.value&&t.value&&this.slardar.sendCustomPerfMetric("js_load_secsdk"))}))}}initAcrawler(){return this.util.appContext$.pipe((0,l.z)((e=>{const{appId:t,user:i,clusterRegion:o,wid:n=""}=e,a=1233===t;let r=a?"va-tiktok":"sg-tiktok";return r="TTP"===o?"ttp":r,this.loadSdk("acrawler").pipe((0,d.b)((()=>{var e;this.acrawlerInitliazed||(this.slardar.sendCustomPerfMetric("js_load_acrawler"),this.acrawlerInitliazed=!0,window.byted_acrawler.init({aid:1988,dfp:!1,boe:!1,intercept:!0,enablePathList:h.rJ,region:r,mode:v({isVA:a,isLogin:Boolean(i),isFTC:null!==(e=null==i?void 0:i.ftcUser)&&void 0!==e&&e,isHighRisk:!1}),isSDK:!1}))})),(0,c.K)((e=>{var t;return this.slardar.sendLog(`load Acrawler Error: ${e.message}`,"warn",{uid:null!==(t=null==i?void 0:i.uid)&&void 0!==t?t:"",wid:n}),(0,s.of)(!0)})))})),(0,p.U)((()=>!0)),(0,c.K)((()=>(0,s.of)(!0))))}initCSRF(){return this.util.appContext$.pipe((0,l.z)((e=>{const{clusterRegion:t}=e;let i="secsdk_sg";switch(t){case"MALI_VA":i="secsdk_va";break;case"TTP":i="secsdk_ttp";break;default:i="secsdk_sg"}return this.loadSdk(i)})),(0,p.U)((()=>!0)),(0,d.b)((()=>{this.csrfInitliazed||(this.csrfInitliazed=!0,window.secsdk.csrf.setProtectedHost(h.Yf))})),(0,c.K)((e=>(this.slardar.sendLog(`load secsdk Error: ${e.message}`,"warn"),(0,s.of)(!1)))))}loadSdk(e){return(0,r.D)((0,u.yy)({moduleId:e,retry:1}))}};_=(0,o.__decorate)([(0,n.G)(),(0,o.__metadata)("design:paramtypes",[m.GV,g.n])],_);const v=({isVA:e,isLogin:t,isFTC:i,isHighRisk:o})=>i?517:t?513:e&&o?515:e&&!o?514:516},48319:(e,t,i)=>{"use strict";function o(e){var t,i;return null!==(i=null!==(t=e.displayName)&&void 0!==t?t:e.name)&&void 0!==i?i:"UnknownComponent"}i.d(t,{i:()=>o})},87930:(e,t,i)=>{"use strict";i.d(t,{G:()=>o,k:()=>n});const o=e=>null,n=(e,t,i)=>{}},21005:(e,t,i)=>{"use strict";i.d(t,{n:()=>s});var o=i(11348),n=i(49847),a=i(68854);const s=({msg:e,shouldShowMsg:t=!1,prevent:i=!0,callback:s})=>r=>r.pipe((0,a.K)((a=>(t&&console.error("Effect error: ",null!=e?e:a),null==s||s(),i?o.E:(0,n._)((()=>a))))))},45949:(e,t,i)=>{"use strict";i.d(t,{G6:()=>a,Y8:()=>s,Di:()=>r,Ii:()=>l,YT:()=>d,KF:()=>c,cx:()=>p,uf:()=>g,KZ:()=>m,YZ:()=>h,le:()=>_,D$:()=>v,e8:()=>y,St:()=>b,D9:()=>f,lD:()=>x,NS:()=>k,UW:()=>w,PF:()=>S});var o=i(25615),n=i.n(o);function a(){return navigator.vendor&&-1!==navigator.vendor.indexOf("Apple")&&navigator.userAgent&&-1===navigator.userAgent.indexOf("CriOS")&&-1===navigator.userAgent.indexOf("FxiOS")}function s(e=n(),t=n()){let i,o;function a(){i&&document[i]?e():t()}return"hidden"in document?(i="hidden",o="visibilitychange"):"msHidden"in document?(i="msHidden",o="msvisibilitychange"):"webkitHidden"in document&&(i="webkitHidden",o="webkitvisibilitychange"),"addEventListener"in document&&i&&o?(document.addEventListener(o,a,!1),document.removeEventListener.bind(document,o,a,!1)):n()}function r(e,t){let i={top:0,bottom:0,left:0,right:0};try{i=e.getBoundingClientRect()}catch(e){}let{top:o,bottom:n}=i;const{height:a}=i;return o-=t,n-=t,o=Math.abs(o),n<=0||o>=a?0:Number((n/a).toFixed(2))}function l(){return window.innerHeight<document.body.offsetHeight&&"hidden"!==document.body.style.overflow}function d(){return window.innerWidth-document.body.offsetWidth}const c=(e=0,t=100,i,o=!0)=>{const n=p(),a=Date.now(),s=()=>{const r=Date.now()-a;if(r>=t)return o?window.scrollTo({top:e,behavior:"smooth"}):window.scrollTo(0,e),void(null==i||i());const l=n+r/t*(e-n);o?window.scrollTo({top:l,behavior:"smooth"}):window.scrollTo(0,l),requestAnimationFrame(s)};s()};function p(){const e=document.documentElement||document.body.parentNode||document.body;return void 0!==window.pageYOffset?window.pageYOffset:e.scrollTop}const u="webapp-scroll_invoke_by_click";function g(){return b(u)}function m(){x(u)}function h(e=0,t=100){const i=p(),o=Date.now(),n=()=>{window.pageYOffset.toFixed()===e.toFixed()&&(f(u,"done"),window.removeEventListener("scroll",n))};f(u,"start"),window.addEventListener("scroll",n),function n(){const a=Date.now()-o;if(a>=t)return void window.scrollTo({top:e,behavior:"smooth"});const s=(t-a)/t*(e-i)+i;window.scrollTo({top:s,behavior:"smooth"}),requestAnimationFrame(n)}()}function _(e,t=""){var i;try{return null!==(i=localStorage.getItem(e))&&void 0!==i?i:t}catch(e){return t}}function v(e,t){try{localStorage.setItem(e,t)}catch(e){}}function y(e){try{localStorage.removeItem(e)}catch(e){}}function b(e,t=""){var i;try{return null!==(i=sessionStorage.getItem(e))&&void 0!==i?i:t}catch(e){return t}}function f(e,t){try{sessionStorage.setItem(e,t)}catch(e){}}function x(e){try{sessionStorage.removeItem(e)}catch(e){}}const k=e=>{e.preventDefault(),e.stopPropagation()},w=e=>{e.stopPropagation()},S=e=>{e.preventDefault()}},7650:(e,t,i)=>{"use strict";function o(){return"undefined"==typeof window||"undefined"==typeof document}function n(){return!o()&&!window.SIGI_STATE}i.d(t,{y:()=>o,W:()=>n})},14500:(e,t,i)=>{"use strict";i.d(t,{yB:()=>l});var o,n,a=i(64047),s=i(57244),r=i(95872);!function(e){e.Share="livesdk_share",e.Report="livesdk_live_user_report",e.ReportSuccess="livesdk_report_success",e.ChatClose="livesdk_comment_close",e.HoverUserCardShow="livesdk_user_card_show",e.Follow="livesdk_follow",e.Take="livesdk_live_action",e.SetupPopShow="livesdk_live_tab_popup_show",e.AnchorEnterRoom="livesdk_anchor_enter_room",e.Show="livesdk_live_show",e.ClickEntrance="livesdk_rec_live_play",e.Unfollow="livesdk_unfollow"}(o||(o={})),function(e){e.VideoHeadBrowser="video_head_browser",e.Creator="creator",e.VideoHead="video_head",e.OthersPhoto="others_photo",e.SuggestedOthersPhoto="suggested_others_photo",e.ClickOneColumnUser="click_main_btn"}(n||(n={}));let l=class{constructor(){this.handleLiveEntranceShow=e=>{r.W.event("livesdk_live_show",e)},this.handleLiveEntranceClick=e=>{r.W.event("livesdk_rec_live_play",e)},this.handleLiveStreamEntranceClick=e=>{r.W.event("livesdk_live_action",Object.assign({live_type:"third_party"},e))}}};l=(0,a.__decorate)([(0,s.G)()],l)},99835:(e,t,i)=>{"use strict";i.d(t,{Q:()=>r});var o=i(64047),n=i(57244),a=i(90293),s=i(48936);let r=class{constructor(e){this.fetch=e}getUniversalPopConfig(e){return this.fetch.get("/api/policy/notice/",{query:e})}setUniversalPopOperation(e){return this.fetch.post("https://www.tiktok.com/api/policy/notice/approve/",{body:(0,a.stringify)(e)})}getPolicyContent(e){return this.fetch.get("https://www.tiktok.com/web/api/v2/project/articleContent/",{query:e})}};r=(0,o.__decorate)([(0,n.G)(),(0,o.__metadata)("design:paramtypes",[s.r])],r)},28139:(e,t,i)=>{"use strict";i.d(t,{a:()=>s});var o=i(64047),n=i(57244),a=i(95872);let s=class{constructor(){this.handlePolicyConfirmOnFYP=e=>{a.W.event("tns_web_trending_setting",e)},this.handleAgeGateResponse=(e,t)=>{a.W.event("age_gate_response",{enter_type:"click_sign_up",is_success:e?1:0,error_code:t})}}handleUniversalPopShow(e){a.W.event("tns_general_dialog_show",e)}handleUniversalPopClick(e){a.W.event("qa_tns_general_dialog_click",e)}};s=(0,o.__decorate)([(0,n.G)()],s)},29025:(e,t,i)=>{"use strict";i.d(t,{sJ:()=>h,y7:()=>_,It:()=>v,FH:()=>y,il:()=>b,Yf:()=>f,PT:()=>x,iA:()=>k,Ny:()=>w,pV:()=>S,xI:()=>C,Rj:()=>j});var o=i(91051),n=i(21041),a=i(43139),s=i(22597),r=i(39664),l=i(17133),d=i(58854),c=i(71300),p=i(33642),u=i(24421);const g="abTestVersion",m="videoPlayerConfig";function h(){var e;const{abTestVersion:t}=(0,p.m7)((0,l.Lh)((()=>[g]),[])),i=null!==(e=(0,u.N8)(t,"cta_phase2"))&&void 0!==e?e:"v1";return{isCTATestV1:"v1"===i,isCTATestV2:"v2"===i}}function _(){var e;const{abTestVersion:t}=(0,p.m7)((0,l.Lh)((()=>[g]),[])),{videoPlayerConfig:i}=(0,p.m7)((0,d.h)((()=>[m]),[])),{pathname:a}=(0,n.TH)(),{feedMode:c}=(0,o.useContext)(r.yb),h=null!==(e=(0,u.N8)(t,"video_feed_redesign"))&&void 0!==e?e:"v1";let _=h;"one_column_mode"===c&&(_="v1");const v="v1"===_;return{isUseNativePlayer:null==i?void 0:i.fallback,isVideoFeedRedesignV1:v,isVideoFeedRedesignV2:"v2"===_,isVideoFeedRedesignV3:"v3"===_,isInVideoFeedRedesign:!v&&((0,s.oC)(a)||(0,s.FZ)(a)),isRealInVideoFeedRedesign:"v1"!==h&&((0,s.oC)(a)||(0,s.FZ)(a))}}function v(){var e;const{abTestVersion:t}=(0,p.m7)((0,l.Lh)((()=>[g]),[])),{videoPlayerConfig:i}=(0,p.m7)((0,d.h)((()=>[m]),[]));return{isUseNativePlayer:null==i?void 0:i.fallback,isUseAdaptBitrate:"v2"===(null!==(e=(0,u.xX)(t,"video_bitrate_adapt"))&&void 0!==e?e:"v1")}}function y(){var e;const{abTestVersion:t}=(0,p.m7)((0,l.Lh)((()=>[g]),[])),{playbackNormalizePath:i}=(0,p.m7)((0,d.h)((()=>["playbackNormalizePath"]),[]));return{normalizationVid:null!==(e=(0,u.xX)(t,"volume_normalize"))&&void 0!==e?e:"v1",playbackNormalizePath:i}}function b(){var e;const{abTestVersion:t}=(0,p.m7)((0,l.Lh)((()=>[g]),[]));return null!==(e=(0,u.xX)(t,"xg_volume_test"))&&void 0!==e?e:"v1"}function f(){const{xgplayerInitHost:e}=(0,p.m7)((0,d.h)((()=>["xgplayerInitHost"]),[]));return{xgplayerInitHost:e}}function x(){const{videoOrder:e}=(0,p.m7)((0,d.h)((()=>["videoOrder"]),[]));return{videoOrder:null==e?void 0:e.videoOrder}}function k(){var e;const{pathname:t}=(0,n.TH)(),{abTestVersion:i}=(0,p.m7)((0,l.Lh)((()=>[g]),[]));let o=null!==(e=(0,u.N8)(i,"webapp_video_detail_page_optimization"))&&void 0!==e?e:"v1";o=(0,c.HX)()?"v1":o;const a=(0,s.cQ)(t),r="v2"===o,d="v3"===o,m="v4"===o;return{isVideoPlayerOptimization:r,hasPip:d,isUIOptimization:m,shouldUseNewTitle:"v5"===o,isVideoDetailUIOptimization:m&&a,hasVideoDetailPip:d&&a,isVideoDetailExperiment:"v1"!==o&&a,isVideoDetailPlayerExperiment:r&&a}}function w(){var e;const{abTestVersion:t}=(0,p.m7)((0,l.Lh)((()=>[g]),[]));return{shouldUseAds:"v2"===(null!==(e=(0,u.N8)(t,"tt4b_ads"))&&void 0!==e?e:"v1")}}const S=e=>{if(!e)return{};const{id:t,type:i,isClaimed:o,cityCode:n,countryCode:s,ttTypeNameSuper:r,ttTypeNameMedium:l,ttTypeNameTiny:d,ttTypeCode:c,typeCode:p}=e;return{poi_id:t,poi_backend_type:i,poi_detail_type:a.L7[null!=i?i:0],is_claimed:o?1:0,poi_city:n,poi_region_code:s,tt_poi_backend_type:`${r},${l},${d}|${c}`,poi_type_code:p}};function C(){var e;const{abTestVersion:t}=(0,p.m7)((0,l.Lh)((()=>[g]),[])),i=null!==(e=(0,u.N8)(t,"webapp_video_detail_page_related_mask"))&&void 0!==e?e:"v1";return{hasRecommendMask:"v2"===i,hasCountDownMask:"v3"===i,notAutoPlay:"v1"!==i}}const j=()=>{var e;const{abTestVersion:t}=(0,p.m7)((0,l.Lh)((()=>["abTestVersion"]),[])),i=null!==(e=(0,u.xX)(t,"explore_test"))&&void 0!==e?e:"v1";return{isExploreEnable:"v1"!==i,isOneColumn:"v2"===i}}},97751:(e,t,i)=>{"use strict";i.d(t,{AH:()=>r,kU:()=>_,eQ:()=>w,qC:()=>C,vN:()=>p,kg:()=>x,PV:()=>T,LN:()=>b,hw:()=>c,ES:()=>y,lK:()=>f,OB:()=>g,b7:()=>m,m8:()=>u,OV:()=>s,HW:()=>d,S0:()=>l,u7:()=>j,_T:()=>k,jd:()=>S,CO:()=>v});const o=["AT","BE","BG","HR","CY","CZ","DE","DK","EE","EL","FI","FR","GR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","SE","NO","IS","LI"];var n,a;o.concat(["GB","CH"]),function(e){e.DEFAULT="DEFAULT",e.SG="ALL_SG",e.VA="MALI_VA",e.TTP="TTP",e.BOE="BOE"}(n||(n={})),function(e){e[e.Hot=0]="Hot",e[e.Relation=1]="Relation",e[e.Fresh=2]="Fresh",e[e.Post=3]="Post",e[e.Favorite=4]="Favorite",e[e.Challenge=5]="Challenge",e[e.Music=6]="Music",e[e.Category=7]="Category",e[e.MusicFresh=8]="MusicFresh",e[e.ChallengeFresh=9]="ChallengeFresh",e[e.Follow=10]="Follow",e[e.Trending=18]="Trending",e[e.TitleRecommend=20]="TitleRecommend",e[e.Nearby=21]="Nearby",e[e.Search=23]="Search",e[e.HotVideo=24]="HotVideo",e[e.HotMusic=25]="HotMusic",e[e.FollowerList=26]="FollowerList",e[e.Inbox=33]="Inbox",e[e.Live=27]="Live"}(a||(a={}));const s="webapp-pwa-expanded",r="webapp-live-nav-click",l="webapp_showed_profile_tip",d="webapp_showed_dark_mode_tip_count",c="webapp_launch_mode",p="webapp_tiktok_open",u="webapp_tiktok_privious",g="webapp_open_edit_profile_modal_from",m="popup_profile_toast";var h;!function(e){e[e.NIL=-255]="NIL",e[e.UnknownError=-1]="UnknownError",e[e.Ok=0]="Ok",e[e.ReportLiveFailed=90002]="ReportLiveFailed",e[e.VerifyCode=1e4]="VerifyCode",e[e.VideoLikeFreq=2150]="VideoLikeFreq",e[e.VideoLikeFreq2=2210]="VideoLikeFreq2",e[e.VideoUnavailableDeleted=2054]="VideoUnavailableDeleted",e[e.AdVideoUnavailableChange=2752]="AdVideoUnavailableChange",e[e.CommentBanCode=22]="CommentBanCode",e[e.CommentLikePermissionDisable=3002043]="CommentLikePermissionDisable",e[e.SearchSensitiveCode=403]="SearchSensitiveCode",e[e.SearchYoungCode=203]="SearchYoungCode",e[e.SmsInvalidNumber=-1]="SmsInvalidNumber",e[e.SmsSlideVerify=-4]="SmsSlideVerify",e[e.FypVideoListLimit=10404]="FypVideoListLimit",e[e.ClientPageError=450]="ClientPageError",e[e.LiveNeedLogin=10119]="LiveNeedLogin",e[e.SharkBlock=10114]="SharkBlock",e[e.SharkSlide=10113]="SharkSlide",e[e.NetError=10111]="NetError",e[e.ServerErrorNot500=10101]="ServerErrorNot500",e[e.VideoRisk=10228]="VideoRisk",e[e.VideoRMask=10229]="VideoRMask",e[e.VideoRiskMask=10230]="VideoRiskMask",e[e.VideoNeedRecheck=10227]="VideoNeedRecheck",e[e.VideoUnshelveByMusic=10220]="VideoUnshelveByMusic",e[e.VideoNotExist=10204]="VideoNotExist",e[e.VideoAbnormal=10215]="VideoAbnormal",e[e.VideoLowAgeM=10213]="VideoLowAgeM",e[e.VideoLowAgeT=10214]="VideoLowAgeT",e[e.VideoFirstReviewUnshelve=10217]="VideoFirstReviewUnshelve",e[e.VideoPrivateByUser=10216]="VideoPrivateByUser",e[e.VideoGeofenceBlock=10231]="VideoGeofenceBlock",e[e.VideoPhoto=10239]="VideoPhoto",e[e.VideoFriendsOnly=10240]="VideoFriendsOnly",e[e.VideoDeleted=10241]="VideoDeleted",e[e.VideoUserBlockedByAuthor=10242]="VideoUserBlockedByAuthor",e[e.HashtagNotExist=10205]="HashtagNotExist",e[e.HashtagUnshelve=10212]="HashtagUnshelve",e[e.HashtagSensitivityWord=10211]="HashtagSensitivityWord",e[e.HashtagBlackList=10209]="HashtagBlackList",e[e.UserInboxFollowBan=24]="UserInboxFollowBan",e[e.UserNotExist=10202]="UserNotExist",e[e.UserBan=10221]="UserBan",e[e.UserPrivate=10222]="UserPrivate",e[e.UserNotLogin=10102]="UserNotLogin",e[e.UserFtc=10223]="UserFtc",e[e.UserUniqueSensitivity=10225]="UserUniqueSensitivity",e[e.QuestionNotAvailable=10236]="QuestionNotAvailable",e[e.MusicNotExist=10203]="MusicNotExist",e[e.MusicUnshelve=10218]="MusicUnshelve",e[e.MusicNoCopyright=10219]="MusicNoCopyright",e[e.MusicUnavailable=202001]="MusicUnavailable",e[e.PlaceNotExist=205001]="PlaceNotExist",e[e.PlaceOffline=205002]="PlaceOffline",e[e.PlaceUnavailableInRegion=205003]="PlaceUnavailableInRegion",e[e.GameNotExist=10224]="GameNotExist",e[e.LiveNotExist=10210]="LiveNotExist",e[e.GoLiveRoomBaned=10018]="GoLiveRoomBaned",e[e.GoLiveBaned=4003035]="GoLiveBaned",e[e.LiveRoomPrepare=30019]="LiveRoomPrepare",e[e.LiveRoomEnd=30003]="LiveRoomEnd",e[e.LiveRoomBan=30012]="LiveRoomBan",e[e.LiveNoGatedAuth=4003043]="LiveNoGatedAuth",e[e.LiveNoAgeGatedAuth=4003110]="LiveNoAgeGatedAuth",e[e.LivePaidEvent=4003072]="LivePaidEvent",e[e.LiveSubscriberOnly=4003135]="LiveSubscriberOnly",e[e.LiveSuicideCase=2403]="LiveSuicideCase",e[e.LiveSensitiveTitle=50004]="LiveSensitiveTitle",e[e.LiveRoomBaned=10018]="LiveRoomBaned",e[e.LiveEnterRoomNeedLogin=20003]="LiveEnterRoomNeedLogin",e[e.LiveAccountUnderRiskControl=20063]="LiveAccountUnderRiskControl",e[e.LiveHitBanStrategy=30009]="LiveHitBanStrategy",e[e.LiveOBSAccessRecalled=4003105]="LiveOBSAccessRecalled",e[e.LiveUserNotFound=19881007]="LiveUserNotFound",e[e.EffectNotExist=10208]="EffectNotExist",e[e.PlaylistNotExist=10233]="PlaylistNotExist",e[e.PlaylistInTrill=10234]="PlaylistInTrill",e[e.VideoPlaylistUnavailable=10243]="VideoPlaylistUnavailable",e[e.VideoPlaylistIsEmpty=10244]="VideoPlaylistIsEmpty",e[e.PrivateAccountLimitByBC=3026002]="PrivateAccountLimitByBC"}(h||(h={}));const _="Sorry, something wrong with the server, please try again.",v=1988,y=3e4,b=9,f=30,x=9,k=9,w=30,S=30,C="tiktok_webapp_feed_mode",j="tiktok_webapp_theme";var P;!function(e){e.DarkTheme="dark",e.LightTheme="light"}(P||(P={}));const T=o.concat(["CH","US","GB"])},49290:(e,t,i)=>{"use strict";i.d(t,{ew:()=>u,y9:()=>g,Cl:()=>m,Us:()=>h,vO:()=>_,NI:()=>v,jP:()=>y,IH:()=>b});var o,n,a,s,r,l,d,c,p=i(69551);!function(e){e.General="",e.Account="account",e.Common="common",e.Bug="bug",e.Feat="feature"}(o||(o={})),function(e){e[e.HideStillReport=2048]="HideStillReport",e[e.Account=4096]="Account"}(n||(n={})),function(e){e[e.ImageAnswer=1]="ImageAnswer",e[e.CategoryName=2]="CategoryName",e[e.Link=3]="Link"}(a||(a={})),function(e){e[e.NotEntranceShowType=0]="NotEntranceShowType",e[e.NotSolveAfterShow=1]="NotSolveAfterShow",e[e.NotSolveBeforeShow=2]="NotSolveBeforeShow",e[e.NotSolveAfterNotShow=3]="NotSolveAfterNotShow"}(s||(s={})),function(e){e[e.AlwaysShow=0]="AlwaysShow"}(r||(r={})),function(e){e.General="general"}(l||(l={})),function(e){e.V2="v2",e.V3="v3"}(d||(d={})),function(e){e.Yes="yes",e.No="no"}(c||(c={}));const u="general",g={5678:"login_page",9190:"login_page_lite",13e3:"abnor_live_purch",13417:"eg_referral",12043:"th_referral",10541:"br_referral",10561:"id_referral",11087:"Creator_Fund_EU",10960:"Creator_Fund",15376:"ca_referral",15375:"au_referral",15048:"BA_registration",13186:"TikTok_shoutouts",12996:"balance_page",13053:"br_referral_lite"},m=["US"],h=3,_=4,v={getListV2:"/feedback/2/common_feedback_list/",getListV3:"/feedback/3/common_feedback_list/",getNewestReply:"/api/feedback/v1/newest_reply/",uploadImage:"/node/feedback/upload_image/",getReportRecords:"/feedback/3/list/",submitFeedback:"/feedback/2/post_message/"},y=["image/png","image/jpeg","image/jpg","image/bmp"],b={id:"",label:p.Q.HELP_CENTER.key,translated:!1}},69551:(e,t,i)=>{"use strict";i.d(t,{Q:()=>o});const o={IS_YOUR_PROBLEM_RESOLVED:{key:"Is your problem resolved?"},BACKEND_SETTINGS_YES:{key:"backend_settings_yes"},BACKEND_SETTINGS_NO:{key:"backend_settings_no"},THANK_YOU_FOR_YOUR_FEEDBACK:{key:"Thank you for your feedback"},BACKEND_SETTINGS_STILLHAVEPROBLEM:{key:"backend_settings_stillhaveproblem"},HELP_CENTER:{key:"Help Center"},BACKEND_SETTINGS_TOPIC_TITLE:{key:"backend_settings_topictitle"},FEEDBACK_AND_HELP:{key:"Feedback and help"},FEEDBACK_PC_BACK:{key:"feedback_pc_back"},BACKEND_SETTINGS_FAQTITLE:{key:"backend_settings_faqtitle"},REPORT_A_PROBLEM:{key:"Report a problem"},FEEDBACK_PC_HISTORY:{key:"feedback_pc_history"},TELL_US_YOUR_FEEDBACK:{key:"Tell us your feedback"},PLEASE_PROVIDE_AS_MUCH_DETAIL_AS_POSSIBLE:{key:"Please provide as much detail as possible"},FEEDBACK_PC_UPLOAD:{key:"feedback_pc_upload"},SUBMIT:{key:"Submit"},NETWORK_ERROR_PLEASE_TRY_AGAIN:{key:"Network error. Please try again."},COM_MIG_YOUR_SUPPORT_TICKETS:{key:"com_mig_your_support_tickets"},DESCRIPTION_MUST_BE_AT_LEAST_2_CHARS:{key:"Description must be at least 2 characters"}}},7992:(e,t,i)=>{"use strict";i.d(t,{Li:()=>o,Zy:()=>n});const o="tiktok_webapp",n="tiktok_webapp_login"},4776:(e,t,i)=>{"use strict";i.d(t,{s:()=>a,q:()=>s});var o=i(91051),n=i(68457);function a({elemRef:e,onHitBottom:t,bottomThreshold:i=10,throttle:a=100}){const s=(0,n.fB)((()=>{if(!e.current)return;const{offsetHeight:o,scrollTop:n,scrollHeight:a}=e.current;o+n+i>=a&&(null==t||t())}),[i,e,t],a);(0,o.useEffect)((()=>{const{current:t}=e;return null==t||t.addEventListener("scroll",s),()=>{null==t||t.removeEventListener("scroll",s)}}),[e,e.current,s])}function s({elemRef:e,onHitBottom:t,bottomThreshold:i=10,throttle:a=100}){const s=(0,n.fB)((()=>{if(!e.current)return;const{bottom:o}=e.current.getBoundingClientRect();o-i<=window.innerHeight&&(null==t||t())}),[i,e,t],a);(0,o.useEffect)((()=>(window.addEventListener("scroll",s),()=>{window.removeEventListener("scroll",s)})),[s])}},3984:(e,t,i)=>{"use strict";i.d(t,{s:()=>a});var o=i(91051),n=i(68457);function a({elementRef:e,threshold:t=1e3,onHitBottom:i,onPageBottom:a,shouldRunOnMount:s}){const r=(0,o.useRef)(null),l=(0,o.useRef)(0),d=(0,o.useRef)(0),c=(0,o.useRef)(!s),p=(0,o.useCallback)((()=>{"undefined"!=typeof window&&window.clearInterval(d.current)}),[]),u=(0,n.fB)((()=>{var o,n,s,d,u,g,m;if(!r)return;let h,_;if(e)h=null!==(s=null===(n=e.current)||void 0===n?void 0:n.scrollTop)&&void 0!==s?s:0,_=(null!==(u=null===(d=e.current)||void 0===d?void 0:d.scrollHeight)&&void 0!==u?u:0)-(null!==(m=null===(g=e.current)||void 0===g?void 0:g.clientHeight)&&void 0!==m?m:0)-h;else{const e=document.documentElement||document.body.parentNode||document.body;h=void 0!==window.pageYOffset?window.pageYOffset:e.scrollTop,_=Number(null===(o=r.current)||void 0===o?void 0:o.scrollHeight)-h-window.innerHeight}!c.current&&_>0&&p(),_-t<=0&&l.current<=h&&(null==i||i(),!c.current&&p()),_<=-60&&h-l.current>=18&&(null==a||a()),l.current=h}),[i,t,a,e,p],100),g=(0,o.useRef)(u);return g.current=u,(0,o.useEffect)((()=>{s&&(d.current=window.setInterval((()=>{var e;null===(e=g.current)||void 0===e||e.call(g)}),100))}),[]),(0,o.useEffect)((()=>{var t;const i=null!==(t=null==e?void 0:e.current)&&void 0!==t?t:window;return i.addEventListener("scroll",u),()=>{i.removeEventListener("scroll",u)}}),[u,e]),r}},270:(e,t,i)=>{"use strict";i.d(t,{R:()=>l,J:()=>d});var o=i(25615),n=i.n(o),a=i(91051),s=i(45949);const r=(0,a.createContext)({counterRef:{current:0},scrollWidthRef:{current:0},subscribeRef:{current:[]},setCounter:n(),setScrollWidth:n(),subscribeModalChange:()=>n()});function l(){const e=(0,a.useRef)(0),t=(0,a.useRef)(0),i=(0,a.useRef)([]),o=(0,a.useCallback)((t=>{e.current=t}),[]),n=(0,a.useCallback)((e=>{t.current=e}),[]),s=(0,a.useCallback)((e=>(i.current.push(e),()=>{const t=i.current.indexOf(e);i.current.splice(t)})),[]),l=(0,a.useMemo)((()=>({counterRef:e,subscribeRef:i,scrollWidthRef:t,setCounter:o,setScrollWidth:n,subscribeModalChange:s})),[s,o,n]);return{GlobalModalProvider:r.Provider,value:l}}function d(){const{counterRef:e,setCounter:t,setScrollWidth:i,subscribeRef:o,scrollWidthRef:n,subscribeModalChange:l}=(0,a.useContext)(r),d=(0,a.useCallback)((e=>{o.current.forEach((t=>{t({hasModal:e,scrollWidth:n.current})}))}),[n,o]);return{showModal:(0,a.useCallback)((o=>{if(!(0,s.Ii)()&&!o)return;const{current:n}=e;if(t(n+1),0===n){const e=(0,s.YT)();i(e),document.body.style.paddingRight=`${e}px`,document.body.className+=" hidden",d(!0)}}),[e,d,t,i]),hideModal:(0,a.useCallback)((()=>{const{current:o}=e,n=Math.max(0,o-1);t(n),0===n&&(i(0),document.body.className=document.body.className.replace(/\s?hidden/g,""),document.body.style.paddingRight="0px",d(!1))}),[e,d,t,i]),subscribeModalChange:l}}},87458:(e,t,i)=>{"use strict";i.d(t,{e:()=>a});var o=i(91051),n=i(32273);const a=(e="Webapp")=>{const t=(0,n.Q)(e),i=(0,o.useCallback)(((e,i)=>{const o=function(e){if(!e||isNaN(e))return"";const t=new Date(Number(e)),i=new Date,o=Math.max(i.getTime()-t.getTime(),0);return t.getFullYear()!==i.getFullYear()?`${t.getFullYear()}-${t.getMonth()+1}-${t.getDate()}`:~~(o/c)>7?`${t.getMonth()+1}-${t.getDate()}`:7==~~(o/c)?{num:1,unit:"unit_week"}:o>c?{num:~~(o/c),unit:"unit_day"}:o>d?{num:~~(o/d),unit:"unit_hr"}:o>l?{num:~~(o/l),unit:"unit_min"}:{num:1+~~(o/r),unit:"unit_sec"}}(e);if("string"==typeof o)return o;const{num:n,unit:a}=o;return i?`${n}${t(a)}`:t("time_ago",{num:n,unit:t(a)})}),[t]);return{t,timeTranslator:i}};var s;!function(e){e.Week="unit_week",e.Day="unit_day",e.Hour="unit_hr",e.Minute="unit_min",e.Second="unit_sec"}(s||(s={}));const r=1e3,l=6e4,d=36e5,c=24*d},55383:(e,t,i)=>{"use strict";i.d(t,{J:()=>n});var o=i(91051);const n=({upHandler:e,downHandler:t,confirmHandler:i,tabHandler:n})=>(0,o.useCallback)((o=>{const{keyCode:a}=o;switch(a){case 38:o.preventDefault(),e();break;case 40:o.preventDefault(),t();break;case 13:null==i||i();break;case 9:null==n||n(o)}}),[i,t,n,e])},5687:(e,t,i)=>{"use strict";i.d(t,{e:()=>a});var o=i(91051),n=i(21041);function a(){const e=(0,n.k6)();return(0,o.useCallback)(((t,{href:i,state:o,shouldUsePush:n})=>{n&&(t.preventDefault(),e.push(i,o))}),[e])}},90525:(e,t,i)=>{"use strict";i.d(t,{m:()=>d});var o=i(9236),n=i(91051),a=i(38310),s=i(71300),r=i(17133),l=i(66826);function d(e,t="hyperlink",i="one_column"){var d;const{language:c}=null!==(d=(0,r.Lh)((()=>["language"]),[]))&&void 0!==d?d:{},p=(0,o.qj)(a.A);return{openAdsHandler:(0,n.useCallback)((()=>{p.postClickAds({language:null!=c?c:"en",type:e}),l.Y.handleAdsClick(t,i),window.open((0,s.Md)(c),"_blank")}),[p,c,i,t,e])}}},71300:(e,t,i)=>{"use strict";i.d(t,{HX:()=>r,qO:()=>l,Md:()=>c});var o=i(9236),n=i(21041),a=i(11838),s=i(23434);const r=()=>{const{search:e}=(0,n.TH)();return"business"===new URLSearchParams(e).get("scene")},l=e=>{const{businessPermission:t}=(0,o.mp)(s.Y);return t.message?`/business-suite/messages?from=homepage&lang=${e}`:`${a.Ad.messages}?lang=${e}`},d={en:"us-en-brand?lang=en","vi-VN":"brand?lang=vi",ar:"ar-brand?lang=ar","th-TH":"brand?lang=th","de-DE":"boostbusinessde?lang=de","pt-BR":"br-brand?lang=pt","id-ID":"brand?lang=id","ja-JP":"jpbrand5/?lang=ja",fr:"eu-go-tiktok?lang=fr",es:"eu-go-tiktok?lang=es"},c=(e="en")=>{var t;return`https://getstarted.tiktok.com/${null!==(t=d[e])&&void 0!==t?t:d.en}&attr_source=tt_pc_ads`}},51146:(e,t,i)=>{"use strict";i.d(t,{w:()=>n});var o=i(91051);function n(e,t,i=!0,n=!0){return(0,o.useCallback)((t=>{32!==t.keyCode&&13!==t.keyCode||(i&&t.preventDefault(),n&&t.stopPropagation(),null==e||e())}),t)}},78772:(e,t,i)=>{"use strict";i.d(t,{kw:()=>d,Af:()=>c,K$:()=>p,S1:()=>u});var o=i(17133),n=i(38310),a=i(33642),s=i(24421),r=i(29025),l=i(9236);const d=e=>void 0!==(null==e?void 0:e.imagePost),c=()=>{var e;const{abTestVersion:t}=(0,a.m7)((0,o.Lh)((()=>["abTestVersion"]),[]));return"v2"===(null!==(e=(0,s.xX)(t,"photo_test"))&&void 0!==e?e:"v1")},p=e=>{var t,i;const o=d(e);return{aweme_type:o?150:0,pic_cnt:o?null===(i=null===(t=null==e?void 0:e.imagePost)||void 0===t?void 0:t.images)||void 0===i?void 0:i.length:void 0}},u=e=>{const{shouldUseAds:t}=(0,r.Ny)(),i=(0,a.m7)((0,l.mp)(n.A,{selector:t=>t[e],dependencies:[e]}));if(!t)return{};const{isTT4BAds:o=!1}=(0,a.m7)(i);return{isAds:o?1:0,adsType:o?"in_feed_ads":void 0}}},25185:(e,t,i)=>{"use strict";i.d(t,{A4:()=>r,S0:()=>d});var o=i(11040),n=i(6669),a=i.n(n);const s={plugins:{ajax:{ignoreUrls:[".byteoversea.com","tiktokv.com/v1/list","mcs-sg.tiktok.com","mcs-va.tiktok.com","mcs.us.tiktok.com"]},jsError:{ignoreErrors:["Blocked a frame with origin","__msg_type","vid_mate_check is not defined","ResizeObserver loop limit exceeded"]},resource:!0,pageview:{sendInit:!1,routeMode:"manual"}},sample:{sample_rate:1,sample_granularity:"event",include_users:[],rules:{resource:{enable:!0,sample_rate:.01,conditional_sample_rules:[]},resource_error:{enable:!0,sample_rate:.05,conditional_sample_rules:[]},performance_longtask:{enable:!0,sample_rate:.001,conditional_sample_rules:[]}}},env:"production",release:"1.0.0.5366",slardarClient:"SlardarLite",manual:1,sdkUrl:"https://sf16-website-login.neutral.ttwstatic.com/obj/tiktok_web_login_static/slardar/fe/sdk_lite/browser-nocookie.lite.1.2.15.sg.js",pluginPathPrefix:"https://sf16-website-login.neutral.ttwstatic.com/obj/tiktok_web_login_static/slardar/fe/sdk_lite/plugins"},r=(e={})=>{const t=a()(Object.assign(Object.assign({},s),e),{isJSON:!0});return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("script",Object.assign({id:"slardar-config",type:"application/json"},{children:t}),void 0),(0,o.jsx)("script",{src:"https://sf16-website-login.neutral.ttwstatic.com/obj/tiktok_web_login_static/slardar/sdk-pre/browser.lite.pre.js"},void 0)]},void 0)};var l;!function(e){e.P0="fatal",e.P1="error",e.P2="warning",e.P3="info",e.P4="debug",e.P5="critical"}(l||(l={}));const d=["lcp","fp","fid","ttfb","mpfid","fcp"]},9967:(e,t,i)=>{"use strict";i.d(t,{q:()=>r});var o=i(16926),n=i(91051),a=i(11467);let s=!0;function r({pid:e}){const t=(0,o.fz)(a.n);(0,n.useEffect)((()=>{t.config({pid:e}),t.context({isLandingPage:s?1:0}),s=!1,t.start()}),[e,t])}},11467:(e,t,i)=>{"use strict";i.d(t,{n:()=>c});var o=i(64047),n=i(57244),a=i(95554),s=(i(36034),i(95872)),r=i(7650),l=i(7992),d=i(25185);let c=class{constructor(){if(this.cachePreBid="",!(0,r.y)())try{a.Z.on("beforeSend",(e=>{var t,i,o,n;try{if("performance"===e.ev_type&&("metrics"in e.payload?e.payload.metrics.forEach(this.collectSlardarMetricsToTea):this.collectSlardarMetricsToTea(e.payload,null===(t=e.common)||void 0===t?void 0:t.pid)),"performance_timing"===e.ev_type){const{responseEnd:t,responseStart:a,domContentLoadedEventEnd:r,fetchStart:l,navigationStart:d}=null!==(i=e.payload.timing)&&void 0!==i?i:{},c=null!==(n=null===(o=e.payload.common)||void 0===o?void 0:o.pid)&&void 0!==n?n:"unknown",p=r-l,u=t-a,g=a-d;s.W.event("slardar_perf_domready",{metric_duration:p&&p>0?p.toString():-1,pid:c}),s.W.event("slardar_perf_response",{metric_duration:u&&u>0?u.toString():-1,pid:c}),s.W.event("slardar_perf_ttfb",{metric_duration:g&&g>0?g.toString():-1,pid:c})}}catch(e){}return e}))}catch(e){}}start(){try{a.Z.start()}catch(e){}}config(e,t=!1){try{a.Z.config(Object.assign(Object.assign({},e),{pluginPathPrefix:"https://sf16-website-login.neutral.ttwstatic.com/obj/tiktok_web_login_static/slardar/fe/sdk_lite/plugins"}))}catch(e){}}toggleLoginSlardar(e){var t,i;e?(this.cachePreBid=null===(i=null===(t=window.SlardarLite)||void 0===t?void 0:t.config)||void 0===i?void 0:i.bid,this.config({bid:l.Zy})):this.config({bid:this.cachePreBid})}context(e){try{Object.entries(e).forEach((([e,t])=>{var i;return null===(i=a.Z.context)||void 0===i?void 0:i.set(e,t)}))}catch(e){}}captureMessage(e="",t,i={}){var o;try{null===(o=a.Z.captureException)||void 0===o||o.call(a.Z,new Error(e),t?Object.assign(Object.assign({},i),{level:t}):i)}catch(e){console.info("slardar: capture exception error")}}emitEvent(e,t,i){var o;try{null===(o=a.Z.sendEvent)||void 0===o||o.call(a.Z,{name:e,categories:i,metrics:t})}catch(e){}}reportI18nLoadedFailed(e,t){this.emitEvent("I18nLoadFailed",{count:1},{staringName:e,lang:t})}sendLog(e,t,i){var o;try{null===(o=a.Z.sendLog)||void 0===o||o.call(a.Z,{content:e,level:t,extra:i})}catch(e){}}sendPV(e){var t;try{null===(t=a.Z.sendPageview)||void 0===t||t.call(a.Z,e)}catch(e){}}previousPid(){var e,t;return null===(t=null===(e=window.SlardarLite)||void 0===e?void 0:e.config)||void 0===t?void 0:t.pid}sendCustomPerfMetric(e,t){var i;try{const o=null!=t?t:performance.now();null===(i=a.Z.sendCustomPerfMetric)||void 0===i||i.call(a.Z,{name:e,value:o,isCustom:!0})}catch(e){}}collectSlardarMetricsToTea(e,t){if(e.isSupport||e.isPolyfill){const i=e.name.toLowerCase();d.S0.includes(i)&&s.W.event(`slardar_perf_${i}`,{metric_duration:e.value.toString(),pid:null!=t?t:"unknown",is_support:e.isSupport?"1":"0"})}}};c=(0,o.__decorate)([(0,n.G)(),(0,o.__metadata)("design:paramtypes",[])],c)},75200:(e,t,i)=>{"use strict";i.d(t,{mn:()=>D,u8:()=>B,nV:()=>z,k0:()=>F});var o=i(64047),n=i(16926),a=i(90293),s=i(91051),r=i(21041),l=i(63747),d=i.n(l),c=i(95872),p=i(85782),u=i(24376);function g(e,t){var i,o,n,a,s,r;const l=(0,p.St)(u.lF,"");if(l&&"{}"!==l)return l;const d=(0,p.pm)()||{},c={object_id:null!==(i=d.object_id)&&void 0!==i?i:d.referer_video_id,object_type:d.object_type,share_device:null!==(n=null!==(o=d.share_device)&&void 0!==o?o:d.sender_device)&&void 0!==n?n:"",share_web_id:null!==(s=null!==(a=d.share_web_id)&&void 0!==a?a:d.sender_web_id)&&void 0!==s?s:"",share_user_id:null!==(r=d.share_user_id)&&void 0!==r?r:""};"referral_amp"===e||"referral_embed"===e?(c.object_type="video",c.object_id=d.referer_video_id):"reflow"===e||"webapp_reflow"===e?(c.object_type=null==t?void 0:t.object_type,c.object_id=null==t?void 0:t.object_id):"push"===e&&(c.push_type=d.push_type),Object.keys(c).forEach((e=>{c[e]||delete c[e]}));const g=JSON.stringify(c);return(0,p.D9)(u.lF,g),g}var m=i(37818);function h(e){if(!(null==e?void 0:e.geometry)||!(null==e?void 0:e.text))return e;const t=(0,m.as)(e.geometry),i=(0,m.as)(e.text);return Object.assign(Object.assign({},e),{text:i,geometry:t})}function _(){if("undefined"==typeof document)return null;const e=document.createElement("canvas");return e.width=256,e.height=128,e.getContext("webgl",{preserveDrawingBuffer:!0})}function v(){var e,t,i,o;const n={value:"",duration:0},a=_(),s=null===(e=null==a?void 0:a.createBuffer)||void 0===e?void 0:e.call(a),r=null===(t=null==a?void 0:a.createProgram)||void 0===t?void 0:t.call(a),l=null===(i=null==a?void 0:a.createShader)||void 0===i?void 0:i.call(a,a.VERTEX_SHADER),d=null===(o=null==a?void 0:a.createShader)||void 0===o?void 0:o.call(a,a.FRAGMENT_SHADER);if(a&&s&&r&&l&&d&&"undefined"!=typeof Uint8Array){let e="";try{a.bindBuffer(a.ARRAY_BUFFER,s),a.bufferData(a.ARRAY_BUFFER,new Float32Array([-.2,-.9,0,.4,-.26,0,0,.7321,0]),a.STATIC_DRAW);const t=3,i=3;a.shaderSource(l,"attribute vec2 attrVertex;varying vec2 varyinTexCoordinate;uniform vec2 uniformOffset;void main(){varyinTexCoordinate=attrVertex+uniformOffset;gl_Position=vec4(attrVertex,0,1);}"),a.compileShader(l),a.shaderSource(d,"precision mediump float;varying vec2 varyinTexCoordinate;void main() {gl_FragColor=vec4(varyinTexCoordinate,0,1);}"),a.compileShader(d),a.attachShader(r,l),a.attachShader(r,d),a.linkProgram(r),a.useProgram(r);const o=a.getAttribLocation(r,"attrVertex"),n=a.getUniformLocation(r,"uniformOffset");a.enableVertexAttribArray(o),a.vertexAttribPointer(o,t,a.FLOAT,!1,0,0),a.uniform2f(n,1,1),a.drawArrays(a.TRIANGLE_STRIP,0,i);const c=new Uint8Array(131072);a.readPixels(0,0,256,128,a.RGBA,a.UNSIGNED_BYTE,c);const p=JSON.stringify(c).replace(/,?"[0-9]+":/g,"").replace(/^{[0]+}$/g,"");e=(0,m.as)(p)}catch(e){}n.value=e}return n}function y(){var e;return(0,o.__awaiter)(this,void 0,void 0,(function*(){const t={value:"",duration:0};try{if("undefined"!=typeof navigator&&(null===navigator||void 0===navigator?void 0:navigator.userAgentData)&&(null===(e=navigator.userAgentData)||void 0===e?void 0:e.getHighEntropyValues)){const e=yield navigator.userAgentData.getHighEntropyValues(["architecture","bitness","platformVersion","fullVersionList"]);t.value=JSON.stringify(e)}}catch(e){t.value=""}return t}))}function b(){const e={value:"",duration:0};return"undefined"!=typeof navigator&&(null===navigator||void 0===navigator?void 0:navigator.userAgent)&&(e.value=navigator.userAgent),e}function f(){var e;return{value:null!==(e=null===window||void 0===window?void 0:window.devicePixelRatio)&&void 0!==e?e:1,duration:0}}function x(){const e={value:!1,duration:0};return"undefined"!=typeof navigator&&(null===navigator||void 0===navigator?void 0:navigator.pdfViewerEnabled)&&(e.value=navigator.pdfViewerEnabled),e}function k(){const e={value:0,duration:0};try{const{AudioContext:t}=window;if(t){const i=new t;e.value=i.sampleRate}}catch(t){e.value=0}return e}function w(){var e;const t={value:"",duration:0};try{const i=_(),o=null===(e=null==i?void 0:i.getExtension)||void 0===e?void 0:e.call(i,"WEBGL_debug_renderer_info");i&&o&&(t.value=i.getParameter(o.UNMASKED_VENDOR_WEBGL))}catch(e){t.value=""}return t}function S(){var e;const t={value:"",duration:0};try{const i=_(),o=null===(e=null==i?void 0:i.getExtension)||void 0===e?void 0:e.call(i,"WEBGL_debug_renderer_info");i&&o&&(t.value=i.getParameter(o.UNMASKED_RENDERER_WEBGL))}catch(e){t.value=""}return t}var C=i(78193),j=i(31222),P=i(69405),T=i(79789),O=i(7650),L=i(22597),I=i(24421),A=i(17133),E=i(58854),M=i(33642),R=i(48304);function F(e,t){const i=(0,M.m7)((0,A.Lh)((()=>["region","user","wid","abTestVersion"]),[])),n=(0,M.m7)((0,E.h)((()=>["domains"]),[])),a=Boolean((0,I.xX)(i.abTestVersion,"browser_device_id"));!function(e,t,i){const{user:n,region:a,wid:l,domains:u}=e,_=t(),C=(0,s.useCallback)((()=>{var e;const{page_name:t,enter_from:i,is_downgrade:n,object_id:a,object_type:s}=_,r=(0,o.__rest)(_,["page_name","enter_from","is_downgrade","object_id","object_type"]),l=(0,p.pm)();return Object.assign({previous_page:c.W.getPreviousInfo(t),page_name:t,enter_from:i,page_url:window.location.href,userAgent:navigator.userAgent,keyword:l.keyword,sub_keyword:l.sub_keyword,user_type_alias:window.navigator.userAgent.match(/google/gi)?"search":"user",domain_name:null!==(e=window.location.host)&&void 0!==e?e:"unknown",page_path:window.location.pathname},r)}),[_]),j=(0,s.useCallback)((e=>{const{page_name:t,is_downgrade:i,object_id:o,object_type:s,utm_medium:r,utm_campaign:p,utm_source:u,embed_source:m=""}=_,h=d()(c.W.initDimensionalData,{utm_medium:r,utm_campaign:p,utm_source:u});return Object.assign({user_is_login:n?1:0,priority_region:null==n?void 0:n.region,landing_page:c.W.getLandingPage(t),is_kids_mode:(null==n?void 0:n.ftcUser)?1:0,region:a,extraData:g(h.launch_mode,{object_id:o,object_type:s}),is_downgrade:i,session_id:c.W.getSessionId(l),webapp_hash_id:e,embed_source:m},h)}),[_,a,n,l]);(0,s.useEffect)((()=>{(()=>{(0,o.__awaiter)(this,void 0,void 0,(function*(){var e;if(!_)return;const{shouldReportDeviceId:t=!1}=_;let i;if(t)try{i=yield function(){return(0,o.__awaiter)(this,void 0,void 0,(function*(){const e=yield m.ZP.load({monitoring:!1}),t=(yield e.get()).components,{domBlockers:i,canvas:n}=t,a=(0,o.__rest)(t,["domBlockers","canvas"]),s={value:h(n.value),duration:0};return Object.values(a).forEach((e=>e.duration=0)),m.ZP.hashComponents(Object.assign(Object.assign({},a),{canvasComponent:s,webglComponent:v(),highEntropyValues:yield y(),uaComponent:b(),devicePixelRatio:f(),pdfViewerEnabled:x(),sampleRate:k(),webGLUnmaskedVendorComponent:w(),webGLUnmaskedRendererComponent:S()}))}))}()}catch(e){i=void 0}const s=C(),r=j(i);c.W.config({initConfig:{channel_domain:u.tea,ab_channel_domain:u.libraWebSDK,id:1988},commonHeaderConfig:{region:a,user_id:null!==(e=null==n?void 0:n.uid)&&void 0!==e?e:"",user_is_login:Boolean(n),user_unique_id:l,"header.custom":r},commonEventParams:s})}))})()}),[...i]),function(){const e=(0,r.k6)();(0,s.useEffect)((()=>{const t=null==e?void 0:e.listen((e=>{c.W.resetStayDuration(e.pathname,e.pathname,window.location.href)}));return()=>{null==t||t()}}),[])}()}(Object.assign(Object.assign({},n),i),(()=>Object.assign(Object.assign({},e()),{is_downgrade:(0,O.W)(),shouldReportDeviceId:a})),t)}function D({eParams:e}){var t,i;const{botType:n}=null!==(t=(0,A.Lh)((()=>["botType"]),[]))&&void 0!==t?t:{},{isMobile:l}=null!==(i=(0,E.h)((()=>["isMobile"]),[]))&&void 0!==i?i:{},{search:d,pathname:c}=(0,r.TH)(),p=(0,a.parse)(d);return(0,s.useCallback)((()=>{const t=e||{},{is_from_webapp:i}=t,a=(0,o.__rest)(t,["is_from_webapp"]),s=p.sender_web_id?{sender_device:p.sender_device,sender_web_id:p.sender_web_id}:{},r=l||(0,L.oC)(c)||(d=`#${location.pathname}`,/^#\/@.*\/video\/\d+$/.test(d))||location.search.indexOf("item_id")>-1?Object.assign({is_from_webapp:i||["v1","v2","v3"].indexOf(p.is_from_webapp)>-1?p.is_from_webapp:"0"},s):{};var d;const u=Object.assign(Object.assign({bot_type:null!=n?n:"others",keyword:p.keyword,sub_keyword:p.sub_keyword},a),r);C._.handlePageView(u)}),[e,p.sender_web_id,p.sender_device,p.is_from_webapp,l,p.keyword,p.sub_keyword,c,n])}function B(e){const{pathname:t}=(0,r.TH)(),i=(0,n.fz)(j.KF);(0,s.useEffect)((()=>{const e=(0,R.BB)(t);i.handleRouteChange(t),i.updateCurrentPage(e),i.setCurrentPageReport(!1),i.resetExist(),i.reportVideoAdditionStart({startTime:Date.now(),situation:"addition_first_load"})}),[i,e,t])}function z(){const e=(0,n.fz)(P.ec),t=(0,n.fz)(T.k);(0,s.useEffect)((()=>{e.reset(),t.resetState()}),[e,t])}},84991:(e,t,i)=>{"use strict";i.d(t,{Ex:()=>o,om:()=>n,s2:()=>a});const o=(e,t,i=!0,o=!1)=>{const{keyCode:n,altKey:a,ctrlKey:s,metaKey:r,key:l}=e;if(!t&&[13,32,38,40].includes(n))return 2;if(!t&&o&&27===n)return 13;if(8===n||144===n||1===l.length&&32!==n&&!a&&!s&&!r)return t?10:2;if(t)switch(n){case 38:return a?4:1;case 40:return a?12:0;case 27:return 3;case 13:case 32:return 4;case 33:return 8;case 34:return 7;case 36:return 5;case 35:return 6;case 9:return i?11:4;default:return 12}return 12},n=e=>{const{keyCode:t}=e;switch(t){case 38:case 37:return 1;case 40:case 39:return 0;case 13:case 32:return 2;default:return 4}},a=e=>{try{const t=e.querySelectorAll('a[href], button, input, textarea, details, [tabindex]:not([tabindex="-1"])');return Array.from(t).filter((e=>!e.hasAttribute("disabled")&&!e.getAttribute("aria-hidden")&&e.clientWidth>0))}catch(e){return console.warn("[A11y] no focusable element found: ",e),[]}}},24421:(e,t,i)=>{"use strict";i.d(t,{xX:()=>_,N8:()=>w,Sf:()=>k});var o,n,a,s,r=i(90293),l=i(21041);!function(e){e[e.TRILL=1180]="TRILL",e[e.MUSICALLY=1233]="MUSICALLY"}(o||(o={})),function(e){e.TRILL="t",e.MUSICALLY="m",e.LITE="lite"}(n||(n={})),function(e){e[e.Normal=0]="Normal",e[e.SmartPlayer=1]="SmartPlayer"}(a||(a={})),function(e){e[e.UNSET=0]="UNSET",e[e.CLOSE=1]="CLOSE",e[e.OPEN=2]="OPEN"}(s||(s={}));const d=[{name:"reasons_api_version",vid:["v2","v3"]},{name:"share_to_line",vid:["v1","v2","v3"]},{name:"sharing_user_app_link",vid:["v1","v2"]},{name:"share_button_part1_test",vid:["v1","v2","v3","v4"]},{name:"video_feed_redesign",vid:["v1","v2","v3"]},{name:"expose_recharge_entry_pc",vid:["v1","v2","v3"]},{name:"embedded_referral_message",vid:["v1","d1_c1","d1_c2","d1_c3","d2_c1","d2_c2","d2_c3","d3_c1","d3_c2","d3_c3"]},{name:"live_detail_non_logged_in_entry",vid:["v1","v2","v3"]},{name:"live_top_viewers",vid:["v1","v2"]},{name:"live_dynamic_bg",vid:["v1","v2"]},{name:"live_player_enable_1080p",vid:["v1","v2"]},{name:"live_auto_definition_tips",vid:["v1","v2","v3"]},{name:"live_room_age_restriction",vid:["v1","v2","v3"]},{name:"live_feed_style",vid:["v1","v2","v3"]},{name:"live_feed_auto_play_3",vid:["v1","v2","v3"]},{name:"live_player_e2e_low_delay_preload_time_test",vid:["v1","v2","v3"]},{name:"show_player_stats_entry",vid:["v1","v2"]},{name:"live_abr_version",vid:["v1","v2","v3"]},{name:"live_lcp_perf_optimize",vid:["v1","v2","v3","v4"]},{name:"live_report_api",vid:["v1","v2"]},{name:"live_recharge_paypal_link_result_v2",vid:["v1","v2"]},{name:"live_recharge_cashier_v2",vid:["v1","v2"]},{name:"simplify_billing_address",vid:["v1","v2","v3"]},{name:"live_recharge_exchange",vid:["v1","v2"]},{name:"exempt_cvv_saved_card",vid:["v1","v2"]},{name:"video_feed_mode_url_test",vid:["v1","v2"]},{name:"add_transcript",vid:["v1","v2","v3","v4"]},{name:"browser_device_id",vid:["v1"]},{name:"volume_normalize",vid:["v1","v2"]},{name:"video_serverpush",vid:["v1","v2"]},{name:"mobile_vodkit",vid:["v1","v2","v3","v4"]},{name:"xg_volume_test",vid:["v1","v2","v3","v4","v5"]},{name:"video_bitrate_adapt",vid:["v1","v2"]},{name:"optimize_bot_ssr_count",vid:["v1","v2","v3","v4"]},{name:"video_cta_phase2",vid:["v1","v2","v3","v4","v5"]},{name:"video_cta_phase3",vid:["v1","v2","v3","v4","v5"]},{name:"sharing_video_page_render",vid:["v1","v2","v3","v4","v5"]},{name:"mobile_search_test",vid:["v1","v2"]},{name:"pumbaa_enable_test",vid:["v1","v2"]},{name:"webapp_video_detail_page_optimization",vid:["v1","v2","v3","v4","v5"]},{name:"sharing_now_product_intro",vid:["v1","v2","v3"]},{name:"tt4b_ads",vid:["v1","v2"]},{name:"studio_web_eh_entrance",vid:["v1","v2","v3"]},{name:"webapp_video_detail_page_related_mask",vid:["v1","v2","v3"]},{name:"feed_csr",vid:["v1","v2"]},{name:"kep_crawling",vid:["v1","v2"]},{name:"share_pannel",vid:["v1","v2","v3"]},{name:"photo_test",vid:["v1","v2"]},{name:"periodic_login_popup_interval",vid:["v1","v2","v3","v4","v5"]},{name:"kep_optimization",vid:["v1","v2","v3","v4","v5","v6","v7","v8","v9"]},{name:"pc_video_playlist_test",vid:["v1","v2","v3"]},{name:"kep_bundle_optimization",vid:["v1","v2"]},{name:"following_red_dot",vid:["v1","v2"]},{name:"video_reflow_search_bar",vid:["v1","v2","v3"]},{name:"video_reflow_search_bar2",vid:["v1","v2","v3"]},{name:"cta_phase2",vid:["v1","v2"]},{name:"enable_slardar_image",vid:["v1","v2"]},{name:"explore_test",vid:["v1","v2","v3"]},{name:"search_video",vid:["v1","v2","v3","v4"]}];var c=i(95872),p=i(55198),u=i(17133),g=i(58854),m=i(33642);const h=[];function _(e,t){try{return e.parameters[t].vid}catch(e){return void(-1===h.indexOf(t)&&(c.W.event("abtest_vid_failed",{experiment_name:t}),h.push(t)))}}const v=()=>"undefined"!=typeof window;let y=!1;const b=["0","1"];function f(e){const{env:t}=(0,m.m7)((0,u.Lh)((()=>["env"]),[])),{type:i}=(0,m.m7)(t),{search:o}=(0,l.TH)(),n=(0,m.m7)((0,r.parse)(o));let a=n[e];return Array.isArray(a)&&(a=a[a.length-1]),{searchObj:n,useDefaultValue:"ppe"!==i&&"boe"!==i&&!(v()&&window.location.host.startsWith("localhost")||"1"===String(void 0)),value:a}}function x(e,t,i){e&&!y&&(y=!0,p.h.open({content:`feature flag value you provided for ${t} is not valid, valid value are: ${JSON.stringify(i)}`,duration:5,widthType:"padding"}))}function k(e){var t;const{useDefaultValue:i,value:o}=f(e),n=v(),a=(0,g.h)((()=>["config"]),[]),s=null===(t=null==a?void 0:a.config)||void 0===t?void 0:t.featureFlags,r=null==s?void 0:s[e];return i?r:o?b.includes(o)?(n&&sessionStorage.setItem(`FEATURE_FLAG_TEST_PREFIX${e}`,o),Boolean(Number(o))):(x(n,e,b),r):n&&sessionStorage.getItem(`FEATURE_FLAG_TEST_PREFIX${e}`)?Boolean(Number(sessionStorage.getItem(`FEATURE_FLAG_TEST_PREFIX${e}`))):r}function w(e,t){var i,o;const{useDefaultValue:n,value:a}=f(t),s=v();if(n)return _(e,t);if(a){const n=null!==(o=null===(i=d.find((e=>e.name===t)))||void 0===i?void 0:i.vid)&&void 0!==o?o:[];return n.includes(a)?(s&&sessionStorage.setItem(`AB_TEST_PREFIX_${t}`,a),a):(x(s,t,n),_(e,t))}return s&&sessionStorage.getItem(`AB_TEST_PREFIX_${t}`)?sessionStorage.getItem(`AB_TEST_PREFIX_${t}`):_(e,t)}},33642:(e,t,i)=>{"use strict";function o(e,t=1){return Math.round(Number(`${e}e${t}`))/Math.pow(10,t)}i.d(t,{BT:()=>n,a1:()=>a,ZT:()=>r,yk:()=>d,u0:()=>c,Nn:()=>p,Bm:()=>u,sA:()=>g,m7:()=>h,y7:()=>_,vp:()=>v});function n(e=0){let t;return t=e<1e4?e.toString():e<999999?`${o(e/1e3)}K`:e<999999999?`${o(e/1e6)}M`:`${o(e/1e9)}B`,t}function a(e,t=99,i="99+"){return e>t?i:String(e)}function s(e){var t,i;return null!==(i=null===(t=null==e?void 0:e.url_list)||void 0===t?void 0:t.find((e=>!/\.webp/.test(e))))&&void 0!==i?i:""}function r(e){var t;return void 0===e?"":e.url_list&&(null===(t=e.url_list)||void 0===t?void 0:t.length)>0?e.url_list[0]:""}function l({is_block:e,is_blocked:t,follow_status:i}){if(null!=i)return e?4:t?5:u[i]}function d(e,t){const{avatar_larger:i,avatar_medium:o,avatar_thumb:n,uid:a,short_id:r,unique_id:d,sec_uid:c,room_id:p,nickname:u,is_block:g,is_blocked:m,follow_status:h,signature:_,show_favorite_list:v,custom_verify:y,enterprise_verify_reason:b,comment_setting:f,duet_setting:x,is_ad_fake:k,is_private_account:w,secret:S,show_secret_banner:C,stitch_setting:j,follower_status:P}=e;return{avatarLarger:s(i),avatarMedium:s(o),avatarThumb:s(n),id:a,shortId:r,uniqueId:null!=d?d:"",secUid:null!=c?c:"",roomId:String(null!=p?p:""),nickname:u,relation:l({is_block:g,is_blocked:m,follow_status:h}),signature:_,openFavorite:v,verified:Boolean(y||b),commentSetting:f,duetSetting:x,stitchSetting:j,isADVirtual:k,privateAccount:Boolean(w),secret:Boolean(S),createTime:0,showPrivateBanner:Boolean(C),extraInfo:Object.assign({followerStatus:P},t)}}function c(e,t=!1){const{follower_count:i,following_count:o,aweme_count:n}=e;return{diggCount:0,followerCount:null!=i?i:0,followingCount:null!=o?o:0,heart:0,heartCount:0,videoCount:null!=n?n:0,needFix:t}}function p(e){const{id_str:t,title:i,play_url:o,cover_medium:n,cover_large:a,cover_thumb:s,is_original:l,duration:d,author:c}=e;return{id:String(t),title:i,duration:d,keyToken:"",playUrl:r(o),coverMedium:r(n),coverLarge:r(a),coverThumb:r(s),original:null!=l&&l,authorName:c}}const u={[-1]:-1,0:0,1:1,2:2,4:3};function g(e,t){if(!e)return!0;const{commentSetting:i,relation:o,id:n}=e;return 1===i&&2!==o&&t!==n}const m=Object.freeze({});function h(e){return null!=e?e:m}function _(e,t,i){if((null==e?void 0:e.vv)&&Number(null==e?void 0:e.vv)>0)return Number(e.vv);let o=0;return t&&t.forEach((e=>{var t,i;o+=null!==(i=null===(t=null==e?void 0:e.stats)||void 0===t?void 0:t.playCount)&&void 0!==i?i:0})),i&&i.forEach((e=>{var t,i;o+=Number(null!==(i=null===(t=null==e?void 0:e.stats)||void 0===t?void 0:t.viewCount)&&void 0!==i?i:0)})),o}function v(e){return e.replace(/\n(\n)*( )*(\n)*\n/g,"\n")}},27360:(e,t,i)=>{"use strict";i.d(t,{LM:()=>n,rB:()=>a,Xo:()=>r,mX:()=>l,Pd:()=>d,jI:()=>c,Cc:()=>p,X:()=>u,i5:()=>g,nV:()=>f});var o=i(49290);function n(){return{appkey:"tiktok-web",app_key:"tiktok-web",aid:1284,app_name:"tiktok_web",iid:"0"}}function a(e){return e?e.toLocaleLowerCase().split("-")[0].replace("pt","pt_BR").replace("zh","zh-TW"):"en"}function s(e){var t;const i=e.EntranceShowType;return{id:e.FaqId,name:e.Name,value:e.Value,url:e.Url,children:(null!==(t=e.Children)&&void 0!==t?t:[]).map(s),knowledgeType:e.KnowledgeType,entranceShowType:i,imageUrl:e.ImageUrl,originLabelId:e.OriginLabelId,ticketAppId:e.TicketAppId,ticketCategoryId:e.TicketCategoryId,flags:2===i?0:2048,neverShowNeedMoreHelp:3===i}}function r(e){const{statusCode:t,statusMessage:i,faqInfoMap:o,entranceMap:n}=e;return{statusCode:t,statusMessage:i,faqInfoMap:Object.entries(null!=o?o:{}).reduce(((e,[t,i])=>e?(e[t]=(i||[]).map(s),e):e),{}),entranceMap:n}}function l({faqInfoMap:e,entranceMap:t,faqType:i,entrance:o}){var n;const a=("common"===i?"common":o===(null==t?void 0:t.general)&&o)||"general";return null!==(n=null==e?void 0:e[a])&&void 0!==n?n:[]}function d(e){return o.Cl.some((t=>t===e))}function c(e){var t;return null!==(t=Array.isArray(e)?e[0]:e)&&void 0!==t?t:""}function p(e){return o.y9[c(e)]||""}function u(e,t,i={flattened:{},levels:[]}){return(e||[]).reduce(((e,i)=>{const o=(t?[...(null==t?void 0:t.__parents)||[],t.id]:[]).length,n=Object.assign(Object.assign({},i),{level:o,__parents:t?[...(null==t?void 0:t.__parents)||[],t.id]:[]});return e.flattened[n.id]=n,e.levels[o]=e.levels[o]||{},e.levels[o][i.id]=n,u(i.children,n,e),e}),i)}function g(e){var t;return Boolean(e&&(e.length>1||(null===(t=e[0])||void 0===t?void 0:t.children.length)))}function m(e,t,i=""){return`<a \n    style="color: #00C6E9;" \n    href="mailto:${e}?subject=TikTok-Web&body=Username: ${t}   Country/Region: ${i}">${e}</a>`}o.NI.getListV2,o.NI.getListV3;const h={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"},_="privacy@tiktok.com",v="feedback@tiktok.com",y=new RegExp(_,"g"),b=new RegExp(v,"g");function f(e,t,i,o){let n=e;return n=n.replace(/[&<>"'/]/g,(e=>h[e]||"")),1===t&&(n=n.replace(y,(()=>m(_,null!=i?i:"",o))).replace(b,(()=>m(v,null!=i?i:"",o)))),n}},32370:(e,t,i)=>{"use strict";i.d(t,{H:()=>o,Z:()=>n});const o=function(e){if(!e)return{fullscreenEnabled:"fullscreenEnabled",fullscreenElement:"fullscreenElement",requestFullscreen:"requestFullscreen",exitFullscreen:"exitFullscreen",fullscreenchange:"fullscreenchange",fullscreenerror:"fullscreenerror"};const t={w3:{fullscreenEnabled:"fullscreenEnabled",fullscreenElement:"fullscreenElement",requestFullscreen:"requestFullscreen",exitFullscreen:"exitFullscreen",fullscreenchange:"fullscreenchange",fullscreenerror:"fullscreenerror"},webkit:{fullscreenEnabled:"webkitFullscreenEnabled",fullscreenElement:"webkitCurrentFullScreenElement",requestFullscreen:"webkitRequestFullscreen",exitFullscreen:"webkitExitFullscreen",fullscreenchange:"webkitfullscreenchange",fullscreenerror:"webkitfullscreenerror"},moz:{fullscreenEnabled:"mozFullScreenEnabled",fullscreenElement:"mozFullScreenElement",requestFullscreen:"mozRequestFullScreen",exitFullscreen:"mozCancelFullScreen",fullscreenchange:"mozfullscreenchange",fullscreenerror:"mozfullscreenerror"},ms:{fullscreenEnabled:"msFullscreenEnabled",fullscreenElement:"msFullscreenElement",requestFullscreen:"msRequestFullscreen",exitFullscreen:"msExitFullscreen",fullscreenchange:"MSFullscreenChange",fullscreenerror:"MSFullscreenError"}};for(const i in t)if(t[i].fullscreenEnabled in e)return t[i]}("undefined"==typeof document?void 0:document),n=()=>{var e;return"undefined"!=typeof document?null!==(e=document[o.fullscreenElement])&&void 0!==e?e:document.body:null}},22069:(e,t,i)=>{"use strict";i.d(t,{X:()=>n});var o=i(90293);const n=({src:e})=>{const t=/^https?:\/\/[a-zA-Z0-9-]+-sg/.test(e)?"t.tiktok.com":"m.tiktok.com";return(0,o.stringifyUrl)({url:`https://${t}/node-a/video/playsv`,query:{play_url:e}})}},3148:(e,t,i)=>{"use strict";i.d(t,{iv:()=>l,l_:()=>d,F3:()=>c,To:()=>p,Bv:()=>g,u8:()=>m,$I:()=>h});var o=i(45949);const n=()=>'""',a=()=>{},s=()=>{};class r{constructor(e,t){this.key=e,this.type=t,this.storageObject=null,this.getter=n,this.setter=a,this.remove=s,this.getter="local"===t?o.le:o.St,this.setter="local"===t?o.D$:o.D9,this.remove="local"===t?o.e8:o.lD}get storage(){return this.storageObject||(this.storageObject=this.tryParseJson(this.getter(this.key,"{}"))),this.storageObject}setItem(e,t){this.storage[e]=t,this.setter(this.key,JSON.stringify(this.storage))}getItem(e){return this.storage[e]}removeItem(e){this.storage[e]=void 0,this.setter(this.key,JSON.stringify(this.storage))}removeAll(){this.storageObject=null,this.remove(this.key)}tryParseJson(e){try{return JSON.parse(e)}catch(e){return{}}}}const l=new r("frequency-control-config","local"),d=new r("flip-control-config","local"),c=new r("webapp-common-config","local"),p=new r("webapp-common-config","session");var u;!function(e){e.Manual="manual",e.BrowserMode="browser_mode"}(u||(u={}));const g=new r("webapp-video-mute","local"),m=new r("keyboard-shortcut-config","local"),h=new r("webapp-comment-url","session")},48304:(e,t,i)=>{"use strict";i.d(t,{BB:()=>d,AY:()=>c,qA:()=>p,iz:()=>u});var o=i(21041),n=i(11838),a=i(48659),s=i(51858),r=i(45313),l=i(22597);function d(e){return(0,l.oC)(e)?"homepage_hot":/^\/@(.*?)\/video\/(.*?)/.test(e)?"video_detail":/^\/@(.*?)\/live\/(.*?)/.test(e)?"live_detail":/^\/@(.*?)/.test(e)?"others_homepage":/^\/music\//.test(e)?"single_song":/^\/tag\//.test(e)?"challenge":/^\/following/.test(e)?"homepage_follow":/^\/discover\/.+/.test(e)?"discover_kw":/^\/discover/.test(e)?"discovery":/^\/profile/.test(e)?"personal_homepage":/^\/topics/.test(e)?`topic_${e.slice(1).split("/")[1]}`:/^\/inbox/.test(e)?"homepage_message":/^\/report/.test(e)?"report":/^\/feedback\/report/.test(e)?"feedback_report":/^\/feedback\/history/.test(e)?"feedback_history":/^\/feedback/.test(e)?"feedback":(0,o.LX)(e,{path:n.Ad.searchHome,exact:!0})?"general_search":(0,o.LX)(e,{path:n.Ad.searchUser,exact:!0})?"search_user":(0,o.LX)(e,{path:n.Ad.searchVideo,exact:!0})?"search_video":(0,o.LX)(e,{path:a.$J.liveGoLive,exact:!0})?"live_take":(0,o.LX)(e,{path:[a.$J.liveReferralHost,a.$J.liveReferralHostFaq],exact:!0})?"live_referral_host":(0,o.LX)(e,{path:a.$J.liveDiscover,exact:!0})?"live_discover":(0,o.LX)(e,{path:a.$J.liveRoomEmbed,exact:!0})?"live_embed_detail":(0,o.LX)(e,{path:a.$J.liveRoom,exact:!0})?"live_detail":(0,o.LX)(e,{path:s.O5.coinPayment,exact:!0})?"live_recharge_cashier":(0,o.LX)(e,{path:n.gY.loginHome,exact:!1})||(0,o.LX)(e,{path:n.gY.oauth,exact:!1})||(0,o.LX)(e,{path:n.gY.oauthLine,exact:!1})?"login":(0,o.LX)(e,{path:n.gY.signupHome,exact:!1})?"signup":/^\/playlist-music/.test(e)?"music_playlist":/^\/messages/.test(e)?"messages":/^\/setting/.test(e)?"setting":/^\/place/.test(e)?"poi_detail":/^\/@(.*?)\/collection\/(.*?)/.test(e)?"collection":/^\/@(.*?)\/playlist\/(.*?)/.test(e)?"reflow_video_playlist":(0,o.LX)(e,{path:[s.O5.coin,s.O5.coinPaymentResult,s.O5.coinTransactions,s.O5.coinUnavailable,s.O5.coinTerms,s.O5.coinTransactionsDetail,s.O5.coinCardManagement],exact:!0})?"live_recharge":"unknown"}function c(){return location.pathname.startsWith(n.Ad.musicPlaylist.split(":")[0])?`${location.origin}${location.pathname.replace(/%23|%3F|%2F/g,"")}${location.search}`:location.href}function p(e,t){return`https://www.tiktok.com${u(e,t)}`}function u(e,t,i){return`/place/${(0,r.U_)(t)}-${e}${i?`?language=${i}`:""}`}},72083:(e,t,i)=>{"use strict";var o;i.d(t,{lk:()=>r}),function(e){e.Apple="apple",e.Amazon="amazon",e.Google="google",e.Download="download",e.Microsoft="microsoft"}(o||(o={}));const n=["ast","de","en","fr","it","ja","pt"],a=["microsoft","apple","amazon","google","download"],s={apple:"ios_app_store",google:"google_play",amazon:"amazon_store",download:"download_apk",microsoft:"microsoft_store"};function r({lang:e,downloadLink:t={},isIOS:i=!1,isAndroid:o=!1}){var r;const l=e.split("-")[0],d=n.includes(l)&&!(null===(r=t.download)||void 0===r?void 0:r.visible)?l:"en";return{iconLanguage:d,iconConfig:a.reduce(((e,n)=>{const a=t[n];return(null==a?void 0:a.visible)&&function({platform:e,isIOS:t,isAndroid:i}){switch(e){case"apple":return!i;case"google":case"download":case"amazon":return!t;default:return!0}}({platform:n,isAndroid:o,isIOS:i})&&e.push({platform:n,language:d,href:a.officewebshare||a.normal,alt:`${n}-store`,target:s[n]||n}),e}),[])}}},73090:(e,t,i)=>{"use strict";i.d(t,{Mf:()=>u,$:()=>m,EV:()=>h,wF:()=>_,Aq:()=>y});var o=i(32913),n=i(36488),a=i(59126),s=i(6998),r=i(25555),l=i(22745),d=i(24400),c=i(11723),p=i(40567);const u=(0,o.Z)("div",{target:"e1obx3ji0"})((({region:e})=>({marginTop:"US"===e?"40px":"16px",display:"flex",flexDirection:"row",width:"288px",flexWrap:"wrap",justifyContent:"space-between"})),"label:DivDownloadContainer;"),g={amazon:{backgroundPosition:"0 0"},apple:{backgroundPosition:"0 -43px"},google:{backgroundPosition:"0 -86px"}},m=(0,o.Z)("a",{target:"e1obx3ji1"})({":nth-of-type(-n+2)":{marginBottom:"8px"}},"label:AIconContainer;"),h=(0,o.Z)("img",{target:"e1obx3ji2"})((({platform:e,lang:t})=>function(e,t){return"download"===e?{backgroundImage:"url('https://p16-ttug-sg.ibyteimg.com/img/ttfe-malisg/tiktok_web/store-badge/download.png~296x0.image')"}:"microsoft"!==e?Object.assign(Object.assign({},g[e]),{backgroundImage:`url(https://p16-ttug-sg.ibyteimg.com/img/ttfe-malisg/tiktok_web/store-badge/${t}.png~296x0.image)`}):void 0}(e,t)),{width:"138px",height:"40px",backgroundSize:"138px",objectFit:"cover",borderRadius:"4px"},"label:ImgIcon;"),_=(0,o.Z)("p",{target:"e1obx3ji3"})((({theme:e})=>(0,n.GI)({theme:e,typography:"P1",fontWeight:"semiBold"})),"label:PSubTitle;"),v={ast:a,de:s,en:r,fr:l,it:d,ja:c,pt:p},y=e=>v[e]},83236:(e,t,i)=>{"use strict";i.d(t,{k:()=>y});var o,n=i(64047),a=i(11040),s=i(32273),r=i(28327),l=i(32913),d=i(36488),c=i(75311);!function(e){e[e.UserFeed=0]="UserFeed",e[e.Feed=1]="Feed",e[e.Browser=2]="Browser",e[e.List=3]="List",e[e.UserPage=4]="UserPage",e[e.Search=5]="Search",e[e.RecommendList=6]="RecommendList"}(o||(o={}));const p=(0,r.F4)({"0%":{transform:"scale(.95)"},"50%":{transform:"scale(.9)"},"100%":{transform:"scale(.95)"}}),u=(0,r.F4)({"0%":{transform:"scale(1)"},"40%":{transform:"scale(1.15)"},"45%":{transform:"scale(1.16)"},"95%":{transform:"scale(1)"},"100%":{transform:"scale(1)"}}),g=(0,l.Z)("svg",{target:"e1vl87hj0"})({position:"absolute"},"label:SvgRoundCircle;"),m=(0,l.Z)("div",{target:"e1vl87hj1"})({position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},(({isAnimating:e})=>e?{":after":{content:'""',position:"absolute",left:1,top:1,right:1,bottom:1,borderRadius:"50%",border:"1px solid rgba(255, 119, 146, .5)",animation:`${u} 1800ms ease-out infinite`,boxShadow:"0 -0.5px 0.5px 0.5px rgba(255,119,146,.5)"}}:null),"label:DivContainer;"),h=(0,l.Z)(c.q,{target:"e1vl87hj2"})((({enable:e,theme:{colors:t},isAnimating:i})=>[{borderColor:t.LineSecondary,borderWidth:"0.5px",cursor:e?"pointer":"unset"},i?{animation:`${p} 1800ms ease-out infinite`,animationDelay:".9s"}:null]),"label:StyledAvatar;"),_=(0,l.Z)("span",{target:"e1vl87hj3"})((({theme:e,isOnTop:t=!1})=>[(0,d.GI)({theme:e,typography:"P4",fontWeight:"bold",color:"ConstTextInverse"}),{position:"absolute",background:"linear-gradient(131.17deg, #FF1764 0%, #ED3495 94.15%)",height:"15px",lineHeight:"15px",padding:"0 4px",bottom:t?"unset":"-2px",top:t?"-6px":"unset",left:"50%",transform:"translateX(-50%)",wordBreak:"keep-all",borderRadius:"2px",zIndex:1}]),"label:SpanLiveBadge;"),v=function({size:e=48}){return(0,a.jsxs)(g,Object.assign({width:e,height:e,viewBox:`0 0 ${e} ${e}`,fill:"none",xmlns:"http://www.w3.org/2000/svg"},{children:[(0,a.jsx)("circle",{cx:e/2,cy:e/2,r:e/2-.75,stroke:"url(#paint0_linear)",strokeWidth:"1.5"},void 0),(0,a.jsx)("defs",{children:(0,a.jsxs)("linearGradient",Object.assign({id:"paint0_linear",x1:-20.9902*e/48,y1:24*e/48,x2:27.0098*e/48,y2:65.9805*e/48,gradientUnits:"userSpaceOnUse"},{children:[(0,a.jsx)("stop",{stopColor:"#FF1764"},void 0),(0,a.jsx)("stop",{offset:"1",stopColor:"#ED3495"},void 0)]}),void 0)},void 0)]}),void 0)},y=function(e){var{className:t,needAnimation:i=!1,isShowLive:o=!0,size:r=32,isShowLiveTag:l=!0,isTagShowingOnTop:d=!1,e2eTag:c}=e,p=(0,n.__rest)(e,["className","needAnimation","isShowLive","size","isShowLiveTag","isTagShowingOnTop","e2eTag"]);const u=(0,s.Q)(),g=o&&i,y=o?r-6:r,b=g?r-4:r;return(0,a.jsxs)(m,Object.assign({isAnimating:g,className:t,"data-e2e":c,style:{width:r,height:r}},{children:[o&&(0,a.jsx)(v,{size:b},void 0),(0,a.jsx)(h,Object.assign({isAnimating:g,enable:!0,size:y},p),void 0),o&&l&&(0,a.jsx)(_,Object.assign({isOnTop:d},{children:u("LIVE")}),void 0)]}),void 0)}},38149:(e,t,i)=>{"use strict";i.d(t,{T:()=>c});var o=i(11040),n=i(32913),a=i(41928);const s=(0,n.Z)("div",{target:"emuynwa0"})((({isFullScreen:e})=>e?{flex:"1 1 auto"}:null),{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",margin:"0 auto"},"label:DivErrorContainer;"),r=(0,n.Z)("p",{target:"emuynwa1"})((({theme:{typography:e,fontWeights:t,fontFamilies:i,colors:o}})=>[e.H4,{fontFamily:i.Sofia,fontWeight:t.bold,color:o.TextPrimary,marginTop:"24px"}]),"label:PTitle;"),l=(0,n.Z)("p",{target:"emuynwa2"})((({theme:{typography:e,fontWeights:t,fontFamilies:i,colors:o}})=>[e.P2,{fontFamily:i.Proxima,fontWeight:t.normal,color:o.TextSecondary,marginTop:"8px"}]),"label:PDesc;"),d=(0,n.Z)(a.W,{target:"emuynwa3"})({marginTop:"62px"},"label:StyledButton;"),c=function(e){const{iconElem:t,title:i,desc:n,buttonText:a,isFullScreen:c,brightness:p=1,e2eTitle:u,e2eDesc:g,e2eButton:m}=e;return(0,o.jsxs)(s,Object.assign({isFullScreen:c},{children:[t,i&&(0,o.jsx)(r,Object.assign({"data-e2e":u,brightness:p},{children:i}),void 0),n&&(0,o.jsx)(l,Object.assign({"data-e2e":g,brightness:p},{children:n}),void 0),Boolean(a)&&(0,o.jsx)(d,Object.assign({type:"button",onClick:e.onButtonClick,buttonTheme:"default",size:"large",e2eTag:m},{children:a}),void 0)]}),void 0)}},18571:(e,t,i)=>{"use strict";i.d(t,{F:()=>_});var o=i(11040),n=i(74820),a=i(98154),s=i(33642);const r=function({iconSrc:e="https://lf16-tiktok-web.ttwstatic.com/obj/tiktok-web-common-sg/mtact/static/images/logo_144c91a.png"}){return(0,o.jsxs)(a.ql,{children:[(0,o.jsx)("meta",{name:"google",content:"notranslate"},"google"),",",(0,o.jsx)("meta",{name:"format-detection",content:"telephone=no"},"format-detection"),",",(0,o.jsx)("link",{rel:"shortcut icon",href:e,type:"image/x-icon"},"shortcut")]},void 0)},l=["//v16.tiktokcdn.com","//p16-va.tiktokcdn.com","//s20.tiktokcdn.com"],d=function(){return(0,o.jsx)(a.ql,{children:l.map(((e,t)=>(0,o.jsx)("link",{rel:"dns-prefetch",href:e},`prefetch-${t+1}`)))},void 0)};var c=i(16926),p=i(91051),u=i(7650),g=i(11467),m=i(25185);const h=function({appContext:e,bizContext:t,slardarBid:i}){var n,s;const{abTestVersion:r,env:l,botType:d,user:h,wid:_,region:v}=null!=e?e:{},{isMobile:y,domains:b}=null!=t?t:{},f=(0,c.fz)(g.n),x=(0,p.useMemo)((()=>{var e;return Object.assign(Object.assign({region:null!=v?v:"",botType:null!=d?d:"",isMobile:Boolean(y).toString(),isDowngrade:(0,u.W)().toString(),isLogin:Boolean(h).toString()},((e={parameters:{},versionName:""})=>{const t={};try{const i=e.parameters||{};Object.entries(i).forEach((([e,i])=>{t[e]=i.vid}))}catch(e){console.error("Abtest config parse error",e)}return t})(r)),{uid:null!==(e=null==h?void 0:h.uid)&&void 0!==e?e:""})}),[r,d,y,h,v]),k=(0,m.A4)({bid:i,env:"boe"===(null==l?void 0:l.type)?"test":"production",domain:null==b?void 0:b.slardar});return f.config({userId:_},"v2"===(null===(s=null===(n=null==r?void 0:r.parameters)||void 0===n?void 0:n.enable_slardar_image)||void 0===s?void 0:s.vid)),f.context(x),(0,o.jsx)(a.ql,{children:k},void 0)},_=function({appContext:e,bizContext:t,slardarBid:i,iconSrc:l}){const{language:c}=(0,s.m7)(e),{isDark:p}=(0,n.u)();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(a.ql,{htmlAttributes:{lang:c,"data-theme":p?"dark":"light"}},void 0),(0,o.jsx)(r,{iconSrc:l},void 0),(0,o.jsx)(h,{appContext:e,bizContext:t,slardarBid:i},void 0),(0,o.jsx)(d,{},void 0)]},void 0)}},91110:(e,t,i)=>{"use strict";i.d(t,{e:()=>w});var o=i(11040),n=i(25615),a=i.n(n),s=i(91051),r=i(16810),l=i(60596),d=i(8510),c=i(79292),p=i(44224),u=i(2394),g=i(33761),m=i(32273),h=i(29025),_=i(17133),v=i(22597),y=i(3148),b=i(95363);const f={width:24,height:24},x=[{content:"desktop_kb_shortcuts_tooltip_previous",icon:(0,o.jsx)(r.Z,Object.assign({},f),void 0)},{content:"desktop_kb_shortcuts_tooltip_next",icon:(0,o.jsx)(l.Z,Object.assign({},f),void 0)},{content:"desktop_kb_shortcuts_tooltip_like_vid",icon:(0,o.jsx)(d.Z,Object.assign({},f),void 0)},{content:"desktop_kb_shortcuts_tooltip_mute_unmute_vid",icon:(0,o.jsx)(c.Z,Object.assign({},f),void 0)}],k=[{content:"pc_web_playpause_btn",icon:(0,o.jsx)(p.Z,Object.assign({},f),void 0)},{content:"pc_web_skip_forward_5_sec_btn",icon:(0,o.jsx)(b.b0,Object.assign({},f),void 0)},{content:"pc_web_skip_back_5_sec_btn",icon:(0,o.jsx)(b.dW,Object.assign({},f),void 0)},{content:"pc_web_fullscreen_btn",icon:(0,o.jsx)(u.Z,Object.assign({},f),void 0)}],w=(0,s.memo)((function({isModal:e=!1,onClose:t=a()}){const i=(0,m.Q)(),{isInVideoFeedRedesign:n}=(0,h.y7)(),{isVideoDetailPlayerExperiment:r}=(0,h.iA)(),l=(0,s.useMemo)((()=>n||r?[...x,...k]:x),[n,r]),d=(0,_.Lh)((()=>["abTestVersion","wid"]),[]),{showKeyboardShortcut:c,handleClose:p}=((e=!1,t,i)=>{const o=y.u8.getItem("webid"),[n,a]=(0,s.useState)(!0),[r,l]=(0,s.useState)(e),d=(0,s.useCallback)((()=>{e?t():(y.u8.setItem("hasCloseKeyboardShortcut",!0),a(!1))}),[e,t]);return(0,s.useEffect)((()=>{var t;if(!e)if((null==i?void 0:i.wid)!==o)l(!0),y.u8.setItem("webid",null!==(t=null==i?void 0:i.wid)&&void 0!==t?t:""),y.u8.setItem("hasCloseKeyboardShortcut",!1);else{const e=y.u8.getItem("hasCloseKeyboardShortcut");l(!e)}}),[]),(0,s.useEffect)((()=>{const{pathname:t=""}=location;e||(0,v.oC)(t)||t.startsWith("/following")||/^\/@.*\/video\/\d+/.test(t)||l(!1)}),[]),{showKeyboardShortcut:n&&r,handleClose:d}})(e,t,d),u=i(e?"desktop_kb_shortcuts_modal":"desktop_kb_shortcuts_tooltip_title"),f=(0,s.useMemo)((()=>l.map((({content:t,icon:n})=>(0,o.jsxs)(b.fF,Object.assign({isModal:e},{children:[i(t),n]}),t)))),[e,l,i]);return c?(0,o.jsxs)(b.Jm,Object.assign({isModal:e},{children:[e?(0,o.jsx)(b.tV,Object.assign({onClick:p},{children:(0,o.jsx)(g.Z,{width:20,height:20},void 0)}),void 0):(0,o.jsx)(b.W8,Object.assign({onClick:p},{children:(0,o.jsx)(g.Z,{width:20,height:20},void 0)}),void 0),(0,o.jsx)(b.Xq,Object.assign({isModal:e},{children:u}),void 0),(0,o.jsx)(b.BN,{children:f},void 0)]}),void 0):null}));w.defaultProps=Object.assign(Object.assign({},w.defaultProps),{"data-e2e":"keyboard-shortcut"})},95363:(e,t,i)=>{"use strict";i.d(t,{Jm:()=>s,Xq:()=>r,BN:()=>l,fF:()=>d,W8:()=>c,tV:()=>p,b0:()=>u,dW:()=>g});var o=i(60596),n=i(32913),a=i(36488);const s=(0,n.Z)("div",{target:"e1l04njg0"})((({isModal:e=!1,theme:t})=>[{marginBottom:e?"0":"12px",minWidth:e?"400px":"300px",minHeight:e?"280px":"258px",padding:e?"40px 32px 32px":"44px 24px 16px",display:"flex",boxSizing:"border-box",flexDirection:"column",alignItems:"center",backgroundColor:t.colors.BGSecondary,borderRadius:"8px",border:`1px solid ${t.colors.LineSecondary3}`,boxShadow:"0px 2px 8px rgba(0, 0, 0, 0.06)"}]),"label:DivKeyboardShortcutContainer;"),r=(0,n.Z)("div",{target:"e1l04njg1"})((({isModal:e=!1,theme:t})=>[(0,a.GI)({theme:t,typography:e?"P0":"P1",fontWeight:"bold",fontFamily:"Proxima"}),{width:"100%",height:"22px",lineHeight:"22px",textAlign:"center",color:t.colors.TextPrimary,whiteSpace:"nowrap"}]),"label:DivKeyboardShortcutTitle;"),l=(0,n.Z)("div",{target:"e1l04njg2"})((({theme:e})=>[{marginTop:"16px",width:"100%",display:"flex",boxSizing:"border-box",flexDirection:"column",alignItems:"center",borderTop:`1px solid ${e.colors.LineSecondary}`}]),"label:DivKeyboardShortcutContent;"),d=(0,n.Z)("div",{target:"e1l04njg3"})((({theme:e})=>[(0,a.GI)({theme:e,typography:"P3",fontWeight:"normal",fontFamily:"Proxima"}),{width:"100%",height:"40px",textAlign:"left",color:e.colors.TextPrimary,display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:`1px solid ${e.colors.LineSecondary}`}]),"label:DivKeyboardShortcutContentItem;"),c=(0,n.Z)("div",{target:"e1l04njg4"})((({theme:{direction:e}})=>(0,a.YJ)({direction:e,end:"16px"})),{display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",top:16,cursor:"pointer"},"label:DivXMarkWrapper;"),p=(0,n.Z)(c,{target:"e1l04njg5"})((({theme:{colors:e}})=>({width:"24px",height:"24px",borderRadius:"100px",backgroundColor:e.BGView})),"label:StyledModalXMarkWrapper;"),u=(0,n.Z)(o.Z,{target:"e1l04njg6"})((({theme:{direction:e}})=>({transform:`rotateZ(${"rtl"===e?90:-90}deg)`})),"label:StyledForward;"),g=(0,n.Z)(o.Z,{target:"e1l04njg7"})((({theme:{direction:e}})=>({transform:`rotateZ(${"rtl"===e?-90:90}deg)`})),"label:StyledBackward;")},58590:(e,t,i)=>{"use strict";i.d(t,{G:()=>u});var o=i(64047),n=i(11040),a=i(16926),s=i(89974),r=i.n(s),l=i(91051),d=i(45313),c=i(14500),p=i(33111);const u=function(e){var{uniqueId:t,secUid:i,extraQuery:s={},children:u,replace:g=!1,isInBrowserMode:m=!1,teaParams:h,stopPropagation:_=!0,onClick:v,onLinkClick:y}=e,b=(0,o.__rest)(e,["uniqueId","secUid","extraQuery","children","replace","isInBrowserMode","teaParams","stopPropagation","onClick","onLinkClick"]);const f=(0,l.useMemo)((()=>({pathname:(0,d.P4)({uniqueId:t,secUid:i}),search:s})),[s,i,t]),x=(0,a.fz)(c.yB),k=(0,l.useRef)(null),w=(0,l.useCallback)((e=>{_&&e.stopPropagation(),x.handleLiveEntranceClick(r()(h,["anchor_id","follow_status","room_id","enter_from_merge","action_type","enter_method"])),null==v||v(e),null==y||y(e,f.pathname)}),[_,x,h,v,y,f.pathname]),S=(0,l.useCallback)((e=>{var t;13===e.keyCode&&(e.preventDefault(),e.stopPropagation(),null===(t=k.current)||void 0===t||t.click())}),[]);return(0,n.jsx)(p.v,Object.assign({forceSSR:!0,to:f},b,{replace:g||m,ref:k,onClick:w,onKeyDown:S},{children:u}),void 0)}},15679:(e,t,i)=>{"use strict";i.d(t,{D:()=>_});var o=i(64047),n=i(11040),a=i(91051),s=i(19813),r=i(45313),l=i(45949),d=i(71300),c=i(90525),p=i(32724),u=i(33111),g=i(88683),m=i(90293),h=i(21041);const _=(0,a.memo)((function(e){var{uniqueId:t,secUid:i,extraQuery:_={},children:v,replace:y=!1,isInBrowserMode:b=!1,teaParams:f,shouldStopPropagation:x=!0,reportTea:k=!0,onClick:w,onLinkClick:S,isTT4BAds:C,style:j}=e,P=(0,o.__rest)(e,["uniqueId","secUid","extraQuery","children","replace","isInBrowserMode","teaParams","shouldStopPropagation","reportTea","onClick","onLinkClick","isTT4BAds","style"]);const T=function(e,t={}){var i;const{search:o}=(0,h.TH)(),n=t.disableAutoLang?"":null!==(i=(0,m.parse)(o).lang)&&void 0!==i?i:"";if("string"==typeof e){const{url:i,query:o}=(0,m.parseUrl)(e);return(0,m.stringifyUrl)({url:i,query:Object.assign({lang:n},o)},Object.assign({skipEmptyString:!0},t))}const{pathname:a="",search:s={},hash:r}=e,l=r?`#${r}`:"";return`${(0,m.stringifyUrl)({url:a,query:Object.assign({lang:n},s)},Object.assign({skipEmptyString:!0},t))}${l}`}({pathname:(0,r.yl)({uniqueId:t,secUid:i}),search:_}),O=(0,g.pu)(t),L=null==O?void 0:O.isADVirtual,I=(0,d.HX)(),{adsClickSection:A,playMode:E}=f,{openAdsHandler:M}=(0,c.m)(3,A,E),R=(0,a.useRef)(null),F=(0,a.useCallback)((e=>C?((0,l.NS)(e),void M()):I?((0,l.NS)(e),void(0,p.U)("user-select",{uid:null==O?void 0:O.id,uniqueId:t,from:"user-link"})):(x&&e.stopPropagation(),k&&s.W.handleEnterUser(f),null==w||w(e),void(null==S||S(e,T)))),[C,I,x,k,f,w,S,T,M,null==O?void 0:O.id,t]),D=(0,a.useCallback)((e=>{var t;13===e.keyCode&&(e.preventDefault(),e.stopPropagation(),null===(t=R.current)||void 0===t||t.click())}),[]);return(0,n.jsx)(u.v,Object.assign({to:C?"":T,disabled:L},P,{replace:y||b,ref:R,onClick:F,onKeyDown:D,style:j},{children:v}),void 0)}))},50894:(e,t,i)=>{"use strict";i.d(t,{X:()=>r,Q:()=>l});var o=i(9236),n=i(91051),a=i(17133),s=i(9343);function r({action:e,modalConfig:t={}}){const i=(0,a.Lh)((()=>["user"]),[]),r=(0,o.qj)(s.r);return(0,n.useCallback)(((...o)=>{if(null==i?void 0:i.user)return e(...o);r.openModal(t)}),[e,null==i?void 0:i.user,r,t])}function l(e={}){const t=(0,o.qj)(s.r),i="function"==typeof e?e():e;return(0,n.useCallback)((()=>{t.openModal(i)}),[i,t])}},85640:(e,t,i)=>{"use strict";i.d(t,{u_:()=>S});var o,n=i(11040),a=i(25615),s=i.n(a),r=i(91051),l=i(32667),d=i(11820),c=i(46009),p=i(270),u=i(64047),g=i(32913),m=i(33761),h=i(36488);!function(e){e[e.None=0]="None",e[e.Outer=1]="Outer",e[e.Inner=2]="Inner",e[e.InnerLarge=3]="InnerLarge",e[e.Mobile=4]="Mobile"}(o||(o={}));const _=(0,g.Z)("div",{target:"e1gjoq3k0"})({position:"fixed",left:0,top:0,bottom:0,right:0,zIndex:1001,overflow:"auto",outline:"0px",transition:"all 500ms cubic-bezier(.075, .82, .165, 1)"},(({status:e,isShow:t})=>({display:t||e===c.Ix?"flex":"none",opacity:Number(e!==c.Ix&&e!==c.Wj)})),"label:DivModalContainer;"),v=(0,g.Z)("div",{target:"e1gjoq3k1"})((({theme:{colors:e}})=>({background:e.SDSecondary,position:"fixed",left:0,right:0,top:0,bottom:0})),"label:DivModalMask;"),y=(0,g.Z)("div",{target:"e1gjoq3k2"})({position:"relative",borderRadius:"8px",margin:"auto",transition:"all 300ms cubic-bezier(.075, .82, .165, 1)"},(e=>{var{status:t,theme:{colors:i}}=e,o=e.contentStyle,{transform:n}=o,a=(0,u.__rest)(o,["transform"]);return[{transform:t===c.Wj||t===c.Ix?n||"scale(0.1, 0.1)":"none",backgroundColor:i.BGPrimary},a]}),"label:DivContentContainer;"),b=(0,g.Z)(m.Z,{target:"e1gjoq3k3"})("label:StyledIcon;");function f(e){const{closeStyle:t,theme:{colors:i,direction:o}}=e,n=[(0,h.YJ)({direction:o,end:"24px"})];switch(t){case 2:n.push({width:"24px",height:"24px",background:i.BGView,[`${b}`]:{width:"15px",height:"15px"}});break;case 3:n.push({width:"24px",height:"24px",[`${b}`]:{width:"24px",height:"24px",fill:"rgba(22, 24, 35, 0.75)"}});break;case 4:n.push({width:"19px",height:"19px",[`${b}`]:{width:"19px",height:"19px",fill:"#000000"}});break;case 1:n.push({width:"40px",height:"40px",background:i.BGPrimary,[`${b}`]:{width:"24px",height:"24px"}})}return n}const x=(0,g.Z)("div",{target:"e1gjoq3k4"})({position:"absolute",top:"24px",borderRadius:"50%",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1},f,"label:DivCloseWrapper;"),k=(0,g.Z)("div",{target:"e1gjoq3k5"})({width:"100vw",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"},"label:DivCenterWrapper;"),w="login-modal",S=function({children:e,onClose:t,visible:i,timeout:o,onWheel:a=s(),closeStyle:u=0,closeStyles:g={},containerStyle:m={},maskCloseable:h=!0,keyboardCloseable:f=!0,zIndex:S=1001,mask:C=!0,fixed:j=!0,contentStyle:P={},maskStyle:T={},e2eData:O="",backgroundColor:L,parentRef:I,cancelMouseLeaveBubble:A=!1}){const E=(0,r.useRef)(),M=(0,r.useRef)(Boolean(i)),{showModal:R,hideModal:F}=(0,p.J)(),[D,B]=(0,r.useState)(!1);(0,r.useEffect)((()=>{i&&C?(R(),o&&(clearTimeout(E.current),E.current=window.setTimeout((()=>{null==t||t(2)}),o))):M.current&&(F(),clearTimeout(E.current)),M.current=Boolean(i)}),[i,C]),(0,r.useEffect)((()=>(B(!0),()=>{M.current&&F()})),[]),(0,r.useEffect)((()=>{const e=e=>{i&&f&&27===e.keyCode&&(null==t||t(1))};return i&&window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}}),[f,t,i]);const z=(0,r.useCallback)((()=>{h&&(null==t||t(3))}),[h,t]),N=(0,r.useCallback)((()=>{null==t||t(0)}),[t]),U=(0,r.useRef)(null),W=(0,r.useRef)(null),$=(0,r.useCallback)((e=>{const t=e.target;(null==t?void 0:t.id)===w&&t.setAttribute("tabindex","-1")}),[]),q=(0,r.useCallback)((e=>{13===e.keyCode&&(null==t||t(0))}),[t]),H=(0,r.useCallback)((e=>{A&&e.stopPropagation()}),[A]);return D?(0,l.createPortal)((0,n.jsx)(c.ZP,Object.assign({timeout:300,in:i,nodeRef:U},{children:t=>(0,n.jsxs)(_,Object.assign({status:t,isShow:i,onWheel:a,onKeyDown:$,ref:U,style:Object.assign(Object.assign({},m),{zIndex:S,position:j?"fixed":"relative"})},{children:[C&&(0,n.jsx)(v,Object.assign({style:T,onClick:z,onMouseLeave:H},{children:1===u&&(0,n.jsx)(x,Object.assign({closeStyle:u,onClick:N,style:g},{children:(0,n.jsx)(b,{},void 0)}),void 0)}),void 0),(0,n.jsx)(c.ZP,Object.assign({timeout:300,in:i,unmountOnExit:!0,nodeRef:W},{children:t=>(0,n.jsx)(d.ZP,Object.assign({autoFocus:!1,returnFocus:!0},{children:(0,n.jsx)(k,{children:(0,n.jsxs)(y,Object.assign({"data-e2e":O,status:t,ref:W,contentStyle:P,style:{backgroundColor:L},tabIndex:0,id:w},{children:[e,0!==u&&1!==u&&(0,n.jsx)(x,Object.assign({closeStyle:u,onClick:N,onKeyDown:q,"data-e2e":"modal-close-inner-button",style:g,role:"button",tabIndex:0},{children:(0,n.jsx)(b,{},void 0)}),void 0)]}),void 0)},void 0)}),void 0)}),void 0)]}),void 0)}),void 0),null!=I?I:document.body):null}},48088:(e,t,i)=>{"use strict";i.d(t,{R:()=>n});var o=i(91051);function n(e=0){const t=(0,o.useRef)(0),[i,n]=(0,o.useState)(!1),a=(0,o.useCallback)((()=>{n(!0),window.clearTimeout(t.current)}),[]),s=(0,o.useCallback)((()=>{window.clearTimeout(t.current),t.current=window.setTimeout((()=>{n(!1)}),e)}),[e]);return{active:i,setActive:n,handleMouseEnter:a,handleMouseLeave:s}}},39696:(e,t,i)=>{"use strict";i.d(t,{G:()=>g});var o=i(11040),n=i(91051),a=i(46009),s=i(32913),r=i(1723);function l(e,t){return e||t?t?e?{left:"50%",transform:`translate(-50%, ${t}px)`}:{transform:`translateY(${t}px)`}:{left:"50%",transform:"translateX(-50%)"}:null}const d=(0,s.Z)("div",{target:"e2ipgxl0"})((({state:e,duration:t=300,theme:i,centered:o,verticalPropKey:n,verticalOffset:a})=>[{position:"absolute",zIndex:1,background:i.colors.BGPrimary,borderRadius:"8px",[n]:"calc(100% + 12px)",boxShadow:"0 4px 16px rgba(0, 0, 0, .12)",transition:`opacity ${t}ms`,opacity:Number("entering"===e||"entered"===e)},l(o,a)]),"label:DivContainer;"),c=(0,s.Z)(r.Z,{target:"e2ipgxl1"})({display:"block",width:"24px",height:"8px",position:"absolute"},(({centered:e})=>e?{left:"50%",transform:"translateX(-50%)"}:null),(({verticalPropKey:e})=>"top"===e?{top:"-8px"}:{bottom:"-8px",transform:"rotate(180deg)"}),"label:StyledTopArrow;"),p={topRight:"right",bottomRight:"right",topLeft:"left",bottomLeft:"left",bottom:null},u={topRight:"bottom",topLeft:"bottom",bottomRight:"top",bottomLeft:"top",bottom:"top"},g=function({placement:e,margin:t="-2px",arrowMargin:i=6,duration:s=300,backgroundColor:r="#fff",active:l=!1,verticalOffset:g=0,style:m,hideArrow:h=!1,id:_,onKeyDown:v,ariaLabel:y,ariaLabelledBy:b,children:f}){const x=(0,n.useRef)(null),k=p[e],w=u[e],S=Object.assign({backgroundColor:r},m),C={};return k&&(C[k]=i,S[k]=t),(0,o.jsx)(a.ZP,Object.assign({in:l,timeout:s,unmountOnExit:!0,nodeRef:x},{children:e=>(0,o.jsxs)(d,Object.assign({verticalPropKey:w,state:e,duration:s,ref:x,style:S,centered:!k,verticalOffset:g,id:_,tabIndex:-1,onKeyDown:v,"aria-label":y,"aria-labelledby":b},{children:[!h&&(0,o.jsx)(c,{fill:r,style:C,centered:!k,verticalPropKey:w},void 0),f]}),void 0)}),void 0)}},9472:(e,t,i)=>{"use strict";i.d(t,{C:()=>N});var o,n=i(11040),a=i(9236),s=i(86254),r=i.n(s),l=i(91051),d=i(24376),c=i(95872);!function(e){e.DropdownCardShow="dropdown_card_show"}(o||(o={}));var p=i(88833),u=i(75311),g=i(41928),m=i(45313),h=i(32273),_=i(87930),v=i(97751),y=i(5687),b=i(33642),f=i(17133),x=i(57317),k=i(88683),w=i(66599),S=i(50894),C=i(63954),j=i(32913),P=i(36488),T=i(15679);const O=(0,j.Z)("div",{target:"er095110"})((({paddingTop:e=40})=>({height:e,cursor:"pointer"})),"label:DivPaddingTop;"),L=(0,j.Z)("div",{target:"er095111"})((({paddingStart:e=0,theme:{direction:t}})=>[{zIndex:100,position:"absolute"},(0,P.YJ)({direction:t,paddingStart:e})]),"label:DivProfileOuterContainer;"),I=(0,j.Z)("div",{target:"er095112"})((({theme:{colors:e,isDark:t}})=>({position:"relative",width:"320px",boxSizing:"border-box",padding:"20px",background:e.BGSecondary,boxShadow:t?"unset":`0px 4px 16px ${e.ShadowPrimary}`,borderRadius:"8px"})),"label:DivProfileContainer;"),A=(0,j.Z)("div",{target:"er095113"})({display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",marginBottom:"12px"},"label:DivHeadContainer;"),E=(0,j.Z)(T.D,{target:"er095114"})((({theme:e})=>(0,P.GI)({theme:e,color:"TextPrimary",fontWeight:"bold",fontFamily:"Sofia",typography:"H5"})),P.gi,"label:StyledUserTitle;"),M=(0,j.Z)(T.D,{target:"er095115"})((({theme:e})=>(0,P.GI)({theme:e,color:"TextPrimary",fontWeight:"semiBold",fontFamily:"Proxima",typography:"P3"})),P.gi,"label:StyledUserName;"),R=(0,j.Z)(T.D,{target:"er095116"})({display:"block",width:"44px",flex:"0 0 44px"},"label:StyledAvatarLink;"),F=(0,j.Z)("p",{target:"er095117"})({marginTop:"8px"},"label:PUserStat;"),D=(0,j.Z)("span",{target:"er095118"})((({theme:e})=>[(0,P.GI)({theme:e,fontWeight:"bold",typography:"H3"}),(0,P.YJ)({direction:e.direction,marginEnd:"6px"}),{fontSize:"17px",lineHeight:"20px",display:"inline-block"}]),"label:SpanUserStatsText;"),B=(0,j.Z)("span",{target:"er095119"})((({theme:e})=>[(0,P.GI)({theme:e,color:"TextSecondary",typography:"H3"}),{fontSize:"17px",lineHeight:"20px",display:"inline-block",":not(:last-of-type)":(0,P.YJ)({direction:e.direction,marginEnd:"12px"})}]),"label:SpanUserStatsDesc;"),z=(0,j.Z)("p",{target:"er0951110"})((({theme:e})=>[(0,P.GI)({theme:e,typography:"P3"}),{paddingTop:"16px",marginTop:"16px",borderTop:`1px solid ${e.colors.LineSecondary2}`}]),"label:PSignature;"),N=(0,l.memo)((function(e){var t,i;const{uniqueId:o,top:s,hideSignature:j,fixedLeft:P,paddingStart:T,paddingTop:N,groupId:U,followTheme:W,onClick:$}=e,q=(0,h.Q)(),[H,G]=(0,a.b7)(w.z,{selector:e=>({user:e.users[o],stats:e.stats[o]}),dependencies:[o],equalFn:(e,t)=>r()(e,t)}),{isADVirtual:Z}=null!==(t=null==H?void 0:H.user)&&void 0!==t?t:{},{language:V}=null!==(i=(0,f.Lh)((()=>["language"]),[]))&&void 0!==i?i:{},Q=(0,S.Q)(),Y={enter_method:"click_hover"};U&&(Y.group_id=U);const{isFollowing:K,handleFollow:J,text:X}=(0,k.wB)({uniqueId:o,onNeedLogin:Q,teaParams:Y}),{secUid:ee,id:te}=(0,b.m7)(H.user);(0,l.useEffect)((()=>{H.stats&&!H.stats.needFix||G.getUserDetail({uniqueId:o,secUid:ee,language:V})}),[G,H.stats,V,ee,o]),(0,l.useEffect)((()=>{c.W.event("dropdown_card_show")}),[]);const ie=(0,l.useMemo)((()=>({to_user_id:te,author_id:te,enter_method:"click_dropdown_card"})),[te]),oe=(0,x.ot)({pathname:(0,m.yl)({uniqueId:o,secUid:ee})}),[ne,ae]=(0,l.useState)(void 0);(0,l.useEffect)((()=>{const e={previous_launch_mode:sessionStorage.getItem(v.hw)||"",previous_langding_page:sessionStorage.getItem(d.vN)||""};ae(e)}),[]);const se=(0,y.e)(),re=(0,l.useCallback)((e=>{null==$||$(e),Z||se(e,{href:oe,shouldUsePush:!0})}),[se,oe,$,Z]);if(!H.user)return(0,_.G)(["item.user"]);const{avatarThumb:le,nickname:de,verified:ce,signature:pe,stateControlledMedia:ue}=H.user,{stats:ge}=H;return U&&(ie.group_id=U),(0,n.jsxs)(L,Object.assign({paddingStart:T,paddingTop:N,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,style:{top:s,left:P}},{children:[(0,n.jsx)(O,{onClick:re},void 0),(0,n.jsxs)(I,{children:[(0,n.jsxs)(A,{children:[(0,n.jsx)(R,Object.assign({uniqueId:o,secUid:ee,target:"_blank",rel:"noopener",teaParams:ie,"data-e2e":"user-card-avatar",extraQuery:ne},{children:(0,n.jsx)(u.q,{size:44,src:le},void 0)}),void 0),(0,n.jsx)(g.W,Object.assign({size:"small",onClick:J,buttonTheme:K?"default":null!=W?W:"line","data-e2e":"user-card-follow"},{children:X}),void 0)]},void 0),(0,n.jsxs)(E,Object.assign({uniqueId:o,secUid:ee,target:"_blank",rel:"noopener",teaParams:ie,extraQuery:ne},{children:[(0,n.jsx)("span",Object.assign({"data-e2e":"user-card-username"},{children:o}),void 0),ce&&(0,n.jsx)(p.Q,{width:14,height:14,"data-e2e":"user-card-bluev"},void 0)]}),void 0),(0,n.jsx)("br",{},void 0),(0,n.jsx)(M,Object.assign({uniqueId:o,secUid:ee,target:"_blank",rel:"noopener",teaParams:ie,"data-e2e":"user-card-nickname",extraQuery:ne},{children:de}),void 0),(0,n.jsx)(C.i,{stateControlledMedia:ue,labelType:2},void 0),(0,n.jsxs)(F,{children:[(0,n.jsx)(D,Object.assign({"data-e2e":"user-card-follower-count"},{children:ge?(0,b.BT)(ge.followerCount):"--"}),void 0),(0,n.jsx)(B,Object.assign({"data-e2e":"user-card-follower"},{children:q("Followers")}),void 0),(0,n.jsx)(D,Object.assign({"data-e2e":"user-card-like-count"},{children:ge?(0,b.BT)(ge.heartCount):"--"}),void 0),(0,n.jsx)(B,Object.assign({"data-e2e":"user-card-like"},{children:q("Likes")}),void 0)]},void 0),pe&&!j&&(0,n.jsx)(z,Object.assign({"data-e2e":"user-card-user-bio"},{children:pe}),void 0)]},void 0)]}),void 0)}))},24864:(e,t,i)=>{"use strict";i.d(t,{w:()=>u});var o=i(11040),n=i(91051),a=i(68457),s=i(32913),r=i(36488);const l=(0,s.Z)("div",{target:"e1b4u1n0"})({position:"absolute",padding:"0 4px",top:"0",transformOrigin:"right top",transition:"opacity .5s",opacity:0},(({theme:{direction:e}})=>{const t=(0,r.$K)(e,"end");return[(0,r.YJ)({direction:e,end:"0"}),{transformOrigin:`${t} top`}]}),"label:DivScrollBar;"),d=(0,s.Z)("div",{target:"e1b4u1n1"})({overflowX:"hidden",overflowY:"auto",overscrollBehaviorY:"contain",perspective:"1px",transformStyle:"preserve-3d","::-webkit-scrollbar":{width:0,height:0},[`:hover ${l}`]:{opacity:1}},(({theme:{direction:e}})=>{const t=(0,r.$K)(e,"end");return[(0,r.YJ)({direction:e,paddingEnd:"12px"}),{perspectiveOrigin:`${t} top`}]}),"label:DivScrollContainer;"),c=(0,s.Z)("div",{target:"e1b4u1n2"})("label:DivScrollWrapper;"),p=(0,s.Z)("div",{target:"e1b4u1n3"})((({theme:{colors:e}})=>({width:"6px",height:"100%",borderRadius:"3px",background:e.BGPlaceholderDefault})),"label:DivScrollBarThumb;"),u=(0,n.memo)((0,n.forwardRef)((function({children:e,Wrapper:t=c,onScroll:i,onScrollBottom:s,bottomThreshold:r=100,className:u,style:g,wrapperStyle:m},h){const _=(0,n.useRef)(null),[v,y]=(0,n.useState)(0),[b,f]=(0,n.useState)(0),x=(0,n.useMemo)((()=>{const e=v>=b?0:Math.pow(v,2)/b,t=(v-e)/(b-v);return{height:e,transform:`matrix3d(${[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,-1].join(",")}) scale(${1/t}) translateZ(${1-1/t}px) translateZ(-2px)`}}),[v,b]);(0,n.useImperativeHandle)(h,(()=>({get scrollTop(){var e,t;return null!==(t=null===(e=_.current)||void 0===e?void 0:e.scrollTop)&&void 0!==t?t:0},get dom(){return _.current}})),[]);const k=(0,a.fB)((()=>{if(!_.current)return;const{current:e}=_,{height:t}=e.getBoundingClientRect(),{scrollHeight:i}=e;y(t),f(i)}),[],300),w=(0,n.useCallback)((()=>{if(!_.current||!s)return;const{scrollTop:e}=_.current;null==i||i({scrollTop:e}),v+e+r>=b&&s()}),[s,i,v,r,b]);return(0,n.useEffect)((()=>{const e=new window.MutationObserver((function(e){e.length&&k()}));return _.current&&e.observe(_.current,{childList:!0,subtree:!0}),window.addEventListener("resize",k),()=>{window.removeEventListener("resize",k),e.disconnect()}}),[k]),(0,o.jsxs)(d,Object.assign({ref:_,onScroll:w,className:u,style:g},{children:[(0,o.jsx)(t,Object.assign({style:m},{children:e}),void 0),(0,o.jsx)(l,Object.assign({style:x},{children:(0,o.jsx)(p,{},void 0)}),void 0)]}),void 0)})))},63954:(e,t,i)=>{"use strict";i.d(t,{i:()=>D});var o,n=i(11040),a=i(91051),s=i(77293),r=i(91781),l=i(95872);!function(e){e.SCMPageView="scm_page_view",e.SCMTagClick="scm_tag_click",e.SCMDescriptionPop="scm_description_pop",e.SCMLearnMoreClick="scm_learn_more_click",e.SCMQuit="scm_quit"}(o||(o={}));var d,c=i(32913),p=i(36488);!function(e){e[e.User=0]="User",e[e.Caption=1]="Caption",e[e.ToolTip=2]="ToolTip"}(d||(d={}));const u=(0,c.Z)("div",{target:"e2imevf0"})((({labelType:e,theme:{colors:t}})=>[{display:"flex",width:"fit-content",borderRadius:"2px",alignItems:"center"},1===e?{backgroundColor:t.ConstBGInverse3,padding:"0 5px"}:0===e?{cursor:"pointer",backgroundColor:t.BGInput,padding:"1px 4px"}:{cursor:"pointer",flexDirection:"row-reverse"}]),"label:DivSCMLabel;"),g=(0,c.Z)("div",{target:"e2imevf1"})((({labelType:e,theme:t})=>[(0,p.GI)({theme:t,fontFamily:"Proxima",fontWeight:2===e?"normal":"semiBold"}),1===e?{fontSize:"13px",lineHeight:"22px",color:t.colors.ConstTextInverse,marginLeft:"4px"}:0===e?{fontSize:"12px",lineHeight:"18px",color:t.colors.TextPrimary,marginLeft:"4px"}:{fontSize:"14px",lineHeight:"22px",color:t.colors.TextTertiary,marginRight:"4px"}]),"label:DivSCMText;");var m=i(21041),h=i(32273),_=i(33642),v=i(32370),y=i(85640),b=i(17133),f=i(58854),x=i(76126),k=i(33111);const w=(0,c.Z)("div",{target:"es1egko0"})({padding:"24px 20px 6px",width:"310px",borderRadius:"8px",textAlign:"center",wordBreak:"break-word",display:"flex",flexDirection:"column",alignItems:"center"},"label:DivMobileWrapper;"),S=(0,c.Z)("div",{target:"es1egko1"})((({theme:e})=>({padding:"32px",width:"400px",borderRadius:"8px",textAlign:"center",wordBreak:"break-word",display:"flex",flexDirection:"column",alignItems:"center",color:e.colors.TextPrimary})),"label:DivDesktopWrapper;"),C=(0,c.Z)("div",{target:"es1egko4"})((({theme:e})=>[{textAlign:"center",fontSize:"20px",lineHeight:"24px",margin:"16px 0 12px"},(0,p.GI)({theme:e,fontFamily:"Proxima",fontWeight:"bold",color:"TextPrimary"})]),"label:DivMobileTitle;"),j=(0,c.Z)("div",{target:"es1egko5"})((({theme:e})=>[{textAlign:"center",fontSize:"24px",lineHeight:"36px",margin:"16px 0"},(0,p.GI)({theme:e,fontFamily:"Proxima",fontWeight:"bold",color:"TextPrimary"})]),"label:DivDesktopTitle;"),P=(0,c.Z)("div",{target:"es1egko6"})((({theme:e})=>[{textAlign:"center",fontSize:"15px",lineHeight:"18px"},(0,p.GI)({theme:e,fontFamily:"Proxima",color:"TextSecondary"})]),"label:DivMobileContent;"),T=(0,c.Z)("div",{target:"es1egko7"})((({theme:e})=>[{textAlign:"center",fontSize:"16px",lineHeight:"22px"},(0,p.GI)({theme:e,fontFamily:"Proxima",color:"TextSecondary"})]),"label:DivDesktopContent;"),O=(0,c.Z)("div",{target:"es1egko8"})({display:"flex",marginTop:"16px"},"label:DivDesktopBtnWrapper;"),L={width:"100%",height:"44px",fontSize:"15px",lineHeight:"44px",textDecoration:"none"},I={width:"164px",height:"48px",fontSize:"16px",lineHeight:"48px",borderRadius:"4px"},A=(0,c.Z)(k.v,{target:"es1egko9"})((({theme:e})=>[(0,p.GI)({theme:e,fontFamily:"Proxima",fontWeight:"semiBold"}),Object.assign(Object.assign({},L),{margin:"22px 0 2px",borderRadius:"2px",color:`${e.colors.ConstTextInverse} !important`,backgroundColor:e.colors.Primary,display:"block"})]),"label:StyledMobileLink;"),E=(0,c.Z)(k.v,{target:"es1egko10"})((({theme:e})=>[(0,p.GI)({theme:e,fontFamily:"Proxima",fontWeight:"bold"}),Object.assign(Object.assign({},I),{backgroundColor:e.colors.Primary,color:`${e.colors.ConstTextInverse} !important`,display:"block"})]),"label:StyledDesktopLink;"),M=(0,c.Z)("div",{target:"es1egko11"})((({theme:e})=>[(0,p.GI)({theme:e,fontFamily:"Proxima",fontWeight:"normal"}),Object.assign(Object.assign({},L),{backgroundColor:e.colors.BGTertiary,color:e.colors.TextReverse2})]),"label:DivMobileDismiss;"),R=(0,c.Z)("div",{target:"es1egko12"})((({theme:e})=>[(0,p.GI)({theme:e,fontFamily:"Proxima",fontWeight:"bold"}),Object.assign(Object.assign({},I),{backgroundColor:e.colors.BGSecondary2,marginRight:"8px",color:e.colors.TextPrimary,border:`1px solid ${e.colors.LineSecondary2}`,cursor:"pointer"})]),"label:DivDesktopDismiss;"),F=(0,a.memo)((({visible:e,pathname:t,newWindow:i=!1,isWebapp:o=!1,onClose:s,onJump:d})=>{const{language:c,user:p,region:u}=(0,_.m7)((0,b.Lh)((()=>["language","user","region"]),[])),{isMobile:g}=(0,_.m7)((0,f.h)((()=>["isMobile"]),[])),k=(0,h.Q)(),L=(0,m.TH)(),I=(0,x.C)({location:L,to:{pathname:t,search:{lang:c,user_id:null==p?void 0:p.uid,is_user_log_in:p?1:0,country_code:u}}}),F=(0,v.Z)();return(0,a.useEffect)((()=>{o&&e&&l.W.event("scm_description_pop")}),[o,e]),g?(0,n.jsx)(y.u_,Object.assign({visible:e,maskCloseable:!0,onClose:s},{children:(0,n.jsxs)(w,{children:[(0,n.jsx)(r.D,{size:48,center:!0},void 0),(0,n.jsx)(C,{children:k("scm_label_and_appeal_modal_title")},void 0),(0,n.jsx)(P,{children:k("scm_label_and_appeal_modal_desc")},void 0),(0,n.jsx)(A,Object.assign({target:i?"_blank":void 0,forceSSR:!0,to:I,onClick:d},{children:k("scm_label_and_appeal_modal_button_learn_more")}),void 0),(0,n.jsx)(M,Object.assign({onClick:s},{children:k("scm_label_and_appeal_modal_button_dismiss")}),void 0)]},void 0)}),void 0):(0,n.jsx)(y.u_,Object.assign({parentRef:F,visible:e,maskCloseable:!0,onClose:s},{children:(0,n.jsxs)(S,{children:[(0,n.jsx)(r.D,{size:64,center:!0},void 0),(0,n.jsx)(j,{children:k("scm_label_and_appeal_modal_title")},void 0),(0,n.jsx)(T,{children:k("scm_label_and_appeal_modal_desc")},void 0),(0,n.jsxs)(O,{children:[(0,n.jsx)(R,Object.assign({onClick:s},{children:k("scm_label_and_appeal_modal_button_dismiss")}),void 0),(0,n.jsx)(E,Object.assign({target:i?"_blank":void 0,forceSSR:!0,to:I,onClick:d},{children:k("scm_label_and_appeal_modal_button_learn_more")}),void 0)]},void 0)]},void 0)}),void 0)})),D=(0,a.memo)((({stateControlledMedia:e,isUserPage:t,labelType:i,style:o={}})=>{const[d,c]=(0,a.useState)(!1),p=(0,a.useCallback)((()=>{c(!1),l.W.event("scm_quit")}),[]),m=(0,a.useCallback)((()=>{c(!0),l.W.event("scm_tag_click")}),[]),h=(0,a.useCallback)((()=>{l.W.event("scm_learn_more_click")}),[]);return(0,a.useEffect)((()=>{e&&t&&l.W.event("scm_page_view")}),[t,Boolean(e)]),e?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(u,Object.assign({style:o,labelType:i,onClick:m},{children:[2===i?(0,n.jsx)(s.j,{size:12},void 0):(0,n.jsx)(r.D,{size:14},void 0),(0,n.jsx)(g,Object.assign({labelType:i},{children:e.text}),void 0)]}),void 0),(0,n.jsx)(F,{pathname:e.url,visible:d,onClose:p,isWebapp:!0,onJump:h},void 0)]},void 0):null}))},17133:(e,t,i)=>{"use strict";i.d(t,{bp:()=>d,Lh:()=>c});var o=i(9236),n=i(89974),a=i.n(n),s=i(91051),r=i(28188),l=i(26641);function d(){return(0,o.mp)(l.G)}function c(e,t){const i=(0,s.useContext)(r.Il);return(0,s.useMemo)((()=>i?a()(i,...e()):i),t)}},26641:(e,t,i)=>{"use strict";i.d(t,{G:()=>v});var o=i(64047),n=i(73566),a=i(48185),s=i(19630),r=i(8741),l=i(11348),d=i(82346),c=i(60595),p=i(20948),u=i(56979),g=i(49584),m=i(53095),h=i(10026),_=i(5549);let v=class extends n.D{constructor(){super(...arguments),this.defaultState={appContext:null,initialized:!1,lang:"en",sideNavActive:!1}}setSideNavActive(e,t){e.sideNavActive=t}toggleSideNav(e){return e.pipe((0,p.M)(this.state$),(0,u.U)((([e,t])=>this.getActions().setSideNavActive(!t.sideNavActive))))}setAppContext(e,t){var{statusCode:i}=t,n=(0,o.__rest)(t,["statusCode"]);0===i&&(e.appContext=(0,r.vV)(Object.assign({},n)))}setInitialized(e,t){e.initialized=t}setLang(e,t){e.lang=t}init(e){return e.pipe((0,p.M)(this.state$),(0,g.z)((([{appContext:e},{initialized:t}])=>t?l.E:(0,d.of)(Object.assign(Object.assign({},e),{statusCode:0})).pipe((0,m.z)((t=>(0,d.of)(this.getActions().setAppContext(t),this.getActions().setLang(e.language)))),(0,h.O)(this.getActions().setInitialized(!1)),(0,_.l)(this.getActions().setInitialized(!0),this.terminate())))))}};(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],v.prototype,"setSideNavActive",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[c.y]),(0,o.__metadata)("design:returntype",void 0)],v.prototype,"toggleSideNav",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],v.prototype,"setAppContext",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],v.prototype,"setInitialized",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,String]),(0,o.__metadata)("design:returntype",void 0)],v.prototype,"setLang",null),(0,o.__decorate)([(0,a.Qm)({payloadGetter:1}),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[c.y]),(0,o.__metadata)("design:returntype",void 0)],v.prototype,"init",null),v=(0,o.__decorate)([(0,s.Y)("AppContext")],v)},58854:(e,t,i)=>{"use strict";i.d(t,{T:()=>r,h:()=>l});var o=i(9236),n=i(89974),a=i.n(n),s=i(2844);function r(){return(0,o.mp)(s.r)}function l(e,t){return(0,o.mp)(s.r,{selector:t=>{const{bizContext:i}=t;return i?a()(i,...e()):i},dependencies:t})}},2844:(e,t,i)=>{"use strict";i.d(t,{r:()=>f});var o=i(64047),n=i(73566),a=i(48185),s=i(19630),r=i(8741),l=i(11348),d=i(58569),c=i(82346),p=i(60595),u=i(20948),g=i(49584),m=i(53095),h=i(10026),_=i(5549),v=i(57244),y=i(48936);let b=class{constructor(e){this.fetch=e}getBizContext(e){return this.fetch.get("/node-webapp/api/biz-context",{query:{lang:e},baseUrlType:2})}};b=(0,o.__decorate)([(0,v.G)(),(0,o.__metadata)("design:paramtypes",[y.r])],b);let f=class extends n.D{constructor(e){super(),this.service=e,this.defaultState={bizContext:null,initialized:!1}}setBizContext(e,t){var{statusCode:i}=t,n=(0,o.__rest)(t,["statusCode"]);0===i&&(e.bizContext=(0,r.vV)(Object.assign({},n)))}setInitialized(e,t){e.initialized=t}init(e){return e.pipe((0,u.M)(this.state$),(0,g.z)((([{lang:e},{initialized:t}])=>t?l.E:this.service.getBizContext(e).pipe((0,m.z)((e=>(0,d.T)((0,c.of)(this.getActions().setBizContext(e))))),(0,h.O)(this.getActions().setInitialized(!1)),(0,_.l)(this.getActions().setInitialized(!0),this.terminate())))))}};(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],f.prototype,"setBizContext",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],f.prototype,"setInitialized",null),(0,o.__decorate)([(0,a.Qm)({payloadGetter:1}),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],f.prototype,"init",null),f=(0,o.__decorate)([(0,s.Y)("BizContext"),(0,o.__metadata)("design:paramtypes",[b])],f)},47416:(e,t,i)=>{"use strict";i.d(t,{o:()=>r});var o=i(64047),n=i(57244),a=i(70526),s=i(48936);let r=class{constructor(e){this.fetch=e}postModifyVisibility(e){return this.fetch.post("/api/aweme/modify/visibility/",{query:Object.assign(Object.assign({},e),{tt_csrf_token:this.fetch.csrfToken}),headers:{[a.eD]:this.fetch.csrfToken},baseUrlType:2})}postUserSetting(e){return this.fetch.post("/api/user/set/settings/",{baseUrlType:2,query:Object.assign(Object.assign({},e),{tt_csrf_token:this.fetch.csrfToken}),headers:{[a.eD]:this.fetch.csrfToken}})}postDuetStitchChange(e){return this.fetch.post("/api/aweme/set/react_duet_stitch/",{query:Object.assign(Object.assign({},e),{tt_csrf_token:this.fetch.csrfToken}),headers:{[a.eD]:this.fetch.csrfToken},baseUrlType:2})}postVideoDelete(e){return this.fetch.post("/api/aweme/delete/",{query:Object.assign(Object.assign({},e),{tt_csrf_token:this.fetch.csrfToken}),headers:{[a.eD]:this.fetch.csrfToken},baseUrlType:2})}postAdsAction(e){return this.fetch.post("/api/commit/ads/action/",{query:Object.assign(Object.assign({},e),{tt_csrf_token:this.fetch.csrfToken}),headers:{[a.eD]:this.fetch.csrfToken},baseUrlType:2})}postScheduleDelete(e){return this.fetch.post("/api/schedule/aweme/delete/",{query:e,headers:{[a.eD]:this.fetch.csrfToken},baseUrlType:2})}};r=(0,o.__decorate)([(0,n.G)(),(0,o.__metadata)("design:paramtypes",[s.r])],r)},75617:(e,t,i)=>{"use strict";i.d(t,{Rt:()=>S,gp:()=>w,oo:()=>k});var o=i(64047),n=i(73566),a=i(48185),s=i(19630),r=i(35167),l=i(49584),d=i(53095),c=i(82346),p=i(68854),u=i(60595),g=i(55198),m=i(66891),h=i(57244),_=i(48936);let v=class{constructor(e){this.fetch=e}checkUserStatusBeforeSwitchout(){return this.fetch.post("/api/ba/business/suite/account/quitcheck",{baseUrlType:2})}switchOutBusinessAccount(){return this.fetch.post("/api/ba/business/suite/account/off",{baseUrlType:2})}};var y,b;v=(0,o.__decorate)([(0,h.G)(),(0,o.__metadata)("design:paramtypes",[_.r])],v),function(e){e.None="none",e.PersonalAccount="personal_account",e.ProAccount="pro_account"}(y||(y={})),function(e){e.None="none",e.SwitchConfirmModal="switch_confirm_modal",e.InvalidModal="invalid_modal"}(b||(b={}));const f=[3019001,3019002,3019003,3019018],x="Sorry, something wrong with the server, please try again.",k={3019001:"ttba_ob_switchouterr_title",3019002:"ttba_ob_switchouterr_title_lttfb",3019003:"ttba_ob_switchouterr_title_lmp",3019018:"ttba_ob_switchouterr_title_seller"},w={3019001:"ttba_ob_switchouterr_subtext",3019002:"ttba_ob_switchouterr_subtext_lttfb",3019003:"ttba_ob_switchouterr_subtext_lmp",3019018:"ttba_ob_switchouterr_subtext_seller"};let S=class extends n.D{constructor(e,t){super(),this.service=e,this.t=t,this.defaultState={switchedType:"none",businessAccountModalType:"none",invalidCode:0}}checkSwitchOut(e){return e.pipe((0,l.z)((()=>this.service.checkUserStatusBeforeSwitchout().pipe((0,d.z)((({statusCode:e})=>{if(!f.includes(e)&&0!==e)return g.h.open({content:this.t(x),duration:3}),(0,c.of)(this.noop());const t=0===e?"switch_confirm_modal":"invalid_modal";return(0,c.of)(this.getActions().setInvalidCode(e),this.getActions().setBusinessAccountModalType(t))})),this.catchError()))))}switchBusinessAccount(e){return e.pipe((0,l.z)((({action_type:e})=>this.service.switchOutBusinessAccount().pipe((0,d.z)((({statusCode:t})=>0===t?(g.h.open({content:this.t("switched_to_personal"),duration:3}),(0,c.of)(this.getActions().setSwitchedType(0===e?"personal_account":"pro_account"),this.getActions().setBusinessAccountModalType("none"))):(g.h.open({content:this.t(x),duration:3}),(0,c.of)(this.noop())))),this.catchError()))))}setBusinessAccountModalType(e,t){e.businessAccountModalType=t}setInvalidCode(e,t){e.invalidCode=t}setSwitchedType(e,t){e.switchedType=t}catchError(){return(0,p.K)((()=>(g.h.open({content:this.t(x),duration:3}),(0,c.of)(this.noop()))))}};(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[u.y]),(0,o.__metadata)("design:returntype",void 0)],S.prototype,"checkSwitchOut",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[u.y]),(0,o.__metadata)("design:returntype",void 0)],S.prototype,"switchBusinessAccount",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,String]),(0,o.__metadata)("design:returntype",void 0)],S.prototype,"setBusinessAccountModalType",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Number]),(0,o.__metadata)("design:returntype",void 0)],S.prototype,"setInvalidCode",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,String]),(0,o.__metadata)("design:returntype",void 0)],S.prototype,"setSwitchedType",null),S=(0,o.__decorate)([(0,s.Y)("BusinessAccountModule"),(0,o.__param)(1,(0,r.t)(m.s$)),(0,o.__metadata)("design:paramtypes",[v,Function])],S)},23434:(e,t,i)=>{"use strict";i.d(t,{Y:()=>g});var o=i(64047),n=i(73566),a=i(48185),s=i(19630),r=i(49584),l=i(56979),d=i(60595),c=i(57244),p=i(48936);let u=class{constructor(e){this.fetch=e}getBusinessPermissionList(){return this.fetch.get("/api/ba/business/suite/permission/list/",{query:{permissionList:"001004,001005"},baseUrlType:2})}};u=(0,o.__decorate)([(0,c.G)(),(0,o.__metadata)("design:paramtypes",[p.r])],u);let g=class extends n.D{constructor(e){super(),this.service=e,this.defaultState={businessPermission:{comment:!1,message:!1}}}setBusinessPermission(e,t){e.businessPermission=t}getBusinessPermissionList(e){return e.pipe((0,r.z)((()=>this.service.getBusinessPermissionList().pipe((0,l.U)((e=>{var t;const i=null!==(t=null==e?void 0:e.permissionList)&&void 0!==t?t:[];return this.getActions().setBusinessPermission({message:i.indexOf("001004")>-1,comment:i.indexOf("001005")>-1})}))))))}};(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],g.prototype,"setBusinessPermission",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[d.y]),(0,o.__metadata)("design:returntype",void 0)],g.prototype,"getBusinessPermissionList",null),g=(0,o.__decorate)([(0,s.Y)("Business"),(0,o.__metadata)("design:paramtypes",[u])],g)},55017:(e,t,i)=>{"use strict";i.d(t,{n:()=>s});var o=i(64047),n=i(57244),a=i(48936);let s=class{constructor(e){this.fetch=e,this.postPrivateBannerAck=()=>this.fetch.post("/api/private_banner/ack/")}getVideoPrivateSetting(){return this.fetch.get("/api/compliance/settings/",{baseUrlType:2})}};s=(0,o.__decorate)([(0,n.G)(),(0,o.__metadata)("design:paramtypes",[a.r])],s)},39664:(e,t,i)=>{"use strict";i.d(t,{yb:()=>p,rJ:()=>u});var o,n=i(11040),a=i(91623),s=i.n(a),r=i(25615),l=i.n(r),d=i(91051),c=i(97751);!function(e){e.OneColumnMode="one_column_mode",e.SwiperMode="swiper_mode"}(o||(o={}));const p=(0,d.createContext)({feedMode:"swiper_mode",switchFeedMode:l()}),u=(0,d.memo)((({feedMode:e,children:t})=>{const i=null!=e?e:s().get(c.qC)||"swiper_mode",[o,a]=(0,d.useState)(i),r=(0,d.useCallback)((e=>{a(e)}),[]),l=(0,d.useMemo)((()=>({feedMode:o,switchFeedMode:r})),[o,r]);return(0,n.jsx)(p.Provider,Object.assign({value:l},{children:t}),void 0)}))},10668:(e,t,i)=>{"use strict";i.d(t,{e:()=>I});var o=i(64047),n=i(73566),a=i(48185),s=i(19630),r=i(39556),l=i.n(r),d=i(50986),c=i(82346),p=i(60595),u=i(35435),g=i(10026),m=i(93859),h=i(56979),_=i(53095),v=i(68854),y=i(20948),b=i(49584),f=i(5549),x=i(24201),k=i(21005),w=i(27360),S=i(2844),C=i(57244),j=i(48936),P=i(70526),T=i(49290);const O=(0,w.LM)();let L=class{constructor(e){this.fetch=e}getNewestReply(){return this.fetch.get(T.NI.getNewestReply,{query:Object.assign({},O)})}getFaqList(e){const{language:t,faqType:i,entrance:o="general"}=e,n=T.NI.getListV3,a=Object.assign(Object.assign({},O),{lang:(0,w.rB)(t),entrance:o,faqType:i,faqTypes:i});return this.fetch.get(n,{query:a}).pipe((0,h.U)((e=>({statusCode:e.status_code,statusMessage:e.status_message,faqInfoMap:e.faq_info_map,entranceMap:e.entrance_map}))))}getReportRecords(e){const{language:t,minId:i,maxId:n}=e,a=(0,o.__rest)(e,["language","minId","maxId"]),s=Object.assign(Object.assign(Object.assign({},O),{lang:(0,w.rB)(t),min_id:i,max_id:n}),a);return this.fetch.get(T.NI.getReportRecords,{query:s})}uploadImage(e){const t=new FormData;for(let i=0;i<e.length;i++){const{file:o,height:n,width:a}=e[i];t.append("type",o.type),t.append("size",String(o.size)),t.append("name",o.name),t.append("height",String(n)),t.append("width",String(a)),t.append(`file${i}`,o)}return this.fetch.post(T.NI.uploadImage,{query:{tt_csrf_token:this.fetch.csrfToken},headers:{[P.eD]:this.fetch.csrfToken},omitContentType:!0,body:t}).pipe((0,h.U)((e=>{const{data:t,statusCode:i,isPrivateImage:o}=e;return{data:(t||[]).map((e=>({image_width:e.width,image_height:e.height,image_uri:e.url}))),isPrivateImage:o,statusCode:i}})),(0,v.K)((()=>(0,c.of)({data:[],statusCode:-1}))))}reportFeedback(e){return this.fetch.post(T.NI.submitFeedback,{query:Object.assign(Object.assign({},O),e),withCredentials:!0,headers:{[P.eD]:this.fetch.csrfToken}})}};L=(0,o.__decorate)([(0,C.G)(),(0,o.__metadata)("design:paramtypes",[j.r])],L);let I=class extends n.D{constructor(e,t){super(),this.service=e,this.bizContext=t,this.defaultState={hasNewFeedbackReply:!1,lastFeedbackReplyId:0,faq:{},records:{list:[],map:{},loading:!1,firstLoad:!1,hasMore:!0,hasDeleteData:!1,error:!1},form:{submitting:!1,success:!1,error:!1,uploadError:!1}}}setReply(e,t){e.lastFeedbackReplyId=t.feedback_id,e.hasNewFeedbackReply=t.has_reply}setFaqState(e,t){var i,o,n,a,s,r,l,d,c,p;const{faqType:u,data:g,loading:m,statusCode:h}=t,{flattened:_,levels:v}=g?(0,w.X)(g):{flattened:null,levels:null};e.faq[u]={data:null!==(o=null!=g?g:null===(i=e.faq[u])||void 0===i?void 0:i.data)&&void 0!==o?o:[],flattened:null!==(a=null!=_?_:null===(n=e.faq[u])||void 0===n?void 0:n.flattened)&&void 0!==a?a:{},levels:null!==(r=null!=v?v:null===(s=e.faq[u])||void 0===s?void 0:s.levels)&&void 0!==r?r:[],loading:null!==(d=null!=m?m:null===(l=e.faq[u])||void 0===l?void 0:l.loading)&&void 0!==d&&d,statusCode:null!==(p=null!=h?h:null===(c=e.faq[u])||void 0===c?void 0:c.statusCode)&&void 0!==p?p:null}}setFormState(e,t){e.form=Object.assign(Object.assign({},e.form),t)}setRecordsState(e,t){var i;e.records=Object.assign(Object.assign({},e.records),t),t.refreshRecords&&(e.records.list=[],e.records.map={}),null===(i=t.records)||void 0===i||i.forEach((({record:t,displayTime:i})=>{const o=Object.assign(Object.assign({},t),{displayTime:i});e.records.list.unshift(o),e.records.map[i]=e.records.map[i]||[],e.records.map[i].unshift(o)}))}addRecords(e,t){t.forEach((({record:t,displayTime:i})=>{const o=Object.assign(Object.assign({},t),{displayTime:i});e.records.list.unshift(o),e.records.map[i]=e.records.map[i]||[],e.records.map[i].unshift(o)}))}getNewestReply(e){return e.pipe((0,u.w)((()=>(0,d.F)(6e5).pipe((0,g.O)(0)).pipe((0,u.w)((()=>this.service.getNewestReply().pipe((0,m.b)((e=>{e.data||console.warn("There is no data in response.")})),(0,h.U)((e=>e.data?this.getActions().setReply(e.data):this.noop())),(0,k.n)({}))))))))}submitFeedback(e){return e.pipe((0,_.z)((e=>{const{files:t}=e;return(null==t?void 0:t.length)?this.service.uploadImage(t).pipe((0,_.z)((t=>{const{data:i,statusCode:o}=t;return(0,c.of)(Object.assign(Object.assign({},e),{submitting:!1,imageData:i,imageError:0!==o||!(null==i?void 0:i.length)}))})),(0,v.K)((()=>(0,c.of)(Object.assign(Object.assign({},e),{submitting:!1,imageData:[],imageError:!0}))))):(0,c.of)(Object.assign(Object.assign({},e),{imageData:[],imageError:!1}))})),(0,y.M)(this.bizContext.state$),(0,_.z)((([e,{bizContext:t}])=>{const{content:i,feedbackId:o,imageData:n,imageError:a,isMobile:s,language:r="",region:l=""}=e,{os:d=""}=null!=t?t:{},p=s?"webapp_mobile":"webapp_pc";if(a)return(0,c.of)(this.getActions().setFormState({submitting:!1,error:!1,success:!1,uploadError:!0}));const u={};(null==n?void 0:n.length)&&(u.is_private_image=1);const g={content:i,image_list:JSON.stringify(n||[]),qr_id:o,from:p,channel:p,sys_region:l,device:d,country:l,language:(0,w.rB)(r),multi_image:1,extra_params:JSON.stringify(u)};return this.service.reportFeedback(g).pipe((0,h.U)((e=>{const{err_code:t}=e;if(0===t)return this.getActions().setFormState({submitting:!1,error:!1,success:!0,uploadError:!1});throw new Error})),(0,v.K)((()=>(0,c.of)(this.getActions().setFormState({submitting:!1,error:!0,success:!1,uploadError:!1})))))})))}getReportRecords(e){return e.pipe((0,y.M)(this.state$),(0,b.z)((([{maxId:e,minId:t=0,count:i=15,language:o="",user:n,region:a},{records:s}])=>{var r;const d=n?(0,x.nY)({uniqueId:n.uniqueId,secUid:n.secUid}):"",{list:p,hasMore:u}=s,m=null!=e?e:(null===(r=p[0])||void 0===r?void 0:r.id)||0,_=0===m;return _||u?this.service.getReportRecords({language:(0,w.rB)(o),count:i,minId:t,maxId:m}).pipe((0,h.U)((e=>{const{data:t}=e,o=[];return t.forEach((e=>{const{content:t,status:i,pub_date:n,type:s}=e;if(""===t&&0===i)return this.getActions().setRecordsState({hasDeleteData:!0,loading:!1});const r=l()(1e3*n).format("YYYY-MM-DD HH:mm");e.content=(0,w.nV)(t,s,d,a),o.push({record:e,displayTime:r})})),this.getActions().setRecordsState({firstLoad:!0,hasMore:Boolean(t.length&&t.length===i),records:o,refreshRecords:_})})),(0,g.O)(this.getActions().setRecordsState({loading:!0,firstLoad:!_})),(0,f.l)(this.getActions().setRecordsState({loading:!1}))):(0,c.of)(this.noop())})),(0,v.K)((()=>(0,c.of)(this.getActions().setRecordsState({loading:!1,error:!0})))))}getFaqList(e){return e.pipe((0,_.z)((({entrance:e,id:t,language:i})=>{const o=(0,w.jI)(e)||(0,w.Cc)(t);return this.service.getFaqList({language:(0,w.rB)(i),entrance:o,faqType:""}).pipe((0,h.U)((e=>{const{statusMessage:t,faqInfoMap:i,entranceMap:n}=(0,w.Xo)(e);if("success"!==t)throw new Error;return{statusCode:0,data:(0,w.mX)({faqInfoMap:i,entranceMap:n,faqType:"",entrance:o})}})),(0,v.K)((()=>(0,c.of)(this.getActions().setFaqState({faqType:"",data:[],statusCode:-1,loading:!1})))),(0,h.U)((e=>this.getActions().setFaqState(Object.assign({faqType:"",loading:!1},e)))),(0,g.O)(this.getActions().setFaqState({loading:!0,faqType:""})),(0,f.l)(this.getActions().setFaqState({loading:!1,faqType:""}),this.terminate()))})))}getCommonFaqList(e){return e.pipe((0,_.z)((({entrance:e,id:t,language:i})=>{const o=(0,w.jI)(e)||(0,w.Cc)(t),n="common";return this.service.getFaqList({language:(0,w.rB)(i),entrance:o,faqType:n}).pipe((0,h.U)((e=>{const{statusMessage:t,faqInfoMap:i,entranceMap:a}=(0,w.Xo)(e);if("success"!==t)throw new Error;return{statusCode:0,data:(0,w.mX)({faqInfoMap:i,entranceMap:a,faqType:n,entrance:o})}})),(0,v.K)((()=>(0,c.of)(this.getActions().setFaqState({faqType:n,data:[],statusCode:-1,loading:!1})))),(0,h.U)((e=>this.getActions().setFaqState(Object.assign({faqType:n,loading:!1},e)))),(0,g.O)(this.getActions().setFaqState({loading:!0,faqType:n})),(0,f.l)(this.getActions().setFaqState({loading:!1,faqType:n}),this.terminate()))})))}};(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],I.prototype,"setReply",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],I.prototype,"setFaqState",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],I.prototype,"setFormState",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],I.prototype,"setRecordsState",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Array]),(0,o.__metadata)("design:returntype",void 0)],I.prototype,"addRecords",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],I.prototype,"getNewestReply",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],I.prototype,"submitFeedback",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],I.prototype,"getReportRecords",null),(0,o.__decorate)([(0,a.Qm)({payloadGetter:1}),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],I.prototype,"getFaqList",null),(0,o.__decorate)([(0,a.Qm)({payloadGetter:1}),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],I.prototype,"getCommonFaqList",null),I=(0,o.__decorate)([(0,s.Y)("Feedback"),(0,o.__metadata)("design:paramtypes",[L,S.r])],I)},39712:(e,t,i)=>{"use strict";i.d(t,{D:()=>h});var o=i(64047),n=i(73566),a=i(48185),s=i(19630),r=i(11348),l=i(14716),d=i(60595),c=i(93859),p=i(56979),u=i(73117),g=i(53095),m=i(47871);let h=class extends n.D{constructor(){super(...arguments),this.defaultState={isPwaInstallable:!1,isModalShow:!1,isExpand:!1}}storeDeferredPrompt(e){return e.pipe((0,c.b)((e=>{this.deferredPrompt=e})),(0,p.U)((()=>this.noop())))}setIsPwaInstallable(e,t){e.isPwaInstallable=t}setIsModalShow(e,t){e.isModalShow=t}setIsExpand(e,t){e.isExpand=t}handleShowSnack(e){return e.pipe((0,c.b)((e=>m.C.handleShowSnack(e))),(0,p.U)((()=>this.noop())))}handleClickDownload(e){return e.pipe((0,c.b)((()=>m.C.handleClickDownload())),(0,p.U)((()=>this.noop())))}handleInstallationClick(e){return e.pipe((0,c.b)((()=>m.C.handleGetForPC())),(0,u.g)(0),(0,g.z)((()=>this.deferredPrompt?(this.deferredPrompt.prompt(),(0,l.D)(this.deferredPrompt.userChoice).pipe((0,c.b)((e=>{"accepted"===e.outcome?m.C.handleInstallApp():console.warn("choice result outcome is not accepted")})),(0,p.U)((e=>"accepted"===e.outcome?this.getActions().setIsPwaInstallable(!1):this.noop())))):r.E)))}};(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[d.y]),(0,o.__metadata)("design:returntype",void 0)],h.prototype,"storeDeferredPrompt",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],h.prototype,"setIsPwaInstallable",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],h.prototype,"setIsModalShow",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],h.prototype,"setIsExpand",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[d.y]),(0,o.__metadata)("design:returntype",void 0)],h.prototype,"handleShowSnack",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[d.y]),(0,o.__metadata)("design:returntype",void 0)],h.prototype,"handleClickDownload",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[d.y]),(0,o.__metadata)("design:returntype",void 0)],h.prototype,"handleInstallationClick",null),h=(0,o.__decorate)([(0,s.Y)("AppPromotion")],h)},24703:(e,t,i)=>{"use strict";i.d(t,{X:()=>l});var o=i(64047),n=i(73566),a=i(48185),s=i(19630),r=i(60595);let l=class extends n.D{constructor(){super(),this.defaultState={isCookieBannerShowing:!1}}setCookieBannerShowing(e,t){e.isCookieBannerShowing=t}};(0,o.__decorate)([(0,a.cQ)(),(0,o.__metadata)("design:type",r.y)],l.prototype,"dispose$",void 0),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],l.prototype,"setCookieBannerShowing",null),l=(0,o.__decorate)([(0,s.Y)("FixBottomModule"),(0,o.__metadata)("design:paramtypes",[])],l)},72700:(e,t,i)=>{"use strict";i.d(t,{r:()=>r});var o=i(64047),n=i(73566),a=i(48185),s=i(19630);let r=class extends n.D{constructor(){super(),this.defaultState={redDotCount:0,hasVisitedFollowing:!1}}setRedDotCount(e,t){e.redDotCount=t}setHasVisitedFollowing(e,t){e.hasVisitedFollowing=t}};(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Number]),(0,o.__metadata)("design:returntype",void 0)],r.prototype,"setRedDotCount",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],r.prototype,"setHasVisitedFollowing",null),r=(0,o.__decorate)([(0,s.Y)("FollowingRedDotModule"),(0,o.__metadata)("design:paramtypes",[])],r)},35199:(e,t,i)=>{"use strict";i.d(t,{zW:()=>p,TB:()=>u,CN:()=>g});var o=i(64047),n=i(9236),a=i(16926),s=i(91051),r=i(95872),l=i(45313),d=i(14500),c=i(26641);function p(e){const t=(0,n.mp)(c.G,{dependencies:[],selector:e=>{var t;return null===(t=e.appContext)||void 0===t?void 0:t.user}}),i=Boolean(e);return{isShowLive:(0,s.useMemo)((()=>Boolean(i&&(null==e?void 0:e.roomId)&&"0"!==(null==e?void 0:e.roomId)&&(null==t?void 0:t.uid)!==e.id)),[null==t?void 0:t.uid,i,null==e?void 0:e.id,null==e?void 0:e.roomId]),src:null==e?void 0:e.avatarThumb,uniqueId:null==e?void 0:e.uniqueId,pureLivePath:e?(0,l.P4)({uniqueId:null==e?void 0:e.uniqueId,secUid:null==e?void 0:e.secUid}):""}}function u({reportTrigger:e,user:t,enterMethod:i,autoReport:o,reportValidator:n,once:l}){const c=(0,a.fz)(d.yB),[p,u]=(0,s.useState)(!1),m=(0,s.useMemo)((()=>{var e,o;return{anchor_id:null!==(e=null==t?void 0:t.id)&&void 0!==e?e:"",follow_status:null!==(o=null==t?void 0:t.relation)&&void 0!==o?o:-1,room_id:null==t?void 0:t.roomId,enter_from_merge:r.W.commonParams.page_name,action_type:"click",enter_method:i}}),[i,null==t?void 0:t.id,null==t?void 0:t.relation,null==t?void 0:t.roomId]),h=(0,s.useCallback)((()=>{p&&l||(c.handleLiveEntranceShow(m),u(!0))}),[p,c,l,m]);return(0,s.useEffect)((()=>{o&&e&&n()&&h()}),[e]),{handleExposure:h,teaParams:g({user:t,enterMethod:i})}}function g(e){var{user:t,enterMethod:i}=e,n=(0,o.__rest)(e,["user","enterMethod"]);return(0,s.useMemo)((()=>{var e,o,a;return Object.assign({anchor_id:null!==(e=null==t?void 0:t.id)&&void 0!==e?e:"",follow_status:null!==(o=null==t?void 0:t.relation)&&void 0!==o?o:-1,room_id:null==t?void 0:t.roomId,enter_from_merge:r.W.commonParams.page_name,enter_from:r.W.commonParams.page_name,action_type:"click",enter_method:i,to_user_id:null!==(a=null==t?void 0:t.id)&&void 0!==a?a:""},n)}),[t,i,n])}},9343:(e,t,i)=>{"use strict";i.d(t,{r:()=>x});var o=i(64047),n=i(73566),a=i(48185),s=i(19630),r=i(25615),l=i.n(r),d=i(90293),c=i(82346),p=i(60595),u=i(20948),g=i(53095),m=i(93859),h=i(95872),_=i(30395),v=i(18791),y=i(11467),b=i(26641),f=i(2844);let x=class extends n.D{constructor(e,t,i,o){super(),this.home=e,this.report=t,this.slardar=i,this.bizContext=o,this.defaultState={isOpen:!1,url:"",closeable:!1,isBannerActive:!1,bannerEnabled:!1,content:{title:"",desc:"",btnOpenText:""},iframeStyle:{},handleDownload:l(),handleLogin:l(),closeCallback:l(),loginModalShow:!1,maskCloseable:!1,userId:"",enterMethod:void 0,pageType:5,modalType:""}}setCloseable(e,t){e.closeable=t}setUrl(e,t){e.url=t}setLoginPath(e,t){e.loginPath=t}setCloseCallback(e,t){t&&(e.closeCallback=t)}setIsOpen(e,t){e.isOpen=t}setContent(e,t){t&&(e.content=t)}setHandleDownload(e,t){t&&(e.handleDownload=t)}setHandleLogin(e,t){t&&(e.handleLogin=t)}setIframeStyle(e,t){e.iframeStyle=t}setModalType(e,t){e.modalType=t}setLoginModalShow(e,t){var i,o,n;this.slardar.toggleLoginSlardar(t),e.loginModalShow=t,!t&&window.byted_acrawler&&(null===(o=(i=window.byted_acrawler).setUserMode)||void 0===o||o.call(i,(0,v.M)({isVA:Boolean("TTP"===(null===(n=this.home.state.appContext)||void 0===n?void 0:n.clusterRegion)),isLogin:!1,isFTC:!1,isHighRisk:!1})))}setMaskCloseable(e,t){e.maskCloseable=t}setPageType(e,t){e.pageType=t}setUserId(e,t){e.userId=t}setEnterMethod(e,t){e.enterMethod=t}openModal(e){return e.pipe((0,u.M)(this.home.state$,this.state$,this.bizContext.state$),(0,g.z)((([{url:e,loginPath:t,isSignup:i,closeable:o=!0,query:n={},iframeStyle:a={},content:s,handleDownload:r,handleLogin:l,closeCallback:p,maskCloseable:u=!1,userId:g,enterMethod:m,pageType:_=999},{lang:v},y,{bizContext:b}])=>{var f,x;const w=null!=t?t:"/"+(i?"signup":"login"),S=null!=e?e:(0,d.stringifyUrl)({url:w,query:Object.assign({lang:v,is_modal:1,hide_close_btn:1,event_name:i?"enter_sign_up":null,type:k()?"recharge":"",enter_from:h.W.commonParams.page_name},n)},{skipNull:!0}),C=null!==(x=null!==(f=n.type)&&void 0!==f?f:k()?"recharge":"")&&void 0!==x?x:"";return S.match(/\/login|\/signup/)&&!(null==b?void 0:b.isMobile)?(0,c.of)(this.getActions().setUrl(S),this.getActions().setModalType(C),this.getActions().setCloseable(o),this.getActions().setLoginModalShow(!0)):(0,c.of)(this.getActions().setUrl(S),this.getActions().setCloseable(o),this.getActions().setIsOpen(!0),this.getActions().setContent(s),this.getActions().setHandleDownload(r),this.getActions().setHandleLogin(l),this.getActions().setIframeStyle(a),this.getActions().setMaskCloseable(u),this.getActions().setCloseCallback(p),this.getActions().setUserId(g),this.getActions().setEnterMethod(m),this.getActions().setPageType(_))})))}closeModal(e){return e.pipe((0,u.M)(this.state$),(0,m.b)((([{enter_method:e,disableReport:t},i])=>{t||this.report.LoginNotifyClose({enter_method:e})})),(0,g.z)((([e,{closeCallback:t=l()}])=>{const i=[this.getActions().setIsOpen(!1)];return console.log("[[[[]]]]",t),t(),(0,c.of)(...i)})))}setIsBannerActive(e,t){e.isBannerActive=t}};function k(){return-1!==(window.location.pathname+window.location.search).indexOf("recharge")}(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],x.prototype,"setCloseable",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,String]),(0,o.__metadata)("design:returntype",void 0)],x.prototype,"setUrl",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,String]),(0,o.__metadata)("design:returntype",void 0)],x.prototype,"setLoginPath",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],x.prototype,"setCloseCallback",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],x.prototype,"setIsOpen",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],x.prototype,"setContent",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],x.prototype,"setHandleDownload",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],x.prototype,"setHandleLogin",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],x.prototype,"setIframeStyle",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],x.prototype,"setModalType",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],x.prototype,"setLoginModalShow",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],x.prototype,"setMaskCloseable",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Number]),(0,o.__metadata)("design:returntype",void 0)],x.prototype,"setPageType",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],x.prototype,"setUserId",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],x.prototype,"setEnterMethod",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],x.prototype,"openModal",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],x.prototype,"closeModal",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],x.prototype,"setIsBannerActive",null),x=(0,o.__decorate)([(0,s.Y)("LoginModal"),(0,o.__metadata)("design:paramtypes",[b.G,_.ZI,y.n,f.r])],x)},23822:(e,t,i)=>{"use strict";i.d(t,{m:()=>T});var o,n=i(64047),a=i(73566),s=i(48185),r=i(19630),l=i(35167),d=i(11348),c=i(82346),p=i(69349),u=i(60595),g=i(35435),m=i(20948),h=i(10026),_=i(5549),v=i(53095),y=i(49584),b=i(93859),f=i(56979),x=i(68854),k=i(55198),w=i(21005),S=i(66891),C=i(33966),j=i(38310),P=i(57664);!function(e){e.Friends="friends",e.Strangers="strangers"}(o||(o={}));let T=class extends a.D{constructor(e,t,i,o){super(),this.service=e,this.itemList=t,this.item=i,this.t=o,this.defaultState={friends:{},strangers:{},selectedConversation:void 0,currentMessage:{list:[],hasMore:!0},isLoadingMoreMessage:!1,failedMessageMap:{},hasFeedbackMap:{},failedVideoCodeMap:{},itemListByMessageId:[]}}multiSetConversation(e,t){const{list:i,isStranger:o}=t,n={};return i.forEach((e=>{n[e.id]=e})),o?Object.assign(Object.assign({},e),{strangers:Object.assign(Object.assign({},e.strangers),n)}):Object.assign(Object.assign({},e),{friends:Object.assign(Object.assign({},e.friends),n)})}setUser(e,t){const{item:i,isStranger:o}=t;return o?Object.assign(Object.assign({},e),{strangers:Object.assign(Object.assign({},e.strangers),{[i.id]:i})}):Object.assign(Object.assign({},e),{friends:Object.assign(Object.assign({},e.friends),{[i.id]:i})})}addFailedMessage(e,t){e.failedMessageMap=Object.assign(Object.assign({},e.failedMessageMap),t)}setSelectedConversation(e,t){e.selectedConversation=t}setMessageListAction(e,t){e.currentMessage.list=(null!=t?t:[]).reverse()}setMessageHasMore(e,t){e.currentMessage.hasMore=t}setIsLoadingMoreMessage(e,t){e.isLoadingMoreMessage=t}setHasFeedbackMap(e,t){e.hasFeedbackMap=Object.assign(Object.assign({},e.hasFeedbackMap),{[t]:!0})}setFailedVideoCodeMap(e,t){e.failedVideoCodeMap=Object.assign(Object.assign({},e.failedVideoCodeMap),t)}setItemListByMessageId(e,t){e.itemListByMessageId=t}loadMoreMessage(e){return e.pipe((0,g.w)((({conversation:e,abTestVersion:t})=>this.service.getMessagesByConversation({conversation:e}).pipe((0,m.M)(this.state$),(0,g.w)((([{hasMore:i},{selectedConversation:o}])=>{if((null==o?void 0:o.id)!==e.id)return d.E;const n=e.getMessageList();return(0,c.of)(this.getActions().setMessageHasMore(i),this.getActions().setMessageList({list:n,abTestVersion:t}))})),(0,h.O)(this.getActions().setIsLoadingMoreMessage(!0)),(0,_.l)(this.getActions().setIsLoadingMoreMessage(!1))))))}setConversationSettingInfo(e){return e.pipe((0,m.M)(this.state$),(0,v.z)((([{id:e,mute:t,stickOnTop:i},{friends:o,strangers:n}])=>{var a,s;const r=null!==(s=null!==(a=o[e])&&void 0!==a?a:n[e])&&void 0!==s?s:{};return this.service.setConversationSettingInfo({conversation:r,mute:t,stickOnTop:i}),d.E})))}deleteConversation(e){return e.pipe((0,m.M)(this.state$),(0,v.z)((([{id:e},{friends:t}])=>{var i;const o=null!==(i=t[e])&&void 0!==i?i:{};return this.service.deleteConversation({conversation:o}),(0,c.of)(this.getActions().setSelectedConversation(void 0))})))}markConversationRead(e){return e.pipe((0,m.M)(this.state$),(0,v.z)((([{id:e},{friends:t}])=>{var i;const o=null!==(i=t[e])&&void 0!==i?i:{};return this.service.markConversationRead({conversation:o}),d.E})))}markStrangerConversationRead(e){return e.pipe((0,m.M)(this.state$),(0,v.z)((([{id:e},{strangers:t}])=>{var i;const o=null!==(i=t[e])&&void 0!==i?i:{};return this.service.markStrangerConversationRead({conversation:o}),d.E})))}handleMessageSend(e){return e.pipe((0,m.M)(this.state$),(0,v.z)((([e,{selectedConversation:t}])=>{if(!t)return d.E;const i=8===e.type;return(0,c.of)(this.getActions().getMessageList({id:null==t?void 0:t.id,shouldHandleVideoMessage:i,abTestVersion:e.abTestVersion}))})))}handleReceiveNewMessage(e){return e.pipe((0,m.M)(this.state$),(0,v.z)((([e,{selectedConversation:t}])=>{if(!t)return d.E;const i=8===e.type;return(0,c.of)(this.getActions().getMessageList({id:null==t?void 0:t.id,shouldHandleVideoMessage:i,abTestVersion:e.abTestVersion}))})))}handleMessageDelete(e){return e.pipe((0,m.M)(this.state$),(0,v.z)((([e,{selectedConversation:t}])=>{if(!t)return d.E;const i=8===e.type;return(0,c.of)(this.getActions().getMessageList({id:null==t?void 0:t.id,shouldHandleVideoMessage:i,abTestVersion:e.abTestVersion}))})))}getMessageList(e){return e.pipe((0,m.M)(this.state$),(0,g.w)((([{id:e,shouldHandleVideoMessage:t,abTestVersion:i},{friends:o,strangers:n}])=>{var a;const s=n[e],r=o[e],l=Boolean(s);if(!s&&!r)return d.E;if(l)return(0,c.of)(this.getActions().getStrangerMessageList({id:e,shouldHandleVideoMessage:t,abTestVersion:i}));const p=null!==(a=null==r?void 0:r.getMessageList())&&void 0!==a?a:[];return(0,c.of)(this.getActions().setMessageList({list:p,shouldHandleVideoMessage:t,abTestVersion:i}))})),(0,w.n)({}))}getStrangerMessageList(e){return e.pipe((0,m.M)(this.state$),(0,g.w)((([{id:e,shouldHandleVideoMessage:t,abTestVersion:i},{strangers:o}])=>{const n=o[e];return n?this.service.getStrangerConversationMessage({conversation:n}).pipe((0,g.w)((e=>(0,c.of)(this.getActions().setMessageList({list:e,shouldHandleVideoMessage:t,abTestVersion:i}))))):d.E})),(0,w.n)({}))}setMessageList(e){return e.pipe((0,m.M)(this.state$,this.item.state$),(0,v.z)((([{list:e,shouldHandleVideoMessage:t=!0,abTestVersion:i},{failedVideoCodeMap:o},n])=>{if(!t)return(0,c.of)(this.getActions().setMessageListAction(e));const a=[],s=[],r=[];return e.forEach((e=>{const{type:t,content:i,clientId:l}=e;if(8!==t)return;let d={};try{d=JSON.parse(i)}catch(e){return null}const c=null==d?void 0:d.itemId;o[c]||(s.push(c),r.push(l),n[c]||a.push(c))})),(0,c.of)(this.getActions().setMessageListAction(e),this.getActions().getVideoList({needRequestList:a,allList:s,allListByMessageId:r,abTestVersion:i}))})))}getVideoList(e){return e.pipe((0,g.w)((({needRequestList:e,allList:t,allListByMessageId:i,abTestVersion:o})=>{var n,a;if(!e.length)return(0,c.of)(this.itemList.getActions().setItemListById({key:"messages",list:t}),this.getActions().setItemListByMessageId(i));const s="v2"===(null===(a=null===(n=null==o?void 0:o.parameters)||void 0===n?void 0:n.photo_test)||void 0===a?void 0:a.vid),r=e.map((e=>this.service.getItemInfo(e)));return(0,p.a)(r).pipe((0,g.w)((o=>{const n={},a=[];return o.forEach((({statusCode:o,itemInfo:r},l)=>{var d;const c=e[l],p=!s&&(null===(d=null==r?void 0:r.itemStruct)||void 0===d?void 0:d.imagePost);if(0!==o||p){n[c]=p?10239:o;const e=t.indexOf(c);e>-1&&(t.splice(e,1),i.splice(e,1))}else a.push(null==r?void 0:r.itemStruct)})),(0,c.of)(this.getActions().setFailedVideoCodeMap(n),...this.item.addItems(a),this.itemList.getActions().setItemListById({key:"messages",list:t}),this.getActions().setItemListByMessageId(i))})),(0,w.n)({}))})))}deleteMessage(e){return e.pipe((0,y.z)((({message:e})=>(this.service.deleteMessage({message:e}),d.E))))}likeMessage(e){return e.pipe((0,y.z)((({message:e,isLiked:t})=>(this.service.modifyMessageProperty({message:e,isLiked:t}),d.E))))}handleMessagePropertyUpsert(e){return e.pipe((0,m.M)(this.state$),(0,v.z)((([e,{friends:t,strangers:i,selectedConversation:o}])=>{var n,a,s;const r=null!==(n=e.uid)&&void 0!==n?n:"",l=e.conversationId,p=null!==(s=null!==(a=t[l])&&void 0!==a?a:i[l])&&void 0!==s?s:{};if(e.property["e:love"]){const{sender:t}=e;if(t!==r)return d.E;const i=e.property["e:love"],{length:n}=i;for(let e=0;e<n;e++){const t=i[e];if(t.userId!==r){const e=o===p;return p.customLocalLike={like:!0,date:t.createTime,hasRead:e},(0,c.of)(this.getActions().multiSetConversation({list:[p],isStranger:p.isStrangerConversation}))}}}else p.customLocalLike=null;return d.E})))}feedbackMessage(e){return e.pipe((0,m.M)(this.state$),(0,y.z)((([{shortId:e,uid:t,content:i,messageId:o},{hasFeedbackMap:n}])=>{const a=this.t("direct_meaasge_sending_ban_feedback_again"),s=this.t("Sorry, something wrong with the server, please try again.");return n[o]?(k.h.open({content:a,duration:3,widthType:"half"}),d.E):this.service.feedbackMessage({shortId:e,uid:t,content:i,messageId:o}).pipe((0,b.b)((({status_code:e})=>{0===e?k.h.open({content:a,duration:3,widthType:"half"}):k.h.open({content:s,duration:3,widthType:"half"})})),(0,f.U)((({status_code:e})=>0===e?this.getActions().setHasFeedbackMap(o):this.noop())),(0,x.K)((()=>(k.h.open({content:s,duration:3,widthType:"half"}),d.E))))})))}};(0,n.__decorate)([(0,s.j)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Object]),(0,n.__metadata)("design:returntype",void 0)],T.prototype,"multiSetConversation",null),(0,n.__decorate)([(0,s.j)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Object]),(0,n.__metadata)("design:returntype",void 0)],T.prototype,"setUser",null),(0,n.__decorate)([(0,s.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Object]),(0,n.__metadata)("design:returntype",void 0)],T.prototype,"addFailedMessage",null),(0,n.__decorate)([(0,s.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Object]),(0,n.__metadata)("design:returntype",void 0)],T.prototype,"setSelectedConversation",null),(0,n.__decorate)([(0,s.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Object]),(0,n.__metadata)("design:returntype",void 0)],T.prototype,"setMessageListAction",null),(0,n.__decorate)([(0,s.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Boolean]),(0,n.__metadata)("design:returntype",void 0)],T.prototype,"setMessageHasMore",null),(0,n.__decorate)([(0,s.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Boolean]),(0,n.__metadata)("design:returntype",void 0)],T.prototype,"setIsLoadingMoreMessage",null),(0,n.__decorate)([(0,s.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,String]),(0,n.__metadata)("design:returntype",void 0)],T.prototype,"setHasFeedbackMap",null),(0,n.__decorate)([(0,s.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Object]),(0,n.__metadata)("design:returntype",void 0)],T.prototype,"setFailedVideoCodeMap",null),(0,n.__decorate)([(0,s.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Array]),(0,n.__metadata)("design:returntype",void 0)],T.prototype,"setItemListByMessageId",null),(0,n.__decorate)([(0,s.Qm)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[u.y]),(0,n.__metadata)("design:returntype",void 0)],T.prototype,"loadMoreMessage",null),(0,n.__decorate)([(0,s.Qm)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[u.y]),(0,n.__metadata)("design:returntype",void 0)],T.prototype,"setConversationSettingInfo",null),(0,n.__decorate)([(0,s.Qm)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[u.y]),(0,n.__metadata)("design:returntype",void 0)],T.prototype,"deleteConversation",null),(0,n.__decorate)([(0,s.Qm)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[u.y]),(0,n.__metadata)("design:returntype",void 0)],T.prototype,"markConversationRead",null),(0,n.__decorate)([(0,s.Qm)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[u.y]),(0,n.__metadata)("design:returntype",void 0)],T.prototype,"markStrangerConversationRead",null),(0,n.__decorate)([(0,s.Qm)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[u.y]),(0,n.__metadata)("design:returntype",void 0)],T.prototype,"handleMessageSend",null),(0,n.__decorate)([(0,s.Qm)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[u.y]),(0,n.__metadata)("design:returntype",void 0)],T.prototype,"handleReceiveNewMessage",null),(0,n.__decorate)([(0,s.Qm)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[u.y]),(0,n.__metadata)("design:returntype",void 0)],T.prototype,"handleMessageDelete",null),(0,n.__decorate)([(0,s.Qm)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[u.y]),(0,n.__metadata)("design:returntype",void 0)],T.prototype,"getMessageList",null),(0,n.__decorate)([(0,s.Qm)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[u.y]),(0,n.__metadata)("design:returntype",void 0)],T.prototype,"getStrangerMessageList",null),(0,n.__decorate)([(0,s.Qm)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[u.y]),(0,n.__metadata)("design:returntype",void 0)],T.prototype,"setMessageList",null),(0,n.__decorate)([(0,s.Qm)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[u.y]),(0,n.__metadata)("design:returntype",void 0)],T.prototype,"getVideoList",null),(0,n.__decorate)([(0,s.Qm)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[u.y]),(0,n.__metadata)("design:returntype",void 0)],T.prototype,"deleteMessage",null),(0,n.__decorate)([(0,s.Qm)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[u.y]),(0,n.__metadata)("design:returntype",void 0)],T.prototype,"likeMessage",null),(0,n.__decorate)([(0,s.Qm)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[u.y]),(0,n.__metadata)("design:returntype",void 0)],T.prototype,"handleMessagePropertyUpsert",null),(0,n.__decorate)([(0,s.Qm)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[u.y]),(0,n.__metadata)("design:returntype",void 0)],T.prototype,"feedbackMessage",null),T=(0,n.__decorate)([(0,r.Y)("ConversationModule"),(0,n.__param)(3,(0,l.t)(S.s$)),(0,n.__metadata)("design:paramtypes",[P.e,C.h,j.A,Function])],T)},78658:(e,t,i)=>{"use strict";i.d(t,{O:()=>P});var o=i(64047),n=i(73566),a=i(48185),s=i(19630),r=i(58569),l=i(82346),d=i(11348),c=i(60595),p=i(93859),u=i(56979),g=i(53095),m=i(20948),h=i(10026),_=i(5549),v=i(49584),y=i(68854),b=i(90012),f=i(22597),x=i(21005),k=i(66599),w=i(23822),S=i(57664),C=i(24595),j=i(32724);let P=class extends n.D{constructor(e,t,i,o){super(),this.service=e,this.user=t,this.conversation=i,this.messageUser=o,this.defaultState={initialized:!1,messageCount:0,recentUserList:[],recentUserNameList:[],recentUidList:[],allUidList:[],followingUser:{list:[],nicknameList:[],uidList:[],hasMore:!0,maxCursor:0,minCursor:0},isFollowingLoading:!1,isSendMessageFailed:!1,isSendMessageLoading:!1,conversationMap:{},allConversationList:[],conversationList:[],strangerConversationList:[],successSentMessageCount:0,isListLoading:!0,hasMoreFriends:!0,hasMoreStranger:!0,otherUid:""},this.recentUids="",this.friendsCursor=20}initSDK(e){return e.pipe((0,p.b)((e=>{this.service.options$.next(e)})),(0,u.U)((()=>this.noop())))}startRefreshMessage(e){return(0,r.T)(this.service.refreshMessage$,e).pipe((0,u.U)((()=>this.noop())))}setMessageCount(e,t){e.messageCount=t,(0,j.U)("new-message",{count:t})}setConversationMap(e,t){e.conversationMap=Object.assign({},t)}setConversationList(e,t){t.sort(((e,t)=>{if(e.isStickOnTop&&t.isStickOnTop||!e.isStickOnTop&&!t.isStickOnTop){const i=Math.max(e.customLocalLike?e.customLocalLike.date.getTime():-1,e.lastVisibleMessage?e.lastVisibleMessage.createdAt.getTime():-1);return Math.max(t.customLocalLike?t.customLocalLike.date.getTime():-1,t.lastVisibleMessage?t.lastVisibleMessage.createdAt.getTime():-1)-i}return 0})),e.conversationList=[...t]}setAllConversationList(e,t){e.allConversationList=[...t]}setStrangerConversationList(e,t){e.strangerConversationList=[...t]}setHasMoreStranger(e,t){e.hasMoreStranger=t}setListLoading(e,t){e.isListLoading=t}updateRecentUserList(e,t){const{uniqueIdList:i,nicknameList:o,uidList:n}=t;e.recentUserList=[...i],e.recentUserNameList=[...o],e.recentUidList=[...n]}updateFollowingUserList(e,t){e.followingUser=t}setFollowingLoading(e,t){e.isFollowingLoading=t}setUidList(e,t){e.allUidList=t}addSentMessageSuccessCount(e){e.successSentMessageCount=e.successSentMessageCount+1}setSendMessageStatus(e,t){var i,o;e.isSendMessageFailed=null!==(i=t.isFailed)&&void 0!==i&&i,e.isSendMessageLoading=null!==(o=t.isLoading)&&void 0!==o&&o,void 0!==t.successCount&&(e.successSentMessageCount=t.successCount)}setOtherUid(e,t){e.otherUid=t}setInitialized(e,t){e.initialized=t}handleImEvent(e){return e.pipe((0,u.U)((({event:e,sdk:t,params:i,uid:o,abTestVersion:n})=>{switch(e){case t.IMEvent.ConversationChange:return this.getActions().startConversationChange();case t.IMEvent.MessageSend:return this.conversation.getActions().handleMessageSend(Object.assign(Object.assign({},i),{abTestVersion:n}));case t.IMEvent.ReceiveNewMessage:return this.conversation.getActions().handleReceiveNewMessage(Object.assign(Object.assign({},i),{abTestVersion:n}));case t.IMEvent.MessageDelete:return this.conversation.getActions().handleMessageDelete(Object.assign(Object.assign({},i),{abTestVersion:n}));case t.IMEvent.MessagePropertyUpsert:return this.conversation.getActions().handleMessagePropertyUpsert(Object.assign(Object.assign({},i),{uid:o}));default:return this.noop()}})))}startConversationChange(e){return e.pipe((0,g.z)((()=>this.service.getConversationListOnline())),(0,m.M)(this.state$,this.conversation.state$),(0,g.z)((([e=[],{otherUid:t},{selectedConversation:i}])=>{const o=[],n={};t&&o.push(t);const a=e.reduce(((e,a)=>{const{id:s,mode:r,isStrangerConversation:l,toParticipantUserId:d,unreadCount:c,isMuted:p}=a;if(0===r&&!l){const r=d;if(r&&(r!==t&&o.push(r),n[r]=a),0!==c&&!p&&s!==(null==i?void 0:i.id))return e+1}return e}),0),s=o.slice(0,20);return(0,l.of)(this.getActions().setMessageCount(a),this.getActions().setConversationMap(n),this.getActions().setAllConversationList(e),this.getActions().setConversationList(e.slice(0,this.friendsCursor)),this.getActions().setUidList(o),this.getActions().setInitialized(!0),this.getActions().getStrangerPreview(),this.getActions().getMultiUsersByUids({uidList:s,isGetRecentUsers:!0}),this.conversation.getActions().multiSetConversation({list:e,isStranger:!1}))})),(0,h.O)(this.getActions().setListLoading(!0)),(0,x.n)({}))}getMoreConversationList(e){return e.pipe((0,m.M)(this.state$),(0,g.z)((([e,{allUidList:t,allConversationList:i}])=>{if(this.friendsCursor>=i.length)return d.E;const o=this.friendsCursor;return this.friendsCursor+=this.friendsCursor+15,(0,l.of)(this.getActions().getMultiUsersByUids({uidList:t.slice(o,this.friendsCursor)}),this.getActions().setConversationList(i.slice(0,this.friendsCursor)),this.getActions().setListLoading(!0))})))}getStrangerPreview(e){return e.pipe((0,m.M)(this.messageUser.state$,this.state$),(0,g.z)((([e,{users:t},{allConversationList:i,conversationList:o}])=>this.service.getStrangerPreview().pipe((0,g.z)((e=>{var n,a;const s=null==e?void 0:e.conversation,r=null==s?void 0:s.toParticipantUserId;if(!r)return d.E;const c=[...i],p=[...o],u=null!==(a=null===(n=null==s?void 0:s.lastVisibleMessage)||void 0===n?void 0:n.createdAt.getTime())&&void 0!==a?a:-1;c.some(((e,t)=>{var i,o;if((null!==(o=null===(i=null==e?void 0:e.lastVisibleMessage)||void 0===i?void 0:i.createdAt.getTime())&&void 0!==o?o:-1)<u&&!(null==e?void 0:e.isStickOnTop))return c.splice(t,0,s),!0;t===c.length-1&&c.splice(t+1,0,s)})),p.some(((e,t)=>{var i,o;if((null!==(o=null===(i=null==e?void 0:e.lastVisibleMessage)||void 0===i?void 0:i.createdAt.getTime())&&void 0!==o?o:-1)<u&&!(null==e?void 0:e.isStickOnTop))return p.splice(t,0,s),!0;t===p.length-1&&p.splice(t+1,0,s)})),c.length||(c.splice(0,0,s),p.splice(0,0,s));const g=[this.getActions().setAllConversationList(c),this.getActions().setConversationList(p),this.conversation.getActions().multiSetConversation({list:[s],isStranger:!0})];return t[r]||g.push(this.getActions().getMultiUsersByUids({uidList:[r]})),(0,l.of)(...g)})),(0,x.n)({})))))}getStrangerConversationList(e){return e.pipe((0,m.M)(this.state$,this.conversation.state$),(0,g.z)((([{isLoadMore:e},{strangerConversationList:t},{strangers:i}])=>this.service.getStrangerConversationList({cursor:e?this.strangerCursor:0,limit:15}).pipe((0,g.z)((({conversation:e,hasMore:t,cursor:o})=>{this.strangerCursor=o;const n=e.filter((e=>!i[e.id]));if(1!==e.length&&!n.length)return d.E;const a=n.map((e=>{var t;return null!==(t=e.toParticipantUserId)&&void 0!==t?t:""}));return(0,l.of)(this.getActions().setStrangerConversationList([...e]),this.conversation.getActions().multiSetConversation({list:n,isStranger:!0}),this.getActions().setHasMoreStranger(t),this.getActions().getMultiUsersByUids({uidList:a}))})),(0,h.O)(t.length?this.noop():this.getActions().setListLoading(!0)),(0,_.l)(this.getActions().setListLoading(!1))))))}getMultiUsersByUids(e){return e.pipe((0,m.M)(this.messageUser.state$,this.state$),(0,v.z)((([{uidList:e,isGetRecentUsers:t},{users:i},{otherUid:o}])=>{const{pathname:n}=location;if(!(0,f.oC)(n)&&5===(0,f.C2)(n))return d.E;const a=String(e),s=e.filter((e=>void 0===(null==i?void 0:i[e])));return e.length&&this.recentUids!==a&&s.length?(this.recentUids=a,this.service.getMultiUsersByUids(a).pipe((0,v.z)((i=>{var n;const a=null!==(n=null==i?void 0:i.userMap)&&void 0!==n?n:{},s=[],r=[],d=[],c=e.map((e=>{if(a[e])return o===e&&(0,j.U)("user-select",{uid:e,uniqueId:a[e].uniqueId,from:"message-init"}),a[e].id=e,s.push(a[e].uniqueId),r.push(a[e].nickname),d.push(e),a[e];a[e]=null})).filter((e=>e));if(!c.length)return(0,l.of)(this.noop(),this.getActions().setListLoading(!1));const p=[this.user.getActions().multiSetUser(c),this.messageUser.getActions().multiSetUsers(a)];return t&&p.push(this.getActions().updateRecentUserList({uniqueIdList:s,nicknameList:r,uidList:d})),(0,l.of)(...p)})),(0,_.l)(this.getActions().setListLoading(!1)))):(0,l.of)(this.getActions().setListLoading(!1))})),(0,x.n)({}))}getFollowingUserListWithCanShare(e){return e.pipe((0,m.M)(this.state$),(0,u.U)((([{count:e},t])=>Object.assign(Object.assign({},t.followingUser),{count:e}))),(0,g.z)((e=>{var{list:t,nicknameList:i,uidList:n}=e,a=(0,o.__rest)(e,["list","nicknameList","uidList"]);return this.service.getFollowingUserListWithCanShare(a).pipe((0,v.z)((e=>{const{statusCode:o,maxTime:a,minTime:s,followings:r=[],hasMore:d}=e,c=[],p=[],u=[];return 0===o?(r&&r.forEach((e=>{c.push(e.uniqueId),p.push(e.nickname),u.push(e.id)})),(0,l.of)(this.getActions().updateFollowingUserList({list:[...t,...c],nicknameList:[...i,...p],uidList:[...n,...u],maxCursor:a,minCursor:s,hasMore:Boolean(d)}),this.user.getActions().multiSetUser(null!=r?r:[]),this.getActions().setFollowingLoading(!1))):(0,l.of)(this.noop(),this.getActions().setFollowingLoading(!1))})),(0,h.O)(this.getActions().setFollowingLoading(!0)))})),(0,x.n)({}))}sendMessage(e){return e.pipe((0,m.M)(this.conversation.state$),(0,g.z)((([{uid:e,relation:t=0,type:i,content:o,hasConversation:n,chatType:a,messageType:s,convId:r},{friends:c,strangers:p}])=>{var m;return(n?(0,l.of)({type:i,content:o,conversation:null!==(m=c[r])&&void 0!==m?m:p[r]}):this.service.createConversation({uid:e}).pipe((0,u.U)((({payload:e})=>({type:i,content:o,conversation:null!=e?e:{}}))),(0,x.n)({}))).pipe((0,g.z)((({type:e,content:t,conversation:i})=>this.service.createMessage({conversation:i,type:e,content:JSON.stringify(t)}))),(0,g.z)((e=>49999===i?d.E:this.service.sendMessage({message:e}))),(0,g.z)((i=>{var o,n,r;const{success:d,checkMsg:c,payload:p}=i,u=[this.getActions().setSendMessageStatus({isFailed:!1,isLoading:!1}),this.getActions().addSentMessageSuccessCount()];return d?(b.R.handleSendMessage({chat_type:null!=a?a:"private",conversation_id:null!==(o=null==p?void 0:p.conversationId)&&void 0!==o?o:"",message_type:null!=s?s:"share_video",relation_tag:t,to_user_id:e}),(0,j.U)("message-send",{uid:e})):(b.R.handleFailSendMessage({chat_type:null!=a?a:"private",conversation_id:null!==(n=null==p?void 0:p.conversationId)&&void 0!==n?n:"",message_type:null!=s?s:"share_video",error_code:null!==(r=JSON.parse(null!=c?c:"{}").status_code)&&void 0!==r?r:-1,relation_tag:t,to_user_id:e}),(null==p?void 0:p.clientId)&&u.push(this.conversation.getActions().addFailedMessage({[null==p?void 0:p.clientId]:null!=c?c:"null"}))),(0,l.of)(...u)})),(0,y.K)((()=>(b.R.handleFailSendMessage({chat_type:null!=a?a:"private",conversation_id:"",message_type:null!=s?s:"share_video",error_code:-1,relation_tag:t,to_user_id:e}),(0,l.of)(this.getActions().setSendMessageStatus({isFailed:!0,isLoading:!1}))))))})),(0,x.n)({}),(0,h.O)(this.getActions().setSendMessageStatus({isFailed:!1,isLoading:!1})))}};(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[c.y]),(0,o.__metadata)("design:returntype",void 0)],P.prototype,"initSDK",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[c.y]),(0,o.__metadata)("design:returntype",void 0)],P.prototype,"startRefreshMessage",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Number]),(0,o.__metadata)("design:returntype",void 0)],P.prototype,"setMessageCount",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],P.prototype,"setConversationMap",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Array]),(0,o.__metadata)("design:returntype",void 0)],P.prototype,"setConversationList",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Array]),(0,o.__metadata)("design:returntype",void 0)],P.prototype,"setAllConversationList",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Array]),(0,o.__metadata)("design:returntype",void 0)],P.prototype,"setStrangerConversationList",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],P.prototype,"setHasMoreStranger",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],P.prototype,"setListLoading",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],P.prototype,"updateRecentUserList",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],P.prototype,"updateFollowingUserList",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],P.prototype,"setFollowingLoading",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Array]),(0,o.__metadata)("design:returntype",void 0)],P.prototype,"setUidList",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object]),(0,o.__metadata)("design:returntype",void 0)],P.prototype,"addSentMessageSuccessCount",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],P.prototype,"setSendMessageStatus",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,String]),(0,o.__metadata)("design:returntype",void 0)],P.prototype,"setOtherUid",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],P.prototype,"setInitialized",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[c.y]),(0,o.__metadata)("design:returntype",c.y)],P.prototype,"handleImEvent",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[c.y]),(0,o.__metadata)("design:returntype",void 0)],P.prototype,"startConversationChange",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[c.y]),(0,o.__metadata)("design:returntype",void 0)],P.prototype,"getMoreConversationList",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[c.y]),(0,o.__metadata)("design:returntype",void 0)],P.prototype,"getStrangerPreview",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[c.y]),(0,o.__metadata)("design:returntype",void 0)],P.prototype,"getStrangerConversationList",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[c.y]),(0,o.__metadata)("design:returntype",void 0)],P.prototype,"getMultiUsersByUids",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[c.y]),(0,o.__metadata)("design:returntype",void 0)],P.prototype,"getFollowingUserListWithCanShare",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[c.y]),(0,o.__metadata)("design:returntype",void 0)],P.prototype,"sendMessage",null),P=(0,o.__decorate)([(0,s.Y)("MessageModule"),(0,o.__metadata)("design:paramtypes",[S.e,k.z,w.m,C.l])],P)},57664:(e,t,i)=>{"use strict";i.d(t,{e:()=>y});var o,n=i(64047),a=i(57244),s=i(90293),r=i(40299),l=i(14716),d=i(82346),c=i(49847),p=i(69349),u=i(50986),g=i(49584),m=i(53095),h=i(98540),_=i(48936),v=i(70526);!function(e){e[e.NotAvailable=0]="NotAvailable",e[e.Start=1]="Start",e[e.Error=2]="Error",e[e.Succeeded=3]="Succeeded"}(o||(o={}));let y=class{constructor(e){this.fetch=e,this.retryTime=0,this.hasMore$=new r.x,this.options$=new r.x,this.init$=this.options$.pipe((0,g.z)((e=>{let t,o;return(0,l.D)(Promise.all([Promise.all([i.e(1342),i.e(8776),i.e(3975),i.e(9207),i.e(6829),i.e(2308),i.e(3251),i.e(3685),i.e(2222),i.e(672),i.e(4276),i.e(622),i.e(4683),i.e(2128),i.e(3683),i.e(504),i.e(8695)]).then(i.bind(i,56692)),Promise.all([i.e(1342),i.e(8776),i.e(3975),i.e(9207),i.e(6829),i.e(2308),i.e(3251),i.e(3685),i.e(2222),i.e(672),i.e(4276),i.e(622),i.e(4683),i.e(2128),i.e(3683),i.e(504)]).then(i.bind(i,71283)),Promise.all([i.e(1342),i.e(8776),i.e(3975),i.e(9207),i.e(6829),i.e(2308),i.e(3251),i.e(3685),i.e(2222),i.e(672),i.e(4276),i.e(622),i.e(4683),i.e(2128),i.e(3683),i.e(504)]).then(i.bind(i,24778))]).then((([i,n,a])=>(e.authType=i.im_proto.AuthType.SESSION_AUTH,o=i,t=new i.BytedIM(e,[n.ExtensionPlugin,a.StrangerPlugin]),this.instance=t,this.sdk=o,t.init()))).then((i=>({result:i,instance:t,sdk:o,options:e}))).catch((i=>(console.error(`[IM SDK] init failed, e=${i}`),{result:2,instance:t,sdk:o,options:e}))))})),(0,m.z)((({result:e,instance:t,sdk:i,options:o})=>{const n=[i.IMEvent.ConversationChange,i.IMEvent.MessageSend,i.IMEvent.ReceiveNewMessage,i.IMEvent.MessageDelete,i.IMEvent.MessagePropertyUpsert];return t?(n.forEach((e=>{t.event.subscribe(e,(t=>{var n;o.eventListner({event:e,params:t,sdk:i,uid:null!==(n=o.userId)&&void 0!==n?n:""})}))})),(0,d.of)({instance:t,sdk:i,options:o})):(0,c._)((()=>new Error(`[IM SDK] init failed with initResult=${e}`)))}))),this.refreshMessage$=(0,p.a)([this.init$,(0,u.F)(360)]).pipe((0,m.z)((([{instance:e,sdk:t,options:i}])=>(0,l.D)(e.getMessagesByUserInit({inboxType:0,cursor:this.cursor}).then((({hasMore:e,cursor:o=0})=>{var n;return this.cursor=o.toString(),0===this.refreshTime&&i.eventListner({event:t.IMEvent.ConversationChange,params:{},sdk:t,uid:null!==(n=null==i?void 0:i.userId)&&void 0!==n?n:""}),this.refreshTime++,e})).catch((e=>(console.error(e),!(this.retryTime++>5))))))),(0,h.o)((e=>e))),this.cursor="0",this.refreshTime=0,this.instance={},this.sdk={}}getMessageToken(){return this.fetch.get("/api/im/reboot/misc/",{query:{aid:1988,im_token:1},baseUrlType:2})}getConversationListOnline(){var e,t;return(0,l.D)(null===(t=(e=this.instance).getConversationListOnline)||void 0===t?void 0:t.call(e))}getStrangerConversationList({cursor:e,limit:t}){var i,o;return(0,l.D)(null===(o=(i=this.instance).getStrangerConversationList)||void 0===o?void 0:o.call(i,{cursor:e,limit:t}))}createConversation({uid:e}){var t,i;return(0,l.D)(null===(i=(t=this.instance).createConversation)||void 0===i?void 0:i.call(t,{participants:e}))}createMessage({type:e,content:t,conversation:i}){var o,n;return(0,l.D)(null===(n=(o=this.instance).createMessage)||void 0===n?void 0:n.call(o,{conversation:i,type:e,content:t}))}sendMessage({message:e}){var t,i;return(0,l.D)(null===(i=(t=this.instance).sendMessage)||void 0===i?void 0:i.call(t,{message:e}))}setConversationSettingInfo({conversation:e,mute:t,stickOnTop:i}){var o,n;return(0,l.D)(null===(n=(o=this.instance).setConversationSettingInfo)||void 0===n?void 0:n.call(o,{conversation:e,mute:t,stickOnTop:i}))}deleteConversation({conversation:e}){var t,i;return(0,l.D)(null===(i=(t=this.instance).deleteConversation)||void 0===i?void 0:i.call(t,{conversation:e}))}deleteStrangerConversation({conversation:e}){var t,i;return(0,l.D)(null===(i=(t=this.instance).deleteStrangerConversation)||void 0===i?void 0:i.call(t,{conversation:e}))}markConversationRead({conversation:e}){var t,i;return(0,l.D)(null===(i=(t=this.instance).markConversationRead)||void 0===i?void 0:i.call(t,{conversation:e}))}markStrangerConversationRead({conversation:e}){var t,i;return(0,l.D)(null===(i=(t=this.instance).markStrangerConversationRead)||void 0===i?void 0:i.call(t,{conversation:e}))}getStrangerPreview(){var e,t;return(0,l.D)(null===(t=(e=this.instance).getStrangerPreview)||void 0===t?void 0:t.call(e,{}))}getMessagesByConversation({conversation:e}){var t,i;return(0,l.D)(null===(i=(t=this.instance).getMessagesByConversation)||void 0===i?void 0:i.call(t,{conversation:e}))}getStrangerConversationMessage({conversation:e}){var t,i;return(0,l.D)(null===(i=(t=this.instance).getStrangerConversationMessage)||void 0===i?void 0:i.call(t,{conversation:e}))}deleteMessage({message:e}){var t,i;return(0,l.D)(null===(i=(t=this.instance).deleteMessage)||void 0===i?void 0:i.call(t,{message:e}))}modifyMessageProperty({message:e,isLiked:t}){var i,o;return(0,l.D)(null===(o=(i=this.instance).modifyMessageProperty)||void 0===o?void 0:o.call(i,{message:e,modifyContent:[{operation:t?this.sdk.im_proto.OPERATION_TYPE.REMOVE_PROPERTY_ITEM:this.sdk.im_proto.OPERATION_TYPE.ADD_PROPERTY_ITEM,key:"e:love"}]}))}getMultiUsersByUids(e){return this.fetch.get("/api/im/multi_user/",{query:{aid:1988,uids:e}})}getFollowingUserListWithCanShare(e){const{minCursor:t=0,count:i=30}=e;return this.fetch.get("/api/im/spotlight/relation/",{query:{source:"web",with_fstatus:1,device_platform:"webapp_pc",count:i,max_time:t,min_time:0}})}getMultiUsersRelation({to_user_id:e,userId:t}){return this.fetch.get("/api/im/spotlight/multi_relation/",{query:{to_user_id:e,userId:t}})}feedbackMessage({shortId:e,uid:t,content:i,messageId:o}){const n=s.stringify({con_short_id:e,receiver_uid:t,content:i,msg_type:"7",scene:"sending_ban",msg_id:o});return this.fetch.post("/aweme/v1/im/msg/feedback/",{query:{report_type:"im",appId:1233},headers:{"Content-Type":v.zv.FORM_ENCODE},body:n})}getItemInfo(e){return this.fetch.get("/api/im/item_detail/",{query:{itemId:e}})}};y=(0,n.__decorate)([(0,a.G)(),(0,n.__metadata)("design:paramtypes",[_.r])],y)},24595:(e,t,i)=>{"use strict";i.d(t,{l:()=>h});var o=i(64047),n=i(73566),a=i(48185),s=i(19630),r=i(11348),l=i(82346),d=i(60595),c=i(20948),p=i(53095),u=i(21005),g=i(66599),m=i(10410);let h=class extends n.D{constructor(e,t){super(),this.userModule=e,this.userService=t,this.defaultState={users:{}}}multiSetUsers(e,t){const{users:i}=e;return{users:Object.assign(Object.assign({},i),t)}}setUserRelation(e,{uid:t,relation:i}){const o=e.users[t];o&&(o.relation=i)}blockUser(e){return e.pipe((0,c.M)(this.state$),(0,p.z)((([{uid:e,isBlock:t},{users:i}])=>{var o;const{secUid:n="",uniqueId:a=""}=null!==(o=i[e])&&void 0!==o?o:{};return this.userService.blockUser({sec_user_id:n,block_type:t?1:0}).pipe((0,p.z)((i=>{const{status_code:o}=i,n=t?4:0;return 0!==o?r.E:(0,l.of)(this.getActions().setUserRelation({uid:e,relation:n}),this.userModule.getActions().setUserRelation({uniqueId:a,relation:n}))})),(0,u.n)({}))})))}};(0,o.__decorate)([(0,a.j)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],h.prototype,"multiSetUsers",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],h.prototype,"setUserRelation",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[d.y]),(0,o.__metadata)("design:returntype",void 0)],h.prototype,"blockUser",null),h=(0,o.__decorate)([(0,s.Y)("MessageUserModule"),(0,o.__metadata)("design:paramtypes",[g.z,m.K])],h)},32724:(e,t,i)=>{"use strict";i.d(t,{U:()=>o});const o=(e,t)=>{try{if("business"!==new URLSearchParams(window.location.search).get("scene"))return;window.parent.postMessage({type:e,params:t},window.location.origin)}catch(e){console.error("postMessage error",e)}}},66046:(e,t,i)=>{"use strict";i.d(t,{R:()=>r});var o=i(64047),n=i(73566),a=i(48185),s=i(19630);let r=class extends n.D{constructor(){super(...arguments),this.defaultState={uniqueId:void 0}}setUniqueId(e,t){e.uniqueId=t}};(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],r.prototype,"setUniqueId",null),r=(0,o.__decorate)([(0,s.Y)("RecommendUserList")],r)},21555:(e,t,i)=>{"use strict";i.d(t,{B:()=>j});var o=i(64047),n=i(73566),a=i(48185),s=i(19630),r=i(82346),l=i(60595),d=i(93859),c=i(56979),p=i(45784),u=i(6693),g=i(20948),m=i(35435),h=i(10026),_=i(5549),v=i(53095),y=i(95872),b=i(42143),f=i(21005),x=i(26641),k=i(2844),w=i(57244),S=i(48936);let C=class{constructor(e){this.fetch=e}getSugList(e){const t=Object.assign(Object.assign({},e),{aid:1988});return this.fetch.get("/api/search/user/preview/",{query:t,baseUrlType:2})}getGeneralSugList(e){const t=Object.assign(Object.assign({},e),{aid:1988});return this.fetch.get("/api/search/general/preview/",{query:t,baseUrlType:2})}getMobileGeneralSugList(e){const t=Object.assign(Object.assign({},e),{aid:1988});return this.fetch.get("/api/search/general/sug/",{query:t,baseUrlType:2})}};C=(0,o.__decorate)([(0,w.G)(),(0,o.__metadata)("design:paramtypes",[S.r])],C);let j=class extends n.D{constructor(e,t,i){super(),this.service=e,this.home=t,this.biz=i,this.defaultState={sugList:[],mobileSugList:[],loading:!1,activeIndex:-1,searchValue:"",inputFocus:!1,newSugSessionTimeStamp:void 0}}setSearchValue(e,t){e.searchValue=t}setInputFocus(e,t){e.inputFocus=t}handleInputFocusChange(e){return e.pipe((0,d.b)((e=>{e&&b.xq.handleSearchEntry()})),(0,c.U)(this.getActions().setInputFocus))}setList(e,t){e.sugList=t}setMobileList(e,t){e.mobileSugList=t}setLoading(e,t){e.loading=t}setActiveIndex(e,t){e.activeIndex=t}setActiveUp(e){e.activeIndex=Math.max(0,e.activeIndex-1)}setActiveDown(e){const{sugList:t,activeIndex:i}=e;e.activeIndex=Math.min(t.length,i+1)}setNewSugSessionTimeStamp(e,t){e.newSugSessionTimeStamp=t}getSugList(e){return e.pipe((0,p.g)("keyword"),(0,u.b)(500),(0,g.M)(this.state$,this.home.state$,this.biz.state$),(0,c.U)((([e,t,{appContext:i},{bizContext:o}])=>({payload:e,inputFocus:t.inputFocus,isLogin:Boolean(null==i?void 0:i.user),searchVideoForLoggedin:null==o?void 0:o.searchVideoForLoggedin}))),(0,m.w)((({payload:e,inputFocus:t,isLogin:i,searchVideoForLoggedin:o})=>e.keyword?(i||!o?this.service.getGeneralSugList({keyword:e.keyword,app_language:e.app_language}):this.service.getSugList(e)).pipe((0,c.U)((e=>{const{status_code:t,sug_list:i=[],log_pb:o}=e;let n=[];return 0===t&&i.length&&(n=i.map((e=>{var t;return Object.assign(Object.assign({},e),{impr_id:null!==(t=null==o?void 0:o.impr_id)&&void 0!==t?t:""})}))),Object.assign(Object.assign({},e),{sug_list:n})})),(0,d.b)((({sug_list:i,words_query_record:o,log_pb:n})=>{t&&i.forEach(((t,i)=>{var a,s;b.xq.handleSugImpression({impr_id:null!==(a=null==n?void 0:n.impr_id)&&void 0!==a?a:"",words_source:"sug",words_position:i,words_content:t.content,raw_query:e.keyword,sug_type:t.extra_info.sug_user_id?"enrich_sug":"normal_sug",query_id:null!==(s=null==o?void 0:o.query_id)&&void 0!==s?s:"",group_id:t.word_record.group_id})}))})),(0,c.U)((e=>this.getActions().setList(e.sug_list))),(0,h.O)(this.getActions().setLoading(!0),this.getActions().setActiveIndex(-1)),(0,_.l)(this.getActions().setLoading(!1))):(0,r.of)(this.getActions().setList([])))))}getMobileSugList(e){return e.pipe((0,p.g)("keyword"),(0,u.b)(500),(0,g.M)(this.state$),(0,m.w)((([{keyword:e,app_language:t},{newSugSessionTimeStamp:i}])=>e?this.service.getMobileGeneralSugList({keyword:e,app_language:t}).pipe((0,c.U)((e=>{const{status_code:t,sug_list:i=[],log_pb:o}=e;let n=[];return 0===t&&i.length&&(n=i.map((e=>{var t;return Object.assign(Object.assign({},e),{impr_id:null!==(t=null==o?void 0:o.impr_id)&&void 0!==t?t:""})}))),Object.assign(Object.assign({},e),{sug_list:n})})),(0,d.b)((({sug_list:t,words_query_record:o,log_pb:n,extra:a})=>{b.xq.handleSugGroupImpression({words_source:"sug",words_num:String(t.length),raw_query:e,search_position:y.W.commonParams.previous_page}),t.forEach(((t,s)=>{var r,l;b.xq.handleSugImpression({impr_id:null!==(r=null==n?void 0:n.impr_id)&&void 0!==r?r:"",words_source:"sug",words_position:s,words_content:t.content,raw_query:e,sug_type:t.extra_info.sug_user_id?"enrich_sug":"normal_sug",query_id:null!==(l=null==o?void 0:o.query_id)&&void 0!==l?l:"",group_id:t.word_record.group_id,search_position:y.W.commonParams.previous_page,new_sug_session_id:String(null!=i?i:null==a?void 0:a.now)})}))})),(0,v.z)((e=>{var t;return(0,r.of)(this.getActions().setMobileList(e.sug_list),this.getActions().setNewSugSessionTimeStamp(String(null!=i?i:null===(t=e.extra)||void 0===t?void 0:t.now)))})),(0,f.n)({})):(0,r.of)(this.getActions().setMobileList([]),this.getActions().setNewSugSessionTimeStamp(void 0)))))}};(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,String]),(0,o.__metadata)("design:returntype",void 0)],j.prototype,"setSearchValue",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],j.prototype,"setInputFocus",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[l.y]),(0,o.__metadata)("design:returntype",void 0)],j.prototype,"handleInputFocusChange",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Array]),(0,o.__metadata)("design:returntype",void 0)],j.prototype,"setList",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Array]),(0,o.__metadata)("design:returntype",void 0)],j.prototype,"setMobileList",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],j.prototype,"setLoading",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Number]),(0,o.__metadata)("design:returntype",void 0)],j.prototype,"setActiveIndex",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object]),(0,o.__metadata)("design:returntype",void 0)],j.prototype,"setActiveUp",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object]),(0,o.__metadata)("design:returntype",void 0)],j.prototype,"setActiveDown",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],j.prototype,"setNewSugSessionTimeStamp",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[l.y]),(0,o.__metadata)("design:returntype",void 0)],j.prototype,"getSugList",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[l.y]),(0,o.__metadata)("design:returntype",void 0)],j.prototype,"getMobileSugList",null),j=(0,o.__decorate)([(0,s.Y)("Sug"),(0,o.__metadata)("design:paramtypes",[C,x.G,k.r])],j)},54769:(e,t,i)=>{"use strict";i.d(t,{w:()=>g,if:()=>m,Ob:()=>h,Zx:()=>_});var o=i(9236),n=i(90293),a=i(91051),s=i(21041),r=i(11838),l=i(42143),d=i(17133),c=i(58854),p=i(33966),u=i(63827);function g(){var e;const{search:t,state:i}=(0,s.TH)(),{enterMethod:o,searchSource:a}=null!=i?i:{},{q:r}=(0,n.parse)(t);return{enterMethod:o,searchSource:a,keyword:null!==(e=Array.isArray(r)?r.toString():r)&&void 0!==e?e:""}}function m(e){var t,i;const{keyword:n,enterMethod:l,searchSource:m}=g(),{user:h,language:_="en",abTestVersion:v}=null!==(t=(0,d.Lh)((()=>["user","language","abTestVersion"]),[]))&&void 0!==t?t:{},{searchVideoForLoggedin:y}=null!==(i=(0,c.h)((()=>["searchVideoForLoggedin"]),[]))&&void 0!==i?i:{},b=(0,s.TH)(),{pathname:f}=b,x=Boolean(h),[k,w]=(0,o.b7)(u.t8,{dependencies:[],selector:t=>{var i;return null!==(i=t[e])&&void 0!==i?i:{}}}),S=(0,o.qj)(p.h),C=f===r.Ad.searchUser;return(0,a.useCallback)(((t=!0,i=!1)=>{const o=n!==(null==k?void 0:k.keyword)||t,a=n!==(null==k?void 0:k.keyword)||i,s=!y||x,d="_solved"===l?void 0:{search_source:null!=m?m:"search_outer",search_type:e,enter_method:l};switch(e){case"general":f===r.Ad.searchHome&&o&&s&&(a&&(w.setSearchResult({key:"general",result:u._P}),S.resetItemList({key:"search_top",loading:!0})),w.getTopSearch({keyword:n,teaParams:d,user:h,language:_,abTestVersion:v}));break;case"user":C&&o&&(a&&w.setSearchResult({key:"user",result:u.i8}),w.getUserSearch({keyword:n,teaParams:d,user:h,language:_,abTestVersion:v}));break;case"video":f===r.Ad.searchVideo&&o&&s&&(a&&(w.setSearchResult({key:"video",result:u.i8}),S.resetItemList({key:"search_video",loading:!0})),w.getVideoSearch({keyword:n,teaParams:d,user:h,language:_,abTestVersion:v}))}}),[n,null==k?void 0:k.keyword,y,x,l,m,e,f,C,w,h,_,v,S])}function h(e,t=!0){const{keyword:i}=g(),n=(0,s.TH)(),l=(0,s.k6)(),{state:d,pathname:c}=n,p=Boolean((0,s.LX)(c,{path:r.Ad.searchHome})),[h,_]=(0,o.b7)(u.t8,{dependencies:[],selector:t=>{var i;return null!==(i=t[e])&&void 0!==i?i:{}}}),v=m(e);return(0,a.useEffect)((()=>{var e,o,a,s,r;if(!p)return;const c=Boolean(h.data)?!h.error&&0===(null===(o=null===(e=h.data)||void 0===e?void 0:e.videoList)||void 0===o?void 0:o.length)&&0===(null===(s=null===(a=h.data)||void 0===a?void 0:a.otherDataList)||void 0===s?void 0:s.length):0===(null===(r=null==h?void 0:h.items)||void 0===r?void 0:r.length),u=i!==h.keyword||c;return t&&l.replace(Object.assign(Object.assign({},n),{state:Object.assign(Object.assign({},d),{enterMethod:"_solved"})})),v(u),()=>{_.dispose()}}),[i]),Object.assign(Object.assign({},h),{keyword:i,handleSearch:v})}function _(e,t){const i=(0,a.useRef)(0),o=(0,s.k6)(),n=(0,s.TH)(),{pathname:d}=n;(0,a.useEffect)((()=>{if((0,s.LX)(d,{path:r.Ad.searchHome}))return i.current||(i.current=Date.now()),o.listen((({pathname:o})=>{if(!(0,s.LX)(o,{path:r.Ad.searchHome})){const o=Date.now()-i.current;l.xq.handleSearchSessionFinish({duration:o,impr_id:e,search_id:e,search_type:t})}}))}),[e,t])}},63827:(e,t,i)=>{"use strict";i.d(t,{i8:()=>R,_P:()=>F,t8:()=>D});var o,n,a=i(64047),s=i(73566),r=i(48185),l=i(19630),d=i(35167),c=i(82346),p=i(58569),u=i(60595),g=i(20948),m=i(56979),h=i(35435),_=i(53095),v=i(10026),y=i(5549),b=i(12167),f=i(93859),x=i(68854),k=i(11838),w=i(95872),S=i(42143),C=i(55198),j=i(7650),P=i(66891),T=i(33642),O=i(2844),L=i(17288),I=i(66599),A=i(38554),E=i(33966),M=i(45712);!function(e){e[e.NetworkError=-1]="NetworkError",e[e.NoResultText=10]="NoResultText",e[e.SelfHarmText=11]="SelfHarmText",e[e.HateSexualizationText=12]="HateSexualizationText",e[e.Guide=13]="Guide"}(o||(o={})),function(e){e.ShowWithButton="show_with_button",e.ShowDirectly="show_directly",e.NoResult="no_results"}(n||(n={}));const R={keyword:"",error:null,loading:!1,hasMore:!1,cursor:0,items:[],preloadList:[],searchPrecheck:null},F={keyword:"",error:null,loading:!1,hasMore:!1,totalLength:0,cursor:0,data:{videoList:[],otherDataList:[]},preloadList:[],searchPrecheck:null};let D=class extends s.D{constructor(e,t,i,o,n,a,s){super(),this.service=e,this.user=t,this.seoModule=i,this.itemList=o,this.videoMask=n,this.bizContext=a,this.t=s,this.defaultState={showTabs:!0,general:F,user:R,video:R,searchReminderData:null}}setSearchResult(e,t){const{key:i,result:o}=null!=t?t:{};e[i]=o}setSearchReminderData(e,t){e.searchReminderData=t.data}addSearchResult(e,t){var i,o,n,a,s;const{key:r,result:l}=null!=t?t:{};if(!e[r])return e[r]=l,e;e[r]=Object.assign(Object.assign(Object.assign({},e[r]),l),{items:null===(o=null===(i=e[r])||void 0===i?void 0:i.items)||void 0===o?void 0:o.concat(l.items),preloadList:null===(a=null===(n=e[r])||void 0===n?void 0:n.preloadList)||void 0===a?void 0:a.concat(null!==(s=l.preloadList)&&void 0!==s?s:[])})}addTopSearchResult(e,t){var i,o;const n=e.general;null===(i=t.data)||void 0===i||i.forEach((e=>{var t,i,o,a,s,r,l,d,c,p,u;if(4===e.type){const o={},a=n.data.videoList.length;o.type=e.type,o.items=null===(t=null==e?void 0:e.user_list)||void 0===t?void 0:t.map((({user_info:e})=>{var t;return n.totalLength++,null!==(t=e.unique_id)&&void 0!==t?t:""})),o.position=a%6==0?a:6*Math.ceil(a/6),o.hasMore=null!==(i=e.view_more)&&void 0!==i&&i,n.data.otherDataList=[...n.data.otherDataList,o]}else{n.totalLength++,n.data.videoList=[...n.data.videoList,null!==(a=null===(o=e.item)||void 0===o?void 0:o.id)&&void 0!==a?a:""];const t={id:null!==(l=null===(r=null===(s=e.item)||void 0===s?void 0:s.video)||void 0===r?void 0:r.id)&&void 0!==l?l:"",url:null!==(p=null===(c=null===(d=e.item)||void 0===d?void 0:d.video)||void 0===c?void 0:c.playAddr)&&void 0!==p?p:""};n.preloadList=[...null!==(u=n.preloadList)&&void 0!==u?u:[],t]}})),e.general=Object.assign(Object.assign({},e.general),{hasMore:Boolean(t.has_more),cursor:null!==(o=t.cursor)&&void 0!==o?o:0,data:Object.assign({},n.data),rid:t.rid,preloadList:n.preloadList})}setSearchLoading(e,t){const{key:i,loading:o}=null!=t?t:{};e[i].loading=o}setShowTabs(e,t){e.showTabs=t}setSearchPrecheck(e,t){const{key:i,value:o}=null!=t?t:{};e[i].searchPrecheck=o}setKeyword(e,t){const{key:i,keyword:o}=t;e[i].keyword=o}resetSearchResult(e){e.general=F,e.user=R,e.video=R}getTopSearch(e){return e.pipe((0,g.M)(this.state$,this.videoMask.state$,this.bizContext.state$),(0,m.U)((([e,t,i,o])=>({query:e,state:t.general,videoMaskState:i,bizContextState:o}))),(0,h.w)((e=>{var t,i=e.query,{teaParams:o,abTestVersion:n,user:s,language:r}=i,l=(0,a.__rest)(i,["teaParams","abTestVersion","user","language"]),{state:d,state:{cursor:u,data:g,rid:m},videoMaskState:h,bizContextState:f}=e;let x=(0,c.of)({});return!l.keyword||(0,j.y)()&&!(null===(t=f.bizContext)||void 0===t?void 0:t.isGoogleBot)||(x=this.service.getTopSearch(Object.assign(Object.assign({},l),{offset:u,search_id:m}))),x.pipe(this.handleTopSearchReport({state:d,keyword:l.keyword,teaParams:o}),(0,_.z)((e=>{var t,i,o,a;const u=this.seoModule.setSearchSEOProps(e,{language:r},{pathname:k.Ad.searchHome,input_keyword:l.keyword}),{has_more:g,data:_=[],extra:v={},search_nil_info:y,suicide_prevent:b,search_nil_text:f,status_code:x,log_pb:w}=e,S=[0,203,403].includes(x)?0:x,{logid:C}=v,j=null!==(t=null!=m?m:C)&&void 0!==t?t:"",P=y&&[11,13].includes(null!==(i=y.text_type)&&void 0!==i?i:0);if(!_.length&&!g&&!P)return this.generateErrorState({search_nil_info:y,search_nil_text:f,suicide_prevent:b,state:d,key:"general",keyword:l.keyword,pathname:k.Ad.searchHome,action$s:[u]});const T=[],O=[],L={hasMore:Boolean(g),statusCode:S,itemList:[],rid:j};let I=null;P&&(I={type:null!==(o=null==y?void 0:y.text_type)&&void 0!==o?o:11,data:Object.assign(Object.assign({},b),{et_search_id:j})}),_.forEach((e=>{if(4===e.type){const t=Object.assign(Object.assign({},e),{items:[]}),{user_list:i=[]}=e;i.forEach((({user_info:e={}})=>{const{user:i,stats:o}=this.userConvertor(e,j,null==w?void 0:w.impr_id),{unique_id:n=""}=e;T.push(i),O.push(o),t.items.push(n)}))}else L.itemList.push(e.item)})),(1===(null==s?void 0:s.photoSensitiveVideosSetting)||!s&&1===h.photoSensitiveVideosSetting)&&(e.data=null===(a=e.data)||void 0===a?void 0:a.filter((e=>{var t;return 4===e.type||4!==(null===(t=e.item)||void 0===t?void 0:t.maskType)})));const A=(0,c.of)(this.user.getActions().multiSetUser(T),this.user.getActions().multiSetUserStats(O),this.itemList.getActions().setList({response:L,key:"search_top",abTestVersion:n,user:s,language:r}),this.getActions().addTopSearchResult(Object.assign(Object.assign({},e),{rid:j})),this.getActions().setSearchPrecheck({key:"general",value:I}));return(0,p.T)(A,u)})),this.catchError({isEmpty:Boolean(g.videoList.length||g.otherDataList.length),key:"general",keyword:l.keyword,state:d,teaParams:o}),(0,v.O)(this.getActions().setSearchLoading({key:"general",loading:!0}),this.getActions().setShowTabs(!0),this.getActions().setKeyword({key:"general",keyword:l.keyword})),(0,y.l)(this.getActions().setSearchLoading({key:"general",loading:!1}),this.terminate()),(0,b.R)(this.getAction$().dispose))})))}getUserSearch(e){return e.pipe((0,g.M)(this.state$,this.bizContext.state$),(0,m.U)((([e,t,i])=>({query:e,state:t.user,bizContextState:i}))),(0,h.w)((e=>{var t,i=e.query,{teaParams:o,abTestVersion:n,language:s,user:r}=i,l=(0,a.__rest)(i,["teaParams","abTestVersion","language","user"]),{state:d,state:{cursor:u,items:g,rid:m},bizContextState:h}=e;let x=(0,c.of)({});return!l.keyword||(0,j.y)()&&!(null===(t=h.bizContext)||void 0===t?void 0:t.isGoogleBot)||(x=this.service.getUserSearch(Object.assign(Object.assign({},l),{cursor:u,search_id:m}))),x.pipe((0,f.b)((e=>{var t;const{user_list:i=[],log_pb:n,extra:a}=e,{impr_id:s}=null!=n?n:{},{logid:r}=null!=a?a:{},d=null!==(t=null!=m?m:r)&&void 0!==t?t:"";if(i.length){const e=g.length,t=(null==o?void 0:o.enter_method)?w.W.commonParams.page_name:"search_outer";i.forEach(((i,o)=>{S.xq.handleSearchImpression({search_type:"user",enter_from:t,rank:e+o,search_keyword:l.keyword,search_result_id:i.user_info.uid,impr_id:s,search_id:d})}))}else S.xq.handleSearchResultEmpty({search_keyword:l.keyword,impr_id:s,search_id:d});o&&S.xq.handleSearch(Object.assign({search_id:d,search_keyword:l.keyword},o))})),(0,_.z)((e=>{var t,i,o;const n=this.seoModule.setSearchSEOProps(e,{language:s},{pathname:k.Ad.searchUser,input_keyword:l.keyword}),{has_more:a,cursor:r,user_list:u=[],extra:g,search_nil_info:h,suicide_prevent:_,search_nil_text:v,log_pb:y}=e,b=null!==(t=null!=m?m:null==g?void 0:g.logid)&&void 0!==t?t:"",f=h&&[11,13].includes(null!==(i=h.text_type)&&void 0!==i?i:0);let x=null,w=null;if(f&&(w={type:null!==(o=null==h?void 0:h.text_type)&&void 0!==o?o:11,data:Object.assign(Object.assign({},_),{et_search_id:b})},x=(0,c.of)(this.getActions().setSearchPrecheck({key:"user",value:w}))),!u.length&&!a&&!f)return this.generateErrorState({res:e,search_nil_info:h,search_nil_text:v,suicide_prevent:_,state:d,key:"user",keyword:l.keyword,pathname:k.Ad.searchUser,action$s:[n]});if(u.length){const e=[],t=[],i=u.map((({user_info:i})=>{const{user:o,stats:n}=this.userConvertor(i,b,null==y?void 0:y.impr_id);return e.push(o),t.push(n),o.uniqueId})),o=(0,c.of)(this.user.getActions().multiSetUser(e),this.user.getActions().multiSetUserStats(t),this.getActions().addSearchResult({key:"user",result:{hasMore:Boolean(a),keyword:l.keyword,cursor:r,error:null,items:i,loading:!1,rid:b,preloadList:[]}}));return x?(0,p.T)(n,o,x):(0,p.T)(n,o)}return x?(0,p.T)(n,x):n})),this.catchError({isEmpty:Boolean(g.length),key:"user",keyword:l.keyword,state:d,teaParams:o}),(0,v.O)(this.getActions().setSearchLoading({key:"user",loading:!0}),this.getActions().setShowTabs(!0),this.getActions().setKeyword({key:"user",keyword:l.keyword})),(0,y.l)(this.getActions().setSearchLoading({key:"user",loading:!1}),this.terminate()),(0,b.R)(this.getAction$().dispose))})))}getVideoSearch(e){return e.pipe((0,g.M)(this.state$,this.videoMask.state$,this.bizContext.state$),(0,m.U)((([e,t,i,o])=>({query:e,state:t.video,videoMaskState:i,bizContextState:o}))),(0,h.w)((e=>{var t,i=e.query,{teaParams:o,abTestVersion:n,language:s,user:r}=i,l=(0,a.__rest)(i,["teaParams","abTestVersion","language","user"]),{state:d,state:{cursor:u,items:g,rid:m},videoMaskState:h,bizContextState:x}=e;let C=(0,c.of)({});return!l.keyword||(0,j.y)()&&!(null===(t=x.bizContext)||void 0===t?void 0:t.isGoogleBot)||(C=this.service.getVideoSearch(Object.assign(Object.assign({},l),{offset:u,count:20,search_id:m}))),C.pipe((0,f.b)((e=>{var t;const{item_list:i=[],log_pb:n,extra:a}=e,s=null!==(t=null!=m?m:null==a?void 0:a.logid)&&void 0!==t?t:"";if(i.length){const e=g.length,t=(null==o?void 0:o.enter_method)?w.W.commonParams.page_name:"search_outer";i.forEach(((i,o)=>{var a;S.xq.handleSearchVideoImpression({search_type:"video",enter_from:t,group_id:null==i?void 0:i.id,author_id:null===(a=null==i?void 0:i.author)||void 0===a?void 0:a.id,rank:e+o,search_keyword:l.keyword,impr_id:null==n?void 0:n.impr_id,search_id:s})}))}else S.xq.handleSearchResultEmpty({search_keyword:l.keyword,impr_id:null==n?void 0:n.impr_id,search_id:s});o&&S.xq.handleSearch(Object.assign({search_id:s,search_keyword:l.keyword},o))})),(0,_.z)((e=>{var t,i,o,a;const u=this.seoModule.setSearchSEOProps(e,{language:s},{pathname:k.Ad.searchVideo,input_keyword:l.keyword}),{has_more:g,cursor:_,item_list:v=[],extra:y,search_nil_info:b,suicide_prevent:f,search_nil_text:x,status_code:w}=e,S=[0,203,403].includes(w)?0:w,C=b&&[11,13].includes(null!==(t=b.text_type)&&void 0!==t?t:0);if(!v.length&&!g&&!C)return this.generateErrorState({search_nil_info:b,search_nil_text:x,suicide_prevent:f,state:d,key:"video",keyword:l.keyword,pathname:k.Ad.searchVideo,action$s:[u]});let j=[];j=1===(null==r?void 0:r.photoSensitiveVideosSetting)||!r&&1===h.photoSensitiveVideosSetting?v.filter((e=>4!==(null==e?void 0:e.maskType))).map((({id:e})=>e)):v.map((({id:e})=>e));const P=null!==(i=v.map((e=>{const{video:{id:t,playAddr:i=""}}=e;return{id:t,url:i}})))&&void 0!==i?i:[];let T=null;C&&(T={type:null!==(o=null==b?void 0:b.text_type)&&void 0!==o?o:11,data:Object.assign(Object.assign({},f),{et_search_id:null!==(a=null==y?void 0:y.logid)&&void 0!==a?a:""})});const O=(0,c.of)(this.itemList.getActions().setList({response:{itemList:v,hasMore:Boolean(g),statusCode:S},key:"search_video",abTestVersion:n,language:s,user:r}),this.getActions().addSearchResult({key:"video",result:{hasMore:Boolean(g),keyword:l.keyword,cursor:null!=_?_:0,error:null,items:j,loading:!1,rid:null!=m?m:null==y?void 0:y.logid,preloadList:P}}),this.getActions().setSearchPrecheck({key:"video",value:T}));return(0,p.T)(O,u)})),this.catchError({isEmpty:Boolean(g.length),state:d,keyword:l.keyword,teaParams:o,key:"video"}),(0,v.O)(this.getActions().setSearchLoading({key:"video",loading:!0}),this.getActions().setShowTabs(!0),this.getActions().setKeyword({key:"video",keyword:l.keyword})),(0,y.l)(this.getActions().setSearchLoading({key:"video",loading:!1}),this.terminate()),(0,b.R)(this.getAction$().dispose))})))}handleTopSearchReport({state:{data:e,totalLength:t,rid:i},teaParams:o,keyword:n}){return(0,f.b)((a=>{var s;const{data:r=[],log_pb:l,extra:d={}}=a,{logid:c}=d,p=null!==(s=null!=i?i:c)&&void 0!==s?s:"",{impr_id:u}=null!=l?l:{};if(r.length){const i=e.videoList.length,a=t-e.videoList.length,s=(null==o?void 0:o.enter_method)?w.W.commonParams.page_name:"search_outer";let l=0,d=0,c=0;r.forEach((e=>{var o,r,g,m;4===e.type?null===(o=e.user_list)||void 0===o||o.forEach((e=>{S.xq.handleSearchImpression({search_type:"general",enter_from:s,rank:a+d,item_rank:t+l,search_keyword:n,search_result_id:e.user_info.uid,impr_id:u,search_id:p}),l++,d++})):(S.xq.handleSearchVideoImpression({search_type:"general",enter_from:s,rank:i+c,item_rank:t+l,search_keyword:n,search_id:p,group_id:null===(r=e.item)||void 0===r?void 0:r.id,author_id:null===(m=null===(g=e.item)||void 0===g?void 0:g.author)||void 0===m?void 0:m.id,impr_id:u}),l++,c++)}))}else S.xq.handleSearchResultEmpty({search_keyword:n,impr_id:u,search_id:p});o&&S.xq.handleSearch(Object.assign({search_id:p,search_keyword:n},o))}))}catchError({isEmpty:e,teaParams:t,keyword:i,key:o,state:n}){return(0,x.K)((()=>e?(C.h.open({content:this.t("server_error_title"),duration:3,widthType:"half"}),(0,c.of)(this.noop())):(t&&S.xq.handleSearch(Object.assign({search_id:"",search_keyword:i},t)),(0,c.of)(this.getActions().setSearchResult({key:o,result:Object.assign(Object.assign({},n),{keyword:i,error:{type:-1}})})))))}generateErrorState(e){const{search_nil_info:t,search_nil_text:i,state:o,key:n,keyword:a,actions:s=[],action$s:r=[]}=e,{text_type:l}=null!=t?t:{text_type:10},d={type:l||10};12===l&&(d.extra=i);const u=(0,c.of)(this.getActions().setSearchResult({key:n,result:Object.assign(Object.assign({},o),{keyword:a,error:d})}),...s);return(0,p.T)(u,...r)}userConvertor(e,t,i){var o;return{user:(0,T.yk)(e,{search_id:t,impr_id:i}),stats:{uniqueId:null!==(o=e.unique_id)&&void 0!==o?o:"",stats:(0,T.u0)(e,!0)}}}};(0,a.__decorate)([(0,r.cQ)(),(0,a.__metadata)("design:type",u.y)],D.prototype,"dispose",void 0),(0,a.__decorate)([(0,r.lF)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Object]),(0,a.__metadata)("design:returntype",void 0)],D.prototype,"setSearchResult",null),(0,a.__decorate)([(0,r.lF)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Object]),(0,a.__metadata)("design:returntype",void 0)],D.prototype,"setSearchReminderData",null),(0,a.__decorate)([(0,r.lF)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Object]),(0,a.__metadata)("design:returntype",void 0)],D.prototype,"addSearchResult",null),(0,a.__decorate)([(0,r.lF)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Object]),(0,a.__metadata)("design:returntype",void 0)],D.prototype,"addTopSearchResult",null),(0,a.__decorate)([(0,r.lF)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Object]),(0,a.__metadata)("design:returntype",void 0)],D.prototype,"setSearchLoading",null),(0,a.__decorate)([(0,r.lF)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Boolean]),(0,a.__metadata)("design:returntype",void 0)],D.prototype,"setShowTabs",null),(0,a.__decorate)([(0,r.lF)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Object]),(0,a.__metadata)("design:returntype",void 0)],D.prototype,"setSearchPrecheck",null),(0,a.__decorate)([(0,r.lF)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Object]),(0,a.__metadata)("design:returntype",void 0)],D.prototype,"setKeyword",null),(0,a.__decorate)([(0,r.lF)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object]),(0,a.__metadata)("design:returntype",void 0)],D.prototype,"resetSearchResult",null),(0,a.__decorate)([(0,r.Qm)({payloadGetter:1,skipFirstClientDispatch:!1}),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[u.y]),(0,a.__metadata)("design:returntype",void 0)],D.prototype,"getTopSearch",null),(0,a.__decorate)([(0,r.Qm)({payloadGetter:1,skipFirstClientDispatch:!1}),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[u.y]),(0,a.__metadata)("design:returntype",void 0)],D.prototype,"getUserSearch",null),(0,a.__decorate)([(0,r.Qm)({payloadGetter:1,skipFirstClientDispatch:!1}),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[u.y]),(0,a.__metadata)("design:returntype",void 0)],D.prototype,"getVideoSearch",null),D=(0,a.__decorate)([(0,l.Y)("Search"),(0,a.__param)(6,(0,d.t)(P.s$)),(0,a.__metadata)("design:paramtypes",[M.o,I.z,L.q,E.h,A.P,O.r,Function])],D)},45712:(e,t,i)=>{"use strict";i.d(t,{o:()=>s});var o=i(64047),n=i(57244),a=i(48936);let s=class{constructor(e){this.fetch=e}getTopSearch(e){return this.fetch.get("/api/search/general/full/",{query:e,baseUrlType:2})}getUserSearch(e){return this.fetch.get("/api/search/user/full/",{query:e,baseUrlType:2})}getVideoSearch(e){return this.fetch.get("/api/search/item/full/",{query:e,baseUrlType:2})}};s=(0,o.__decorate)([(0,n.G)(),(0,o.__metadata)("design:paramtypes",[a.r])],s)},17288:(e,t,i)=>{"use strict";i.d(t,{q:()=>A});var o=i(64047),n=i(73566),a=i(48185),s=i(19630),r=i(35167),l=(i(40096),i(82346)),d=i(58569),c=i(11348),p=i(60595),u=i(53095),g=i(49584),m=i(68854),h=i(56979),_=i(20948),v=i(48782),y=i(35435),b=i(10026),f=i(5549),x=i(21590),k=i(66891),w=i(49996),S=i(57244),C=i(24201),j=i(41279),P=i(73726),T=i(48936);const O=[...C.aF,...C.M1];let L=class{constructor(e,t){this.t=e,this.fetch=t}fetchSEOProps(e){var t,i,o,n;e.t=this.t;const a=null!==(i=null===(t=(0,C.bH)(e,O).seoProps)||void 0===t?void 0:t.metaParams)&&void 0!==i?i:{},s=null!==(n=null===(o=(0,C.Dj)(e,O).seoProps)||void 0===o?void 0:o.jsonldList)&&void 0!==n?n:[],r=Object.assign(Object.assign({},e.seoProps),{metaParams:a,jsonldList:s});return(0,l.of)(r)}getUA(){return window.navigator.userAgent}getTrafficType(){return(0,j.R)()}getLaunchMode(){return(0,P.cf)()}fetchABTest(e){return this.fetch.get("/node-webapp/api/seo/ab-version",{query:{canonical:e},baseUrlType:2}).pipe((0,m.K)((()=>(0,l.of)({pageId:"-1",vidList:[],parameters:{}}))))}reportImpression(e){}};L=(0,o.__decorate)([(0,S.G)(),(0,o.__param)(0,(0,r.t)(k.s$)),(0,o.__metadata)("design:paramtypes",[Function,T.r])],L);const I=(e="")=>{try{return decodeURI(e)}catch(t){return e}};let A=class extends n.D{constructor(e,t,i){super(),this.service=e,this.sharingMeta=t,this.t=i,this.defaultState={metaParams:{},jsonldList:[],abtest:void 0,loading:!1,canonical:void 0,pageType:999,launchMode:void 0,trafficType:void 0,directoryConfig:{}}}setSEOState(e,t){e.metaParams=t.metaParams,e.jsonldList=t.jsonldList}setAbTest(e,t){e.abtest=t}setLoading(e,t){e.loading=t}setCanonical(e,t){e.canonical=t}setLaunchMode(e,t){e.launchMode=t}setTrafficType(e,t){e.trafficType=t}setDirectoryConfigData(e,t){e.directoryConfig=t}setDirectoryConfig(e){return e.pipe((0,u.z)((e=>(0,l.of)(this.getActions().setDirectoryConfigData(e),this.terminate()))))}setFeedSEOProps(e){return e.pipe((0,g.z)((e=>{const{pageType:t,topic:i,topicType:o,language:n}=e,a={seoProps:{pageId:"",pageType:t},topic:i,topicType:o,language:n};return this.service.fetchSEOProps(a).pipe((0,u.z)((e=>(0,l.of)(this.getActions().setSEOState(e),this.terminate()))),(0,m.K)((e=>(0,l.of)(this.noop(),this.terminate()))))})))}setGoLiveSEOProps(e){return e.pipe((0,g.z)((({language:e,user:t})=>{const i={seoProps:{pageId:"",pageType:14},user:t,language:e,t:this.t};return this.service.fetchSEOProps(i).pipe((0,u.z)((e=>(0,l.of)(this.getActions().setSEOState(e),this.terminate()))),(0,m.K)((()=>(0,l.of)(this.noop()))))})))}setHomeSEOProps(e){return this.service.fetchSEOProps({seoProps:{pageId:"",pageType:101},language:e}).pipe((0,u.z)((e=>(0,d.T)((0,l.of)(this.getActions().setSEOState(e)),(0,l.of)(this.sharingMeta.getActions().setSharingMetaState({"og:image":x.B}))))))}setForyouSEOProps(e,t){if(-1===e.statusCode)return(0,l.of)(this.noop());const i=Object.assign(Object.assign(Object.assign({},e),t),{seoProps:{pageType:5},t:this.t});return this.service.fetchSEOProps(i).pipe((0,h.U)((e=>this.getActions().setSEOState(e))))}setVideoSEOProps(e,t,i,o,n){var a,s,r;if(-1===e.statusCode)return(0,l.of)(this.noop());const c=null!==(r=null===(s=null===(a=null==e?void 0:e.itemInfo)||void 0===a?void 0:a.itemStruct)||void 0===s?void 0:s.id)&&void 0!==r?r:"";return(0,l.of)(e).pipe((0,_.M)(this.state$.pipe((0,v.h)((e=>void 0!==e.abtest)))),(0,y.w)((([a,s])=>{const r=Object.assign(Object.assign(Object.assign({},e),t),{transcriptContent:n,seoProps:{pageId:c,abtest:s.abtest,pageType:0},t:this.t});return this.service.fetchSEOProps(r).pipe((0,y.w)((t=>(0,d.T)((0,l.of)(this.getActions().setSEOState(t)),this.sharingMeta.setVideoSharingMeta(t,e,i,o)))))})))}setCollectionSEOProps(e,t,i,o,n){var a,s,r;const c=Object.assign(Object.assign(Object.assign({},e),t),{seoProps:{pageId:null!==(r=null===(s=null===(a=e.collectionInfo)||void 0===a?void 0:a.collectionId)||void 0===s?void 0:s.toString())&&void 0!==r?r:"",pageType:121},t:this.t,items:n});return this.service.fetchSEOProps(c).pipe((0,y.w)((t=>{var n,a,s;return(0,d.T)((0,l.of)(this.getActions().setSEOState(t)),o?(0,l.of)(this.noop()):this.sharingMeta.setCollectionSharingMeta(e,i,null!==(s=null===(a=null===(n=null==e?void 0:e.collectionInfo)||void 0===n?void 0:n.collectionId)||void 0===a?void 0:a.toString())&&void 0!==s?s:""))})))}setSearchSharingSEOProps(e,t,i,o){if(-1===e.statusCode)return(0,l.of)(this.noop());const n=Object.assign(Object.assign(Object.assign({},e),t),{seoProps:{pageType:111},eventName:i,t:this.t});return this.service.fetchSEOProps(n).pipe((0,u.z)((t=>(0,d.T)((0,l.of)(this.getActions().setSEOState(t)),this.sharingMeta.setSearchSharingMeta(t,e,i,o)))))}setQuestionSEOProps(e,t,i,o,n,a){var s;if(-1===e.statusCode)return(0,l.of)(this.noop());const r=Object.assign(Object.assign(Object.assign({},e),t),{seoProps:{pageId:null===(s=e.questionInfo)||void 0===s?void 0:s.id,pageType:16},answers:i,t:this.t,items:a});return this.service.fetchSEOProps(r).pipe((0,u.z)((t=>(0,l.of)(this.getActions().setSEOState(t),this.sharingMeta.setQuestionSharingMeta(e,i[0],o,n)))))}setVideoPlaylistSEOProps(e,t,i){var o;if(-1===e.statusCode)return(0,l.of)(this.noop());const n=Object.assign(Object.assign(Object.assign({},e),t),{seoProps:{pageId:null===(o=e.mixInfo)||void 0===o?void 0:o.id,pageType:119},t:this.t});return this.service.fetchSEOProps(n).pipe((0,u.z)((t=>(0,l.of)(this.getActions().setSEOState(t),this.sharingMeta.setVideoPlaylistSharingMeta(e,i)))))}setUserSEOProps(e,t,i,o){const{userInfo:n,statusCode:a}=e;return-1===a?(0,l.of)(this.noop()):(0,l.of)(e).pipe((0,_.M)(this.state$.pipe((0,v.h)((e=>void 0!==e.abtest)))),(0,y.w)((([a,s])=>{var r;const c=Object.assign(Object.assign(Object.assign({},e),t),{seoProps:{abtest:s.abtest,pageId:null!==(r=null==n?void 0:n.user.id)&&void 0!==r?r:"",pageType:1},t:this.t,items:o});return this.service.fetchSEOProps(c).pipe((0,y.w)((t=>(0,d.T)((0,l.of)(this.getActions().setSEOState(t)),this.sharingMeta.setUserSharingMeta(t,e,i)))))})))}setStickerSEOProps(e,t,i){var o,n,a;const{statusCode:s}=e;if(-1===s)return(0,l.of)(this.noop());const r=Object.assign(Object.assign(Object.assign({},e),t),{statusCode:s,seoProps:{pageId:null!==(a=null===(n=null===(o=null==e?void 0:e.stickerInfo)||void 0===o?void 0:o.sticker)||void 0===n?void 0:n.id)&&void 0!==a?a:"",pageType:6},t:this.t});return this.service.fetchSEOProps(r).pipe((0,u.z)((t=>(0,d.T)((0,l.of)(this.getActions().setSEOState(t)),this.sharingMeta.setStickerSharingMeta(t,e,i)))))}setChallengeSEOProps(e,t,i,o,n){const{statusCode:a}=e;return-1===a?(0,l.of)(this.noop()):(0,l.of)(e).pipe((0,_.M)(this.state$.pipe((0,v.h)((e=>void 0!==e.abtest)))),(0,y.w)((([s,r])=>{var c;const p=Object.assign(Object.assign(Object.assign({},e),t),{statusCode:a,seoProps:{pageId:null===(c=e.challengeInfo)||void 0===c?void 0:c.challenge.id,abtest:r.abtest,pageType:3},t:this.t,items:o,relatedChallengeList:n});return this.service.fetchSEOProps(p).pipe((0,y.w)((t=>(0,d.T)((0,l.of)(this.getActions().setSEOState(t)),this.sharingMeta.setChallengeSharingMeta(t,e,i)))))})))}setMusicSEOProps(e,t,i,o){const{statusCode:n}=e;return-1===n?(0,l.of)(this.noop()):(0,l.of)(e).pipe((0,_.M)(this.state$.pipe((0,v.h)((e=>void 0!==e.abtest)))),(0,y.w)((([a,s])=>{var r;const c=Object.assign(Object.assign(Object.assign({},e),t),{statusCode:n,seoProps:{pageId:null===(r=e.musicInfo)||void 0===r?void 0:r.music.id,pageType:4,abtest:s.abtest},items:o,t:this.t});return this.service.fetchSEOProps(c).pipe((0,y.w)((t=>(0,d.T)((0,l.of)(this.getActions().setSEOState(t)),this.sharingMeta.setMusicSharingMeta(t,e,i)))))})))}setMusicPlaylistSEOProps(e,t,i){var o;const{status_code:n}=e;if(-1===n)return(0,l.of)(this.noop());const a=Object.assign(Object.assign(Object.assign({},e),t),{status_code:n,seoProps:{pageId:null===(o=e.mc_info)||void 0===o?void 0:o.id_str,pageType:17},t:this.t});return this.service.fetchSEOProps(a).pipe((0,u.z)((t=>(0,d.T)((0,l.of)(this.getActions().setSEOState(t)),this.sharingMeta.setMusicPlaylistSharingMeta(t,e,i)))))}setKeywordExpansionSEOProps(e,t,i){return(0,l.of)(e).pipe((0,_.M)(this.state$.pipe((0,v.h)((e=>void 0!==e.abtest)))),(0,y.w)((([o,n])=>{const a=Object.assign(Object.assign(Object.assign({},e),t),{seoProps:{abtest:n.abtest,pageId:"",pageType:104},t:this.t});return this.service.fetchSEOProps(a).pipe((0,y.w)((t=>(0,d.T)((0,l.of)(this.getActions().setSEOState(t)),this.sharingMeta.setKeywordsExpansionSharingMeta(t,e,this.service.getUA(),i)))))})))}setSearchSEOProps(e,t,i){const{status_code:o}=e;if(-1===o)return(0,l.of)(this.noop());const n=Object.assign(Object.assign(Object.assign(Object.assign({},e),t),i),{seoProps:{pageId:"",pageType:105},t:this.t});return this.service.fetchSEOProps(n).pipe((0,h.U)((e=>this.getActions().setSEOState(e))))}setLiveRoomSEOProps(e,t,i){var o;const{userInfo:n,statusCode:a}=e,s=Object.assign(Object.assign(Object.assign({},e),t),{seoProps:{pageId:null!==(o=null==n?void 0:n.user.id)&&void 0!==o?o:"",pageType:12},t:this.t});return-1===a?(0,l.of)(this.noop()):this.service.fetchSEOProps(s).pipe((0,u.z)((t=>(0,d.T)((0,l.of)(this.getActions().setSEOState(t)),this.sharingMeta.setLiveRoomSharingMeta(t,e,i)))))}setFollowingSEOProps(e,t,i){if(-1===e.statusCode)return(0,l.of)(this.noop());const o=Object.assign(Object.assign(Object.assign({},e),t),{seoProps:{pageType:11},t:this.t});return this.service.fetchSEOProps(o).pipe((0,u.z)((e=>(0,d.T)((0,l.of)(this.getActions().setSEOState(e)),this.sharingMeta.setFollowingSharingMeta(e,i)))))}setPoiSEOProps(e,t,i,o){var n,a;const{statusCode:s}=e;if(-1===s)return(0,l.of)(this.noop());const r=Object.assign(Object.assign(Object.assign({},e),t),{statusCode:s,seoProps:{pageId:null===(a=null===(n=e.poiInfo)||void 0===n?void 0:n.poi)||void 0===a?void 0:a.id,pageType:18},items:o,t:this.t});return this.service.fetchSEOProps(r).pipe((0,u.z)((t=>(0,d.T)((0,l.of)(this.getActions().setSEOState(t)),this.sharingMeta.setPoiSharingMeta(t,e,i)))))}setEventDetailSEOProps(e){return e.pipe((0,g.z)((e=>{const{eventTitle:t,eventId:i,subscriberCount:o,language:n="en"}=e,a={seoProps:{pageId:"",pageType:114},t:this.t,eventTitle:t,language:n,eventId:i,subscriberCount:o};return this.service.fetchSEOProps(a).pipe((0,u.z)((e=>(0,l.of)(this.getActions().setSEOState(e),this.terminate()))),(0,m.K)((()=>(0,l.of)(this.noop()))))})))}fetchAbTest(e){return e.pipe((0,y.w)((e=>I(e)===I(this.state.canonical)?c.E:this.service.fetchABTest(e).pipe((0,y.w)((t=>(0,l.of)(this.getActions().setAbTest(t),this.getActions().setCanonical(e),this.terminate()))),(0,b.O)(this.getActions().setLoading(!0)),(0,f.l)(this.getActions().setLoading(!1))))))}getLaunchMode(e){return e.pipe((0,u.z)((()=>(0,l.of)(this.getActions().setLaunchMode(this.service.getLaunchMode()),this.terminate()))))}getTrafficType(e){return e.pipe((0,u.z)((()=>(0,l.of)(this.getActions().setTrafficType(this.service.getTrafficType()),this.terminate()))))}reportImpression(e){return this.service.reportImpression(e)}get stableState$(){return this.state$.pipe((0,v.h)((e=>!e.loading)))}};(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],A.prototype,"setSEOState",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],A.prototype,"setAbTest",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],A.prototype,"setLoading",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,String]),(0,o.__metadata)("design:returntype",void 0)],A.prototype,"setCanonical",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,String]),(0,o.__metadata)("design:returntype",void 0)],A.prototype,"setLaunchMode",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,String]),(0,o.__metadata)("design:returntype",void 0)],A.prototype,"setTrafficType",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],A.prototype,"setDirectoryConfigData",null),(0,o.__decorate)([(0,a.Qm)({payloadGetter:1}),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],A.prototype,"setDirectoryConfig",null),(0,o.__decorate)([(0,a.Qm)({payloadGetter:1}),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],A.prototype,"setFeedSEOProps",null),(0,o.__decorate)([(0,a.Qm)({payloadGetter:1}),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",p.y)],A.prototype,"setGoLiveSEOProps",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",p.y)],A.prototype,"setEventDetailSEOProps",null),(0,o.__decorate)([(0,a.Qm)({payloadGetter:1,skipFirstClientDispatch:!1}),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],A.prototype,"fetchAbTest",null),(0,o.__decorate)([(0,a.Qm)({payloadGetter:1}),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",p.y)],A.prototype,"getLaunchMode",null),(0,o.__decorate)([(0,a.Qm)({payloadGetter:1}),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",p.y)],A.prototype,"getTrafficType",null),A=(0,o.__decorate)([(0,s.Y)("SEO"),(0,o.__param)(2,(0,r.t)(k.s$)),(0,o.__metadata)("design:paramtypes",[L,w.I,Function])],A)},49996:(e,t,i)=>{"use strict";i.d(t,{I:()=>h});var o,n=i(64047),a=i(73566),s=i(48185),r=i(19630),l=i(35167),d=i(54268),c=i.n(d),p=i(82346);!function(e){e.APP_INFO={M_PACKAGE:"com.zhiliaoapp.musically",T_PACKAGE:"com.ss.android.ugc.trill",M_STORE:"835599320",T_STORE:"1235601864",M_NAME:"musical.ly",T_NAME:"TIKTOK",M_FACEBOOK_ID:"597615686992125",T_FACEBOOK_ID:"1862952583919182"},e.TTNOW_INFO={NAME:"TIKTOK.NOW",STORE_ID:"1641062073",PACKAGE:"com.ss.android.ugc.now",FACEBOOK_ID:"1243781563051427"}}(o||(o={}));var u=i(66891),g=i(33642);const m="https://lf16-tiktok-web.ttwstatic.com/obj/tiktok-web-common-sg/mtact/static/images/share_img.png";let h=class extends a.D{constructor(e){super(),this.t=e,this.defaultState={value:{}}}setSharingMetaState(e,t){var i;e.value=c()(t,{"og:image":m,"twitter:image":null!==(i=t["og:image"])&&void 0!==i?i:m})}getBaseConfig(e){const t="m"===e;return{isM:t,protocal:t?"snssdk1233://":"snssdk1180://"}}getBaseMetaParams(e){var t,i,n,a;const{schema:s="",pageType:r,shareMeta:l,metaParams:d,appType:c}=e,p=this.getBaseConfig(c),{isM:u}=p,{APP_INFO:g}=o,m=u?g.M_NAME:g.T_NAME,h=u?g.M_STORE:g.T_STORE,_=u?g.M_PACKAGE:g.T_PACKAGE,v=0===r?null!==(t=null==l?void 0:l.title)&&void 0!==t?t:"":null!==(i=null==d?void 0:d.title)&&void 0!==i?i:"",y=0===r?null!==(n=null==l?void 0:l.desc)&&void 0!==n?n:"":null!==(a=null==d?void 0:d.description)&&void 0!==a?a:"",b={"al:ios:url":s,"al:android:url":s,"al:ios:app_store_id":h,"al:ios:app_name":m,"al:android:app_name":m,"al:android:package":_},f={"og:site_name":"TikTok","og:type":"website","og:title":v,"og:description":y,"fb:app_id":u?g.M_FACEBOOK_ID:g.T_FACEBOOK_ID},x={"twitter:app:id:iphone":h,"twitter:app:id:googleplay":_,"twitter:card":"summary","twitter:site":"TikTok","twitter:title":v,"twitter:description":y};return Object.assign(Object.assign(Object.assign({},b),f),x)}setVideoSharingMeta(e,t,i,o){var n,a,s,r,l,d,c,u,g,m,h,_,v,y;const{protocal:b}=this.getBaseConfig(i),f=this.getBaseMetaParams({schema:`${b}aweme/detail/${null===(n=t.itemInfo)||void 0===n?void 0:n.itemStruct.id}?${o}`,metaParams:e.metaParams,pageType:0,shareMeta:null==t?void 0:t.shareMeta,response:t,appType:i}),x=null===(a=t.itemInfo)||void 0===a?void 0:a.itemStruct.video,k=null===(s=t.itemInfo)||void 0===s?void 0:s.itemStruct.imagePost,w=null!==(u=k?null===(d=null===(l=null===(r=k.shareCover)||void 0===r?void 0:r.imageURL)||void 0===l?void 0:l.urlList)||void 0===d?void 0:d[0]:null===(c=null==x?void 0:x.shareCover)||void 0===c?void 0:c[1])&&void 0!==u?u:"",S=null!==(h=null!==(m=String(null===(g=null==k?void 0:k.shareCover)||void 0===g?void 0:g.imageWidth))&&void 0!==m?m:null==x?void 0:x.width)&&void 0!==h?h:"",C=null!==(y=null!==(v=String(null===(_=null==k?void 0:k.shareCover)||void 0===_?void 0:_.imageHeight))&&void 0!==v?v:null==x?void 0:x.height)&&void 0!==y?y:"",j=Object.assign(Object.assign({},f),{"og:image":w,"twitter:image":w,"og:image:width":S,"og:image:height":C});return(0,p.of)(this.getActions().setSharingMetaState(j))}setUserSharingMeta(e,t,i){var o,n,a,s;const{protocal:r}=this.getBaseConfig(i),l=this.getBaseMetaParams({response:t,pageType:1,schema:`${r}user/profile/`,metaParams:e.metaParams,appType:i}),d=null===(o=t.userInfo)||void 0===o?void 0:o.user,c=null!==(a=null!==(n=null==d?void 0:d.avatarMedium)&&void 0!==n?n:null==d?void 0:d.avatarThumb)&&void 0!==a?a:m,u=Object.assign(Object.assign({},l),{"og:image":c,"twitter:image":c,"og:image:width":"360","og:image:height":"360","og:image:alt":null===(s=e.metaParams)||void 0===s?void 0:s.title});return(0,p.of)(this.getActions().setSharingMetaState(u))}setMusicSharingMeta(e,t,i){var o,n,a,s,r,l;const d=null===(o=t.musicInfo)||void 0===o?void 0:o.music,{protocal:c}=this.getBaseConfig(i),u=this.getBaseMetaParams({response:t,pageType:4,schema:`${c}user/profile/${null==d?void 0:d.id}`,metaParams:e.metaParams,appType:i}),g=null!==(a=null!==(n=null==d?void 0:d.coverMedium)&&void 0!==n?n:null==d?void 0:d.coverThumb)&&void 0!==a?a:"https://lf16-tiktok-web.ttwstatic.com/obj/tiktok-web-common-sg/mtact/static/images/music-default.png",m=null!==(s=null==d?void 0:d.title)&&void 0!==s?s:"",h=null!==(r=null==d?void 0:d.authorName)&&void 0!==r?r:"",_=Object.assign(Object.assign({},u),{"og:image":g,"twitter:image":g,"og:image:width":"720","og:image:height":"720","og:image:alt":null===(l=e.metaParams)||void 0===l?void 0:l.title,"music:duration":"0","music:album:track":m,"music:musician":h});return(0,p.of)(this.getActions().setSharingMetaState(_))}setMusicPlaylistSharingMeta(e,t,i){var o,n,a,s;const r=t.mc_info,{protocal:l}=this.getBaseConfig(i),d=this.getBaseMetaParams({schema:`${l}assmusic/category/${null==r?void 0:r.id_str}?name=${encodeURIComponent(null!==(o=null==r?void 0:r.name)&&void 0!==o?o:"")}&previous_page=reflow_playlist&enter_method=reflow_return`,metaParams:Object.assign(Object.assign({},e.metaParams),{title:null===(n=null==r?void 0:r.share_info)||void 0===n?void 0:n.share_title,description:null===(a=null==r?void 0:r.share_info)||void 0===a?void 0:a.share_desc}),appType:i}),c=(null==r?void 0:r.share_cover)?(0,g.ZT)(null==r?void 0:r.share_cover):"http://p19-aop-sg.ibyteimg.com/tos-alisg-i-yzb763657w-sg/d2f2b037e19646ad5f2bbd779a550302.png~tplv-yzb763657w-resize:800:800.jpeg",u=Object.assign(Object.assign({},d),{"og:image":c,"twitter:image":c,"og:image:width":"720","og:image:height":"720","og:image:alt":null===(s=e.metaParams)||void 0===s?void 0:s.title});return(0,p.of)(this.getActions().setSharingMetaState(u))}setStickerSharingMeta(e,t,i){var o,n,a,s;const{protocal:r}=this.getBaseConfig(i),l=null===(o=t.stickerInfo)||void 0===o?void 0:o.sticker,d=this.getBaseMetaParams({pageType:3,response:t,schema:`${r}sticker/detail/${null==l?void 0:l.id}`,metaParams:e.metaParams,appType:i}),c=null===(a=null===(n=null==l?void 0:l.coverUrls)||void 0===n?void 0:n.urlList)||void 0===a?void 0:a[0],u=Object.assign(Object.assign({},d),{"og:image":c,"twitter:image":c,"og:image:width":"720","og:image:height":"720","og:image:alt":null===(s=e.metaParams)||void 0===s?void 0:s.title});return(0,p.of)(this.getActions().setSharingMetaState(u))}setChallengeSharingMeta(e,t,i){var o,n,a,s;const{protocal:r}=this.getBaseConfig(i),l=null===(o=t.challengeInfo)||void 0===o?void 0:o.challenge,d=this.getBaseMetaParams({pageType:3,response:t,schema:`${r}challenge/detail/${null==l?void 0:l.id}`,metaParams:e.metaParams,appType:i}),c=null!==(a=null!==(n=null==l?void 0:l.profileMedium)&&void 0!==n?n:null==l?void 0:l.profileThumb)&&void 0!==a?a:"https://lf16-tiktok-web.ttwstatic.com/obj/ttfe-malisg/tiktok_web/amp/m-hashtag-default.png",u=Object.assign(Object.assign({},d),{"og:image":c,"twitter:image":c,"og:image:width":"720","og:image:height":"720","og:image:alt":null===(s=e.metaParams)||void 0===s?void 0:s.title});return(0,p.of)(this.getActions().setSharingMetaState(u))}setCollectionSharingMeta(e,t,i){var o,n,a,s,r,l,d;const{protocal:c}=this.getBaseConfig(t),u=e.shareMeta,g=this.getBaseMetaParams({pageType:121,response:e,schema:`${c}collection/detail?collection_id=${i}&page_name=reflow_collection`,metaParams:{title:null!==(o=null==u?void 0:u.title)&&void 0!==o?o:this.t("TikTok | Make Your Day",{},"TikTok | Make Your Day"),description:null!==(n=null==u?void 0:u.desc)&&void 0!==n?n:this.t("SEO_homepage_desc",{},"TikTok - trends start here. On a device or on the web, viewers can watch and discover millions of personalized short videos. Download the app to get started.")},appType:t}),m=null!==(l=null===(r=null===(s=null===(a=null==e?void 0:e.collectionInfo)||void 0===a?void 0:a.cover)||void 0===s?void 0:s.urlList)||void 0===r?void 0:r[0])&&void 0!==l?l:"https://lf16-tiktok-common.ibytedtos.com/obj/tiktok-web-common-sg/mtact/static/images/tiktok-logo/poster-square.png",h=Object.assign(Object.assign({},g),{"og:image":m,"twitter:image":m,"og:image:width":"720","og:image:height":"720","og:image:alt":null===(d=e.shareMeta)||void 0===d?void 0:d.title});return(0,p.of)(this.getActions().setSharingMetaState(h))}setMessageSharingMeta(e,t){var i,o;const{protocal:n}=this.getBaseConfig(t),a=e.shareMeta,s=this.getBaseMetaParams({pageType:13,response:e,schema:`${n}messages/group/`,metaParams:{title:null==a?void 0:a.title,description:null==a?void 0:a.desc},appType:t}),r=null!==(i=null==e?void 0:e.cover)&&void 0!==i?i:"",l=Object.assign(Object.assign({},s),{"og:image":r,"twitter:image":r,"og:image:width":"720","og:image:height":"720","og:image:alt":null===(o=e.shareMeta)||void 0===o?void 0:o.title});return(0,p.of)(this.getActions().setSharingMetaState(l))}setKeywordsExpansionSharingMeta(e,t,i,o){var n,a,s,r,l;const{protocal:d}=this.getBaseConfig(o),c=this.getBaseMetaParams({schema:`${d}user/profile/`,metaParams:e.metaParams,pageType:104,response:{keywordInfo:t},appType:o}),[u="",g="",m=""]=null!==(r=null===(s=null===(a=null===(n=t.itemResponse)||void 0===n?void 0:n.itemList)||void 0===a?void 0:a[0])||void 0===s?void 0:s.video.shareCover)&&void 0!==r?r:[],h=i.includes("WhatsApp")||i.includes("line-poker")?g:m,_=Object.assign(Object.assign({},c),{"og:image":h,"twitter:image":h,"og:image:width":"360","og:image:height":"360","og:image:alt":null===(l=e.metaParams)||void 0===l?void 0:l.title});return(0,p.of)(this.getActions().setSharingMetaState(_))}setSearchSharingMeta(e,t,i,o){var n,a,s,r;const{protocal:l}=this.getBaseConfig(o),d=this.getBaseMetaParams({schema:`${l}search?keyword=${null!==(a=null===(n=null==t?void 0:t.contentInfo)||void 0===n?void 0:n.query)&&void 0!==a?a:i}`,metaParams:e.metaParams,appType:o}),c=null!==(r=null===(s=null==t?void 0:t.contentInfo)||void 0===s?void 0:s.thirdPartyPreviewImg)&&void 0!==r?r:"https://sf16-muse-va.ibytedtos.com/obj/search-static-maliva/maliva/ugvonpsj1631257573250",u=Object.assign(Object.assign({},d),{"og:image":c,"twitter:image":c,"og:image:width":"1200","og:image:height":"678"});return(0,p.of)(this.getActions().setSharingMetaState(u))}setLiveRoomSharingMeta(e,t,i){var o,n,a,s,r,l,d;const{protocal:c}=this.getBaseConfig(i),u=this.getBaseMetaParams({schema:`${c}live?room_id=${null===(n=null===(o=t.userInfo)||void 0===o?void 0:o.user)||void 0===n?void 0:n.roomId}`,metaParams:e.metaParams,pageType:12,appType:i}),g=null===(a=t.userInfo)||void 0===a?void 0:a.user,h=null!==(r=null!==(s=null==g?void 0:g.avatarMedium)&&void 0!==s?s:null==g?void 0:g.avatarThumb)&&void 0!==r?r:m,_=null!==(l=null==g?void 0:g.nickname)&&void 0!==l?l:null==g?void 0:g.uniqueId,v=null==g?void 0:g.uniqueId,y=Object.assign(Object.assign({},u),{"og:image":h,"og:image:secure_url":h,"og:image:width":"360","og:image:height":"360","og:image:alt":null===(d=e.metaParams)||void 0===d?void 0:d.title,"twitter:creator":_,"twitter:creator:id":v});return(0,p.of)(this.getActions().setSharingMetaState(y))}setQuestionSharingMeta(e,t,i,o){var n,a,s,r,l,d,c,p;const{protocal:u}=this.getBaseConfig(i),g=this.getBaseMetaParams({schema:`${u}qna/detail/${null===(n=e.questionInfo)||void 0===n?void 0:n.id}`,metaParams:{title:null===(a=e.shareMeta)||void 0===a?void 0:a.title,description:null===(s=e.shareMeta)||void 0===s?void 0:s.desc},pageType:16,response:e,appType:i}),h="qna"===(null===(r=o)||void 0===r?void 0:r.scene)?{"og:title":this.t("qaoop_title",{},"Hi friends, I’m inviting you to answer a question on #TikTok!"),"og:description":this.t("qaoop_desc",{},"Share your wisdom!")}:void 0,_=null!==(d=null===(l=null==t?void 0:t.video.shareCover)||void 0===l?void 0:l[1])&&void 0!==d?d:m,v=Object.assign(Object.assign(Object.assign({},g),{"og:image":_,"twitter:image":_,"og:image:alt":null!==(p=null===(c=e.shareMeta)||void 0===c?void 0:c.title)&&void 0!==p?p:"the cover of first video"}),h);return this.getActions().setSharingMetaState(v)}setVideoPlaylistSharingMeta(e,t){var i,o,n,a,s,r,l,d;const{protocal:c}=this.getBaseConfig(t),p=`@${null===(o=null===(i=e.mixInfo)||void 0===i?void 0:i.creator)||void 0===o?void 0:o.nickname}`,u=null!==(a=null===(n=e.mixInfo)||void 0===n?void 0:n.name)&&void 0!==a?a:"Untitled playlist",g=this.getBaseMetaParams({schema:`${c}mix/detail?id=${null!==(r=null===(s=e.mixInfo)||void 0===s?void 0:s.id)&&void 0!==r?r:"nan"}`,metaParams:{title:this.t("playlist_share_title",{Playlist_name:u,username:p},`Playlist ${u} created by ${p}`),description:this.t("playlist_share_desc",{},"Enjoy a curated video list and find more videos on TikTok!")},pageType:119,response:e,appType:t}),{videoList:m=[]}=e,[h]=m,_=Object.assign(Object.assign({},g),{"og:image":null===(l=null==h?void 0:h.video.shareCover)||void 0===l?void 0:l[1],"twitter:image":null===(d=null==h?void 0:h.video.shareCover)||void 0===d?void 0:d[1],"og:image:alt":`first video of ${u}`});return this.getActions().setSharingMetaState(_)}setFollowingSharingMeta(e,t){const i=this.getBaseMetaParams({metaParams:e.metaParams,appType:t}),o=Object.assign(Object.assign({},i),{"og:title":this.t("serp_following_title"),"og:description":this.t("serp_following_desc"),"og:image":m,"twitter:image":m,"twitter:title":this.t("SEO_following_title"),"twitter:description":this.t("SEO_following_desc")});return(0,p.of)(this.getActions().setSharingMetaState(o))}setPoiSharingMeta(e,t,i){var o;const{protocal:n}=this.getBaseConfig(i),a=null===(o=t.poiInfo)||void 0===o?void 0:o.poi,s=this.getBaseMetaParams({pageType:18,response:t,schema:`${n}poi/detail?poi_id=${null==a?void 0:a.id}`,metaParams:e.metaParams,appType:i});return(0,p.of)(this.getActions().setSharingMetaState(s))}};(0,n.__decorate)([(0,s.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Object]),(0,n.__metadata)("design:returntype",void 0)],h.prototype,"setSharingMetaState",null),h=(0,n.__decorate)([(0,r.Y)("SharingMeta"),(0,n.__param)(0,(0,l.t)(u.s$)),(0,n.__metadata)("design:paramtypes",[Function])],h)},57317:(e,t,i)=>{"use strict";i.d(t,{ot:()=>a});var o=i(90293),n=i(21041);function a(e,t={}){var i;const{search:a}=(0,n.TH)(),s=t.disableAutoLang?"":null!==(i=(0,o.parse)(a).lang)&&void 0!==i?i:"";if("string"==typeof e){const{url:i,query:n}=(0,o.parseUrl)(e);return(0,o.stringifyUrl)({url:i,query:Object.assign({lang:s},n)},Object.assign({skipEmptyString:!0},t))}const{pathname:r="",search:l={},hash:d}=e,c=d?`#${d}`:"";return`${(0,o.stringifyUrl)({url:r,query:Object.assign({lang:s},l)},Object.assign({skipEmptyString:!0},t))}${c}`}},33111:(e,t,i)=>{"use strict";i.d(t,{v:()=>l});var o=i(64047),n=i(11040),a=i(91051),s=i(73487),r=i(57317);const l=(0,a.memo)((0,a.forwardRef)((function(e,t){var{forceSSR:i=!1,to:l,replace:d,onClick:c,children:p,disableAutoLang:u,disabled:g,ariaLabel:m}=e,h=(0,o.__rest)(e,["forceSSR","to","replace","onClick","children","disableAutoLang","disabled","ariaLabel"]);const _=i,v=(0,r.ot)(l,{disableAutoLang:u}),y=(0,a.useCallback)((e=>{if(g)return e.preventDefault(),void e.stopPropagation();null==c||c(e),_&&d&&(e.preventDefault(),e.stopPropagation(),location.replace(v))}),[g,c,_,d,v]);return _?(0,n.jsx)("a",Object.assign({ref:t,href:v},h,{onClick:y,"aria-label":m},{children:p}),void 0):(0,n.jsx)(s.rU,Object.assign({ref:t,to:v},h,{onClick:y,"aria-label":m},{children:p}),void 0)})))},76126:(e,t,i)=>{"use strict";i.d(t,{C:()=>n});var o=i(90293);function n({to:e,location:{search:t}={search:""}},i={}){var n;const a=null!==(n=(0,o.parse)(t).lang)&&void 0!==n?n:"";if("string"==typeof e){const{url:t,query:n}=(0,o.parseUrl)(e);return(0,o.stringifyUrl)({url:t,query:Object.assign({lang:a},n)},Object.assign({skipEmptyString:!0},i))}const{pathname:s="",search:r={},hash:l}=e,d=l?`#${l}`:"";return`${(0,o.stringifyUrl)({url:s,query:Object.assign({lang:a},r)},Object.assign({skipEmptyString:!0},i))}${d}`}},88683:(e,t,i)=>{"use strict";i.d(t,{pu:()=>d,wB:()=>p,p_:()=>u,RZ:()=>g});var o=i(9236),n=i(91051),a=i(32273),s=i(17133),r=i(17288),l=i(66599);function d(e=""){return(0,o.mp)(l.z,{selector:t=>t.users[e],dependencies:[e]})}const c={[-1]:"Follow",0:"Follow",1:"Following",3:"requested",2:"friends",4:"webapp_unblocked_button1",5:"Follow",6:"Follow"};function p({uniqueId:e,followerStatus:t,prevent:i,onNeedLogin:r,teaParams:d={}}){const p=(0,s.Lh)((()=>["user"]),[]),u=Boolean(null==p?void 0:p.user),[{relation:g,secUid:m},h]=(0,o.b7)(l.z,{selector:t=>{var i,o,n,a;return{relation:null!==(o=null===(i=t.users[e])||void 0===i?void 0:i.relation)&&void 0!==o?o:-1,secUid:null!==(a=null===(n=t.users[e])||void 0===n?void 0:n.secUid)&&void 0!==a?a:""}},dependencies:[e]}),_=(0,n.useCallback)((t=>{if(i&&(t.preventDefault(),t.stopPropagation()),!u)return null==r?void 0:r();4!==g?h.postCommitFollowUser(Object.assign({uniqueId:e},d)):h.blockOrUnblockUser({uniqueId:e,secUid:m,isBlock:!0})}),[h,u,r,i,d,e,m,g]),v=(0,a.Q)()(((e,t)=>{if(1===t){if(e<1)return"Inbox_Follow_back";if(1===e)return c[2]}return c[e]})(g,t));return{isFollowing:1===g||2===g,text:v,handleFollow:_,relation:g}}function u(){var e;const t=(0,o.mp)(r.q,{selector:e=>e.abtest,dependencies:[]}),i=null===(e=null==t?void 0:t.parameters.user_standardize_html_tag)||void 0===e?void 0:e.vid;return"v2"===i||"v3"===i||"v4"===i}function g(){var e;const t=(0,o.mp)(r.q,{selector:e=>e.abtest,dependencies:[]});return"v4"===(null===(e=null==t?void 0:t.parameters.user_standardize_html_tag)||void 0===e?void 0:e.vid)}},66599:(e,t,i)=>{"use strict";i.d(t,{z:()=>N});var o,n,a=i(64047),s=i(73566),r=i(48185),l=i(19630),d=i(35167),c=i(19818),p=i.n(c),u=i(64145),g=i.n(u),m=i(82346),h=i(11348),_=i(50986),v=i(60595),y=i(35435),b=i(93859),f=i(53095),x=i(96033),k=i(20948),w=i(56979),S=i(45784),C=i(10026),j=i(49584),P=i(95872);!function(e){e.Follow="follow",e.Unfollow="unfollow"}(o||(o={})),function(e){e.FollowButton="follow_button",e.Card="card",e.DirectButton="direct_btn",e.SuggestedAccountButton="suggested_account_btn",e.ToolBarButton="toolbar_btn",e.Notice="notice",e.UserProfile="user_profile",e.Follower="follower",e.Following="following",e.SuggestedCard="suggested_card",e.SuggestedList="suggested_list"}(n||(n={}));var T,O=i(55198),L=i(21005),I=i(87930),A=i(66891),E=i(33642),M=i(10410);function R({relation:e,handleIsUnfollow:t,handleIsFollow:i}){switch(e){case 0:case-1:case 4:case 5:case 6:return t();default:return i()}}function F({current:e,targetUser:t}){const i=function(e){var t;return R({relation:null!==(t=e.relation)&&void 0!==t?t:-1,handleIsUnfollow:()=>{var t;return e.privateAccount?1:(null===(t=e.extraInfo)||void 0===t?void 0:t.followed)||6===e.relation?2:0},handleIsFollow:()=>3})}(t);switch(i){case 3:return 0;case 0:return R({relation:e,handleIsFollow:()=>e,handleIsUnfollow:()=>1});case 1:return R({relation:e,handleIsFollow:()=>e,handleIsUnfollow:()=>3});case 2:return R({relation:e,handleIsFollow:()=>e,handleIsUnfollow:()=>2})}}function D(e,t){return 2===e||6===e||5!==e&&t}!function(e){e[e.FollowNormal=0]="FollowNormal",e[e.FollowPrivate=1]="FollowPrivate",e[e.FollowFollower=2]="FollowFollower",e[e.Unfollow=3]="Unfollow"}(T||(T={}));const B=["roomId"],z=["uniqueId","avatarThumb","nickname","signature"];let N=class extends s.D{constructor(e,t){super(),this.service=e,this.t=t,this.defaultState={users:{},stats:{}}}multiSetUser(e,t){const i={};return t.forEach((t=>{i[t.uniqueId]=this.getUpdatedUser(e.users[t.uniqueId],t)})),Object.assign(Object.assign({},e),{users:Object.assign(Object.assign({},e.users),i)})}setUser(e,t){return Object.assign(Object.assign({},e),{users:Object.assign(Object.assign({},e.users),{[t.uniqueId]:this.getUpdatedUser(e.users[t.uniqueId],t,!0)})})}setUserRelation(e,{uniqueId:t,relation:i,shouldUpdateFollowed:o}){var n;const a=e.users[t];a&&(a.relation=i,o&&(a.extraInfo=Object.assign(Object.assign({},a.extraInfo),{followed:D(i,null===(n=a.extraInfo)||void 0===n?void 0:n.followed)})))}setUserStats(e,t){const{uniqueId:i,stats:o}=t;e.stats[i]=this.getUpdatedUserStats(e.stats[i],o)}multiSetUserStats(e,t){t.forEach((({uniqueId:t,stats:i})=>{e.stats[t]=i}))}getUserDetail(e){return e.pipe((0,y.w)((e=>this.service.getUserDetail(e).pipe((0,b.b)((e=>{(0!==e.statusCode&&10222!==e.statusCode||!e.userInfo)&&console.warn("Get user detail failed for getting wrong response")})),(0,f.z)((e=>0!==e.statusCode&&10222!==e.statusCode||!e.userInfo?h.E:(0,m.of)(this.getActions().setUser(Object.assign(Object.assign({},e.userInfo.user),{extraInfo:{statusCode:e.statusCode}})),this.getActions().setUserStats({stats:Object.assign(Object.assign({},e.userInfo.stats),{needFix:!1}),uniqueId:e.userInfo.user.uniqueId})))),(0,L.n)({})))))}postCommitFollowUser(e){return e.pipe((0,x.v)((({uniqueId:e})=>e)),(0,f.z)((e=>e.pipe((0,k.M)(this.state$),(0,w.U)((([e,t])=>{const i=t.users[e.uniqueId],{id:o,secUid:n="",relation:s=-1}=i,r=function(e){return R({relation:e,handleIsUnfollow:()=>1,handleIsFollow:()=>0})}(s),l={type:r,user_id:o,sec_user_id:n,from:18,channel_id:0,from_pre:0},{uniqueId:d,group_id:c,enter_method:p="click_direct_btn",action_position:u}=e;return{query:l,type:r,group_id:c,enter_method:p,action_position:u,restReportParams:(0,a.__rest)(e,["uniqueId","group_id","enter_method","action_position"]),id:o,uniqueId:d,relation:s,targetUser:i}})),(0,S.g)("type"),(0,y.w)((({query:e,group_id:t,enter_method:i,action_position:o,restReportParams:n,id:a,uniqueId:s,relation:r,targetUser:l})=>this.service.postCommitFollowUser(e).pipe((0,b.b)((({status_code:s,follow_status:r})=>{24===s?O.h.open({content:this.t("inbox_follow_failed_banned"),duration:3,widthType:"half"}):-1===s?O.h.open({content:this.t("inbox_follow_failed_noconnection"),duration:3,widthType:"half"}):0!==s?O.h.open({content:this.t("inbox_follow_failed_other"),duration:3,widthType:"half"}):(0,I.k)(s,[24,-1,0]),((e,t)=>{const i=0===t?"unfollow":"follow";P.W.event(i,e)})(Object.assign(Object.assign({},n),{status_code:s,follow_status:r,group_id:t,enter_method:i,action_position:o,to_user_id:a,author_id:a,follow_type:2===r?"mutual":"single",tab_name:null,is_private:4===r?1:0}),e.type)})),(0,w.U)((({follow_status:e,status_code:t})=>0===t?this.getActions().setUserRelation({uniqueId:s,relation:E.Bm[e],shouldUpdateFollowed:!0}):this.getActions().setUserRelation({uniqueId:s,relation:r}))),(0,C.O)(this.getActions().setUserRelation({uniqueId:s,relation:F({current:r,targetUser:l})})),(0,L.n)({}))))))))}blockOrUnblockUser(e){return e.pipe((0,j.z)((({secUid:e,isBlock:t,uniqueId:i})=>this.service.blockUser({sec_user_id:null!=e?e:"",block_type:t?0:1}).pipe((0,b.b)((({status_code:e})=>{0===e&&O.h.open({content:this.t(t?"webapp_mig_unblocked":"webapp_mig_blocked"),duration:3,e2eTag:"block-toast"})})),(0,w.U)((({status_code:e})=>0===e?this.getActions().setUserRelation({uniqueId:i,relation:t?0:4}):this.noop())),(0,L.n)({})))))}getLiveStatus(e){return e.pipe((0,y.w)((()=>(0,_.F)(6e5).pipe((0,k.M)(this.state$),(0,w.U)((([e,{users:t}])=>Object.values(t).filter((e=>Boolean(null==e?void 0:e.roomId))))),(0,f.z)((e=>(0,m.of)(...e.map((e=>this.getActions().getUserDetail({secUid:null==e?void 0:e.secUid}))))))))))}getUpdatedUser(e,t,i){var o,n;if(!e)return t;const a=null!==(o=t.relation)&&void 0!==o?o:e.relation;return g()({},e,t,{extraInfo:{followed:D(a,null===(n=e.extraInfo)||void 0===n?void 0:n.followed)}},((e,t,o)=>!B.includes(o)&&p()(t)||!i&&z.includes(o)?e:"uniqueIdModifyTime"!==o&&"ttSeller"!==o&&"nickNameModifyTime"!==o||t?void 0:e))}getUpdatedUserStats(e,t){return t}};(0,a.__decorate)([(0,r.j)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Array]),(0,a.__metadata)("design:returntype",void 0)],N.prototype,"multiSetUser",null),(0,a.__decorate)([(0,r.j)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Object]),(0,a.__metadata)("design:returntype",void 0)],N.prototype,"setUser",null),(0,a.__decorate)([(0,r.lF)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Object]),(0,a.__metadata)("design:returntype",void 0)],N.prototype,"setUserRelation",null),(0,a.__decorate)([(0,r.lF)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Object]),(0,a.__metadata)("design:returntype",void 0)],N.prototype,"setUserStats",null),(0,a.__decorate)([(0,r.lF)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Array]),(0,a.__metadata)("design:returntype",void 0)],N.prototype,"multiSetUserStats",null),(0,a.__decorate)([(0,r.Qm)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[v.y]),(0,a.__metadata)("design:returntype",void 0)],N.prototype,"getUserDetail",null),(0,a.__decorate)([(0,r.Qm)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[v.y]),(0,a.__metadata)("design:returntype",void 0)],N.prototype,"postCommitFollowUser",null),(0,a.__decorate)([(0,r.Qm)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[v.y]),(0,a.__metadata)("design:returntype",void 0)],N.prototype,"blockOrUnblockUser",null),(0,a.__decorate)([(0,r.Qm)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[v.y]),(0,a.__metadata)("design:returntype",void 0)],N.prototype,"getLiveStatus",null),N=(0,a.__decorate)([(0,l.Y)("UserModule"),(0,a.__param)(1,(0,d.t)(A.s$)),(0,a.__metadata)("design:paramtypes",[M.K,Function])],N)},10410:(e,t,i)=>{"use strict";i.d(t,{K:()=>r});var o=i(64047),n=i(57244),a=i(70526),s=i(48936);let r=class{constructor(e){this.fetch=e}getUserDetail(e){return this.fetch.get("/api/user/detail/",{query:e})}postCommitFollowUser(e){return this.fetch.post("/api/commit/follow/user/",{query:Object.assign(Object.assign({},e),{fromWeb:1}),baseUrlType:2,headers:{[a.eD]:this.fetch.csrfToken}})}blockUser(e){return this.fetch.post("/api/user/block/",{query:Object.assign(Object.assign({},e),{source:3}),baseUrlType:2,headers:{[a.eD]:this.fetch.csrfToken}})}};r=(0,o.__decorate)([(0,n.G)(),(0,o.__metadata)("design:paramtypes",[s.r])],r)},51963:(e,t,i)=>{"use strict";i.d(t,{e:()=>r});var o=i(64047),n=i(73566),a=i(48185),s=i(19630);let r=class extends n.D{constructor(){super(...arguments),this.defaultState={enterForyou:!1}}setEnterForyou(e,t){e.enterForyou=t}};(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],r.prototype,"setEnterForyou",null),r=(0,o.__decorate)([(0,s.Y)("VideoAsForyou")],r)},38554:(e,t,i)=>{"use strict";i.d(t,{P:()=>_});var o=i(64047),n=i(73566),a=i(48185),s=i(19630),r=i(49584),l=i(82346),d=i(56979),c=i(60595),p=i(3148),u=i(57244),g=i(70526),m=i(48936);let h=class{constructor(e){this.fetch=e}postUserSetting(e){return this.fetch.post("/api/user/set/settings/",{query:Object.assign(Object.assign({},e),{tt_csrf_token:this.fetch.csrfToken}),headers:{[g.eD]:this.fetch.csrfToken},baseUrlType:2})}};h=(0,o.__decorate)([(0,u.G)(),(0,o.__metadata)("design:paramtypes",[m.r])],h);let _=class extends n.D{constructor(e){super(),this.service=e,this.defaultState={photoSensitiveVideosSetting:p.F3.getItem("photo_sensitive_video_setting"),hideMaskTempVideoId:"",loginStatePhotoSensitiveVideosSetting:void 0,hasClosedVideoMask:!1}}setSkipPhotoSensitiveAction(e,t){const{skipPhotoSensitiveVideo:i,login:o=!1}=t,n=i?1:2;e.photoSensitiveVideosSetting=n,o&&(e.loginStatePhotoSensitiveVideosSetting=n)}setHideMaskTempVideoId(e,t){e.hideMaskTempVideoId=t}setHasClosedMask(e,t){e.hasClosedVideoMask=t}setPhotoSensitiveVideosSetting(e,t){e.photoSensitiveVideosSetting=t}setLoginStatePhotoSensitiveVideosSetting(e,t){e.loginStatePhotoSensitiveVideosSetting=t}setSkipPhotoSensitive(e){return e.pipe((0,r.z)((({skip:e,hasLogin:t})=>{const i=e?1:2;return p.F3.setItem("photo_sensitive_video_setting",i),t?this.service.postUserSetting({field:"photosensitive_videos_setting",value:i}).pipe((0,d.U)((({status_code:t})=>0===t?this.getActions().setSkipPhotoSensitiveAction({skipPhotoSensitiveVideo:e,login:!0}):this.noop()))):(0,l.of)(this.getActions().setSkipPhotoSensitiveAction({skipPhotoSensitiveVideo:e}))})))}};(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],_.prototype,"setSkipPhotoSensitiveAction",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,String]),(0,o.__metadata)("design:returntype",void 0)],_.prototype,"setHideMaskTempVideoId",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],_.prototype,"setHasClosedMask",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Number]),(0,o.__metadata)("design:returntype",void 0)],_.prototype,"setPhotoSensitiveVideosSetting",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Number]),(0,o.__metadata)("design:returntype",void 0)],_.prototype,"setLoginStatePhotoSensitiveVideosSetting",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[c.y]),(0,o.__metadata)("design:returntype",void 0)],_.prototype,"setSkipPhotoSensitive",null),_=(0,o.__decorate)([(0,s.Y)("VideoMaskModule"),(0,o.__metadata)("design:paramtypes",[h])],_)},25582:(e,t,i)=>{"use strict";i.d(t,{W:()=>s});var o=i(12579),n=i(25615),a=i.n(n);const s={provide:new o.O("FirstVideoCover"),useValue:a()}},33966:(e,t,i)=>{"use strict";i.d(t,{n:()=>U,h:()=>$});var o=i(64047),n=i(73566),a=i(48185),s=i(19630),r=i(35167),l=(i(19805),i(63811)),d=i.n(l),c=i(80390),p=i.n(c),u=i(82346),g=i(11348),m=i(58569),h=i(60595),_=i(68854),v=i(53095),y=i(5549),b=i(49584),f=i(93859),x=i(58755),k=i(20948),w=i(56979),S=i(35435),C=i(10026),j=i(12167),P=i(89232),T=i(11838),O=i(17130),L=i(79789),I=i(55198),A=i(66891),E=i(22069),M=i(24421),R=i(97751),F=i(17288),D=i(38554),B=i(38310),z=i(25582),N=i(78922);const U=Object.freeze({statusCode:0,loading:!0,list:[],browserList:[],hasMore:!0,cursor:"0",preloadList:[]});let W=-1,$=class extends n.D{constructor(e,t,i,o,n,a,s){super(),this.service=e,this.item=t,this.videoQualityReporter=i,this.videoMask=o,this.seoModule=n,this.t=a,this.getFirstVideoCover=s,this.defaultState={},this.createItemListErrorCatcher=e=>t=>t.pipe((0,_.K)((t=>(I.h.destroy(),I.h.open({content:this.t("server_error_title"),duration:3,widthType:"padding"}),null==e||e(t),(0,u.of)({statusCode:-1}))))),this.getBrowserList=({list:e})=>e.reduce(((e,{id:t,showNotPass:i,takeDown:o})=>(i||6===o||e.push(t),e)),[])}resetItemList(e,t){const{key:i,hasMore:o=!0,loading:n=!0,cursor:a="0"}=t;e[i]={list:[],browserList:[],loading:n,statusCode:0,hasMore:o,cursor:a,preloadList:[]}}addItemList(e,t){var i;const{key:o,list:n,statusCode:a=0,hasMore:s,cursor:r,level:l,preloadList:c}=t,u="topic"===o||"messages"===o;e[o]||(e[o]={list:[],browserList:[],loading:!1,statusCode:a,hasMore:Boolean(s),cursor:r,preloadList:[]});const g=e[o].list,m=p()(n,"id").filter((e=>!g.includes(e.id))),h=d()(e[o].list,m.map((({id:e})=>e)));e[o].list=u?g.concat(n.map((({id:e})=>e))):h,e[o].browserList=u?e[o].browserList.concat(this.getBrowserList({list:n})):d()(e[o].browserList,this.getBrowserList({list:m})),e[o].statusCode=a,e[o].hasMore=s,e[o].cursor=r,e[o].level=l,e[o].preloadList=(null!==(i=e[o].preloadList)&&void 0!==i?i:[]).concat(null!=c?c:[])}setItemListById(e,t){const{key:i,list:o,statusCode:n=0,hasMore:a=!0,cursor:s,level:r}=t;e[i]||(e[i]={list:[],browserList:[],loading:!1,statusCode:n,hasMore:Boolean(a),cursor:s,preloadList:[]}),e[i].list=o,e[i].browserList=o,e[i].statusCode=n,e[i].hasMore=a,e[i].cursor=s,e[i].level=r}setLoading(e,t){const{loading:i,key:o}=t;e[o]||(e[o]={list:[],browserList:[],loading:i,statusCode:0,hasMore:!0,cursor:"0"}),e[o].loading=i}setListKeyword(e,t){const{keyword:i,key:o}=t;e[o]||(e[o]={keyword:i,list:[],browserList:[],loading:!1,statusCode:0,hasMore:!0,cursor:"0"}),e[o].keyword=i}getRecommendList(e){return e.pipe((0,v.z)((e=>this.getRecommendList$(e).pipe((0,y.l)(this.terminate())))))}getRecommendList$(e){return(0,u.of)(e).pipe((0,b.z)((({itemId:e,key:t,disableReport:i,routeName:o,abTestVersion:n,language:a,user:s})=>(0,u.of)(null).pipe((0,f.b)((()=>{i||(W=Date.now(),this.videoQualityReporter.videoFeedRequestEvent())})),(0,v.z)((()=>{var t,i;const o=(0,P.s)(a),s=null===(i=null===(t=null==n?void 0:n.parameters)||void 0===t?void 0:t.feed_csr)||void 0===i?void 0:i.vid,r="v2"===s||"v3"===s?"getRecommendListWithPrefetch":"getRecommendList";return this.service[r]({aid:R.CO,count:R.lK,insertedItemID:e,language:o,clientABVersions:null==n?void 0:n.versionName})})),(0,x.V)(R.ES),(0,f.b)((e=>{var t,o;i||this.videoQualityReporter.videoFeedResponseEvent({duration:Date.now()-W,list_length:null!==(o=null===(t=e.itemList)||void 0===t?void 0:t.length)&&void 0!==o?o:0})})),this.createItemListErrorCatcher(),this.handleListData({key:t,abTestVersion:n,language:a,user:s,onResponse:e=>this.searchbotSSROptimize(o,e,a)})))))}getRelatedList(e){return e.pipe((0,v.z)((e=>this.getRelatedList$(e).pipe((0,y.l)(this.terminate())))))}getRelatedList$(e){return(0,u.of)(e).pipe((0,k.M)(this.state$),(0,w.U)((([e,t])=>{var i;return Object.assign(Object.assign({},e),{loading:null===(i=t[e.key])||void 0===i?void 0:i.loading})})),(0,b.z)((({itemId:e="",key:t,disableReport:i,abTestVersion:o,language:n,user:a,loading:s})=>s?g.E:(0,u.of)(null).pipe((0,f.b)((()=>{i||(W=Date.now(),this.videoQualityReporter.videoFeedRequestEvent())})),(0,v.z)((()=>{const t=(0,P.s)(n);return this.service.getRelatedList({aid:R.CO,count:16,itemID:e,language:t})})),(0,x.V)(R.ES),(0,w.U)((e=>Object.assign(Object.assign({},e),{hasMore:!0}))),(0,f.b)((e=>{var t,o;i||this.videoQualityReporter.videoFeedResponseEvent({duration:Date.now()-W,list_length:null!==(o=null===(t=e.itemList)||void 0===t?void 0:t.length)&&void 0!==o?o:0})})),this.createItemListErrorCatcher(),this.handleListData({key:t,abTestVersion:o,language:n,user:a})))))}getTopicList(e){return e.pipe((0,S.w)((({topic:e,abTestVersion:t,user:i,language:o})=>this.service.getTopicList({topic:e,language:o,count:R._T,aid:R.CO}).pipe((0,w.U)((e=>Object.assign(Object.assign({},e),{hasMore:!0}))),this.createItemListErrorCatcher(),this.handleListData({key:"topic",abTestVersion:t,user:i,language:o}),(0,y.l)(this.terminate())))))}getFollowingList(e){return e.pipe((0,k.M)(this.state$),(0,b.z)((([{pullType:e=1,abTestVersion:t,user:i,language:o},n])=>{var a,s;const r=null!==(a=(0,M.xX)(t,"following_red_dot"))&&void 0!==a?a:"v1",{cursor:l="",level:d=1}=null!==(s=n.following)&&void 0!==s?s:{};return this.service.getFollowingList({aid:R.CO,count:R.kg,language:o,cursor:l,pullType:e,level:d,isResetCounterUsed:"v2"===r}).pipe(this.createItemListErrorCatcher(),this.handleListData({key:"following",language:o,user:i,abTestVersion:t}))})))}getMusicList(e){return e.pipe((0,v.z)((e=>this.getMusicList$(e))))}getMusicList$(e){return(0,u.of)(e).pipe((0,k.M)(this.state$),(0,b.z)((([{musicID:e,abTestVersion:t,language:i,user:o},n])=>{var a,s;return this.service.getMusicList({musicID:e,language:i,cursor:null!==(s=null===(a=n.music)||void 0===a?void 0:a.cursor)&&void 0!==s?s:"0",aid:R.CO,count:R.eQ}).pipe(this.createItemListErrorCatcher(),this.handleListData({key:"music",abTestVersion:t,user:o,language:i}))})))}getQuestionList(e){return e.pipe((0,v.z)((e=>this.getQuestionList$(e))))}getQuestionList$(e){return(0,u.of)(e).pipe((0,k.M)(this.state$),(0,b.z)((([{questionID:e,abTestVersion:t,language:i,user:o},n])=>{var a,s;return this.service.getQuestionList({questionID:e,language:i,cursor:null!==(s=null===(a=n.question)||void 0===a?void 0:a.cursor)&&void 0!==s?s:"0",aid:R.CO,count:R.eQ}).pipe(this.createItemListErrorCatcher(),this.handleListData({key:"question",abTestVersion:t,language:i,user:o}))})))}getPlaylistVideoList(e){return e.pipe((0,v.z)((e=>this.getPlaylistVideoList$(e))))}getPlaylistVideoList$(e){return(0,u.of)(e).pipe((0,k.M)(this.state$),(0,b.z)((([{mixId:e,abTestVersion:t,language:i,user:o},n])=>{var a,s;return this.service.getPlaylistVideoList({mixId:e,language:i,cursor:null!==(s=null===(a=n[e])||void 0===a?void 0:a.cursor)&&void 0!==s?s:"0",aid:R.CO,count:R.eQ}).pipe(this.createItemListErrorCatcher(),this.handleListData({key:e,abTestVersion:t,language:i,user:o}))})))}getCollectionList(e){return e.pipe((0,v.z)((e=>this.getCollectionList$(e))))}getCollectionList$(e){return(0,u.of)(e).pipe((0,k.M)(this.state$),(0,b.z)((([{collectionId:e,abTestVersion:t,language:i,user:o},n])=>{var a,s;return this.service.getCollectionList({collectionId:e,language:i,cursor:null!==(s=null===(a=n.collection)||void 0===a?void 0:a.cursor)&&void 0!==s?s:"0",aid:R.CO,count:R.eQ,sourceType:113}).pipe(this.createItemListErrorCatcher(),this.handleListData({key:"collection",abTestVersion:t,language:i,user:o}))})))}getChallengeList(e){return e.pipe((0,v.z)((e=>this.getChallengeList$(e))))}getChallengeList$(e){return(0,u.of)(e).pipe((0,k.M)(this.state$),(0,b.z)((([{challengeID:e,abTestVersion:t,language:i,user:o},n])=>{var a,s;return this.service.getChallengeList({challengeID:e,language:i,cursor:null!==(s=null===(a=n.challenge)||void 0===a?void 0:a.cursor)&&void 0!==s?s:"0",aid:R.CO,count:R.eQ}).pipe(this.createItemListErrorCatcher(),this.handleListData({key:"challenge",abTestVersion:t,language:i,user:o}))})))}getUserVideoList(e){return e.pipe((0,v.z)((e=>this.getUserVideoList$(e))))}getUserVideoList$(e){return(0,u.of)(e).pipe((0,k.M)(this.state$),(0,S.w)((([{secUid:e,key:t,userId:i,abTestVersion:o,language:n,user:a},s])=>{var r,l;const d={secUid:e,aid:R.CO,count:R.jd,cursor:null!==(l=null===(r=s[t])||void 0===r?void 0:r.cursor)&&void 0!==l?l:"0",language:n,userId:i};return("user-post"===t?this.service.getUserPostList(d):this.service.getUserLikedList(d)).pipe(this.createItemListErrorCatcher(),this.handleListData({key:t,abTestVersion:o,language:n,user:a,otherInfo:{secUid:e}}))})))}getUserVideoListByType(e){return e.pipe((0,v.z)((e=>this.getUserVideoListByType$(e))))}getUserVideoListByType$(e){return(0,u.of)(e).pipe((0,k.M)(this.state$),(0,S.w)((([{count:e=R.jd,postItemType:t=2,key:i,abTestVersion:o,language:n,user:a},s])=>{var r,l;const d={appId:R.CO,count:e,cursor:null!==(l=null===(r=s[i])||void 0===r?void 0:r.cursor)&&void 0!==l?l:"0",language:n,postItemType:t};return this.service.getUserPostListByType(d).pipe(this.createItemListErrorCatcher(),this.handleListData({key:i,abTestVersion:o,language:n,user:a,otherInfo:{secUid:null==a?void 0:a.secUid}}))})))}getPoiList(e){return e.pipe((0,v.z)((e=>this.getPoiList$(e))))}getPoiList$(e){return(0,u.of)(e).pipe((0,k.M)(this.state$),(0,b.z)((([{poiId:e,abTestVersion:t,language:i,user:o},n])=>{var a,s;return this.service.getPoiList({poiId:e,language:i,cursor:null!==(s=null===(a=n.poi)||void 0===a?void 0:a.cursor)&&void 0!==s?s:"0",aid:R.CO,count:R.eQ}).pipe(this.createItemListErrorCatcher(),this.handleListData({key:"poi",abTestVersion:t,user:o,language:i}))})))}setDeleteVideo(e,t){for(const i of Object.keys(e)){const o=e[i];if(o){const n=o.list.filter((e=>e!==t));e[i].list=n,e[i].browserList=o.browserList.filter((e=>e!==t))}}}setList(e){return e.pipe((0,k.M)(this.state$,this.videoMask.state$),(0,f.b)((([{key:e,response:t,disableReportMore:i=!1},o])=>{var n,a,s;(null!==(a=null===(n=o[e])||void 0===n?void 0:n.list)&&void 0!==a?a:[]).length&&!i&&O.r.handleListMore({is_success:(null===(s=t.itemList)||void 0===s?void 0:s.length)?1:0,error_code:t.statusCode})})),(0,w.U)((([{key:e,response:t,otherInfo:i,user:o,abTestVersion:n},a,s])=>{var r,l,d;const{itemList:c=[]}=t;return 1!==(null==o?void 0:o.photoSensitiveVideosSetting)&&(o||1!==s.photoSensitiveVideosSetting)||"user-post"===e&&(null==o?void 0:o.secUid)===(null==i?void 0:i.secUid)||!("video"!==e||c.length>1)||(t.itemList=c.filter((e=>4!==(null==e?void 0:e.maskType)))),"v2"===(null===(l=null===(r=null==n?void 0:n.parameters)||void 0===r?void 0:r.photo_test)||void 0===l?void 0:l.vid)||(t.itemList=c.filter((e=>!(null==e?void 0:e.imagePost)))),null===(d=t.itemList)||void 0===d||d.forEach((e=>{(e=>{var t,i,o;if((0,B.e)(e)&&!e.forFriend||e.scheduleTime){const n=e.takeDown?"":e.video.cover,a=null!==(t=e.video.dynamicCover)&&void 0!==t?t:"",s=null!==(o=null===(i=e.imagePost)||void 0===i?void 0:i.images)&&void 0!==o?o:[];if(!/\/node-a\/video\/playsv/.test(n)){const t=(0,E.X)({src:n});e.video.cover=t}if(!/\/node-a\/video\/playsv/.test(a)){const t=(0,E.X)({src:a});e.video.dynamicCover=t}s.forEach((e=>{var t;const i=(null!==(t=e.imageURL.urlList)&&void 0!==t?t:[])[0];if(!/\/node-a\/video\/playsv/.test(i)){const t=(0,E.X)({src:i});e.imageURL.urlList&&(e.imageURL.urlList[0]=t)}})),e.video.zoomCover=void 0}})(e)})),{key:e,response:t}})),(0,f.b)((({key:e,response:t})=>{})),(0,v.z)((({key:e,response:t})=>{const{itemList:i=[],statusCode:o=0,hasMore:n=!1,cursor:a="0",level:s}=t,r=i.map((e=>{var t,i,o,n;return{url:null!==(i=null===(t=e.video)||void 0===t?void 0:t.playAddr)&&void 0!==i?i:"",id:null!==(n=null===(o=e.video)||void 0===o?void 0:o.id)&&void 0!==n?n:""}}));return 0===o||10404===o?(0,u.of)(...this.item.addItems(i),this.getActions().addItemList({key:e,list:i,statusCode:o,hasMore:n,cursor:a,level:s,preloadList:r})):(0,u.of)(this.getActions().addItemList({key:e,list:[],statusCode:o,hasMore:!0,preloadList:r}))})))}handleListData({key:e,abTestVersion:t,language:i,user:o,otherInfo:n,onResponse:a}){return s=>s.pipe((0,x.V)(R.ES),(0,v.z)((s=>{var r;return(0,m.T)((0,u.of)(this.getActions().setList({key:e,response:s,otherInfo:n,abTestVersion:t,language:i,user:o})),null!==(r=null==a?void 0:a(s))&&void 0!==r?r:(0,u.of)(this.noop()))})),(0,C.O)(this.getActions().setLoading({key:e,loading:!0})),(0,y.l)(this.getActions().setLoading({key:e,loading:!1})),(0,j.R)(this.dispose$))}searchbotSSROptimize(e,t,i){return e===T.a8.foryou?this.seoModule.setForyouSEOProps(t,{language:null!=i?i:"en"}):[T.a8.home,T.a8.foryouWithLang].includes(e)?this.seoModule.setHomeSEOProps(null!=i?i:"en"):(0,u.of)(this.noop())}};(0,o.__decorate)([(0,a.cQ)(),(0,o.__metadata)("design:type",h.y)],$.prototype,"dispose$",void 0),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],$.prototype,"resetItemList",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],$.prototype,"addItemList",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],$.prototype,"setItemListById",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],$.prototype,"setLoading",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],$.prototype,"setListKeyword",null),(0,o.__decorate)([(0,a.Qm)({payloadGetter:1,skipFirstClientDispatch:!1}),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[h.y]),(0,o.__metadata)("design:returntype",void 0)],$.prototype,"getRecommendList",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[h.y]),(0,o.__metadata)("design:returntype",void 0)],$.prototype,"getRelatedList",null),(0,o.__decorate)([(0,a.Qm)({payloadGetter:1,skipFirstClientDispatch:!1}),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[h.y]),(0,o.__metadata)("design:returntype",void 0)],$.prototype,"getTopicList",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[h.y]),(0,o.__metadata)("design:returntype",void 0)],$.prototype,"getFollowingList",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[h.y]),(0,o.__metadata)("design:returntype",void 0)],$.prototype,"getMusicList",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[h.y]),(0,o.__metadata)("design:returntype",void 0)],$.prototype,"getQuestionList",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[h.y]),(0,o.__metadata)("design:returntype",void 0)],$.prototype,"getPlaylistVideoList",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[h.y]),(0,o.__metadata)("design:returntype",h.y)],$.prototype,"getCollectionList",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[h.y]),(0,o.__metadata)("design:returntype",void 0)],$.prototype,"getChallengeList",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[h.y]),(0,o.__metadata)("design:returntype",void 0)],$.prototype,"getUserVideoList",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[h.y]),(0,o.__metadata)("design:returntype",void 0)],$.prototype,"getUserVideoListByType",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[h.y]),(0,o.__metadata)("design:returntype",void 0)],$.prototype,"getPoiList",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,String]),(0,o.__metadata)("design:returntype",void 0)],$.prototype,"setDeleteVideo",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[h.y]),(0,o.__metadata)("design:returntype",void 0)],$.prototype,"setList",null),$=(0,o.__decorate)([(0,s.Y)("ItemList"),(0,o.__param)(5,(0,r.t)(A.s$)),(0,o.__param)(6,(0,r.t)(z.W.provide)),(0,o.__metadata)("design:paramtypes",[N.N,B.A,L.k,D.P,F.q,Function,Function])],$)},78922:(e,t,i)=>{"use strict";i.d(t,{N:()=>l});var o=i(64047),n=i(57244),a=i(14716),s=i(48936),r=i(25582);let l=class{constructor(e){this.fetch=e}getCollectionList(e){return this.fetch.get("/api/collection/item_list/",{query:e,baseUrlType:2})}getRecommendList(e){return this.fetch.get("/api/recommend/item_list/",{query:e,baseUrlType:2})}getRecommendListWithPrefetch(e){if(window.__preload_item_list){const e=window.__preload_item_list;return delete window.__preload_item_list,(0,a.D)(e)}return this.getRecommendList(e)}getRelatedList(e){return this.fetch.get("/api/related/item_list/",{query:e,baseUrlType:2})}getTopicList(e){return this.fetch.get("/api/topic/item_list/",{query:e,baseUrlType:2})}getFollowingList(e){return this.fetch.get("/api/following/item_list/",{query:e,baseUrlType:2})}getMusicList(e){return this.fetch.get("/api/music/item_list/",{query:e,baseUrlType:2})}getQuestionList(e){return this.fetch.get("/api/question/item_list/",{query:e,baseUrlType:2})}getPlaylistVideoList(e){return this.fetch.get("/api/mix/item_list/",{query:e,baseUrlType:2})}getChallengeList(e){return this.fetch.get("/api/challenge/item_list/",{query:e,baseUrlType:2})}getUserPostList(e){return this.fetch.get("/api/post/item_list/",{query:e,baseUrlType:2})}getUserPostListByType(e){return this.fetch.get("/api/post/item_list/v1/",{query:e,baseUrlType:2})}getUserLikedList(e){return this.fetch.get("/api/favorite/item_list/",{query:e,baseUrlType:2})}getPoiList(e){return this.fetch.get("/api/poi/item_list/",{query:e,baseUrlType:2})}};l=(0,o.__decorate)([(0,n.G)({providers:[r.W]}),(0,o.__metadata)("design:paramtypes",[s.r])],l)},38310:(e,t,i)=>{"use strict";i.d(t,{A:()=>z,e:()=>B});var o,n=i(64047),a=i(73566),s=i(48185),r=i(19630),l=i(35167),d=i(57001),c=i.n(d),p=i(5238),u=i(11348),g=i(82346),m=i(94328),h=i(60595),_=i(53095),v=i(56979),y=i(96033),b=i(20948),f=i(45784),x=i(35435),k=i(57709),w=i(93859),S=i(10026),C=i(68854),j=i(95872);!function(e){e.Like="like",e.LikeCancel="like_cancel"}(o||(o={}));const P=(e,t)=>{const i=1===t?"like":"like_cancel";j.W.event(i,e)};var T=i(66826),O=i(55198),L=i(21005),I=i(66891),A=i(66599),E=i(57244),M=i(70526),R=i(48936);let F=class{constructor(e){this.fetch=e}postLikeVideo(e){return this.fetch.post("/api/commit/item/digg/",{query:e,baseUrlType:7,headers:{[M.eD]:this.fetch.csrfToken}})}};F=(0,n.__decorate)([(0,E.G)(),(0,n.__metadata)("design:paramtypes",[R.r])],F);var D=i(47416);const B=e=>{const{vl1:t,showNotPass:i}=null!=e?e:{};return Boolean(t&&!i)};let z=class extends a.D{constructor(e,t,i,o){super(),this.service=e,this.browserModeService=t,this.userModule=i,this.t=o,this.defaultState={}}setItem(e,t){var i,o,n,a,s,r,l,d;e[t.id]=Object.assign(Object.assign({},t),{nickname:null===(i=t.author)||void 0===i?void 0:i.nickname,author:null===(o=t.author)||void 0===o?void 0:o.uniqueId,authorId:null===(n=t.author)||void 0===n?void 0:n.id,authorSecId:null===(a=t.author)||void 0===a?void 0:a.secUid,avatarThumb:null===(s=t.author)||void 0===s?void 0:s.avatarThumb,downloadSetting:null===(r=t.author)||void 0===r?void 0:r.downloadSetting,authorPrivate:null===(l=t.author)||void 0===l?void 0:l.privateAccount,stateControlledMedia:null===(d=t.author)||void 0===d?void 0:d.stateControlledMedia})}updateItem(e,t){e[t.id]&&(e[t.id]=c()(e[t.id],t))}multiSetItem(e,t){t.forEach((t=>this.setItem(e,t)))}setLike(e,t){const{id:i,liked:o,count:n}=t,a=e[i];a&&(a.digged=o,a.stats&&(a.stats.diggCount=n))}setCommentCount(e,t){const{id:i,commentCount:o}=t,n=e[i];(null==n?void 0:n.stats)&&(n.stats.commentCount=o)}closeTT4BAdsPopup(e,t){const i=e[t];i&&(i.isTT4BAdsPopupClosed=!0)}reduceOrIncreaseCommentCount(e,t){const{id:i,isReduce:o,min:n=0}=t,a=e[i];if(null==a?void 0:a.stats){const e=o?Math.max(n,a.stats.commentCount-1):a.stats.commentCount+1;a.stats.commentCount=e}}addItems(e){const t=e.filter((e=>Boolean(e.author))).map((({author:e})=>e));return[this.userModule.getActions().multiSetUser(t),this.getActions().multiSetItem(e)]}postClickAds(e){return e.pipe((0,_.z)((e=>{const{language:t,type:i}=e;return this.browserModeService.postAdsAction({biz:1,type:i,language:t}).pipe((0,v.U)((({status_code:e,statusCode:t})=>(0===e&&0===t||console.warn("postClickAds failed"),this.noop()))),(0,L.n)({}))})))}postLikeVideo(e){return e.pipe((0,y.v)((({id:e})=>e)),(0,_.z)((e=>{const t=new p.X(0);return e.pipe((0,b.M)(this.state$,this.userModule.state$,t),(0,_.z)((([e,t,i,o])=>{var a,s,r;const{isTT4BAds:l,language:d,play_mode:c}=e,p=t[e.id],m=i.users[null!==(a=null==p?void 0:p.author)&&void 0!==a?a:""],{digged:h,stats:_,poi:v,imagePost:y}=p,{id:b,forceLike:f,enter_method:x="click",channel_id:k}=e,w=(0,n.__rest)(e,["id","forceLike","enter_method","channel_id"]),S=null!==(s=null==_?void 0:_.diggCount)&&void 0!==s?s:0,C={aweme_id:b,channel_id:k,type:f?1:h?0:1};return f&&h?u.E:(0,g.of)({query:C,enter_method:x,diggCount:S,digged:h,author_id:null!==(r=null==m?void 0:m.id)&&void 0!==r?r:"",group_id:p.id,poi_id:null==v?void 0:v.id,restReportParams:w,changeKey:`${C.type}_${o}`,isTT4BAds:l,language:d,imagePost:y,play_mode:c})})),(0,f.g)("changeKey"),(0,x.w)((({language:e,isTT4BAds:i,play_mode:o,query:n,enter_method:a,diggCount:s,author_id:r,group_id:l,digged:d,poi_id:c,imagePost:p,restReportParams:u})=>{let h=!1;const y=(0,m.H)(3e3).pipe((0,v.U)((()=>this.getActions().setLike({id:l,liked:d,count:s}))),(0,k.x)((()=>{const e=t.getValue();t.next(e+1)}))),b=this.getActions().setLike({id:l,liked:!d,count:d?Math.max(0,s-1):s+1});return i?this.browserModeService.postAdsAction({biz:1,type:d?2:1,language:null!=e?e:"en"}).pipe((0,w.b)((()=>{T.Y.handleAdsClick("like_button",null!=o?o:"one_column")})),(0,_.z)((e=>{const{status_code:t,statusCode:i}=e;return 0!==t||0!==i?y:(0,g.of)(this.noop())})),(0,S.O)(b),(0,L.n)({})):this.service.postLikeVideo(n).pipe((0,C.K)((()=>(0,g.of)({status_code:-1}))),(0,w.b)((({status_code:e,status_msg:t,log_pb:i={}})=>{var o;2150!==e&&2210!==e||t&&O.h.open({content:this.t(t),duration:3,widthType:"half"}),h=!0,P(Object.assign({group_id:l,author_id:r,log_pb:i,enter_method:a,poi_id:c,aweme_type:p?150:0,pic_cnt:null===(o=null==p?void 0:p.images)||void 0===o?void 0:o.length},u),n.type)})),(0,k.x)((()=>{var e;h||P(Object.assign({group_id:l,author_id:r,log_pb:{},enter_method:a,poi_id:c,aweme_type:p?150:0,pic_cnt:null===(e=null==p?void 0:p.images)||void 0===e?void 0:e.length},u),n.type)})),(0,_.z)((e=>{const{status_code:t,is_digg:i}=e;return 0!==t||i===n.type?y:(0,g.of)(this.noop())})),(0,S.O)(b),(0,L.n)({}))})))})))}setItemPrivateState(e,t){const{id:i,visibility:o}=t,n=e[i];if(!n)return e;n.forFriend="3"===o,n.secret="2"===o}setDeleteVideo(e,t){e[t]&&(e[t]=void 0)}};(0,n.__decorate)([(0,s.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Object]),(0,n.__metadata)("design:returntype",void 0)],z.prototype,"setItem",null),(0,n.__decorate)([(0,s.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Object]),(0,n.__metadata)("design:returntype",void 0)],z.prototype,"updateItem",null),(0,n.__decorate)([(0,s.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Array]),(0,n.__metadata)("design:returntype",void 0)],z.prototype,"multiSetItem",null),(0,n.__decorate)([(0,s.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Object]),(0,n.__metadata)("design:returntype",void 0)],z.prototype,"setLike",null),(0,n.__decorate)([(0,s.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Object]),(0,n.__metadata)("design:returntype",void 0)],z.prototype,"setCommentCount",null),(0,n.__decorate)([(0,s.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,String]),(0,n.__metadata)("design:returntype",void 0)],z.prototype,"closeTT4BAdsPopup",null),(0,n.__decorate)([(0,s.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Object]),(0,n.__metadata)("design:returntype",void 0)],z.prototype,"reduceOrIncreaseCommentCount",null),(0,n.__decorate)([(0,s.Qm)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[h.y]),(0,n.__metadata)("design:returntype",void 0)],z.prototype,"postClickAds",null),(0,n.__decorate)([(0,s.Qm)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[h.y]),(0,n.__metadata)("design:returntype",void 0)],z.prototype,"postLikeVideo",null),(0,n.__decorate)([(0,s.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Object]),(0,n.__metadata)("design:returntype",void 0)],z.prototype,"setItemPrivateState",null),(0,n.__decorate)([(0,s.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,String]),(0,n.__metadata)("design:returntype",void 0)],z.prototype,"setDeleteVideo",null),z=(0,n.__decorate)([(0,r.Y)("ItemModule"),(0,n.__param)(3,(0,l.t)(I.s$)),(0,n.__metadata)("design:paramtypes",[F,D.o,A.z,Function])],z)},97115:(e,t,i)=>{"use strict";i.d(t,{$h:()=>o,ih:()=>s,tF:()=>r,k$:()=>l,ci:()=>d});const o="5dc26cf008d511e9b571e1bc0c9e23b5",n={ar:{displayName:"العربية",alias:["ar-ae","ar-bh","ar-dz","ar-eg","ar-iq","ar-jo","ar-kw","ar-lb","ar-ly","ar-ma","ar-om","ar-qa","ar-sa","ar-sy","ar-tn","ar-ye"]},"bn-IN":{displayName:"বাঙ্গালি (ভারত)",alias:["bn","bn-in"]},"ceb-PH":{displayName:"Cebuano (Pilipinas)",alias:["ceb","ceb-ph"]},"cs-CZ":{displayName:"Čeština (Česká republika)",alias:["cs","cs-cz"]},"de-DE":{displayName:"Deutsch",alias:["de","de-at","de-ch","de-de","de-li","de-lu"]},"el-GR":{displayName:"Ελληνικά (Ελλάδα)",alias:["el","el-gr"]},en:{displayName:"English",alias:[]},es:{displayName:"Español",alias:["es-es","es-xl","es-ES"]},"fi-FI":{displayName:"Suomi (Suomi)",alias:["fi","fi-fi"]},"fil-PH":{displayName:"Filipino (Pilipinas)",alias:["fil","tl-ph","tl","fil-ph"]},fr:{displayName:"Français",alias:["fr-be","fr-ca","fr-ch","fr-fr","fr-lu","fr-mc"]},"he-IL":{displayName:"עברית (ישראל)",alias:["he","he-il"]},"hi-IN":{displayName:"हिंदी",alias:["hi","hi-in"]},"hu-HU":{displayName:"Magyar (Magyarország)",alias:["hu","hu-hu"]},"id-ID":{displayName:"Bahasa Indonesia (Indonesia)",alias:["id","id-id","in-id","in"]},"it-IT":{displayName:"Italiano (Italia)",alias:["it","it-ch","it-it"]},"ja-JP":{displayName:"日本語（日本）",alias:["ja","ja-jpan","ja-jp"]},"jv-ID":{displayName:"Basa Jawa (Indonesia)",alias:["jv","jv-jv"]},"km-KH":{displayName:"ខ្មែរ (កម្ពុជា)",alias:["km","km-kh"]},"ko-KR":{displayName:"한국어 (대한민국)",alias:["ko","ko-kr","ko-kore"]},"ms-MY":{displayName:"Bahasa Melayu (Malaysia)",alias:["ms","ms-bn","ms-my"]},"my-MM":{displayName:"မြန်မာ (မြန်မာ)",alias:["my","my","my-mm"]},"nl-NL":{displayName:"Nederlands (Nederland)",alias:["nl","nl-be","nl-nl"]},"pl-PL":{displayName:"Polski (Polska)",alias:["pl","pl-pl"]},"pt-BR":{displayName:"Português (Brasil)",alias:["pt_BR","pt-br","pu","pt","pt-pt"]},"ro-RO":{displayName:"Română (Romania)",alias:["ro","ro-ro"]},"ru-RU":{displayName:"Русский (Россия)",alias:["ru","ru-ru"]},"sv-SE":{displayName:"Svenska (Sverige)",alias:["sv","sv-se"]},"th-TH":{displayName:"ไทย (ไทย)",alias:["th","th-th"]},"tr-TR":{displayName:"Türkçe (Türkiye)",alias:["tr","tr-tr"]},"uk-UA":{displayName:"Українська (Україна)",alias:["uk","uk-ua"]},ur:{displayName:"اردو",alias:[]},"vi-VN":{displayName:"Tiếng Việt (Việt Nam)",alias:["vi","vi-vn"]},"zh-Hans":{displayName:"简体中文",alias:["zh-hans","zh_hans","zh_Hans","zh-cn"]},"zh-Hant-TW":{displayName:"繁體中文",alias:["zh","zh_Hant","zh_TW","zh-tw","zh-hk","zh-Hant","zh-hant-tw"]}},a=Object.entries(n).map((([e,{alias:t}])=>[e,...t])),s=new Map(a.reduce(((e,t)=>{const i=t[0];return t.forEach((t=>{e.push([t,i])})),e}),[])),r=Object.entries(n).map((([e,{displayName:t}])=>({label:t,value:e}))),l="en",d="tiktok_webapp_lang"},21590:(e,t,i)=>{"use strict";i.d(t,{o:()=>o,B:()=>n});const o="https://www.tiktok.com",n="https://sf-tb-sg.ibytedtos.com/obj/eden-sg/uhtyvueh7nulogpoguhm/tiktok-icon2.png"},28188:(e,t,i)=>{"use strict";i.d(t,{Hx:()=>a,Il:()=>s,iz:()=>r});var o=i(11040),n=i(91051);const a="webapp.app-context",s=(0,n.createContext)(null),r=({value:e,children:t})=>(0,o.jsx)(s.Provider,Object.assign({value:e},{children:t}),void 0)},66891:(e,t,i)=>{"use strict";i.d(t,{LX:()=>s,s$:()=>r,lu:()=>l}),i(11040);var o=i(12579),n=i(6126),a=i.n(n);const s=(0,i(91051).createContext)({t:a(),hasLoaded:a(),loadStarling:a(),initialNamespaces:[],lang:""}),r=new o.O("i18n"),l="webapp.i18n-translation"},89232:(e,t,i)=>{"use strict";i.d(t,{s:()=>r,G3:()=>c});var o,n=i(90293),a=i(49435),s=i(97115);!function(e){e.WebApp="Webapp",e.Analytics="MT_Analytics",e.Reflow="MT_Reflow",e.Login="WebApp_Login"}(o||(o={}));const r=(e="")=>e.split("-")[0].replace("zh","zh-Hant")||e||"en";function l(e){const t=e.toLocaleLowerCase();return s.ih.has(t)}function d(e){var t;const i=e.toLocaleLowerCase();return null!==(t=s.ih.get(i))&&void 0!==t?t:s.k$}function c(e){var t;const{pathname:i,query:o}={pathname:window.location.pathname||"",query:(0,n.parse)(window.location.search)},r=(null!=e?e:i).split("/")[1];if(r&&l(r))return d(r);const{lang:c,langCountry:p,language:u}=o;for(const e of[p,c,u])if(e&&l(e))return d(e);const g=(m=s.ci,a.Z.get(m));var m;if(g&&l(g))return d(g);const{userAgent:h,acceptLanguage:_}={userAgent:window.navigator.userAgent||"",acceptLanguage:window.navigator.languages||[]},v=null===(t=h.match(/(ByteFullLocale\/|ByteLocale\/)([\w\-_]+)/))||void 0===t?void 0:t[2];if(v&&l(v))return d(v);for(const e of _)if(e&&l(e))return d(e);return s.k$}},77966:(e,t,i)=>{"use strict";i.d(t,{Pz:()=>a,CN:()=>s,W7:()=>r});const o=/\(i[^;]+;( U;)? CPU.+Mac OS X/,n=/Android|android|Adr/;function a(e){return o.test(e)}function s(e){return n.test(e)}function r(e){return a(e)||s(e)}},22323:(e,t,i)=>{"use strict";i.d(t,{b:()=>Oc});var o=i(11040),n=i(74820),a=i(9236),s=i(16926),r=i(77813),l=i(91051),d=i(21041),c=i(36334),p=i.n(c),u=i(64047),g=i(73566),m=i(48185),h=i(19630);let _=class extends g.D{constructor(){super(...arguments),this.defaultState={loginModalSwitchPath:!1,loginModalFirstOpen:!0}}setLoginModalFirstOpen(e,t){e.loginModalFirstOpen=t}setLoginModalSwitchPath(e,t){e.loginModalSwitchPath=t}setLoginModalInitialState(e){e.loginModalFirstOpen=!0,e.loginModalSwitchPath=!1}};(0,u.__decorate)([(0,m.lF)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[Object,Boolean]),(0,u.__metadata)("design:returntype",void 0)],_.prototype,"setLoginModalFirstOpen",null),(0,u.__decorate)([(0,m.lF)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[Object,Boolean]),(0,u.__metadata)("design:returntype",void 0)],_.prototype,"setLoginModalSwitchPath",null),(0,u.__decorate)([(0,m.lF)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[Object]),(0,u.__metadata)("design:returntype",void 0)],_.prototype,"setLoginModalInitialState",null),_=(0,u.__decorate)([(0,h.Y)("FocusControlModule")],_);var v=i(9343),y=i(32273),b=i(85640),f=i(11838),x=i(30395),k=i(28327),w=i(17133),S=i(58854),C=i(35167),j=i(53095),P=i(56979),T=i(20948),O=i(82346),L=i(10026),I=i(5549),A=i(60595),E=i(66891),M=i(28139),R=i(57244),F=i(72349),D=i.n(F),B=i(68854),z=i(48936);let N=class{constructor(e){this.fetch=e}getComplianceSettings(){return this.fetch.get("/api/compliance/settings/",{query:{aid:1988,fromWeb:1}}).pipe(this.errorHandler)}validateAge(e){return this.fetch.post("https://www.tiktok.com/api/v3/register/verification/age/",{body:D().stringify({fromWeb:1,source:"web",session_registered:1,update_birthdate_type:1,birthday:e,tt_csrf_token:this.fetch.csrfToken})}).pipe(this.errorHandler)}errorHandler(e){return e.pipe((0,B.K)((e=>(0,O.of)(Object.assign({error_code:e.error_code||-1},e)))))}};var U,W;N=(0,u.__decorate)([(0,R.G)(),(0,u.__metadata)("design:paramtypes",[z.r])],N),function(e){e[e.PASS=0]="PASS",e[e.FTC=1]="FTC",e[e.NormalThreshold=2]="NormalThreshold"}(U||(U={})),function(e){e[e.YoungerThan1=3008010]="YoungerThan1",e[e.YoungerThan2=3008012]="YoungerThan2",e[e.YoungerThan3=3008008]="YoungerThan3",e[e.OlderThan123=3008011]="OlderThan123",e[e.Empty=3008009]="Empty"}(W||(W={}));let $=class extends g.D{constructor(e,t,i){super(),this.service=e,this.pnsReport=t,this.t=i,this.defaultState={ageGateAction:2,registerLimited:!1,initial:!1,birthday:"",checkAgeLoading:!1,ageEligible:!1}}setYear(e,t){e.year=t}setMonth(e,t){e.month=t}setDate(e,t){e.date=t}setBirthday(e,t){const{year:i,month:o,date:n}=t,a=`${i}-${o<10?`0${o}`:o}-${n<10?`0${n}`:n}`;a!==e.birthday&&(e.birthday=a,e.ageEligible=!1,e.ageErrorMsg="",e.showAgeConfirm=!1,e.showErrorByToast=!1)}setAgeGateSetting(e,t){e.initial=!0,e.ageGateAction=t.action,e.registerLimited=t.registerLimited}setCheckAgeLoading(e,t){e.checkAgeLoading=t}setAgeCheckResult(e,t){e.ageErrorMsg=t.ageErrorMsg,e.ageEligible=t.ageEligible,e.showErrorByToast=Boolean(t.showErrorByToast),e.errorCode=t.errorCode}setShowAgeConfirm(e,t){e.showAgeConfirm=t}getComplianceSettings(e){return e.pipe((0,j.z)((()=>this.service.getComplianceSettings().pipe((0,P.U)((e=>{if(0===(null==e?void 0:e.status_code)){const{age_gate_info:t={},device_limit_register_expired:i=!0}=e,{register_age_gate_action:o=2}=t;return this.getActions().setAgeGateSetting({registerLimited:!i,action:o})}return this.noop()}))))))}validateAge(e){return e.pipe((0,T.M)(this.state$),(0,j.z)((([{canSkip:e,checkPassCallback:t},{birthday:i,ageEligible:o,ageGateAction:n}])=>e||o||0===n?(null==t||t(),(0,O.of)(this.getActions().setCheckAgeLoading(!1),this.noop())):i?this.service.validateAge(i).pipe((0,P.U)((e=>{const{is_eligible:i,status_code:o,status_msg:n,register_age_gate_post_action:a}=e;if(this.pnsReport.handleAgeGateResponse(i,o),i)return null==t||t(),this.getActions().setAgeCheckResult({ageErrorMsg:"",ageEligible:!0,errorCode:o});if(i||1!==a){const e=[3008010,3008012,3008008,3008011].includes(o);return this.getActions().setAgeCheckResult({ageErrorMsg:n||"Sorry, something went wrong, please try again later",ageEligible:!1,showErrorByToast:e,errorCode:o})}return null==t||t(),this.getActions().setShowAgeConfirm(!0)})),(0,L.O)(this.getActions().setCheckAgeLoading(!0)),(0,I.l)(this.getActions().setCheckAgeLoading(!1))):(0,O.of)(this.getActions().setAgeCheckResult({ageErrorMsg:this.t("birthday_error_invaliddate"),ageEligible:!1,showErrorByToast:!0,errorCode:3008009})))))}};(0,u.__decorate)([(0,m.cQ)(),(0,u.__metadata)("design:type",A.y)],$.prototype,"dispose$",void 0),(0,u.__decorate)([(0,m.lF)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[Object,Object]),(0,u.__metadata)("design:returntype",void 0)],$.prototype,"setYear",null),(0,u.__decorate)([(0,m.lF)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[Object,Object]),(0,u.__metadata)("design:returntype",void 0)],$.prototype,"setMonth",null),(0,u.__decorate)([(0,m.lF)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[Object,Object]),(0,u.__metadata)("design:returntype",void 0)],$.prototype,"setDate",null),(0,u.__decorate)([(0,m.lF)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[Object,Object]),(0,u.__metadata)("design:returntype",void 0)],$.prototype,"setBirthday",null),(0,u.__decorate)([(0,m.lF)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[Object,Object]),(0,u.__metadata)("design:returntype",void 0)],$.prototype,"setAgeGateSetting",null),(0,u.__decorate)([(0,m.lF)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[Object,Boolean]),(0,u.__metadata)("design:returntype",void 0)],$.prototype,"setCheckAgeLoading",null),(0,u.__decorate)([(0,m.lF)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[Object,Object]),(0,u.__metadata)("design:returntype",void 0)],$.prototype,"setAgeCheckResult",null),(0,u.__decorate)([(0,m.lF)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[Object,Boolean]),(0,u.__metadata)("design:returntype",void 0)],$.prototype,"setShowAgeConfirm",null),(0,u.__decorate)([(0,m.Qm)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[A.y]),(0,u.__metadata)("design:returntype",void 0)],$.prototype,"getComplianceSettings",null),(0,u.__decorate)([(0,m.Qm)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[A.y]),(0,u.__metadata)("design:returntype",void 0)],$.prototype,"validateAge",null),$=(0,u.__decorate)([(0,h.Y)("AgeGateModule"),(0,u.__param)(2,(0,C.t)(E.s$)),(0,u.__metadata)("design:paramtypes",[N,M.a,Function])],$);var q=i(18571),H=i(7992),G=i(99116);const Z={"#app":{justifyContent:"center"},"#loginContainer":{display:"flex",alignItems:"center",flexDirection:"column"}},V=e=>({".date-selector .rmc-picker":{height:"250px"},".date-selector .rmc-picker:first-of-type":{position:"absolute",right:e?"unset":0,left:e?"0":"unset",width:"33.3333%"},".date-selector .rmc-picker-indicator":{height:"50px"},".date-selector .rmc-picker-item":{height:"50px",lineHeight:"50px",color:"#161823"},".date-selector":{width:"66%"}});var Q=i(1394),Y=i.n(Q),K=i(35435),J=i(52500),X=i(2844);const ee={1011:"common_login_email_error",1009:"common_login_password_error"},te={1002:"common_registration_phone_input_error",1003:"common_registration_phone_input_error",1054:"common_login_reset_phone_input_error"},ie={1011:"common_login_reset_email_input_error",1202:"common_registration_phone_sms_error"},oe={1039:"login_risk_SMS_1",1091:"passport_uid_banned",1203:"mus_error_code",1054:"common_login_reset_phone_input_error",1051:"common_registration_password_error",1382:"createpw_error_1",8:"login_expired",2027:"login_page_lock",2028:"login_page_lock"},ne={1016:"incorrect_code"},ae=[1203];var se,re;se||(se={}),function(e){e[e.NeedTwoStep=2046]="NeedTwoStep",e[e.NeedForceResetPassword=1381]="NeedForceResetPassword",e[e.TwoStepBlockResetPassword=1356]="TwoStepBlockResetPassword",e[e.TwoStepBlockLogin=1053]="TwoStepBlockLogin",e[e.NeedSignup=1011]="NeedSignup",e[e.AuthorizationError=1045]="AuthorizationError",e[e.ReactiveAccountError=4]="ReactiveAccountError"}(re||(re={}));const le=[1016],de=[1075,1430];var ce=i(86894),pe=i(58161);let ue=class{init(e){this.history=e}push(e,t){var i;null===(i=this.history)||void 0===i||i.push(e,t)}};ue=(0,u.__decorate)([(0,R.G)()],ue);var ge=i(55198);const me=e=>{ge.h.destroy(),ge.h.open({content:e,duration:3,widthType:"half",style:{minWidth:"300px"}})};var he=i(27499);const _e=(e,t,i)=>{switch(e){case 1027:case 3250:return"common_registration_username_error_format";case 3251:return"common_registration_username_error_short";case 3252:return"common_registration_username_error_long";case 3253:return"common_registration_username_error_period";case 3254:return"common_registration_username_error_number";case 1024:case 1028:return"common_registration_username_error_ sensitivity";case 0:return;default:return null!=i?i:t?"common_registration_username_error_occupied":"common_registration_username_error_ sensitivity"}},ve=e=>-1!==[1340,1341].indexOf(e)||-1!==[2020,2025,2032,2033,2031,2046].indexOf(e)||-1!==[1357,1384].indexOf(e);var ye,be=i(49584),fe=i(90293);!function(e){e.Main="webapp",e.TV="tv",e.AgeVerify="ageVerify",e.DataExport="dataExport",e.Seller="seller",e.Rechange="recharge",e.Search="search",e.LoginSearchMore="loginsearchmore",e.DataExportLogin="dataExportLogin",e.TT4DWebView="developer_webview"}(ye||(ye={}));const xe={loginTitle:"common_login_panel_title",loginSlogan:"common_login_panel_copy",signUpTitle:"common_registration_panel_title",signUpSlogan:"common_registration_panel_copy",aid:"1459",disableSignup:!1,isSecurityVerification:!1,hideHomePage:!1},ke={tv:{loginTitle:"tv_login_title",loginSlogan:"tv_login_tiktoktv-desc",signUpTitle:"tv_sign_up_title",signUpSlogan:"tv_login_tiktoktv-desc"},ageVerify:{loginTitle:"age_verify_login_title",loginSlogan:"age_verify_login_intro",disableSignup:!0,isSecurityVerification:!0},dataExport:{loginTitle:"data_export_login_title",loginSlogan:"data_export_login_intro",disableSignup:!0,isSecurityVerification:!0},seller:{aid:"4068"},recharge:{loginTitle:"webapp_coin_recharge_login",signUpTitle:"WebApp_coin_recharge_9"},search:{loginTitle:"login_to_search",signUpTitle:"login_to_search"},loginsearchmore:{loginTitle:"nonloggedinsearch_popup_header_v1",signUpTitle:"nonloggedinsearch_popup_header_v1"},developer_webview:{hideHomePage:!0}};var we,Se,Ce;!function(e){e.AccountNotExist="inexistent",e.InEligible="ineligible",e.TwoStepBlock="twoStepVerifyBlock",e.TwoStepBlockResetPwd="TwoStepBlockResetPwd",e.Null=""}(we||(we={})),function(e){e[e.Login=1]="Login",e[e.Reactive=2]="Reactive"}(Se||(Se={})),function(e){e.Phone="phone",e.Email="email"}(Ce||(Ce={}));let je=class{constructor(e){this.fetch=e}getUrlParams(e){const t=e?e.split("?")[1]:window.location.search;return(0,fe.parse)(t)}getIsPhoenix(){return"www.tiktok.in"===window.location.host}getLoginConfig(){return this.fetch.get("/node-webapp/api/login-config",{baseUrlType:2})}};je=(0,u.__decorate)([(0,R.G)(),(0,u.__metadata)("design:paramtypes",[z.r])],je);let Pe=class{constructor(e){this.service=e,this.getLoginType=e=>{var t;const i=null!==(t=null==e?void 0:e.type)&&void 0!==t?t:null==e?void 0:e.enter_method;if(!i)return"webapp";const o=Array.isArray(i)?i[0]:i;return ke[o]?i:"webapp"},this.getShowAlertMessageType=(e,t)=>{const{message:i}=t;if(!i)return;const o=Array.isArray(i)?i[0]:i;return"ageVerify"!==e||"ineligible"!==o&&"inexistent"!==o?void 0:o}}getLoginContext(e,t=""){var i;const o=this.service.getUrlParams(e),n=this.getLoginType(o),a=this.getShowAlertMessageType(n,o),s=null!==(i=ke[n])&&void 0!==i?i:{},{redirect_url:r="",is_modal:l,hide_close_btn:d,hide_toggle_login_signup:c}=o;return this.service.getLoginConfig().pipe((0,j.z)((e=>{if(0!==e.statusCode)throw new Error("get api error");return(0,O.of)(Object.assign({},e.config))})),(0,B.K)((()=>(0,O.of)({emailSuffixConfig:[],platformConfig:{show_num:3,order:"FACEBOOK,GOOGLE,TWITTER,INSTAGRAM"},disableSignup:!1,forceLogin:!1,emailConsent:!1,phoenix:this.service.getIsPhoenix(),ttpConfig:{open:!0,syncSeverList:[{name:"global",domain:"https://m.tiktok.com"},{name:"ttp",domain:"https://us.tiktok.com"}]}})))).pipe((0,P.U)((e=>Object.assign(Object.assign(Object.assign(Object.assign({},xe),s),{loginType:n,phoenix:this.service.getIsPhoenix(),showAlertMessageType:a,redirectUrl:Array.isArray(r)?r[0]:null!=r?r:"",isModal:"1"===l,hideCloseButton:"1"===d,hideToggleLoginSign:"1"===c,previousModalType:t}),e))))}};Pe=(0,u.__decorate)([(0,R.G)(),(0,u.__metadata)("design:paramtypes",[je])],Pe);let Te=class extends g.D{constructor(e,t){super(),this.service=e,this.modalLogin=t,this.defaultState={initialized:!1,phoenix:!1,platformConfig:{order:""},emailSuffixConfig:[],previousModalType:""}}setContext(e,t){for(const i in t)e[i]=t[i]}setInitialized(e,t){e.initialized=t}setShowAlertMessageType(e,t){e.showAlertMessageType=t}setPreviousModalType(e,t){e.previousModalType=t}init(e){return e.pipe((0,T.M)(this.modalLogin.state$),(0,j.z)((([e,{url:t,loginModalShow:i,modalType:o}])=>this.service.getLoginContext(i?t:void 0).pipe((0,be.z)((e=>(0,O.of)(this.getActions().setContext(e),this.getActions().setPreviousModalType(o),this.getActions().setInitialized(!0)))),(0,I.l)(this.terminate())))))}};(0,u.__decorate)([(0,m.cQ)(),(0,u.__metadata)("design:type",A.y)],Te.prototype,"dispose$",void 0),(0,u.__decorate)([(0,m.lF)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[Object,Object]),(0,u.__metadata)("design:returntype",void 0)],Te.prototype,"setContext",null),(0,u.__decorate)([(0,m.lF)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[Object,Boolean]),(0,u.__metadata)("design:returntype",void 0)],Te.prototype,"setInitialized",null),(0,u.__decorate)([(0,m.lF)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[Object,String]),(0,u.__metadata)("design:returntype",void 0)],Te.prototype,"setShowAlertMessageType",null),(0,u.__decorate)([(0,m.lF)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[Object,String]),(0,u.__metadata)("design:returntype",void 0)],Te.prototype,"setPreviousModalType",null),(0,u.__decorate)([(0,m.Qm)({ssr:!0}),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[A.y]),(0,u.__metadata)("design:returntype",void 0)],Te.prototype,"init",null),Te=(0,u.__decorate)([(0,h.Y)("LoginContextModule"),(0,u.__metadata)("design:paramtypes",[Pe,v.r])],Te);const Oe=[{label:"A",lists:[{name:"Afghanistan",shortname:"AF",code:93,key:"afghanistan"},{name:"Åland Islands",shortname:"AX",code:35818,key:"åland_islands"},{name:"Albania",shortname:"AL",code:355,key:"albania"},{name:"Algeria",shortname:"DZ",code:213,key:"algeria"},{name:"American Samoa",shortname:"AS",code:1684,key:"american_samoa"},{name:"Andorra",shortname:"AD",code:376,key:"andorra"},{name:"Angola",shortname:"AO",code:244,key:"angola"},{name:"Anguilla",shortname:"AI",code:1264,key:"anguilla"},{name:"Antigua & Barbuda",shortname:"AG",code:1268,key:"antigua_and_barbuda"},{name:"Argentina",shortname:"AR",code:54,key:"argentina"},{name:"Armenia",shortname:"AM",code:374,key:"armenia"},{name:"Aruba",shortname:"AW",code:297,key:"aruba"},{name:"Ascension Island",shortname:"SH",code:247,key:"ascension"},{name:"Australia",shortname:"AU",code:61,key:"australia"},{name:"Austria",shortname:"AT",code:43,key:"austria"},{name:"Azerbaijan",shortname:"AZ",code:994,key:"azerbaijan"}]},{label:"B",lists:[{name:"Bahamas",shortname:"BS",code:1242,key:"bahamas"},{name:"Bahrain",shortname:"BH",code:973,key:"bahrain"},{name:"Bangladesh",shortname:"BD",code:880,key:"bangladesh"},{name:"Barbados",shortname:"BB",code:1246,key:"barbados"},{name:"Barbuda",shortname:"AG",code:1268,key:"barbuda"},{name:"Belarus",shortname:"BY",code:375,key:"belarus"},{name:"Belgium",shortname:"BE",code:32,key:"belgium"},{name:"Belize",shortname:"BZ",code:501,key:"belize"},{name:"Benin",shortname:"BJ",code:229,key:"benin"},{name:"Bermuda",shortname:"BM",code:1441,key:"bermuda_island"},{name:"Bhutan",shortname:"BT",code:975,key:"bhutan"},{name:"Bolivia",shortname:"BO",code:591,key:"bolivia"},{name:"Bosnia & Herzegovina",shortname:"BA",code:387,key:"bosnia_and_herzegovina"},{name:"Botswana",shortname:"BW",code:267,key:"botswana"},{name:"Brazil",shortname:"BR",code:55,key:"brazil"},{name:"British Indian Ocean Territory",shortname:"IO",code:246,key:"british_indian_ocean_territory"},{name:"British Virgin Islands",shortname:"VG",code:1284,key:"british_virgin_islands"},{name:"Brunei",shortname:"BN",code:673,key:"brunei"},{name:"Bulgaria",shortname:"BG",code:359,key:"bulgaria"},{name:"Burkina-faso",shortname:"BF",code:226,key:"burkina_faso"},{name:"Burundi",shortname:"BI",code:257,key:"burundi"}]},{label:"C",lists:[{name:"Cameroon",shortname:"CM",code:237,key:"cameroon"},{name:"Canada",shortname:"CA",code:1,key:"canada"},{name:"Cape Verde",shortname:"CV",code:238,key:"cape_verde"},{name:"Caribbean Netherlands",shortname:"BQ",code:5997,key:"caribbean_netherlands"},{name:"Cayman Is.",shortname:"KY",code:1345,key:"cayman_islands"},{name:"Central African Republic",shortname:"CF",code:236,key:"central_african_republic"},{name:"Chad",shortname:"TD",code:235,key:"chad"},{name:"Chile",shortname:"CL",code:56,key:"chile"},{name:"China mainland",shortname:"CN",code:86,key:"china_mainland"},{name:"Christmas Island",shortname:"CX",code:61,key:"christmas_island"},{name:"Cocos (Keeling) Islands",shortname:"CC",code:61,key:"cocos_keeling_islands"},{name:"Colombia",shortname:"CO",code:57,key:"colombia"},{name:"Comoros",shortname:"KM",code:269,key:"comoros"},{name:"Congo - Brazzaville",shortname:"CG",code:242,key:"congo"},{name:"Congo - Kinshasa",shortname:"CD",code:243,key:"congo_kinshasa"},{name:"Cook Is.",shortname:"CK",code:682,key:"cook_islands"},{name:"Costa Rica",shortname:"CR",code:506,key:"costa_rica"},{name:"Croatia",shortname:"HR",code:385,key:"croatia"},{name:"Curaçao",shortname:"CW",code:5999,key:"curaçao"},{name:"Cyprus",shortname:"CY",code:357,key:"cyprus"},{name:"Czechia",shortname:"CZ",code:420,key:"czech_republic"}]},{label:"D",lists:[{name:"Denmark",shortname:"DK",code:45,key:"denmark"},{name:"Diego Garcia",shortname:"DG",code:246,key:"diego_garcia"},{name:"Djibouti",shortname:"DJ",code:253,key:"djibouti"},{name:"Dominica",shortname:"DM",code:1767,key:"dominica"},{name:"Dominican Republic",shortname:"DO",code:1,key:"dominican_republic"}]},{label:"E",lists:[{name:"EI Salvador",shortname:"SV",code:503,key:"el_salvador"},{name:"Ecuador",shortname:"EC",code:593,key:"ecuador"},{name:"Egypt",shortname:"EG",code:20,key:"egypt"},{name:"Equatorial Guinea",shortname:"GQ",code:240,key:"equatorial_guinea"},{name:"Eritrea",shortname:"ER",code:291,key:"eritrea"},{name:"Estonia",shortname:"EE",code:372,key:"estonia"},{name:"Eswatini",shortname:"SZ",code:268,key:"eswatini"},{name:"Ethiopia",shortname:"ET",code:251,key:"ethiopia"}]},{label:"F",lists:[{name:"Falkland Islands",shortname:"FK",code:500,key:"falkland_islands"},{name:"Faroe Islands",shortname:"FO",code:298,key:"faroe_islands"},{name:"Fiji",shortname:"FJ",code:679,key:"fiji"},{name:"Finland",shortname:"FI",code:358,key:"finland"},{name:"France",shortname:"FR",code:33,key:"france"},{name:"French Guiana",shortname:"GF",code:594,key:"french_guiana"},{name:"French Polynesia",shortname:"PF",code:689,key:"french_polynesia"}]},{label:"G",lists:[{name:"Gabon",shortname:"GA",code:241,key:"gabon"},{name:"Gambia",shortname:"GM",code:220,key:"gambia"},{name:"Georgia",shortname:"GE",code:995,key:"georgia"},{name:"Germany",shortname:"DE",code:49,key:"germany"},{name:"Ghana",shortname:"GH",code:233,key:"ghana"},{name:"Gibraltar",shortname:"GI",code:350,key:"gibraltar"},{name:"Greece",shortname:"GR",code:30,key:"greece"},{name:"Greenland",shortname:"GL",code:299,key:"greenland"},{name:"Grenada",shortname:"GD",code:1473,key:"grenada"},{name:"Guadeloupe",shortname:"GP",code:590,key:"guadeloupe"},{name:"Guam",shortname:"GU",code:1671,key:"guam"},{name:"Guatemala",shortname:"GT",code:502,key:"guatemala"},{name:"Guernsey",shortname:"GG",code:44,key:"guernsey"},{name:"Guinea",shortname:"GN",code:224,key:"guinea"},{name:"Guinea-Bissau",shortname:"GW",code:245,key:"guinea_bissau"},{name:"Guyana",shortname:"GY",code:592,key:"guyana"}]},{label:"H",lists:[{name:"Haiti",shortname:"HT",code:509,key:"haiti"},{name:"Honduras",shortname:"HN",code:504,key:"honduras"},{name:"Hongkong",shortname:"HK",code:852,key:"hongkong"},{name:"Hungary",shortname:"HU",code:36,key:"hungary"}]},{label:"I",lists:[{name:"Iceland",shortname:"IS",code:354,key:"iceland"},{name:"India",shortname:"IN",code:91,key:"india"},{name:"Indonesia",shortname:"ID",code:62,key:"indonesia"},{name:"Iraq",shortname:"IQ",code:964,key:"iraq"},{name:"Ireland",shortname:"IE",code:353,key:"ireland"},{name:"Israel",shortname:"IL",code:972,key:"israel"},{name:"Isle of Man",shortname:"IM",code:44,key:"region_isle_of_man"},{name:"Italy",shortname:"IT",code:39,key:"italy"},{name:"Ivory Coast",shortname:"CI",code:225,key:"côte_d_ivoire"}]},{label:"J",lists:[{name:"Jamaica",shortname:"JM",code:1876,key:"jamaica"},{name:"Japan",shortname:"JP",code:81,key:"japan"},{name:"Jersey",shortname:"JE",code:44,key:"jersey"},{name:"Jordan",shortname:"JO",code:962,key:"jordan"}]},{label:"K",lists:[{name:"Kampuchea (Cambodia )",shortname:"KH",code:855,key:"cambodia"},{name:"Kazakhstan",shortname:"KZ",code:76,key:"kazakhstan"},{name:"Kazakhstan",shortname:"KZ",code:77,key:"kazakhstan"},{name:"Kenya",shortname:"KE",code:254,key:"kenya"},{name:"Kiribati",shortname:"KI",code:686,key:"kiribati"},{name:"Korea",shortname:"KR",code:82,key:"south_korea"},{name:"Kosovo",shortname:"XK",code:383,key:"region_kosovo"},{name:"Kuwait",shortname:"KW",code:965,key:"kuwait"},{name:"Kyrgyzstan",shortname:"KG",code:996,key:"kyrgyzstan"}]},{label:"L",lists:[{name:"Laos",shortname:"LA",code:856,key:"laos"},{name:"Latvia",shortname:"LV",code:371,key:"latvia"},{name:"Lebanon",shortname:"LB",code:961,key:"lebanon"},{name:"Lesotho",shortname:"LS",code:266,key:"lesotho"},{name:"Liberia",shortname:"LR",code:231,key:"liberia"},{name:"Libya",shortname:"LY",code:218,key:"libya"},{name:"Liechtenstein",shortname:"LI",code:423,key:"liechtenstein"},{name:"Lithuania",shortname:"LT",code:370,key:"lithuania"},{name:"Luxembourg",shortname:"LU",code:352,key:"luxembourg"}]},{label:"M",lists:[{name:"Macao",shortname:"MO",code:853,key:"macao"},{name:"Madagascar",shortname:"MG",code:261,key:"madagascar"},{name:"Malawi",shortname:"MW",code:265,key:"malawi"},{name:"Malaysia",shortname:"MY",code:60,key:"malaysia"},{name:"Maldives",shortname:"MV",code:960,key:"maldives"},{name:"Mali",shortname:"ML",code:223,key:"mali"},{name:"Malta",shortname:"MT",code:356,key:"malta"},{name:"Marshall Islands",shortname:"MH",code:692,key:"marshall_islands"},{name:"Martinique",shortname:"MQ",code:596,key:"martinique"},{name:"Mauritania",shortname:"MR",code:222,key:"mauritania"},{name:"Mauritius",shortname:"MU",code:230,key:"mauritius"},{name:"Mayotte",shortname:"YT",code:262,key:"mayotte"},{name:"Mexico",shortname:"MX",code:52,key:"mexico"},{name:"Micronesia",shortname:"FM",code:691,key:"micronesia"},{name:"Moldova, Republic of",shortname:"MD",code:373,key:"republic_of_moldova"},{name:"Monaco",shortname:"MC",code:377,key:"monaco"},{name:"Mongolia",shortname:"MN",code:976,key:"mongolia"},{name:"Montenegro",shortname:"ME",code:382,key:"montenegro"},{name:"Montserrat",shortname:"MS",code:1664,key:"montserrat"},{name:"Morocco",shortname:"MA",code:212,key:"morocco"},{name:"Mozambique",shortname:"MZ",code:258,key:"mozambique"},{name:"Myanmar (Burma)",shortname:"MY",code:95,key:"myanmar_burma"}]},{label:"N",lists:[{name:"Namibia",shortname:"NA",code:264,key:"namibia"},{name:"Nauru",shortname:"NR",code:674,key:"nauru"},{name:"Nepal",shortname:"NP",code:977,key:"nepal"},{name:"Netherlands",shortname:"NL",code:31,key:"netherlands"},{name:"New Caledonia",shortname:"NC",code:687,key:"new_caledonia"},{name:"New Zealand",shortname:"NZ",code:64,key:"new_zealand"},{name:"Nicaragua",shortname:"NI",code:505,key:"nicaragua"},{name:"Niger",shortname:"NE",code:227,key:"niger"},{name:"Nigeria",shortname:"NG",code:234,key:"nigeria"},{name:"Niue",shortname:"NU",code:683,key:"niue"},{name:"Norfolk Island",shortname:"NF",code:672,key:"norfolk_island"},{name:"North Macedonia",shortname:"MK",code:389,key:"macedonia"},{name:"Northern Mariana Islands",shortname:"MP",code:1670,key:"northern_mariana_islands"},{name:"Norway",shortname:"NO",code:47,key:"norway"}]},{label:"O",lists:[{name:"Oman",shortname:"OM",code:968,key:"oman"}]},{label:"P",lists:[{name:"Pakistan",shortname:"PK",code:92,key:"pakistan"},{name:"Palau",shortname:"PW",code:680,key:"palau"},{name:"Palestinian Territories",shortname:"PS",code:970,key:"palestinian_territories"},{name:"Panama",shortname:"PA",code:507,key:"panama"},{name:"Papua New Cuinea",shortname:"PG",code:675,key:"papua_new_guinea"},{name:"Paraguay",shortname:"PY",code:595,key:"paraguay"},{name:"Peru",shortname:"PE",code:51,key:"peru"},{name:"Philippines",shortname:"PH",code:63,key:"philippines"},{name:"Pitcairn Islands",shortname:"PN",code:64,key:"pitcairn_islands"},{name:"Poland",shortname:"PL",code:48,key:"poland"},{name:"Portugal",shortname:"PT",code:351,key:"portugal"},{name:"Puerto Rico",shortname:"PR",code:1787,key:"puerto_rico"},{name:"Puerto Rico",shortname:"PR",code:1939,key:"puerto_rico"}]},{label:"Q",lists:[{name:"Qatar",shortname:"QA",code:974,key:"qatar"}]},{label:"R",lists:[{name:"Réunion",shortname:"RE",code:262,key:"reunion"},{name:"Romania",shortname:"RO",code:40,key:"romania"},{name:"Russia",shortname:"RU",code:7,key:"russia"},{name:"Rwanda",shortname:"RW",code:250,key:"rwanda"}]},{label:"S",lists:[{name:"Samoa",shortname:"WS",code:685,key:"samoa"},{name:"San Marino",shortname:"SM",code:378,key:"san_marino"},{name:"Sao Tome and Principe",shortname:"ST",code:239,key:"sao_tome_and_principe"},{name:"Saudi Arabia",shortname:"SA",code:966,key:"saudi_arabia"},{name:"Senegal",shortname:"SN",code:221,key:"senegal"},{name:"Serbia",shortname:"RS",code:381,key:"serbia"},{name:"Seychelles",shortname:"SC",code:248,key:"seychelles"},{name:"Sierra Leone",shortname:"SL",code:232,key:"sierra_leone"},{name:"Singapore",shortname:"SG",code:65,key:"singapore"},{name:"Sint Maarten",shortname:"SX",code:1721,key:"sint_maarten"},{name:"Slovakia",shortname:"SK",code:421,key:"slovakia"},{name:"Slovenia",shortname:"SI",code:386,key:"slovenia"},{name:"Solomon Is",shortname:"SB",code:677,key:"solomon_islands"},{name:"Somali",shortname:"SO",code:252,key:"somalia"},{name:"South Africa",shortname:"ZA",code:27,key:"south_africa"},{name:"So. Georgia & So. Sandwich  Isl.",shortname:"GS",code:500,key:"south_georgia_and_south_sandwich_islands"},{name:"South Sudan",shortname:"SS",code:211,key:"south_sudan"},{name:"Spain",shortname:"ES",code:34,key:"spain"},{name:"Sri Lanka",shortname:"LK",code:94,key:"sri_lanka"},{name:"St. Barthélemy",shortname:"BL",code:590,key:"st_barthélemy"},{name:"St. Helena",shortname:"SH",code:290,key:"st_helena"},{name:"St. Kitts & Nevis",shortname:"KN",code:1869,key:"st_kitts_and_nevis"},{name:"St. Martin",shortname:"MF",code:590,key:"st_martin_france"},{name:"St. Pierre & Miquelon",shortname:"PM",code:508,key:"st_pierre_and_miquelon"},{name:"St.Lucia",shortname:"LC",code:1758,key:"saint_lucia"},{name:"St. Vincent & Grenadines",shortname:"VC",code:1784,key:"st.vincent"},{name:"Sudan",shortname:"SD",code:249,key:"sudan"},{name:"Suriname",shortname:"SR",code:597,key:"suriname"},{name:"Svalbard & Jan Mayen",shortname:"SJ",code:4779,key:"svalbard_and_jan_mayen"},{name:"Sweden",shortname:"SE",code:46,key:"sweden"},{name:"Switzerland",shortname:"CH",code:41,key:"switzerland"}]},{label:"T",lists:[{name:"Taiwan",shortname:"TW",code:886,key:"taiwan"},{name:"Tajikstan",shortname:"TJ",code:992,key:"tajikistan"},{name:"Tanzania",shortname:"TZ",code:255,key:"tanzania"},{name:"Thailand",shortname:"TH",code:66,key:"thailand"},{name:"Timor-Leste",shortname:"TL",code:670,key:"east_timor"},{name:"Togo",shortname:"TG",code:228,key:"togo"},{name:"Tokelau",shortname:"TK",code:690,key:"tokelau"},{name:"Tonga",shortname:"TO",code:676,key:"tonga"},{name:"Trinidad & Tobago",shortname:"TT",code:1868,key:"trinidad_and_tobago"},{name:"Tunisia",shortname:"TN",code:216,key:"tunisia"},{name:"Turkey",shortname:"TR",code:90,key:"turkey"},{name:"Turkmenistan",shortname:"TM",code:993,key:"turkmenistan"},{name:"Turks & Caicos Islands",shortname:"TC",code:1649,key:"turks_and_caicos_islands"},{name:"Tuvalu",shortname:"TV",code:688,key:"tuvalu"}]},{label:"U",lists:[{name:"U.S. Virgin Islands",shortname:"VI",code:1340,key:"u_s_virgin_islands"},{name:"Uganda",shortname:"UG",code:256,key:"uganda"},{name:"Ukraine",shortname:"UA",code:380,key:"ukraine"},{name:"United Arab Emirates",shortname:"AE",code:971,key:"united_arab_emirates"},{name:"United Kingdom",shortname:"UK",code:44,key:"united_kingdom"},{name:"United States",shortname:"US",code:1,key:"united_states"},{name:"Uruguay",shortname:"UY",code:598,key:"uruguay"},{name:"Uzbekistan",shortname:"UZ",code:998,key:"uzbekistan"}]},{label:"V",lists:[{name:"Vanuatu",shortname:"VU",code:678,key:"vanuatu"},{name:"Vatican City",shortname:"VA",code:379,key:"vatican_city"},{name:"Vatican City",shortname:"VA",code:3906698,key:"vatican_city"},{name:"Venezuela",shortname:"VE",code:58,key:"venezuela"},{name:"Vietnam",shortname:"VN",code:84,key:"vietnam"}]},{label:"W",lists:[{name:"Wallis & Futuna",shortname:"WF",code:681,key:"wallis_and_futuna"},{name:"Western Sahara",shortname:"EH",code:212,key:"region_western_sahara"}]},{label:"Y",lists:[{name:"Yemen",shortname:"YE",code:967,key:"yemen"}]},{label:"Z",lists:[{name:"Zambia",shortname:"ZM",code:260,key:"zambia"},{name:"Zimbabwe",shortname:"ZW",code:263,key:"zimbabwe"}]}],Le=e=>/^\w+([\.\-\+]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,8})+$/.test(e);let Ie=class extends g.D{constructor(){super(...arguments),this.defaultState={area:"",phone:"",phoneCode:"",searchText:"",showAreaCodeSelector:!1,mobile:"",mobileOpenId:""}}setShowAreaCodeSelector(e,t){e.showAreaCodeSelector=t}setAreaCode(e,t){const{code:i,area:o}=t;e.areaCode=i,e.area=o,this.setMobileInfo(e,{areaCode:i,phone:e.phone})}setPhoneNumber(e,t){e.phone=t,this.setMobileInfo(e,{areaCode:e.areaCode,phone:t})}setErrorMsg(e,t){e.phoneErrorMsg=t}setAreaSearchText(e,t){if(e.searchText=t,!t)return void(e.matchSearchArea=void 0);const i=RegExp(t.replace("+","\\+"),"ig");e.matchSearchArea=Oe.reduce(((e,{lists:t})=>e.concat(t)),[]).find((({name:e,code:t,shortname:o})=>e.match(i)||`${t}`.match(i)||o.match(i)))}setPhoneCode(e,t){e.phoneCode=t}toggleAreaCodeSelector(e){return e.pipe((0,T.M)(this.state$),(0,j.z)((([,{showAreaCodeSelector:e}])=>(0,O.of)(this.getActions().setShowAreaCodeSelector(!e)))))}selectAreaCode(e){return e.pipe((0,j.z)((({code:e,area:t})=>(0,O.of)(this.getActions().setAreaCode({area:t,code:e}),this.getActions().setShowAreaCodeSelector(!1)))))}checkPhoneNumberFormat(e){return e.pipe((0,j.z)((({phone:e})=>{const t=(e=>e&&/[^\d]+/.test(e))(e);return(0,O.of)(this.getActions().setPhoneNumber(e),this.getActions().setErrorMsg(t?"common_registration_phone_input_error":""))})))}setMobileInfo(e,t){const{phone:i,areaCode:o}=t;if(!i||!o)return e.mobile="",void(e.mobileOpenId="");e.mobile=`+${o} ${i}`,e.mobileOpenId=86===o?i:`+${o}${i}`}};(0,u.__decorate)([(0,m.cQ)(),(0,u.__metadata)("design:type",A.y)],Ie.prototype,"dispose$",void 0),(0,u.__decorate)([(0,m.lF)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[Object,Boolean]),(0,u.__metadata)("design:returntype",void 0)],Ie.prototype,"setShowAreaCodeSelector",null),(0,u.__decorate)([(0,m.lF)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[Object,Object]),(0,u.__metadata)("design:returntype",void 0)],Ie.prototype,"setAreaCode",null),(0,u.__decorate)([(0,m.lF)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[Object,String]),(0,u.__metadata)("design:returntype",void 0)],Ie.prototype,"setPhoneNumber",null),(0,u.__decorate)([(0,m.lF)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[Object,String]),(0,u.__metadata)("design:returntype",void 0)],Ie.prototype,"setErrorMsg",null),(0,u.__decorate)([(0,m.lF)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[Object,String]),(0,u.__metadata)("design:returntype",void 0)],Ie.prototype,"setAreaSearchText",null),(0,u.__decorate)([(0,m.lF)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[Object,String]),(0,u.__metadata)("design:returntype",void 0)],Ie.prototype,"setPhoneCode",null),(0,u.__decorate)([(0,m.Qm)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[A.y]),(0,u.__metadata)("design:returntype",void 0)],Ie.prototype,"toggleAreaCodeSelector",null),(0,u.__decorate)([(0,m.Qm)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[A.y]),(0,u.__metadata)("design:returntype",void 0)],Ie.prototype,"selectAreaCode",null),(0,u.__decorate)([(0,m.Qm)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[A.y]),(0,u.__metadata)("design:returntype",void 0)],Ie.prototype,"checkPhoneNumberFormat",null),Ie=(0,u.__decorate)([(0,h.Y)("PhoneNumberModule")],Ie);let Ae=class extends g.D{constructor(e,t){super(),this.bizContext=e,this.history=t,this.defaultState={}}setErrorCode(e,t){e.errorCode=t}setShowInstagramCantLoginModal(e,t){e.showInstagramRisk=t}setShowRiskModal(e,t){e.showRiskModal=t}handleRiskError(e){return e.pipe((0,T.M)(this.bizContext.state$),(0,j.z)((([{errorCode:e},{bizContext:t}])=>(null==t?void 0:t.isMobile)?(0,O.of)(this.getActions().setShowRiskModal(!0),this.getActions().setErrorCode(e)):(this.history.push(f.gY.loginDownloadApp),(0,O.of)(this.noop())))))}};(0,u.__decorate)([(0,m.cQ)(),(0,u.__metadata)("design:type",A.y)],Ae.prototype,"dispose$",void 0),(0,u.__decorate)([(0,m.lF)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[Object,Number]),(0,u.__metadata)("design:returntype",void 0)],Ae.prototype,"setErrorCode",null),(0,u.__decorate)([(0,m.lF)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[Object,Boolean]),(0,u.__metadata)("design:returntype",void 0)],Ae.prototype,"setShowInstagramCantLoginModal",null),(0,u.__decorate)([(0,m.lF)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[Object,Boolean]),(0,u.__metadata)("design:returntype",void 0)],Ae.prototype,"setShowRiskModal",null),(0,u.__decorate)([(0,m.Qm)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[A.y]),(0,u.__metadata)("design:returntype",void 0)],Ae.prototype,"handleRiskError",null),Ae=(0,u.__decorate)([(0,h.Y)("RiskErrorModule"),(0,u.__metadata)("design:paramtypes",[X.r,ue])],Ae);var Ee,Me,Re=i(93859),Fe=i(95872);!function(e){e.SendSms="send_sms",e.SendMail="send_mail",e.SendSmsResult="monitor_send_sms",e.SendMailResult="monitor_send_email_code"}(Ee||(Ee={})),function(e){e.Click="user_click",e.Resend="resend",e.ForgotPwd="forgot_password",e.TwoStep="2sv",e.ForceReset="force_reset",e.Delete="delete"}(Me||(Me={}));const De=e=>{Fe.W.event("send_sms",e)},Be=e=>{Fe.W.event("send_mail",e)};var ze=i(45949);const Ne=(e,t=!1)=>{const i=(0,ze.St)(`sms_code_count_down${t?"_email":""}_${e}`),o=Number(i)-Date.now();return"number"!=typeof o||o<0?{hasSent:Boolean(i),countDownSecond:0}:{hasSent:Boolean(i),countDownSecond:Math.round(o/1e3)}};let Ue=class extends g.D{constructor(e,t){super(),this.service=e,this.history=t,this.defaultState={}}setEmail(e,t){e.email=t}setEmailErrorMsg(e,t){e.emailErrorMsg=t}setSuggestEmailSuffixConfig(e,t){var i,o;e.email=(null!==(o=null===(i=e.email)||void 0===i?void 0:i.split("@")[0])&&void 0!==o?o:"")+t,e.emailErrorMsg=void 0}setLoading(e,t){e.checkEmailLoading=t}setEmailInfo(e){return e.pipe((0,j.z)((({email:e,valid:t})=>(0,O.of)(this.getActions().setEmail(e),this.getActions().setEmailErrorMsg(t||!e?"":"common_registration_email_input_error")))))}checkEmailRegistered(e){return e.pipe((0,T.M)(this.state$),(0,j.z)((([e,{email:t=""}])=>Le(t)?this.service.checkEmailRegistered({email:t}).pipe((0,P.U)((e=>{const{error_code:t,description:i,is_registered:o}=e;if(t)return this.getActions().setEmailErrorMsg(i);{const e=o?f.gY.loginWithSignedEmail:f.gY.signupEmailCreatePassword;return this.history.push(e),this.noop()}})),(0,L.O)(this.getActions().setLoading(!0)),(0,I.l)(this.getActions().setLoading(!1))):(0,O.of)(this.getActions().setEmailErrorMsg("common_registration_email_input_error")))))}};(0,u.__decorate)([(0,m.cQ)(),(0,u.__metadata)("design:type",A.y)],Ue.prototype,"dispose$",void 0),(0,u.__decorate)([(0,m.lF)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[Object,String]),(0,u.__metadata)("design:returntype",void 0)],Ue.prototype,"setEmail",null),(0,u.__decorate)([(0,m.lF)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[Object,String]),(0,u.__metadata)("design:returntype",void 0)],Ue.prototype,"setEmailErrorMsg",null),(0,u.__decorate)([(0,m.lF)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[Object,String]),(0,u.__metadata)("design:returntype",void 0)],Ue.prototype,"setSuggestEmailSuffixConfig",null),(0,u.__decorate)([(0,m.lF)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[Object,Boolean]),(0,u.__metadata)("design:returntype",void 0)],Ue.prototype,"setLoading",null),(0,u.__decorate)([(0,m.Qm)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[A.y]),(0,u.__metadata)("design:returntype",void 0)],Ue.prototype,"setEmailInfo",null),(0,u.__decorate)([(0,m.Qm)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[A.y]),(0,u.__metadata)("design:returntype",void 0)],Ue.prototype,"checkEmailRegistered",null),Ue=(0,u.__decorate)([(0,h.Y)("EmailModule"),(0,u.__metadata)("design:paramtypes",[ce.Q,ue])],Ue);let We=class extends g.D{constructor(e,t,i,o,n,a,s){super(),this.contextModule=e,this.service=t,this.ageGate=i,this.phone=o,this.email=n,this.history=a,this.riskError=s,this.defaultState={sendCodeLoading:!1,code:""},this.sendReason="user_click",this.isEmail=!1}setCode(e,t){const i=(e=>Boolean(e&&(/[^\d]+/.test(e)||6!==e.length)))(t);e.codeFormatError=i?"common_login_reset_email_verify_title":"",e.code=t}setTicket(e,t){e.ticket=t}setSendCodeLoading(e,t){t&&(e.getCodeErrorMsg=""),e.sendCodeLoading=t}clearGetCodeError(e){e.getCodeErrorMsg="",e.emailRegistered=void 0}setErrorMsg(e,t){const{description:i,emailRegistered:o}=t;e.emailRegistered=o,e.getCodeErrorMsg=i}sendPhoneCodeForVerify(e){return e.pipe((0,Re.b)((({mobile:e})=>this.reportSendCode({reason:"user_click",cacheKey:e}))),(0,j.z)((({mobile:e,nextUrl:t})=>this.service.notLoginSendCode({mobile:e}).pipe(this.sendCodeHandler({cacheKey:e,nextUrl:t})))))}sendPhoneCodeForLogin(e){return e.pipe((0,Re.b)((({mobile:e})=>this.reportSendCode({reason:"user_click",cacheKey:e}))),(0,K.w)((e=>{const{isSignUp:t,mobile:i}=e;return this.ageGate.validateAge((0,O.of)({canSkip:!t})).pipe((0,J.T)(1),(0,j.z)((({payload:t})=>"boolean"==typeof t?(0,O.of)(this.ageGate.getActions().setShowAgeConfirm(t)):(null==t?void 0:t.ageEligible)||null===t?this.service.sendPhoneCode(e).pipe(this.sendCodeHandler({cacheKey:i,agePayload:null!=t?t:void 0,nextUrl:e.nextUrl})):(0,O.of)(this.ageGate.getActions().setAgeCheckResult(t)))),(0,L.O)(this.getActions().setSendCodeLoading(!0)),(0,I.l)(this.getActions().setSendCodeLoading(!1)))})))}sendPhoneCodeForResetPwd(e){return e.pipe((0,Re.b)((({mobile:e,verify_ticket:t})=>{var i;return this.reportSendCode({reason:"forgot_password",cacheKey:null!==(i=null!=e?e:t)&&void 0!==i?i:""})})),(0,Re.b)((()=>De({send_reason:"forgot_password"}))),(0,j.z)((({mobile:e,verify_ticket:t,not_login_ticket:i,nextUrl:o})=>{var n;return this.service.sendPhoneCodeWithType({mobile:e,type:4,method:"GET",verify_ticket:t,not_login_ticket:i}).pipe(this.sendCodeHandler({cacheKey:null!==(n=null!=e?e:t)&&void 0!==n?n:"",nextUrl:o}))})))}sendPhoneCodeForTwoStep(e){return e.pipe((0,Re.b)((e=>this.reportSendCode({reason:"2sv",cacheKey:e.verify_ticket}))),(0,j.z)((({verify_ticket:e,not_login_ticket:t,mobile:i})=>this.service.sendPhoneCodeWithType({verify_ticket:e,not_login_ticket:t,type:t?13:22,method:"GET",mobile:i}).pipe(this.sendCodeHandler({cacheKey:e})))))}sendPhoneCodeForForceResetPwd(e){return e.pipe((0,Re.b)((e=>this.reportSendCode({reason:"force_reset",cacheKey:e.conditional_login_ticket}))),(0,T.M)(this.state$),(0,j.z)((([{conditional_login_ticket:e},{code:t}])=>this.service.sendPhoneCodeForForceResetPwd({code:t,conditional_login_ticket:e}).pipe(this.sendCodeHandler({cacheKey:e})))))}sendEmailCodeForForceResetPwd(e){return e.pipe((0,Re.b)((e=>this.reportSendCode({reason:"force_reset",cacheKey:e.conditional_login_ticket,isEmail:!0}))),(0,T.M)(this.state$),(0,j.z)((([{conditional_login_ticket:e},{code:t}])=>this.service.sendEmailCodeForForceResetPwd({code:t,conditional_login_ticket:e}).pipe(this.sendCodeHandler({email:!0,cacheKey:e})))))}sendEmailCodeForLogin(e){return e.pipe((0,Re.b)((e=>this.reportSendCode({reason:"2sv",cacheKey:`${e.verify_ticket}`,isEmail:!0}))),(0,Re.b)((()=>Be({send_reason:"user_click"}))),(0,j.z)((({email:e,not_login_ticket:t,verify_ticket:i})=>this.service.sendEmailCodeForLogin({email:null!=e?e:"",extra_params:{not_login_ticket:t,verify_ticket:i}}).pipe(this.sendCodeHandler({email:!0,cacheKey:i})))))}sendEmailCodeForVerify(e){return e.pipe((0,Re.b)((e=>this.reportSendCode({reason:"2sv",cacheKey:`${e.verify_ticket}`,isEmail:!0}))),(0,j.z)((e=>this.service.verifySendEmailCode(e).pipe(this.sendCodeHandler({email:!0,cacheKey:`${e.verify_ticket}`})))))}sendEmailCodeForSignup(e){return e.pipe((0,Re.b)((e=>this.reportSendCode({reason:"user_click",cacheKey:`${e.email}`,isEmail:!0}))),(0,j.z)((e=>this.ageGate.validateAge((0,O.of)({canSkip:!1})).pipe((0,J.T)(1),(0,j.z)((({payload:t})=>"boolean"==typeof t?(0,O.of)(this.ageGate.getActions().setShowAgeConfirm(t)):(null==t?void 0:t.ageEligible)||null===t?this.service.sendEmailCodeForSignup(e).pipe((0,Re.b)((e=>{1023===e.error_code&&(e.emailRegistered=!0)})),this.sendCodeHandler({email:!0,agePayload:null!=t?t:void 0,cacheKey:`${e.email}`})):(0,O.of)(this.ageGate.getActions().setAgeCheckResult(t)))),(0,L.O)(this.getActions().setSendCodeLoading(!0)),(0,I.l)(this.getActions().setSendCodeLoading(!1))))))}sendEmailCodeForReset(e){return e.pipe((0,Re.b)((e=>{var t;return this.reportSendCode({reason:"forgot_password",cacheKey:`${null!==(t=e.email)&&void 0!==t?t:e.verify_ticket}`,isEmail:!0})})),(0,j.z)((e=>{var t;return this.service.sendEmailCodeForResetPwd(e).pipe(this.sendCodeHandler({email:!0,cacheKey:`${null!==(t=e.email)&&void 0!==t?t:`${e.verify_ticket}`}`,nextUrl:e.nextUrl}))})))}reportSendCode(e){const{cacheKey:t,reason:i,isEmail:o}=e;this.sendReason=i,this.isEmail=Boolean(o);const{hasSent:n}=Ne(t);o?Be({is_retry:n,send_reason:i}):De({is_retry:n,send_reason:i})}reportSendCodeResult(e){const{error_code:t,"x-tt-logid":i,message:o,description:n}=e,a={status:t?1:0,error_code:t,error_desc:o||n,type:this.sendReason,logid:i};var s;this.isEmail?(s=a,Fe.W.event("monitor_send_email_code",s)):(e=>{Fe.W.event("monitor_send_sms",e)})(a)}sendCodeHandler({cacheKey:e,agePayload:t,email:i,nextUrl:o}){return n=>n.pipe((0,Re.b)((e=>this.reportSendCodeResult(e))),(0,j.z)((n=>{var a;const{retry_time:s=60,emailRegistered:r,ticket:l,error_code:d}=n;return d||(((e,t,i)=>{(0,ze.D9)(`sms_code_count_down${i?"_email":""}_${e}`,`${Date.now()+1e3*t}`)})(e,s,i),o&&this.history.push(o)),ve(d)?(0,O.of)(this.riskError.getActions().handleRiskError({errorCode:d})):1356===d?(0,O.of)(this.contextModule.getActions().setShowAlertMessageType("TwoStepBlockResetPwd")):l?(0,O.of)(this.getActions().setTicket(l)):te[d]?(0,O.of)(this.phone.getActions().setErrorMsg(te[d]),t?this.ageGate.getActions().setAgeCheckResult(t):this.noop()):ie[d]?(0,O.of)(this.email.getActions().setEmailErrorMsg(ie[d]),t?this.ageGate.getActions().setAgeCheckResult(t):this.noop()):(0,O.of)(this.getActions().setErrorMsg({description:r||!d?"":null!==(a=n.description)&&void 0!==a?a:"Sorry, something went wrong, please try again later",emailRegistered:r}),t?this.ageGate.getActions().setAgeCheckResult(t):this.noop())})),(0,L.O)(this.getActions().setSendCodeLoading(!0)),(0,I.l)(this.getActions().setSendCodeLoading(!1)))}};(0,u.__decorate)([(0,m.cQ)(),(0,u.__metadata)("design:type",A.y)],We.prototype,"dispose$",void 0),(0,u.__decorate)([(0,m.lF)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[Object,String]),(0,u.__metadata)("design:returntype",void 0)],We.prototype,"setCode",null),(0,u.__decorate)([(0,m.lF)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[Object,String]),(0,u.__metadata)("design:returntype",void 0)],We.prototype,"setTicket",null),(0,u.__decorate)([(0,m.lF)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[Object,Boolean]),(0,u.__metadata)("design:returntype",void 0)],We.prototype,"setSendCodeLoading",null),(0,u.__decorate)([(0,m.lF)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[Object]),(0,u.__metadata)("design:returntype",void 0)],We.prototype,"clearGetCodeError",null),(0,u.__decorate)([(0,m.lF)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[Object,Object]),(0,u.__metadata)("design:returntype",void 0)],We.prototype,"setErrorMsg",null),(0,u.__decorate)([(0,m.Qm)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[A.y]),(0,u.__metadata)("design:returntype",void 0)],We.prototype,"sendPhoneCodeForVerify",null),(0,u.__decorate)([(0,m.Qm)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[A.y]),(0,u.__metadata)("design:returntype",void 0)],We.prototype,"sendPhoneCodeForLogin",null),(0,u.__decorate)([(0,m.Qm)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[A.y]),(0,u.__metadata)("design:returntype",void 0)],We.prototype,"sendPhoneCodeForResetPwd",null),(0,u.__decorate)([(0,m.Qm)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[A.y]),(0,u.__metadata)("design:returntype",void 0)],We.prototype,"sendPhoneCodeForTwoStep",null),(0,u.__decorate)([(0,m.Qm)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[A.y]),(0,u.__metadata)("design:returntype",void 0)],We.prototype,"sendPhoneCodeForForceResetPwd",null),(0,u.__decorate)([(0,m.Qm)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[A.y]),(0,u.__metadata)("design:returntype",void 0)],We.prototype,"sendEmailCodeForForceResetPwd",null),(0,u.__decorate)([(0,m.Qm)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[A.y]),(0,u.__metadata)("design:returntype",void 0)],We.prototype,"sendEmailCodeForLogin",null),(0,u.__decorate)([(0,m.Qm)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[A.y]),(0,u.__metadata)("design:returntype",void 0)],We.prototype,"sendEmailCodeForVerify",null),(0,u.__decorate)([(0,m.Qm)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[A.y]),(0,u.__metadata)("design:returntype",void 0)],We.prototype,"sendEmailCodeForSignup",null),(0,u.__decorate)([(0,m.Qm)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[A.y]),(0,u.__metadata)("design:returntype",void 0)],We.prototype,"sendEmailCodeForReset",null),We=(0,u.__decorate)([(0,h.Y)("SendCode"),(0,u.__metadata)("design:paramtypes",[Te,ce.Q,$,Ie,Ue,ue,Ae])],We);var $e=i(15608),qe=i(87837),He=i(11467);let Ge=class{constructor(e){this.service=e,this.defaultMetrics={count:1},this.handleSyncKrPolicyApprove=e=>{this.service.emitEvent("SyncKrPolicyApprove",this.defaultMetrics,e)}}};Ge=(0,u.__decorate)([(0,R.G)(),(0,u.__metadata)("design:paramtypes",[He.n])],Ge);var Ze=i(99835);let Ve=class extends g.D{constructor(e,t,i){super(),this.pnsSlardar=e,this.pnsReport=t,this.service=i,this.defaultState={krPolicySelection:[],termsDomContent:"",privacyDomContent:""}}setKrPolicySelection(e,t){e.krPolicySelection=t}setTermsDomContent(e,t){e.termsDomContent=t}setPrivacyDomContent(e,t){e.privacyDomContent=t}requestPolicyContent(e){return e.pipe((0,j.z)((({articleKeys:e,lang:t})=>(0,$e.D)(e.map((e=>this.service.getPolicyContent({lang:t,project_key:"legal",article_key:e}))))))).pipe((0,j.z)((e=>(0,O.of)(this.getActions().setTermsDomContent(e[0].body.article_content),this.getActions().setPrivacyDomContent(e[1].body.article_content)))))}syncKrPolicyApprove(e){const{krPolicySelection:t}=this.state;if("KR"!==e||!t.length)return(0,O.of)(null);const i=-1!==t.indexOf("push-policy");return this.pnsReport.handlePolicyConfirmOnFYP({trending:i?"on":"off"}),this.service.setUniversalPopOperation({business:"kr_consent_market_message",policy_version:"v20200629",style:"bottom",operation:-1!==t.indexOf("push-policy")?"2":"1",aid:1988}).pipe((0,P.U)((({status_code:e})=>{if(this.pnsSlardar.handleSyncKrPolicyApprove({error_code:`${e}`}),0!==e)throw new Error(`sync kr policy error, error_code: ${e}`);return(0,O.of)(null)})),(0,B.K)((e=>(console.error(e),(0,O.of)({status_code:-1})))),(0,qe.X)(1))}};(0,u.__decorate)([(0,m.cQ)(),(0,u.__metadata)("design:type",A.y)],Ve.prototype,"dispose$",void 0),(0,u.__decorate)([(0,m.lF)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[Object,Array]),(0,u.__metadata)("design:returntype",void 0)],Ve.prototype,"setKrPolicySelection",null),(0,u.__decorate)([(0,m.lF)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[Object,String]),(0,u.__metadata)("design:returntype",void 0)],Ve.prototype,"setTermsDomContent",null),(0,u.__decorate)([(0,m.lF)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[Object,String]),(0,u.__metadata)("design:returntype",void 0)],Ve.prototype,"setPrivacyDomContent",null),(0,u.__decorate)([(0,m.Qm)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[A.y]),(0,u.__metadata)("design:returntype",void 0)],Ve.prototype,"requestPolicyContent",null),Ve=(0,u.__decorate)([(0,h.Y)("PolicyModule"),(0,u.__metadata)("design:paramtypes",[Ge,M.a,Ze.Q])],Ve);var Qe=i(55017);let Ye=class extends g.D{constructor(e,t,i){super(),this.fetch=e,this.complianceService=t,this.t=i,this.defaultState={isRegisterWithPrivateOn:!1}}setIsRegisterWithPrivateOn(e,t){e.isRegisterWithPrivateOn=t}handlePrivateConfirm(e){return e.pipe((0,be.z)((()=>this.complianceService.postPrivateBannerAck())),(0,P.U)((()=>this.getActions().setIsRegisterWithPrivateOn(!1))),(0,B.K)((e=>(console.error(e),ge.h.open({content:this.t("Sorry, something went wrong, please try again later"),duration:2e3}),(0,O.of)(this.noop())))))}getIsRegisterPrivateAccount(){return this.fetch.get("/api/user/detail/self/",{query:{tt_csrf_token:this.fetch.csrfToken}}).pipe((0,P.U)((({statusCode:e,userInfo:t})=>{var i,o;if(0!==e&&10222!==e)throw new Error(`getIsRegisterPrivateAccount error, error_code ${e}`);return null!==(o=null===(i=null==t?void 0:t.user)||void 0===i?void 0:i.showPrivateBanner)&&void 0!==o&&o})),(0,B.K)((e=>(console.error(e),(0,O.of)(!1)))),(0,qe.X)(1))}};var Ke;(0,u.__decorate)([(0,m.cQ)(),(0,u.__metadata)("design:type",A.y)],Ye.prototype,"dispose$",void 0),(0,u.__decorate)([(0,m.lF)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[Object,Boolean]),(0,u.__metadata)("design:returntype",void 0)],Ye.prototype,"setIsRegisterWithPrivateOn",null),(0,u.__decorate)([(0,m.Qm)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[A.y]),(0,u.__metadata)("design:returntype",void 0)],Ye.prototype,"handlePrivateConfirm",null),Ye=(0,u.__decorate)([(0,h.Y)("RegisterPrivateAccount"),(0,u.__param)(2,(0,C.t)(E.s$)),(0,u.__metadata)("design:paramtypes",[z.r,Qe.n,Function])],Ye),function(e){e.ShowConsentCheckBox="show_button_consent_check_box",e.ClickConsentCheckBox="click_button_consent_check_box",e.RegisterClick="register_click_next"}(Ke||(Ke={}));var Je=i(53884),Xe=i(745),et=i.n(Xe);let tt=class{constructor(e){this.fetch=e}validateUsername(e){return this.fetch.get("https://www.tiktok.com/api/uniqueid/check/",{query:{unique_id:e,fromWeb:1,aid:1988}}).pipe(this.errorHandler)}validateFTCUsername(e){return this.fetch.get("https://www.tiktok.com/api/register/check/login/name/",{query:{login_name:e}}).pipe(this.errorHandler)}syncEmailConsentInfo(){return this.fetch.post("https://www.tiktok.com/api/privacy/agreement/record/agree/v1",{body:et().stringify({record_name:"email_consent",tt_csrf_token:this.fetch.csrfToken||"IQodDvCCo34LIXpe5ArEKd-S"})})}errorHandler(e){return e.pipe((0,B.K)((e=>(0,O.of)(Object.assign({error_code:e.error_code||-1},e)))))}};var it;tt=(0,u.__decorate)([(0,R.G)(),(0,u.__metadata)("design:paramtypes",[z.r])],tt),function(e){e.Third="Third",e.Phone="Phone"}(it||(it={}));let ot=class extends g.D{constructor(e,t,i,o,n,a,s,r,l,d){super(),this.service=e,this.policy=t,this.registerPrivateAccount=i,this.ageGate=o,this.accountService=n,this.loginReport=a,this.t=s,this.regionService=r,this.history=l,this.riskError=d,this.defaultState={username:"",signupLoading:!1}}setSuccess(e){e.success=!0}setEmailConsent(e,t){e.emailConsent=t}setErrorMsg(e,t){e.errorMsg=t}setLoading(e,t){e.signupLoading=t}setCheckNameLoading(e,t){e.checkNameLoading=t}setUsername(e,t){e.username=t}setUsernameInfo(e,t){e.usernameInfo=t}setFromNotRegisterLogin(e,t){e.fromNotRegisterLogin=t}cacheSmsCodeKey(e,t){e.phoneNotRegistered=t,e.fromNotRegisterLogin="Phone"}cacheThirdNotRegistered(e,t){e.thirdPlatformNotRegistered=t,e.fromNotRegisterLogin="Third"}clearSignUpResult(e){e.errorMsg=""}registerThirdPlatform(e){return e.pipe((0,T.M)(this.ageGate.state$),(0,j.z)((([{platform:e,profileKey:t,rrc:i,ageCheckDone:o,region:n},{ageGateAction:a,birthday:s}])=>0===a||o?this.accountService.thirdLogin({platform_app_id:Je.Oy[e],platform:e,profile_key:t,rrc:i,login_only:!1,birthday:s}).pipe((0,P.U)((t=>(t.fromThird=!0,this.loginReport.setPlatform(e),t.platform=e,t.region=n,this.getActions().handleSignupResult(t)))),(0,L.O)(this.getActions().setLoading(!0)),(0,I.l)(this.getActions().setLoading(!1))):(this.history.push(f.gY.signupAgeGate),(0,O.of)(this.getActions().cacheThirdNotRegistered({platform:e,profileKey:t}))))))}registerPhone(e){return e.pipe((0,Re.b)((()=>{this.loginReport.setPlatform("sms_verification"),this.loginReport.loginSubmit({signUp:!0})})),(0,T.M)(this.state$,this.ageGate.state$),(0,j.z)((([{ageCheckDone:e,region:t},{phoneNotRegistered:i},{ageGateAction:o,birthday:n}])=>{var a,s;return o&&!e?(this.history.push(f.gY.signupAgeGate),(0,O.of)(this.noop())):this.accountService.smsLoginContinue({mobile:null!==(a=null==i?void 0:i.mobile)&&void 0!==a?a:"",sms_code_key:null!==(s=null==i?void 0:i.smsCodeKey)&&void 0!==s?s:"",extra_params:{birthday:n}}).pipe((0,P.U)((e=>(e.platform="sms_verification",e.region=t,this.getActions().handleSignupResult(e)))),(0,L.O)(this.getActions().setLoading(!0)),(0,I.l)(this.getActions().setLoading(!1)))})))}syncUserInfos(e){return e.pipe((0,T.M)(this.state$),(0,j.z)((([{fromThird:e,fromEmail:t,fromFTC:i,region:o},{emailConsent:n}])=>(0,$e.D)([this.policy.syncKrPolicyApprove(o),this.syncEmailConsent(n),this.registerPrivateAccount.getIsRegisterPrivateAccount()]).pipe((0,K.w)((o=>{const[,,n]=o,a=e||t?f.gY.signupCreateUsername:f.gY.signupCreatePassword;return i||this.history.push(a),(0,O.of)(this.getActions().setLoading(!1),this.registerPrivateAccount.getActions().setIsRegisterWithPrivateOn(n),i?this.getActions().setSuccess():this.noop())}))))))}validateUsername(e){return e.pipe((0,j.z)((({name:e,fromThird:t})=>e?this.service.validateUsername(e).pipe((0,j.z)((i=>{const{status_code:o,recommended_unique_ids:n,is_valid:a,status_msg:s}=i,r=!a&&t?null==n?void 0:n[0]:e;return t&&!r?(0,O.of)(this.noop()):(0,O.of)(this.getActions().setUsernameInfo({value:r,isValid:a,suggestList:n,errorMsg:t?"":_e(o,Boolean(n),s)}))})),(0,L.O)(this.getActions().setCheckNameLoading(!0)),(0,I.l)(this.getActions().setCheckNameLoading(!1))):(0,O.of)(this.getActions().setUsernameInfo(void 0)))))}validateFTCUsername(e){return e.pipe((0,j.z)((({name:e})=>e?this.service.validateFTCUsername(e).pipe((0,P.U)((t=>{const{valid:i}=t;return this.getActions().setUsernameInfo({value:e,isValid:i,errorMsg:i?"":"common_registration_username_error_ sensitivity"})})),(0,L.O)(this.getActions().setCheckNameLoading(!0)),(0,I.l)(this.getActions().setCheckNameLoading(!1))):(0,O.of)(this.getActions().setUsernameInfo(void 0)))))}usernameRegister(e){return e.pipe((0,Re.b)((()=>{this.loginReport.setPlatform("handle"),this.loginReport.loginSubmit({signUp:!0})})),(0,T.M)(this.state$,this.ageGate.state$),(0,j.z)((([{password:e,region:t},{username:i},{birthday:o}])=>this.accountService.usernameRegister({password:e,username:i,extra_params:{birthday:o}}).pipe((0,P.U)((e=>(e.fromFTC=!0,e.region=t,this.getActions().handleSignupResult(e)))),(0,L.O)(this.getActions().setLoading(!0)),(0,I.l)(this.getActions().setLoading(!1))))))}emailRegister(e){return e.pipe((0,T.M)(this.ageGate.state$,this.state$),(0,Re.b)((([,,{emailConsent:e}])=>{var t;this.loginReport.setPlatform("email"),this.loginReport.loginSubmit({signUp:!0}),t=void 0===e?{}:{status:e?"checked":"unchecked",text_type:"long_version"},Fe.W.event("register_click_next",t)})),(0,j.z)((([{password:e,code:t,email:i,region:o},{birthday:n}])=>this.accountService.emailRegister({password:e,code:t,email:i,ifLogin:!0,extra_params:{birthday:n,email_logic_type:e?2:1}}).pipe((0,P.U)((e=>(e.fromEmail=!0,e.region=o,this.getActions().handleSignupResult(e)))),(0,L.O)(this.getActions().setLoading(!0)),(0,I.l)(this.getActions().setLoading(!1))))))}handleSignupResult(e){return e.pipe((0,j.z)((e=>{const{error_code:t,errorMsg:i,description:o,error_msg:n,fromThird:a,fromFTC:s,fromEmail:r,name:l,screen_name:d,sec_user_id:c,default_error_msg:p,region:u}=e;if(!t)return this.loginReport.loginSuccess({is_register:1}),this.regionService.authBroadcast({screen_name:d,sec_uid:c}).pipe((0,j.z)((()=>(0,O.of)(this.getActions().syncUserInfos({fromThird:a,fromEmail:r,fromFTC:s,region:String(u)}),a?this.getActions().validateUsername({name:l,fromThird:a}):this.noop()))));if(this.loginReport.loginFailure({error_code:t,signUp:!0}),ve(t))return(0,O.of)(this.riskError.getActions().handleRiskError({errorCode:t}));const g=i||n||o||p;return a?(me(this.t(g)),(0,O.of)(this.noop())):(0,O.of)(this.getActions().setErrorMsg(g))})))}syncEmailConsent(e){return e?this.service.syncEmailConsentInfo().pipe((0,P.U)((()=>(0,O.of)(null))),(0,B.K)((e=>(console.error(e),(0,O.of)({status_code:-1}))))):(0,O.of)(null)}};(0,u.__decorate)([(0,m.cQ)(),(0,u.__metadata)("design:type",A.y)],ot.prototype,"dispose$",void 0),(0,u.__decorate)([(0,m.lF)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[Object]),(0,u.__metadata)("design:returntype",void 0)],ot.prototype,"setSuccess",null),(0,u.__decorate)([(0,m.lF)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[Object,Boolean]),(0,u.__metadata)("design:returntype",void 0)],ot.prototype,"setEmailConsent",null),(0,u.__decorate)([(0,m.lF)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[Object,String]),(0,u.__metadata)("design:returntype",void 0)],ot.prototype,"setErrorMsg",null),(0,u.__decorate)([(0,m.lF)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[Object,Boolean]),(0,u.__metadata)("design:returntype",void 0)],ot.prototype,"setLoading",null),(0,u.__decorate)([(0,m.lF)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[Object,Boolean]),(0,u.__metadata)("design:returntype",void 0)],ot.prototype,"setCheckNameLoading",null),(0,u.__decorate)([(0,m.lF)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[Object,String]),(0,u.__metadata)("design:returntype",void 0)],ot.prototype,"setUsername",null),(0,u.__decorate)([(0,m.lF)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[Object,Object]),(0,u.__metadata)("design:returntype",void 0)],ot.prototype,"setUsernameInfo",null),(0,u.__decorate)([(0,m.lF)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[Object,String]),(0,u.__metadata)("design:returntype",void 0)],ot.prototype,"setFromNotRegisterLogin",null),(0,u.__decorate)([(0,m.lF)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[Object,Object]),(0,u.__metadata)("design:returntype",void 0)],ot.prototype,"cacheSmsCodeKey",null),(0,u.__decorate)([(0,m.lF)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[Object,Object]),(0,u.__metadata)("design:returntype",void 0)],ot.prototype,"cacheThirdNotRegistered",null),(0,u.__decorate)([(0,m.lF)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[Object]),(0,u.__metadata)("design:returntype",void 0)],ot.prototype,"clearSignUpResult",null),(0,u.__decorate)([(0,m.Qm)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[A.y]),(0,u.__metadata)("design:returntype",void 0)],ot.prototype,"registerThirdPlatform",null),(0,u.__decorate)([(0,m.Qm)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[A.y]),(0,u.__metadata)("design:returntype",void 0)],ot.prototype,"registerPhone",null),(0,u.__decorate)([(0,m.Qm)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[A.y]),(0,u.__metadata)("design:returntype",void 0)],ot.prototype,"syncUserInfos",null),(0,u.__decorate)([(0,m.Qm)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[A.y]),(0,u.__metadata)("design:returntype",void 0)],ot.prototype,"validateUsername",null),(0,u.__decorate)([(0,m.Qm)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[A.y]),(0,u.__metadata)("design:returntype",void 0)],ot.prototype,"validateFTCUsername",null),(0,u.__decorate)([(0,m.Qm)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[A.y]),(0,u.__metadata)("design:returntype",void 0)],ot.prototype,"usernameRegister",null),(0,u.__decorate)([(0,m.Qm)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[A.y]),(0,u.__metadata)("design:returntype",void 0)],ot.prototype,"emailRegister",null),(0,u.__decorate)([(0,m.Qm)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[A.y]),(0,u.__metadata)("design:returntype",void 0)],ot.prototype,"handleSignupResult",null),ot=(0,u.__decorate)([(0,h.Y)("SignupModule"),(0,u.__param)(6,(0,C.t)(E.s$)),(0,u.__metadata)("design:paramtypes",[tt,Ve,Ye,$,ce.Q,x.ZI,Function,pe.D,ue,Ae])],ot);let nt=class extends g.D{constructor(e,t,i,o,n,a,s,r,l,d,c,p){super(),this.bizContext=e,this.contextModule=t,this.signupModule=i,this.service=o,this.regionService=n,this.ageGate=a,this.loginReport=s,this.sendCode=r,this.phone=l,this.t=d,this.history=c,this.riskError=p,this.defaultState={errorMsg:"",showReactiveModal:!1,loginLoading:!1}}setLoginSuccess(e,t){e.success=null!=t?t:1}setErrorMsg(e,t){e.errorMsg=t}setErrorCode(e,t){e.errorCode=t}setTwoStepVerifyRes(e,t){e.twoStepResponse=t}setNeedForceResetPassword(e,t){const i=t.otp_type.match("email")?"email":"phone";this.history.push("email"===i?f.gY.loginForgetEmailPassword:f.gY.loginForgetPhonePassword),e.forceResetResponse=Object.assign(Object.assign({},t),{type:i})}clearForceResetRes(e){e.forceResetResponse=void 0}setShowReactiveModal(e,t){e.showReactiveModal=t.show,t.res?e.inCancellationResponse=Object.assign(Object.assign({},t.res),{isStopAccount:1430===t.res.error_code}):e.inCancellationResponse=void 0}setLoginLoading(e,t){e.loginLoading=t}setPhoneNotRegistered(e,t){e.phoneNotRegistered=t}clearLoginResult(e){e.errorMsg="",e.phoneNotRegistered=!1,e.twoStepResponse=void 0}cancelDeleteAccount(e){return e.pipe((0,T.M)(this.state$),(0,j.z)((([e,t])=>{var i,o;const n=null===(i=t.inCancellationResponse)||void 0===i?void 0:i.token;return((null===(o=t.inCancellationResponse)||void 0===o?void 0:o.isStopAccount)?this.service.cancelDeactiveAccount({token:n,type:0}):this.service.cancelDeleteAccount({token:n,type:0})).pipe((0,j.z)((e=>(e.successType=2,(0,O.of)(this.getActions().setShowReactiveModal({show:!1}),this.getActions().handleLoginResult(e))))))})))}handleForceResetPwdByEmail(e){return e.pipe((0,j.z)((e=>this.service.validateEmailCodeForForceReset(e).pipe((0,K.w)((t=>{const{error_code:i,ticket:o}=t;return i?(0,O.of)(this.getActions().handleLoginResult(t)):this.service.forceResetPwdByEmailTicket(Object.assign(Object.assign({},e),{ticket:o})).pipe((0,P.U)((t=>(t.password=e.password,this.getActions().handleLoginResult(t)))),(0,L.O)(this.getActions().setLoginLoading(!0)),(0,I.l)(this.getActions().setLoginLoading(!1)))})),(0,L.O)(this.getActions().setLoginLoading(!0)),(0,I.l)(this.getActions().setLoginLoading(!1))))))}handleForceResetPwdByPhone(e){return e.pipe((0,j.z)((e=>this.service.validatePhoneCodeForForceReset(e).pipe((0,j.z)((t=>{const{error_code:i,ticket:o}=t;return i?(0,O.of)(this.getActions().handleLoginResult(t)):this.service.forceResetPwdByMobileTicket(Object.assign(Object.assign({},e),{ticket:o})).pipe((0,P.U)((t=>(t.password=e.password,this.getActions().handleLoginResult(t)))),(0,L.O)(this.getActions().setLoginLoading(!0)),(0,I.l)(this.getActions().setLoginLoading(!1)))})),(0,L.O)(this.getActions().setLoginLoading(!0)),(0,I.l)(this.getActions().setLoginLoading(!1))))))}handleForceResetPwd(e){return e.pipe((0,j.z)((e=>{var{type:t}=e,i=(0,u.__rest)(e,["type"]);return("email"===t?this.service.forceResetPwdByEmailTicket(i):this.service.forceResetPwdByMobileTicket(i)).pipe((0,P.U)((e=>(e.password=i.password,this.getActions().handleLoginResult(e)))),(0,L.O)(this.getActions().setLoginLoading(!0)),(0,I.l)(this.getActions().setLoginLoading(!1)))})))}handlePasswordLogin(e){return e.pipe((0,T.M)(this.contextModule.state$),(0,j.z)((([e,{isSecurityVerification:t}])=>(t?this.service.verifyPwdWithoutLogin(e):this.service.passwordLogin(e)).pipe((0,P.U)((t=>{var i;const{verify_ticket:o}=null!==(i=e.extra_params)&&void 0!==i?i:{};return o&&this.loginReport.twoStepResult({error_code:t.error_code,result:t.error_code?"fail":"success",verification_method:"password"}),t.accountQuery=e,ee[t.error_code]&&e.mobile&&(t.errorMsg=ee[t.error_code]),this.getActions().handleLoginResult(t)})),(0,L.O)(this.getActions().setLoginLoading(!0)),(0,I.l)(this.getActions().setLoginLoading(!1))))))}changePwdByEmail(e){return e.pipe((0,j.z)((({password:e,email:t,emailCode:i,not_login_ticket:o,verify_ticket:n})=>this.service.resetPwdLoginByEmail({email:t,code:i,password:e,extra_params:{not_login_ticket:o,verify_ticket:n}}).pipe((0,P.U)((t=>(n&&this.loginReport.twoStepResult({verification_method:"email",error_code:t.error_code,result:t.error_code?"fail":"success"}),t.error_code&&(t.password=e,1011===t.error_code&&(t.errorMsg="common_login_reset_email_input_error"),t.resetPwdType="email"),this.getActions().handleLoginResult(t)))),(0,L.O)(this.getActions().setLoginLoading(!0)),(0,I.l)(this.getActions().setLoginLoading(!1))))))}handleSmsLogin(e){return e.pipe((0,j.z)((({mobile:e,phoneCode:t,login_only:i,birthday:o})=>this.ageGate.validateAge((0,O.of)({canSkip:i})).pipe((0,J.T)(1),(0,j.z)((({payload:n})=>"boolean"==typeof n?(0,O.of)(this.ageGate.getActions().setShowAgeConfirm(n)):(null==n?void 0:n.ageEligible)||null===n?this.service.smsLogin({mobile:e,code:t,login_only:i,birthday:o}).pipe((0,j.z)((e=>(e.error_code&&(e.errorMsg=oe[e.error_code]),(0,O.of)(this.getActions().handleLoginResult(e),n?this.ageGate.getActions().setAgeCheckResult(n):this.noop())))),(0,L.O)(this.getActions().setLoginLoading(!0)),(0,I.l)(this.getActions().setLoginLoading(!1))):(0,O.of)(this.ageGate.getActions().setAgeCheckResult(n))))))))}handleSmsVerify(e){return e.pipe((0,j.z)((({mobile:e,phoneCode:t})=>this.service.smsVerify({mobile:e,code:t}).pipe((0,j.z)((e=>(e.error_code&&(e.errorMsg=oe[e.error_code]),(0,O.of)(this.getActions().handleLoginResult(e))))),(0,L.O)(this.getActions().setLoginLoading(!0)),(0,I.l)(this.getActions().setLoginLoading(!1))))))}changePwdByMobile(e){return e.pipe((0,j.z)((({password:e,mobile:t,phoneCode:i})=>this.service.changePwdByMobile({mobile:t,code:i,password:e}).pipe((0,P.U)((t=>(t.error_code&&(t.password=e,t.errorMsg=oe[t.error_code],t.resetPwdType="mobile"),this.getActions().handleLoginResult(t)))),(0,L.O)(this.getActions().setLoginLoading(!0)),(0,I.l)(this.getActions().setLoginLoading(!1))))))}setAccount(e){return e.pipe((0,j.z)((e=>{var{nextUrl:t}=e,i=(0,u.__rest)(e,["nextUrl"]);return this.service.setAccount(i).pipe((0,P.U)((e=>{const{error_code:i,description:o}=e;return i?(me(this.t(o)),this.noop()):t?(this.history.push(t),this.noop()):this.getActions().setLoginSuccess()})),(0,L.O)(this.getActions().setLoginLoading(!0)),(0,I.l)(this.getActions().setLoginLoading(!1)))})))}handleChangePwdByTicket(e){return e.pipe((0,j.z)((e=>{var{type:t}=e,i=(0,u.__rest)(e,["type"]);return("email"===t?this.service.resetPwdByEmailTicket(i):this.service.resetPwdByMobileTicket(i)).pipe((0,P.U)((e=>(e.error_code&&(e.password=i.password,e.errorMsg=oe[e.error_code],e.resetPwdType=t),this.getActions().handleLoginResult(e)))),(0,L.O)(this.getActions().setLoginLoading(!0)),(0,I.l)(this.getActions().setLoginLoading(!1)))})))}handleLoginResult(e){return e.pipe((0,T.M)(this.contextModule.state$,this.phone.state$,this.bizContext.state$),(0,j.z)((([e,{disableSignup:t,isSecurityVerification:i,phoenix:o},{mobile:n},{bizContext:a}])=>{const{error_code:s,errorMsg:r,error_msg:l,description:d,new_user:c,screen_name:p,sec_user_id:u,successType:g,ticket:m,default_error_msg:h,region:_}=e;if(he.g.hide(),c)return this.loginReport.loginSuccess({is_register:1}),(0,O.of)(this.signupModule.getActions().syncUserInfos({region:String(_)}));if(!s)return this.loginReport.loginSuccess({is_register:0}),i&&this.setTicketIntoCookie(m,o),this.regionService.authBroadcast({screen_name:p,sec_uid:u}).pipe((0,P.U)((()=>this.getActions().setLoginSuccess(g))));if(this.loginReport.loginFailure({error_code:s}),1381===s)return(0,O.of)(this.getActions().setNeedForceResetPassword(e));if(2046===s)return(0,O.of)(this.getActions().setTwoStepVerifyRes(e));if(-1!==de.indexOf(s))return(null==a?void 0:a.isMobile)&&this.history.push({pathname:f.gY.accountDeactivate,state:{init:!0}}),(0,O.of)(this.getActions().setShowReactiveModal({show:!0,res:e}));if(1053===s)return(0,O.of)(this.contextModule.getActions().setShowAlertMessageType("twoStepVerifyBlock"));if(1356===s)return(0,O.of)(this.contextModule.getActions().setShowAlertMessageType("TwoStepBlockResetPwd"));if(1011===s&&t||1045===s&&i)return(0,O.of)(this.contextModule.getActions().setShowAlertMessageType("inexistent"));if(1011===s){if(e.sms_code_key)return(0,O.of)(this.getActions().setPhoneNotRegistered(!0),this.signupModule.getActions().cacheSmsCodeKey({smsCodeKey:e.sms_code_key,mobile:n}));if(e.profile_key)return(0,O.of)(this.signupModule.getActions().registerThirdPlatform({profileKey:e.profile_key,platform:e.platform,region:_}))}if(ve(s))return(0,O.of)(this.riskError.getActions().handleRiskError({errorCode:s}));if(te[s])return(0,O.of)(this.phone.getActions().setErrorMsg(te[s]));const v=oe[s]||r||l||d||h;return ae.includes(s)?(0,O.of)(this.sendCode.getActions().setErrorMsg({description:v})):(0,O.of)(this.getActions().setErrorMsg(v),this.getActions().setErrorCode(s))})))}setTicketIntoCookie(e,t){const i=new Date;i.setTime((new Date).getTime()+12e5),Y().set("security_verification_ticket",e,{domain:t?"www.tiktok.in":"tiktok.com",secure:!0,expires:i})}};(0,u.__decorate)([(0,m.cQ)(),(0,u.__metadata)("design:type",A.y)],nt.prototype,"dispose$",void 0),(0,u.__decorate)([(0,m.lF)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[Object,Number]),(0,u.__metadata)("design:returntype",void 0)],nt.prototype,"setLoginSuccess",null),(0,u.__decorate)([(0,m.lF)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[Object,String]),(0,u.__metadata)("design:returntype",void 0)],nt.prototype,"setErrorMsg",null),(0,u.__decorate)([(0,m.lF)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[Object,Number]),(0,u.__metadata)("design:returntype",void 0)],nt.prototype,"setErrorCode",null),(0,u.__decorate)([(0,m.lF)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[Object,Object]),(0,u.__metadata)("design:returntype",void 0)],nt.prototype,"setTwoStepVerifyRes",null),(0,u.__decorate)([(0,m.lF)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[Object,Object]),(0,u.__metadata)("design:returntype",void 0)],nt.prototype,"setNeedForceResetPassword",null),(0,u.__decorate)([(0,m.lF)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[Object]),(0,u.__metadata)("design:returntype",void 0)],nt.prototype,"clearForceResetRes",null),(0,u.__decorate)([(0,m.lF)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[Object,Object]),(0,u.__metadata)("design:returntype",void 0)],nt.prototype,"setShowReactiveModal",null),(0,u.__decorate)([(0,m.lF)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[Object,Boolean]),(0,u.__metadata)("design:returntype",void 0)],nt.prototype,"setLoginLoading",null),(0,u.__decorate)([(0,m.lF)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[Object,Boolean]),(0,u.__metadata)("design:returntype",void 0)],nt.prototype,"setPhoneNotRegistered",null),(0,u.__decorate)([(0,m.lF)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[Object]),(0,u.__metadata)("design:returntype",void 0)],nt.prototype,"clearLoginResult",null),(0,u.__decorate)([(0,m.Qm)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[A.y]),(0,u.__metadata)("design:returntype",void 0)],nt.prototype,"cancelDeleteAccount",null),(0,u.__decorate)([(0,m.Qm)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[A.y]),(0,u.__metadata)("design:returntype",void 0)],nt.prototype,"handleForceResetPwdByEmail",null),(0,u.__decorate)([(0,m.Qm)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[A.y]),(0,u.__metadata)("design:returntype",void 0)],nt.prototype,"handleForceResetPwdByPhone",null),(0,u.__decorate)([(0,m.Qm)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[A.y]),(0,u.__metadata)("design:returntype",void 0)],nt.prototype,"handleForceResetPwd",null),(0,u.__decorate)([(0,m.Qm)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[A.y]),(0,u.__metadata)("design:returntype",void 0)],nt.prototype,"handlePasswordLogin",null),(0,u.__decorate)([(0,m.Qm)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[A.y]),(0,u.__metadata)("design:returntype",void 0)],nt.prototype,"changePwdByEmail",null),(0,u.__decorate)([(0,m.Qm)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[A.y]),(0,u.__metadata)("design:returntype",void 0)],nt.prototype,"handleSmsLogin",null),(0,u.__decorate)([(0,m.Qm)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[A.y]),(0,u.__metadata)("design:returntype",void 0)],nt.prototype,"handleSmsVerify",null),(0,u.__decorate)([(0,m.Qm)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[A.y]),(0,u.__metadata)("design:returntype",void 0)],nt.prototype,"changePwdByMobile",null),(0,u.__decorate)([(0,m.Qm)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[A.y]),(0,u.__metadata)("design:returntype",void 0)],nt.prototype,"setAccount",null),(0,u.__decorate)([(0,m.Qm)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[A.y]),(0,u.__metadata)("design:returntype",void 0)],nt.prototype,"handleChangePwdByTicket",null),(0,u.__decorate)([(0,m.Qm)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[A.y]),(0,u.__metadata)("design:returntype",void 0)],nt.prototype,"handleLoginResult",null),nt=(0,u.__decorate)([(0,h.Y)("LoginResultDealModule"),(0,u.__param)(9,(0,C.t)(E.s$)),(0,u.__metadata)("design:paramtypes",[X.r,Te,ot,ce.Q,pe.D,$,x.ZI,We,Ie,Function,ue,Ae])],nt);var at=i(1360),st=i(36488),rt=i(41928);const lt=(0,at.Z)("div",{target:"esqadv70"})((({theme:e})=>({background:e.colors.BGPrimary,borderRadius:"8px",width:e.isMobile?"300px":"400px",padding:"32px"})),"label:DivContainer;"),dt=(0,at.Z)("h5",{target:"esqadv71"})((({theme:e})=>[(0,st.GI)({theme:e,color:"TextPrimary",fontFamily:"Proxima",fontWeight:"bold"}),{fontSize:"24px",lineHeight:"36px",textAlign:"center",margin:"0"}]),"label:H5Title;"),ct=(0,at.Z)("p",{target:"esqadv72"})([({theme:e})=>(0,st.GI)({theme:e,color:"TextPrimary",fontFamily:"Proxima"}),{lineHeight:"17px",margin:"16px 0px 24px",textAlign:"center",fontSize:"14px"}],"label:PDesc;"),pt=(0,at.Z)("div",{target:"esqadv73"})({display:"flex",flexDirection:"column"},"label:DivButtonWrapper;"),ut=(0,at.Z)(rt.W,{target:"esqadv74"})({minWidth:"auto",flex:"1",":last-child":{marginTop:"12px"}},"label:StyledButton;"),gt=(0,l.memo)((()=>{const e=(0,y.Q)("WebApp_Login"),[{showReactiveModal:t},{setShowReactiveModal:i,cancelDeleteAccount:n}]=(0,a.b7)(nt),s=(0,l.useCallback)((()=>{i({show:!1})}),[i]),r=(0,l.useCallback)((()=>{n()}),[n]);return(0,o.jsx)(b.u_,Object.assign({visible:t,maskCloseable:!1,onClose:s},{children:(0,o.jsxs)(lt,{children:[(0,o.jsx)(dt,{children:e("reactivate_h1")},void 0),(0,o.jsx)(ct,{children:e("logback_reactivate_desc")},void 0),(0,o.jsxs)(pt,{children:[(0,o.jsx)(ut,Object.assign({size:"large",buttonTheme:"primary",onClick:r},{children:e("reactivate_btn")}),void 0),(0,o.jsx)(ut,Object.assign({size:"large",onClick:s},{children:e("common_registration_phone_input_popup_button")}),void 0)]},void 0)]},void 0)}),void 0)}));var mt=i(8262);const ht=(0,at.Z)("div",{target:"e1lgic6i0"})({display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",marginTop:"40px",fontWeight:600},"label:DivBack;");ht.defaultProps=Object.assign(Object.assign({},ht.defaultProps),{"data-e2e":"back-btn"});const _t=(0,l.memo)((function(){const e=(0,y.Q)("WebApp_Login"),{loginModalShow:t}=(0,a.mp)(v.r),i=(0,d.k6)(),n=(0,d.$B)([f.gY.loginQRcode,f.gY.loginPhoneOrEmail,f.gY.signupPhoneOrEmail]),s=(0,l.useCallback)((()=>{i.goBack()}),[i]),r=(0,l.useCallback)((e=>{13===e.keyCode&&i.goBack()}),[i]);return t||!n?null:(0,o.jsxs)(ht,Object.assign({onClick:s,onKeyDown:r,tabIndex:0,role:"link"},{children:[(0,o.jsx)(mt.Z,{},void 0),e("common_login_back")]}),void 0)}));var vt,yt=i(9967),bt=i(33642),ft=i(19496),xt=i(36800),kt=i(24421);!function(e){e.ClickSignUp="click_sign_up",e.ClickLoginButton="click_login_button",e.EnterSignUp="enter_sign_up"}(vt||(vt={}));var wt;!function(e){e.ClickQrCcode="click_QR_login",e.ScanQrCode="scan_QR_login"}(wt||(wt={}));var St=i(97575),Ct=i(39022),jt=i.n(Ct);function Pt(e,t){return(0,a.mp)(Te,{selector:t=>{const i=t;return jt()(i,...e())},dependencies:t})}var Tt=i(75721);const Ot=(0,at.Z)("a",{target:"e15g97fd0"})((({theme:e})=>[(0,st.GI)({theme:e,fontFamily:"Proxima"}),{height:"18px",fontWeight:600,fontSize:"14px",lineHeight:"17px",display:"flex",alignItems:"center"}]),"label:AHelpTag;");Ot.defaultProps=Object.assign(Object.assign({},Ot.defaultProps),{"data-e2e":"feedback-entrance"});const Lt=(0,at.Z)(Tt.Z,{target:"e15g97fd1"})((({theme:e})=>({width:"20px",height:"20px",color:e.colors.TextTertiary,transform:"rtl"===e.direction?"rotateY(180deg)":"unset"})),"label:StyledHelpIcon;"),It=(0,at.Z)("span",{target:"e15g97fd2"})({marginInlineStart:"7px",color:"TextQuaternary"},"label:SpanHelpText;");var At;!function(e){e.ForYou="https://www.tiktok.com/foryou",e.Support="https://support.tiktok.com",e.Feedback="https://www.tiktok.com/feedback"}(At||(At={}));const Et=(0,l.memo)((function(){var e;const t=(0,y.Q)("WebApp_Login"),{forceLogin:i,phoenix:n}=Pt((()=>["forceLogin","phoenix"]),[]),{language:a}=(0,bt.m7)((0,w.Lh)((()=>["language"]),[])),{isMobile:s}=(0,bt.m7)((0,S.h)((()=>["isMobile"]),[])),r=i?`https://support.tiktok.com/${a}`:`https://www.tiktok.com/feedback/?lang=${a}`,l=[f.gY.signupPolicyConfirm,f.gY.signupPrivateOn,f.gY.signupAgeGateConfirm,f.gY.signupCreateAccount];return(null===(e=(0,d.$B)(l))||void 0===e?void 0:e.isExact)||n?null:(0,o.jsxs)(Ot,Object.assign({href:r,target:"_blank",rel:"noopener noreferrer",className:"help-center"},{children:[(0,o.jsx)(Lt,{},void 0),!s&&(0,o.jsx)(It,{children:t("common_registration_feedback")},void 0)]}),void 0)})),Mt=(e,t,i)=>{var o;const n=`https://www.tiktok.com/foryou?lang=${e}`,{pathname:a,href:s}=location,r=a.startsWith(f.gY.loginHome)||a.startsWith(f.gY.signupHome)||a.startsWith(f.gY.oauth)||a.startsWith(f.gY.logout)||a.startsWith(f.gY.accountDeactivate)?n:s,l=window.decodeURIComponent(null!=i?i:""),d=l.match(location.origin)&&"/"===(null===(o=new URL(l))||void 0===o?void 0:o.pathname),c=[/^https?:\/\/([\w\-.]+?\.)?tiktok\.(com|in)(\/.*)?$/,"https://seller.tiktokglobalshop.com/"].some((e=>new RegExp(e).test(l)))||t&&["https://seller-boe.byteintl.net/",/^https?:\/\/([\w\-.]+?\.)?bytedance\.net(\/.*)?$/].some((e=>new RegExp(e).test(l)));return d?n:c&&l?l:r},Rt=(e,t,i)=>{const o=Mt(e,t,i);setTimeout((()=>{location.href=o}),1e3)},Ft=(0,at.Z)("header",{target:"e1x3uhsi0"})((({theme:e})=>({position:"fixed",width:"100%",top:0,left:0,height:44,background:`${e.colors.BGPrimary}`,padding:"0 16px",zIndex:2})),"label:HeaderWrapper;"),Dt=(0,at.Z)("div",{target:"e1x3uhsi1"})((({align:e,theme:t})=>[(0,st.YJ)({direction:t.direction,start:"left"===e?"16px":"unset",end:"right"===e?"16px":"unset"}),{display:"flex",alignItems:"center",fontSize:"20px",position:"absolute",top:"12px"}]),"label:DivIcon;"),Bt=(0,at.Z)(mt.Z,{target:"e1x3uhsi2"})((({theme:e})=>({transform:"rtl"===e.direction?"rotateZ(180deg)":"unset"})),"label:StyledBackIcon;"),zt=(0,at.Z)("div",{target:"e1x3uhsi3"})((({theme:e})=>[(0,st.GI)({theme:e,fontFamily:"Proxima",color:"TextPrimary"}),{fontSize:"17px",textAlign:"center",lineHeight:"44px",fontWeight:700}]),"label:DivTitle;");zt.defaultProps=Object.assign(Object.assign({},zt.defaultProps),{"data-e2e":"header-text"});const Nt=({title:e,showClose:t,showLeft:i=!0,showRight:n=!0,backIcon:a=!0,LeftIcon:s,onClose:r})=>{const{language:c,env:p}=(0,bt.m7)((0,w.Lh)((()=>["language","env"]),[])),{redirectUrl:u,hideHomePage:g}=Pt((()=>["redirectUrl","hideHomePage"]),[]),m=(0,d.$B)([f.gY.loginPhoneOrEmail])&&g,h=(0,d.k6)(),_=(0,l.useCallback)((()=>{t?r?r():Rt(c,"boe"===(null==p?void 0:p.type),u):h.goBack()}),[h,t,r,c,u,p]),v=(0,l.useCallback)((()=>s?(0,o.jsx)(s,{},void 0):t?(0,o.jsx)(St.Z,{"data-e2e":"close-btn"},void 0):a?(0,o.jsx)(Bt,{"data-e2e":"back-btn"},void 0):null),[s,a,t]);return(0,o.jsxs)(Ft,{children:[!m&&i&&(0,o.jsx)(Dt,Object.assign({align:"left",onClick:_},{children:v()}),void 0),e&&(0,o.jsx)(zt,{children:e},void 0),!g&&n&&(0,o.jsx)(Dt,Object.assign({align:"right"},{children:(0,o.jsx)(Et,{},void 0)}),void 0)]},void 0)},Ut=(0,at.Z)("div",{target:"e1cgu1qo0"})((({theme:e,isSmallText:t})=>[(0,st.GI)({theme:e,color:"TextPrimary",fontWeight:"semiBold",fontFamily:"Proxima"}),{border:`1px solid ${e.colors.LineSecondary2}`,fontSize:t?"13px":"15px",padding:"0 12px",display:"flex",alignItems:"center",justifyContent:"center",height:"44px",position:"relative",cursor:"pointer",marginBottom:"16px",wordBreak:"keep-all",whiteSpace:"nowrap",background:e.colors.BGTertiary}]),"label:DivBoxContainer;");Ut.defaultProps=Object.assign(Object.assign({},Ut.defaultProps),{"data-e2e":"channel-item"});const Wt=(0,at.Z)("div",{target:"e1cgu1qo1"})((({theme:e})=>[(0,st.YJ)({direction:e.direction,start:"12px"}),{fontSize:"20px",position:"absolute",display:"flex"}]),"label:DivIconContainer;"),$t=e=>{const{text:t,Icon:i,focusable:n,onClick:a}=e,s=(0,l.useRef)(null),[r,d]=(0,l.useState)(!1);(0,l.useEffect)((()=>{var e,t,i;(null!==(i=null===(t=null===(e=s.current)||void 0===e?void 0:e.getBoundingClientRect())||void 0===t?void 0:t.width)&&void 0!==i?i:0)>=292&&d(!0)}),[]);const c=(0,l.useCallback)((e=>{n&&13===e.keyCode&&(null==a||a())}),[n,a]);return(0,o.jsxs)(Ut,Object.assign({onClick:a,onKeyDown:c,tabIndex:n?0:void 0,isSmallText:r,role:"link"},{children:[(0,o.jsx)(Wt,{children:(0,o.jsx)(i,{},void 0)},void 0),(0,o.jsx)("p",Object.assign({ref:s},{children:t}),void 0)]}),void 0)};var qt,Ht,Gt=i(29025);!function(e){e.Web="tiktokweb",e.SEO="tiktokwebseo",e.WebSem="tiktokwebsem",e.WebAmp="tiktokwebamp"}(qt||(qt={})),function(e){e.User="wrapper_user",e.Foryou="wrapper_foryou",e.VideoInsert="wrapper_video_insert",e.Music="wrapper_music",e.Challenge="wrapper_challenge",e.Video="wrapper_video",e.Search="wrapper_search",e.Poi="wrapper_poi"}(Ht||(Ht={}));const Zt="webapp_first_open_cta";const Vt=function({children:e}){const{isSmartPlayer:t}=function(){const{playerInfo:e}=(0,bt.m7)((0,S.h)((()=>["playerInfo"]),[])),{name:t="",isSmartPlayer:i=!1,type:o=0,loop:n=!1,replyComment:a=!0,hideNavBar:s=!1}=(0,bt.m7)(e);return{brand:t,isEchoShow:"echoshow"===t,launchType:o,isSmartPlayer:i,loop:n,replyComment:a,hideNavBar:s}}();return t?null:e};var Qt=i(53120),Yt=i(32667),Kt=i(27072),Jt=i(13778),Xt=i(7998);const ei=(0,Xt.Z)("div",{target:"e1dsngob0"})({position:"fixed",left:0,right:0,top:0,bottom:0,overflow:"hidden",userSelect:"none",pointerEvents:"none"},(({zIndex:e})=>({zIndex:e})),"label:DivContainer;"),ti=(0,Xt.Z)("div",{target:"e1dsngob1"})({pointerEvents:"auto",position:"absolute",left:0,top:0,bottom:0,right:0,background:"rgba(0, 0, 0, 0.5)",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.06)",transition:"opacity 0.3s"},(({status:e})=>({opacity:e===Kt.Wj||e===Kt.Ix||e===Kt.d0?0:1})),"label:DivMask;"),ii=(0,Xt.Z)("div",{target:"e1dsngob2"})({pointerEvents:"auto",position:"absolute",left:0,bottom:0,width:"100%",background:"#fff",borderRadius:"12px 12px 0 0",maxHeight:"73vh",transition:"transform 0.3s"},(({status:e})=>({transform:e===Kt.Ix||e===Kt.Wj||e===Kt.d0?"translateY(100%)":"none"})),"label:DivBodyWrapper;"),oi=(0,Xt.Z)("div",{target:"e1dsngob3"})({padding:"16px 20px 20px"},"label:DivContentWrapper;"),ni=(0,Xt.Z)("div",{target:"e1dsngob4"})({position:"absolute",top:"16px",width:"24px",height:"24px",zIndex:1,display:"flex",justifyContent:"center",alignItems:"center"},(({theme:e})=>({["rtl"===e.direction?"left":"right"]:"16px"})),"label:DivCloseWrapper;"),ai=(0,Xt.Z)("div",{target:"e1dsngob5"})({position:"absolute",top:"16px",width:"24px",height:"24px",zIndex:1,display:"flex",justifyContent:"center",alignItems:"center"},(({theme:e})=>({["rtl"===e.direction?"right":"left"]:"16px"})),"label:DivExtraAction;"),si=(0,Xt.Z)("div",{target:"e1dsngob6"})((({theme:e})=>({padding:"16px 20px",borderBottom:`1px solid ${e.colors.LinePrimary}`,display:"flex",justifyContent:"center",alignItems:"center"})),"label:DivHeaderWrapper;");var ri;!function(e){e.Icon="icon",e.Mask="mask"}(ri||(ri={}));const li=(0,l.memo)((function(e){const{mask:t=!0,maskClosable:i=!0,closeable:n=!0,visible:a=!1,style:s,containerStyle:r,maskStyle:d,needTouchEvents:c=!0,zIndex:p=1001,onClose:u,direction:g,header:m,children:h,contentStyle:_,extraAction:v,bodyE2E:y,e2eTag:b,closeStyle:f}=e,[x,k]=(0,l.useState)(!1);(0,l.useEffect)((()=>{k(!0)}),[]);const w=(0,l.useRef)(null),S=(0,l.useRef)(null),C=(0,l.useRef)(),j=(0,l.useCallback)((e=>{C.current=e.targetTouches[0].clientY}),[]),P=(0,l.useCallback)((e=>{var t,i;if(!(null===(t=S.current)||void 0===t?void 0:t.contains(e.target)))return e.stopPropagation(),void e.preventDefault();const o=e.targetTouches[0].clientY-(null!==(i=C.current)&&void 0!==i?i:0),n=S.current;return n&&n.scrollTop+n.clientHeight>=n.scrollHeight&&o<0||n&&n.scrollTop<=0&&o>0?e.preventDefault():void 0}),[]);(0,l.useEffect)((()=>{if(c)return a&&(document.addEventListener("touchstart",j),document.addEventListener("touchmove",P,{passive:!1})),()=>{document.removeEventListener("touchstart",j),document.removeEventListener("touchmove",P)}}),[a,P,j,c]);const T=(0,l.useCallback)((e=>{i&&(null==u||u(e,"mask"))}),[i,u]),O=(0,l.useCallback)((e=>{n&&(null==u||u(e,"icon"))}),[n,u]);return x?(0,Yt.createPortal)((0,o.jsx)(Kt.ZP,Object.assign({timeout:300,in:a,nodeRef:w,mountOnEnter:!0,unmountOnExit:!0,onExited:e.onExitEnd},{children:e=>(0,o.jsxs)(ei,Object.assign({style:r,zIndex:p,ref:w,status:e},{children:[t&&(0,o.jsx)(ti,{status:e,style:d,onClick:T},void 0),(0,o.jsx)(Kt.ZP,Object.assign({appear:!0,timeout:300,in:a,unmountOnExit:!0},{children:e=>(0,o.jsxs)(ii,Object.assign({"data-e2e":y,status:e,style:s},{children:[Boolean(m)&&(0,o.jsx)(si,{children:m},void 0),n&&(0,o.jsx)(ni,Object.assign({direction:g,onClick:O,style:f},{children:(0,o.jsx)(Jt.Z,{e2eTag:b,style:{width:18,height:18}},void 0)}),void 0),v&&(0,o.jsx)(ai,Object.assign({direction:g},{children:v}),void 0),(0,o.jsx)(oi,Object.assign({style:Object.assign({overflow:"auto"},_),header:Boolean(m),ref:S},{children:h}),void 0)]}),void 0)}),void 0)]}),void 0)}),void 0),document.body):null}));var di,ci,pi=i(76957),ui=i(46738),gi=i(21590),mi=i(97751);!function(e){e.Jump="jump",e.ReflowGroupPopupClick="jump_window_click"}(di||(di={})),function(e){e.Popup="launch_popup",e.Modal="jump_to_pwa",e.Jump="jump"}(ci||(ci={}));var hi=i(58569);let _i=class{constructor(e){this.fetch=e}getStrategy({language:e}){return this.fetch.get("/tiktok/linker/component/strategy/get/v1/",{query:{biz_name:"Webapp",page_name:"CTA",language:e,wrappers:JSON.stringify([{name:"wrapper_foryou",params:{url_scheme_params:{},url_fallback_params:{}}}])},baseUrlType:2})}};var vi;_i=(0,u.__decorate)([(0,R.G)(),(0,u.__metadata)("design:paramtypes",[z.r])],_i);let yi=class extends g.D{constructor(e){super(),this.service=e,this.defaultState={linkerStrategy:void 0}}setStrategy(e,t){e.linkerStrategy=t}getStrategy(e){return e.pipe((0,be.z)((e=>this.service.getStrategy({language:e}).pipe((0,j.z)((({status_code:e,strategy:t={}})=>{const i=0===e?t:{};return(0,hi.T)((0,O.of)(this.getActions().setStrategy(i)))})),(0,I.l)(this.terminate()),(0,B.K)((()=>(0,O.of)(this.noop())))))))}};(0,u.__decorate)([(0,m.lF)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[Object,"function"==typeof(vi="undefined"!=typeof ILinkerComponentStrategyStruct&&ILinkerComponentStrategyStruct)?vi:Object]),(0,u.__metadata)("design:returntype",void 0)],yi.prototype,"setStrategy",null),(0,u.__decorate)([(0,m.Qm)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[A.y]),(0,u.__metadata)("design:returntype",A.y)],yi.prototype,"getStrategy",null),yi=(0,u.__decorate)([(0,h.Y)("CtaModule"),(0,u.__metadata)("design:paramtypes",[_i])],yi);const bi=({appType:e,jumpTime:t},i)=>{((e={})=>{Fe.W.event("jump",e)})({app_type:e,jump_time:t,status:i?0:1})},fi=(0,l.memo)((({children:e})=>{const[t,i]=(0,a.b7)(yi,{selector:e=>e.linkerStrategy,dependencies:[]}),{language:n}=(0,bt.m7)((0,w.Lh)((()=>["wid","region","language"]),[])),{onelinkParams:s,schemeParams:r}=(({downloadType:e,enterMethod:t="",id:i,search_keyword:o,search_sug_type:n})=>{const{wid:a,region:s}=(0,bt.m7)((0,w.Lh)((()=>["wid","region"]),[])),{previous_page:r,page_name:c}=Fe.W.commonParams,{search:p}=(0,d.TH)(),u=(0,ze.St)("webapp_launch_mode"),g=`click_wap_${e}`,m=`${c}${i?`_${i}`:""}`;return{schemeParams:(0,l.useMemo)((()=>{const e={page_name:m,gd_label:g,refer:u};return i&&(e.id=i),a&&(e.wid=a),s&&mi.PV.includes(s)&&(e.awedp_require_login="normal"),o&&(e.keyword=encodeURIComponent(o),e.search_keyword=encodeURIComponent(o),e.search_type="general",e.enter_from=`${r}_web`,e.enter_method=t,e.search_sug_type=null!=n?n:""),e}),[m,g,u,i,a,s,o,r,t,n]),onelinkParams:(0,l.useMemo)((()=>{const e=(0,fe.parse)(p),t=e.utm_campaign,i=e.utm_source,o=e.utm_medium,n=(0,ze.St)("webapp_original_traffic_type"),s=(0,ze.St)("referer_url"),r=(0,ze.St)("referer_video_id");let l="tiktokweb";"paid"===u?l="tiktokwebsem":"referral_amp"===u?l="tiktokwebamp":"organic"===u&&(l="tiktokwebseo");const d=`${i?`source:${i};`:""}${o?`medium:${o};`:""}${t?`campaign:${t};`:""}`,c=`${s?`referer_url:${s}};`:""}${r?`referer_video_id:${r};`:""}`,h={af_ad:g,af_siteid:"mobile",pid:l,c:m,af_adset:u,af_ad_id:n};return"undefined"!=typeof window&&(h.canonical=`${gi.o}${decodeURIComponent(location.pathname)}`),a&&(h.wid=a),d&&(h.af_adset_id=d),c&&(h.af_channerl=c),Object.keys(h).forEach((e=>{h[e]="string"==typeof h[e]?encodeURIComponent(h[e]):h[e]})),h}),[p,u,g,m,a])}})({downloadType:"app_launch"}),c=(0,l.useCallback)((e=>{Qt.Fx.handleDownloadConfirm({enter_method:"app_launch"}),bi(e,!0)}),[]),p=(0,l.useCallback)((e=>{bi(e,!1)}),[]);return(0,l.useEffect)((()=>{t||i.getStrategy(n)}),[i,t,n]),(0,o.jsx)(ui.TH,Object.assign({strategy:t},{children:(0,o.jsx)(ui.Cj,Object.assign({schemeParams:r,fallbackURLParams:s,target:"wrapper_foryou",jumpStartHandler:c,jumpFailHandler:p},{children:e}),void 0)}),void 0)})),xi=(0,at.Z)("div",{target:"euo5c20"})({zIndex:1008,width:"100%",borderRadius:"8px 8px 0 0 ",backgroundColor:"#fff",boxShadow:"0 2px 8px rgba(0, 0, 0, .06)","&.middle":{width:"310px",borderRadius:"8px"}},"label:DivCtaGuideContainer;"),ki=(0,at.Z)("div",{target:"euo5c21"})({position:"absolute",top:0,left:"50%",width:"64px",height:"64px",padding:"4px",boxSizing:"border-box",borderRadius:"100%",backgroundColor:"#f8f8f8",transform:"translate(-50%, -50%)","& img":{borderRadius:"100%"}},"label:DivIconContainer;"),wi=(0,at.Z)("div",{target:"euo5c22"})({boxSizing:"border-box",width:"100%",padding:"48px 20px 20px",textAlign:"center"},"label:DivInfoContainer;"),Si=(0,at.Z)("p",{target:"euo5c23"})((({theme:e})=>(0,st.GI)({theme:e,fontFamily:"Proxima",fontWeight:"semiBold"})),{fontSize:"20px",lineHeight:"24px"},"label:PGuideTitle;"),Ci=(0,at.Z)("p",{target:"euo5c24"})((({theme:e})=>(0,st.GI)({theme:e,fontFamily:"Proxima",fontWeight:"normal",color:"TextSecondary"})),{marginTop:"12px",fontSize:"15px",lineHeight:"18px"},"label:PGuideDesc;"),ji=(0,at.Z)("div",{target:"euo5c25"})((({paddingBottom:e})=>({boxSizing:"border-box",width:"100%",padding:"0 20px 20px",paddingBottom:e,textAlign:"center"})),"label:DivGuideBtnContainer;"),Pi={width:"100%",height:"44px",border:"none",fontSize:"15px",lineHeight:"44px"},Ti=(0,at.Z)("button",{target:"euo5c26"})((({theme:e})=>(0,st.GI)({theme:e,fontFamily:"Proxima",fontWeight:"semiBold",color:"ConstTextInverse"})),Object.assign(Object.assign({},Pi),{borderRadius:"2px",backgroundColor:"#fe2c55"}),"label:ButtonOpenTT;"),Oi=(0,at.Z)("button",{target:"euo5c27"})((({theme:e})=>[(0,st.GI)({theme:e,fontFamily:"Proxima",fontWeight:"normal"}),Object.assign(Object.assign({},Pi),{backgroundColor:"#fff",marginTop:"2px",color:e.colors.ConstTextPrimary})]),"label:ButtonRefuseOrLogin;"),Li={padding:"0"},Ii=(0,l.memo)((()=>{const{title:e,desc:t,btnText:i,notNow:n}=(()=>{const{isCTATestV2:e}=(0,Gt.sJ)(),t=(0,y.Q)("WebApp_Login"),i=t("optimize_web_open_notnow_cta"),o=t("optimize_web_open_tiktok_cta");let n=t("webapp_bottomsheet_downloadcta_main_title"),a=t("webapp_bottomsheet_downloadcta_main_desc");return e&&(n=t("optimize_web_full_app_header"),a=t("optimize_web_full_app_body")),{btnText:o,title:n,desc:a,notNow:i}})(),[a,s]=(0,l.useState)(!1),{isBot:r}=(0,bt.m7)((0,S.h)((()=>["isBot"]),[])),{isCTATestV2:d}=(0,Gt.sJ)(),c=(0,l.useCallback)((e=>()=>{s(!1),Qt.Fx.handleDownloadDismiss({modal_type:"bottom_sheet",enter_method:"app_launch",dismiss_method:e})}),[]),p=(0,l.useCallback)(((e,t)=>{c("icon"===t?"x_close":"click_mask")()}),[c]);return(0,l.useEffect)((()=>{const e=!(0,ze.St)(Zt);!r&&e&&d&&(s(!0),(0,ze.D9)(Zt,"1"),Qt.Fx.handleDownloadShow({modal_type:"bottom_sheet",enter_method:"app_launch"}))}),[r,d]),(0,o.jsx)(li,Object.assign({visible:a,contentStyle:Li,closeable:!1,onClose:p},{children:(0,o.jsxs)(xi,Object.assign({"data-e2e":"bottom-cta-container"},{children:[(0,o.jsx)(ki,Object.assign({"data-e2e":"bottom-cta-icon"},{children:(0,o.jsx)("img",{src:pi,width:56,height:56},void 0)}),void 0),(0,o.jsxs)(wi,{children:[(0,o.jsx)(Si,Object.assign({"data-e2e":"bottom-cta-title"},{children:e}),void 0),(0,o.jsx)(Ci,Object.assign({"data-e2e":"bottom-cta-desc"},{children:t}),void 0)]},void 0),(0,o.jsxs)(ji,{children:[(0,o.jsx)(Vt,{children:(0,o.jsx)(fi,{children:(0,o.jsx)(Ti,Object.assign({"data-e2e":"bottom-cta-confirm-btn"},{children:i}),void 0)},void 0)},void 0),(0,o.jsx)(Oi,Object.assign({"data-e2e":"bottom-cta-cancel-btn",onClick:c("not_now")},{children:n}),void 0)]},void 0)]}),void 0)}),void 0)})),Ai=(0,at.Z)("a",{target:"epl6mg0"})((({theme:e,textTheme:t,underline:i=!0})=>[(0,st.GI)({theme:e,color:"primary"===t?"Primary":"TextSecondary",fontWeight:"semiBold"}),{fontSize:"12px","&:hover, &:focus":{textDecoration:i?"underline":"none",textDecorationColor:"primary"===t?e.colors.Primary:e.colors.TextSecondary}}]),"label:ALink;"),Ei=({path:e,text:t,children:i,className:n,replace:a=!1,textTheme:s,underline:r,isJumpOutside:c=!1,onClick:p})=>{const u=(0,d.k6)(),g=(0,l.useCallback)((t=>{c||(t.preventDefault(),t.stopPropagation(),null==p||p(),a?u.replace(e):u.push(e))}),[u,e,a,p]);return(0,o.jsxs)(Ai,Object.assign({onClick:g,href:e,className:n,textTheme:s,underline:r},{children:[t,i]}),void 0)};var Mi=i(75331),Ri=i(92540),Fi=i(83888),Di=i(55735),Bi=i(90028),zi=i(47259),Ni=i(86530),Ui=i(37682),Wi=i(91855),$i=i(11348),qi=i(85123);const Hi=(e,t)=>{const i=(o=e,`${Je.lF}:${o}`);var o;const n={timestamp:Number(new Date),timeInterval:6e5},a=Object.assign(Object.assign({},t),{expires:n});(0,ze.D$)(i,JSON.stringify(a)),(0,ze.D$)(e,JSON.stringify(a))},Gi=e=>{const t=(0,ze.le)(e);try{return JSON.parse(t)}catch(e){return{}}},Zi=e=>{2===Number(null!=e?e:localStorage.getItem("oauthType"))&&(location.href=`${location.href}&no_refactor=1`)},Vi="hello_page_login_way",Qi=()=>{(0,ze.D$)(Vi,"1")},Yi="webapp_third_auth_page_redirect";var Ki=i(14896),Ji=i(14716);let Xi=class{constructor(e,t){this.loginReport=e,this.fetch=t}get apple$(){return window.AppleID?(0,O.of)(null):(0,O.of)(null).pipe((0,j.z)((()=>(0,$e.D)([(0,Ji.D)(i.e(6757).then(i.t.bind(i,5333,23))),this.getAppleConfig()]).pipe((0,P.U)((([e,{data:t}])=>{const{client_id:i,state:o}=t;e.auth.init({clientId:i,state:o,redirectURI:"https://www.tiktok.com/oauth",scope:"name email",response_mode:"fragment",usePopup:!0}),window.AppleID=e}))))),(0,B.K)((()=>(0,O.of)({error_code:-1}))))}login(){return this.apple$.pipe((0,K.w)((()=>(0,Ji.D)(window.AppleID.auth.signIn()).pipe((0,K.w)((e=>this.afterAppleAuthentication(e))),(0,B.K)((e=>(this.loginReport.thirdPartyLoginResult(Object.assign(Object.assign({},e),{status:"popup_closed_by_user"===e.error?2:1,error_desc:e.error})),(0,O.of)(Object.assign(Object.assign({error_code:-1},e),{error_msg:"user_trigger_new_signin_flow"===e.error?"":e.error,platform:"apple"})))))))))}afterAppleAuthentication(e){return(0,O.of)(e).pipe((0,P.U)((e=>{const{authorization:t={}}=e,{id_token:i}=t;return{openid:(0,Ki.Z)(i).sub,platform_app_id:Je.Oy.apple,platform:"apple",id_token:i}})))}getAppleConfig(){return this.fetch.post("https://www.tiktok.com/passport/web/auth/config",{query:{aid:1459,account_sdk_source:"web"},body:et().stringify({platform_app_id:Je.Oy.apple,action:"login_only",next:"https://www.tiktok.com/foryou?lang=en"})})}};Xi=(0,u.__decorate)([(0,R.G)(),(0,u.__metadata)("design:paramtypes",[x.ZI,z.r])],Xi);var eo=i(83157),to=i(96980);let io=class{constructor(e){this.loginReport=e,this.loadSdk=e=>{i.e(8400).then(i.t.bind(i,57525,23)).then((({default:t})=>{t.init({facebook:"1862952583919182",google:"1096011445005-sdea0nf5jvj14eia93icpttv27cidkvk.apps.googleusercontent.com",twitter:"rLsbFQ5NHI2IsWZiRc2McRCFc",instagram:"c8785d0dc7df48f298532fddf33d7cb5",vk:"6961453"}),this.helloJS=t,null==e||e()})).catch((t=>{console.error(t),null==e||e()}))}}get helloJS$(){return this.helloJS?(0,O.of)(this.helloJS):new A.y((e=>{this.loadSdk((()=>{e.next(),e.complete()}))}))}login(e){const{platform:t,display:i}=e;return"page"===i&&Qi(),this.helloJS$.pipe((0,j.z)((()=>(0,Ji.D)(this.helloJS(t).login(e)).pipe((0,K.w)((e=>this.afterHelloAuthentication(e)))))),(0,B.K)((o=>{var n,a,s,r;return this.loginReport.thirdPartyLoginResult(Object.assign(Object.assign({},o.error),{status:"cancelled"===(null===(n=o.error)||void 0===n?void 0:n.code)?2:1,error_desc:null===(a=o.error)||void 0===a?void 0:a.message})),"blocked"===(null===(s=o.error)||void 0===s?void 0:s.code)&&"popup"===i&&(e.display="page",this.helloJS(t).login(e),Qi()),(0,O.of)(Object.assign({platform:t,error_code:-1,error_msg:null===(r=o.error)||void 0===r?void 0:r.message},o.error))})))}ListenLogin(){return this.helloJS$.pipe((0,K.w)((()=>(0,eo.R)(this.helloJS,"auth.login").pipe((0,to.q)(1)))),(0,K.w)((e=>((0,ze.e8)(Vi),this.afterHelloAuthentication(e[0])))))}afterHelloAuthentication(e){return(0,O.of)(e).pipe((0,K.w)((e=>{const{network:t,authResponse:i}=e,o="vk"===t?{v:"5.81"}:void 0;return(0,Ji.D)(this.helloJS(t).api("me",o)).pipe((0,P.U)((e=>{const{access_token:o="",oauth_token_secret:n=""}=i;return{openid:e.id,access_token:o,access_token_secret:n,platform:t,platform_app_id:Je.Oy[t]}})))})))}};io=(0,u.__decorate)([(0,R.G)(),(0,u.__metadata)("design:paramtypes",[x.ZI])],io);let oo=class{constructor(e){this.loginReport=e}get Kakao$(){return window.Kakao?(0,O.of)(null):new A.y((e=>{i.e(2628).then(i.t.bind(i,39633,23)).then((({default:t})=>{window.Kakao=t,window.Kakao.init(Je.Sx),e.next(),e.complete()})).catch((t=>{console.error(t),e.next(),e.complete()}))}))}login(){return this.Kakao$.pipe((0,j.z)((()=>new A.y((e=>{const t=t=>{console.error(t),e.next({error_code:-1,error_msg:t.message,platform:"kakaotalk"}),e.complete()};window.Kakao.Auth.login({success(i){window.Kakao.API.request({url:"/v2/user/me",success:t=>{e.next(Object.assign({openid:t.id,platform_app_id:Je.Oy.kakaotalk,platform:"kakaotalk"},i)),e.complete()},fail:t})},fail:t})})))),(0,B.K)((e=>(this.loginReport.thirdPartyLoginResult(Object.assign(Object.assign({},e),{status:1,error_desc:e.error})),(0,O.of)({error_code:-1,platform:"kakaotalk",error_msg:e.message})))))}};oo=(0,u.__decorate)([(0,R.G)(),(0,u.__metadata)("design:paramtypes",[x.ZI])],oo);let no=class extends g.D{constructor(e,t,i,o,n,a,s,r,l){super(),this.service=e,this.loginResultDealModule=t,this.appBiz=i,this.contextModule=o,this.helloJS=n,this.kakaoSdk=a,this.appleSdk=s,this.slardar=r,this.loginReport=l,this.defaultState={platform:""}}handleHelloJSAuth(e){return e.pipe((0,j.z)((e=>this.helloJS.login(e).pipe((0,Re.b)((e=>this.reportThirdGetToken(e))),(0,P.U)((e=>e.error_code?"cancelled"===e.code?this.noop():this.loginResultDealModule.getActions().handleLoginResult(e):this.getActions().thirdLogin(e)))))))}handleHelloLoginEvent(e){return e.pipe((0,j.z)((()=>this.helloJS.ListenLogin().pipe((0,P.U)((e=>e.error_code?this.noop():this.getActions().thirdLogin(e)))))))}handleKakaoLogin(e){return e.pipe((0,j.z)((()=>this.kakaoSdk.login().pipe((0,P.U)((e=>(this.reportThirdGetToken(e),this.getActions().thirdLogin(e))))))))}handleAppleLogin(e){return e.pipe((0,j.z)((({appleToken:e})=>e?this.appleSdk.afterAppleAuthentication(e):this.appleSdk.login()))).pipe((0,Re.b)((e=>this.reportThirdGetToken(e))),(0,P.U)((e=>e.error_code?"popup_closed_by_user"===e.error?this.noop():this.loginResultDealModule.getActions().handleLoginResult(e):this.getActions().thirdLogin(e))))}handlePopupAuthorize(e){return e.pipe((0,T.M)(this.appBiz.state$),(0,j.z)((([{url:e,platform:t},{bizContext:i}])=>{var o;return this.jumpAuthorizationPage({url:e,isSmartPlayer:null===(o=null==i?void 0:i.playerInfo)||void 0===o?void 0:o.isSmartPlayer}).pipe((0,P.U)((({closeByUser:e})=>{if(e)return this.loginReport.thirdPartyLoginResult({error_code:-1,status:2,error_desc:"user cancel login"}),this.noop();const i=Gi(t);if("twitter"===t){const e=JSON.stringify({oauth_token:i.oauth_token,oauth_verifier:i.oauth_verifier});i.code=Wi.DS.encode(e)}return this.getActions().thirdLogin(Object.assign({openid:i.user_id,platform_app_id:Je.Oy[t],platform:t},i))})))})))}authPageGoRedirect(e){return e.pipe((0,T.M)(this.contextModule.state$),(0,P.U)((([{platform:e},{loginType:t,redirectUrl:i}])=>(((e,t)=>{const i=(0,fe.stringifyUrl)({url:`${window.location.origin}/login`,query:t});location.href=i,(0,ze.D$)(Yi,e)})(e,{type:t,redirect_uri:i}),this.noop()))))}dealPageAuthRedirect(e){return e.pipe((0,P.U)((()=>{const e=(0,ze.le)(Yi);if(!e)return this.noop();(0,ze.e8)(Yi);const t=Gi(e);if("twitter"===e){const e=JSON.stringify({oauth_token:t.oauth_token,oauth_verifier:t.oauth_verifier});t.code=Wi.DS.encode(e)}return this.getActions().thirdLogin(Object.assign({platform_app_id:Je.Oy[e],platform:e},t))})))}thirdLogin(e){return e.pipe((0,T.M)(this.contextModule.state$),(0,j.z)((([e,{isSecurityVerification:t}])=>e.error_code||!e.platform_app_id?(0,O.of)(this.loginResultDealModule.getActions().handleLoginResult(e)):(he.g.show(),(t?this.service.thirdVerify(Object.assign(Object.assign({},e),{login_only:!0})):this.service.thirdLogin(Object.assign(Object.assign({},e),{login_only:!0}))).pipe((0,P.U)((t=>(t.thirdQuery=Object.assign(Object.assign({},e),{profile_key:t.profile_key}),this.loginReport.setPlatform(e.platform),t.platform=e.platform,this.loginResultDealModule.getActions().handleLoginResult(t)))))))))}jumpAuthorizationPage(e){const{url:t,isSmartPlayer:i}=e;let o="";i||(o="resizable,scrollbars,width=500,height=550,display=popup");const n=window.open(t,"_blank",o);return n?new A.y((e=>{const t=setInterval((()=>{(!n||n.closed||n.authDoneClose)&&(clearInterval(t),e.next({closeByUser:!n.authDoneClose}),n.authDoneClose&&n.close(),e.complete())}),100)})):(0,$i.c)()}reportThirdGetToken(e){var t;const{error_code:i,code:o,error_msg:n,error:a,platform:s}=e;this.slardar.handleThirdGetToken({error_code:i?-1:0,error_message:null!==(t=null!=o?o:a)&&void 0!==t?t:n,platform:s})}};var ao;function so(){return so=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},so.apply(this,arguments)}(0,u.__decorate)([(0,m.cQ)(),(0,u.__metadata)("design:type",A.y)],no.prototype,"dispose$",void 0),(0,u.__decorate)([(0,m.Qm)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[A.y]),(0,u.__metadata)("design:returntype",void 0)],no.prototype,"handleHelloJSAuth",null),(0,u.__decorate)([(0,m.Qm)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[A.y]),(0,u.__metadata)("design:returntype",void 0)],no.prototype,"handleHelloLoginEvent",null),(0,u.__decorate)([(0,m.Qm)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[A.y]),(0,u.__metadata)("design:returntype",void 0)],no.prototype,"handleKakaoLogin",null),(0,u.__decorate)([(0,m.Qm)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[A.y]),(0,u.__metadata)("design:returntype",void 0)],no.prototype,"handleAppleLogin",null),(0,u.__decorate)([(0,m.Qm)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[A.y]),(0,u.__metadata)("design:returntype",void 0)],no.prototype,"handlePopupAuthorize",null),(0,u.__decorate)([(0,m.Qm)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[A.y]),(0,u.__metadata)("design:returntype",void 0)],no.prototype,"authPageGoRedirect",null),(0,u.__decorate)([(0,m.Qm)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[A.y]),(0,u.__metadata)("design:returntype",void 0)],no.prototype,"dealPageAuthRedirect",null),(0,u.__decorate)([(0,m.Qm)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[A.y]),(0,u.__metadata)("design:returntype",void 0)],no.prototype,"thirdLogin",null),no=(0,u.__decorate)([(0,h.Y)("ThirdPlatformModule"),(0,u.__metadata)("design:paramtypes",[ce.Q,nt,X.r,Te,io,oo,Xi,qi.M,x.ZI])],no);const ro=function(e){return l.createElement("svg",so({xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 48 48",width:"1em",height:"1em"},e),ao||(ao=l.createElement("path",{fillRule:"evenodd",d:"M32.54 4c.278 2.368-.73 4.699-2.203 6.412-1.537 1.687-3.999 2.978-6.395 2.811-.312-2.276.9-4.697 2.26-6.174C27.739 5.372 30.406 4.09 32.539 4zm7.844 13.647c-.276.153-4.7 2.614-4.65 7.625.055 6.058 5.697 8.059 5.766 8.08-.034.14-.883 2.89-2.999 5.68-1.768 2.458-3.621 4.86-6.56 4.905-1.399.03-2.342-.345-3.326-.734-1.026-.407-2.095-.831-3.77-.831-1.773 0-2.89.437-3.966.86-.932.364-1.833.717-3.104.766-2.801.097-4.94-2.624-6.772-5.06-3.659-4.97-6.51-14.01-2.689-20.159 1.851-3.016 5.23-4.96 8.837-5.011 1.59-.031 3.114.538 4.45 1.038 1.02.381 1.932.722 2.678.722.657 0 1.543-.328 2.576-.709 1.628-.601 3.62-1.336 5.648-1.137 1.387.036 5.338.508 7.887 3.962l-.006.003z",clipRule:"evenodd"})))},lo=(0,at.Z)("div",{target:"exattu0"})({display:"flex",alignItems:"center",justifyContent:"center",fontSize:"24px"},"label:DivShowMore;");lo.defaultProps=Object.assign(Object.assign({},lo.defaultProps),{"data-e2e":"see-more-btn"});const co={facebook:{text:"common_login_panel_button_facebook",icon:Mi.Z},google:{text:"common_login_panel_button_google",icon:Ri.Z},twitter:{text:"common_login_panel_button_twitter",icon:Fi.Z},instagram:{text:"common_login_panel_button_instagram",icon:Di.Z},apple:{text:"common_login_panel_button_apple",icon:()=>(0,o.jsx)(ro,{},void 0)},line:{text:"common_login_panel_button_line",icon:Bi.Z},kakaotalk:{text:"common_login_panel_button_kakaotalk",icon:zi.Z},vk:{text:"common_login_panel_button_vk",icon:Ni.Z}},po=({signUp:e})=>{const t=(0,s.fz)(x.ZI),i=(0,y.Q)("WebApp_Login"),n=(0,d.k6)(),{platformConfig:r}=Pt((()=>["platformConfig"]),[]),{isMobile:c,playerInfo:p}=(0,bt.m7)((0,S.h)((()=>["isMobile","playerInfo"]),[])),{name:u,isSmartPlayer:g}=(0,bt.m7)(p),{setShowInstagramCantLoginModal:m}=(0,a.qj)(Ae),{handleAppleLogin:h,handlePopupAuthorize:_,handleHelloJSAuth:v,handleHelloLoginEvent:b,handleKakaoLogin:k,dealPageAuthRedirect:w}=(0,a.qj)(no),[C,j]=(0,l.useState)(!1),P=(e=>{const t={show_num:2,order:"FACEBOOK,GOOGLE,INSTAGRAM,LINE,TWITTER,KAKAOTALK"},{isSignUp:i,platform:o,brandName:n="",platformConfig:a=t,phoenix:s}=e,r=Boolean(n),l=/mercedes/i.test(n),d="FACEBOOK,GOOGLE,TWITTER,APPLE,INSTAGRAM,LINE,KAKAOTALK,VK".toLocaleLowerCase().split(","),c="APPLE,INSTAGRAM".toLocaleLowerCase().split(","),p="LINE,KAKAOTALK,APPLE".toLocaleLowerCase().split(",");r&&(p.push("instagram","vk"),l&&p.push("facebook","twitter"));const u=s?{show_num:4,order:"FACEBOOK,GOOGLE,TWITTER,APPLE"}:a,g={expand:[],fold:[]};if(o){const e=d.find((e=>e===o));return e&&g.expand.push(e),g}const m=u.order.toLocaleLowerCase().split(","),h={expand:[...m.slice(0,u.show_num)],fold:[...m.slice(u.show_num)]};return r&&(h.expand=h.expand.filter((e=>!p.includes(e))),h.fold=h.fold.filter((e=>!p.includes(e)))),i?(h.expand=h.expand.filter((e=>!c.includes(e))),h.fold=h.fold.filter((e=>!c.includes(e)))):h.expand=h.expand.concat(h.fold),h.expand=h.expand.filter((e=>d.includes(e))),h.fold=h.fold.filter((e=>d.includes(e))),h})({platformConfig:r,isSignUp:e,brandName:u}),T=(0,l.useCallback)((()=>{const e=(()=>{const e=(0,fe.stringifyUrl)({url:`${window.location.origin}/oauth/?page=new`,query:{platform:["twitter"],oauthType:0,lang:"en"}});return(0,fe.stringifyUrl)({url:"https://us.tiktok.com/passport/web/web_login/",query:{platform_app_id:Je.Oy.twitter,platform:["twitter"],aid:"1459",next:encodeURIComponent(e),action:"login_only"}})})();_({url:e,platform:"twitter"})}),[_]),O=(0,l.useCallback)((()=>{const e=(0,fe.stringifyUrl)({url:"https://access.line.me/oauth2/v2.1/authorize",query:{response_type:"code",client_id:Je.z,redirect_uri:`${window.location.origin}/oauthLine/`,state:"1line",scope:"openid profile"}});_({url:e,platform:"line"})}),[_]),L=(0,l.useCallback)((()=>{const e=(0,fe.stringifyUrl)({url:"https://oauth.vk.com/authorize",query:{display:"page",response_type:"token",client_id:Je.zH,redirect_uri:"https://www.tiktok.com/login/",scope:"offline, v",state:"vk_authorization"}});_({url:e,platform:"vk"})}),[_]),I=(0,l.useCallback)((()=>{c?m(!0):n.push({pathname:f.gY.loginDownloadApp,state:{fromIns:!0}})}),[c,m,n]),A=(0,l.useCallback)((i=>()=>{var o,n;switch(t.setPlatform(i),t.loginSubmit({signUp:e}),i){case"apple":h({});break;case"twitter":T();break;case"line":O();break;case"facebook":case"google":v({force:!0,platform:i,display:g?"page":"popup",redirect_uri:"https://www.tiktok.com/login/",scope:null!==(n=null===(o=co[i])||void 0===o?void 0:o.scope)&&void 0!==n?n:""});break;case"vk":L();break;case"kakaotalk":k();break;case"instagram":I()}}),[t,g,e,h,T,O,v,k,I,L]),E=(0,l.useCallback)((()=>{j(!0)}),[]),M=(0,l.useCallback)((e=>()=>{h({appleToken:e})}),[h]);(0,l.useEffect)((()=>(document.addEventListener("AppleIDSignInOnSuccess",M),()=>{document.removeEventListener("AppleIDSignInOnSuccess",M)})),[M]),(0,l.useEffect)((()=>{(()=>{if(location.hash){const{state:e,access_token:t,user_id:i}=fe.parse(location.hash.substr(1));"vk_authorization"===e&&(Hi("vk",{access_token:null==t?void 0:t.toString(),user_id:null==i?void 0:i.toString()}),window.authDoneClose=!0)}})(),Boolean((0,ze.le)(Vi))&&b()}),[b]),(0,l.useEffect)((()=>{w()}),[w]);const R=(0,l.useCallback)((e=>{13===e.keyCode&&j(!0)}),[j]);return(0,o.jsxs)(o.Fragment,{children:[P.expand.map((e=>co[e]?(0,o.jsx)($t,{text:i(co[e].text),type:e,Icon:co[e].icon,onClick:A(e),focusable:!0},e):null)),P.fold.length>0&&e&&!C&&(0,o.jsxs)(lo,Object.assign({onClick:E,onKeyDown:R,tabIndex:0,role:"button"},{children:[" ",(0,o.jsx)(Ui.Z,{},void 0)]}),void 0),C&&P.fold.map((e=>co[e]?(0,o.jsx)($t,{text:i(co[e].text),Icon:co[e].icon,onClick:A(e),focusable:!0},e):null))]},void 0)};function uo(){const{ageGateAction:e}=(0,a.mp)($),{region:t}=(0,bt.m7)((0,w.Lh)((()=>["region"]),[])),{isMobile:i}=(0,bt.m7)((0,S.h)((()=>["isMobile"]),[]));return i&&0!==e?f.gY.signupAgeGate:"KR"===t?f.gY.signupPolicyConfirm:f.gY.signupPhone}var go=i(43179);const mo=(0,l.memo)((function({disabled:e,children:t}){const{loginModalSwitchPath:i}=(0,a.mp)(_);return i?(0,o.jsx)(go.ZP,Object.assign({disabled:e,autoFocus:!1},{children:t}),void 0):(0,o.jsx)(o.Fragment,{children:t},void 0)})),ho=(0,at.Z)("div",{target:"exd0a430"})((({isMobile:e})=>({width:"375px",margin:"auto",padding:e?"0 30px":"unset"})),"label:DivLoginContainer;"),_o=(0,at.Z)("div",{target:"exd0a431"})((({isMobile:e})=>({padding:e?"0 30px":"unset"})),"label:DivHomeContainer;"),vo=(0,at.Z)("div",{target:"exd0a432"})((({theme:e})=>[(0,st.GI)({theme:e,color:"TextQuaternary"}),{fontSize:"15px",lineHeight:"18px",margin:"12px 0 32px",textAlign:"center"}]),"label:DivDescriptionContainer;"),yo=(0,at.Z)("h2",{target:"exd0a433"})((({theme:e})=>[(0,st.GI)({theme:e,color:"TextPrimary",fontFamily:"Sofia"}),{fontSize:e.isMobile?"24px":"32px",margin:"16px auto",fontWeight:"bold",textAlign:"center"}]),"label:H2Title;"),bo=()=>{const e=(0,y.Q)("WebApp_Login"),{loginModalShow:t}=(0,a.mp)(v.r),{isModal:i}=(0,a.mp)(Te),{isMobile:n,playerInfo:s}=(0,bt.m7)((0,S.h)((()=>["isMobile","playerInfo"]),[])),{isSmartPlayer:r}=(0,bt.m7)(s),[c,p]=(0,l.useState)(!1),{loginTitle:u,loginSlogan:g,signUpSlogan:m,signUpTitle:h}=Pt((()=>["loginTitle","loginSlogan","signUpSlogan","signUpTitle"]),[]),_=(0,w.Lh)((()=>["abTestVersion"]),[]),b=(0,kt.N8)(null==_?void 0:_.abTestVersion,"periodic_login_popup_interval");let x=u;"v3"!==b&&"v5"!==b||(x="login_popup_modal_header");const k=(0,d.k6)(),{pathname:C,search:j}=k.location,P=C.startsWith(f.gY.signupHome),T=uo(),O=!P&&(!n||r),L=(0,l.useCallback)((()=>{P?Fe.W.event("click_sign_up"):Fe.W.event("click_login_button")}),[P]),I=(0,l.useCallback)((()=>{Fe.W.event("click_QR_login")}),[]),A=(0,l.useCallback)((()=>P?(0,o.jsx)(yo,Object.assign({"data-e2e":"sign-up-title",id:"login-modal-title"},{children:e(h)}),void 0):(0,o.jsx)(yo,Object.assign({"data-e2e":"login-title",id:"login-modal-title"},{children:e(x)}),void 0)),[e,P]),E=(0,l.useCallback)((()=>{if(t)return null;const i=e(P?m:g),n=P?"sign-up-desc":"login-desc";return(0,o.jsx)(vo,Object.assign({"data-e2e":n},{children:i}),void 0)}),[e,P]),{loginQRcode:M,loginPath:R}=(0,l.useMemo)((()=>{const e=i?j:"";return{loginQRcode:f.gY.loginQRcode+e,loginPath:P?T+e:f.gY.loginPhoneOrEmail+e}}),[i,j,P,T]),F=(0,l.useCallback)((e=>{9===e.keyCode&&p(!0)}),[]);return(0,o.jsxs)(o.Fragment,{children:[n&&(0,o.jsx)(Nt,{showClose:!0},void 0),(0,o.jsxs)(_o,Object.assign({isMobile:n,onKeyDown:F},{children:[A(),E(),(0,o.jsxs)(mo,Object.assign({disabled:c},{children:[O&&(0,o.jsx)(Ei,Object.assign({path:M,underline:!1},{children:(0,o.jsx)($t,{text:e("common_login_panel_button_qrcode"),Icon:ft.Z,onClick:I},void 0)}),void 0),(0,o.jsx)(Ei,Object.assign({underline:!1,path:R},{children:(0,o.jsx)($t,{text:e(P?"common_registration_panel_button_phoneoremail":"common_login_panel_button_phoneoremailorusername"),Icon:xt.Z,onClick:L},void 0)}),void 0),(0,o.jsx)(po,{signUp:P},void 0)]}),void 0)]}),void 0),n&&(0,o.jsx)(Ii,{},void 0)]},void 0)};var fo=i(54393),xo=i.n(fo),ko=i(88700),wo=i(93491),So=i(99603);const Co=(0,at.Z)("h2",{target:"e1521l5b1"})((({theme:e})=>[(0,st.GI)({theme:e,color:"TextPrimary",fontFamily:"Sofia"}),{fontSize:"32px",margin:"16px auto",fontWeight:"bold",textAlign:"center",wordWrap:"break-word"}]),"label:H2Title;"),jo=(0,at.Z)("div",{target:"e1521l5b3"})((({theme:e})=>[(0,st.GI)({theme:e,color:"TextPrimary",fontWeight:"semiBold"}),{fontSize:"15px",display:"flex",justifyContent:"space-between",marginBottom:"5px"}]),"label:DivDescription;"),Po=(0,at.Z)("div",{target:"e1521l5b4"})((({theme:e})=>[{marginTop:"20px",border:"1px solid",borderColor:e.colors.LineSecondary2,padding:"13px",borderRadius:"2px",width:"100%",position:"relative",":before":{content:'""',height:"16px",position:"absolute",background:e.colors.BGPrimary,width:"16px",top:"-8px",left:"rtl"===e.direction?"unset":"calc(50% - 8px)",right:"rtl"===e.direction?"calc(50% - 8px)":"unset",borderInlineEnd:`1px solid ${e.colors.LineSecondary2}`,borderTop:`1px solid ${e.colors.LineSecondary2}`,transform:"rotateZ(-45deg)"}}]),"label:DivPhoneNotRegistered;"),To=(0,at.Z)("p",{target:"e1521l5b5"})((({theme:e,link:t})=>[{fontSize:"12px",lineHeight:"17px",color:t?e.colors.Primary:e.colors.TextPrimary,fontWeight:600,margin:"0 0 8px",cursor:"pointer"}]),"label:PPhoneNotRegistered;");var Oo,Lo=i(95731),Io=i(33874),Ao=i(94328);!function(e){e.Init="init",e.GetCode="new",e.Scanned="scanned",e.Confirmed="confirmed",e.Expired="expired",e.Refused="refuse",e.Error="error"}(Oo||(Oo={}));let Eo=class extends g.D{constructor(e,t,i){super(),this.service=e,this.fetch=t,this.loginSlardar=i,this.defaultState={status:"init",inQrcodePage:!1}}setStatus(e,t){e.status=t}setInQRCodePage(e,t){e.inQrcodePage=t,t&&(e.status="init")}setGetQrcodeResutl(e,t){const{qrCodeUrl:i,clientSecret:o,token:n}=t;e.token=n,e.clientSecret=o,e.qrCodeUrl=i,e.status="new"}getQrCodeUrl(e){return e.pipe((0,j.z)((()=>this.service.getQrCodeUrl({next:"https://www.tiktok.com"}).pipe((0,j.z)((e=>{const{token:t,qrcode_index_url:i}=e,o=function(e=8){const t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");let i="";for(let o=0;o<e;o++)i+=t[Math.ceil(35*Math.random())];return i}(),n=et().parse(decodeURIComponent(i).split("?")[1]),{next_url:a}=n,s=(0,u.__rest)(n,["next_url"]),r=`${a}?client_secret=${o}`,l=`${decodeURIComponent(i).split("?")[0]}?${et().stringify(Object.assign(Object.assign({},s),{next_url:r}))}`;return this.shortenQrUrl(l).pipe((0,P.U)((e=>{var i;return this.getActions().setGetQrcodeResutl({token:t,clientSecret:o,qrCodeUrl:null!==(i=e.short_url)&&void 0!==i?i:l})})))}))))))}checkQrConnect(e){return e.pipe((0,T.M)(this.state$),(0,j.z)((([{ttpConfig:e,oldStatus:t},{token:i="",clientSecret:o=""}])=>this.checkQrcodeRequest({token:i,clientSecret:o,ttpConfig:e,oldStatus:t}).pipe((0,P.U)((e=>{const{status:t,error_code:i,description:o}=e;return i?(me(o),this.getActions().setStatus("error")):this.getActions().setStatus(t)}))))))}shortenQrUrl(e){return this.fetch.post("https://www.tiktok.com/shorten/",{body:(0,Xe.stringify)({belong:"tiktok-webapp-qrcode",persist:0,expired_time:3600,targets:e})}).pipe((0,P.U)((e=>{var t;return null!==(t=e.data[0])&&void 0!==t?t:{status:"failed",short_url:void 0}})),(0,B.K)((e=>(this.loginSlardar.QRCodeShortenFail({code:`${e.code}`}),(0,O.of)({status:"failed",short_url:void 0})))))}checkQrcodeRequest(e){const{token:t,clientSecret:i,ttpConfig:o,oldStatus:n}=e,{open:a,syncSeverList:s}=o||{},r=a?s:[{name:"gloable",domain:""}];return(0,$e.D)(r.map((e=>this.service.checkQrconnect({token:null!=t?t:"",next:"https://www.tiktok.com",baseURL:e.domain})))).pipe((0,j.z)((e=>{const t=e.find((e=>e.client_secret===i));for(const o of e){const{status:e,client_secret:a,error_code:s,description:r}=t||o;if(this.state.inQrcodePage&&("init"===e||"new"===e||e===n))throw new Error("user not scanned, need check agin");return a===i?(0,O.of)({status:e}):s?(0,O.of)({error_code:s,description:r}):(0,O.of)({status:e})}return(0,O.of)(this.noop())})),(0,Lo.a)((e=>e.pipe((0,Io.j)((()=>(0,Ao.H)(800)))))))}};(0,u.__decorate)([(0,m.cQ)(),(0,u.__metadata)("design:type",A.y)],Eo.prototype,"dispose$",void 0),(0,u.__decorate)([(0,m.lF)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[Object,String]),(0,u.__metadata)("design:returntype",void 0)],Eo.prototype,"setStatus",null),(0,u.__decorate)([(0,m.lF)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[Object,Boolean]),(0,u.__metadata)("design:returntype",void 0)],Eo.prototype,"setInQRCodePage",null),(0,u.__decorate)([(0,m.lF)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[Object,Object]),(0,u.__metadata)("design:returntype",void 0)],Eo.prototype,"setGetQrcodeResutl",null),(0,u.__decorate)([(0,m.Qm)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[A.y]),(0,u.__metadata)("design:returntype",void 0)],Eo.prototype,"getQrCodeUrl",null),(0,u.__decorate)([(0,m.Qm)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[A.y]),(0,u.__metadata)("design:returntype",void 0)],Eo.prototype,"checkQrConnect",null),Eo=(0,u.__decorate)([(0,h.Y)("QRCodeModule"),(0,u.__metadata)("design:paramtypes",[ce.Q,z.r,qi.M])],Eo);var Mo,Ro=i(19891),Fo=i(34994),Do=i(24112),Bo=i(11580);function zo(){return zo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},zo.apply(this,arguments)}const No=function(e){return l.createElement("svg",zo({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 48 48",width:"1em",height:"1em"},e),Mo||(Mo=l.createElement("path",{fill:"#0BE09B",fillRule:"evenodd",d:"M42.692 12.722a1 1 0 01-.03 1.414L18.886 36.944a2 2 0 01-2.8-.03L5.294 26.121a1 1 0 010-1.414l1.414-1.414a1 1 0 011.414 0l9.408 9.408 22.365-21.452a1 1 0 011.414.03l1.384 1.443z",clipRule:"evenodd"})))};var Uo=i(54363),Wo=i(96434);const $o=({theme:e,buttonTheme:t})=>{switch(t){case"default":return{borderWidth:"1px",borderStyle:"solid",borderRadius:"2px",color:e.colors.TextPrimary,borderColor:e.colors.LineSecondary2,backgroundColor:e.colors.BGTertiary2,":disabled":{borderColor:"rgb(227, 227, 229)",backgroundColor:e.colors.BGPrimary2,color:e.colors.TextQuaternary}};case"primary":return{borderRadius:"2px",border:"none",color:e.colors.ConstTextInverse,backgroundColor:e.colors.Primary,":disabled":{border:"none",color:e.colors.TextQuaternary,backgroundColor:e.colors.BGInput2}};default:return{":disabled":{}}}},qo={large:{minWidth:"248px",minHeight:"44px",fontSize:"15px",lineHeight:"18px",fontWeight:700},medium:{minWidth:"144px",height:"35px",fontSize:"14px",lineHeight:"17px",fontWeight:700},small:{minWidth:"88px",height:"28px",fontSize:"14px",lineHeight:"17px",fontWeight:700},tiny:{minWidth:"74px",minHeight:"24px",fontSize:"13px",lineHeight:"17px",fontWeight:600}},Ho=(0,Xt.Z)("button",{target:"e5u1qxo0"})((({buttonTheme:e="default",size:t="medium",theme:i,loading:o=!1})=>[$o({theme:i,buttonTheme:e}),qo[t],{display:"flex",position:"relative",alignItems:"center",justifyContent:"center",padding:"6px 8px",userSelect:"none",cursor:"pointer",boxSizing:"border-box",fontFamily:"ProximaNova, PingFangSC, sans-serif",":focus":{outline:"none"}},Object.assign({},o?{color:"transparent",pointerEvents:"none"}:{})]),"label:Button;"),Go=(0,l.memo)((function(e){var{buttonTheme:t,size:i,type:n="button",loading:a=!1,loadingTheme:s="primary",loadingSize:r="medium",children:l}=e,d=(0,u.__rest)(e,["buttonTheme","size","type","loading","loadingTheme","loadingSize","children"]);return(0,o.jsxs)(Ho,Object.assign({type:n,buttonTheme:t,loading:a,size:i},d,{children:[l,a&&(0,o.jsx)(Wo.$,{style:{position:"absolute"},theme:s,size:r},void 0)]}),void 0)})),Zo=(0,at.Z)("div",{target:"eot7zvz0"})((({theme:e})=>({display:"flex",marginTop:"48px",justifyContent:"space-between",padding:e.isMobile?"0 32px":"unset"})),"label:DivQRContentBody;"),Vo=(0,at.Z)("div",{target:"eot7zvz1"})({width:"180px"},"label:DivTextContainer;"),Qo=(0,at.Z)("div",{target:"eot7zvz2"})({width:"180px",height:"180px",position:"relative"},"label:DivCodeImage;"),Yo=(0,at.Z)("img",{target:"eot7zvz3"})({width:"180px",height:"180px",borderRadius:"12px",border:"1px solid rgb(242, 242, 242)",margin:"auto"},"label:ImgCode;"),Ko=(0,at.Z)("div",{target:"eot7zvz4"})((({theme:e})=>[(0,st.YJ)({direction:e.direction}),{position:"absolute",display:"flex",flexDirection:"column",width:"180px",height:"180px",top:0,backgroundColor:"rgba(250, 250, 250, 0.95)",borderRadius:"12px",padding:"0 24px",justifyContent:"center",alignItems:"center"}]),"label:DivCodeMask;"),Jo=(0,at.Z)("span",{target:"eot7zvz5"})({fontSize:"42px",height:"30px",marginBottom:"24px"},"label:SpanSuccessIcon;"),Xo=(0,at.Z)("p",{target:"eot7zvz6"})((({theme:e})=>[(0,st.GI)({theme:e,fontFamily:"Proxima"}),{fontWeight:600,lineHeight:"20px",fontSize:"14px"}]),"label:PCodeTip;"),en=(0,at.Z)("div",{target:"eot7zvz7"})({width:"100%",marginTop:"24px"},"label:DivStepContainer;"),tn=(0,at.Z)("p",{target:"eot7zvz8"})((({theme:e})=>[(0,st.GI)({theme:e,color:"TextPrimary",fontFamily:"Proxima"}),{fontSize:"14px",lineHeight:"20px",marginBottom:"4px",svg:{verticalAlign:"middle"}}]),"label:PStep;"),on=(0,at.Z)("img",{target:"eot7zvz9"})((({theme:e})=>({marginInlineStart:e.isMobile?"unset":"20px",height:e.isMobile?"230px":"270px"})),"label:ImgTip;"),nn=(0,at.Z)(Go,{target:"eot7zvz10"})({marginTop:"27px",fontSize:"16px"},"label:StyledButtonRefresh;"),an=(0,at.Z)(Uo.Z,{target:"eot7zvz11"})({transform:"rotateZ(90deg)"},"label:StyledRefreshIcon;"),sn=()=>{const e=(0,y.Q)("WebApp_Login"),t=(0,s.fz)(x.ZI),{ttpConfig:i}=Pt((()=>["ttpConfig"]),[]),{appId:n,region:r}=(0,bt.m7)((0,w.Lh)((()=>["appId","region"]),[])),{isMobile:d}=(0,bt.m7)((0,S.h)((()=>["isMobile"]),[])),[{qrCodeUrl:c,status:p},{getQrCodeUrl:u,checkQrConnect:g,setInQRCodePage:m}]=(0,a.b7)(Eo),{handleLoginResult:h}=(0,a.qj)(nt),_=(0,l.useCallback)((()=>{u()}),[u]);(0,l.useEffect)((()=>(m(!0),_(),()=>{m(!1)})),[]),(0,l.useEffect)((()=>{"scanned"===p&&(Fe.W.event("scan_QR_login"),g({ttpConfig:i,oldStatus:"scanned"})),"confirmed"===p&&(t.setPlatform("QRcode"),h({error_code:0,region:r}))}),[g,h,t,p,i,r]),(0,l.useEffect)((()=>{c&&g({ttpConfig:i})}),[g,c,i]);const{value:v}=(0,l.useContext)(So.hb),b=v?Ro:Fo;return(0,o.jsxs)(o.Fragment,{children:[d?(0,o.jsx)(Nt,{title:e("common_login_qrcode_title")},void 0):(0,o.jsx)(Co,Object.assign({"data-e2e":"qr-page-title"},{children:e("common_login_qrcode_title")}),void 0),(0,o.jsxs)(Zo,{children:[(0,o.jsxs)(Vo,{children:[(0,o.jsxs)(Qo,Object.assign({"data-e2e":"qr-code"},{children:[c?(0,o.jsx)(xo(),{size:180,value:c,style:{padding:"12px",borderRadius:"12px",border:"1px solid #f2f2f2"}},void 0):(0,o.jsx)(Yo,{src:1233===n?Do:Bo,alt:"qrcode"},void 0),["scanned","confirmed"].includes(p)&&(0,o.jsxs)(Ko,{children:[(0,o.jsx)(Jo,{children:(0,o.jsx)(No,{},void 0)},void 0),(0,o.jsx)(Xo,{children:e("common_login_qrcode_status_scanned")},void 0)]},void 0),["expired","refuse","error"].includes(p)&&(0,o.jsxs)(Ko,{children:[(0,o.jsx)(Xo,{children:e("common_login_qrcode_status_expired",{refresh_button:""})},void 0),(0,o.jsx)(nn,Object.assign({size:"tiny",onClick:_},{children:(0,o.jsx)(an,{},void 0)}),void 0)]},void 0),"init"===p&&(0,o.jsx)(Ko,{children:(0,o.jsx)(G.g,{center:!0,size:"small"},void 0)},void 0)]}),void 0),(0,o.jsxs)(en,Object.assign({"data-e2e":"qr-body"},{children:[(0,o.jsx)(tn,{children:e("common_login_qrcode_copy_1")},1),(0,o.jsxs)(tn,{children:[e("common_login_qrcode_copy_2",{addfriends_button:(0,o.jsx)(ko.Z,{width:"16",height:"16",fill:"currentColor"},void 0)})," "]},2),(0,o.jsx)(tn,{children:e("common_login_qrcode_copy_3",{qrscanner_button:(0,o.jsx)(wo.Z,{width:"16",height:"16",fill:"currentColor"},void 0)})},3)]}),void 0)]},void 0),(0,o.jsx)(on,{src:b,"data-e2e":"qr-img"},void 0)]},void 0)]},void 0)},rn={email_verify:"email",pwd_verify:"password",mobile_sms_verify:"phone",totp_verify:"totp"},ln={email:"email_verify",password:"pwd_verify",phone:"mobile_sms_verify",totp:"totp_verify"};let dn=class extends g.D{constructor(e,t,i,o,n,a){super(),this.service=e,this.third=t,this.login=i,this.loginReport=o,this.phone=n,this.t=a,this.defaultState={loginLoading:!1}}setTwoStepVerifyRes(e,t){var i;const o=t.verify_ways,n={};o.forEach((({verify_way:e,mobile:t,email:i})=>{n[e]=e===ln.totp?"totp":null!=t?t:i})),e.verifyWays=n,e.type=t.default_verify_way||(null===(i=o[0])||void 0===i?void 0:i.verify_way),e.isTwoStep=Boolean(null==t?void 0:t.default_verify_way),e.thirdQuery=t.thirdQuery,e.accountQuery=t.accountQuery,e.password=t.password,e.verify_ticket=t.verify_ticket,e.not_login_ticket=t.not_login_ticket,e.sms_code_key=t.sms_code_key,e.resetPwdType=t.resetPwdType,e.email=t.email}setTwoStepType(e,t){e.type=t}setErrorMsg(e,t){e.errorMsg=this.overrideErrorMsg(e,t)}setErrorCode(e,t){e.errorCode=t}setLoginLoading(e,t){e.loginLoading=t}handleTOTPVerifyAndRestPwd(e){return e.pipe((0,T.M)(this.state$),(0,j.z)((([e,{verify_ticket:t,resetPwdType:i}])=>{const{code:o,password:n}=e;return this.service.verifyTOTPCode({code:o,verify_ticket:t}).pipe((0,Re.b)((e=>this.reportTwoStepResult({error_code:e.error_code,type:"totp"}))),(0,K.w)((e=>e.error_code?(0,O.of)(this.getActions().setErrorCode(e.error_code),this.getActions().setErrorMsg(e.description)):(0,O.of)(this.login.getActions().handleChangePwdByTicket({password:n,ticket:t,type:null!=i?i:"email"})))),(0,L.O)(this.getActions().setLoginLoading(!0)),(0,I.l)(this.getActions().setLoginLoading(!1)))})))}handleTOTPVerifyAndSmsLogin(e){return e.pipe((0,T.M)(this.state$,this.phone.state$),(0,j.z)((([e,{sms_code_key:t=""},{mobile:i}])=>this.service.verifyTOTPCode(e).pipe((0,Re.b)((e=>this.reportTwoStepResult({error_code:e.error_code,type:"totp"}))),(0,K.w)((e=>e.error_code?(0,O.of)(this.getActions().setErrorCode(e.error_code),this.getActions().setErrorMsg(e.description)):this.service.smsLoginContinue({mobile:i,sms_code_key:t}).pipe((0,P.U)((e=>this.login.getActions().handleLoginResult(e))),(0,L.O)(this.getActions().setLoginLoading(!0)),(0,I.l)(this.getActions().setLoginLoading(!1))))),(0,L.O)(this.getActions().setLoginLoading(!0)),(0,I.l)(this.getActions().setLoginLoading(!1))))))}handlePasswordVerify(e){return e.pipe((0,T.M)(this.state$,this.phone.state$),(0,j.z)((([e,{sms_code_key:t=""},{mobile:i}])=>this.service.accountVerify(e).pipe((0,Re.b)((e=>this.reportTwoStepResult({error_code:e.error_code,type:"password"}))),(0,K.w)((e=>e.error_code?(0,O.of)(this.getActions().setErrorMsg(e.description)):this.service.smsLoginContinue({mobile:i,sms_code_key:t}).pipe((0,P.U)((e=>this.login.getActions().handleLoginResult(e))),(0,L.O)(this.getActions().setLoginLoading(!0)),(0,I.l)(this.getActions().setLoginLoading(!1))))),(0,L.O)(this.getActions().setLoginLoading(!0)),(0,I.l)(this.getActions().setLoginLoading(!1))))))}handleCodeVerify(e){return e.pipe((0,T.M)(this.state$),(0,j.z)((([e,{type:t="",thirdQuery:i,accountQuery:o}])=>i||o?(t===ln.email?this.service.validateEmailCodeForLogin(e):t===ln.totp?this.service.verifyTOTPCode(e):this.service.validateMobileCodeForLogin(e)).pipe((0,Re.b)((e=>this.reportTwoStepResult({error_code:e.error_code,type:rn[t]}))),(0,K.w)((e=>e.error_code?(0,O.of)(this.getActions().setErrorCode(e.error_code),this.getActions().setErrorMsg(e.description)):i?(0,O.of)(this.third.getActions().thirdLogin(i)):o?(0,O.of)(this.login.getActions().handlePasswordLogin(o)):(0,O.of)(this.noop()))),(0,L.O)(this.getActions().setLoginLoading(!0)),(0,I.l)(this.getActions().setLoginLoading(!1))):t===ln.totp?(0,O.of)(this.getActions().handleTOTPVerifyAndSmsLogin(e)):(0,O.of)(this.getActions().handleEmailCodeVerify(e)))))}handleEmailCodeVerify(e){return e.pipe((0,j.z)((e=>this.service.emailCodeLogin(e).pipe((0,Re.b)((e=>this.reportTwoStepResult({error_code:e.error_code,type:"email"}))),(0,P.U)((e=>this.login.getActions().handleLoginResult(e))),(0,L.O)(this.getActions().setLoginLoading(!0)),(0,I.l)(this.getActions().setLoginLoading(!1))))))}handleSmsCodeVerifyReset(e){return e.pipe((0,j.z)((e=>this.service.validateMobileCodeForReset(e).pipe((0,Re.b)((e=>this.reportTwoStepResult({error_code:e.error_code,type:"phone"}))),(0,P.U)((e=>this.login.getActions().handleLoginResult(e))),(0,L.O)(this.getActions().setLoginLoading(!0)),(0,I.l)(this.getActions().setLoginLoading(!1))))))}reportTwoStepResult(e){this.loginReport.twoStepResult({verification_method:e.type,result:e.error_code?"fail":"success",error_code:e.error_code})}overrideErrorMsg(e,t){if(!t||!e.errorCode)return t;if(le.includes(e.errorCode)&&ne[e.errorCode]){const t=ne[e.errorCode];return this.t(t)}return t}};(0,u.__decorate)([(0,m.cQ)(),(0,u.__metadata)("design:type",A.y)],dn.prototype,"dispose$",void 0),(0,u.__decorate)([(0,m.lF)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[Object,Object]),(0,u.__metadata)("design:returntype",void 0)],dn.prototype,"setTwoStepVerifyRes",null),(0,u.__decorate)([(0,m.lF)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[Object,Object]),(0,u.__metadata)("design:returntype",void 0)],dn.prototype,"setTwoStepType",null),(0,u.__decorate)([(0,m.lF)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[Object,String]),(0,u.__metadata)("design:returntype",void 0)],dn.prototype,"setErrorMsg",null),(0,u.__decorate)([(0,m.lF)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[Object,Number]),(0,u.__metadata)("design:returntype",void 0)],dn.prototype,"setErrorCode",null),(0,u.__decorate)([(0,m.lF)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[Object,Boolean]),(0,u.__metadata)("design:returntype",void 0)],dn.prototype,"setLoginLoading",null),(0,u.__decorate)([(0,m.Qm)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[A.y]),(0,u.__metadata)("design:returntype",void 0)],dn.prototype,"handleTOTPVerifyAndRestPwd",null),(0,u.__decorate)([(0,m.Qm)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[A.y]),(0,u.__metadata)("design:returntype",void 0)],dn.prototype,"handleTOTPVerifyAndSmsLogin",null),(0,u.__decorate)([(0,m.Qm)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[A.y]),(0,u.__metadata)("design:returntype",void 0)],dn.prototype,"handlePasswordVerify",null),(0,u.__decorate)([(0,m.Qm)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[A.y]),(0,u.__metadata)("design:returntype",void 0)],dn.prototype,"handleCodeVerify",null),(0,u.__decorate)([(0,m.Qm)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[A.y]),(0,u.__metadata)("design:returntype",void 0)],dn.prototype,"handleEmailCodeVerify",null),(0,u.__decorate)([(0,m.Qm)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[A.y]),(0,u.__metadata)("design:returntype",void 0)],dn.prototype,"handleSmsCodeVerifyReset",null),dn=(0,u.__decorate)([(0,h.Y)("TwoStepModule"),(0,u.__param)(5,(0,C.t)(E.s$)),(0,u.__metadata)("design:paramtypes",[ce.Q,no,nt,x.ZI,Ie,Function])],dn);const cn=(0,at.Z)(rt.W,{target:"e1w6iovg0"})((({theme:e})=>[{width:"100%",marginTop:e.isMobile?"32px":"21px","&:focus-visible":{outline:"1px solid blue"}}]),"label:StyledButton;"),pn=e=>{const{children:t}=e,i=(0,u.__rest)(e,["children"]);return(0,o.jsx)(cn,Object.assign({type:"submit",buttonTheme:"primary",size:"largeNew"},i,{children:t}),void 0)},un=(0,at.Z)("div",{target:"e1rj4s2h0"})((({theme:e})=>[gn(e.isMobile)]),"label:DivContainer;"),gn=e=>e?{padding:"0px 32px 32px"}:{},mn=(0,at.Z)("div",{target:"e1rj4s2h1"})((({theme:e})=>[(0,st.GI)({theme:e,color:"TextPrimary",fontFamily:"Sofia",fontWeight:"bold"}),hn(e.isMobile)]),"label:DivTitleContainer;"),hn=e=>e?{fontSize:"20px",marginTop:"24px"}:{fontSize:"33px"},_n=(0,at.Z)("p",{target:"e1rj4s2h2"})((({theme:e})=>[(0,st.GI)({theme:e,color:"TextSecondary",fontFamily:"Proxima"}),vn(e.isMobile)]),"label:PDescriptionContainer;"),vn=e=>e?{fontSize:"14px",lineHeight:"17px",margin:"8px 0"}:{fontSize:"16px",lineHeight:"22px",margin:"16px 0"},yn=({theme:{isMobile:e}})=>[bn(e)],bn=e=>e?{position:"absolute",bottom:"28px",left:"32px",right:"32px",width:"auto"}:{},fn=(0,at.Z)(pn,{target:"e1rj4s2h5"})(yn,"label:StyledTwoStepButton;"),xn=(0,at.Z)("hr",{target:"e1rj4s2h6"})({border:0,margin:0,marginTop:"48px",marginBottom:"30px",borderBottom:"1px solid rgba(22, 24, 35, .12)"},"label:HrDivider;"),kn=(0,at.Z)("p",{target:"e1rj4s2h7"})((({theme:e})=>[(0,st.GI)({theme:e,typography:"P2",fontWeight:"bold",fontFamily:"Proxima"}),{margin:0}]),"label:PTitle;");let wn=class extends g.D{constructor(){super(...arguments),this.defaultState={password:""}}setPassword(e,t){e.password=t}setHasInvalid(e,t){e.hasInvalid=t}setLengthValid(e,t){e.lengthValid=t}setContentValid(e,t){e.contentValid=t}updatePassword(e){return e.pipe((0,j.z)((({value:e})=>{const{hasInvalid:t,contentValid:i,lengthValid:o}=(e=>{if(!e)return{};const t=/[^\w~!@#$%^&*()+,.:;=<>?/|\-[\]\\]+/,i=/[_~!@#$%^&*()+,.:;=<>?/|\-[\]\\]+/.test(e)&&/[0-9]+/.test(e)&&/[A-Za-z]+/.test(e)&&!t.test(e),o=e.length>=8&&e.length<=20;return{hasInvalid:t.test(e),lengthValid:o,contentValid:i}})(e);return(0,O.of)(this.getActions().setPassword(e),this.getActions().setHasInvalid(t),this.getActions().setLengthValid(o),this.getActions().setContentValid(i))})))}};(0,u.__decorate)([(0,m.cQ)(),(0,u.__metadata)("design:type",A.y)],wn.prototype,"dispose$",void 0),(0,u.__decorate)([(0,m.lF)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[Object,String]),(0,u.__metadata)("design:returntype",void 0)],wn.prototype,"setPassword",null),(0,u.__decorate)([(0,m.lF)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[Object,Object]),(0,u.__metadata)("design:returntype",void 0)],wn.prototype,"setHasInvalid",null),(0,u.__decorate)([(0,m.lF)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[Object,Object]),(0,u.__metadata)("design:returntype",void 0)],wn.prototype,"setLengthValid",null),(0,u.__decorate)([(0,m.lF)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[Object,Object]),(0,u.__metadata)("design:returntype",void 0)],wn.prototype,"setContentValid",null),(0,u.__decorate)([(0,m.Qm)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[A.y]),(0,u.__metadata)("design:returntype",void 0)],wn.prototype,"updatePassword",null),wn=(0,u.__decorate)([(0,h.Y)("SetPasswordModule")],wn);let Sn=class extends g.D{constructor(e,t){super(),this.service=e,this.history=t,this.defaultState={checkCodeLoading:!1,ticket:"",type:"phone"}}setErrorMsg(e,t){e.errorMsg=t}setTicket(e,t){e.ticket=t}setType(e,t){e.type=t}setForceResetTicket(e,t){e.conditional_login_ticket=t}setCheckCodeLoading(e,t){e.checkCodeLoading=t}checkEmailCodeForReset(e){return e.pipe((0,j.z)((e=>this.service.validateEmailCodeForReset(e).pipe((0,P.U)((e=>(e.resetType="email",this.getActions().handleCheckResult(e)))),(0,L.O)(this.getActions().setCheckCodeLoading(!0)),(0,I.l)(this.getActions().setCheckCodeLoading(!1))))))}checkPhoneCodeForReset(e){return e.pipe((0,j.z)((e=>this.service.validatePhoneCodeForReset(e).pipe((0,P.U)((e=>(e.resetType="phone",this.getActions().handleCheckResult(e)))),(0,L.O)(this.getActions().setCheckCodeLoading(!0)),(0,I.l)(this.getActions().setCheckCodeLoading(!1))))))}checkCodeForForceReset(e){return e.pipe((0,j.z)((e=>{var{type:t}=e,i=(0,u.__rest)(e,["type"]);return("email"===t?this.service.validateEmailCodeForForceReset(i):this.service.validatePhoneCodeForForceReset(i)).pipe((0,P.U)((e=>(e.resetType=t,e.forceTicket=i.conditional_login_ticket,this.getActions().handleCheckResult(e)))),(0,L.O)(this.getActions().setCheckCodeLoading(!0)),(0,I.l)(this.getActions().setCheckCodeLoading(!1)))})))}handleCheckResult(e){return e.pipe((0,j.z)((e=>{const{ticket:t,description:i,resetType:o,forceTicket:n}=e;return t?(this.history.push(f.gY.resetPassword),(0,O.of)(this.getActions().setTicket(t),this.getActions().setType(o),this.getActions().setForceResetTicket(n))):(0,O.of)(this.getActions().setErrorMsg(i))})))}};function Cn(e=[]){const[{errorMsg:t},i]=(0,a.b7)(nt),[{errorMsg:o},n]=(0,a.b7)(ot),{phone:s,areaCode:r}=(0,a.mp)(Ie),{email:c}=(0,a.mp)(Ue),[{code:p},{clearGetCodeError:u}]=(0,a.b7)(We),{password:g}=(0,a.mp)(wn),[{errorMsg:m},{setErrorMsg:h,setErrorCode:_}]=(0,a.b7)(dn),{setErrorMsg:v}=(0,a.qj)(Sn),[b,x]=(0,l.useState)(""),k=t||o||m,w=(0,y.Q)("WebApp_Login"),S=(0,d.k6)(),{pathname:C}=S.location;return(0,l.useEffect)((()=>{k&&(C===f.gY.loginHome||C===f.gY.loginHome||C===f.gY.signupAgeGate?me(w(k)):x(k))}),[w,S.location,k,C]),(0,l.useEffect)((()=>{i.clearLoginResult(),n.setErrorMsg(""),u(),x(""),v("")}),[s,r,c,p,i,n,g,...e]),(0,l.useEffect)((()=>()=>{i.clearLoginResult(),n.clearSignUpResult(),u(),x(""),h(""),_(0)}),[]),b}function jn(){const{phone:e,areaCode:t}=(0,a.mp)(Ie),{email:i}=(0,a.mp)(Ue),[{code:o,getCodeErrorMsg:n},{clearGetCodeError:s}]=(0,a.b7)(We);return(0,l.useEffect)((()=>{s()}),[e,t,i,o,s]),n}(0,u.__decorate)([(0,m.cQ)(),(0,u.__metadata)("design:type",A.y)],Sn.prototype,"dispose$",void 0),(0,u.__decorate)([(0,m.lF)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[Object,String]),(0,u.__metadata)("design:returntype",void 0)],Sn.prototype,"setErrorMsg",null),(0,u.__decorate)([(0,m.lF)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[Object,String]),(0,u.__metadata)("design:returntype",void 0)],Sn.prototype,"setTicket",null),(0,u.__decorate)([(0,m.lF)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[Object,String]),(0,u.__metadata)("design:returntype",void 0)],Sn.prototype,"setType",null),(0,u.__decorate)([(0,m.lF)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[Object,String]),(0,u.__metadata)("design:returntype",void 0)],Sn.prototype,"setForceResetTicket",null),(0,u.__decorate)([(0,m.lF)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[Object,Boolean]),(0,u.__metadata)("design:returntype",void 0)],Sn.prototype,"setCheckCodeLoading",null),(0,u.__decorate)([(0,m.Qm)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[A.y]),(0,u.__metadata)("design:returntype",void 0)],Sn.prototype,"checkEmailCodeForReset",null),(0,u.__decorate)([(0,m.Qm)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[A.y]),(0,u.__metadata)("design:returntype",void 0)],Sn.prototype,"checkPhoneCodeForReset",null),(0,u.__decorate)([(0,m.Qm)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[A.y]),(0,u.__metadata)("design:returntype",void 0)],Sn.prototype,"checkCodeForForceReset",null),(0,u.__decorate)([(0,m.Qm)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[A.y]),(0,u.__metadata)("design:returntype",void 0)],Sn.prototype,"handleCheckResult",null),Sn=(0,u.__decorate)([(0,h.Y)("CheckDigitCodeModule"),(0,u.__metadata)("design:paramtypes",[ce.Q,ue])],Sn);const Pn=(0,l.memo)((function(e){const t=(0,l.useCallback)((t=>{var i;t.preventDefault(),null===(i=e.onSubmit)||void 0===i||i.call(e)}),[e]);return(0,o.jsx)("form",Object.assign({onSubmit:t},{children:e.children}),void 0)}));var Tn=i(2131);const On=(0,at.Z)("div",{target:"e3v3zbj0"})((({theme:e,type:t})=>[(0,st.GI)({theme:e,fontFamily:"Proxima"}),{fontSize:"12px",lineHeight:"15px",margin:"4px 0",color:"error"===t?e.colors.Negative:"success"===t?e.colors.Positive:e.colors.TextTertiary,display:"flex",svg:{marginInlineEnd:"4px"}}]),"label:DivTextContainer;"),Ln=(0,l.memo)((({text:e,type:t="default",children:i,style:n,errorIcon:a})=>(0,o.jsxs)(On,Object.assign({type:t,style:n},{children:[a&&(0,o.jsx)(Tn.Z,{fill:"rgba(254, 44, 85, 1.0)"},void 0),i,e]}),void 0)));var In=i(27715);const An=(0,at.Z)("button",{target:"e1gzcpl10"})((({theme:e})=>[(0,st.GI)({color:"TextPrimary",theme:e,fontFamily:"Proxima",fontWeight:"semiBold"}),{margin:0,backgroundColor:e.colors.BGInput2,borderColor:e.colors.LineSecondary2,borderWidth:1.5,borderStyle:"solid",borderRadius:"rtl"===e.direction?"4px 0 0 4px":"0px 4px 4px 0px",borderInlineStartWidth:1.5,cursor:"pointer",fontSize:"16px",padding:"0px 16px",height:"44px",flexShrink:0,boxSizing:"content-box","&:disabled":{color:e.colors.TextQuaternary,cursor:"not-allowed"}}]),"label:ButtonSendCode;");An.defaultProps=Object.assign(Object.assign({},An.defaultProps),{"data-e2e":"send-code-button"});const En=(0,at.Z)(In.Z,{target:"e1gzcpl11"})({marginInlineStart:"4px",fontSize:"20px",verticalAlign:"middle",marginTop:"-2px",animation:"loading-circle-anim linear 1s infinite","@keyframes loading-circle-anim":{"0%":{transform:"rotate(0)"},"100%":{transform:"rotate(360deg)"}}},"label:StyledLoadingCircle;"),Mn=(0,l.memo)((function(e){const{text:t,disabled:i,countDownSecond:n=0,loading:a}=e;return(0,o.jsxs)(An,Object.assign({type:"button",onClick:e.onClick,disabled:Boolean(i)||Boolean(n),lo:!0},{children:[t+(n?`: ${n}s`:""),a&&(0,o.jsx)(En,{},void 0)]}),void 0)})),Rn=(e,t,i)=>{const[o,n]=(0,l.useState)(0),[a,s]=(0,l.useState)(!1),r=(0,l.useRef)({});return(0,l.useEffect)((()=>{const{hasSent:t,countDownSecond:o}=Ne(e,i);s(t),n(o)}),[e,i,t]),(0,l.useEffect)((()=>{o>0?(r.current&&clearTimeout(r.current),r.current=setTimeout((()=>{n(o-1)}),1e3)):r.current&&clearTimeout(r.current)}),[o]),{hasSent:a,countDownSecond:o}};var Fn,Dn=i(96367);function Bn(){return Bn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Bn.apply(this,arguments)}const zn=function(e){return l.createElement("svg",Bn({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 20",width:"1em",height:"1em"},e),Fn||(Fn=l.createElement("g",{stroke:"#161823",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10,strokeWidth:1.5,opacity:.5},l.createElement("path",{d:"M2.8 7.8c2.1 1 4.5 1.6 7 1.6s4.9-.6 7-1.6M9.8 9.8v3M5.1 9.2l-1.5 2.6M14.6 9.2l1.5 2.6"}))))};var Nn;function Un(){return Un=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Un.apply(this,arguments)}const Wn=function(e){return l.createElement("svg",Un({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 20",width:"1em",height:"1em"},e),Nn||(Nn=l.createElement("g",{stroke:"#161823",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10,strokeWidth:1.5,opacity:.5},l.createElement("path",{d:"M9.8 4.8c3 0 5.3 1.7 7 5-1.7 3.3-4 5-7 5s-5.3-1.7-7-5c1.6-3.4 4-5 7-5z"}),l.createElement("path",{d:"M9.8 11.8a2 2 0 100-4 2 2 0 000 4z"}))))},$n=(0,at.Z)("div",{target:"etcs7ny0"})({position:"relative",marginBottom:"9px"},"label:DivInputContainer;"),qn=(0,at.Z)("input",{target:"etcs7ny1"})((({theme:{colors:e,isMobile:t},border:i=!1,errorState:o=!1,hasIconPadding:n})=>[Hn(t,i,e),{"::placeholder":{color:e.TextQuaternary},color:o?e.Negative:e.TextPrimary,lineHeight:"100%",outline:"none",fontSize:"16px",height:"44px",caretColor:e.Primary,width:"100%",borderColor:o?e.Negative:e.LineSecondary2,paddingInlineEnd:n?"24px":"unset"}]),"label:InputContainer;"),Hn=(e,t,i)=>e?{background:"transparent",border:"none",borderRadius:"0",paddingInlineStart:"0px",borderBottom:t?"1px solid":"none"}:{borderRadius:"2px",backgroundColor:i.BGInput,border:t?"1px solid":"none",paddingInlineStart:"12px"},Gn=(0,at.Z)("div",{target:"etcs7ny2"})((({theme:e})=>[(0,st.YJ)({direction:e.direction,end:"0"}),{display:"flex",alignItems:"center",position:"absolute",top:0,height:"44px",paddingInlineEnd:e.isMobile?"4px":"16px"}]),"label:DivIconContainer;"),Zn=(0,at.Z)("i",{target:"etcs7ny3"})({lineHeight:"0",marginInlineStart:"16px",cursor:"pointer",fontSize:"20px"},"label:IPasswordIcon;"),Vn=(0,at.Z)("i",{target:"etcs7ny4"})((({theme:e})=>[{fontSize:"16px",lineHeight:"0",color:e.colors.LineInverse}]),"label:IDeleteIcon;"),Qn=(0,l.memo)((function(e){const{errorState:t,value:i,placeholder:n,password:a=!1,className:s,border:r=!0,style:d,autocomplete:c,name:p,autoFocus:u,disableDelete:g,readonly:m=!1,onInput:h=(()=>{}),onChange:_=(()=>{})}=e,v=(0,y.Q)(),[b,f]=(0,l.useState)("text"),{isMobile:x}=(0,bt.m7)((0,S.h)((()=>["isMobile"]),[]));(0,l.useEffect)((()=>{a&&f("password")}),[a]);const k=(0,l.useCallback)((()=>{f("text")}),[]),w=(0,l.useCallback)((()=>{f("password")}),[]),C=(0,l.useCallback)((()=>{const e={target:{value:""}};_(e),h(e)}),[_,h]),j=(0,l.useCallback)((e=>{_(e)}),[_]),P=(0,l.useCallback)((e=>{13!==e.keyCode&&32!==e.keyCode||(e.preventDefault(),e.stopPropagation(),"password"===b?k():w())}),[w,k,b]),T=Boolean((null==i?void 0:i.length)&&x&&!g),O=a&&(!x||g),L=O||T;return(0,o.jsxs)($n,Object.assign({className:s,style:d},{children:[(0,o.jsx)(qn,{autoFocus:u,value:i,type:b,errorState:t,placeholder:n,onChange:j,onFocus:e.onFocus,onBlur:e.onBlur,onInput:e.onInput,border:r,autoComplete:c,autocomplete:c,name:p,readOnly:m,hasIconPadding:L},void 0),(0,o.jsxs)(Gn,{children:[t&&!x&&(0,o.jsx)(Tn.Z,{fill:"rgba(254, 44, 85, 1.0)"},void 0),O&&("password"===b?(0,o.jsx)(Zn,Object.assign({onClick:k,onKeyDown:P,tabIndex:0,role:"button","aria-label":v("accessibilityLabels_login_modal_eyeClosedIcon"),"aria-pressed":!1},{children:(0,o.jsx)(zn,{},void 0)}),void 0):(0,o.jsx)(Zn,Object.assign({onClick:w,onKeyDown:P,tabIndex:0,role:"button","aria-label":v("accessibilityLabels_login_modal_eyeOpenIcon"),"aria-pressed":!0},{children:(0,o.jsx)(Wn,{},void 0)}),void 0)),T&&(0,o.jsx)(Vn,Object.assign({onClick:C},{children:(0,o.jsx)(Dn.Z,{},void 0)}),void 0)]},void 0)]}),void 0)})),Yn=(0,at.Z)("div",{target:"e2oypfg0"})({transition:"all 0.3s",display:"flex",justifyContent:"space-between"},"label:DivCodeInputContainer;"),Kn=(0,at.Z)(Qn,{target:"e2oypfg1"})((({theme:e})=>({flex:1,width:0,"& > input":{height:"47px",borderRadius:"rtl"===e.direction?"0 2px 2px 0":"2px 0px 0px 2px"}})),"label:StyledBaseInput;");Kn.defaultProps=Object.assign(Object.assign({},Kn.defaultProps),{"data-e2e":"digit-code-input"});const Jn=(0,l.memo)((function(e){const{errorMsg:t,disabled:i,codeFromNumber:n,loading:s,autoSendFirstTime:r,email:d,isSendCodeHidden:c}=e,p=(0,y.Q)("WebApp_Login"),[u,g]=(0,l.useState)(!1),[m,h]=(0,l.useState)(),[{codeFormatError:_,getCodeErrorMsg:v,code:b},{setCode:f}]=(0,a.b7)(We);(0,l.useEffect)((()=>{h(t)}),[t]),(0,l.useEffect)((()=>{h(v)}),[v]);const{countDownSecond:x,hasSent:k}=Rn(n,s,d);(0,l.useEffect)((()=>{if(r){const{countDownSecond:t}=Ne(n,d);!t&&e.onClickSendCode()}return()=>{f("")}}),[]);const w=(0,l.useCallback)((()=>{g(!0)}),[]),S=(0,l.useCallback)((()=>{g(!1)}),[]),C=(0,l.useCallback)((e=>{f(e.target.value)}),[f]),j=m||_,P=_?!u:Boolean(j);return(0,o.jsxs)("div",{children:[(0,o.jsxs)(Yn,{children:[(0,o.jsx)(Kn,{placeholder:p("common_login_reset_email_verify_title"),onFocus:w,onBlur:S,onChange:C,value:b,className:"code-input",autoComplete:"off",errorState:P},void 0),!c&&(0,o.jsx)(Mn,{loading:s,onClick:e.onClickSendCode,disabled:Boolean(i)||Boolean(x)||s,countDownSecond:x,text:p(k?"common_registration_phone_sms_button":"common_registration_phone_input_button")},void 0)]},void 0),P&&j&&(0,o.jsx)(Ln,{text:p(j),type:"error"},void 0)]},void 0)})),Xn=(0,at.Z)("p",{target:"e17ptbg00"})((({theme:e})=>[(0,st.GI)({theme:e,color:"TextPrimary",fontFamily:"Proxima",fontWeight:"semiBold"}),{fontSize:"20px",lineHeight:"24px",marginTop:"24px",marginBottom:"8px"}]),"label:PTitleContainer;"),ea=(0,at.Z)("p",{target:"e17ptbg01"})((({theme:e})=>[(0,st.GI)({theme:e,color:"TextTertiary2",fontFamily:"Proxima"}),{fontSize:"14px",lineHeight:"17px",marginBottom:"8px"}]),"label:PDescriptionContainer;"),ta=(0,at.Z)(In.Z,{target:"eo6lrdp0"})({marginInlineStart:"4px",fontSize:"20px",verticalAlign:"middle",marginTop:"-2px",animation:"loading-circle-anim linear 1s infinite","@keyframes loading-circle-anim":{"0%":{transform:"rotate(0)"},"100%":{transform:"rotate(360deg)"}}},"label:StyledLoadingCircle;"),ia=(0,at.Z)("div",{target:"e1ait7k0"})({display:"flex",margin:"20px 0",height:"18px",justifyContent:"space-between"},"label:DivContainer;"),oa=(0,at.Z)("span",{target:"e1ait7k1"})((({theme:e,disabled:t})=>[(0,st.GI)({theme:e,fontFamily:"Proxima",fontWeight:"semiBold"}),{color:t?e.colors.TextQuaternary:e.colors.TextPrimary,fontSize:"14px",lineHeight:"18px"}]),"label:SpanText;"),na=(0,l.memo)((function(e){const{loading:t,codeFromNumber:i,email:n}=e,{countDownSecond:a}=Rn(i,t,n),s=(0,y.Q)("WebApp_Login");return(0,o.jsxs)(ia,{children:[(0,o.jsx)(oa,Object.assign({onClick:e.onClick,disabled:Boolean(a)},{children:`${s("common_registration_phone_sms_button")}${a?`: ${a}s`:""}`}),void 0),t&&(0,o.jsx)(ta,{},void 0)]},void 0)})),aa=(0,at.Z)("p",{target:"e1tvj6xp0"})((({theme:e})=>[(0,st.GI)({theme:e,color:"TextTertiary2",fontFamily:"Proxima"}),{fontSize:"14px",lineHeight:"17px",marginBottom:"8px"}]),"label:PDescriptionContainer;"),sa=(0,at.Z)("div",{target:"e1tvj6xp1"})({height:"48px",display:"flex"},"label:DivInputContainer;"),ra=(0,at.Z)("input",{target:"e1tvj6xp2"})((({theme:e})=>[(0,st.YJ)({direction:e.direction,start:"-1000px"}),{opacity:0,position:"absolute"}]),"label:Input;"),la=(0,at.Z)("div",{target:"e1tvj6xp3"})((({theme:e,error:t,active:i})=>[(0,st.GI)({theme:e,color:"TextPrimary",fontFamily:"Proxima",fontWeight:"semiBold"}),{position:"relative",fontSize:"20px",flex:"1",borderBottom:"1px solid",borderBottomColor:t?e.colors.Negative:e.colors.LinePrimary2,display:"flex",alignItems:"center",justifyContent:"center",boxSizing:"border-box",marginInlineEnd:"10px",":last-child":{marginInlineEnd:"0"},"::before":{content:'""',position:"absolute",height:"16px",width:"2px",background:e.colors.Primary,margin:"auto",display:i?"block":"none",animation:"cursor-animation 1.5s linear infinite"},"@keyframes cursor-animation":{"0%":{opacity:0},"25%":{opacity:0},"50%":{opacity:1},"75%":{opacity:1},"100%":{opacity:0}}}]),"label:DivLabel;"),da=(0,l.memo)((function(e){const t=(0,y.Q)("WebApp_Login"),{codeFromNumber:i,codeDesc:n,email:s,loading:r,onSubmit:d,showTitle:c=!0,autoSubmit:p=!0,errorMsg:u="",autoSendFirstTime:g,isSendCodeHidden:m}=e,[{code:h,sendCodeLoading:_,getCodeErrorMsg:v=""},{setCode:b}]=(0,a.b7)(We),f=(0,l.useRef)(null),x=(0,l.useCallback)((()=>{var e;null===(e=f.current)||void 0===e||e.focus()}),[]),k=(0,l.useCallback)((e=>{if(6===h.length&&5===e.target.value.length)b("");else{const t=e.target.value.replace(/[^\d]/g,"");b(t)}}),[b,h]),w=(0,l.useCallback)((e=>{e.persist()}),[]);(0,l.useEffect)((()=>{if(g){const{countDownSecond:t}=Ne(i,s);!t&&e.onClickSendCode()}return()=>{b("")}}),[]),(0,l.useEffect)((()=>{6===h.length&&p&&d()}),[h,d,p]);const S=null!=n?n:t("Your code was sent to {code}",{code:i}),C=v||u,j=Boolean(C);return(0,o.jsxs)(o.Fragment,{children:[c&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Xn,{children:t("common_login_reset_email_verify_title")},void 0),(0,o.jsx)(aa,{children:S},void 0)]},void 0),(0,o.jsxs)(sa,Object.assign({onClick:x},{children:[(0,o.jsx)(ra,{ref:f,onChange:k,type:"tel",autoFocus:!0,value:h,autoComplete:"one-time-code",onAnimationEnd:w},void 0),Array(6).fill("").map(((e,t)=>(0,o.jsx)(la,Object.assign({active:h.length===t,error:j},{children:h[t]}),t)))]}),void 0),(0,o.jsx)(Ln,{text:t(C),type:"error"},void 0),!m&&(0,o.jsx)(na,{codeFromNumber:i,loading:_||r,onClick:e.onClickSendCode,email:s},void 0)]},void 0)})),ca=e=>{const{onSubmit:t}=e,i=(0,u.__rest)(e,["onSubmit"]),{isMobile:n}=(0,bt.m7)((0,S.h)((()=>["isMobile"]),[]));return n?(0,o.jsx)(da,Object.assign({},i,{onSubmit:e.onSubmit,autoSubmit:!1,showTitle:!1}),void 0):(0,o.jsx)(Jn,Object.assign({},i),void 0)},pa=(0,at.Z)(Ei,{target:"ep888o80"})({fontSize:"12px",display:"inline-block"},"label:StyledLink;"),ua=(0,l.memo)((function(e){const{text:t,path:i,replace:n,textTheme:a}=e;return(0,o.jsx)(pa,{path:i,text:t,replace:n,textTheme:a,onClick:e.onClick},void 0)})),ga=(0,at.Z)("div",{target:"e1mtjw290"})((({theme:e})=>({background:e.colors.BGPrimary,borderRadius:"8px",padding:"4px 0 0",textAlign:"center",margin:"auto",overflow:"hidden"})),"label:DivContainer;"),ma=(0,at.Z)("h5",{target:"e1mtjw291"})((({theme:e})=>[(0,st.GI)({theme:e,color:"TextPrimary",fontFamily:"Proxima",fontWeight:"bold"}),{fontSize:"20px",lineHeight:"24px",padding:"24px",margin:"0"}]),"label:H5Title;"),ha=(0,at.Z)(Go,{target:"e1mtjw292"})((({theme:e})=>({width:"100%",borderRadius:"0",height:"48px",fontWeight:600,border:"none",borderTop:`1px solid ${e.colors.LineSecondary2}`,"&:last-child":{color:e.colors.TextTertiary2}})),"label:StyledButton;"),_a={width:"80%",maxWidth:"400px",background:"transparent"},va=(0,l.memo)((({title:e,visible:t,actions:i})=>{const n=(0,y.Q)("WebApp_Login");return(0,o.jsx)(b.u_,Object.assign({contentStyle:_a,visible:t,maskCloseable:!1},{children:(0,o.jsxs)(ga,{children:[(0,o.jsx)(ma,{children:n(e)},void 0),i.map((({onClick:e,text:t},i)=>(0,o.jsx)(ha,Object.assign({onClick:e},{children:n(t)}),i)))]},void 0)}),void 0)})),ya=(0,at.Z)("div",{target:"e8ziav60"})((({theme:e})=>[(0,st.GI)({theme:e,color:"TextPrimary",fontWeight:"semiBold"}),{fontSize:"15px",lineHeight:"18px",margin:"20px 0 -12px 0"}]),"label:DivText;");ya.defaultProps=Object.assign(Object.assign({},ya.defaultProps),{"data-e2e":"forgot-passport-button"});const ba=(0,l.memo)((function({onClickForgetEmailPwd:e}){const t=(0,d.k6)(),i=(0,y.Q)("WebApp_Login"),[n,a]=(0,l.useState)(!1),s=(0,l.useCallback)((()=>{a(!0)}),[]),r=(0,l.useCallback)((()=>{t.push(f.gY.loginForgetPhonePassword)}),[t]),c=(0,l.useCallback)((()=>{null==e||e(),t.push(f.gY.loginForgetEmailPassword)}),[t,e]),p=(0,l.useMemo)((()=>[{text:"Phone number",onClick:r},{text:"Email",onClick:c},{text:"common_registration_phone_input_popup_button",onClick:()=>a(!1)}]),[c,r]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(ya,Object.assign({onClick:s},{children:[i("forget_password")," "]}),void 0),(0,o.jsx)(va,{visible:n,actions:p,title:"common_login_reset_popup_title"},void 0)]},void 0)})),fa=(0,l.memo)((function(e){const t=(0,y.Q)("WebApp_Login"),{isMobile:i}=(0,bt.m7)((0,S.h)((()=>["isMobile"]),[]));return i?(0,o.jsx)(ba,{onClickForgetEmailPwd:e.onClickForgetEmailPwd},void 0):(0,o.jsx)(ua,{text:t("forget_password"),path:f.gY.loginForgetEmailPassword,onClick:e.onClickForgetEmailPwd},void 0)}));var xa=i(28931);const ka=(0,at.Z)("span",{target:"eea75y50"})((({theme:e})=>[(0,st.GI)({theme:e,color:"TextPrimary",fontFamily:"Proxima",fontWeight:"bold"}),{display:"inline-block",fontSize:"14px",lineHeight:"17px",margin:"12px 0",paddingInlineEnd:"12px","& + &":{paddingInlineStart:"12px",position:"relative","&::before":Object.assign({content:'""',position:"absolute",height:"12px",width:"1px",top:"2px",background:e.colors.LineSecondary},[(0,st.YJ)({start:"0",direction:e.direction})])}}]),"label:SpanOptionsText;"),wa=(0,at.Z)("span",{target:"eea75y51"})((({theme:e})=>[(0,st.GI)({theme:e,color:"TextPrimary",fontFamily:"Proxima"}),{margin:"12px 0",display:"inline-block",fontSize:"14px",fontWeight:600,zIndex:20}]),"label:SpanChangeWayText;"),Sa=(0,at.Z)(Go,{target:"eea75y52"})((({theme:e})=>({width:"100%",borderRadius:"0",height:"48px",fontWeight:600,border:"none",borderBottom:`1px solid ${e.colors.LineSecondary2}`,"&:last-child":{color:e.colors.TextTertiary2,marginTop:"8px"}})),"label:StyledButton;"),Ca={[ln.email]:"twostep_verification_useemail",[ln.password]:"twostep_verification_usepassword",[ln.phone]:"twostep_verification_usesms",[ln.totp]:"twostep_verification_useauthenticator"},ja=(0,l.memo)((function(e){const t=(0,y.Q)("WebApp_Login"),{verifyWays:i=[]}=e;return(0,o.jsx)(o.Fragment,{children:i.map((i=>{const n=`/login/2sv/${rn[i]}`;return(0,o.jsx)(ka,Object.assign({onClick:e.onClickType(i)},{children:(0,o.jsx)(xa.rU,Object.assign({to:n},{children:t(Ca[i])}),void 0)}),i)}))},void 0)}));var Pa=i(8274);const Ta=(0,at.Z)("div",{target:"e1pjeozo0"})({position:"fixed",left:0,top:0,bottom:0,right:0,overflow:"auto",outline:"0px",zIndex:12,display:"none",transition:"all 500ms cubic-bezier(.075, .82, .165, 1)","&.enter-active":{display:"block"},"&.enter-done":{display:"block"},"&.exit":{display:"block"},"&.exit-active":{display:"none"}},"label:DivPopup;"),Oa=(0,at.Z)("div",{target:"e1pjeozo1"})((({theme:e})=>({position:"absolute",width:"100vw",bottom:0,left:0,right:0,background:e.colors.BGPlaceholderOpaque,borderRadius:"8px 8px 0 0",overflow:"hidden",transition:"all 500ms",zIndex:11,"&.enter-active":{opacity:1,transform:"translateY(100%)"},"&.enter-done":{transform:"translateY(0)"}})),"label:DivContent;"),La=(0,at.Z)("div",{target:"e1pjeozo2"})((({theme:{colors:e}})=>({background:e.SDSecondary,position:"absolute",left:0,right:0,top:0,bottom:0})),"label:DivMask;"),Ia=e=>{const{visible:t}=e,i=(0,l.useRef)(null);return(0,o.jsx)(Pa.Z,Object.assign({in:t,timeout:300},{children:(0,o.jsxs)(Ta,{children:[(0,o.jsx)(La,{},void 0),(0,o.jsx)(Pa.Z,Object.assign({in:t,timeout:100,nodeRef:i},{children:(0,o.jsx)(Oa,Object.assign({ref:i},{children:e.children}),void 0)}),void 0)]},void 0)}),void 0)},Aa={[ln.email]:"login_send_code_email",[ln.phone]:"login_send_code_sms",[ln.password]:"twosv_login_switch_pw",[ln.totp]:"2_step_verification_alt_method3"},Ea=(0,l.memo)((function(e){const t=(0,y.Q)("WebApp_Login"),[i,n]=(0,l.useState)(!1),{verifyWays:a=[],onClickType:s}=e,r=(0,l.useCallback)((()=>{n(!0)}),[]),d=(0,l.useCallback)((()=>{n(!1)}),[]),c=(0,l.useCallback)((e=>()=>{s(e)(),n(!1)}),[s]);return a.length?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Ia,Object.assign({visible:i},{children:(0,o.jsxs)("div",{children:[a.map(((e,i)=>(0,o.jsx)(Sa,Object.assign({onClick:c(e),loading:!1},{children:t(Aa[e])}),i))),(0,o.jsx)(Sa,Object.assign({onClick:d},{children:t("step_verification_cancel")}),void 0)]},void 0)}),void 0),(0,o.jsx)(wa,Object.assign({onClick:r},{children:t("login_try_another_method")}),void 0)]},void 0):null})),Ma=(0,l.memo)((function(){const[{verifyWays:e={},type:t},{setTwoStepType:i}]=(0,a.b7)(dn),{isMobile:n}=(0,bt.m7)((0,S.h)((()=>["isMobile"]),[])),s=(0,l.useCallback)((e=>()=>{i(e)}),[i]),r=(0,l.useMemo)((()=>({verifyWays:Object.keys(e).filter((e=>e!==t)),onClickType:s})),[t,e,s]);return(0,o.jsxs)(o.Fragment,{children:[n?(0,o.jsx)(Ea,Object.assign({},r),void 0):r.verifyWays.length<2?(0,o.jsx)(ja,Object.assign({},r),void 0):null,"pwd_verify"===t&&1===Object.keys(e).length&&(0,o.jsx)(fa,{},void 0)]},void 0)})),Ra={[ln.email]:"2_step_verification_alt_method2",[ln.password]:"2_step_verification_alt_method4",[ln.phone]:"2_step_verification_alt_method1",[ln.totp]:"2_step_verification_alt_method3"},Fa=(0,l.memo)((function(){const e=(0,y.Q)("WebApp_Login"),[{verifyWays:t={},type:i},{setTwoStepType:n}]=(0,a.b7)(dn),{isMobile:s}=(0,bt.m7)((0,S.h)((()=>["isMobile"]),[])),r=(0,d.k6)(),c=(0,l.useCallback)(((e,t)=>()=>{n(t),r.push(e)}),[r,n]),p=(0,l.useMemo)((()=>Object.keys(t).filter((e=>e!==i))),[i,t]);return!s&&p.length>1?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(xn,{},void 0),(0,o.jsx)(kn,{children:e("2_step_verification_try_alt_method")},void 0),p.map(((t,i)=>{const n=`/login/2sv/${rn[t]}`;return(0,o.jsx)(cn,Object.assign({onClick:c(n,t),size:"small",buttonTheme:"default"},{children:e(Ra[t])}),i)}))]},void 0):null})),Da=()=>{const e=(0,y.Q)("WebApp_Login"),t=(0,s.fz)(x.ZI),[{sendCodeLoading:i,code:n,codeFormatError:r},{sendEmailCodeForReset:d,sendEmailCodeForLogin:c,sendEmailCodeForVerify:p}]=(0,a.b7)(We),[{verifyWays:u,not_login_ticket:g,verify_ticket:m,password:h="",loginLoading:_},{handleCodeVerify:v}]=(0,a.b7)(dn),{changePwdByEmail:b}=(0,a.qj)(nt),f=Cn(),k=(0,l.useCallback)((()=>{t.twoStepSubmit({verification_method:"email",forReset:Boolean(h)}),h?b({not_login_ticket:g,verify_ticket:m,emailCode:n,password:h,email:""}):v({code:n,not_login_ticket:g,verify_ticket:m})}),[b,n,v,t,g,h,m]),w=(0,l.useCallback)((()=>{h?d({not_login_ticket:g,verify_ticket:m}):g?c({not_login_ticket:g,verify_ticket:m}):p({verify_ticket:m})}),[h,d,g,c,m,p]);return(0,o.jsxs)(Pn,Object.assign({onSubmit:k},{children:[(0,o.jsx)(_n,{children:e("common_login_reset_email_verify_title")},void 0),(0,o.jsx)(_n,{children:e("common_verify_email_text",{email:null==u?void 0:u.email_verify})},void 0),(0,o.jsx)(ca,{autoSendFirstTime:!0,email:!0,codeFromNumber:m,loading:i,onClickSendCode:w,onSubmit:k,errorMsg:f},void 0),(0,o.jsx)(Ma,{},void 0),(0,o.jsx)(fn,Object.assign({disabled:Boolean(r)||!n,loading:_},{children:e("login_next")}),void 0),(0,o.jsx)(Fa,{},void 0)]}),void 0)};var Ba=i(47847);const za=(0,at.Z)("div",{target:"e1bi0g3c0"})({marginBottom:"9px"},"label:DivContainer;"),Na=(0,at.Z)("p",{target:"e1bi0g3c1"})((({theme:e})=>[(0,st.GI)({theme:e,color:"TextPrimary",fontFamily:"Proxima",fontWeight:"semiBold"}),{margin:"4px 0"}]),"label:PDescriptionTitleContainer;"),Ua=(0,l.memo)((function(e){const{loginErrorText:t="",autoFocus:i,create:n=!0,loginError:s}=e,[{password:r,hasInvalid:d,lengthValid:c,contentValid:p},{updatePassword:u}]=(0,a.b7)(wn),{isMobile:g}=(0,bt.m7)((0,S.h)((()=>["isMobile"]),[])),m=(0,y.Q)("WebApp_Login"),[h,_]=(0,l.useState)(!1),v=(0,l.useCallback)((()=>{_(!0)}),[]),b=(0,l.useCallback)((()=>{_(!1)}),[]),f=(0,l.useCallback)((e=>{u({value:e.target.value})}),[u]);(0,l.useEffect)((()=>()=>{u({value:""})}),[]);const x=n&&(!1===c||!1===p)&&(g||!h),k=(!c||!p)&&r||h||g,w=!1!==c||!g&&h?!0===c?"success":"default":"error",C=!1!==p||!g&&h?!0===p?"success":"default":"error";return(0,o.jsxs)(za,{children:[(0,o.jsx)(Qn,{"data-e2e":"passward-input",autoFocus:i,placeholder:m("Password"),onFocus:v,onBlur:b,onChange:f,value:r,errorState:x||Boolean(t)||s,password:!0,autocomplete:"new-password",disableDelete:n},void 0),Boolean(t)&&(0,o.jsx)(Ln,{errorIcon:!0,text:m(t),type:"error"},void 0),d&&(0,o.jsx)(Ln,{errorIcon:g,text:m("createpw_error_6"),type:"error"},void 0),k&&n&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Na,{children:m("common_registration_password_pc_text")},void 0),(0,o.jsx)(Ln,Object.assign({text:m("common_registration_password_pc_1"),type:w},{children:(0,o.jsx)(Ba.Z,{fill:"success"===w?"rgba(11, 224, 155, 1.0)":"rgba(22,24,35,.5)"},void 0)}),void 0),(0,o.jsx)(Ln,Object.assign({text:m("createpw_helptext_2"),type:C},{children:(0,o.jsx)(Ba.Z,{fill:"success"===C?"rgba(11, 224, 155, 1.0)":"rgba(22,24,35,.5)"},void 0)}),void 0)]},void 0)]},void 0)})),Wa=()=>{const e=(0,y.Q)("WebApp_Login"),t=(0,s.fz)(x.ZI),{password:i,hasInvalid:n}=(0,a.mp)(wn),{isMobile:r}=(0,bt.m7)((0,S.h)((()=>["isMobile"]),[])),[{verify_ticket:d,loginLoading:c},{handlePasswordVerify:p}]=(0,a.b7)(dn),u=Cn(),g=(0,l.useCallback)((()=>{t.twoStepSubmit({verification_method:"password",forReset:!1}),p({password:i,verify_ticket:d})}),[p,t,i,d]);return(0,o.jsxs)(Pn,Object.assign({onSubmit:g},{children:[(0,o.jsx)(_n,{children:e("common_verify_password_text")},void 0),(0,o.jsx)(Ua,{create:!1,loginError:Boolean(u),loginErrorText:r?u:void 0},void 0),(0,o.jsx)(Ma,{},void 0),!r&&(0,o.jsx)(Ln,{text:e(u),type:"error"},void 0),(0,o.jsx)(fn,Object.assign({disabled:Boolean(n)||!i,loading:c},{children:e("login_next")}),void 0),(0,o.jsx)(Fa,{},void 0)]}),void 0)},$a=()=>{const e=(0,y.Q)("WebApp_Login"),t=(0,s.fz)(x.ZI),[{sendCodeLoading:i,code:n,codeFormatError:r},{sendPhoneCodeForTwoStep:d,sendPhoneCodeForResetPwd:c}]=(0,a.b7)(We),[{verifyWays:p,verify_ticket:u,not_login_ticket:g,password:m,loginLoading:h,accountQuery:_},{handleCodeVerify:v,handleSmsCodeVerifyReset:b}]=(0,a.b7)(dn),f=Cn(),k=(0,l.useCallback)((()=>{const e={verify_ticket:u,not_login_ticket:g,mobile:null==_?void 0:_.mobile};m?c(e):d(e)}),[null==_?void 0:_.mobile,g,m,c,d,u]),w=(0,l.useCallback)((()=>{t.twoStepSubmit({verification_method:"phone",forReset:Boolean(m)}),m?b({not_login_ticket:g,verify_ticket:u,code:n,password:m}):v({verify_ticket:u,code:n,not_login_ticket:g})}),[n,v,b,t,g,m,u]);return(0,o.jsxs)(Pn,Object.assign({onSubmit:w},{children:[(0,o.jsx)(_n,{children:e("common_login_reset_email_verify_title")},void 0),(0,o.jsx)(_n,{children:e("common_verify_sms_text",{mobile:null==p?void 0:p.mobile_sms_verify})},void 0),(0,o.jsx)(ca,{autoSendFirstTime:!0,codeFromNumber:u,loading:i,onClickSendCode:k,onSubmit:w,errorMsg:f},void 0),(0,o.jsx)(Ma,{},void 0),(0,o.jsx)(fn,Object.assign({disabled:Boolean(r)||!n,loading:h},{children:e("login_next")}),void 0),(0,o.jsx)(Fa,{},void 0)]}),void 0)},qa=()=>{const e=(0,y.Q)("WebApp_Login"),t=(0,s.fz)(x.ZI),[{sendCodeLoading:i,code:n,codeFormatError:r}]=(0,a.b7)(We),[{not_login_ticket:d,verify_ticket:c,password:p="",loginLoading:u},{handleCodeVerify:g,handleTOTPVerifyAndRestPwd:m}]=(0,a.b7)(dn),h=Cn(),_=(0,l.useCallback)((()=>{t.twoStepSubmit({verification_method:"totp",forReset:Boolean(p)}),p?m({verify_ticket:c,code:n,password:p}):g({code:n,not_login_ticket:d,verify_ticket:c})}),[n,m,g,t,d,p,c]),v=(0,l.useCallback)((()=>{}),[]);return(0,o.jsxs)(Pn,Object.assign({onSubmit:_},{children:[(0,o.jsx)(_n,{children:e("2_step_verification_body")},void 0),(0,o.jsx)(ca,{autoSendFirstTime:!0,email:!0,codeFromNumber:c,loading:i,onClickSendCode:v,onSubmit:_,errorMsg:h,isSendCodeHidden:!0},void 0),(0,o.jsx)(Ma,{},void 0),(0,o.jsx)(fn,Object.assign({disabled:Boolean(r)||!n,loading:u},{children:e("login_next")}),void 0),(0,o.jsx)(Fa,{},void 0)]}),void 0)},Ha=()=>{const e=(0,y.Q)("WebApp_Login"),t=(0,s.fz)(x.ZI),{isMobile:i}=(0,bt.m7)((0,S.h)((()=>["isMobile"]),[])),n=(0,d.k6)(),{isTwoStep:r,verifyWays:c,password:p}=(0,a.mp)(dn),{type:u}=(0,d.UO)(),g=ln[u];return(0,l.useEffect)((()=>{g&&(null==c?void 0:c[g])||n.replace(f.gY.loginHome),t.twoStepNotify({verification_method:u,forReset:Boolean(p)})}),[n,t,p,u,c,g]),(0,o.jsxs)(un,{children:[i&&(0,o.jsx)(Nt,{},void 0),(0,o.jsx)(mn,{children:e(r?"security_step_verification":"common_verify_title")},void 0),u===rn.pwd_verify?(0,o.jsx)(Wa,{},void 0):u===rn.email_verify?(0,o.jsx)(Da,{},void 0):u===rn.totp_verify?(0,o.jsx)(qa,{},void 0):(0,o.jsx)($a,{},void 0)]},void 0)};var Ga=i(75200),Za=i(78193);const Va={initialized:!1,eventCommonParams:{},init(e){var t;const{enter_from:i,enter_method:o,platform:n}=fe.parse(e);this.initialized=!0,this.eventCommonParams={enter_from:null!==(t=null==i?void 0:i.toString())&&void 0!==t?t:"login",enter_method:null==o?void 0:o.toString(),platform:n}}},Qa=()=>{const e=(0,s.fz)(x.ZI);(0,l.useEffect)((()=>{e.loginNotify()}),[e])};var Ya=i(98154);const Ka={login:{title:"Log in",description:"Log in or sign up for an account on TikTok. Start watching to discover real people and real videos that will make your day.",keywords:"Log in, Log in to TikTok"},signup:{title:"Sign up",description:"Sign up for an account or log back into TikTok. Create an account to discover real people and real videos that will make your day.",keywords:"Sign up, Sign up for TikTok"}},Ja=(0,l.memo)((({page:e})=>{const t=Ka[e],i=(0,y.Q)("WebApp_Login"),{language:n}=(0,bt.m7)((0,w.Lh)((()=>["language"]),[]));return(0,o.jsxs)(Ya.ql,Object.assign({htmlAttributes:{lang:n}},{children:[(0,o.jsx)("title",{children:i(`${t.title}${t.title.indexOf(" ")<0?"":" | TikTok"}`)},void 0),(0,o.jsx)("meta",{name:"description",content:i(t.description)},void 0),(0,o.jsx)("meta",{name:"keywords",content:t.keywords},void 0)]}),void 0)}));var Xa=i(26641),es=i(4825),ts=i(50121);const is=(0,at.Z)("div",{target:"e10o7n900"})((({theme:e})=>[(0,st.GI)({theme:e,color:"TextPrimary",fontFamily:"Sofia"}),{fontSize:"24px",lineHeight:"32px",margin:"32px auto 12px",fontWeight:"bold",textAlign:"center"}]),"label:DivTitle;"),os=(0,at.Z)("div",{target:"e10o7n901"})((({theme:e})=>[(0,st.GI)({theme:e,color:"TextPrimary"}),{fontSize:"18px",lineHeight:"25px",display:"flex",justifyContent:"space-between",marginBottom:"40px"}]),"label:DivDescription;"),ns=(0,at.Z)("img",{target:"e10o7n902"})({width:"80%",margin:"0 auto 16px"},"label:ImgQR;"),as=(0,l.memo)((function(){const e=(0,y.Q)("WebApp_Login"),{appType:t}=(0,a.mp)(Xa.G,{selector:e=>{var t;return{appType:null===(t=e.appContext)||void 0===t?void 0:t.appType}},dependencies:[]}),i="m"===t?es:ts;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(os,Object.assign({"data-e2e":"instagram-desc"},{children:e("login_risk_popup_pc_body_2")}),void 0),(0,o.jsx)(ns,{src:i,"data-e2e":"instagram-img"},void 0)]},void 0)})),ss=(0,l.memo)((function(){const e=(0,y.Q)("WebApp_Login"),t=(0,d.TH)(),{fromIns:i}=t.state||{};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(is,Object.assign({"data-e2e":"instagram-title"},{children:e(i?"login_new_ins_PC_title":"login_risk_popup_pc_title")}),void 0),(0,o.jsx)(as,{},void 0)]},void 0)})),rs=(0,at.Z)("div",{target:"eop2wpq1"})((({theme:e})=>[(0,st.GI)({theme:e,color:"TextSecondary",fontFamily:"Proxima"}),{marginBottom:"16px",fontSize:"18px",lineHeight:"24px",display:"flex",justifyContent:"space-between"}]),"label:DivDescription;"),ls=()=>{const e=(0,s.fz)(x.ZI),t=(0,y.Q)("WebApp_Login"),[{forceResetResponse:i,loginLoading:n},{handleForceResetPwdByEmail:r,handleForceResetPwdByPhone:d,clearForceResetRes:c}]=(0,a.b7)(nt),{conditional_login_ticket:p,type:u,email:g,mobile:m}=(0,bt.m7)(i),[{sendCodeLoading:h,ticket:_,code:v,codeFormatError:b},{sendPhoneCodeForForceResetPwd:f,sendEmailCodeForForceResetPwd:k}]=(0,a.b7)(We),{password:w,contentValid:S,lengthValid:C}=(0,a.mp)(wn),j=Cn(),P=(0,l.useCallback)((()=>{"email"===u?k({conditional_login_ticket:p}):f({conditional_login_ticket:p})}),[u,k,p,f]),T=(0,l.useCallback)((()=>{const t={code:v,ticket:null!=_?_:"",password:w,conditional_login_ticket:p};e.forceResetSubmit(),"email"===u?r(t):d(t)}),[v,p,r,d,e,w,_,u]),O=!v||!w||!S||!C||Boolean(b),L="email"===u?t("setting_password_code_email_text",{email:g}):t("setting_password_code_sms_text",{mobile:m}).replace(/(\D{1})(4)(\D{1})/,((e,t,i,o)=>`${t}6${o}`));return(0,l.useEffect)((()=>()=>{c()}),[]),(0,o.jsxs)(Pn,Object.assign({onSubmit:T},{children:[(0,o.jsx)(Co,{children:t("common_login_reset_password_title")},void 0),(0,o.jsx)(rs,{children:t("changepw_banner")},void 0),(0,o.jsx)(Jn,{email:"email"===u,autoSendFirstTime:!0,disabled:!p,codeFromNumber:p,loading:h,onClickSendCode:P},void 0),(0,o.jsx)(Ln,{text:L,type:"default"},void 0),(0,o.jsx)(Ua,{loginError:Boolean(j)},void 0),(0,o.jsx)(Ln,{text:t(j),type:"error"},void 0),(0,o.jsx)(pn,Object.assign({disabled:O,loading:n},{children:t("Login")}),void 0)]}),void 0)},ds=(0,at.Z)("div",{target:"e1419m800"})({marginBottom:"9px",position:"relative"},"label:DivEmailContainer;"),cs=(0,at.Z)("ul",{target:"e3y4xh60"})((({theme:e})=>({position:"absolute",top:"44px",borderRadius:"4px",background:e.colors.BGPrimary,border:"1px solid",borderColor:e.colors.LineSecondary,zIndex:2,marginTop:"4px",width:"100%",padding:"0"})),"label:UlList;"),ps=(0,at.Z)("li",{target:"e3y4xh61"})((({theme:e})=>[(0,st.GI)({theme:e,fontFamily:"Proxima",color:"TextTertiary2"}),{display:"flex",padding:"0 12px",justifyContent:"space-between",alignItems:"center",height:"34px",lineHeight:"34px",fontSize:"13px",cursor:"pointer"},{":hover":{backgroundColor:"rgba(22, 24, 35, .03)"}}]),"label:LiListItem;"),us=(0,l.memo)((function({focused:e}){const{emailSuffixConfig:t}=Pt((()=>["emailSuffixConfig"]),[]),[{email:i=""},{setSuggestEmailSuffixConfig:n}]=(0,a.b7)(Ue),[s,r]=(0,l.useState)(!1);(0,l.useEffect)((()=>{if(e){const e=i.split("@")[1];if(i.includes("@")&&".com"!==e.slice(-4))return void r(!0)}r(!1)}),[e,s,i]);const d=(0,l.useCallback)((e=>()=>{r(!1),n(e)}),[n]);return s?(0,o.jsx)(cs,{children:t.map(((e,t)=>{var n;return(0,o.jsxs)(ps,Object.assign({onClick:d(`@${e}`)},{children:[null!==(n=null==i?void 0:i.split("@")[0])&&void 0!==n?n:"","@",e]}),t)}))},void 0):null})),gs=(0,l.memo)((function(e){const t=(0,y.Q)("WebApp_Login"),{isMobile:i}=(0,bt.m7)((0,S.h)((()=>["isMobile"]),[])),{emailRegistered:n,errorMsg:s=""}=e,[{emailErrorMsg:r="",email:d=""},{setEmailInfo:c}]=(0,a.b7)(Ue),[p,u]=(0,l.useState)(!1),g=(0,l.useCallback)((()=>{u(!0)}),[]),m=(0,l.useCallback)((()=>{setTimeout((()=>{u(!1)}),300)}),[]),h=(0,l.useCallback)((e=>{const t=e.target.value;c({email:t,valid:!0})}),[c]);(0,l.useEffect)((()=>{if(!p&&!i){const e=Le(d);c({email:d,valid:e})}}),[i,d,p,c]);const _=(Boolean(r||s)||n)&&(!p||i),v=r||s;return(0,o.jsxs)(ds,{children:[(0,o.jsx)(Qn,{placeholder:t("common_login_reset_email_input_placeholder"),onFocus:g,onBlur:m,onInput:h,value:d,errorState:_,autocomplete:"email",name:"email",type:"email"},void 0),!i&&(0,o.jsx)(us,{focused:p},void 0),_&&(0,o.jsx)(Ln,{text:t(v),type:"error"},void 0)]},void 0)})),ms=()=>{const e=(0,y.Q)("WebApp_Login"),t=(0,s.fz)(x.ZI),{emailErrorMsg:i,email:n=""}=(0,a.mp)(Ue),[{loginLoading:r},{changePwdByEmail:d}]=(0,a.b7)(nt),[{sendCodeLoading:c,code:p,codeFormatError:u},{sendEmailCodeForReset:g}]=(0,a.b7)(We),{password:m,lengthValid:h,contentValid:_}=(0,a.mp)(wn),v=Cn(),b=(0,l.useCallback)((()=>{t.setPlatform("email"),t.loginSubmit(),d({password:m,email:n,emailCode:p})}),[t,d,m,n,p]),k=(0,l.useCallback)((()=>{g({email:n,email_logic_type:2})}),[n,g]),w=!n||!m||!p||!_||!h||Boolean(u)||Boolean(i);return(0,o.jsxs)(Pn,Object.assign({onSubmit:b},{children:[(0,o.jsx)(Co,{children:e("common_login_reset_password_title")},void 0),(0,o.jsxs)(jo,{children:[e("setting_password_email_verify_title"),(0,o.jsx)(ua,{text:e("forget_password_switch_phone"),path:f.gY.loginForgetPhonePassword,replace:!0},void 0)]},void 0),(0,o.jsx)(gs,{},void 0),(0,o.jsx)(Jn,{email:!0,disabled:Boolean(i)||!n,codeFromNumber:n,loading:c,onClickSendCode:k},void 0),(0,o.jsx)(Ua,{loginError:Boolean(v)},void 0),(0,o.jsx)(Ln,{text:e(v),type:"error"},void 0),(0,o.jsx)(pn,Object.assign({disabled:w,loading:r},{children:e("Login")}),void 0)]}),void 0)};var hs=i(35962);const _s=(0,at.Z)("ul",{target:"e2hldqz0"})((({theme:e})=>[(0,st.GI)({theme:e,fontFamily:"Proxima",color:"TextPrimary"}),{padding:"0",margin:0}]),"label:UlListContainer;"),vs=(0,at.Z)("li",{target:"e2hldqz1"})((({theme:e,selected:t})=>[(0,st.GI)({theme:e,fontFamily:"Proxima",color:"TextTertiary2"}),()=>t&&{backgroundColor:"rgba(22, 24, 35, .03)"},{display:"flex",padding:"0 12px",justifyContent:"space-between",alignItems:"center",height:"34px",lineHeight:"34px",fontSize:"13px"},{":hover":{backgroundColor:"rgba(22, 24, 35, .03)"}}]),"label:LiListItem;"),ys=(0,at.Z)("span",{target:"e2hldqz2"})((({theme:e})=>[(0,st.GI)({theme:e,color:"TextPrimary"}),{paddingInlineEnd:"4px"}]),"label:SpanItemName;"),bs=(0,at.Z)("span",{target:"e2hldqz3"})((({theme:e})=>[(0,st.GI)({theme:e,color:"TextSecondary"})]),"label:SpanItemCode;"),fs=(0,at.Z)("li",{target:"e2hldqz4"})({margin:0,padding:0,display:"block"},"label:LiAreaCodeOptionWrapper;"),xs=(0,at.Z)("ul",{target:"e2hldqz5"})({margin:0,padding:0,display:"block",listStyleType:"none"},"label:UlAreaCodeOptionsGroupContainer;"),ks="area-number-pick-ul",ws="#login-phone-search",Ss=({filterCountryList:e=[],onSelected:t,searchText:i,currentSelectCode:n,matchSearchArea:a,onKeyDownWithEmptyResult:s})=>{const{isMobile:r}=(0,bt.m7)((0,S.h)((()=>["isMobile"]),[])),d=(0,y.Q)("WebApp_Login"),c=RegExp(i.replace("+","\\+"),"ig"),p=(0,l.useCallback)((({code:e,shortname:i})=>()=>{t({code:e,area:i})}),[t]),u=(0,l.useCallback)((e=>{var o,n;if(e.stopPropagation(),9===e.keyCode&&e.shiftKey)return e.preventDefault(),void(null===(o=document.querySelector(ws))||void 0===o||o.focus());if(13!==e.keyCode&&32!==e.keyCode)9!==e.keyCode||!i||a||null==s||s();else if(e.target){const i=null===(n=e.target)||void 0===n?void 0:n.getAttribute("id");if(!i)return;const[o,a]=i.split("-");try{t({code:a,area:o})}catch(e){console.error(e)}}}),[a,s,t,i]),g=(0,l.useCallback)((e=>{var t,i,o,n,a,s;try{const r=Array.from(null!==(i=null===(t=document.querySelector(`#${ks}`))||void 0===t?void 0:t.children)&&void 0!==i?i:[]).reverse().find((e=>e.children.length>0));(null===(a=Array.from(null!==(n=null===(o=r)||void 0===o?void 0:o.children)&&void 0!==n?n:[]).reverse())||void 0===a?void 0:a[0])===e.target&&(null===(s=document.querySelector(ws))||void 0===s||s.focus())}catch(e){console.error(e)}}),[]);return(0,o.jsxs)(_s,Object.assign({onKeyDown:u,id:ks,role:"listbox"},{children:[Oe.map((t=>{const{label:a,lists:s}=t;return(0,o.jsx)(fs,{children:(0,o.jsx)(xs,Object.assign({id:a,role:"group"},{children:s.map(((t,a)=>{const{name:s,code:l,shortname:d}=t;if(-1!==e.indexOf(d))return null;if(i&&!(s.match(c)||`+${l}`.match(c)||d.match(c)))return null;const u=`${n}`==`${l}`;return(0,o.jsx)(vs,Object.assign({index:a,id:`${d}-${l}`,selected:u,tabIndex:0,onClick:p({shortname:d,code:l}),onKeyDown:g,role:"option","aria-selected":u},{children:r?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(ys,{children:s},void 0),(0,o.jsx)(bs,{children:`+${l}`},void 0)]},void 0):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(ys,{dangerouslySetInnerHTML:{__html:(m=`${s} +${l}`,i?m=m.replace(c,(e=>`<span style="color: #20D5EC">${e}</span>`)):m)}},void 0),u&&(0,o.jsx)(hs.Z,{width:16,height:16,fill:"#000"},void 0)]},void 0)}),s+l);var m}))}),a)},a)})),Boolean(!a)&&(0,o.jsx)(vs,Object.assign({selected:!1,style:{justifyContent:"center"},role:"status"},{children:d("registration_phone_search_empty")}),void 0)]}),void 0)};var Cs=i(42578);const js=(0,at.Z)("div",{target:"emwsnhg0"})((({theme:{colors:e}})=>({top:"45px",height:"35px",width:"326px",boxSizing:"border-box",borderBottom:`1px solid ${e.LineSecondary}`,background:e.BGPrimary,marginTop:"4px",display:"flex",justifyContent:"space-between",flexShrink:0})),"label:DivSearchContainer;"),Ps=(0,at.Z)("div",{target:"emwsnhg1"})((({theme:e})=>({margin:"0 15px",color:e.colors.LineInput,display:"flex",alignItems:"center"})),"label:DivSearchIcon;"),Ts=(0,at.Z)("input",{target:"emwsnhg2"})((({theme:e})=>({outline:"none",border:"none",flex:"1",color:e.colors.TextPrimary,background:e.colors.BGPrimary,caretColor:e.colors.Primary})),"label:InputSearch;"),Os=({searchText:e,onKeyDownWithEmptyResult:t})=>{const i=(0,y.Q)("WebApp_Login"),{matchSearchArea:n}=(0,a.mp)(Ie),{setAreaSearchText:s,selectAreaCode:r}=(0,a.qj)(Ie),d=(0,l.useCallback)((e=>{s(e.target.value)}),[s]),c=(0,l.useCallback)((e=>{13===e.keyCode&&n&&r({code:n.code,area:n.shortname})}),[n,r]),p=(0,l.useCallback)((i=>{9===i.keyCode&&(e&&!n||i.shiftKey)&&(null==t||t())}),[n,t,e]);return(0,l.useEffect)((()=>()=>{s("")}),[s]),(0,o.jsxs)(js,{children:[(0,o.jsx)(Ps,{children:(0,o.jsx)(Cs.Z,{width:14,height:14},void 0)},void 0),(0,o.jsx)(Ts,{id:"login-phone-search",autoFocus:!0,maxLength:35,onKeyUp:c,placeholder:i("registration_phone_search_placeholder"),onChange:d,onKeyDown:p},void 0)]},void 0)},Ls=(0,at.Z)("div",{target:"e1llxcni0"})((({theme:e})=>[(0,st.YJ)({direction:e.direction,start:"0"}),{maxHeight:"320px",background:e.colors.BGPrimary,border:"0.5px solid rgba(22, 24, 35, 0.12)",boxSizing:"border-box",boxShadow:"0px 2px 12px rgba(0, 0, 0, 0.12)",borderRadius:"4px",position:"absolute",top:"54px",display:"flex",flexDirection:"column",zIndex:2}]),"label:DivSelectorContainer;"),Is=(0,at.Z)("div",{target:"e1llxcni1"})({flex:"1",overflow:"auto"},"label:DivListWrapper;"),As=(0,at.Z)("div",{target:"e1llxcni2"})({position:"fixed",zIndex:11,top:0,bottom:0,left:0,right:0,background:"#fff",overflowY:"auto"},"label:DivPageSelectorContainer;"),Es=(0,at.Z)("div",{target:"e1llxcni3"})((({theme:e})=>[(0,st.YJ)({direction:e.direction,paddingEnd:"32px",paddingStart:"16px"}),{marginTop:"44px",borderTop:`1px solid ${e.colors.LineSecondary}`}]),"label:DivPageSelector;"),Ms=e=>(0,o.jsxs)(Ls,{children:[(0,o.jsx)(Os,{searchText:e.searchText,onKeyDownWithEmptyResult:e.onKeyDownWithEmptyResult},void 0),(0,o.jsx)(Is,{children:(0,o.jsx)(Ss,{matchSearchArea:e.matchSearchArea,filterCountryList:e.filterCountryList,onSelected:e.onSelected,currentSelectCode:e.currentSelectCode,searchText:e.searchText,onKeyDownWithEmptyResult:e.onKeyDownWithEmptyResult},void 0)},void 0)]},void 0);function Rs(e){const{region:t,appType:i}=(0,bt.m7)((0,w.Lh)((()=>["region","appType"]),[])),[o,n]=(0,a.b7)(Ie),{areaCode:s}=o;(0,l.useEffect)((()=>{if(!s){let o=!1;if(Oe.forEach((({lists:e})=>e.forEach((({code:e,shortname:i})=>{i===t&&(o=!0,n.selectAreaCode({code:e,area:i}))})))),!o){let t="m"===i?{code:1,area:"US"}:{code:81,area:"JP"};(null==e?void 0:e.find((e=>e===t.area)))&&(t={code:1,area:"CA"}),n.selectAreaCode(t)}}}),[i,t,s,n,e])}var Fs=i(4276);const Ds=(0,at.Z)("div",{target:"ewblsjs0"})({marginBottom:"9px"},"label:DivContainer;"),Bs=(0,at.Z)(Qn,{target:"ewblsjs1"})((({theme:e})=>({flex:1,width:0,marginBottom:"0","& > input":{background:"transparent!important","&:-webkit-autofill":{"-webkit-box-shadow":`0 0 0 30px ${e.isDark?"#3f3f3f":"#f1f1f2"} inset !important`,"-webkit-text-fill-color":e.colors.TextPrimary}}})),"label:StyledBaseInput;");Bs.defaultProps=Object.assign(Object.assign({},Bs.defaultProps),{"data-e2e":"phone-number-input"});const zs=(0,at.Z)("div",{target:"ewblsjs2"})((({theme:{colors:e},errState:t})=>[{background:e.BGInput,border:`1px solid ${e.LineSecondary2}`,transition:"all 0.3s",borderRadius:"4px",display:"flex"},()=>t?{border:`1px solid ${e.Negative}`,input:{color:e.Negative}}:{}]),"label:DivPhoneInputContainer;"),Ns=(0,at.Z)("div",{target:"ewblsjs3"})({position:"relative",cursor:"pointer"},"label:DivAreaSelectionContainer;"),Us=(0,at.Z)("div",{target:"ewblsjs4"})((({theme:{colors:e,direction:t}})=>[{display:"flex",alignItems:"center",justifyContent:"space-between",position:"relative",padding:"12px",height:"44px","::after":{content:'""',width:"1px",height:"30px",background:e.LineSecondary,right:"rtl"===t?"unset":"0",left:"rtl"===t?"0":"unset",position:"absolute"}}]),"label:DivAreaLabelContainer;"),Ws=(0,at.Z)("span",{target:"ewblsjs5"})((({theme:{colors:e}})=>[{fontSize:"16px",lineHeight:1,color:e.TextPrimary,marginInlineEnd:"12px"}]),"label:SpanLabelContainer;"),$s=(0,at.Z)(Fs.Z,{target:"ewblsjs7"})((({up:e})=>[{transform:e?"rotateZ(180deg)":"rotateZ(0deg)",transition:"all .3S"}]),"label:StyledArrowIcon;"),qs=(0,l.memo)((function({errorStatus:e,filterCountryList:t}){Rs(t);const i=(0,l.useRef)(null),[n,s]=(0,a.b7)(Ie),{area:r,areaCode:d,phoneErrorMsg:c,showAreaCodeSelector:p,searchText:u,phone:g,matchSearchArea:m}=n,[h,_]=(0,l.useState)(!1),{checkPhoneNumberFormat:v}=s,{toggleAreaCodeSelector:b,selectAreaCode:f}=s,x=(0,y.Q)("WebApp_Login"),k=(0,l.useCallback)((e=>{var t;p&&!(null===(t=null==i?void 0:i.current)||void 0===t?void 0:t.contains(e.target))&&b()}),[p,b]);(0,l.useEffect)((()=>(window.addEventListener("mousedown",k),()=>{window.removeEventListener("mousedown",k)})),[s,k]);const w=(0,l.useCallback)((e=>{v({phone:e.target.value})}),[v]),S=(0,l.useCallback)((()=>{_(!0)}),[]),C=(0,l.useCallback)((()=>{_(!1)}),[]),j=(0,l.useCallback)((({code:e,area:t})=>{f({code:e,area:t})}),[f]),P=(0,l.useCallback)((e=>{13!==e.keyCode&&32!==e.keyCode||b()}),[b]),T=Boolean((c||e)&&!h);return(0,o.jsxs)(Ds,{children:[(0,o.jsxs)(zs,Object.assign({errState:T},{children:[(0,o.jsxs)(Ns,Object.assign({ref:i},{children:[(0,o.jsxs)(Us,Object.assign({onClick:b,onKeyDown:P,tabIndex:0,role:"select"},{children:[(0,o.jsxs)(Ws,{children:[r," +",d]},void 0),(0,o.jsx)($s,{up:p},void 0)]}),void 0),p&&(0,o.jsx)(Ms,{matchSearchArea:m,filterCountryList:t,onSelected:j,currentSelectCode:d,searchText:u,onKeyDownWithEmptyResult:b},void 0)]}),void 0),(0,o.jsx)(Bs,{value:g,border:!1,errState:T,placeholder:x("phone_number"),onChange:w,onFocus:S,onBlur:C,name:"mobile",autocomplete:"tel-national",type:"tel"},void 0)]}),void 0),T&&(0,o.jsx)(Ln,{text:x(c||e||""),type:"error"},void 0)]},void 0)})),Hs=()=>{const e=(0,y.Q)("WebApp_Login"),t=(0,s.fz)(x.ZI),[i]=(0,a.b7)(Ie),{phoneErrorMsg:n,mobile:r,phone:d}=i,[{sendCodeLoading:c,codeFormatError:p,code:u},{sendPhoneCodeForResetPwd:g}]=(0,a.b7)(We),[{loginLoading:m},{changePwdByMobile:h}]=(0,a.b7)(nt),{password:_,lengthValid:v,contentValid:b}=(0,a.mp)(wn),k=Cn(),w=(0,l.useCallback)((()=>{t.setPlatform("sms_verification"),t.loginSubmit(),h({password:_,mobile:r,phoneCode:u})}),[t,h,_,r,u]),S=(0,l.useCallback)((()=>{g({mobile:r})}),[r,g]),C=!r||!_||!u||!b||!v||Boolean(n)||Boolean(p);return(0,o.jsxs)(Pn,Object.assign({onSubmit:w},{children:[(0,o.jsx)(Co,{children:e("common_login_reset_password_title")},void 0),(0,o.jsxs)(jo,{children:[e("setting_bind_phone_input_title"),(0,o.jsx)(ua,{text:e("forget_password_switch_email"),path:f.gY.loginForgetEmailPassword,replace:!0},void 0)]},void 0),(0,o.jsx)(qs,{},void 0),(0,o.jsx)(Jn,{disabled:Boolean(n)||!d,codeFromNumber:r,loading:c,onClickSendCode:S},void 0),(0,o.jsx)(Ua,{loginError:Boolean(k)},void 0),(0,o.jsx)(Ln,{text:e(k),type:"error"},void 0),(0,o.jsx)(pn,Object.assign({disabled:C,loading:m},{children:e("Login")}),void 0)]}),void 0)},Gs=(0,l.memo)((function(){const e=(0,y.Q)("WebApp_Login"),t=(0,s.fz)(x.ZI),{setEmail:i}=(0,a.qj)(Ue),[{loginLoading:n},{handlePasswordLogin:r}]=(0,a.b7)(nt),{password:d,hasInvalid:c}=(0,a.mp)(wn),[p,u]=(0,l.useState)(""),g=Cn([p]),m=(0,l.useCallback)((()=>{const e=Le(p)?p:void 0;t.setPlatform(e?"email":"handle"),t.loginSubmit(),r({username:p,password:d,email:e})}),[r,t,d,p]),h=(0,l.useCallback)((e=>{u(e.target.value)}),[]),_=(0,l.useCallback)((()=>{Le(p)&&i(p)}),[p,i]);return(0,o.jsxs)(Pn,Object.assign({onSubmit:m},{children:[(0,o.jsx)(Qn,{placeholder:e("Email or Username"),onChange:h,name:"username",value:p,"data-e2e":"email-input"},void 0),(0,o.jsx)(Ua,{create:!1,loginError:Boolean(g)},void 0),g&&(0,o.jsx)(Ln,{text:e(g),type:"error"},void 0),(0,o.jsx)(fa,{onClickForgetEmailPwd:_},void 0),(0,o.jsx)(pn,Object.assign({disabled:!p||!d||c,loading:n,"data-e2e":"login-button"},{children:e("Login")}),void 0)]}),void 0)})),Zs=()=>{const e=(0,y.Q)("WebApp_Login");return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Co,Object.assign({id:"login-modal-title"},{children:e("Login")}),void 0),(0,o.jsxs)(jo,{children:[e("Email or Username")," ",(0,o.jsx)(ua,{text:e("common_login_switch_phone"),path:f.gY.loginPhone,replace:!0},void 0)]},void 0),(0,o.jsx)(Gs,{},void 0)]},void 0)},Vs=()=>{const e=(0,y.Q)("WebApp_Login"),t=(0,s.fz)(x.ZI),[{sendCodeLoading:i,code:n,codeFormatError:r},{sendPhoneCodeForLogin:d,sendPhoneCodeForVerify:c}]=(0,a.b7)(We),[{phoneNotRegistered:p,loginLoading:u},{handleSmsLogin:g,handleSmsVerify:m}]=(0,a.b7)(nt),{registerPhone:h}=(0,a.qj)(ot),{isSecurityVerification:_}=Pt((()=>["isSecurityVerification"]),[]),{region:v}=(0,bt.m7)((0,w.Lh)((()=>["region"]),[])),[b]=(0,a.b7)(Ie),{mobile:k,phoneErrorMsg:S}=b,C=k&&n&&!S&&!r,j=Cn(),P=(0,l.useCallback)((()=>{t.setPlatform("sms_verification"),t.loginSubmit();const e={mobile:k,phoneCode:n,login_only:!0};_?m(e):g(e)}),[g,m,_,t,k,n]),T=(0,l.useCallback)((()=>{_?c({mobile:k}):d({mobile:k})}),[_,k,d,c]),O=(0,l.useCallback)((()=>{h({region:v})}),[h,v]);return(0,o.jsxs)(Pn,Object.assign({onSubmit:P},{children:[(0,o.jsx)(Co,Object.assign({id:"login-modal-title"},{children:e("Login")}),void 0),(0,o.jsxs)(jo,{children:[e("phone"),(0,o.jsx)(ua,{text:e("common_login_switch_email"),path:f.gY.loginEmail,replace:!0,"data-e2e":"email-tab"},void 0)]},void 0),(0,o.jsx)(qs,{},void 0),(0,o.jsx)(Jn,{disabled:Boolean(S)||!k,codeFromNumber:k,loading:i,errorMsg:j,onClickSendCode:T},void 0),(0,o.jsx)(ua,{text:e("login_option_password"),path:f.gY.loginPhonePassword},void 0),(0,o.jsx)(pn,Object.assign({disabled:!C,loading:u,"data-e2e":"login-button"},{children:e("Login")}),void 0),p&&(0,o.jsxs)(Po,{children:[(0,o.jsx)(To,{children:e("common_login_sms_unregistered_pc_1")},void 0),(0,o.jsx)(To,Object.assign({link:!0,onClick:O},{children:e("common_login_sms_unregistered_pc_2")}),void 0)]},void 0)]}),void 0)},Qs=(0,at.Z)("div",{target:"e1c067ot0"})({display:"flex",alignItems:"center",marginTop:"9px"},"label:DivLinksContainer;"),Ys=(0,at.Z)("span",{target:"e1c067ot1"})((({theme:e})=>({width:"1px",height:"12px",margin:"0 16px",background:e.colors.LineSecondary})),"label:SpanSplitLine;"),Ks=()=>{const e=(0,y.Q)("WebApp_Login"),t=(0,s.fz)(x.ZI),[{loginLoading:i},{handlePasswordLogin:n}]=(0,a.b7)(nt),{phoneErrorMsg:r,phone:d,areaCode:c}=(0,a.mp)(Ie),{password:p,hasInvalid:u}=(0,a.mp)(wn),g=Cn(),m=(0,l.useCallback)((()=>{const e=`+${c} ${d}`;t.setPlatform("phone"),t.loginSubmit(),n({account:e,password:p,mobile:e})}),[c,n,t,p,d]);return(0,o.jsxs)(Pn,Object.assign({onSubmit:m},{children:[(0,o.jsx)(Co,Object.assign({id:"login-modal-title"},{children:e("Login")}),void 0),(0,o.jsxs)(jo,{children:[e("phone")," ",(0,o.jsx)(ua,{text:e("common_login_switch_email"),path:f.gY.loginEmail,replace:!0},void 0)]},void 0),(0,o.jsx)(qs,{},void 0),(0,o.jsx)(Ua,{create:!1,loginError:Boolean(g)},void 0),g&&(0,o.jsx)(Ln,{text:e(g),type:"error"},void 0),(0,o.jsxs)(Qs,{children:[(0,o.jsx)(ua,{text:e("forget_password"),path:f.gY.loginForgetPhonePassword},void 0),(0,o.jsx)(Ys,{},void 0),(0,o.jsx)(ua,{text:e("common_login_password_button"),path:f.gY.loginPhone},void 0)]},void 0),(0,o.jsx)(pn,Object.assign({disabled:Boolean(r)||!d||!p||u,loading:i},{children:e("Login")}),void 0)]}),void 0)},Js=(0,at.Z)("h2",{target:"eph3mrd0"})((({theme:e})=>[(0,st.GI)({theme:e,color:"TextPrimary",fontWeight:"semiBold"}),{fontSize:e.isMobile?"20px":"15px",display:"flex",justifyContent:"space-between",marginBottom:"5px"}]),"label:H2Title;"),Xs=(0,at.Z)("div",{target:"eph3mrd1"})((({theme:e})=>[(0,st.GI)({theme:e,color:"TextTertiary"}),{fontSize:"14px",display:"flex",justifyContent:"space-between",marginBottom:"24px"}]),"label:DivDescription;"),er=()=>{const e=(0,y.Q)("WebApp_Login"),t=(0,s.fz)(x.ZI),[{loginLoading:i},{handlePasswordLogin:n}]=(0,a.b7)(nt),{email:r}=(0,a.mp)(Ue),{isMobile:d}=(0,bt.m7)((0,S.h)((()=>["isMobile"]),[])),[c,p]=(0,l.useState)(""),u=Cn([c]),g=(0,l.useCallback)((()=>{t.setPlatform("email"),t.loginSubmit(),n({email:r,password:c,username:r})}),[r,n,t,c]),m=(0,l.useCallback)((e=>{p(e.target.value)}),[]);return(0,o.jsxs)(Pn,Object.assign({onSubmit:g},{children:[(0,o.jsx)(Js,{children:e("common_registration_email_existing_title")},void 0),d&&(0,o.jsx)(Xs,{children:e("common_registration_email_existing_text")},void 0),(0,o.jsx)(Qn,{value:r,readonly:!0,disableDelete:!0},void 0),(0,o.jsx)(Qn,{placeholder:e("Password"),onChange:m,password:!0,border:!0,errorState:Boolean(u)},void 0),(0,o.jsx)(Ln,{text:e(u||(d?"":"common_registration_email_existing_text")),type:u?"error":"default"},void 0),(0,o.jsx)(fa,{},void 0),(0,o.jsx)(pn,Object.assign({disabled:!c,loading:i},{children:e("Login")}),void 0)]}),void 0)},tr=()=>{const e=(0,y.Q)("WebApp_Login");return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Co,{children:e("Login")},void 0),(0,o.jsx)(er,{},void 0)]},void 0)},ir=(0,l.memo)((()=>{Qa(),(0,yt.q)({pid:"login"});const{forceResetResponse:e}=(0,a.mp)(nt),{isMobile:t}=(0,bt.m7)((0,S.h)((()=>["isMobile"]),[])),i=(0,l.useCallback)((e=>{27!==e.keyCode&&e.stopPropagation()}),[]);return(0,o.jsxs)(ho,Object.assign({isMobile:t,onKeyDown:i},{children:[(0,o.jsx)(Ja,{page:"login"},void 0),(0,o.jsxs)(d.rs,{children:[(0,o.jsx)(d.AW,{path:f.gY.loginHome,component:bo,exact:!0},void 0),(0,o.jsx)(d.AW,{path:f.gY.loginQRcode,component:sn,exact:!0},void 0),(0,o.jsx)(d.AW,{path:f.gY.loginPhoneOrEmail,component:Vs,exact:!0},void 0),(0,o.jsx)(d.AW,{path:f.gY.loginPhone,component:Vs,exact:!0},void 0),(0,o.jsx)(d.AW,{path:f.gY.loginPhonePassword,component:Ks,exact:!0},void 0),(0,o.jsx)(d.AW,{path:f.gY.loginEmail,component:Zs,exact:!0},void 0),(0,o.jsx)(d.AW,{path:f.gY.loginWithSignedEmail,component:tr,exact:!0},void 0),(0,o.jsx)(d.AW,{path:f.gY.loginTwoStepVerify,component:Ha,exact:!0},void 0),(0,o.jsx)(d.AW,{path:f.gY.loginForgetEmailPassword,component:e?ls:ms,exact:!0},void 0),(0,o.jsx)(d.AW,{path:f.gY.loginForgetPhonePassword,component:e?ls:Hs,exact:!0},void 0),(0,o.jsx)(d.AW,{path:f.gY.loginDownloadApp,component:ss,exact:!0},void 0),(0,o.jsx)(d.AW,{path:"*",component:bo},void 0)]},void 0)]}),void 0)}));function or(){const{registerLimited:e}=(0,a.mp)($),t=(0,d.k6)();(0,l.useEffect)((()=>{e&&t.replace(f.gY.signupCreateAccount)}),[t,e])}function nr(){const{region:e}=(0,bt.m7)((0,w.Lh)((()=>["region"]),[])),t=(0,d.k6)(),{validateAge:i}=(0,a.qj)($),[{fromNotRegisterLogin:o,thirdPlatformNotRegistered:n},{registerThirdPlatform:s,registerPhone:r}]=(0,a.b7)(ot),c=(0,l.useCallback)((()=>{"KR"===e?t.push(f.gY.signupPolicyConfirm):"Third"===o&&n?s({ageCheckDone:!0,platform:n.platform,profileKey:n.profileKey,region:e}):"Phone"===o?r({ageCheckDone:!0,region:e}):t.push(f.gY.signupPhoneOrEmail)}),[e,o,t,r,s,n]);return{handleCheckAge:(0,l.useCallback)((()=>{i({canSkip:!1,checkPassCallback:c})}),[c,i])}}function ar(){const{initial:e,registerLimited:t,ageGateAction:i}=(0,a.mp)($),o=(0,d.k6)();(0,l.useEffect)((()=>{e&&!t&&1!==i&&o.replace(f.gY.signupHome)}),[e,i,o,t])}const sr=(0,at.Z)("div",{target:"e7y6k0x0"})((({theme:e,isModal:t})=>[(0,st.GI)({theme:e,fontWeight:"bold",fontFamily:"Sofia"}),{textAlign:"center",fontSize:t?"20px":"32px",lineHeight:t?"24px":"38px"}]),"label:DivTitle;"),rr=(0,at.Z)("div",{target:"e7y6k0x1"})((({theme:e,isModal:t})=>[(0,st.GI)({theme:e,fontFamily:"Proxima",color:"TextSecondary"}),{fontSize:t?"14px":"18px",lineHeight:t?"18px":"24px",textAlign:"center",padding:"16px 8px"}]),"label:DivDescription;"),lr=(0,at.Z)("div",{target:"e7y6k0x2"})((({isModal:e=!1})=>[dr(e)]),"label:DivContainer;"),dr=e=>e?{paddingTop:"32px",width:"300px"}:{marginTop:"110px"},cr=({isModal:e=!1})=>{const t=(0,y.Q)("WebApp_Login"),{setShowAgeConfirm:i}=(0,a.qj)($),n=(0,d.k6)(),s=(0,l.useCallback)((()=>{i(!1),n.push(f.gY.signupCreateAccount)}),[n,i]),r=(0,l.useMemo)((()=>e?{borderLeft:"none",borderRight:"none",borderBottom:"none",borderRadius:"0 0 8px 8px",fontWeight:500}:void 0),[e]);return(0,o.jsxs)(lr,Object.assign({isModal:e},{children:[(0,o.jsx)(sr,Object.assign({isModal:e},{children:t("mus_agegate_error_ftc_title")}),void 0),(0,o.jsx)(rr,Object.assign({isModal:e},{children:t("mus_agegate_error_ftc_desc")}),void 0),(0,o.jsx)(pn,Object.assign({onClick:s,buttonTheme:e?"default":"primary",bottonTheme:"text",style:r},{children:t("Continue")}),void 0)]}),void 0)};var pr;!function(e){e.Terms="terms-of-service",e.Privacy="privacy-policy",e.Push="push-policy"}(pr||(pr={}));const ur=[{title:"common_registration_terms_and_conditions_decription_terms",value:"terms-of-service",content:""},{title:"common_registration_terms_and_conditions_decription_pp",value:"privacy-policy",content:""},{title:"register_page_marketing_push_title",value:"push-policy",content:"register_page_marketing_push_subtitle"}],gr=[f.gY.loginEmail,f.gY.loginPhone,f.gY.signupPhone,f.gY.signupEmail,f.gY.loginHome,f.gY.signupHome],mr="signup-email-consent-label";var hr;!function(e){e.Big="big",e.Small="small"}(hr||(hr={}));const _r=(0,at.Z)("div",{target:"e14eam340"})((({size:e})=>({width:"big"===e?"32px":"24px",position:"relative"})),"label:DivCheckboxWrapper;"),vr=(0,at.Z)("input",{target:"e14eam341"})({width:"24px",height:"24px",opacity:0},"label:InputCheckbox;"),yr=(0,at.Z)("i",{target:"e14eam342"})((({theme:e,checked:t,circle:i=!0,size:o,focus:n=!1})=>[(0,st.YJ)({direction:e.direction,start:"0"}),{position:"absolute",top:0,borderRadius:i?"50%":"unset",border:"1px solid",borderColor:t?e.colors.Primary:e.colors.LineInverse,marginInlineEnd:"8px",display:"inline-block",background:t?e.colors.Primary:e.colors.BGPrimary,transition:"all .1s",padding:"3px 0",textAlign:"center",boxSizing:"border-box",outline:n?"1px solid blue":"none"},br(o,i)]),"label:ICheckboxIcon;"),br=(e,t)=>"small"===e?{width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"10px"}:{width:t?"24px":"22px",height:t?"24px":"22px"},fr=({id:e,value:t,checked:i,onChange:n,circle:a,size:s="big"})=>{const[r,d]=(0,l.useState)(!1),c=(0,l.useCallback)((e=>{n(e.target.checked,t)}),[n,t]),p=(0,l.useCallback)((()=>{d(!0)}),[]),u=(0,l.useCallback)((()=>{d(!1)}),[]);return(0,o.jsxs)(_r,Object.assign({size:s},{children:[(0,o.jsx)(vr,{type:"checkbox",value:t,id:e,onClick:c,onFocus:p,onBlur:u,"aria-labelledby":mr},void 0),(0,o.jsx)("label",Object.assign({htmlFor:e},{children:(0,o.jsx)(yr,Object.assign({checked:i,circle:a,size:s,focus:r},{children:(0,o.jsx)(hs.Z,{fill:"white",fontSize:"14px"},void 0)}),void 0)}),void 0)]}),void 0)},xr=(0,at.Z)("div",{target:"eb49p770"})((({theme:e})=>[{paddingBottom:e.isMobile?"64px":"unset"}]),"label:DivPolicyContainer;"),kr=(0,at.Z)("h3",{target:"eb49p771"})((({theme:e})=>[(0,st.GI)({theme:e,color:"TextPrimary",fontFamily:"Sofia",fontWeight:"bold"}),wr(e.isMobile)]),"label:H3Title;"),wr=e=>e?{fontSize:"17px",lineHeight:"22px",marginBottom:"24px",textAlign:"left"}:{fontSize:"32px",lineHeight:"38px",marginBottom:"32px",textAlign:"center",marginTop:"64px"},Sr=(0,at.Z)("div",{target:"eb49p772"})({marginBottom:"16px",display:"flex"},"label:DivContainer;"),Cr=(0,at.Z)("p",{target:"eb49p773"})((({theme:e})=>[(0,st.GI)({theme:e,color:"TextSecondary",fontFamily:"Proxima"}),{fontSize:"15px",lineHeight:"24px",display:"inline"}]),"label:PCheckboxText;"),jr=(0,at.Z)("h5",{target:"eb49p774"})((({theme:e})=>[(0,st.GI)({theme:e,color:"TextPrimary",fontFamily:"Proxima",fontWeight:"bold"}),{fontSize:"15px",lineHeight:"24px",display:"inline",margin:0}]),"label:H5CheckboxTitle;"),Pr=(0,at.Z)("p",{target:"eb49p775"})((({theme:e})=>[{fontSize:"12px",lineHeight:"18px",maxHeight:"140px",overflowY:"auto",wordBreak:"break-word",padding:"12px",background:e.colors.BGPlaceholderDefault,color:e.colors.TextSecondary,borderRadius:"8px",marginBottom:"16px",marginTop:"12px",img:{maxWidth:"100%"},"h1, h2, h3, h4, h5, h6, p, ul, ol, li, strong, font, a":{fontSize:"12px !important",lineHeight:"15px !important",color:`${e.colors.TextSecondary} !important`,margin:0,padding:0},strong:{fontWeight:"normal"},"ul > li":{listStyleType:"disc"},a:{cursor:"pointer",textDecoration:"underline"}}]),"label:PPolicyContent;"),Tr=(0,at.Z)("div",{target:"eb49p776"})((({theme:e})=>[Or(e.isMobile),{background:e.colors.BGPrimary}]),"label:DivButtonWrapper;"),Or=e=>e?{position:"fixed",bottom:"0px",left:"0",right:"0",padding:"8px 32px"}:{marginTop:"9px"},Lr=(0,l.memo)((function(){const e=(0,y.Q)("WebApp_Login"),t=(0,d.k6)(),{language:i="en",region:n=""}=(0,bt.m7)((0,w.Lh)((()=>["language","region"]),[])),{isMobile:s}=(0,bt.m7)((0,S.h)((()=>["isMobile"]),[])),[{termsDomContent:r,privacyDomContent:c},{requestPolicyContent:p,setKrPolicySelection:u}]=(0,a.b7)(Ve),[{fromNotRegisterLogin:g,thirdPlatformNotRegistered:m},{registerThirdPlatform:h,registerPhone:_}]=(0,a.b7)(ot),[v,b]=(0,l.useState)([]),x=(0,l.useMemo)((()=>s?{marginTop:"0"}:void 0),[s]);(0,l.useEffect)((()=>{p({articleKeys:["terms-of-service","privacy-policy"],lang:i})}),[p,i]);const k=(0,l.useCallback)((e=>{b(e?["terms-of-service","privacy-policy","push-policy"]:[])}),[]),C=(0,l.useCallback)(((e,t)=>{const i=v.indexOf(t);b(-1===i?[...v,t]:v.filter((e=>e!==t)))}),[v]);(0,l.useEffect)((()=>{u(v)}),[u,v]);const j=(0,l.useCallback)((()=>{"Third"===g&&m?h({ageCheckDone:!0,platform:m.platform,profileKey:m.profileKey,region:n}):"Phone"===g?_({ageCheckDone:!0,region:n}):t.push(f.gY.signupPhone)}),[g,t,_,h,m,n]),P=-1===v.indexOf("terms-of-service")||-1===v.indexOf("privacy-policy");return(0,o.jsxs)(xr,{children:[(0,o.jsx)(kr,Object.assign({"data-e2e":"policy-confirm-title"},{children:e("common_registration_terms_and_conditions_title")}),void 0),(0,o.jsxs)(Sr,{children:[(0,o.jsx)(fr,{"data-e2e":"policy-confirm-box",circle:!0,checked:3===v.length,onChange:k,id:"signup-policy-all"},void 0),(0,o.jsx)(Cr,Object.assign({"data-e2e":"policy-confirm-item"},{children:e("register_page_agree_all_kr")}),void 0)]},void 0),ur.map((({title:t,value:i,content:n},a)=>(0,o.jsxs)("div",{children:[(0,o.jsxs)(Sr,{children:[(0,o.jsx)(fr,{id:`signup-policy-${i}`,checked:-1!==v.indexOf(i),value:i,onChange:C,circle:!0},void 0),(0,o.jsx)(jr,{children:e(t)},void 0)]},void 0),"terms-of-service"===i?(0,o.jsx)(Pr,{dangerouslySetInnerHTML:{__html:r}},void 0):"privacy-policy"===i?(0,o.jsx)(Pr,{dangerouslySetInnerHTML:{__html:c}},void 0):(0,o.jsx)(Pr,{children:e(n)},void 0)]},a))),(0,o.jsx)(Tr,{children:(0,o.jsx)(pn,Object.assign({disabled:P,onClick:j,style:x,"data-e2e":"next-button"},{children:e("common_registration_terms_and_conditions_next")}),void 0)},void 0)]},void 0)})),Ir=["Month_1","Month_2","Month_3","Month_4","Month_5","Month_6","Month_7","Month_8","Month_9","Month_10","Month_11","Month_12"],Ar=()=>Ir.map(((e,t)=>({value:t+1,key:e}))),Er=(e=1)=>{let t=31;return 2===e?t=29:-1!==[4,6,9,11].indexOf(e)&&(t=30),Array(t).fill(0).map(((e,t)=>({value:t+1,key:`${t+1}`})))};var Mr=i(25615),Rr=i.n(Mr),Fr=i(84991);const Dr=(e,t)=>{if(null===t||-1===t||null===e.current)return;const i=34*t,o=34*(t+1),n=e.current.clientHeight,{scrollTop:a}=e.current;i<a?e.current.scrollTop=i:o>n+a&&(e.current.scrollTop=o-n)};function Br(e=[],t,i=[]){return e.filter((e=>0===String(e.key).toLowerCase().indexOf(t.toLowerCase())&&i.indexOf(e)<0))}const zr=(0,at.Z)("div",{target:"e1phcp2x0"})((({theme:e})=>({background:e.colors.BGInput,borderRadius:"4px",position:"relative","& + &":{marginInlineStart:"8px"},cursor:"pointer"})),"label:DivSelector;");zr.defaultProps=Object.assign(Object.assign({},zr.defaultProps),{"data-e2e":"select-container"});const Nr=(0,at.Z)("div",{target:"e1phcp2x1"})((({hasValue:e,theme:t,error:i})=>({width:"120px",height:"44px",padding:"0 12px",display:"flex",justifyContent:"space-between",alignItems:"center",color:i?t.colors.Negative:e?t.colors.TextPrimary:t.colors.TextQuaternary,fontSize:"16px"})),"label:DivSelectLabel;"),Ur=(0,at.Z)(Fs.Z,{target:"e1phcp2x2"})((({theme:e,up:t})=>({color:e.colors.TextPrimary,transform:t?"rotateZ(180deg)":"rotateZ(0deg)",transition:"all .3S"})),"label:StyledArrowTriangleDownLargeFill;"),Wr=(0,at.Z)(hs.Z,{target:"e1phcp2x3"})({width:"16px",height:"16px",marginInlineStart:"12px"},"label:StyledSelectIcon;"),$r=(0,at.Z)("div",{target:"e1phcp2x4"})((({theme:e,show:t})=>[(0,st.YJ)({direction:e.direction,end:"0",start:"0"}),{width:"120px",maxHeight:"320px",overflow:"auto",position:"absolute",background:e.colors.BGPrimary,borderRadius:"4px",boxShadow:"0px 2px 12px rgba(0, 0, 0, 0.12)",top:"50px",zIndex:12,display:t?"block":"none",transition:"display .3s"}]),"label:DivOptionsWrapper;");$r.defaultProps=Object.assign(Object.assign({},$r.defaultProps),{"data-e2e":"select-list"});const qr=(0,at.Z)("div",{target:"e1phcp2x5"})((({theme:e,selected:t})=>({height:"34px",overflow:"auto",fontSize:"16px",padding:"0 12px",cursor:"pointer",display:"flex",alignItems:"center",color:e.colors.TextPrimary,background:t?e.colors.BGView:"unset",":hover, :focus":{background:e.colors.BGView}})),"label:DivOption;"),Hr=e=>{const t=(0,y.Q)("WebApp_Login"),{placeholder:i,options:n,selectItem:s,onClick:r,error:d}=e,{key:c,value:p}=null!=s?s:{},u=(0,l.useRef)(null),g=(0,l.useRef)(null),[m,h]=(0,l.useState)(!1),[_,{setLoginModalShow:b}]=(0,a.b7)(v.r),{isModal:f}=Pt((()=>["isModal"]),[]),x=(0,l.useMemo)((()=>e=>e.value===p),[p]),k=(0,l.useMemo)((()=>n.findIndex(x)),[x,n]),w=(0,l.useCallback)((e=>{var t;m&&!(null===(t=null==u?void 0:u.current)||void 0===t?void 0:t.contains(e.target))&&h(!1)}),[m]);(0,l.useEffect)((()=>(window.addEventListener("mousedown",w),()=>{window.removeEventListener("mousedown",w)})),[w]);const S=n.concat().map((({value:e,key:i})=>({value:e,key:t(null!=i?i:"")}))),{keyboardHandler:C,visualFocusIndex:j}=(({panelOpen:e,options:t,initialFocusIndex:i=-1,setPanelShow:o,panelContainerRef:n,onSelect:a,onOpen:s=Rr(),onClose:r=Rr(),stopPropagation:d=!0,isModal:c=!1,setModalShow:p=Rr(),trapFocusWhenPanelOpen:u=!0})=>{const[g,m]=(0,l.useState)(i),h=(0,l.useRef)(),_=(0,l.useRef)(""),v=(0,l.useCallback)((l=>{d&&l.stopPropagation();const v=(0,Fr.Ex)(l,e,u,c);switch(v){case 2:o(!0),i>-1&&m(i),null==s||s();break;case 3:e&&o(!1),null==r||r();break;case 13:p(!1),null==r||r();break;case 4:g>-1&&(a(t[g]),o(!1),null==r||r());break;case 11:l.preventDefault();break;case 1:case 0:case 8:case 7:case 5:case 6:{const e=function(e,t,i){switch(i){case 5:return 0;case 6:return t;case 1:return Math.max(0,e-1);case 0:return Math.min(t,e+1);case 8:return Math.max(0,e-10);case 7:return Math.min(t,e+10);default:return e}}(g,t.length-1,v);m(e),Dr(n,e);break}case 10:try{"number"==typeof h.current&&window.clearTimeout(h.current),h.current=window.setTimeout((()=>{_.current=""}),500),_.current+=l.key;const e=function(e=[],t,i=0){const o=[...e.slice(i),...e.slice(0,i)],n=Br(o,t)[0];if(n)return e.indexOf(n);if((a=t.split("")).every((e=>e===a[0]))){const i=Br(o,t[0]);return e.indexOf(i[0])}return-1;var a}(t,_.current,g+1);e>-1?(m(e),Dr(n,e)):(window.clearTimeout(h.current),_.current="")}catch(e){console.warn("[Role=select] Type Error: ",e)}break;default:return}}),[i,c,r,s,a,t,n,e,p,o,d,u,g]);return{keyboardHandler:v,visualFocusIndex:g,setVisualFocusIndex:m}})({panelOpen:m,options:S,initialFocusIndex:k,setPanelShow:h,panelContainerRef:g,onSelect:r,isModal:f,setModalShow:b}),P=(0,l.useCallback)((e=>()=>{r(e),h(!1)}),[r,h]),T=(0,l.useCallback)((()=>{h(!m)}),[m]);return(0,o.jsxs)(zr,Object.assign({ref:u,tabIndex:0,role:"combobox",onKeyDown:C,"aria-label":t(i),"aria-expanded":m,"aria-haspopup":"listbox","aria-controls":m?`${i}-options-list-container`:"","aria-activedescendant":j>-1?`${i}-options-item-${j}`:void 0},{children:[(0,o.jsxs)(Nr,Object.assign({onClick:T,hasValue:Boolean(c),error:d},{children:[t(null!=c?c:i),(0,o.jsx)(Ur,{up:m},void 0)]}),void 0),(0,o.jsx)($r,Object.assign({show:m,ref:g,role:"listbox",id:`${i}-options-list-container`},{children:n.map(((e,n)=>{var a;return(0,o.jsxs)(qr,Object.assign({id:`${i}-options-item-${n}`,selected:p===e.value||j===n,onClick:P(e),role:"option","aria-selected":p===e.value},{children:[t(`${null!==(a=e.key)&&void 0!==a?a:e.value}`),p===e.value&&(0,o.jsx)(Wr,{},void 0)]}),n)}))}),void 0)]}),void 0)},Gr=(0,at.Z)("div",{target:"e18rms3f0"})({display:"flex",marginBottom:"4px"},"label:DivAgeSelector;"),Zr=(0,at.Z)("div",{target:"e18rms3f1"})((({theme:e})=>[(0,st.GI)({theme:e,color:"TextPrimary",fontWeight:"semiBold"}),{fontSize:"16px",lineHeight:"22px",marginBottom:"4px"}]),"label:DivTitle;"),Vr=(0,at.Z)("div",{target:"e18rms3f2"})((({theme:e,type:t})=>[(0,st.GI)({theme:e,color:"error"===t?"Negative":"TextTertiary"}),{fontSize:"14px",lineHeight:"20px",marginBottom:"16px"}]),"label:DivDescription;"),Qr=Ar(),Yr=(()=>{const e=new Date(1900,0,1,0,0,0),t=new Date((new Date).getFullYear()-1,11,31,0,0,0);return Array(t.getFullYear()-e.getFullYear()+1).fill(t.getFullYear()).map(((e,t)=>({value:e-t,key:""+(e-t)})))})(),Kr=(0,l.memo)((function(){const e=(0,s.fz)(x.ZI),[{ageErrorMsg:t,year:i,month:n,date:r},{setBirthday:d,setMonth:c,setYear:p,setDate:u}]=(0,a.b7)($),g=(0,y.Q)("WebApp_Login");(0,l.useEffect)((()=>{n&&i&&r&&d({year:i.value,month:n.value,date:r.value})}),[i,n,r,d]),(0,l.useEffect)((()=>{e.ageGateShow()}),[]);const m=(0,l.useCallback)((e=>{c(e)}),[c]),h=(0,l.useCallback)((e=>{u(e)}),[u]),_=(0,l.useCallback)((e=>{p(e)}),[p]),v=t||"mus_age_gate_tips";return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Zr,{children:g("common_registration_agegate_title")},void 0),(0,o.jsxs)(Gr,{children:[(0,o.jsx)(Hr,{error:Boolean(t),placeholder:"Month",selectItem:n,options:Qr,onClick:m},void 0),(0,o.jsx)(Hr,{error:Boolean(t),placeholder:"Day",selectItem:r,options:Er(null==n?void 0:n.value),onClick:h},void 0),(0,o.jsx)(Hr,{error:Boolean(t),placeholder:"Year",selectItem:i,options:Yr,onClick:_},void 0)]},void 0),(0,o.jsx)(Vr,Object.assign({type:t?"error":"default"},{children:g(v)}),void 0)]},void 0)})),Jr=(0,at.Z)("h2",{target:"e1lzrlvq0"})((({theme:e})=>[(0,st.GI)({theme:e,color:"TextPrimary",fontFamily:"Sofia"}),{fontSize:"32px",margin:"16px auto",fontWeight:"bold",textAlign:"center",wordWrap:"break-word"}]),"label:H2Title;"),Xr=(0,at.Z)("div",{target:"e1lzrlvq1"})({width:"375px",margin:"auto"},"label:DivLoginContainer;"),el=(0,at.Z)("div",{target:"e1lzrlvq2"})((({theme:e})=>[(0,st.GI)({theme:e,color:"TextPrimary",fontWeight:"semiBold"}),{fontSize:"15px",display:"flex",justifyContent:"space-between",marginBottom:"5px"}]),"label:DivDescription;"),tl=()=>{const e=(0,y.Q)("WebApp_Login"),{handleCheckAge:t}=nr(),{signupLoading:i}=(0,a.mp)(ot),{birthday:n,ageErrorMsg:s,showErrorByToast:r,checkAgeLoading:d}=(0,a.mp)($);return(0,l.useEffect)((()=>{s&&r&&ge.h.open({content:e(s),duration:3})}),[s,e,r]),(0,o.jsxs)(Xr,{children:[(0,o.jsx)(Jr,{children:e("common_login_panel_entry_2")},void 0),(0,o.jsx)(Kr,{},void 0),(0,o.jsx)(pn,Object.assign({disabled:!n,loading:i||d,onClick:t,"data-e2e":"next-button"},{children:e("common_registration_email_input_button")}),void 0)]},void 0)},il=(0,at.Z)("div",{target:"eopmsux0"})({marginBottom:"16px",position:"relative"},"label:DivUsernameContainer;"),ol=(0,at.Z)("div",{target:"eopmsux1"})((({theme:e})=>[(0,st.YJ)({direction:e.direction,end:"12px"}),{position:"absolute",boxSizing:"border-box",paddingTop:"14.5px",width:"20px",height:"44px",top:0,div:{position:"absolute",width:"15px",height:"15px",margin:"2px",border:"2px solid rgba(22, 24, 35, .34)",borderRadius:"50%",animation:"lds-ring 1.2s cubic-bezier(.5, 0, .5, 1) infinite",borderColor:"rgba(22, 24, 35, .34) transparent transparent transparent",":nth-of-type(1)":{animationDelay:"-.45s"},":nth-of-type(2)":{animationDelay:"-.3s"},":nth-of-type(3)":{animationDelay:"-.15s"}},"@keyframes lds-ring":{"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}}]),"label:DivNameCheckLoading;"),nl=(0,at.Z)("div",{target:"e1ulspo0"})((({theme:{colors:e,direction:t}})=>[{position:"relative",marginTop:"11px",borderRadius:"4px",border:"1px solid",background:e.BGPrimary,borderColor:e.LineSecondary,zIndex:2,width:"100%",":before":{content:'""',height:"14px",position:"absolute",background:e.BGPrimary,width:"14px",top:"-7px",left:"rtl"===t?"unset":"14px",right:"rtl"===t?"14px":"unset",zIndex:-1,borderInlineEnd:`1px solid ${e.LineSecondary2}`,borderTop:`1px solid ${e.LineSecondary2}`,transform:"rtl"===t?"rotateZ(45deg)":"rotateZ(-45deg)"}}]),"label:DivSuggestListWrapper;"),al=(0,at.Z)("div",{target:"e1ulspo1"})((({theme:e})=>[(0,st.GI)({theme:e,fontFamily:"Proxima",color:"TextTertiary"}),{fontSize:"13px",lineHeight:"17px",padding:"16px 12px 9px"}]),"label:DivLabel;"),sl=(0,at.Z)("ul",{target:"e1ulspo2"})({padding:"0",margin:"0",maxHeight:"200px",overflowY:"auto"},"label:UlList;"),rl=(0,at.Z)("li",{target:"e1ulspo3"})((({theme:e})=>[(0,st.GI)({theme:e,fontFamily:"Proxima",color:"TextPrimary"}),{display:"flex",padding:"0 12px",justifyContent:"space-between",alignItems:"center",height:"34px",lineHeight:"34px",fontSize:"13px",cursor:"pointer"},{":hover":{backgroundColor:"rgba(22, 24, 35, .03)"}}]),"label:LiListItem;"),ll=(0,l.memo)((function(){var e,t;const[{usernameInfo:i},{setUsername:n}]=(0,a.b7)(ot),s=(0,y.Q)("WebApp_Login"),r=(0,l.useCallback)((e=>()=>{n(e)}),[n]);return(null==i?void 0:i.isValid)||!(null===(e=null==i?void 0:i.suggestList)||void 0===e?void 0:e.length)?null:(0,o.jsxs)(nl,{children:[(0,o.jsx)(al,{children:s("common_registration_email_input_suggested")},void 0),(0,o.jsx)(sl,{children:null===(t=null==i?void 0:i.suggestList)||void 0===t?void 0:t.map(((e,t)=>(0,o.jsx)(rl,Object.assign({onClick:r(`${e}`)},{children:e}),t)))},void 0)]},void 0)})),dl=(0,l.memo)((function({autoFocus:e,ftc:t,placeholder:i,tip:n}){var s,r;const[{usernameInfo:d,username:c,checkNameLoading:p},{validateUsername:u,validateFTCUsername:g,setUsername:m,setUsernameInfo:h}]=(0,a.b7)(ot),{isMobile:_}=(0,bt.m7)((0,S.h)((()=>["isMobile"]),[])),v=(0,y.Q)("WebApp_Login"),b=(0,l.useCallback)((e=>{const t=e.target.value;m(t)}),[m]);(0,l.useEffect)((()=>{c?t?g({name:c}):u({name:c}):h(void 0)}),[t,h,c,g,u]);const f=_?"":"common_registration_username_text";return(0,o.jsxs)(il,{children:[(0,o.jsx)(Qn,{autoFocus:e,placeholder:v(null!=i?i:"common_registration_username_placeholder"),onChange:b,errorState:d&&!d.isValid&&!p,autoComplete:"off",name:"new-username",value:c,disableDelete:p},void 0),p&&(0,o.jsxs)(ol,{children:[(0,o.jsx)("div",{},void 0),(0,o.jsx)("div",{},void 0),(0,o.jsx)("div",{},void 0),(0,o.jsx)("div",{},void 0)]},void 0),(0,o.jsx)(Ln,{text:v(null!==(r=null!==(s=null==d?void 0:d.errorMsg)&&void 0!==s?s:n)&&void 0!==r?r:f),type:(null==d?void 0:d.errorMsg)?"error":"default"},void 0),!_&&(0,o.jsx)(ll,{},void 0)]},void 0)})),cl=(0,at.Z)("div",{target:"e1sbfgbz0"})((({theme:e,asText:t})=>({width:"100%",display:"flex",alignItems:"center",justifyContent:"center",background:e.colors.BGPrimary,borderBottom:e.isMobile?"none":"1px solid",borderColor:e.colors.LineReverse3,padding:t?"unset":"16px 30px",marginBottom:t?"12px":"unset"})),"label:DivAgreement;");cl.defaultProps=Object.assign(Object.assign({},cl.defaultProps),{"data-e2e":"policy-confirm-tips"});const pl=(0,at.Z)("p",{target:"e1sbfgbz1"})((({theme:e,asText:t})=>[(0,st.GI)({theme:e,fontFamily:"Proxima",color:"TextTertiary"}),{fontSize:"12px",lineHeight:"15px",width:"375px",textAlign:t?"unset":"center"}]),"label:PText;"),ul=(0,at.Z)("a",{target:"e1sbfgbz2"})((({theme:e})=>({color:e.colors.TextPrimary})),"label:ALink;"),gl=(0,l.memo)((function({i18nKey:e,show:t,asText:i}){const{language:n}=(0,bt.m7)((0,w.Lh)((()=>["language"]),[])),{isMobile:a}=(0,bt.m7)((0,S.h)((()=>["isMobile"]),[])),s=a?[f.gY.signupHome]:[f.gY.signupPhoneOrEmail,f.gY.signupPhone,f.gY.signupEmail,f.gY.signupHome],{pathname:r}=(0,d.TH)(),l=null!=t?t:s.find((e=>e===r.replace(/\/$/,""))),c=(0,y.Q)("WebApp_Login"),p=c(null!=e?e:"common_registration_email_input_agreement").split(/%\d*\$s/),u=c("common_registration_terms_use"),g=c("common_registration_privacy_policy");return l?(0,o.jsx)(cl,Object.assign({asText:i},{children:(0,o.jsxs)(pl,Object.assign({asText:i},{children:[p[0]," ",(0,o.jsx)(ul,Object.assign({target:"_blank",rel:"noopener noreferrer",href:`https://www.tiktok.com/legal/terms-of-use?lang=${n}`},{children:u}),void 0),p[1]," ",(0,o.jsx)(ul,Object.assign({target:"_blank",rel:"noopener noreferrer",href:`https://www.tiktok.com/legal/privacy-policy?lang=${n}`},{children:g}),void 0),p[2]]}),void 0)}),void 0):null})),ml=()=>{const e=(0,y.Q)("WebApp_Login"),[{usernameInfo:t,errorMsg:i,signupLoading:n},{usernameRegister:s}]=(0,a.b7)(ot),{registerLimited:r}=(0,a.mp)($);ar();const{password:d,lengthValid:c,contentValid:p}=(0,a.mp)(wn),{region:u}=(0,bt.m7)((0,w.Lh)((()=>["region"]),[])),g=(0,l.useCallback)((()=>{s({password:d,region:u})}),[d,s,u]),m=!1===(null==t?void 0:t.isValid)||!d||!p||!c;return(0,o.jsxs)(Pn,Object.assign({onSubmit:g},{children:[(0,o.jsx)(Jr,{children:e("common_login_panel_entry_2")},void 0),(0,o.jsx)(el,{children:e("common_login_sms_popup_option_1")},void 0),(0,o.jsx)(dl,{autoFocus:!0,placeholder:e("common_registration_username_placeholder"),tip:"mus_create_account_desc_pc",ftc:!0},void 0),(0,o.jsx)(Ua,{loginError:Boolean(i)},void 0),r&&(0,o.jsx)(gl,{show:!0},void 0),(0,o.jsx)(Ln,{text:e(null!=i?i:""),type:"error"},void 0),(0,o.jsx)(pn,Object.assign({disabled:m,loading:n},{children:e("common_notification_unlogged_button")}),void 0)]}),void 0)},hl=(0,at.Z)("div",{target:"e6sea5o0"})((({theme:e})=>[(0,st.GI)({theme:e,color:"TextPrimary",fontFamily:"Proxima",fontWeight:e.isMobile?"normal":"bold"}),{height:e.isMobile?"16px":"44px",lineHeight:e.isMobile?"16px":"44px",textAlign:"center",fontSize:"16px",marginTop:e.isMobile?"unset":"10px",width:"100%",cursor:"pointer"}]),"label:DivTextContainer;"),_l=(0,l.memo)((function(){var e;const t=(0,y.Q)("WebApp_Login"),{setLoginSuccess:i}=(0,a.qj)(nt),{isMobile:n}=(0,bt.m7)((0,S.h)((()=>["isMobile"]),[])),s=(0,d.k6)(),r=(null===(e=(0,d.$B)(f.gY.signupCreatePassword))||void 0===e?void 0:e.isExact)&&n,c=(0,l.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),r?s.push(f.gY.signupCreateUsername):i()}),[s,r,i]),p=(0,l.useCallback)((e=>{13===e.keyCode&&(e.preventDefault(),e.stopPropagation(),i())}),[i]);return(0,o.jsx)(hl,Object.assign({onClick:c,onKeyDown:p,tabIndex:0},{children:t("common_registration_username_skip")}),void 0)})),vl=()=>{const e=(0,y.Q)("WebApp_Login"),{usernameInfo:t,username:i}=(0,a.mp)(ot),[{loginLoading:n},{setAccount:s}]=(0,a.b7)(nt),{password:r,lengthValid:d,contentValid:c}=(0,a.mp)(wn),p=(0,l.useCallback)((()=>{s({password:r,username:i})}),[s,r,i]),u=!((null==t?void 0:t.isValid)&&r&&c&&d);return(0,o.jsxs)(Pn,Object.assign({onSubmit:p},{children:[(0,o.jsx)(Jr,{children:e("common_login_panel_entry_2")},void 0),(0,o.jsx)(el,{children:e("common_registration_password_title")},void 0),(0,o.jsx)(Ua,{autoFocus:!0},void 0),(0,o.jsx)(el,{children:e("common_registration_username_title")},void 0),(0,o.jsx)(dl,{},void 0),(0,o.jsx)(pn,Object.assign({disabled:u,loading:n},{children:e("common_notification_unlogged_button")}),void 0),(0,o.jsx)(_l,{},void 0)]}),void 0)},yl=(0,l.memo)((function(){const e=(0,y.Q)("WebApp_Login"),{usernameInfo:t,username:i}=(0,a.mp)(ot),[{loginLoading:n},{setAccount:s}]=(0,a.b7)(nt),r=(0,l.useCallback)((()=>{s({username:i})}),[s,i]),d=!(null==t?void 0:t.isValid);return(0,o.jsxs)(Pn,Object.assign({onSubmit:r},{children:[(0,o.jsx)(Jr,{children:e("common_login_panel_entry_2")},void 0),(0,o.jsx)(el,{children:e("common_registration_username_title")},void 0),(0,o.jsx)(dl,{},void 0),(0,o.jsx)(pn,Object.assign({disabled:d,loading:n},{children:e("common_notification_unlogged_button")}),void 0),(0,o.jsx)(_l,{},void 0)]}),void 0)}));var bl=i(75160);const fl=(0,at.Z)("div",{target:"e19c4o080"})({marginBottom:"16px",display:"flex"},"label:DivContainer;"),xl=(0,at.Z)("label",{target:"e19c4o081"})((({theme:e})=>[(0,st.GI)({theme:e,color:"TextSecondary",fontFamily:"Proxima"}),{fontSize:"12px",lineHeight:"16px",display:"inline"}]),"label:LabelCheckboxText;");xl.defaultProps=Object.assign(Object.assign({},xl.defaultProps),{"data-e2e":"collect-email-conconsent-text"});const kl=(0,l.memo)((function(){const e=(0,y.Q)("WebApp_Login"),{emailConsent:t}=Pt((()=>["emailConsent"]),[]),{region:i}=(0,bt.m7)((0,w.Lh)((()=>["region"]),[])),{isMobile:n}=(0,bt.m7)((0,S.h)((()=>["isMobile"]),[])),[{emailConsent:s},{setEmailConsent:r}]=(0,a.b7)(ot),d=(0,l.useCallback)((e=>{var t;t={checked:e},Fe.W.event("click_button_consent_check_box",{page_name:"email_signup_page",exp_name:"onboarding_collect_email_consent",text_type:"long_version",status:t.checked?"checked":"unchecked"}),r(e)}),[r]);return(0,l.useEffect)((()=>{t&&(Fe.W.event("show_button_consent_check_box",{page_name:"email_signup_page",exp_name:"onboarding_collect_email_consent",text_type:"long_version"}),["MY","PK","BD"].includes(i)&&r(!0))}),[i,t,r]),t?(0,o.jsxs)(fl,{children:[(0,o.jsx)(fr,{"data-e2e":"collect-email-conconsent-box",size:n?"small":"big",checked:Boolean(s),onChange:d,id:"email-consent",circle:n},void 0),(0,o.jsx)(xl,Object.assign({htmlFor:"email-consent",id:mr},{children:e("EDM_onboarding_email_consent_checkbox_list")}),void 0)]},void 0):null})),wl=(0,at.Z)("p",{target:"esdrtey0"})((({theme:e})=>[(0,st.GI)({theme:e,color:"TextPrimary"}),{fontSize:"12px",lineHeight:"15px",marginBottom:"8px",marginTop:"-4px",display:"flex"}]),"label:PRegister;"),Sl=(0,at.Z)("span",{target:"esdrtey1"})((({theme:e})=>[(0,st.GI)({theme:e,color:"Primary"}),{display:"flex",alignItems:"center"}]),"label:SpanLink;"),Cl=()=>{const e=(0,y.Q)("WebApp_Login"),{ageGateAction:t,birthday:i}=(0,a.mp)($),[{errorMsg:n,signupLoading:s},{emailRegister:r}]=(0,a.b7)(ot),{emailErrorMsg:d,email:c=""}=(0,a.mp)(Ue),[{sendCodeLoading:p,code:u,codeFormatError:g,emailRegistered:m},{sendEmailCodeForSignup:h}]=(0,a.b7)(We),{password:_,lengthValid:v,contentValid:b}=(0,a.mp)(wn),x=(0,l.useCallback)((()=>{h({email:c})}),[c,h]),{region:k}=(0,bt.m7)((0,w.Lh)((()=>["region"]),[])),S=(0,l.useCallback)((()=>{r({password:_,code:u,email:c,region:k})}),[c,u,r,_,k]),C=!c||!_||!u||!b||!v||Boolean(g)||Boolean(d)||Boolean(!i&&t);return(0,o.jsxs)(Pn,Object.assign({onSubmit:S},{children:[(0,o.jsx)(Jr,{children:e("common_login_panel_entry_2")},void 0),Boolean(t)&&(0,o.jsx)(Kr,{},void 0),(0,o.jsxs)(el,{children:[e("email")," ",(0,o.jsx)(ua,{text:e("common_registration_switch_phone"),path:f.gY.signupPhone,replace:!0},void 0)]},void 0),(0,o.jsx)(gs,{emailRegistered:m},void 0),m&&(0,o.jsxs)(wl,{children:[e("common_registration_email_existing_title"),",",(0,o.jsx)(Ei,Object.assign({path:f.gY.loginWithSignedEmail,underline:!1},{children:(0,o.jsxs)(Sl,{children:[e("Log in"),(0,o.jsx)(bl.Z,{},void 0)]},void 0)}),void 0)]},void 0),(0,o.jsx)(Ua,{},void 0),(0,o.jsx)(Jn,{email:!0,disabled:Boolean(d||!c||!i&&t),codeFromNumber:c,loading:p,errorMsg:n,onClickSendCode:x},void 0),(0,o.jsx)(kl,{},void 0),(0,o.jsx)(pn,Object.assign({loading:s,disabled:C},{children:e("common_registration_email_input_button")}),void 0)]}),void 0)},jl=()=>{const e=(0,y.Q)("WebApp_Login"),[{birthday:t,ageGateAction:i}]=(0,a.b7)($),[{sendCodeLoading:n,code:r,codeFormatError:d},{sendPhoneCodeForLogin:c}]=(0,a.b7)(We),[{loginLoading:p},{handleSmsLogin:u}]=(0,a.b7)(nt),g=(0,s.fz)(x.ZI),[m]=(0,a.b7)(Ie),{mobile:h,phoneErrorMsg:_,phone:v}=m,b=h&&r&&!_&&!d&&(t||!i),k=Cn(),w=(0,l.useCallback)((()=>{g.setPlatform("sms_verification"),g.loginSubmit({signUp:!0}),u({birthday:t,phoneCode:r,mobile:h,login_only:!1})}),[t,u,g,h,r]),S=(0,l.useCallback)((()=>{c({mobile:h,isSignUp:!0})}),[h,c]);return(0,o.jsxs)(Pn,Object.assign({onSubmit:w},{children:[(0,o.jsx)(Jr,{children:e("common_login_panel_entry_2")},void 0),Boolean(i)&&(0,o.jsx)(Kr,{platform:"sms_verification"},void 0),(0,o.jsxs)(el,{children:[e("phone")," ",(0,o.jsx)(ua,{text:e("common_registration_switch_email"),path:f.gY.signupEmail,replace:!0},void 0)]},void 0),(0,o.jsx)(qs,{},void 0),(0,o.jsx)(Jn,{disabled:Boolean(_||!v||!t&&i),codeFromNumber:h,loading:n,errorMsg:k,onClickSendCode:S},void 0),(0,o.jsx)(pn,Object.assign({loading:p,disabled:!b},{children:e("common_registration_email_input_button")}),void 0)]}),void 0)},Pl=(0,l.memo)((()=>{const{initial:e}=(0,a.mp)($);(0,l.useEffect)((()=>{Fe.W.event("enter_sign_up",{enter_type:"click_sign_up"})}),[]),(0,yt.q)({pid:"signup"}),or(),function(){const{isMobile:e}=(0,bt.m7)((0,S.h)((()=>["isMobile"]),[])),{showAgeConfirm:t}=(0,a.mp)($),i=(0,d.k6)();(0,l.useEffect)((()=>{t&&!e&&i.push(f.gY.signupAgeGateConfirm)}),[i,t,e])}();const t=(0,d.k6)(),{pathname:i}=t.location,n=(0,l.useCallback)((e=>{27!==e.keyCode&&e.stopPropagation()}),[]);return e||i===f.gY.signupHome?(0,o.jsxs)(ho,Object.assign({onKeyDown:n},{children:[(0,o.jsx)(Ja,{page:"signup"},void 0),(0,o.jsxs)(d.rs,{children:[(0,o.jsx)(d.AW,{path:f.gY.signupHome,component:bo,exact:!0},void 0),(0,o.jsx)(d.AW,{path:f.gY.signupPhoneOrEmail,component:jl,exact:!0},void 0),(0,o.jsx)(d.AW,{path:f.gY.signupPhone,component:jl,exact:!0},void 0),(0,o.jsx)(d.AW,{path:f.gY.signupEmail,component:Cl,exact:!0},void 0),(0,o.jsx)(d.AW,{path:f.gY.signupCreatePassword,component:vl,exact:!0},void 0),(0,o.jsx)(d.AW,{path:f.gY.signupCreateUsername,component:yl,exact:!0},void 0),(0,o.jsx)(d.AW,{path:f.gY.signupCreateAccount,component:ml,exact:!0},void 0),(0,o.jsx)(d.AW,{path:f.gY.signupAgeGate,component:tl,exact:!0},void 0),(0,o.jsx)(d.AW,{path:f.gY.signupAgeGateConfirm,component:cr,exact:!0},void 0),(0,o.jsx)(d.AW,{path:f.gY.signupPolicyConfirm,component:Lr,exact:!0},void 0),(0,o.jsx)(d.AW,{path:"*",component:bo},void 0)]},void 0)]}),void 0):(0,o.jsx)(G.g,{center:!0,style:{margin:"auto"}},void 0)})),Tl=()=>(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(d.AW,{path:f.gY.loginHome,component:ir},void 0),(0,o.jsx)(d.AW,{path:f.gY.signupHome,component:Pl},void 0),(0,o.jsx)(gt,{},void 0),(0,o.jsx)(_t,{},void 0)]},void 0);var Ol=i(60908),Ll=i(87692),Il=i(77966);const Al=(0,at.Z)("div",{target:"e1pdjumk0"})((({theme:e})=>[(0,st.YJ)({direction:e.direction,start:"0"}),{background:e.colors.BGPrimary,borderRadius:"8px 8px 0 0",width:"100%",padding:"16px",textAlign:"center"}]),"label:DivContainer;"),El=(0,at.Z)("div",{target:"e1pdjumk1"})((({fill:e})=>({height:"64px",width:"64px",borderRadius:"50%",position:"relative",background:"rgba(22, 24, 35, .03)",display:"inline-block","&::before, &::after":{width:"5px",height:"23px",display:"block",content:'""',background:null!=e?e:"#fe3824",position:"absolute",left:"50%",transform:"translate(-50%, 16px)"},"&::after":{height:"5px",transform:"translate(-50%, 43px)"}})),"label:DivIcon;"),Ml=(0,at.Z)("i",{target:"e1pdjumk2"})((({theme:e})=>[(0,st.YJ)({direction:e.direction,end:"16px"}),{position:"absolute",top:"16px",cursor:"pointer"}]),"label:IClose;"),Rl=(0,at.Z)("p",{target:"e1pdjumk3"})([({theme:e})=>(0,st.GI)({theme:e,color:"TextPrimary",fontFamily:"Proxima"}),{lineHeight:"20px",fontSize:"17px",margin:"24px 0",textAlign:"center"}],"label:PDesc;"),Fl={US:{1357:"login_deactivated_popup_website_text_US"},1357:"login_deactivated_popup_website_text_nonUS",1384:"ban_age_gate_removed_pc_text"},Dl={1357:"login_deactivated_popup_webapp_text",1384:"ban_age_gate_removed_mobile_text"},Bl=(0,l.memo)((()=>{const e=(0,y.Q)("WebApp_Login"),[{showRiskModal:t,errorCode:i,showInstagramRisk:n=!1},s]=(0,a.b7)(Ae),{region:r,appType:d}=(0,bt.m7)((0,w.Lh)((()=>["region","appType"]),[])),{isMobile:c}=(0,bt.m7)((0,S.h)((()=>["isMobile"]),[])),p=((e,t,i)=>{var o,n;if(i)return t?Dl[i]:null!==(n=null===(o=Fl[e])||void 0===o?void 0:o[i])&&void 0!==n?n:Fl[i]})(r,c,i)||(n?"login_new_ins_mobile_body":"login_risk_popup_body"),u=(0,l.useCallback)((()=>{s.setShowRiskModal(!1),s.setShowInstagramCantLoginModal(!1)}),[s]),g=(0,l.useCallback)((()=>{const e=(({pid:e,downloadLink:t="",appType:i,pageName:o,enterMethod:n,samsung:a=!1,wid:s,utmCampaign:r,activationAd:l,region:d,config:c,modalType:p,extraOnelinkParams:u})=>{const{samsungEnableRegion:g}=(0,bt.m7)(c),{region:m=[],isFull:h}=(0,bt.m7)(g),_=a||navigator.userAgent.indexOf("SamsungBrowser")>-1&&(h||m.includes(d)),v="1"===(0,ze.St)("is_from_samsung_quick_access");t||(t=_?"https://snssdk1233.onelink.me/bIdt":"t"===i?"https://www.tiktok.com/download-link/ol/BAuo":"https://www.tiktok.com/download-link/ol/bIdt");const y=(0,ze.St)("webapp_launch_mode"),b=(0,ze.St)("webapp_original_traffic_type");let f="tiktokweb";e?f=e:"paid"===y?f="tiktokwebsem":"referral_amp"===y?f="tiktokwebamp":"organic"===y&&(f="tiktokwebseo");const x=(0,Il.Pz)(navigator.userAgent)||(0,Il.CN)(navigator.userAgent)?"mobile":"pc",k=o,w=null!=l?l:`${n?`enter_method:${n};`:""}${p?`modal_type:${p};`:""}`,S={jump_time:Date.now(),af_adset:y,pid:f,af_siteid:x,c:k,af_ad:w,web_id:s,wid:s,af_ad_id:b};"paid"===y&&(S.is_retargeting=!0,S.af_click_lookback="1d");const C=(0,ze.St)("utm_source"),j=(0,ze.St)("utm_medium"),P=(0,ze.St)("utm_campaign"),T=(0,ze.St)("utm_term"),O=(0,ze.St)("utm_content"),L=r?`${r},${P}`:P,I=(0,ze.St)("referer_url"),A=(0,ze.St)("referer_video_id"),E=`${C?`source:${C};`:""}${j?`medium:${j};`:""}${L?`campaign:${L};`:""}${T?`term:${T};`:""}${O?`content:${O};`:""}`,M=`${I?`referer_url:${I}};`:""}${A?`referer_video_id:${A};`:""}`;if(E&&(S.af_adset_id=E),M&&(S.af_channel=M),_&&v&&(S.pid="samsungbrowser",S.c=`samsungbrowser_${null==d?void 0:d.toLowerCase()}`,S.af_click_lookback="1d",S.af_android_url="https://apps.samsung.com/appquery/appDetail.as?appId=com.zhiliaoapp.musically",S.af_dp="snssdk1233://"),"undefined"!=typeof window){S.canonical=encodeURIComponent(`${gi.o}${decodeURIComponent(location.pathname)}`);const e=fe.parse(location.search);e.embed_source&&(S.embed_source=e.embed_source)}return u&&Object.assign(S,u),`${t}?${fe.stringify(S)}`})({appType:d,enterMethod:"login_anti_spam",pageName:Fe.W.commonParams.page_name});(e=>{const t=navigator.userAgent&&-1!==navigator.userAgent.indexOf("CriOS")?"_self":"_blank",i=window.open(e,t);i&&(i.opener=null)})(e)}),[d]);return(0,o.jsx)(Ia,Object.assign({visible:t||n,maskCloseable:!1},{children:(0,o.jsxs)(Al,Object.assign({"data-e2e":"instagram-modal"},{children:[(0,o.jsx)(El,{},void 0),(0,o.jsx)(Ml,Object.assign({onClick:u,"data-e2e":"instagram-modal-close"},{children:(0,o.jsx)(St.Z,{},void 0)}),void 0),(0,o.jsx)(Rl,Object.assign({"data-e2e":"instagram-modal-desc"},{children:e(p)}),void 0),(0,o.jsx)(pn,Object.assign({onClick:g,"data-e2e":"instagram-modal-button"},{children:e("login_risk_popup_button")}),void 0)]}),void 0)}),void 0)})),zl=()=>{const[{phoneNotRegistered:e=!1},{setPhoneNotRegistered:t}]=(0,a.b7)(nt),{registerPhone:i}=(0,a.qj)(ot),n=(0,d.k6)(),{region:s}=(0,bt.m7)((0,w.Lh)((()=>["region"]),[])),r=(0,l.useCallback)((()=>{t(!1),i({region:s})}),[t,i,s]),c=(0,l.useCallback)((()=>{t(!1),n.goBack()}),[t,n]),p=(0,l.useMemo)((()=>[{text:"common_login_sms_popup_option_1",onClick:r},{text:"common_login_sms_popup_option_2",onClick:c}]),[c,r]);return(0,o.jsx)(va,{visible:e,title:"common_login_sms_popup_text",actions:p},void 0)},Nl=(0,at.Z)("div",{target:"e7p76pd0"})({padding:"0 32px",flex:"1",minHeight:"550x"},"label:DivMobileBody;"),Ul=e=>{const{children:t,onSubmit:i}=e,n=(0,u.__rest)(e,["children","onSubmit"]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Nt,Object.assign({},n),void 0),(0,o.jsx)(Nl,{children:i?(0,o.jsx)(Pn,Object.assign({onSubmit:e.onSubmit},{children:t}),void 0):t},void 0)]},void 0)},Wl=()=>{var e;const t=(0,y.Q)("WebApp_Login"),i=(0,s.fz)(x.ZI),{birthday:n}=(0,a.mp)($),{mobile:r}=(0,a.mp)(Ie),[{code:c},{sendPhoneCodeForLogin:p,sendPhoneCodeForVerify:u}]=(0,a.b7)(We),[{loginLoading:g},{handleSmsLogin:m,handleSmsVerify:h}]=(0,a.b7)(nt),{isSecurityVerification:_}=Pt((()=>["isSecurityVerification"]),[]),v=null===(e=(0,d.$B)(f.gY.signupPhoneDigit))||void 0===e?void 0:e.isExact,b=Cn(),k=(0,l.useCallback)((()=>{_?u({mobile:r}):p({mobile:r})}),[_,r,p,u]),w=(0,l.useCallback)((()=>{i.setPlatform("sms_verification"),i.loginSubmit();const e={birthday:v?n:void 0,mobile:r,phoneCode:c,login_only:!v};_?h(e):m(e)}),[i,v,n,r,c,_,h,m]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(da,{codeFromNumber:r,onClickSendCode:k,onSubmit:w,loading:g,errorMsg:b},void 0),!v&&(0,o.jsx)(ua,{text:t("login_option_password"),path:f.gY.loginPhonePassword},void 0)]},void 0)},$l=(0,at.Z)("div",{target:"e1ntpldy0"})((({theme:e})=>({height:"40px",borderBottom:`1px solid ${e.colors.LinePrimary2}`,display:"flex",padding:"0 16px",boxSizing:"border-box",width:"100%",marginInlineStart:"50%",transform:"rtl"===e.direction?"translateX(50%)":"translateX(-50%)",marginBottom:"40px"})),"label:DivTabWrapper;"),ql=(0,at.Z)("div",{target:"e1ntpldy1"})((({theme:e,selected:t})=>[(0,st.GI)({theme:e,fontFamily:"Proxima",fontWeight:"semiBold",color:t?"TextPrimary":"TextQuaternary"}),{textAlign:"center",lineHeight:"40px",transition:"all .1s",flex:1,margin:"0 10px",borderBottom:"2px solid",borderBottomColor:t?e.colors.TextPrimary:"transparent",whiteSpace:"nowrap"}]),"label:DivTab;"),Hl=(0,l.memo)((function(e){const{tabs:t,currentTab:i}=e;return(0,o.jsx)($l,{children:t.map((({text:n,e2e:a},s)=>(0,o.jsx)(ql,Object.assign({onClick:e.onSwitchTab(s),selected:t[i].text===n,"data-e2e":a},{children:n}),s)))},void 0)})),Gl=(0,at.Z)("div",{target:"eybrrr40"})((({theme:e})=>[(0,st.YJ)({direction:e.direction,end:"0"}),{width:"20px",position:"fixed",top:"50%",transform:"translateY(-50%)",textAlign:"center"}]),"label:DivLetterListContainer;"),Zl=(0,at.Z)("div",{target:"eybrrr41"})((({theme:e})=>[(0,st.GI)({theme:e,fontFamily:"Proxima"}),{fontWeight:600,fontSize:"12px",lineHeight:"14px",color:"rgba(22, 24, 35, .5)"}]),"label:DivLetterItem;"),Vl=e=>(0,o.jsx)(Gl,{children:Oe.map((t=>(0,o.jsx)(Zl,Object.assign({onClick:e.onClick(t.label)},{children:t.label}),t.label)))},void 0),Ql=e=>{const{onClose:t}=e,i=(0,u.__rest)(e,["onClose"]),n=(0,y.Q)("WebApp_Login"),a=(0,l.useRef)(null),s=(0,l.useCallback)((e=>()=>{var t,i;const o=document.getElementById(e);null===(t=null==a?void 0:a.current)||void 0===t||t.scrollTo(0,null!==(i=null==o?void 0:o.offsetTop)&&void 0!==i?i:0)}),[]);return(0,o.jsxs)(As,Object.assign({ref:a},{children:[(0,o.jsx)(Nt,{onClose:e.onClose,showRight:!1,title:n("select_region"),showClose:!0},void 0),(0,o.jsxs)(Es,{children:[(0,o.jsx)(Ss,Object.assign({},i),void 0),(0,o.jsx)(Vl,{onClick:s},void 0)]},void 0)]}),void 0)},Yl=(0,at.Z)("div",{target:"eex98o0"})({marginBottom:"12px"},"label:DivContainer;"),Kl=(0,at.Z)(Qn,{target:"eex98o1"})({flex:1,width:0,marginBottom:"0"},"label:StyledBaseInput;");Kl.defaultProps=Object.assign(Object.assign({},Kl.defaultProps),{"data-e2e":"phone-number-input"});const Jl=(0,at.Z)("div",{target:"eex98o2"})((({theme:{colors:e},errState:t})=>[{transition:"all 0.3s",display:"flex",borderBottom:"1px solid",input:{color:t?e.Negative:"unset",paddingInlineStart:"8px"},borderColor:t?e.Negative:e.LineSecondary2}]),"label:DivPhoneInputContainer;"),Xl=(0,at.Z)("div",{target:"eex98o3"})((({theme:{colors:e,direction:t}})=>[{display:"flex",alignItems:"center",justifyContent:"space-between",position:"relative",padding:"2px",height:"44px","::after":{content:'""',width:"1px",height:"10px",background:e.LineSecondary,right:"rtl"===t?"unset":"0",left:"rtl"===t?"0":"unset",position:"absolute"}}]),"label:DivAreaLabelContainer;"),ed=(0,at.Z)("span",{target:"eex98o4"})((({theme:{colors:e}})=>[{fontSize:"15px",lineHeight:1,color:e.TextPrimary,fontWeight:400}]),"label:SpanLabelContainer;"),td=(0,at.Z)(Ui.Z,{target:"eex98o5"})({fontSize:"16px",margin:"0 4px"},"label:StyledArrowIcon;"),id=(0,l.memo)((function({filterCountryList:e}){Rs(e);const[t,i]=(0,a.b7)(Ie),{area:n,areaCode:s,phoneErrorMsg:r,showAreaCodeSelector:d,searchText:c,phone:p,matchSearchArea:u}=t,{checkPhoneNumberFormat:g}=i,{toggleAreaCodeSelector:m,selectAreaCode:h}=i,_=(0,y.Q)("WebApp_Login"),v=jn(),b=(0,l.useCallback)((e=>{g({phone:e.target.value.replace(/[^\d]/g,"")})}),[g]),f=(0,l.useCallback)((({code:e,area:t})=>{h({code:e,area:t})}),[h]),x=Boolean(r||v);return(0,o.jsxs)(Yl,{children:[(0,o.jsxs)(Jl,Object.assign({errState:x},{children:[(0,o.jsxs)(Xl,Object.assign({onClick:m,role:"select"},{children:[(0,o.jsxs)(ed,{children:[n," +",s]},void 0),(0,o.jsx)(td,{},void 0)]}),void 0),d&&(0,o.jsx)(Ql,{onClose:m,matchSearchArea:u,filterCountryList:e,onSelected:f,currentSelectCode:s,searchText:c},void 0),(0,o.jsx)(Kl,{value:p,border:!1,errState:x,placeholder:_("phone_number"),onChange:b,name:"mobile",type:"tel"},void 0)]}),void 0),x&&(0,o.jsx)(Ln,{text:_(r||v||""),type:"error"},void 0)]},void 0)})),od=(0,l.memo)((function(){const e=(0,y.Q)("WebApp_Login"),{phone:t,mobile:i}=(0,a.mp)(Ie),[{sendCodeLoading:n},{sendPhoneCodeForLogin:s,sendPhoneCodeForVerify:r}]=(0,a.b7)(We),{isSecurityVerification:c}=Pt((()=>["isSecurityVerification"]),[]),p=(0,d.$B)(f.gY.signupPhoneOrEmail),u=(0,l.useCallback)((()=>{const e={mobile:i,nextUrl:p?f.gY.signupPhoneDigit:f.gY.loginPhoneDigit};c?r(e):s(e)}),[c,r,i,s,p]);return(0,o.jsxs)(Pn,Object.assign({onSubmit:u},{children:[(0,o.jsx)(id,{},void 0),p&&(0,o.jsx)(gl,{show:!0,asText:!0,i18nKey:"common_registration_phone_input_agreement"},void 0),(0,o.jsx)(pn,Object.assign({loading:n,disabled:!t,"data-e2e":"login-button"},{children:e(p?"common_registration_phone_input_button":"Login")}),void 0)]}),void 0)})),nd=(0,l.memo)((function(){var e;const t=(0,y.Q)("WebApp_Login"),i=(0,d.k6)(),n=(0,d.$B)(`${f.gY.loginPhoneOrEmail}/:type`),a="email"===(null===(e=null==n?void 0:n.params)||void 0===e?void 0:e.type)?1:0,s=(0,l.useMemo)((()=>[{text:t("Phone")},{text:t("common_login_email_input_tab"),e2e:"email-tab"}]),[t]),r=(0,l.useCallback)((e=>()=>{0===e?i.replace(f.gY.loginPhone):i.replace(f.gY.loginEmail)}),[i]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Hl,{tabs:s,currentTab:a,onSwitchTab:r},void 0),0===a&&(0,o.jsx)(od,{},void 0),1===a&&(0,o.jsx)(Gs,{},void 0)]},void 0)})),ad=()=>{const e=(0,y.Q)("WebApp_Login"),t=(0,s.fz)(x.ZI),[{loginLoading:i},{handlePasswordLogin:n}]=(0,a.b7)(nt),{mobile:r}=(0,a.mp)(Ie),{password:d}=(0,a.mp)(wn),c=Cn(),p=(0,l.useCallback)((()=>{t.setPlatform("phone"),t.loginSubmit(),n({account:r,password:d,mobile:r})}),[n,t,r,d]);return(0,o.jsxs)(Pn,Object.assign({onSubmit:p},{children:[(0,o.jsx)(Xn,{children:e("common_login_password_title")},void 0),(0,o.jsx)(Ua,{create:!1,loginError:Boolean(c)},void 0),(0,o.jsx)(Ln,{text:e(c),type:"error"},void 0),(0,o.jsx)(ba,{},void 0),(0,o.jsx)(pn,Object.assign({loading:i,disabled:!d},{children:e("Login")}),void 0)]}),void 0)},sd=()=>{const e=(0,y.Q)("WebApp_Login"),{hideHomePage:t,loginTitle:i}=Pt((()=>["hideHomePage","loginTitle"]),[]),n=t?i:"Login";return(0,o.jsxs)(Ul,Object.assign({title:e(n)},{children:[(0,o.jsx)(d.AW,{path:f.gY.loginPhonePassword,component:ad,exact:!0},void 0),(0,o.jsx)(d.AW,{path:f.gY.loginPhoneOrEmail,component:nd,exact:!0},void 0),(0,o.jsx)(d.AW,{path:f.gY.loginPhone,component:nd,exact:!0},void 0),(0,o.jsx)(d.AW,{path:f.gY.loginEmail,component:nd,exact:!0},void 0),(0,o.jsx)(d.AW,{path:f.gY.loginPhoneDigit,component:Wl,exact:!0},void 0)]}),void 0)},rd=(0,l.memo)((function(){const e=(0,y.Q)("WebApp_Login"),[{sendCodeLoading:t},{sendEmailCodeForReset:i}]=(0,a.b7)(We),[{emailErrorMsg:n,email:s=""},{setEmailInfo:r}]=(0,a.b7)(Ue),d=jn(),c=(0,l.useCallback)((()=>{const e=Le(s);r({email:s,valid:e}),e&&i({email:s,email_logic_type:2,nextUrl:f.gY.emailResetDigit})}),[i,s,r]);return(0,o.jsxs)(Pn,Object.assign({onSubmit:c},{children:[(0,o.jsx)(Xn,{children:e("setting_password_email_verify_title")},void 0),(0,o.jsx)(ea,{children:e("common_login_reset_email_input_text")},void 0),(0,o.jsx)(gs,{errorMsg:d},void 0),(0,o.jsx)(pn,Object.assign({loading:t,disabled:Boolean(n)||!s},{children:e("common_registration_phone_input_button")}),void 0)]}),void 0)})),ld=(0,l.memo)((function(){const{email:e=""}=(0,a.mp)(Ue),[{code:t},{sendEmailCodeForReset:i}]=(0,a.b7)(We),[{checkCodeLoading:n,errorMsg:s},{checkEmailCodeForReset:r,setErrorMsg:d}]=(0,a.b7)(Sn);(0,l.useEffect)((()=>{d("")}),[t,d]);const c=(0,l.useCallback)((()=>{i({email:e,email_logic_type:2})}),[e,i]),p=(0,l.useCallback)((()=>{r({email:e,code:t})}),[t,r,e]);return(0,o.jsx)(da,{codeFromNumber:e,onClickSendCode:c,onSubmit:p,loading:n,errorMsg:s,email:!0},void 0)})),dd=(0,l.memo)((function(){const e=(0,y.Q)("WebApp_Login"),[{code:t},{sendPhoneCodeForForceResetPwd:i,sendEmailCodeForForceResetPwd:n}]=(0,a.b7)(We),[{forceResetResponse:s},{clearForceResetRes:r}]=(0,a.b7)(nt),{conditional_login_ticket:d,mobile:c,email:p,type:u}=(0,bt.m7)(s),[{checkCodeLoading:g,errorMsg:m},{checkCodeForForceReset:h,setErrorMsg:_}]=(0,a.b7)(Sn);(0,l.useEffect)((()=>{_("")}),[t,_]);const v=(0,l.useCallback)((()=>{"email"===u?n({conditional_login_ticket:d}):i({conditional_login_ticket:d})}),[n,i,d,u]),b=(0,l.useCallback)((()=>{h({conditional_login_ticket:d,code:t,type:u})}),[h,d,t,u]);(0,l.useEffect)((()=>()=>{r()}),[]);const f="email"===u?e("setting_password_code_email_text",{email:p}):e("setting_password_code_sms_text",{mobile:c}).replace(/(\D{1})(4)(\D{1})/,((e,t,i,o)=>`${t}6${o}`));return(0,o.jsx)(da,{autoSendFirstTime:!0,codeDesc:f,codeFromNumber:d,onClickSendCode:v,onSubmit:b,loading:g,errorMsg:m,email:"email"===u},void 0)})),cd=(0,l.memo)((function(){const e=(0,y.Q)("WebApp_Login"),{phone:t,mobile:i}=(0,a.mp)(Ie),[n,{sendPhoneCodeForResetPwd:s}]=(0,a.b7)(We),{sendCodeLoading:r}=n,d=(0,l.useCallback)((()=>{s({mobile:i,nextUrl:f.gY.phoneResetDigit})}),[s,i]);return(0,o.jsxs)(Pn,Object.assign({onSubmit:d},{children:[(0,o.jsx)(Xn,{children:e("setting_bind_phone_input_title")},void 0),(0,o.jsx)(ea,{children:e("common_login_reset_phone_input_text")},void 0),(0,o.jsx)(id,{},void 0),(0,o.jsx)(pn,Object.assign({loading:r,disabled:!t},{children:e("common_registration_phone_input_button")}),void 0)]}),void 0)})),pd=(0,l.memo)((function(){const{mobile:e}=(0,a.mp)(Ie),[{code:t},{sendPhoneCodeForResetPwd:i}]=(0,a.b7)(We),[{checkCodeLoading:n,errorMsg:s},{checkPhoneCodeForReset:r,setErrorMsg:d}]=(0,a.b7)(Sn);(0,l.useEffect)((()=>{d("")}),[t,d]);const c=(0,l.useCallback)((()=>{i({mobile:e})}),[e,i]),p=(0,l.useCallback)((()=>{r({mobile:e,code:t})}),[e,t,r]);return(0,o.jsx)(da,{codeFromNumber:e,onClickSendCode:c,onSubmit:p,loading:n,errorMsg:s},void 0)})),ud=(0,l.memo)((function(){const e=(0,y.Q)("WebApp_Login"),t=(0,s.fz)(x.ZI),{password:i,lengthValid:n,contentValid:r}=(0,a.mp)(wn),{ticket:d,type:c,conditional_login_ticket:p}=(0,a.mp)(Sn),[{loginLoading:u},{handleChangePwdByTicket:g,handleForceResetPwd:m}]=(0,a.b7)(nt),h=Cn(),_=(0,l.useCallback)((()=>{p?(t.forceResetSubmit(),m({ticket:d,password:i,conditional_login_ticket:p,type:c})):(t.setPlatform("email"===c?"email":"sms_verification"),t.loginSubmit(),g({password:i,ticket:d,type:c}))}),[t,c,p,m,d,i,g]),v=!(d&&i&&n&&r);return(0,o.jsxs)(Pn,Object.assign({onSubmit:_},{children:[(0,o.jsx)(Xn,{children:e("common_login_reset_password_title")},void 0),(0,o.jsx)(Ua,{autoFocus:!0,loginErrorText:h},void 0),(0,o.jsx)(pn,Object.assign({loading:u,disabled:v},{children:e("Login")}),void 0)]}),void 0)})),gd=(0,at.Z)("div",{target:"e1ku7a1t0"})((({theme:e})=>[{background:e.colors.BGPlaceholderDefault,padding:"8px 16px",color:e.colors.TextTertiary,width:"100vw",marginInlineStart:"-32px"}]),"label:DivTips;"),md=()=>{var e;const t=(0,y.Q)("WebApp_Login"),{forceResetResponse:i}=(0,a.mp)(nt),n=(null===(e=(0,d.$B)([f.gY.loginForgetPhonePassword,f.gY.loginForgetEmailPassword]))||void 0===e?void 0:e.isExact)&&i,s=i?"":t("Reset");return(0,o.jsxs)(Ul,Object.assign({title:s,showLeft:!n},{children:[n&&(0,o.jsx)(gd,{children:t("changepw_banner")},void 0),(0,o.jsx)(d.AW,{path:f.gY.loginForgetEmailPassword,component:i?dd:rd,exact:!0},void 0),(0,o.jsx)(d.AW,{path:f.gY.emailResetDigit,component:ld,exact:!0},void 0),(0,o.jsx)(d.AW,{path:f.gY.loginForgetPhonePassword,component:i?dd:cd,exact:!0},void 0),(0,o.jsx)(d.AW,{path:f.gY.phoneResetDigit,component:pd,exact:!0},void 0),(0,o.jsx)(d.AW,{path:f.gY.resetPassword,component:ud,exact:!0},void 0)]}),void 0)},hd=()=>{const e=(0,y.Q)("WebApp_Login");return(0,o.jsx)(Ul,Object.assign({title:e("Login")},{children:(0,o.jsx)(er,{},void 0)}),void 0)},_d=(0,l.memo)((()=>(Qa(),(0,yt.q)({pid:"login"}),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Ja,{page:"login"},void 0),(0,o.jsxs)(d.rs,{children:[(0,o.jsx)(d.AW,{path:f.gY.loginHome,component:bo,exact:!0},void 0),(0,o.jsx)(d.AW,{path:f.gY.loginQRcode,component:sn,exact:!0},void 0),(0,o.jsx)(d.AW,{path:f.gY.loginPhoneOrEmail,component:sd},void 0),(0,o.jsx)(d.AW,{path:f.gY.loginPhoneDigit,component:sd,exact:!0},void 0),(0,o.jsx)(d.AW,{path:f.gY.loginWithSignedEmail,component:hd,exact:!0},void 0),(0,o.jsx)(d.AW,{path:f.gY.loginForgetEmailPassword,component:md,exact:!0},void 0),(0,o.jsx)(d.AW,{path:f.gY.loginForgetPhonePassword,component:md,exact:!0},void 0),(0,o.jsx)(d.AW,{path:f.gY.loginReset,component:md},void 0),(0,o.jsx)(d.AW,{path:f.gY.loginTwoStepVerify,component:Ha,exact:!0},void 0),(0,o.jsx)(d.AW,{path:f.gY.loginTwoStepVerify,component:Ha,exact:!0},void 0),(0,o.jsx)(d.AW,{path:"*",component:bo},void 0)]},void 0),(0,o.jsx)(zl,{},void 0)]},void 0)))),vd=()=>{const{showAgeConfirm:e}=(0,a.mp)($);return(0,o.jsx)(b.u_,Object.assign({visible:e},{children:(0,o.jsx)(cr,{isModal:!0},void 0)}),void 0)};var yd=i(1025);const bd=(0,at.Z)("div",{target:"e1i2f2310"})({position:"absolute",marginTop:"24px",left:0,right:0},"label:DivWrapper;"),fd=new Date(1900,0,1,0,0,0),xd=new Date((new Date).getFullYear()-1,11,31,0,0,0),kd=Ar(),wd=(0,l.memo)((function(){const e=(0,s.fz)(x.ZI),[{year:t,month:i,date:n},{setBirthday:r,setMonth:d,setYear:c,setDate:p}]=(0,a.b7)($),u=(0,y.Q)("WebApp_Login");(0,l.useEffect)((()=>{e.ageGateShow()}),[]);const g=(0,l.useCallback)((e=>{var t;return(0,o.jsx)(l.Fragment,{children:u(null===(t=kd[e])||void 0===t?void 0:t.key)},void 0)}),[u]),m=(0,l.useCallback)((e=>{const t=e.getDate(),i=e.getMonth()+1,o=e.getFullYear();d({value:i,key:String(i-1)}),c({value:o,key:String(o)}),p({value:t,key:String(t)}),r({year:o,month:i,date:t})}),[r,p,d,c]),h=(0,l.useMemo)((()=>{if(!(null==t?void 0:t.value)||!(null==i?void 0:i.value)||!(null==n?void 0:n.value)){const e=new Date;return new Date(xd.getFullYear(),e.getMonth(),e.getDate())}return new Date(t.value,i.value,n.value)}),[t,i,n]);return(0,o.jsx)(bd,{children:(0,o.jsx)(yd.Z,{className:"date-selector",defaultDate:h,mode:"date",maxDate:xd,minDate:fd,onDateChange:m,formatMonth:g},void 0)},void 0)})),Sd=(0,l.memo)((function(){const e=(0,y.Q)("WebApp_Login"),{birthday:t,checkAgeLoading:i,ageErrorMsg:n="",showErrorByToast:s}=(0,a.mp)($),{signupLoading:r}=(0,a.mp)(ot),{user:d}=(0,bt.m7)((0,w.Lh)((()=>["user"]),[])),{handleCheckAge:c}=nr();(0,l.useEffect)((()=>{n&&s&&me(e(n))}),[s,n,e]);const p=Boolean(n)&&!s;return(0,o.jsxs)(Ul,Object.assign({title:e("sign_up")},{children:[(0,o.jsx)(Xn,Object.assign({"data-e2e":"birthday-text"},{children:e("common_registration_agegate_title")}),void 0),(0,o.jsx)(ea,Object.assign({"data-e2e":"birthday-desc"},{children:e("mus_age_gate_tips")}),void 0),(0,o.jsx)(Qn,{errorState:p,disableDelete:!0,placeholder:e("birthdate_placeholder"),value:t,readonly:!0},void 0),p&&(0,o.jsx)(Ln,{text:e(n),type:"error"},void 0),(0,o.jsx)(pn,Object.assign({disabled:!t||Boolean(d),onClick:c,loading:r||i,"data-e2e":"next-button"},{children:e("common_registration_email_input_button")}),void 0),(0,o.jsx)(wd,{},void 0)]}),void 0)})),Cd=(0,at.Z)("div",{target:"ekgsvu50"})({height:"30px",overflow:"hidden",marginTop:"32px"},"label:DivWrapper;"),jd=(0,at.Z)("div",{target:"ekgsvu51"})((({theme:{colors:e}})=>[{position:"relative",background:e.BGPrimary,borderColor:e.LineSecondary,width:"100%",display:"flex",overflowX:"auto",alignItems:"center",paddingBottom:"10px"}]),"label:DivSuggestListWrapper;"),Pd=(0,at.Z)("span",{target:"ekgsvu52"})((({theme:e,disabled:t})=>[(0,st.GI)({theme:e,fontFamily:"Proxima",color:t?"TextTertiary":"TextPrimary",fontWeight:"semiBold"}),{padding:"6px 10px",fontSize:"13px",lineHeight:"14px",border:`1px solid ${e.colors.LineSecondary2}`,borderRadius:"2px",marginInlineEnd:"8px",whiteSpace:"nowrap"}]),"label:SpanItem;"),Td=(0,l.memo)((function({labelText:e="common_registration_email_input_suggested",list:t=[],onSelect:i}){const n=(0,y.Q)("WebApp_Login");return(0,o.jsx)(Cd,{children:(0,o.jsxs)(jd,{children:[(0,o.jsx)(Pd,Object.assign({disabled:!0},{children:n(e)}),void 0),t.map(((e,t)=>(0,o.jsx)(Pd,Object.assign({onClick:i(`${e}`)},{children:e}),t)))]},void 0)},void 0)})),Od=(0,l.memo)((function(){var e;const[{usernameInfo:t},{setUsername:i}]=(0,a.b7)(ot),n=(0,l.useCallback)((e=>()=>{i(e)}),[i]);return(null==t?void 0:t.isValid)||!(null===(e=null==t?void 0:t.suggestList)||void 0===e?void 0:e.length)?null:(0,o.jsx)(Td,{onSelect:n,list:null==t?void 0:t.suggestList},void 0)})),Ld=(0,l.memo)((function(){const e=(0,y.Q)("WebApp_Login"),{usernameInfo:t}=(0,a.mp)(ot),i=(0,d.k6)();ar();const n=(0,l.useCallback)((()=>{i.push({pathname:f.gY.signupCreatePassword,state:{createAccount:!0}})}),[i]);return(0,o.jsxs)(Ul,Object.assign({title:e("sign_up"),onSubmit:n},{children:[(0,o.jsxs)(Xn,{children:[" ",e("common_login_sms_popup_option_1")]},void 0),(0,o.jsxs)(ea,{children:[" ",e("mus_create_account_desc")," "]},void 0),(0,o.jsx)(dl,{ftc:!0},void 0),(0,o.jsx)(pn,Object.assign({disabled:!(null==t?void 0:t.isValid)},{children:e("common_registration_email_input_button")}),void 0),(0,o.jsx)(Od,{},void 0)]}),void 0)})),Id=()=>{const e=(0,y.Q)("WebApp_Login"),[{loginLoading:t},{setAccount:i}]=(0,a.b7)(nt),{usernameRegister:n}=(0,a.qj)(ot),{password:s,lengthValid:r,contentValid:c}=(0,a.mp)(wn),p=(0,d.TH)(),{createAccount:u}=(0,bt.m7)(p.state),{region:g}=(0,bt.m7)((0,w.Lh)((()=>["region"]),[])),m=(0,l.useCallback)((()=>{u?n({password:s,region:g}):i({password:s,nextUrl:f.gY.signupCreateUsername})}),[i,s,u,n,g]),h=!s||!c||!r;return(0,o.jsxs)(Ul,Object.assign({LeftIcon:u?void 0:_l,onSubmit:m,title:e("sign_up")},{children:[(0,o.jsx)(Xn,{children:e("common_registration_password_title")},void 0),(0,o.jsx)(Ua,{autoFocus:!0},void 0),(0,o.jsx)(pn,Object.assign({disabled:h,loading:t},{children:e("common_registration_email_input_button")}),void 0)]}),void 0)},Ad=(0,l.memo)((function(){const e=(0,y.Q)("WebApp_Login"),{usernameInfo:t,username:i}=(0,a.mp)(ot),[{loginLoading:n},{setAccount:s}]=(0,a.b7)(nt),r=(0,l.useCallback)((()=>{s({username:i})}),[s,i]);return(0,o.jsxs)(Ul,Object.assign({title:e("sign_up"),onSubmit:r,LeftIcon:_l},{children:[(0,o.jsx)(Xn,{children:e("common_registration_username_title")},void 0),(0,o.jsx)(ea,{children:e("common_registration_username_text")},void 0),(0,o.jsx)(dl,{},void 0),(0,o.jsx)(pn,Object.assign({loading:n,disabled:!(null==t?void 0:t.isValid)},{children:e("common_notification_unlogged_button")}),void 0),(0,o.jsx)(Od,{},void 0)]}),void 0)})),Ed=(0,l.memo)((function(){const{email:e=""}=(0,a.mp)(Ue),[{code:t},{sendEmailCodeForSignup:i}]=(0,a.b7)(We),[{errorMsg:n,signupLoading:s},{emailRegister:r}]=(0,a.b7)(ot),c=(0,d.TH)(),{password:p}=c.state||{},u=(0,l.useCallback)((()=>{i({email:e})}),[e,i]),{region:g}=(0,bt.m7)((0,w.Lh)((()=>["region"]),[])),m=(0,l.useCallback)((()=>{r({email:e,code:t,password:p,region:g})}),[t,r,e,p,g]);return(0,o.jsx)(da,{autoSendFirstTime:!0,codeFromNumber:e,onClickSendCode:u,onSubmit:m,loading:s,errorMsg:n,email:!0},void 0)})),Md=()=>{const e=(0,y.Q)("WebApp_Login"),{password:t,lengthValid:i,contentValid:n}=(0,a.mp)(wn),s=(0,d.k6)(),r=(0,l.useCallback)((()=>{s.push({pathname:f.gY.signupEmailDigit,state:{password:t}})}),[s,t]),c=!t||!n||!i;return(0,o.jsxs)(Pn,Object.assign({onSubmit:r},{children:[(0,o.jsx)(Xn,{children:e("common_registration_password_title")},void 0),(0,o.jsx)(Ua,{autoFocus:!0},void 0),(0,o.jsx)(pn,Object.assign({disabled:c},{children:e("common_notification_unlogged_button")}),void 0)]}),void 0)},Rd=(0,l.memo)((function(){const{setSuggestEmailSuffixConfig:e}=(0,a.qj)(Ue),{emailSuffixConfig:t}=Pt((()=>["emailSuffixConfig"]),[]),i=(0,l.useCallback)((t=>()=>{e(t)}),[e]),n=t.map((e=>`@${e}`));return(0,o.jsx)(Td,{list:n,onSelect:i},void 0)})),Fd=(0,l.memo)((function(){const e=(0,y.Q)("WebApp_Login"),[{email:t="",emailErrorMsg:i,checkEmailLoading:n},{checkEmailRegistered:s}]=(0,a.b7)(Ue),r=jn(),d=(0,l.useCallback)((()=>{s()}),[s]);return(0,o.jsxs)(Pn,Object.assign({onSubmit:d},{children:[(0,o.jsx)(gs,{errorMsg:r},void 0),(0,o.jsx)(gl,{show:!0,asText:!0},void 0),(0,o.jsx)(kl,{},void 0),(0,o.jsx)(pn,Object.assign({loading:n,disabled:!t||Boolean(i),"data-e2e":"next-button"},{children:e("common_registration_email_input_button")}),void 0),(0,o.jsx)(Rd,{},void 0)]}),void 0)})),Dd=(0,l.memo)((function(){var e;const t=(0,y.Q)("WebApp_Login"),i=(0,d.k6)(),n=(0,d.$B)(`${f.gY.signupPhoneOrEmail}/:type`),a="email"===(null===(e=null==n?void 0:n.params)||void 0===e?void 0:e.type)?1:0,s=(0,l.useMemo)((()=>[{text:t("Phone")},{text:t("Email"),e2e:"email-tab"}]),[t]),r=(0,l.useCallback)((e=>()=>{0===e?i.replace(f.gY.signupPhone):i.replace(f.gY.signupEmail)}),[i]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Hl,{tabs:s,currentTab:a,onSwitchTab:r},void 0),0===a&&(0,o.jsx)(od,{},void 0),1===a&&(0,o.jsx)(Fd,{},void 0)]},void 0)})),Bd=()=>{const e=(0,y.Q)("WebApp_Login");return(0,o.jsxs)(Ul,Object.assign({title:e("sign_up")},{children:[(0,o.jsx)(d.AW,{path:f.gY.signupPhoneOrEmail,component:Dd},void 0),(0,o.jsx)(d.AW,{path:f.gY.signupPhoneDigit,component:Wl,exact:!0},void 0),(0,o.jsx)(d.AW,{path:f.gY.signupEmailDigit,component:Ed,exact:!0},void 0),(0,o.jsx)(d.AW,{path:f.gY.signupEmailCreatePassword,component:Md,exact:!0},void 0)]}),void 0)},zd=(0,l.memo)((function(){return(0,o.jsx)(Ul,Object.assign({showRight:!1},{children:(0,o.jsx)(Lr,{},void 0)}),void 0)})),Nd=(0,l.memo)((()=>(Qa(),or(),(0,yt.q)({pid:"signup"}),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Ja,{page:"signup"},void 0),(0,o.jsxs)(d.rs,{children:[(0,o.jsx)(d.AW,{path:f.gY.signupHome,component:bo,exact:!0},void 0),(0,o.jsx)(d.AW,{path:f.gY.signupPhoneOrEmail,component:Bd},void 0),(0,o.jsx)(d.AW,{path:f.gY.signupPhoneDigit,component:Bd,exact:!0},void 0),(0,o.jsx)(d.AW,{path:f.gY.signupEmailDigit,component:Bd,exact:!0},void 0),(0,o.jsx)(d.AW,{path:f.gY.signupEmailCreatePassword,component:Bd,exact:!0},void 0),(0,o.jsx)(d.AW,{path:f.gY.signupCreatePassword,component:Id,exact:!0},void 0),(0,o.jsx)(d.AW,{path:f.gY.signupCreateUsername,component:Ad,exact:!0},void 0),(0,o.jsx)(d.AW,{path:f.gY.signupCreateAccount,component:Ld,exact:!0},void 0),(0,o.jsx)(d.AW,{path:f.gY.signupAgeGate,component:Sd,exact:!0},void 0),(0,o.jsx)(d.AW,{path:f.gY.signupPolicyConfirm,component:zd,exact:!0},void 0),(0,o.jsx)(d.AW,{path:"*",component:bo},void 0)]},void 0),(0,o.jsx)(vd,{},void 0)]},void 0)))),Ud=(0,at.Z)("div",{target:"e1apasj50"})({paddingTop:"150px",textAlign:"center"},"label:DivWrapper;"),Wd=(0,at.Z)("p",{target:"e1apasj51"})((({theme:e})=>[(0,st.GI)({theme:e,color:"TextPrimary",fontFamily:"Proxima"}),{fontSize:"17px",lineHeight:"20px",marginTop:"20px"}]),"label:PTitleContainer;"),$d=(0,at.Z)("div",{target:"e1apasj52"})([({theme:e})=>(0,st.GI)({theme:e,color:"TextSecondary",fontFamily:"Proxima"}),{lineHeight:"17px",marginTop:"12px",textAlign:"center",fontSize:"14px"}],"label:DivContentWrapper;"),qd=(0,at.Z)("div",{target:"e1apasj53"})({position:"absolute",bottom:"32px",left:"32px",right:"32px"},"label:DivButtonWrapper;"),Hd=()=>{const e=(0,y.Q)("WebApp_Login"),t=(0,d.k6)(),i=(0,d.TH)(),{cancelDeleteAccount:n}=(0,a.qj)(nt);(0,l.useEffect)((()=>{var e;(null===(e=i.state)||void 0===e?void 0:e.init)||t.replace(f.gY.loginHome)}),[i,t]);const s=(0,l.useCallback)((()=>{n()}),[n]),r=(0,l.useCallback)((()=>{t.push(f.gY.loginHome)}),[t]);return(0,o.jsx)(Ul,Object.assign({showLeft:!1,showRight:!1},{children:(0,o.jsxs)(Ud,{children:[(0,o.jsx)(El,{fill:"rgba(22, 24, 35, 0.45)"},void 0),(0,o.jsx)(Wd,{children:e("reactivate_h1")},void 0),(0,o.jsx)($d,{children:e("logback_reactivate_desc")},void 0),(0,o.jsxs)(qd,{children:[(0,o.jsx)(pn,Object.assign({onClick:s},{children:e("reactivate_btn")}),void 0),(0,o.jsx)(pn,Object.assign({buttonTheme:"default",onClick:r,style:{marginTop:"16px"}},{children:e("common_registration_phone_input_popup_button")}),void 0)]},void 0)]},void 0)}),void 0)},Gd=()=>{const{language:e}=(0,bt.m7)((0,w.Lh)((()=>["language"]),[])),t="ar"===e||"ur"===e||"he-IL"===e;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(Ya.ql,{children:[(0,o.jsx)("link",{rel:"stylesheet",href:Ol},void 0),(0,o.jsx)("link",{rel:"stylesheet",href:Ll},void 0)]},void 0),(0,o.jsx)(k.xB,{styles:V(t)},void 0),(0,o.jsx)(d.AW,{path:f.gY.loginHome,component:_d},void 0),(0,o.jsx)(d.AW,{path:f.gY.signupHome,component:Nd},void 0),(0,o.jsx)(d.AW,{path:f.gY.accountDeactivate,component:Hd},void 0),(0,o.jsx)(Bl,{},void 0)]},void 0)};var Zd;!function(e){e.MonitorLogout="monitor_logout"}(Zd||(Zd={}));const Vd=(0,at.Z)("div",{target:"e1lgi0990"})({display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},"label:DivOauthBodyContainer;"),Qd=(0,l.memo)((function(){const{user:e,language:t,env:i}=(0,bt.m7)((0,w.Lh)((()=>["user","language","env"]),[])),{redirectUrl:n,aid:s}=(0,a.mp)(Te);return(0,l.useEffect)((()=>{var o;o=e?{status:0,error_code:0}:{status:1,error_code:-1,error_desc:"no account info"},Fe.W.event("monitor_logout",o);const a=encodeURIComponent(Mt(t,"boe"===(null==i?void 0:i.type),n));location.href=`https://${location.host}/passport/web/logout/?aid=${s}&account_sdk_source=web&next=${a}&`}),[n,s,t,e,i]),(0,o.jsx)(Vd,{children:(0,o.jsx)(G.g,{},void 0)},void 0)})),Yd=(0,at.Z)("div",{target:"e10jupx40"})({display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},"label:DivOauthBodyContainer;"),Kd=(0,l.memo)((function(){const{search:e}=(0,d.TH)(),{oauth_token:t,oauth_verifier:i,error:n,oauthType:r}=(0,fe.parse)(e),c=(0,s.fz)(x.ZI),p=(0,s.fz)(qi.M),{authPageGoRedirect:u}=(0,a.qj)(no);return(0,l.useEffect)((()=>{Zi(null==r?void 0:r.toString()),p.handleThirdGetToken({platform:"twitter",error_code:t&&i?0:-1,error_message:String(n)}),t&&i?(Hi("twitter",{oauth_token:t.toString(),oauth_verifier:i.toString()}),window.parent?window.authDoneClose=!0:u({platform:"line"})):c.thirdPartyLoginResult({status:1,error_code:-1,error_desc:null==n?void 0:n.toString()})}),[n,c,t,i,p,r,u]),(0,o.jsx)(Yd,{children:(0,o.jsx)(G.g,{},void 0)},void 0)})),Jd=()=>{const{search:e}=(0,d.TH)(),{code:t,error:i}=(0,fe.parse)(e),n=(0,s.fz)(x.ZI),r=(0,s.fz)(qi.M),{authPageGoRedirect:c}=(0,a.qj)(no);return(0,l.useEffect)((()=>{Zi(),r.handleThirdGetToken({platform:"line",error_code:t?0:-1,error_message:String(i)}),t?(Hi("line",{code:null==t?void 0:t.toString()}),window.opener?window.authDoneClose=!0:c({platform:"line"})):n.thirdPartyLoginResult({status:1,error_code:-1,error_desc:String(i)})}),[t,i,n,r,c]),(0,o.jsx)(Yd,{children:(0,o.jsx)(G.g,{},void 0)},void 0)};var Xd;!function(e){e.PrivateNotifyShow="private_notify_show",e.PrivateNotifyClick="private_notify_click"}(Xd||(Xd={}));const ec=e=>{Fe.W.event("private_notify_click",e)};var tc,ic;function oc(){return oc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},oc.apply(this,arguments)}const nc=function(e){return l.createElement("svg",oc({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 50 50",width:"1em",height:"1em"},e),tc||(tc=l.createElement("g",{clipPath:"url(#icon_svg__clip0)"},l.createElement("path",{fill:"black",fillRule:"evenodd",d:"M15.029 13.695a7.618 7.618 0 1115.235 0 7.618 7.618 0 01-15.235 0zM22.646 4c-5.354 0-9.695 4.34-9.695 9.695 0 5.354 4.34 9.695 9.695 9.695s9.695-4.34 9.695-9.695c0-5.354-4.34-9.695-9.695-9.695zM5.081 43.861c1.066-8.393 8.375-14.921 17.274-14.921 1.813 0 3.56.271 5.201.774.53.162 1.104-.101 1.295-.62l.03-.082c.19-.517-.074-1.093-.6-1.258a19.807 19.807 0 00-5.926-.901c-9.964 0-18.21 7.351-19.352 16.87-.066.548.353 1.025.904 1.062l.08.006c.551.037 1.025-.381 1.094-.93zm28.672-9.39H30.61a.692.692 0 00-.692.692V45.55c0 .383.31.693.692.693h16.62c.383 0 .693-.31.693-.693V35.163a.692.692 0 00-.693-.693h-3.143-10.333zm-.373-2.078h-2.77a2.77 2.77 0 00-2.77 2.77V45.55a2.77 2.77 0 002.77 2.77h16.62A2.77 2.77 0 0050 45.55V35.163a2.77 2.77 0 00-2.77-2.77h-2.77v-2.77a5.54 5.54 0 10-11.08 0v2.77zm2.078 0h6.925v-2.77a3.463 3.463 0 10-6.925 0v2.77z",clipRule:"evenodd"}))),ic||(ic=l.createElement("defs",null,l.createElement("clipPath",{id:"icon_svg__clip0"},l.createElement("path",{fill:"white",d:"M0 0h50v50H0z"})))))},ac=(0,at.Z)("div",{target:"e6r3pim0"})((({theme:e})=>({margin:e.isMobile?"30px 32px 0":"80px auto 0",maxWidth:"400px"})),"label:DivContainer;"),sc=(0,at.Z)("div",{target:"e6r3pim1"})((({theme:e})=>({width:"80px",height:"80px",fontSize:"50px",margin:"24px auto",border:`1px solid ${e.colors.LineSecondary}`,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"})),"label:DivIcon;"),rc=(0,at.Z)("div",{target:"e6r3pim2"})((({theme:e})=>[(0,st.GI)({theme:e,fontWeight:"bold",fontFamily:"Sofia"}),{textAlign:"center",fontSize:"24px",lineHeight:"28px",marginBottom:"24px"}]),"label:DivTitle;"),lc=(0,at.Z)("div",{target:"e6r3pim3"})((({theme:e})=>[(0,st.GI)({theme:e,fontFamily:"Proxima",color:"TextSecondary"}),{fontSize:"16px",textAlign:"center",lineHeight:"22px",marginBottom:"12px"}]),"label:DivDescription;"),dc=(0,at.Z)("span",{target:"e6r3pim4"})((({theme:e})=>[{fontSize:"16px",lineHeight:"22px",color:e.colors.Primary,display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold"}]),"label:SpanLinkText;"),cc=()=>{const e=(0,y.Q)("WebApp_Login"),{handlePrivateConfirm:t}=(0,a.qj)(Ye),i=(0,l.useCallback)((()=>{t(),ec({result:"ok"})}),[t]),n=(0,l.useCallback)((()=>{ec({result:"learn_more"})}),[]);return(0,l.useEffect)((()=>{Fe.W.event("private_notify_show")}),[]),(0,o.jsxs)(ac,{children:[(0,o.jsx)(sc,{children:(0,o.jsx)(nc,{},void 0)},void 0),(0,o.jsx)(rc,{children:e("title_private_on")},void 0),(0,o.jsx)(lc,{children:e("descrip_private_on_signup")},void 0),(0,o.jsx)(Ei,Object.assign({isJumpOutside:!0,underline:!1,path:"https://support.tiktok.com/en/account-and-privacy/account-privacy-settings/making-your-account-public-or-private"},{children:(0,o.jsxs)(dc,Object.assign({onClick:n},{children:[e("link_learn_more_private_accounts_signup")," >"]}),void 0)}),void 0),(0,o.jsx)(pn,Object.assign({onClick:i,bottonTheme:"text"},{children:e("button_signup_private_on")}),void 0)]},void 0)};var pc=i(61613);const uc=(0,at.Z)("div",{target:"ermvtw20"})((({theme:e})=>({background:e.colors.BGPrimary,borderRadius:"8px",maxWidth:e.isMobile?"300px":"400px",padding:"0px 32px 32px",textAlign:"center"})),"label:DivContainer;"),gc=(0,at.Z)("h5",{target:"ermvtw21"})((({theme:e})=>[(0,st.GI)({theme:e,color:"TextPrimary",fontFamily:"Proxima",fontWeight:"bold"}),{fontSize:"20px",lineHeight:"24px"}]),"label:H5Title;"),mc=(0,at.Z)("p",{target:"ermvtw22"})([({theme:e})=>(0,st.GI)({theme:e,color:"TextPrimary",fontFamily:"Proxima"}),{lineHeight:"20px",margin:"24px 0",textAlign:"center"}],"label:PDesc;"),hc=e=>{const t=(0,y.Q)("WebApp_Login"),{title:i,text:n,buttonText:a,visible:s,supportText:r}=e,{language:l}=(0,bt.m7)((0,w.Lh)((()=>["language"]),[])),d={marginTop:"16px"};return(0,o.jsx)(b.u_,Object.assign({visible:s,maskCloseable:!1,onClose:e.onClose},{children:(0,o.jsxs)(uc,{children:[i&&(0,o.jsx)(gc,{children:t(i)},void 0),(0,o.jsx)(mc,{children:t(n)},void 0),r&&(0,o.jsx)("a",Object.assign({href:`https://support.tiktok.com?lang=${l}`,target:"_blank",rel:"noopener noreferrer"},{children:(0,o.jsx)(pn,Object.assign({style:d},{children:t(null!=a?a:"twosv_recover_pw_popup_btn")}),void 0)}),void 0),(0,o.jsx)(pn,Object.assign({buttonTheme:"default",onClick:e.onClose,style:d},{children:t(null!=a?a:"OK")}),void 0)]},void 0)}),void 0)},_c={inexistent:{title:"age_verify_login_inexistent",subTitle:"age_verify_login_inexistent_intro"},ineligible:{title:"age_verify_login_ineligible",subTitle:"age_verify_login_ineligible_intro"},twoStepVerifyBlock:{title:"twosv_login_sms_block_title",subTitle:"twosv_login_sms_block_content"},TwoStepBlockResetPwd:{title:"twosv_recover_pw_popup_title",subTitle:"twosv_recover_pw_popup_desc",supportText:"twosv_recover_pw_popup_btn"}},vc=()=>{var e;const t=(0,d.k6)(),[{showAlertMessageType:i},{setShowAlertMessageType:n}]=(0,a.b7)(Te),s=null===(e=(0,d.$B)(f.gY.loginHome))||void 0===e?void 0:e.isExact,r=(0,l.useCallback)((()=>{n("");const{message:e}=(0,fe.parse)(window.location.search),i=new RegExp(`&?message=${e}`);t.replace({pathname:f.gY.loginHome,search:(window.location||{}).search.replace(i,"")})}),[t,n]);return(0,l.useEffect)((()=>{i&&!s&&t.push(f.gY.loginHome)}),[i,t,s]),i?(0,o.jsx)(hc,{supportText:_c[i].supportText,visible:Boolean(i),title:_c[i].title,text:_c[i].subTitle,onClose:r},void 0):null},yc=(0,l.memo)((function({onRouteChange:e=p()}){var t,i,n;const r=(0,w.bp)(),c=(0,S.T)();(e=>{const t=(0,d.TH)(),{loginModalShow:i,url:o}=(0,a.mp)(v.r),{loginType:n}=Pt((()=>["loginType"]),[]);Va.initialized||Va.init(i?o.split("?")[1]:t.search),(0,Ga.k0)((()=>Object.assign({page_name:e,login_type:n},Va.eventCommonParams)),[n,e]),(0,l.useEffect)((()=>{n&&Za._.handlePageView({})}),[n])})("login");const u=(0,y.y)(["WebApp_Login"]),g=(0,s.fz)(ce.Q),m=(0,s.fz)(pe.D),h=null===(t=(0,d.$B)(f.gY.loginHome))||void 0===t?void 0:t.isExact;!function(){const{twoStepResponse:e}=(0,a.mp)(nt),[{type:t},{setTwoStepVerifyRes:i,setTwoStepType:o}]=(0,a.b7)(dn),n=(0,d.k6)(),{pathname:s}=(0,d.TH)();(0,l.useEffect)((()=>{e&&i(e)}),[e,i]),(0,l.useEffect)((()=>{t&&`/login/2sv/${rn[t]}`!==s&&n.push(`/login/2sv/${rn[t]}`)}),[t,e]),(0,l.useEffect)((()=>()=>{o(void 0)}),[])}(),function(){const{isRegisterWithPrivateOn:e}=(0,a.mp)(Ye),{success:t}=(0,a.mp)(nt),{redirectUrl:i}=(0,a.mp)(Te),{success:o}=(0,a.mp)(ot),{language:n,env:s}=(0,bt.m7)((0,w.Lh)((()=>["language","env"]),[])),r=(0,y.Q)("WebApp_Login"),c=(0,d.k6)();(0,l.useEffect)((()=>{if(t||o){if(e)return void c.push(f.gY.signupPrivateOn);me(r(r(2===t?"reactivate_toast":"Login Success"))),Rt(n,"boe"===(null==s?void 0:s.type),i)}}),[n,r,i,o,t,e,c,s])}(),function(){const e=(0,s.fz)(io);(0,l.useEffect)((()=>{e.loadSdk()}),[e])}(),function(){const{user:e,language:t,env:i}=(0,bt.m7)((0,w.Lh)((()=>["user","language","env"]),[])),{redirectUrl:o,initialized:n,isSecurityVerification:r}=(0,a.mp)(Te),c=(0,y.Q)("WebApp_Login"),p=(0,s.fz)(x.ZI),u=[f.gY.oauth,f.gY.oauthLine,f.gY.logout],g=(0,d.$B)(u)||r;(0,l.useEffect)((()=>{e&&!g&&n&&(me(c("You are logged in, no need to repeat")),p.setPlatform("repeatLogin"),p.loginSuccess({is_register:0}),Rt(t,"boe"===(null==i?void 0:i.type),o))}),[o,n,i])}(),Cn(),function(){const e=(0,s.fz)(ue),t=(0,d.k6)();(0,l.useEffect)((()=>{e.init(t)}),[t,e])}(),function(){const{hideHomePage:e}=Pt((()=>["hideHomePage"]),[]),t=(0,d.k6)();(0,l.useEffect)((()=>{e&&t.replace(f.gY.loginPhoneOrEmail)}),[e,t])}();const{modalType:_}=(0,a.mp)(v.r,{selector:e=>({modalType:e.modalType}),dependencies:[]}),[{initialized:b,ttpConfig:C,phoenix:j,hideHomePage:P,previousModalType:T},{init:O}]=(0,a.b7)(Te),[{initial:L},{getComplianceSettings:I}]=(0,a.b7)($),A=_!==T;(0,l.useEffect)((()=>{var e,t,i;r.appContext&&c.bizContext&&g.setContext(r.appContext,c.bizContext,{phoenix:j}),r.appContext&&(null===(t=null===(e=window.byted_acrawler)||void 0===e?void 0:e.setUserMode)||void 0===t||t.call(e,(0,pc.i)("TTP"===(null===(i=r.appContext)||void 0===i?void 0:i.clusterRegion))))}),[r.appContext,g,j,c.bizContext]),(0,l.useEffect)((()=>{var e;C&&m.setInitConfig({isSG:1180===(null===(e=r.appContext)||void 0===e?void 0:e.appId),ttpConfig:C,phoenix:j})}),[null===(i=r.appContext)||void 0===i?void 0:i.appId,C,j,m]),(0,l.useEffect)((()=>{(!b||A)&&O(),!L&&I()}),[]);const{pathname:E}=(0,d.TH)();return(0,l.useEffect)((()=>{gr.indexOf(E)>-1&&(null==e||e())}),[E,e]),!u||!b||P&&h||A?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(k.xB,{styles:Z},void 0),(0,o.jsx)(G.g,{center:!0,style:{margin:"auto"}},void 0)]},void 0):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(d.rs,{children:[(0,o.jsx)(d.AW,{path:f.gY.logout,component:Qd},void 0),(0,o.jsx)(d.AW,{path:f.gY.oauth,component:Kd},void 0),(0,o.jsx)(d.AW,{path:f.gY.oauthLine,component:Jd},void 0),(0,o.jsx)(d.AW,{path:f.gY.signupPrivateOn,component:cc,exact:!0},void 0),(null===(n=c.bizContext)||void 0===n?void 0:n.isMobile)?(0,o.jsx)(Gd,{},void 0):(0,o.jsx)(Tl,{},void 0)]},void 0),(0,o.jsx)(q.F,{appContext:r.appContext,bizContext:c.bizContext,slardarBid:H.Zy},void 0),(0,o.jsx)(vc,{},void 0)]},void 0)})),bc=(0,at.Z)("div",{target:"e1b6crsh0"})((({theme:e})=>[(0,st.GI)({theme:e,fontFamily:"Proxima",color:"TextPrimary"}),{height:"64px",borderTop:e.isMobile?"none":`1px solid ${e.colors.LineSecondary}`,display:"flex",justifyContent:"center",alignItems:"center",fontSize:"15px",lineHeight:"18px"}]),"label:DivContainer;"),fc=(0,at.Z)("span",{target:"e1b6crsh1"})((({theme:e})=>[(0,st.YJ)({direction:e.direction,marginStart:"5px"}),{fontWeight:600,fontSize:"15px",lineHeight:"18px",color:e.colors.Primary}]),"label:SpanLinkText;"),xc=(0,l.memo)((function({style:e}){var t;const{disableSignup:i,hideHomePage:n}=Pt((()=>["disableSignup","hideHomePage"]),[]),{isMobile:s}=(0,bt.m7)((0,S.h)((()=>["isMobile"]),[])),{loginModalShow:r}=(0,a.mp)(v.r),[{loginModalSwitchPath:c},p]=(0,a.b7)(_),u=(0,y.Q)("WebApp_Login"),{pathname:g}=(0,d.TH)(),m=[f.gY.signupAgeGateConfirm,f.gY.signupCreateAccount],h=null===(t=(0,d.$B)(m))||void 0===t?void 0:t.isExact,b=n?[f.gY.loginPhoneOrEmail,f.gY.signupPhoneOrEmail]:[f.gY.loginHome,f.gY.signupHome],x=(0,d.$B)(b),k=s&&!n?null==x?void 0:x.isExact:x&&!h,w=g.includes("signup"),C=u(w?"common_registration_panel_entry_1":"common_login_panel_entry_1"),j=u(w?"common_registration_panel_entry_2":"common_registration_username_button"),P=uo(),T=w?n?f.gY.loginPhoneOrEmail:f.gY.loginHome:n?P:f.gY.signupHome,O=(0,l.useCallback)((()=>{!c&&p.setLoginModalSwitchPath(!0)}),[p,c]);return i||!k?null:(0,o.jsxs)(bc,Object.assign({modal:r,style:e},{children:[(0,o.jsx)("div",Object.assign({"data-e2e":"bottom-text"},{children:C.replace("%s"," ")}),void 0),(0,o.jsx)(Ei,Object.assign({path:T,onClick:O,textTheme:"primary",replace:r,"data-e2e":"botton-sign-up"},{children:(0,o.jsx)(fc,Object.assign({"data-e2e":w?"bottom-login":"bottom-sign-up"},{children:j}),void 0)}),void 0)]}),void 0)})),kc=(0,at.Z)("div",{target:"eg439om0"})((({theme:e})=>[(0,st.YJ)({direction:e.direction,start:"16px"}),{position:"absolute",top:"16px",cursor:"pointer",transform:"rtl"===e.direction?"rotateZ(180deg)":"unset"}]),"label:DivBack;"),wc=(0,at.Z)(mt.Z,{target:"eg439om1"})([{width:"24px",height:"24px"}],"label:StyledChevronLeftOffset;"),Sc=(0,at.Z)("div",{target:"eg439om2"})({width:"483px",height:"100%",padding:"48px 0 0",display:"flex",flexDirection:"column"},"label:DivModalContent;");Sc.defaultProps=Object.assign(Object.assign({},Sc.defaultProps),{"data-e2e":"login-modal"});const Cc=(0,at.Z)("div",{target:"eg439om3"})({flex:"1",overflow:"auto"},"label:DivPageWrapper;"),jc={margin:"auto",position:"relative",maxHeight:"693px",height:"80%",overflow:"hidden"},Pc={transform:"scale(1.7)"};var Tc;!function(e){e.DefaultSignUp="Back to more signup options",e.DefaultLogin="Back to more login options",e.SignUpCopy="accessibilityLabels_signup_form_back",e.LoginCopy="accessibilityLabels_login_form_back"}(Tc||(Tc={}));const Oc=(0,l.memo)((function({parentRef:e}){const[{loginModalShow:t,url:i,closeable:c,closeCallback:u},{setLoginModalShow:g,setCloseCallback:m}]=(0,a.b7)(v.r),h=(0,a.qj)(_),k=(0,s.fz)(x.ZI),[w,S]=(0,l.useState)(0),[C,j]=(0,l.useState)(!1),[P,T]=(0,l.useState)(!1),O=(0,y.y)(["WebApp_Login"]),L=(0,l.useRef)((0,r.PP)({initialEntries:[null!=i?i:f.gY.loginHome]}));(0,l.useEffect)((()=>{t&&i&&(L.current.go(Number(`-${L.current.length}`)),L.current.replace(i))}),[t,i]);const{forceLogin:I}=Pt((()=>["forceLogin"]),[]),A=(0,l.useCallback)((()=>{L.current.goBack()}),[]),E=(0,l.useCallback)((e=>{13===e.keyCode&&A()}),[A]),M=(0,l.useCallback)((()=>{j([f.gY.signupAgeGateConfirm,f.gY.signupCreateAccount].includes(L.current.location.pathname))}),[j]),R=(0,l.useCallback)((()=>{T([f.gY.signupAgeGateConfirm,f.gY.signupCreateAccount].includes(L.current.location.pathname))}),[]),F=(0,l.useCallback)((()=>{g(!1);const e=L.current.location.pathname.match("/signup")?"1":"0";k.LoginNotifyClose({isSignUp:e}),h.setLoginModalInitialState(),null==u||u(),m(p())}),[k,g,h,u]);(0,l.useEffect)((()=>{L.current.listen((()=>{R(),M(),S(L.current.index)}))}),[M,R]);const{colors:D}=(0,n.u)(),B=(0,l.useMemo)((()=>Object.assign(Object.assign({},jc),{backgroundColor:D.BGSecondary})),[D]),z=(0,l.useCallback)((()=>{if(w>0&&!C){const e=document.querySelector("#login-modal");null==e||e.focus()}}),[C,w]);return(0,l.useEffect)((()=>{z()}),[z]),(0,o.jsx)(b.u_,Object.assign({visible:t,parentRef:e,onClose:F,maskCloseable:!1,contentStyle:B,closeStyles:Pc,closeStyle:I||P||!c?0:2},{children:(0,o.jsx)(d.F0,Object.assign({history:L.current},{children:(0,o.jsxs)(Sc,Object.assign({role:"dialog","aria-modal":"true","aria-labelledby":"login-modal-title"},{children:[(0,o.jsxs)(Cc,Object.assign({id:"loginContainer"},{children:[w>0&&!C&&(0,o.jsx)(kc,Object.assign({onClick:A,onKeyDown:E,tabIndex:0,role:"button"},{children:(0,o.jsx)(wc,{},void 0)}),void 0),(0,o.jsx)(yc,{onRouteChange:z},void 0)]}),void 0),O&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(gl,{},void 0),(0,o.jsx)(xc,{},void 0)]},void 0)]}),void 0)}),void 0)}),void 0)}))},53884:(e,t,i)=>{"use strict";var o,n;i.d(t,{Sx:()=>a,z:()=>s,zH:()=>r,o9:()=>d,Oy:()=>c,lF:()=>p}),function(e){e[e.TRILL=1180]="TRILL",e[e.MUSICALLY=1233]="MUSICALLY"}(o||(o={})),function(e){e.TWITTER="twitter",e.GOOGLE="google",e.FACEBOOK="facebook",e.INSTAGRAM="instagram",e.VK="vk",e.KAKAOTALK="kakaotalk",e.LINE="line",e.APPLE="apple"}(n||(n={}));const a="4954e33ea2a4395e59ecbc20761bd889",s="1569196861",r="6961453";var l;!function(e){e.POPUP="popup",e.PAGE="page",e.NONE="none"}(l||(l={}));const d={1233:692,1180:747},c={google:395,twitter:396,facebook:397,instagram:398,line:529,vk:528,kakaotalk:99},p="socialOauth";var u;!function(e){e[e.Login=0]="Login",e[e.Signup=1]="Signup",e[e.Verify=2]="Verify"}(u||(u={}))},86894:(e,t,i)=>{"use strict";i.d(t,{Q:()=>S});var o=i(64047),n=i(57244),a=i(37729),s=i(53095),r=i(82346),l=i(14716),d=i(11348),c=i(87837),p=i(96980),u=i(56979),g=i(93859),m=i(68854),h=i(35435),_=i(76308),v=i(73078);const y={ar:"ar","bn-IN":"bn","ceb-PH":"ceb","cs-CZ":"cs-CZ","de-DE":"de","el-GR":"el-GR",en:"en",es:"es","fil-PH":"fil",fr:"fr","gu-IN":"gu-IN","hi-IN":"hi","hu-HU":"hu-HU","id-ID":"id","it-IT":"it","ja-JP":"ja","jv-ID":"jv","kn-IN":"kn","ko-KR":"ko","ml-IN":"ml-IN","mr-IN":"mr","ms-MY":"ms","my-MM":"my","nl-NL":"nl-NL","or-IN":"or","pa-IN":"pa-IN","pl-PL":"pl","pt-BR":"pt-BR","ro-RO":"ro-RO","ru-RU":"ru","sv-SE":"sv-SE","ta-IN":"ta","te-IN":"te","th-TH":"th","tr-TR":"tr","uk-UA":"uk","vi-VN":"vi","zh-Hans":"zh-Hant","zh-Hant-TW":"zh-Hant"},b={ar:{label:"العربية",passportLang:"ar"},"bn-IN":{label:"বাঙ্গালি (ভারত)",passportLang:"bn"},"ceb-PH":{label:"Cebuano (Pilipinas)",passportLang:"ceb"},"cs-CZ":{label:"Čeština (Česká republika)",passportLang:"cs"},"de-DE":{label:"Deutsch (Deutschland)",passportLang:"de"},"el-GR":{label:"Ελληνικά (Ελλάδα)",passportLang:"el"},en:{label:"English",passportLang:"en"},es:{label:"Español",passportLang:"es"},"fi-FI":{label:"Suomi (Suomi)",passportLang:"fi"},"fil-PH":{label:"Filipino (Pilipinas)",passportLang:"fil"},fr:{label:"Français",passportLang:"fr"},"he-IL":{label:"עברית (ישראל)",passportLang:"he"},"hi-IN":{label:"हिंदी",passportLang:"hi"},"hu-HU":{label:"Magyar (Magyarország)",passportLang:"hu"},"id-ID":{label:"Bahasa Indonesia (Indonesia)",passportLang:"id"},"it-IT":{label:"Italiano (Italia)",passportLang:"it"},"ja-JP":{label:"日本語（日本）",passportLang:"ja"},"jv-ID":{label:"Basa Jawa (Indonesia)",passportLang:"jv"},"km-KH":{label:"ខ្មែរ (កម្ពុជា)",passportLang:"km"},"ko-KR":{label:"한국어 (대한민국)",passportLang:"ko"},"ms-MY":{label:"Bahasa Melayu (Malaysia)",passportLang:"ms"},"my-MM":{label:"မြန်မာ (မြန်မာ)",passportLang:"my"},"nl-NL":{label:"Nederlands (Nederland)",passportLang:"nl"},"pl-PL":{label:"Polski (Polska)",passportLang:"pl"},"pt-BR":{label:"Português (Brasil)",passportLang:"pt"},"ro-RO":{label:"Română (Romania)",passportLang:"ro"},"ru-RU":{label:"Русский",passportLang:"ru"},"sv-SE":{label:"Svenska (Sverige)",passportLang:"sv"},"th-TH":{label:"ไทย (ไทย)",passportLang:"th"},"tr-TR":{label:"Türkçe (Türkiye)",passportLang:"tr"},"uk-UA":{label:"Українська (Україна)",passportLang:"uk"},ur:{label:"اردو",passportLang:"ur"},"vi-VN":{label:"Tiếng Việt (Việt Nam)",passportLang:"vi"},"zh-Hans":{label:"简体中文",passportLang:"zh-Hant"},"zh-Hant-TW":{label:"繁體中文",passportLang:"zh-Hant"}};var f=i(53884),x=i(61613),k=i(85123),w=i(58161);let S=class{constructor(e,t){this.userRegion=e,this.slardar=t,this.appContext$=new a.t(1),this.bizContext$=new a.t(1),this.level=null,this.requestInfo={},this.extraParams={aid:1459,is_sso:!1,account_sdk_source:"web",region:"",language:"en"}}setContext(e,t,i={}){var o,n;this.appContext$.next(Object.assign(Object.assign({},e),i)),this.appContext=Object.assign(Object.assign({},e),i),this.bizContext$.next(t),this.bizContext=t,this.extraParams.region=e.region,this.extraParams.language=(null===(o=b[e.language])||void 0===o?void 0:o.passportLang)||"en",f.Oy.apple=f.o9[null!==(n=e.appId)&&void 0!==n?n:1180]}initAccountSdkInstance(){return this.appContext$.pipe((0,s.z)((e=>{if(this.sdkInstance)return(0,r.of)(this.sdkInstance);const{language:t,appId:o,phoenix:n,clusterRegion:a}=e,s="TTP"===a,p=n?"https://www.tiktok.in":"https://www.tiktok.com";return(0,l.D)(Promise.resolve().then(i.bind(i,76308)).then((({WebInterfaceSdk:e})=>e))).pipe((0,u.U)((e=>new e({aid:1459,host:p,isOversea:!0,region:1180===o?"sg":"va",printLog:!1,language:y[t],mode:(0,x.i)(s),captchaHost:p,captchaOptions:{fpCookieOption:{domain:n?"www.tiktok.in":".tiktok.com",sameSite:"None",secure:!0}},xhrConfig:{getDynamicConfig:e=>{var t;const i=this.userRegion.getRegionDomain(),o=this.userRegion.getTtWid();this.requestInfo=Object.assign(Object.assign({},e),{baseURL:i});const n={baseURL:i,params:{shark_extra:JSON.stringify(Object.assign(Object.assign({},(0,v.Kj)(null!==(t=Object.assign(Object.assign({},this.appContext),this.bizContext))&&void 0!==t?t:{},!0,!0,this.level)),{app_name:"Tik_Tok_Login",aid:1459}))},headers:{}};return o&&(n.headers={"x-tt-passport-ttwid-ticket":o}),n},cacheRedirectDomain:e=>{this.userRegion.currentRegion={domain:`https://${e}`}}},getDynamicCaptchaConfig:e=>"https://m.tiktok.com"===(e=e.replace("com/","com"))||"https://web-va.tiktok.com"===e?"https://web-va.tiktok.com":"https://t.tiktok.com"===e?"https://web-sg.tiktok.com":e,acrawler:"true",acrawlerUrl:"acrawler",sdi:!0}))),(0,g.b)((e=>this.sdkInstance=e)),(0,m.K)((e=>(console.error(e),(0,d.c)()))),(0,c.X)(1))})))}getAccountSdk$(e){var t,i,o;const{platform_app_id:n,email:a,mobile:s,account:r,username:l}=null!=e?e:{};return e&&(null!==(o=null!==(i=null!==(t=null!=n?n:a)&&void 0!==t?t:s)&&void 0!==i?i:r)&&void 0!==o?o:l)?this.userRegion.getUserRegions(e).pipe((0,h.w)((e=>{if(-1===e.error_code)throw new Error(`get user region error, error_code ${e.error_code}`);return this.initAccountSdkInstance().pipe((0,p.q)(1))}))):(e&&this.slardar.handleUserRegionEscape(e),this.initAccountSdkInstance().pipe((0,p.q)(1)))}sendPhoneCode(e){const{mobile:t}=e;return this.getAccountSdk$({mobile:t,triggerPath:"/passport/web/send_code/"}).pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("sendPhoneCode"))),(0,s.z)((i=>(0,l.D)(i.login.sendCode({mobile:t,extra_params:Object.assign(Object.assign(Object.assign({},this.extraParams),e),{is6Digits:1})}))))).pipe(this.errorHandler.bind(this))}notLoginSendCode(e){return this.getAccountSdk$({mobile:e.mobile,triggerPath:"/passport/web/send_code/"}).pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("notLoginSendCode"))),(0,s.z)((t=>(0,l.D)(t.verify.notLoginSendCode({mobile:e.mobile,extra_params:Object.assign(Object.assign({},this.extraParams),{is6Digits:1})}))))).pipe(this.errorHandler.bind(this))}sendPhoneCodeWithType(e){const{type:t,not_login_ticket:i,verify_ticket:o,method:n,mobile:a}=e;return this.getAccountSdk$({mobile:a,triggerPath:"/passport/web/send_code/"}).pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("sendPhoneCodeWithType"))),(0,s.z)((e=>e.extra.sendCode({type:t,method:n,mobile:a,extra_params:Object.assign(Object.assign({not_login_ticket:i,verify_ticket:o},this.extraParams),{is6Digits:1})})))).pipe(this.errorHandler.bind(this))}sendPhoneCodeForResetPwd(e){const{mobile:t,verify_ticket:i,not_login_ticket:o,type:n}=e;return this.getAccountSdk$({mobile:t,triggerPath:"/passport/web//password/reset_by_ticket/"}).pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("sendPhoneCodeForResetPwd"))),(0,s.z)((e=>(0,l.D)(e.forgetPwd.sendCode({mobile:t,extra_params:Object.assign(Object.assign({},this.extraParams),{verify_ticket:i,not_login_ticket:o,type:n,is6Digits:1})}))))).pipe(this.errorHandler.bind(this))}sendPhoneCodeForForceResetPwd(e){return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("sendPhoneCodeForForceResetPwd"))),(0,s.z)((t=>(0,l.D)(t.extra.sendCode({type:13,code:e.code,extra_params:Object.assign(Object.assign({},this.extraParams),{conditional_login_ticket:e.conditional_login_ticket,is6Digits:1})}))))).pipe(this.errorHandler.bind(this))}validatePhoneCodeForReset(e){return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("validatePhoneCodeForReset"))),(0,s.z)((t=>(0,l.D)(t.forgetPwd.validateCode(Object.assign(Object.assign({},e),{extra_params:Object.assign({},this.extraParams)})))))).pipe(this.errorHandler.bind(this))}validatePhoneCodeForForceReset(e){return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("validatePhoneCodeForForceReset"))),(0,s.z)((t=>(0,l.D)(t.extra.validateMobile({type:13,code:e.code,extra_params:Object.assign(Object.assign({},this.extraParams),{conditional_login_ticket:e.conditional_login_ticket})}))))).pipe(this.errorHandler.bind(this))}sendEmailCodeForSignup(e){const{email:t="",password:i=""}=e;return this.getAccountSdk$({email:t,triggerPath:"/passport/web/email/send_code/"}).pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("sendEmailCodeForSignup"))),(0,s.z)((e=>(0,l.D)(e.login.sendEmailCode({email:t,password:i,extra_params:Object.assign(Object.assign({},this.extraParams),{email_logic_type:2})}))))).pipe(this.errorHandler.bind(this))}sendEmailCodeForLogin(e){const{email:t="",extra_params:i={}}=e;return this.getAccountSdk$({email:t,triggerPath:"/passport/web/email/send_code/"}).pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("sendEmailCodeForLogin"))),(0,s.z)((e=>(0,l.D)(e.login.sendEmailLoginCode({email:t,extra_params:Object.assign(Object.assign({},this.extraParams),i)}))))).pipe(this.errorHandler.bind(this))}verifySendEmailCode(e){const{verify_ticket:t}=e;return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("verifySendEmailCode"))),(0,s.z)((e=>(0,l.D)(e.verify.sendEmailCode({extra_params:Object.assign(Object.assign({},this.extraParams),{verify_ticket:t})}))))).pipe(this.errorHandler.bind(this))}sendEmailCodeForResetPwd(e){const{email:t="",not_login_ticket:i,email_logic_type:o}=e;return this.getAccountSdk$({email:t,triggerPath:"/passport/web/email/send_code/"}).pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("sendEmailCodeForResetPwd"))),(0,s.z)((e=>(0,l.D)(e.forgetPwd.sendEmailCode({email:t,extra_params:Object.assign(Object.assign({},this.extraParams),{not_login_ticket:i,email_logic_type:o})}))))).pipe(this.errorHandler.bind(this))}sendEmailCodeForForceResetPwd(e){return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("sendEmailCodeForForceResetPwd"))),(0,s.z)((t=>(0,l.D)(t.extra.sendEmailCode({type:11,code:e.code,extra_params:Object.assign(Object.assign({},this.extraParams),{conditional_login_ticket:e.conditional_login_ticket})}))))).pipe(this.errorHandler.bind(this))}validateEmailCodeForReset(e){return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("validateEmailCodeForReset"))),(0,s.z)((t=>(0,l.D)(t.forgetPwd.validateEmail(Object.assign(Object.assign({},e),{extra_params:Object.assign({},this.extraParams)})))))).pipe(this.errorHandler.bind(this))}validateEmailCodeForForceReset(e){return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("validateEmailCodeForForceReset"))),(0,s.z)((t=>(0,l.D)(t.verify.validateEmail({code:e.code,extra_params:Object.assign(Object.assign({},this.extraParams),{type:11,conditional_login_ticket:e.conditional_login_ticket})}))))).pipe(this.errorHandler.bind(this))}emailCodeLogin(e){const{not_login_ticket:t,verify_ticket:i,code:o,password:n}=e;return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("emailCodeLogin"))),(0,s.z)((e=>(0,l.D)(e.login.emailCodeLogin({code:o,email:"",extra_params:Object.assign(Object.assign({},this.extraParams),{not_login_ticket:t,verify_ticket:i,password:n,type:13})}))))).pipe(this.errorHandler.bind(this))}smsLogin(e){const{mobile:t="",code:i,login_only:o,birthday:n}=e;return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("smsLogin"))),(0,s.z)((e=>(0,l.D)(e.login.smsLogin({mobile:t,code:i,login_only:o,extra_params:Object.assign({birthday:n},this.extraParams)}))))).pipe(this.errorHandler.bind(this))}smsVerify(e){return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("smsVerify"))),(0,s.z)((t=>(0,l.D)(t.verify.notLoginValidateMobile(e))))).pipe(this.errorHandler.bind(this))}smsLoginContinue(e){const{extra_params:t}=e,i=(0,o.__rest)(e,["extra_params"]);return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("smsLoginContinue"))),(0,s.z)((e=>(0,l.D)(e.login.smsLoginContinue(Object.assign(Object.assign({},i),{extra_params:Object.assign(Object.assign({},this.extraParams),t)})))))).pipe(this.errorHandler.bind(this))}passwordLogin(e){const{password:t,username:i="",extra_params:o,mobile:n,email:a,account:r}=e;return this.getAccountSdk$({username:i,mobile:n,email:a,account:r,triggerPath:"/passport/web/user/login/"}).pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("passwordLogin"))),(0,s.z)((e=>(0,l.D)(e.login.pwdLogin({username:i,password:t,mobile:n,email:a,account:r,extra_params:Object.assign(Object.assign({},this.extraParams),o)}))))).pipe(this.errorHandler.bind(this))}verifyPwdWithoutLogin(e){const{password:t,username:i="",extra_params:o,mobile:n,email:a,account:r}=e;return this.getAccountSdk$({mobile:n,email:a,account:r,triggerPath:"/passport/web/account/verify_pwd_without_login/"}).pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("verifyPwdWithoutLogin"))),(0,s.z)((e=>(0,l.D)(e.verify.verifyPwdWithoutLogin({username:i,password:t,mobile:n,email:a,extra_params:Object.assign(Object.assign({account:r},this.extraParams),o)}))))).pipe(this.errorHandler.bind(this))}resetPwdLoginByEmail(e){const{email:t,password:i,code:o="",extra_params:n}=e;return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("resetPwdLoginByEmail"))),(0,s.z)((e=>(0,l.D)(e.password.resetPwdLoginByEmail({password:i,code:o,email:t,extra_params:Object.assign(Object.assign(Object.assign({},n),this.extraParams),{rules_version:"v2"})}))))).pipe(this.errorHandler.bind(this))}changePwdByMobile(e){const{mobile:t,password:i,code:o}=e;return this.getAccountSdk$({mobile:t,triggerPath:"/passport/web//password/reset_by_ticket/"}).pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("changePwdByMobile"))),(0,s.z)((e=>(0,l.D)(e.forgetPwd.resetPwdByMobile({password:i,code:o,mobile:t,extra_params:Object.assign(Object.assign({},this.extraParams),{rules_version:"v2"})}))))).pipe(this.errorHandler.bind(this))}validateMobileCodeForLogin(e){const{code:t,verify_ticket:i,not_login_ticket:o}=e;return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("validateMobileCodeForLogin"))),(0,s.z)((e=>(0,l.D)(e.password.validateMobile({code:t,extra_params:Object.assign(Object.assign({},this.extraParams),{verify_ticket:i,not_login_ticket:o,type:22})}))))).pipe(this.errorHandler.bind(this))}validateEmailCodeForLogin(e){const{code:t,verify_ticket:i,not_login_ticket:o}=e;return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("validateEmailCodeForLogin"))),(0,s.z)((e=>(0,l.D)(e.verify.notLoginValidateEmail({email:"",code:t,extra_params:Object.assign(Object.assign({},this.extraParams),{verify_ticket:i,not_login_ticket:o,type:6})}))))).pipe(this.errorHandler.bind(this))}validateMobileCodeForReset(e){const{code:t,verify_ticket:i,not_login_ticket:o,password:n}=e;return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("validateMobileCodeForReset"))),(0,s.z)((e=>(0,l.D)(e.forgetPwd.resetPwdByMobile({code:t,mobile:"",password:n,extra_params:Object.assign(Object.assign({},this.extraParams),{verify_ticket:i,not_login_ticket:o})}))))).pipe(this.errorHandler.bind(this))}getOauthConfig(e){return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("getOauthConfig"))),(0,s.z)((t=>(0,l.D)(t.account.authConfig(e))))).pipe(this.errorHandler.bind(this))}thirdLogin(e){return this.getAccountSdk$(e.login_only&&!e.profile_key?{openId:e.openid,platform_app_id:e.platform_app_id,triggerPath:"/passport/web/auth/login_only/"}:void 0).pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("thirdLogin"))),(0,s.z)((t=>(0,l.D)(t.login.authLogin(Object.assign(Object.assign({},e),{extra_params:Object.assign(Object.assign({},this.extraParams),{birthday:e.birthday,platform:e.platform,id_token:e.id_token})})))))).pipe(this.errorHandler.bind(this))}thirdVerify(e){return this.getAccountSdk$({openId:e.openid,platform_app_id:e.platform_app_id,triggerPath:"/passport/web/auth/verify/"}).pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("thirdVerify"))),(0,s.z)((t=>(0,l.D)(t.verify.authVerify(Object.assign(Object.assign({},e),{extra_params:Object.assign(Object.assign({},this.extraParams),{platform:e.platform,id_token:e.id_token})})))))).pipe(this.errorHandler.bind(this))}resetPwdByEmailTicket(e){return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("resetPwdByEmailTicket"))),(0,s.z)((t=>(0,l.D)(t.forgetPwd.resetPwdByEmailTicket(Object.assign(Object.assign({},e),{extra_params:Object.assign(Object.assign({},this.extraParams),{rules_version:"v2"})})))))).pipe(this.errorHandler.bind(this))}resetPwdByMobileTicket(e){return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("resetPwdByMobileTicket"))),(0,s.z)((t=>(0,l.D)(t.forgetPwd.resetPwdByMobileTicket(Object.assign(Object.assign({},e),{extra_params:Object.assign(Object.assign({},this.extraParams),{rules_version:"v2"})})))))).pipe(this.errorHandler.bind(this))}forceResetPwdByMobileTicket(e){return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("forceResetPwdByMobileTicket"))),(0,s.z)((t=>(0,l.D)(t.forgetPwd.forceResetPwdByMobileTicket(Object.assign(Object.assign({},e),{extra_params:Object.assign(Object.assign({},this.extraParams),{rules_version:"v2"})})))))).pipe(this.errorHandler.bind(this))}forceResetPwdByEmailTicket(e){return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("forceResetPwdByEmailTicket"))),(0,s.z)((t=>(0,l.D)(t.forgetPwd.forceResetPwdByEmailTicket(Object.assign(Object.assign({},e),{extra_params:Object.assign(Object.assign({},this.extraParams),{rules_version:"v2"})})))))).pipe(this.errorHandler.bind(this))}cancelDeleteAccount(e){return e.extra_params=Object.assign(Object.assign({},this.extraParams),e.extra_params),this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("cancelDeleteAccount"))),(0,s.z)((t=>(0,l.D)(t.cancel.cancelLogin(e))))).pipe(this.errorHandler.bind(this))}cancelDeactiveAccount(e){return this.getAccountSdk$().pipe((0,s.z)((t=>(0,l.D)(t.request({url:"/passport/web/deactivation/login/",method:"POST",data:Object.assign(Object.assign({},e),this.extraParams)}))))).pipe(this.errorHandler.bind(this))}setAccount(e){return e.extra_params=Object.assign(Object.assign({},this.extraParams),e.extra_params),this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("setAccount"))),(0,s.z)((t=>(0,l.D)(t.account.setAccount(e))))).pipe(this.errorHandler.bind(this))}getQrCodeUrl(e){return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("getQrCodeUrl"))),(0,s.z)((t=>(0,l.D)(t.qrcodeLogin.getQrcode(e))))).pipe(this.errorHandler.bind(this))}checkQrconnect(e){return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("checkQrconnect"))),(0,s.z)((t=>(0,l.D)(t.qrcodeLogin.checkQrconnect(e))))).pipe(this.errorHandler.bind(this))}usernameRegister(e){return e.extra_params=Object.assign(Object.assign({},this.extraParams),e.extra_params),this.getAccountSdk$({username:e.username,triggerPath:"/passport/web/username/register"}).pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("usernameRegister"))),(0,s.z)((t=>(0,l.D)(t.login.usernameRegister(e))))).pipe(this.errorHandler.bind(this))}emailRegister(e){return e.extra_params=Object.assign(Object.assign({},this.extraParams),e.extra_params),this.getAccountSdk$({email:e.email,triggerPath:"/passport/web/email/register_verify_login"}).pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("emailRegister"))),(0,s.z)((t=>(0,l.D)(t.login.emailRegister(e))))).pipe(this.errorHandler.bind(this))}checkLogin(){return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("checkLogin"))),(0,s.z)((e=>(0,l.D)(e.login.checkLogin({}))))).pipe(this.errorHandler.bind(this))}accountVerify(e){return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("accountVerify"))),(0,s.z)((t=>(0,l.D)(t.verify.accountVerify({account:"",password:e.password,extra_params:Object.assign(Object.assign({},this.extraParams),{verify_ticket:e.verify_ticket})}))))).pipe(this.errorHandler.bind(this))}verifyTOTPCode(e){const t=(0,_.encryptParams)(e,["code"]),i=this.userRegion.getRegionDomain();return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("verifyTOTP"))),(0,s.z)((e=>(0,l.D)(e.request({url:`${i}/passport/web/totp/verify_without_login/`,method:"POST",params:{aid:"1459"},data:t}))))).pipe(this.errorHandler.bind(this))}checkEmailRegistered(e){return this.getAccountSdk$({email:e.email}).pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("checkEmailRegistered"))),(0,s.z)((t=>(0,l.D)(t.extra.checkEmailRegistered({email:e.email,extra_params:Object.assign({},this.extraParams)}))))).pipe(this.errorHandler.bind(this))}updateUniqueId(e){return this.getAccountSdk$().pipe((0,s.z)((t=>(0,l.D)(t.account.updateLoginName({login_name:e}))))).pipe(this.errorHandler.bind(this))}errorHandler(e){return e.pipe((0,g.b)((()=>{var e,t,i,o,n;this.slardar.handleRequestResultReport({url:this.requestInfo.url,type:null!==(i=null===(t=null===(e=this.requestInfo)||void 0===e?void 0:e.data)||void 0===t?void 0:t.type)&&void 0!==i?i:null===(n=null===(o=this.requestInfo)||void 0===o?void 0:o.params)||void 0===n?void 0:n.type,domain:this.requestInfo.baseURL})})),(0,m.K)((e=>{var t,i,o,n,a;return this.slardar.handleRequestResultReport({error_code:e.error_code||-1,url:this.requestInfo.url,type:null!==(o=null===(i=null===(t=this.requestInfo)||void 0===t?void 0:t.data)||void 0===i?void 0:i.type)&&void 0!==o?o:null===(a=null===(n=this.requestInfo)||void 0===n?void 0:n.params)||void 0===a?void 0:a.type,domain:this.requestInfo.baseURL}),(0,r.of)(Object.assign({error_code:e.error_code||-1,default_error_msg:"CLOSE_CAPTCHA"===e?"":"Sorry, something went wrong, please try again later"},e))})))}};S=(0,o.__decorate)([(0,n.G)(),(0,o.__metadata)("design:paramtypes",[w.D,k.M])],S)},58161:(e,t,i)=>{"use strict";i.d(t,{D:()=>x});var o=i(64047),n=i(57244),a=i(89464),s=i(745),r=i.n(s),l=i(82346),d=i(53095),c=i(15608),p=i(56979),u=i(68854),g=i(35435),m=i(87837),h=i(48936),_=i(95872),v=i(53884),y=i(27499),b=i(85123);const f="https://us.tiktok.com";let x=class{constructor(e,t){this.fetch=e,this.slardar=t,this.regionCache=new Map,this.userSeverRegion={},this.ttpConfig={},this.isSG=!0,this.phoenix=!1,this.alterRegionParams={},this.authBroadcastParams={},this.requestTime=1}setInitConfig(e){this.ttpConfig=e.ttpConfig,this.isSG=e.isSG,this.phoenix=e.phoenix}getRegionDomain(){return this.currentRegion.domain}getTtWid(){return this.currentRegion.ttWid}get isRetry(){return this.requestTime<=2?{is_retry:0}:{is_retry:1}}set currentRegion(e){this.userSeverRegion=e;const{domain:t}=e,i=t===f?"https://mcs.us.tiktok.com":this.isSG?"https://mcs-sg.tiktok.com":"https://mcs-va.tiktok.com";_.W.setDomain(i)}get currentRegion(){return this.userSeverRegion}getUserRegions(e){const{open:t=!1,syncSeverList:i=[]}=this.ttpConfig;if(!t||this.phoenix)return(0,l.of)({error_code:0});const{platform_app_id:o,email:n,mobile:s,openId:g,account:m,triggerPath:h}=e,_=g||n||this.formatMobile(s)||m||"";if(this.twitterRegion(o)||this.LineRegion(o)||this.getCacheRegion(_))return(0,l.of)({error_code:0});const v=(0,a.sha256)(`${_}aDy0TUhtql92P7hScCs97YWMT-jub2q9`),y=n?2:g?4:s?1:3;return(0,l.of)(i).pipe((0,d.z)((e=>(0,c.D)(e.map((({domain:e})=>this.fetch.post(`${e}/passport/web/region/`,{body:r().stringify({hashed_id:v,type:y,platform_app_id:o,aid:1459})})))).pipe((0,p.U)((e=>{const{maxSameRegion:t,regionResult:i,domains:n}=this.getMaxNumberDomain(e);return 1===t.count&&(this.alterRegionParams={hashed_id:v,type:y,platform_app_id:o,result:JSON.stringify(i)},this.alterUserRegions(),2===Object.keys(n).length)?{error_code:-1}:(this.currentRegion={ttWid:t.ttWid,domain:`https://${t.domain}`},this.authBroadcastParams={hashed_id:v,type:y,platform_app_id:o,pre_path:null!=h?h:"",final_domain:t.domain},this.regionCache.set(_,this.currentRegion),{error_code:0})}))))),(0,u.K)((e=>(console.error(e,"get region err"),(0,l.of)({error_code:-1})))))}alterUserRegions(){const{open:e=!1,syncSeverList:t=[]}=this.ttpConfig;return e?(this.requestTime=1,this.slardar.setCurrentRequestMethod("alterUserRegions"),(0,l.of)(t).pipe((0,d.z)((e=>e.map((({domain:e})=>this.singleRequestHandler({url:`${e}/passport/web/region_alert/`}))))))):(0,l.of)(null)}authBroadcast(e){this.requestTime=1;const{open:t=!1,syncSeverList:i=[]}=this.ttpConfig;return!t||this.phoenix?(0,l.of)(null):(this.slardar.setCurrentRequestMethod("authBroadcast"),y.g.show(),(0,l.of)(i).pipe((0,d.z)((t=>(0,c.D)(t.map((({domain:t})=>this.singleRequestHandler({url:`${t}/passport/web/auth_broadcast/`,userInfo:e,isAuth:!0})))).pipe((0,p.U)((()=>(y.g.hide(),null))))))))}twitterRegion(e){if(e===v.Oy.twitter)return this.currentRegion={domain:f},!0}LineRegion(e){if(e===v.Oy.line)return this.currentRegion={domain:"https://t.tiktok.com"},!0}getCacheRegion(e){if(this.regionCache.get(e))return this.currentRegion=this.regionCache.get(e),!0}getMaxNumberDomain(e){this.slardar.setCurrentRequestMethod("getUserRegion");const t={},i={},{syncSeverList:o=[]}=this.ttpConfig,n={count:0,domain:"",ttWid:""};return e.forEach((({data:e},a)=>{const{domain:s,ttwid_migration_ticket:r,error_code:l}=e;this.slardar.handleRequestResultReport({error_code:l}),i[o[a].domain]=s,t[s]?t[s]=t[s]+1:t[s]=1,n.count<t[s]&&(n.count=t[s],n.domain=s),r&&(n.ttWid=r)})),{regionResult:i,maxSameRegion:n,domains:t}}singleRequestHandler(e){const{url:t,isAuth:i=!0,userInfo:o}=e,n=i?Object.assign(Object.assign({},this.authBroadcastParams),o):this.alterRegionParams;return(0,l.of)(this.isRetry).pipe((0,g.w)((({is_retry:e})=>this.fetch.post(t,{body:r().stringify(Object.assign(Object.assign({},n),{is_retry:e,aid:1459}))}).pipe((0,p.U)((({error_code:e})=>{if(this.slardar.handleRequestResultReport({error_code:e}),-1===e)throw new Error(`${e}`);return{error_code:0}}))))),(0,m.X)(2))}formatMobile(e){var t;if(!e)return"";const[i,o]=null!==(t=e.replace("+","").split(" "))&&void 0!==t?t:[];return"86"===i?o:`+${i}${o}`}};x=(0,o.__decorate)([(0,n.G)(),(0,o.__metadata)("design:paramtypes",[h.r,b.M])],x)},27499:(e,t,i)=>{"use strict";i.d(t,{g:()=>n});var o=i(99116);const n={show:()=>o.B.show("#loginContainer"),hide:()=>o.B.hide()}},61613:(e,t,i)=>{"use strict";i.d(t,{i:()=>o});const o=e=>e?"0x203":"0x204"},85123:(e,t,i)=>{"use strict";i.d(t,{M:()=>s});var o=i(64047),n=i(57244),a=i(11467);let s=class{constructor(e){this.service=e,this.defaultMetrics={count:1},this.currentMethod=null,this.setCurrentRequestMethod=e=>{this.currentMethod=e},this.handleRequestResultReport=e=>{if(!this.currentMethod)return;const{error_code:t=0}=e,i=(0,o.__rest)(e,["error_code"]);this.service.emitEvent(this.currentMethod,this.defaultMetrics,Object.assign(Object.assign({error_code:String(t)},i),{function_type:this.getFunctionType(this.currentMethod,e)}))},this.handleThirdGetToken=e=>{this.currentMethod="thirdGetToken",this.handleRequestResultReport(e)},this.QRCodeShortenFail=e=>{this.service.emitEvent("qrcode_shorten_fail",this.defaultMetrics,e)},this.handleUserRegionEscape=e=>{this.service.emitEvent("userRegionEscape",this.defaultMetrics,e)}}getFunctionType(e,t){switch(e){case"sendPhoneCode":case"smsLogin":case"passwordLogin":case"thirdLogin":case"getQrCodeUrl":case"checkQrconnect":case"getOauthConfig":case"cancelDeleteAccount":case"thirdGetToken":return"login";case"notLoginSendCode":case"smsVerify":case"verifyPwdWithoutLogin":case"thirdVerify":return"verify";case"validateMobileCodeForLogin":case"validateEmailCodeForLogin":case"validateMobileCodeForReset":case"verifySendEmailCode":case"sendEmailCodeForLogin":case"emailCodeLogin":return"twostep";case"sendPhoneCodeWithType":return String(t.type).match(/13|12/)?"twostep":"reset";case"sendPhoneCodeForResetPwd":case"sendEmailCodeForResetPwd":case"resetPwdLoginByEmail":case"changePwdByMobile":return"reset";case"sendEmailCodeForForceResetPwd":case"sendPhoneCodeForForceResetPwd":case"validatePhoneCodeForForceReset":case"validateEmailCodeForForceReset":case"forceResetPwdByMobileTicket":case"forceResetPwdByEmailTicket":return"forcereset";case"sendEmailCodeForSignup":case"smsLoginContinue":case"usernameRegister":case"setAccount":case"emailRegister":return"signup";default:return"ttp"}}};s=(0,o.__decorate)([(0,n.G)(),(0,o.__metadata)("design:paramtypes",[a.n])],s)},68852:(e,t,i)=>{"use strict";i.d(t,{x:()=>r});var o=i(64047),n=i(73566),a=i(48185),s=i(19630);let r=class extends n.D{constructor(){super(...arguments),this.defaultState={mute:!0,loop:!0,muteSetting:!0,playing:!0,volume:0}}setMute(e,t){e.mute=t}setVolume(e,t){e.volume=Math.min(Math.max(0,t),1)}setMuteSetting(e,t){e.muteSetting=t}setPlaying(e,t){e.playing=t}};(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],r.prototype,"setMute",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Number]),(0,o.__metadata)("design:returntype",void 0)],r.prototype,"setVolume",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],r.prototype,"setMuteSetting",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],r.prototype,"setPlaying",null),r=(0,o.__decorate)([(0,s.Y)("BasicPlayer")],r)},51177:(e,t,i)=>{"use strict";i.d(t,{Re:()=>l,Ld:()=>p});var o=i(64047),n=i(57244);const a=8*Math.pow(10,5),s="keyvaluepairs",r={byteLength:-1,duration:-1,type:-1,vid:"unknown"};let l=class{constructor(){this.preloadQueue=[],this.preloadStartIndex=-1,this.currentPage="",this.preloadUrlsPool=new Set,this.setPreloadQueue=e=>{e.length&&(this.preloadQueue=null!=e?e:[],e.forEach((({id:e})=>{e&&this.preloadUrlsPool.add(e)})))},this.setPreloadIndex=e=>{e>=0&&(this.preloadStartIndex=e)},this.getPreloadUrls=()=>{const{preloadStartIndex:e}=this;return this.preloadQueue.slice(e+1,e+4)},this.getPreloadedPool=()=>this.preloadUrlsPool,this.reset=()=>{this.preloadQueue=[],this.preloadStartIndex=-1,this.preloadUrlsPool.clear()},this.setCurrentPage=e=>{this.currentPage=e||"unknown"},this.clearAllVideoCaches=()=>{this.currentPage&&(this.preloadUrlsPool.clear(),this.clearIndexDBCache())},this.clearSingleVideoCache=e=>{this.clearIndexDBCache(!1,[e],(()=>{this.preloadUrlsPool.delete(e)}))},this.clearIndexDBCache=(e=!0,t=[],i=(()=>{}))=>{const o=this;if(!window.indexedDB)return void console.warn("Browser doesn't support a stable version of IndexedDB, preload feature may not be available. ");const n=window.indexedDB.open("__PRE_CACHE__");n.onsuccess=function(){const r=n.result;try{const n=r.transaction([s],"readwrite"),l=n.objectStore(s);e?l.clear().onsuccess=function(){i.call(o)}:t.forEach((e=>{l.delete(((e,t="video",i=0)=>`TT-vCache-${e}#${t}#${i}#${a-1}`)(e)).onsuccess=function(){i.call(o,e)}})),n.onerror=function(){console.error("[IndexDB]: transaction error: ",n.error)}}catch(e){return}},n.onerror=function(e){console.error("[IndexDB]: Open database error, maybe no authorization. For more: ",n.error,e.target.errorCode)}}}};l=(0,o.__decorate)([(0,n.G)()],l);class d{constructor(){this.preloadVideoId="",this.preloadVideoCache=r,this.setPreloadCacheInfo=(e,t)=>{e&&t&&e!==this.preloadVideoId&&(this.preloadVideoId=e,this.preloadVideoCache=t)},this.getPreloadCacheInfo=e=>e&&this.preloadVideoId&&e===this.preloadVideoId?this.preloadVideoCache:r}}let c=null;const p=()=>(c||(c=new d),c)},40340:(e,t,i)=>{"use strict";i.d(t,{f:()=>g});var o=i(64047),n=i(73566),a=i(48185),s=i(19630),r=i(60595),l=i(93859),d=i(56979),c=i(69405),p=i(79789),u=i(51177);let g=class extends n.D{constructor(e,t,i){super(),this.reporter=e,this.qualityReporter=t,this.preloadUtil=i,this.defaultState={prevVideo:null,currentVideo:null,playProgress:null,vv_time:0}}setCurrentVideo(e,t){var i;e.prevVideo=e.currentVideo,e.currentVideo=t.currentVideo,e.playProgress=t.playProgress,e.current_mode=null===(i=t.currentVideo)||void 0===i?void 0:i.mode}updateVVTime(e){const t=e.vv_time+1;t<=20&&(e.vv_time=t)}updateVideo(e){return e.pipe((0,l.b)((e=>{const{needResetReport:t=!0,currentVideo:{id:i,index:o},teaParams:{isThreeColumnAuto:n=!1,isVideoDetail:a=!1,enterMethod:s=""}={}}=e;this.reporter.setIsThreeColumnAuto(n),this.reporter.setEnterMethod(s),this.reporter.setIsVideoDetail(a),this.qualityReporter.setCurrentVideoId(null!=i?i:""),this.preloadUtil.setPreloadIndex(o),t&&this.reporter.reset()})),(0,d.U)((e=>this.getActions().setCurrentVideo(e))))}updateVideoFocusTime(e){return e.pipe((0,l.b)((({blurTime:e})=>{this.reporter.updateVideoFocusTime(e)})),(0,d.U)((()=>this.noop())))}};(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],g.prototype,"setCurrentVideo",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object]),(0,o.__metadata)("design:returntype",void 0)],g.prototype,"updateVVTime",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[r.y]),(0,o.__metadata)("design:returntype",void 0)],g.prototype,"updateVideo",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[r.y]),(0,o.__metadata)("design:returntype",void 0)],g.prototype,"updateVideoFocusTime",null),g=(0,o.__decorate)([(0,s.Y)("VideoPlayer"),(0,o.__metadata)("design:paramtypes",[c.ec,p.k,u.Re])],g)},48659:(e,t,i)=>{"use strict";i.d(t,{$J:()=>r});var o,n,a=i(3890),s=i(24021);!function(e){e.euTaxForm="euTaxForm",e.kyc="kyc",e.kycSubmission="kycSubmission",e.liveDiscover="liveDiscover",e.liveGoLive="liveGoLive",e.liveRoom="liveRoom",e.liveEvent="liveEvent",e.liveRoomEmbed="liveRoomEmbed",e.rechargeBindInfo="rechargeBindInfo",e.studioLogin="studioLogin",e.studioDownload="studioDownload",e.studioFaq="studioFaq",e.liveReferralHost="liveReferralHost",e.liveReferralHostFaq="liveReferralHostFaq",e.liveSubscription="liveSubscription",e.liveSubscriptionGuide="liveSubscriptionGuide",e.liveSubscriptionBadgeSetting="liveSubscriptionBadgeSetting",e.liveSubscriptionEmoteSetting="liveSubscriptionEmoteSetting",e.liveSubscriptionComplete="liveSubscriptionComplete",e.liveSubscriptionSetting="liveSubscriptionSetting",e.liveSubscriptionMysubsription="liveSubscriptionMysubsription",e.giftCpcFaq="giftCpcFaq"}(o||(o={})),(0,s.o)({euTaxForm:"/tax/eu-tax",kyc:"/kyc",kycSubmission:"/kyc/submission",liveDiscover:"/live",liveGoLive:"/live/producer",liveRoom:"/@:uniqueId/live",liveEvent:"/live/event/:eventId",liveRoomEmbed:"/embed/@:uniqueId/live",rechargeBindInfo:"/recharge/bind-info",studioLogin:"/studio/login",studioDownload:"/studio/download",studioFaq:"/studio/faq",liveReferralHost:"/live/referral/host",liveReferralHostFaq:"/live/referral/host/faq",liveSubscription:"/live/subscription",liveSubscriptionGuide:"/live/subscription/guide",liveSubscriptionBadgeSetting:"/live/subscription/badge-setting",liveSubscriptionEmoteSetting:"/live/subscription/emote-setting",liveSubscriptionComplete:"/live/subscription/complete",liveSubscriptionSetting:"/live/subscription/setting",liveSubscriptionMysubsription:"/live/subscription/my-subscription",giftCpcFaq:"/live/gift/cpc/faq"}),function(e){e.euTaxForm="euTaxForm",e.kyc="kyc",e.kycSubmission="kycSubmission",e.liveDiscover="liveDiscover",e.liveGoLive="liveGoLive",e.liveRoom="liveRoom",e.liveEvent="liveEvent",e.liveRoomEmbed="liveRoomEmbed",e.rechargeBindInfo="rechargeBindInfo",e.studioLogin="studioLogin",e.studioDownload="studioDownload",e.studioFaq="studioFaq",e.liveReferralHost="liveReferralHost",e.liveReferralHostFaq="liveReferralHostFaq",e.liveSubscription="liveSubscription",e.liveSubscriptionGuide="liveSubscriptionGuide",e.liveSubscriptionBadgeSetting="liveSubscriptionBadgeSetting",e.liveSubscriptionEmoteSetting="liveSubscriptionEmoteSetting",e.liveSubscriptionComplete="liveSubscriptionComplete",e.liveSubscriptionSetting="liveSubscriptionSetting",e.liveSubscriptionMysubsription="liveSubscriptionMysubsription",e.giftCpcFaq="giftCpcFaq"}(n||(n={}));const r={euTaxForm:"/tax/eu-tax",kyc:"/kyc",kycSubmission:"/kyc/submission",liveDiscover:"/live",liveGoLive:"/live/producer",liveRoom:"/@:uniqueId/live",liveEvent:"/live/event/:eventId",liveRoomEmbed:"/embed/@:uniqueId/live",rechargeBindInfo:"/recharge/bind-info",studioLogin:"/studio/login",studioDownload:"/studio/download",studioFaq:"/studio/faq",liveReferralHost:"/live/referral/host",liveReferralHostFaq:"/live/referral/host/faq",liveSubscription:"/live/subscription",liveSubscriptionGuide:"/live/subscription/guide",liveSubscriptionBadgeSetting:"/live/subscription/badge-setting",liveSubscriptionEmoteSetting:"/live/subscription/emote-setting",liveSubscriptionComplete:"/live/subscription/complete",liveSubscriptionSetting:"/live/subscription/setting",liveSubscriptionMysubsription:"/live/subscription/my-subscription",giftCpcFaq:"/live/gift/cpc/faq"};var l;(0,a.t)(r),(0,s.o)(r),function(e){e.euTaxForm="euTaxForm",e.kyc="kyc",e.kycSubmission="kycSubmission",e.liveDiscover="liveDiscover",e.liveGoLive="liveGoLive",e.liveRoom="liveRoom",e.liveEvent="liveEvent",e.liveRoomEmbed="liveRoomEmbed",e.rechargeBindInfo="rechargeBindInfo",e.studioLogin="studioLogin",e.studioDownload="studioDownload",e.studioFaq="studioFaq",e.liveReferralHost="liveReferralHost",e.liveReferralHostFaq="liveReferralHostFaq",e.liveSubscription="liveSubscription",e.liveSubscriptionGuide="liveSubscriptionGuide",e.liveSubscriptionBadgeSetting="liveSubscriptionBadgeSetting",e.liveSubscriptionEmoteSetting="liveSubscriptionEmoteSetting",e.liveSubscriptionComplete="liveSubscriptionComplete",e.liveSubscriptionSetting="liveSubscriptionSetting",e.liveSubscriptionMysubsription="liveSubscriptionMysubsription",e.giftCpcFaq="giftCpcFaq"}(l||(l={}));const d={euTaxForm:"/tax/eu-tax",kyc:"/kyc",kycSubmission:"/kyc/submission",liveDiscover:"/live",liveGoLive:"/live/producer",liveRoom:"/@:uniqueId/live",liveEvent:"/live/event/:eventId",liveRoomEmbed:"/embed/@:uniqueId/live",rechargeBindInfo:"/recharge/bind-info",studioLogin:"/studio/login",studioDownload:"/studio/download",studioFaq:"/studio/faq",liveReferralHost:"/live/referral/host",liveReferralHostFaq:"/live/referral/host/faq",liveSubscription:"/live/subscription",liveSubscriptionGuide:"/live/subscription/guide",liveSubscriptionBadgeSetting:"/live/subscription/badge-setting",liveSubscriptionEmoteSetting:"/live/subscription/emote-setting",liveSubscriptionComplete:"/live/subscription/complete",liveSubscriptionSetting:"/live/subscription/setting",liveSubscriptionMysubsription:"/live/subscription/my-subscription",giftCpcFaq:"/live/gift/cpc/faq"};(0,a.t)(d),(0,s.o)(d)},11838:(e,t,i)=>{"use strict";i.d(t,{a8:()=>o,Nd:()=>s,Ad:()=>l,zp:()=>d,gs:()=>p,T2:()=>u,gY:()=>y});var o,n=i(3890),a=i(24021);!function(e){e.video="video",e.user="user",e.music="music",e.challenge="challenge",e.home="home",e.foryouWithLang="foryouWithLang",e.foryou="foryou",e.following="following",e.topics="topics",e.expansion="expansion",e.discovery="discovery",e.channel="channel",e.searchHome="searchHome",e.searchUser="searchUser",e.discover="discover",e.setting="setting",e.feedback="feedback",e.feedbackHistory="feedbackHistory",e.feedbackReport="feedbackReport",e.profile="profile",e.inbox="inbox",e.explore="explore",e.question="question",e.musicPlaylist="musicPlaylist",e.poi="poi",e.collection="collection",e.videoPlaylist="videoPlaylist",e.searchReflow="searchReflow",e.sticker="sticker",e.group="group",e.invitePost="invitePost",e.post="post",e.inviteNow="inviteNow",e.postNow="postNow",e.guaranteeNow="guaranteeNow",e.chat="chat",e.searchVideo="searchVideo",e.messages="messages",e.searchReminder="searchReminder",e.settingBlockList="settingBlockList",e.settingDownLoadYourData="settingDownLoadYourData",e.reportinbox="reportinbox",e.report="report",e.amp="amp",e.userVideoDirectory="userVideoDirectory",e.usersRootDirectory="usersRootDirectory",e.usersFirstRangeDirectory="usersFirstRangeDirectory",e.usersSecondRangeDirectory="usersSecondRangeDirectory",e.recommendVideosRootDirectory="recommendVideosRootDirectory",e.recommendVideosFirstRangeDirectory="recommendVideosFirstRangeDirectory",e.recommendVideosSecondRangeDirectory="recommendVideosSecondRangeDirectory",e.keywordDirectory="keywordDirectory",e.keywordDirectoryV2="keywordDirectoryV2",e.musicVideoDirectory="musicVideoDirectory",e.hashtagVideoDirectory="hashtagVideoDirectory",e.loginHome="loginHome",e.loginPhoneOrEmail="loginPhoneOrEmail",e.loginPhone="loginPhone",e.loginEmail="loginEmail",e.loginPhonePassword="loginPhonePassword",e.loginDownloadApp="loginDownloadApp",e.loginTwoStepVerify="loginTwoStepVerify",e.loginForgetEmailPassword="loginForgetEmailPassword",e.loginForgetPhonePassword="loginForgetPhonePassword",e.loginQRcode="loginQRcode",e.loginWithSignedEmail="loginWithSignedEmail",e.loginPhoneDigit="loginPhoneDigit",e.loginReset="loginReset",e.phoneResetDigit="phoneResetDigit",e.emailResetDigit="emailResetDigit",e.resetPassword="resetPassword",e.signupHome="signupHome",e.signupPhoneOrEmail="signupPhoneOrEmail",e.signupPhone="signupPhone",e.signupEmail="signupEmail",e.signupAgeGate="signupAgeGate",e.signupAgeGateConfirm="signupAgeGateConfirm",e.signupPolicyConfirm="signupPolicyConfirm",e.signupCreateAccount="signupCreateAccount",e.signupCreateUsername="signupCreateUsername",e.signupCreatePassword="signupCreatePassword",e.signupPrivateOn="signupPrivateOn",e.signupPhoneDigit="signupPhoneDigit",e.signupEmailDigit="signupEmailDigit",e.signupEmailCreatePassword="signupEmailCreatePassword",e.oauth="oauth",e.oauthLine="oauthLine",e.accountDeactivate="accountDeactivate",e.logout="logout"}(o||(o={}));const s=(0,a.o)({video:"/@:uniqueId(.*)/video/:id",user:"/@:uniqueId",music:"/music/:title(.*)-:id",challenge:"/tag/:name",home:"/",foryouWithLang:["/ar","/bn-IN","/ceb-PH","/cs-CZ","/de-DE","/el-GR","/en","/es","/fi-FI","/fil-PH","/fr","/he-IL","/hi-IN","/hu-HU","/id-ID","/it-IT","/ja-JP","/jv-ID","/km-KH","/ko-KR","/ms-MY","/my-MM","/nl-NL","/pl-PL","/pt-BR","/ro-RO","/ru-RU","/sv-SE","/th-TH","/tr-TR","/uk-UA","/ur","/vi-VN","/zh-Hans","/zh-Hant-TW"],foryou:"/foryou",following:"/following",topics:"/topics/:name",expansion:"/discover/:name",discovery:"/discovery/:name",channel:"/channel/:name",searchHome:"/search",searchUser:"/search/user",discover:"/discover",setting:"/setting",feedback:"/feedback",feedbackHistory:"/feedback/history",feedbackReport:"/feedback/report",profile:"/profile",inbox:"/inbox",explore:"/explore",question:"/question/:content(.+)-:id",musicPlaylist:"/playlist-music/:title(.+)-:id",poi:"/place/:name(.+)-:id",collection:"/@:uniqueId/collection/:title(.+)-:id",videoPlaylist:"/@:uniqueId/playlist/:content(.+)-:id",searchReflow:"/search/campaign/:eventName",sticker:"/sticker/:title(.*)-:id",group:"/messages/group",invitePost:"/@:uniqueId/now/invite",post:"/@:uniqueId/now/:id",inviteNow:"/@:uniqueId/invite",postNow:"/@:uniqueId/post/:id",guaranteeNow:"/now",chat:"/messages/chat",searchVideo:"/search/video",messages:"/messages",searchReminder:"/search/reminder",settingBlockList:"/setting/block-list",settingDownLoadYourData:"/setting/download-your-data",reportinbox:"/report/inbox",report:"/report/:type",amp:"/amp/tag/:name",userVideoDirectory:"/directory/user-video/:uniqueId",usersRootDirectory:"/directory/users",usersFirstRangeDirectory:"/directory/users/:hash1",usersSecondRangeDirectory:"/directory/users/:hash1/:hash2",recommendVideosRootDirectory:"/directory/recommend-video",recommendVideosFirstRangeDirectory:"/directory/recommend-video/:hash1",recommendVideosSecondRangeDirectory:"/directory/recommend-video/:hash1/:hash2",keywordDirectory:"/discover/directory/:hash",keywordDirectoryV2:"/directory/discover/:hash",musicVideoDirectory:"/music/directory/:musicName(.*)-:musicId",hashtagVideoDirectory:"/tag/directory/:tagName",loginHome:"/login",loginPhoneOrEmail:"/login/phone-or-email",loginPhone:"/login/phone-or-email/phone",loginEmail:"/login/phone-or-email/email",loginPhonePassword:"/login/phone-or-email/phone-password",loginDownloadApp:"/login/download-app",loginTwoStepVerify:"/login/2sv/:type",loginForgetEmailPassword:"/login/email/forget-password",loginForgetPhonePassword:"/login/phone/forget-password",loginQRcode:"/login/qrcode",loginWithSignedEmail:"/login/with-signed-email",loginPhoneDigit:"/login/phone/digit-code",loginReset:"/login/reset",phoneResetDigit:"/login/reset/phone/digit-code",emailResetDigit:"/login/reset/email/digit-code",resetPassword:"/login/reset/password",signupHome:"/signup",signupPhoneOrEmail:"/signup/phone-or-email",signupPhone:"/signup/phone-or-email/phone",signupEmail:"/signup/phone-or-email/email",signupAgeGate:"/signup/age-gate",signupAgeGateConfirm:"/signup/age-gate/confirm",signupPolicyConfirm:"/signup/policy-confirm",signupCreateAccount:"/signup/create-account",signupCreateUsername:"/signup/create-username",signupCreatePassword:"/signup/create-password",signupPrivateOn:"/signup/private-on",signupPhoneDigit:"/signup/phone/digit-code",signupEmailDigit:"/signup/email/digit-code",signupEmailCreatePassword:"/signup/email/create-password",oauth:"/oauth",oauthLine:"/oauthLine",accountDeactivate:"/setting/account-delete/deactivate",logout:"/logout"});var r;!function(e){e.video="video",e.user="user",e.music="music",e.challenge="challenge",e.home="home",e.foryouWithLang="foryouWithLang",e.foryou="foryou",e.following="following",e.topics="topics",e.expansion="expansion",e.discovery="discovery",e.channel="channel",e.searchHome="searchHome",e.searchUser="searchUser",e.discover="discover",e.setting="setting",e.feedback="feedback",e.feedbackHistory="feedbackHistory",e.feedbackReport="feedbackReport",e.profile="profile",e.inbox="inbox",e.explore="explore",e.question="question",e.musicPlaylist="musicPlaylist",e.poi="poi",e.collection="collection",e.videoPlaylist="videoPlaylist",e.searchVideo="searchVideo",e.messages="messages",e.searchReminder="searchReminder",e.settingBlockList="settingBlockList",e.settingDownLoadYourData="settingDownLoadYourData"}(r||(r={}));const l={video:"/@:uniqueId(.*)/video/:id",user:"/@:uniqueId",music:"/music/:title(.*)-:id",challenge:"/tag/:name",home:"/",foryouWithLang:["/ar","/bn-IN","/ceb-PH","/cs-CZ","/de-DE","/el-GR","/en","/es","/fi-FI","/fil-PH","/fr","/he-IL","/hi-IN","/hu-HU","/id-ID","/it-IT","/ja-JP","/jv-ID","/km-KH","/ko-KR","/ms-MY","/my-MM","/nl-NL","/pl-PL","/pt-BR","/ro-RO","/ru-RU","/sv-SE","/th-TH","/tr-TR","/uk-UA","/ur","/vi-VN","/zh-Hans","/zh-Hant-TW"],foryou:"/foryou",following:"/following",topics:"/topics/:name",expansion:"/discover/:name",discovery:"/discovery/:name",channel:"/channel/:name",searchHome:"/search",searchUser:"/search/user",discover:"/discover",setting:"/setting",feedback:"/feedback",feedbackHistory:"/feedback/history",feedbackReport:"/feedback/report",profile:"/profile",inbox:"/inbox",explore:"/explore",question:"/question/:content(.+)-:id",musicPlaylist:"/playlist-music/:title(.+)-:id",poi:"/place/:name(.+)-:id",collection:"/@:uniqueId/collection/:title(.+)-:id",videoPlaylist:"/@:uniqueId/playlist/:content(.+)-:id",searchVideo:"/search/video",messages:"/messages",searchReminder:"/search/reminder",settingBlockList:"/setting/block-list",settingDownLoadYourData:"/setting/download-your-data"},d=(0,n.t)(l);var c;(0,a.o)(l),function(e){e.video="video",e.user="user",e.music="music",e.challenge="challenge",e.home="home",e.foryouWithLang="foryouWithLang",e.foryou="foryou",e.following="following",e.topics="topics",e.expansion="expansion",e.discovery="discovery",e.channel="channel",e.searchHome="searchHome",e.searchUser="searchUser",e.discover="discover",e.setting="setting",e.feedback="feedback",e.feedbackHistory="feedbackHistory",e.feedbackReport="feedbackReport",e.profile="profile",e.inbox="inbox",e.explore="explore",e.reportinbox="reportinbox",e.report="report",e.amp="amp"}(c||(c={}));const p={video:"/@:uniqueId(.*)/video/:id",user:"/@:uniqueId",music:"/music/:title(.*)-:id",challenge:"/tag/:name",home:"/",foryouWithLang:["/ar","/bn-IN","/ceb-PH","/cs-CZ","/de-DE","/el-GR","/en","/es","/fi-FI","/fil-PH","/fr","/he-IL","/hi-IN","/hu-HU","/id-ID","/it-IT","/ja-JP","/jv-ID","/km-KH","/ko-KR","/ms-MY","/my-MM","/nl-NL","/pl-PL","/pt-BR","/ro-RO","/ru-RU","/sv-SE","/th-TH","/tr-TR","/uk-UA","/ur","/vi-VN","/zh-Hans","/zh-Hant-TW"],foryou:"/foryou",following:"/following",topics:"/topics/:name",expansion:"/discover/:name",discovery:"/discovery/:name",channel:"/channel/:name",searchHome:"/search",searchUser:"/search/user",discover:"/discover",setting:"/setting",feedback:"/feedback",feedbackHistory:"/feedback/history",feedbackReport:"/feedback/report",profile:"/profile",inbox:"/inbox",explore:"/explore",reportinbox:"/report/inbox",report:"/report/:type",amp:"/amp/tag/:name"},u=(0,n.t)(p);var g;(0,a.o)(p),function(e){e.video="video",e.user="user",e.music="music",e.challenge="challenge",e.question="question",e.musicPlaylist="musicPlaylist",e.poi="poi",e.collection="collection",e.videoPlaylist="videoPlaylist",e.searchReflow="searchReflow",e.sticker="sticker",e.group="group",e.invitePost="invitePost",e.post="post",e.inviteNow="inviteNow",e.postNow="postNow",e.guaranteeNow="guaranteeNow",e.chat="chat"}(g||(g={}));const m={video:"/@:uniqueId(.*)/video/:id",user:"/@:uniqueId",music:"/music/:title(.*)-:id",challenge:"/tag/:name",question:"/question/:content(.+)-:id",musicPlaylist:"/playlist-music/:title(.+)-:id",poi:"/place/:name(.+)-:id",collection:"/@:uniqueId/collection/:title(.+)-:id",videoPlaylist:"/@:uniqueId/playlist/:content(.+)-:id",searchReflow:"/search/campaign/:eventName",sticker:"/sticker/:title(.*)-:id",group:"/messages/group",invitePost:"/@:uniqueId/now/invite",post:"/@:uniqueId/now/:id",inviteNow:"/@:uniqueId/invite",postNow:"/@:uniqueId/post/:id",guaranteeNow:"/now",chat:"/messages/chat"};var h;(0,n.t)(m),(0,a.o)(m),function(e){e.foryou="foryou",e.user="user",e.setting="setting",e.report="report",e.ftcFallback="ftcFallback"}(h||(h={}));const _={foryou:"/foryou",user:"/@:uniqueId",setting:"/setting",report:"/report/:type",ftcFallback:"*"};var v;(0,n.t)(_),(0,a.o)(_),function(e){e.loginHome="loginHome",e.loginPhoneOrEmail="loginPhoneOrEmail",e.loginPhone="loginPhone",e.loginEmail="loginEmail",e.loginPhonePassword="loginPhonePassword",e.loginDownloadApp="loginDownloadApp",e.loginTwoStepVerify="loginTwoStepVerify",e.loginForgetEmailPassword="loginForgetEmailPassword",e.loginForgetPhonePassword="loginForgetPhonePassword",e.loginQRcode="loginQRcode",e.loginWithSignedEmail="loginWithSignedEmail",e.loginPhoneDigit="loginPhoneDigit",e.loginReset="loginReset",e.phoneResetDigit="phoneResetDigit",e.emailResetDigit="emailResetDigit",e.resetPassword="resetPassword",e.signupHome="signupHome",e.signupPhoneOrEmail="signupPhoneOrEmail",e.signupPhone="signupPhone",e.signupEmail="signupEmail",e.signupAgeGate="signupAgeGate",e.signupAgeGateConfirm="signupAgeGateConfirm",e.signupPolicyConfirm="signupPolicyConfirm",e.signupCreateAccount="signupCreateAccount",e.signupCreateUsername="signupCreateUsername",e.signupCreatePassword="signupCreatePassword",e.signupPrivateOn="signupPrivateOn",e.signupPhoneDigit="signupPhoneDigit",e.signupEmailDigit="signupEmailDigit",e.signupEmailCreatePassword="signupEmailCreatePassword",e.oauth="oauth",e.oauthLine="oauthLine",e.accountDeactivate="accountDeactivate",e.logout="logout"}(v||(v={}));const y={loginHome:"/login",loginPhoneOrEmail:"/login/phone-or-email",loginPhone:"/login/phone-or-email/phone",loginEmail:"/login/phone-or-email/email",loginPhonePassword:"/login/phone-or-email/phone-password",loginDownloadApp:"/login/download-app",loginTwoStepVerify:"/login/2sv/:type",loginForgetEmailPassword:"/login/email/forget-password",loginForgetPhonePassword:"/login/phone/forget-password",loginQRcode:"/login/qrcode",loginWithSignedEmail:"/login/with-signed-email",loginPhoneDigit:"/login/phone/digit-code",loginReset:"/login/reset",phoneResetDigit:"/login/reset/phone/digit-code",emailResetDigit:"/login/reset/email/digit-code",resetPassword:"/login/reset/password",signupHome:"/signup",signupPhoneOrEmail:"/signup/phone-or-email",signupPhone:"/signup/phone-or-email/phone",signupEmail:"/signup/phone-or-email/email",signupAgeGate:"/signup/age-gate",signupAgeGateConfirm:"/signup/age-gate/confirm",signupPolicyConfirm:"/signup/policy-confirm",signupCreateAccount:"/signup/create-account",signupCreateUsername:"/signup/create-username",signupCreatePassword:"/signup/create-password",signupPrivateOn:"/signup/private-on",signupPhoneDigit:"/signup/phone/digit-code",signupEmailDigit:"/signup/email/digit-code",signupEmailCreatePassword:"/signup/email/create-password",oauth:"/oauth",oauthLine:"/oauthLine",accountDeactivate:"/setting/account-delete/deactivate",logout:"/logout"};var b;(0,n.t)(y),(0,a.o)(y),function(e){e.userVideoDirectory="userVideoDirectory",e.usersRootDirectory="usersRootDirectory",e.usersFirstRangeDirectory="usersFirstRangeDirectory",e.usersSecondRangeDirectory="usersSecondRangeDirectory",e.recommendVideosRootDirectory="recommendVideosRootDirectory",e.recommendVideosFirstRangeDirectory="recommendVideosFirstRangeDirectory",e.recommendVideosSecondRangeDirectory="recommendVideosSecondRangeDirectory",e.keywordDirectory="keywordDirectory",e.keywordDirectoryV2="keywordDirectoryV2",e.musicVideoDirectory="musicVideoDirectory",e.hashtagVideoDirectory="hashtagVideoDirectory"}(b||(b={}));const f={userVideoDirectory:"/directory/user-video/:uniqueId",usersRootDirectory:"/directory/users",usersFirstRangeDirectory:"/directory/users/:hash1",usersSecondRangeDirectory:"/directory/users/:hash1/:hash2",recommendVideosRootDirectory:"/directory/recommend-video",recommendVideosFirstRangeDirectory:"/directory/recommend-video/:hash1",recommendVideosSecondRangeDirectory:"/directory/recommend-video/:hash1/:hash2",keywordDirectory:"/discover/directory/:hash",keywordDirectoryV2:"/directory/discover/:hash",musicVideoDirectory:"/music/directory/:musicName(.*)-:musicId",hashtagVideoDirectory:"/tag/directory/:tagName"};(0,n.t)(f),(0,a.o)(f)},51858:(e,t,i)=>{"use strict";i.d(t,{Tp:()=>s,O5:()=>l});var o,n=i(3890),a=i(24021);!function(e){e.rewardOnboarding="rewardOnboarding",e.verifyIdentityForm="verifyIdentityForm",e.verifyIdentityResult="verifyIdentityResult",e.coin="coin",e.coinWithHash="coinWithHash",e.coinWithUser="coinWithUser",e.coinWithHashAndUser="coinWithHashAndUser",e.coinPayment="coinPayment",e.coinCashier="coinCashier",e.coinCashierManage="coinCashierManage",e.coinPaymentCode="coinPaymentCode",e.coinPaymentResult="coinPaymentResult",e.coinTransactions="coinTransactions",e.coinUnavailable="coinUnavailable",e.coinTerms="coinTerms",e.coinTransactionsDetail="coinTransactionsDetail",e.coinCardManagement="coinCardManagement",e.coinExchange="coinExchange",e.coinBindInfo="coinBindInfo",e.coinPlaceOrder="coinPlaceOrder",e.coinPlaceOrderWithHash="coinPlaceOrderWithHash"}(o||(o={}));const s={rewardOnboarding:"/reward-onboarding",verifyIdentityForm:"/coin/verify-identity/form",verifyIdentityResult:"/coin/verify-identity/result",coin:"/coin",coinWithHash:"/coin/:refhash",coinWithUser:"/coin/@:uniqueId",coinWithHashAndUser:"/coin/:refhash/@:uniqueId",coinPayment:"/coin/cashier",coinCashier:"/coin/cashier-v2",coinCashierManage:"/coin/cashier-v2/manage",coinPaymentCode:"/coin/payment-code",coinPaymentResult:"/coin/payment-result",coinTransactions:"/coin/transaction-history",coinUnavailable:"/coin/unavailable",coinTerms:"/coin/legal/terms-of-purchase-for-coins",coinTransactionsDetail:"/coin/transaction-history/detail",coinCardManagement:"/coin/card-management",coinExchange:"/coin/exchange",coinBindInfo:"/coin/bind-info",coinPlaceOrder:"/coin/place-order",coinPlaceOrderWithHash:"/coin/place-order/:refhash"};var r;(0,a.o)(s),function(e){e.rewardOnboarding="rewardOnboarding",e.verifyIdentityForm="verifyIdentityForm",e.verifyIdentityResult="verifyIdentityResult",e.coin="coin",e.coinWithHash="coinWithHash",e.coinWithUser="coinWithUser",e.coinWithHashAndUser="coinWithHashAndUser",e.coinPayment="coinPayment",e.coinCashier="coinCashier",e.coinCashierManage="coinCashierManage",e.coinPaymentCode="coinPaymentCode",e.coinPaymentResult="coinPaymentResult",e.coinTransactions="coinTransactions",e.coinUnavailable="coinUnavailable",e.coinTerms="coinTerms",e.coinTransactionsDetail="coinTransactionsDetail",e.coinCardManagement="coinCardManagement",e.coinExchange="coinExchange",e.coinBindInfo="coinBindInfo",e.coinPlaceOrder="coinPlaceOrder",e.coinPlaceOrderWithHash="coinPlaceOrderWithHash"}(r||(r={}));const l={rewardOnboarding:"/reward-onboarding",verifyIdentityForm:"/coin/verify-identity/form",verifyIdentityResult:"/coin/verify-identity/result",coin:"/coin",coinWithHash:"/coin/:refhash",coinWithUser:"/coin/@:uniqueId",coinWithHashAndUser:"/coin/:refhash/@:uniqueId",coinPayment:"/coin/cashier",coinCashier:"/coin/cashier-v2",coinCashierManage:"/coin/cashier-v2/manage",coinPaymentCode:"/coin/payment-code",coinPaymentResult:"/coin/payment-result",coinTransactions:"/coin/transaction-history",coinUnavailable:"/coin/unavailable",coinTerms:"/coin/legal/terms-of-purchase-for-coins",coinTransactionsDetail:"/coin/transaction-history/detail",coinCardManagement:"/coin/card-management",coinExchange:"/coin/exchange",coinBindInfo:"/coin/bind-info",coinPlaceOrder:"/coin/place-order",coinPlaceOrderWithHash:"/coin/place-order/:refhash"};var d;(0,n.t)(l),(0,a.o)(l),function(e){e.rewardOnboarding="rewardOnboarding",e.verifyIdentityForm="verifyIdentityForm",e.verifyIdentityResult="verifyIdentityResult",e.coin="coin",e.coinWithHash="coinWithHash",e.coinWithUser="coinWithUser",e.coinWithHashAndUser="coinWithHashAndUser",e.coinPayment="coinPayment",e.coinCashier="coinCashier",e.coinCashierManage="coinCashierManage",e.coinPaymentCode="coinPaymentCode",e.coinPaymentResult="coinPaymentResult",e.coinTransactions="coinTransactions",e.coinUnavailable="coinUnavailable",e.coinTerms="coinTerms",e.coinTransactionsDetail="coinTransactionsDetail",e.coinCardManagement="coinCardManagement",e.coinExchange="coinExchange",e.coinBindInfo="coinBindInfo",e.coinPlaceOrder="coinPlaceOrder",e.coinPlaceOrderWithHash="coinPlaceOrderWithHash"}(d||(d={}));const c={rewardOnboarding:"/reward-onboarding",verifyIdentityForm:"/coin/verify-identity/form",verifyIdentityResult:"/coin/verify-identity/result",coin:"/coin",coinWithHash:"/coin/:refhash",coinWithUser:"/coin/@:uniqueId",coinWithHashAndUser:"/coin/:refhash/@:uniqueId",coinPayment:"/coin/cashier",coinCashier:"/coin/cashier-v2",coinCashierManage:"/coin/cashier-v2/manage",coinPaymentCode:"/coin/payment-code",coinPaymentResult:"/coin/payment-result",coinTransactions:"/coin/transaction-history",coinUnavailable:"/coin/unavailable",coinTerms:"/coin/legal/terms-of-purchase-for-coins",coinTransactionsDetail:"/coin/transaction-history/detail",coinCardManagement:"/coin/card-management",coinExchange:"/coin/exchange",coinBindInfo:"/coin/bind-info",coinPlaceOrder:"/coin/place-order",coinPlaceOrderWithHash:"/coin/place-order/:refhash"};(0,n.t)(c),(0,a.o)(c)},24021:(e,t,i)=>{"use strict";i.d(t,{o:()=>a});var o=i(34013),n=i.n(o);function a(e){const t=[],i=Object.keys(e);for(const o of i){const i=e[o],a=Array.isArray(i)?i:[i];for(const e of a)t.push({re:n()(e),route:{name:o,path:e}})}return e=>{for(const i of t)if(i.re.test(e))return i.route;return null}}},3890:(e,t,i)=>{"use strict";i.d(t,{t:()=>l});var o=i(20939),n=i.n(o),a=i(60140),s=i.n(a),r=i(34013);function l(e){return n()(e,(e=>function(e){return s()(e)?(0,r.compile)(e):()=>e[0]}(e)))}},83138:(e,t,i)=>{"use strict";i.d(t,{Bs:()=>d,yy:()=>l});var o,n,a=i(64047);i(86185),function(e){e.Sg="https://sf16-website-login.neutral.ttwstatic.com/obj/tiktok_web_login_static/secsdk/secsdk-lastest.umd.js",e.Va="https://sf16-website-login.neutral.ttwstatic.com/obj/tiktok_web_login_static/secsdk/secsdk-lastest.umd.js",e.TTP="https://lf16-tiktok-web.tiktokcdn-us.com/obj/static-tx/secsdk/secsdk-lastest.umd.js"}(o||(o={})),function(e){e.Acrawler="acrawler",e.SecSdkSG="secsdk_sg",e.SecSdkVA="secsdk_va",e.SecSdkTTP="secsdk_ttp"}(n||(n={}));const s={acrawler:"https://sf16-website-login.neutral.ttwstatic.com/obj/tiktok_web_login_static/webmssdk/1.0.0.24/webmssdk.js",secsdk_sg:"https://sf16-website-login.neutral.ttwstatic.com/obj/tiktok_web_login_static/secsdk/secsdk-lastest.umd.js",secsdk_va:"https://sf16-website-login.neutral.ttwstatic.com/obj/tiktok_web_login_static/secsdk/secsdk-lastest.umd.js",secsdk_ttp:"https://lf16-tiktok-web.tiktokcdn-us.com/obj/static-tx/secsdk/secsdk-lastest.umd.js"};i(11040);const r="script-manager";function l(e){return(0,a.__awaiter)(this,void 0,void 0,(function*(){const{retry:t=0,moduleId:i}=e;try{return yield System.import(i)}catch(i){if(t)return yield l(Object.assign(Object.assign({},e),{retry:t-1}));throw i}}))}function d(e={importmap:"/node-webapp/api/importmap"}){return(0,a.__awaiter)(this,void 0,void 0,(function*(){if(document.querySelector(`#${r}`))return;let{importmap:t}=e;const i=document.createElement("script");if(i.type="systemjs-importmap",i.id=r,"string"==typeof t)try{const e=yield window.fetch.call(null,t,{method:"Get",redirect:"error"}),{imports:i}=yield e.json();t={imports:i}}catch(e){t={imports:s}}i.innerText=JSON.stringify(t),document.head.appendChild(i)}))}},24201:(e,t,i)=>{"use strict";var o,n;i.d(t,{M1:()=>Fe,aF:()=>Re,Dj:()=>W,bH:()=>U,JQ:()=>T,BD:()=>C,D2:()=>ue,Yp:()=>fe,Y0:()=>_e,TR:()=>$,nY:()=>Q,sF:()=>de,iH:()=>q}),function(e){e.NotBot="others",e.ValidGoogleBot="Googlebot",e.ValidBingBot="Bingbot",e.ValidSlurpBot="Slurpbot",e.ValidYandexBot="Yandexbot",e.ValidNaverBot="Naverbot",e.ValidDuckduckgoBot="Duckduckgobot",e.ValidNeevaBot="Neevabot",e.FakeGoogleBot="FakeGooglebot",e.FakeBingBot="FakeBingbot"}(o||(o={})),function(e){e[e.Aborted=1]="Aborted",e[e.Network=2]="Network",e[e.Decode=3]="Decode",e[e.SrcNotSupported=4]="SrcNotSupported"}(n||(n={}));const a="TikTok",s="https://www.tiktok.com",r="required name=search_term_string",l="Watch trending videos for you",d="https://www.tiktok.com/foryou",c="Discover popular videos",p="https://www.tiktok.com/discover",u="https://www.tiktok.com/discovery",g=["https://www.instagram.com/tiktok/","https://www.facebook.com/tiktok","https://www.twitter.com/tiktok_us","https://www.youtube.com/channel/UChPd_WHrv3O-XAXXHLixs7g"],m=["https://www.instagram.com/tiktok_kr/","https://www.facebook.com/tiktok","https://twitter.com/TiktokKR","https://www.youtube.com/c/tiktokkr","https://post.naver.com/my.naver?memberNo=52184197"],h={INDEX:"index, follow",NO_INDEX:"noindex, follow",IMAGE_PREVIEW_LARGE:"max-image-preview:large"};var _,v;!function(e){let t;!function(e){e.WebSite="WebSite",e.ItemList="ItemList",e.VideoObject="VideoObject",e.Page="Page",e.BreadcrumbList="BreadcrumbList",e.Person="Person",e.MusicRecording="MusicRecording",e.QAPage="QAPage",e.Event="Event",e.ListItem="ListItem",e.Thing="Thing"}(t=e.JsonldType||(e.JsonldType={}))}(_||(_={})),function(e){let t;!function(e){e[e.META_PATH=1]="META_PATH",e[e.META_EXP=2]="META_EXP",e[e.META_PAGE=3]="META_PAGE",e[e.JSONLD_PATH=4]="JSONLD_PATH",e[e.JSONLD_EXP=5]="JSONLD_EXP",e[e.JSONLD_PAGE=6]="JSONLD_PAGE"}(t=e.SERPProcessType||(e.SERPProcessType={}))}(v||(v={}));var y=i(21590),b=i(84037);const{isRealUniqueId:f}=b.c;function x(e,t=1){return Math.round(Number(`${Number(e)}e${t}`))/Math.pow(10,t)}function k(e=0){let t;return t=e<1e3?e.toString():e<999999?`${x(e/1e3)}K`:e<999999999?`${x(e/1e6)}M`:`${x(e/1e9)}B`,t}function w(e=""){return e.split(/(?:\r\n|\n|\r)/).map((e=>e.replace(/^\s+/gm,""))).join(" ").trim()}function S(e){return`${e.slice(0,10).map((e=>e.challenge.title.replace("#",""))).join(" ")}`}const C=(e="",t="")=>f(t)?`${e} (@${t})`:`${e}`;function j(e=[],t,i=3){const o=[],n=t;e.forEach((e=>{const{stickerType:t,stickerText:i=[]}=e;-1!==n.indexOf(null!=t?t:0)&&(null==i?void 0:i.length)&&o.push(...i)}));const a=o.length;return i>0&&a>i&&(o.splice(i,a-i),o.push("...")),o}function P(e){if(0===e)return"";const t=e%60,i=Math.floor(e/60),o=i%60,n=Math.floor(i/60),a=n%24,s=Math.floor(n/24);let r="P";return s>0&&(r+=`${s}D`),r+="T",a>0&&(r+=`${a}H`),o>0&&(r+=`${o}M`),r+=`${t}S`,r}function T(e=[]){return e.filter(Boolean).map((e=>e.replace(/([^,.?!]$)/,"$1."))).join(" ")}function O({statusCode:e=0}={}){return 0===e||function(e){return 10229===e||10230===e}(e)}function L({statusCode:e=0}={}){return 10216===e||2040001===e}function I(e){const t=e?{lng:e}:{};return(e={})=>Object.assign(Object.assign({},e),t)}function A(e=[]){return{itemListElement:e.reduce(((e,t,i)=>{const{url:o,name:n}=t;return e.push({"@type":_.JsonldType.ListItem,position:i+1,item:{"@type":"Thing","@id":o,name:n}}),e}),[])}}function E(e,t){const i=/ko/.test(t)?m:g;return{"@type":"Organization","@id":"https://www.tiktok.com/#organization",name:a,url:e,sameAs:i,logo:{"@type":"ImageObject",url:y.B}}}function M(e,t){var i;const{title:o="",id:n="",authorName:a="",coverMedium:s="",duration:r=0,album:l=""}=e,d=b.Z.getPureMusicPath({musicName:o,musicId:n});return{url:`${y.o}${d}`,name:o,description:null!==(i=null==t?void 0:t.description)&&void 0!==i?i:"",image:s,duration:P(null!=r?r:0),byArtist:{"@type":"Person",name:[null!=a?a:""]},inAlbum:{"@type":"MusicAlbum",name:null!=l?l:""}}}const R=new Set([v.SERPProcessType.JSONLD_PATH,v.SERPProcessType.META_PATH]),F=new Set([v.SERPProcessType.JSONLD_EXP,v.SERPProcessType.META_EXP]),D=new Set([v.SERPProcessType.JSONLD_PAGE,v.SERPProcessType.META_PAGE]),B=new Set([v.SERPProcessType.META_EXP,v.SERPProcessType.META_PAGE,v.SERPProcessType.META_PATH]),z=new Set([v.SERPProcessType.JSONLD_EXP,v.SERPProcessType.JSONLD_PAGE,v.SERPProcessType.JSONLD_PATH]),N=(e,t)=>{var i;const{seoProps:{pageId:o,pageType:n,abtest:a}={}}=t,s=null!==(i=null==a?void 0:a.vidList)&&void 0!==i?i:[];return[...e.filter((e=>R.has(e.processType)&&e.targetId===n)),...e.filter((e=>F.has(e.processType)&&s.includes(e.targetId.toString()))),...e.filter((e=>D.has(e.processType)&&e.targetId===o))]};function U(e,t){return N(t,e).filter((e=>B.has(e.processType))).reduce(((e,t)=>{var i,o;const n=t.content(e),a=null!==(o=null===(i=e.seoProps)||void 0===i?void 0:i.metaParams)&&void 0!==o?o:{};return Object.assign(Object.assign({},e),{seoProps:Object.assign(Object.assign({},e.seoProps),{metaParams:Object.assign(Object.assign({},a),n)})})}),e)}function W(e,t){return N(t,e).filter((e=>z.has(e.processType))).reduce(((e,t)=>{var i,o;const n=t.content(e),a=null!==(o=null===(i=e.seoProps)||void 0===i?void 0:i.jsonldList)&&void 0!==o?o:[];return Object.assign(Object.assign({},e),{seoProps:Object.assign(Object.assign({},e.seoProps),{jsonldList:[...a,...n]})})}),e)}function $(e,t=!1,i=!1){var o,n;if(!e.length)return{instruction:"redirect",code:302};const a=e[0];if(10003===a.statusCode)return{instruction:"redirect",code:t?404:301};if((null===(o=a.word)||void 0===o?void 0:o.isDiscovery)&&!i)return{instruction:"redirect",code:t?404:302};if(!(null===(n=a.word)||void 0===n?void 0:n.isDiscovery)&&i)return{instruction:"redirect",code:t?404:302};const s=e[1],{statusCode:r,itemList:l=[]}=s;return 1604===s.errorCode?{instruction:"redirect",code:429}:0!==r||0===l.length?{instruction:"redirect",code:302}:{instruction:"moveOn"}}function q(e){return/^\/discovery\//.test(e)}const H=(e,t)=>{let i=0;const o=[];return[...e].forEach((e=>{const n=e.length;n+i<=t&&(i+=n,o.push(e))})),o.join("")},{isPureNumber:G,hasIllegalText:Z,isRealUniqueId:V,getPureUniqueId:Q,purifyMusicName:Y}=b.c,{getPureUserPath:K,getPureLivePath:J,getPureVideoPath:X,getPureTagPath:ee,getPureMusicPath:te,getPureStickerPath:ie,getPureQuestionPath:oe}=b.Z,ne=[{processType:v.SERPProcessType.META_PATH,targetId:103,content:function(e){const{t}=e,i=[t("SERP discover title"),t("TikTok i18n keywords")].join(",");return{title:t("SEO_discover_title"),keywords:i,description:t("SEO_discover_desc"),robotsContent:h.INDEX,canonicalHref:`${s}/discover`,applicableDevice:"pc, mobile"}}},{processType:v.SERPProcessType.JSONLD_PATH,targetId:103,content:function(e){const{language:t="en"}=e,i={"@id":"https://www.tiktok.com/#discover",url:p,name:c,description:"On your device or on the web, join millions of viewers on the fastest growing video app. Download TikTok to discover new creators, search popular hashtags, and watch trending videos.",publisher:E(y.o,t)},o=A([{url:y.o,name:a},{url:p,name:c}]);return[[_.JsonldType.WebSite,i],[_.JsonldType.BreadcrumbList,o]]}}],ae=[{processType:v.SERPProcessType.META_PATH,targetId:101,content:function(e){const{language:t="en",t:i}=e,o=[i("SEO TikTok Keyword"),i("TikTok i18n keywords for home")].join(",");return{title:i("SEO_homepage_title"),keywords:o,description:i("SEO_homepage_desc"),robotsContent:h.INDEX,canonicalHref:`${s}/${t}/`,applicableDevice:"pc, mobile"}}},{processType:v.SERPProcessType.JSONLD_PATH,targetId:101,content:function(e){const{language:t="en"}=e,i=`${y.o}/${t}/`,o={"@id":"https://www.tiktok.com/#website",url:i,name:"TikTok - Make Your Day",description:"TikTok - trends start here. On a device or on the web, viewers can watch and discover millions of personalized short videos. Download the app to get started.",publisher:E(i,t),potentialAction:[{"@type":"SearchAction",target:"https://www.tiktok.com/search?q={search_term_string}","query-input":r},{"@type":"SearchAction",target:"tiktok://search?keyword={search_term_string}","query-input":r}]};return[[_.JsonldType.WebSite,o]]}}],se=[{processType:v.SERPProcessType.META_PATH,targetId:5,content:function(e){const{language:t="en",t:i}=e,o=["TikTok Trends","TikTok Trending","Trending Videos","Trending Hashtags","TikTok i18n keywords"].map((e=>i(e))).join(",");return{title:i("SEO_trending_title"),keywords:o,description:i("SEO_trending_desc"),robotsContent:h.INDEX,canonicalHref:`${s}/foryou?lang=${t}`,applicableDevice:"pc, mobile"}}},{processType:v.SERPProcessType.JSONLD_PATH,targetId:5,content:function(e){const{seoProps:{itemList:t}={},language:i="en"}=e,o={"@id":"https://www.tiktok.com/#foryou",url:d,name:l,description:"It starts on TikTok. Join the millions of viewers discovering content and creators on TikTok — available on the web or on your mobile device.",publisher:E(y.o,i)},n=A([{url:y.o,name:a},{url:d,name:l}]);return[[_.JsonldType.WebSite,o],[_.JsonldType.BreadcrumbList,n],[_.JsonldType.ItemList,null!=t?t:{}]]}}],re=[{processType:v.SERPProcessType.META_PATH,targetId:11,content:function(e){const{language:t="en",t:i}=e;return{title:i("SEO_following_title"),keywords:i("TikTok i18n keywords"),description:i("SEO_following_desc"),robotsContent:h.INDEX,canonicalHref:`${s}/following?lang=${t}`,applicableDevice:"pc, mobile"}}}],le=[{processType:v.SERPProcessType.META_PATH,targetId:105,content:function(e){var t,i,o,n,a,r;const{pathname:l="/search",input_keyword:d,t:c}=e,p=null!==(i=null===(t=e)||void 0===t?void 0:t.user_list)&&void 0!==i?i:[],u=null!==(n=null===(o=e)||void 0===o?void 0:o.item_list)&&void 0!==n?n:[],g=null!==(r=null===(a=e)||void 0===a?void 0:a.data)&&void 0!==r?r:[],m=0===e.status_code&&(p.length>0||(null==u?void 0:u.length)>0||(null==g?void 0:g.length)>0),_=c("SEO_search_title",{searchkeywords:`'${d}'`}),v=c("SEO_search_desc",{searchkeywords:`'${d}'`});return{title:_,keywords:[d,"tiktok search",c("TikTok i18n keywords")].join(","),description:v,robotsContent:m?h.INDEX:h.NO_INDEX,canonicalHref:`${s}${l}?q=${d}`,applicableDevice:"pc, mobile"}}}];function de(e){var t,i,o,n,a,r,l,d,c,p,u,g;const m=null===(o=null===(i=null===(t=e.seoProps)||void 0===t?void 0:t.abtest)||void 0===i?void 0:i.parameters.video_tdk_phase2)||void 0===o?void 0:o.vid,{itemInfo:_,statusCode:v,seoProps:y,t:b}=e,{preferredLanguage:f}=null!=y?y:{},x=O(e);if(L(e))return{};const{id:S,desc:P,stickersOnItem:T=[],stats:A}=null!==(n=null==_?void 0:_.itemStruct)&&void 0!==n?n:{},{diggCount:E=0,commentCount:M=0,playCount:R=0}=null!=A?A:{},{nickname:F,uniqueId:D}=null!==(r=null===(a=null==_?void 0:_.itemStruct)||void 0===a?void 0:a.author)&&void 0!==r?r:{},{title:B,authorName:z}=null!==(d=null===(l=null==_?void 0:_.itemStruct)||void 0===l?void 0:l.music)&&void 0!==d?d:{},N=null!==(p=null===(c=null==_?void 0:_.itemStruct)||void 0===c?void 0:c.suggestedWords)&&void 0!==p?p:[],U=N.length>0?N[0]:"",W=null!==(g=null===(u=null==_?void 0:_.itemStruct)||void 0===u?void 0:u.indexEnabled)&&void 0!==g&&g,$=V(D),q=C(F,D),G=P?w(P):"",Z=function(e="",t=""){return e.replace(` - ${t}`,"")+(t?` - ${t}`:"")}(B,null!=z?z:""),Q=I(f),Y=G.length,K=b("seo_serp_videotxt_title",Q({videoText:Y>70?`${H(G,70)}...`:G})),J=b("seo_serp_videotxt_title2",Q({username:q,musicName:Z})),X=b("serp_videoText_searchQuery_title",Q({videoText:Y>70?`${H(G,70)}...`:G,searchQueryAfterView:U})),ee=b("serp_videoText_searchQuery_title2",Q({username:q,searchQueryAfterView:U})),te=b("serp_videoText_searchQuery_title3",Q({videoText:Y>70?`${H(G,70)}...`:G,searchQueryAfterView:U,videoViews:k(R)})),ie=b("serp_videoText_searchQuery_title4",Q({username:q,searchQueryAfterView:U,videoViews:k(R)})),oe=b("serp_videoText_searchQuery_title5",Q({videoText:Y>70?`${H(G,70)}...`:G,videoViews:k(R)})),ne=b("serp_videoText_searchQuery_title6",Q({username:q,musicName:Z,videoViews:k(R)}));let ae=Y>0?K:J;"v2"===m&&(G&&U?ae=X:U&&!G&&(ae=ee)),"v3"===m&&(ae=G&&U?te:!G&&U?ie:G&&!U?oe:ne);let se="";["v2","v3","v4"].includes(m)&&N.length>0&&(se=N.slice(0,10).join(","));const re=Q({username:q,likes:k(E),comments:k(M),videoText:G}),le=j(T,[4],3).join(" | "),de=j(T,[9],3).join(" "),ce=b("seo_serp_videotxt_desc4",Q({stickerCover:`${de} `,musicName:Z})),pe=b("seo_serp_views_desc",Q({videoViews:k(R)}));let ue=((e,t,i,o,n,a,s,r,l,d,c,p,u)=>{const g=[o].filter((e=>Boolean(e))).join(". "),m=[a].filter((e=>Boolean(e))).join(". "),h=p.concat(", "),_=0===s?i.replace(': ""',""):i,v=r>=20,y=l>=20;return v&&y?"v2"===u?`${e}${t}${_}${d}${m}${g}${c}`:"v3"===u?`${h}${e}${t}${_}${d}${m}${g}${c}`:`${e}${t}${_}${g}${n}`:v||y?v?"v2"===u?`${e}${_}${d}${m}${g}${c}`:"v3"===u?`${h}${e}${_}${d}${m}${g}${c}`:`${e}${_}${g}${n}`:y?"v2"===u?`${t}${_}${d}${m}${g}${c}`:"v3"===u?`${h}${t}${_}${d}${m}${g}${c}`:`${t}${_}${g}${n}`:`${_}`:"v2"===u?`${_}${d}${m}${g}${c}`:"v3"===u?`${h}${_}${d}${m}${g}${c}`:`${_}${g}${n}`})(b("seo_serp_videotxt_desc1",re),b("seo_serp_videotxt_desc2",re),b("seo_serp_videotxt_desc3",{username:q,videoText:G}),le,ce,de,Y,E,M,U?b("seo_serp_searchQuery_desc",{searchQueryAfterView:U}).concat(" "):"",b("seo_serp_musicName_desc",Q({musicName:Z})),pe,m);const ge=`${s}/@${D}/video/${S}`;let me=x&&F&&$&&S&&W?h.INDEX:h.NO_INDEX;switch(me=[me,h.IMAGE_PREVIEW_LARGE].join(", "),v){case 10231:ae=b("err_vid_geo"),ue="";break;case 10216:case 10204:case 10215:case 10217:case 10240:case 10241:case 10242:ae=b("err_vid"),ue=""}return{title:ae,keywords:se,description:ue,canonicalHref:ge,robotsContent:me,applicableDevice:"pc, mobile"}}const ce=[{processType:v.SERPProcessType.META_PATH,targetId:0,content:de},{processType:v.SERPProcessType.JSONLD_PATH,targetId:0,content:function(e){var t,i,o,n;if(!O(e))return[];const{itemInfo:s,seoProps:r,t:l}=e,{metaParams:d,videoObject:c}=null!=r?r:{},{id:p,desc:u}=null!==(t=null==s?void 0:s.itemStruct)&&void 0!==t?t:{},{nickname:g,uniqueId:m,secUid:h,verified:v}=null!==(o=null===(i=null==s?void 0:s.itemStruct)||void 0===i?void 0:i.author)&&void 0!==o?o:{},b=K({secUid:h,uniqueId:m}),f=`${y.o}${b}`,x=l(v?"user_SEO_official_title1":"user_SEO_title1",{username:V(m)?`${g} (@${m})`:`${g}`}),k=X({secUid:h,uniqueId:m,videoId:p}),w=`${y.o}${k}`,S=null!==(n=null==d?void 0:d.title)&&void 0!==n?n:u,C=A([{url:y.o,name:a},{url:f,name:x},{url:w,name:null!=S?S:""}]);return[[_.JsonldType.BreadcrumbList,C],[_.JsonldType.VideoObject,null!=c?c:{}]]}}],pe=[{processType:v.SERPProcessType.META_PATH,targetId:1,content:function(e){const{userInfo:t={},statusCode:i,t:o}=e,n=O(e),{user:{verified:a=!1,nickname:r="",uniqueId:l="",signature:d=""}={},stats:{heart:c=0,followerCount:p=0}={}}=t,u=V(l),g=C(r,l),m=K({secUid:"",uniqueId:l}),_=`${s}${m}`;let v=n&&r&&u?h.INDEX:h.NO_INDEX;v=[v,h.IMAGE_PREVIEW_LARGE].join(", ");let y=o(a?"seo_serp_user2_title":"seo_serp_user1_title",{username:g});const b=w(d);let f=o("seo_serp_user_desc",{username:g});var x;switch(c>20&&(f+=o("seo_serp_user_desc1",{heart:k(Number(c))})),p>20&&(f+=o("seo_serp_user_desc2",{follower:k(p)})),f+=`${b}${b&&(x=b,!/([!@&/\\#,+()$~%.'":*?<>{}！？。]$)/.test(x))?".":""}`,f+=o("seo_serp_user_desc3",{username:g}),i){case 10202:case 10221:case 10102:case 10223:y=o("err_user"),f="";break;case 10222:y=o("err_user_private"),f=""}return{title:y,keywords:void 0,description:f,canonicalHref:_,robotsContent:v,applicableDevice:"pc, mobile"}}},{processType:v.SERPProcessType.JSONLD_PATH,targetId:1,content:function(e){var t;const{userInfo:i,seoProps:{itemList:o}={},musicList:n=[],t:s}=e,{nickname:r,uniqueId:l="",secUid:d,signature:c}=null!==(t=null==i?void 0:i.user)&&void 0!==t?t:{},p=K({secUid:null!=d?d:"",uniqueId:l}),u=`${y.o}${p}`,g=(V(l)?`${r} (@${l})`:`${r}`)+" | TikTok",m=A([{url:y.o,name:a},{url:u,name:g}]),h={name:null!=r?r:"",description:null!=c?c:"",alternateName:l,mainEntityOfPage:{"@type":"ProfilePage","@id":u}},v=[[_.JsonldType.ItemList,null!=o?o:{}],[_.JsonldType.BreadcrumbList,m],[_.JsonldType.Person,h]];if(n.length){const e=[];e.push(...n.slice(0,9).map(((e,t)=>{var i;return Object.assign({"@type":_.JsonldType.MusicRecording,position:t+1},M(e.music,{description:s("music_SEO_desc3",{musicName:e.music.title,authorName:e.music.authorName,posts:k(null===(i=e.stats)||void 0===i?void 0:i.videoCount)})}))}))),v.push([_.JsonldType.ItemList,{itemListElement:e},{name:"MusicRecordingItemList"}])}return v}}];function ue(e){var t,i,o;const n=null===(o=null===(i=null===(t=e.seoProps)||void 0===t?void 0:t.abtest)||void 0===i?void 0:i.parameters.hashtag_page_related_hashtag_tdk)||void 0===o?void 0:o.vid,{t:a,statusCode:r,challengeInfo:l}=e,d=O(e),{challenge:{title:c="",desc:p=""}={},stats:{viewCount:u=0}={}}=null!=l?l:{},g=`${c}`;let m=a("seo_serp_hashtag_title",{hashtag:g});const _=function(e,t){const{t:i,relatedChallengeList:o=[]}=e;let n;return n="v3"===t||"v4"===t?S(o):void 0,n}(e,n);let v=function(e,t,i,o,n){var a,s;const{challengeInfo:r,seoProps:l,t:d,relatedChallengeList:c=[]}=e,{title:p,body:u}=null!==(a=null==r?void 0:r.challengeAnnouncement)&&void 0!==a?a:{},g=`${w(null!=p?p:"")} ${w(null!=u?u:"")}`.trim(),m=null!==(s=null==r?void 0:r.challenge.splitTitle)&&void 0!==s?s:null==l?void 0:l.splitTitle;let h;const _=d("seo_serp_hashtag_desc",{tagText:null!=m?m:i}),v=d("seo_serp_hashtag_desc3",{views:k(Number(t))}),y=`${_}${t>1e3?`${v} `:""}${d("seo_serp_hashtag_desc1",{hashtag:i})}${g?`${g} `:""}${w(o)}`,b=S(c);return h="v2"===n||"v4"===n?`${y} ${b}`:`${y}`,h}(e,Number(u),g,p,n);const y=d&&c,b=`${s}${ee({tagName:c})}`,f=y?h.INDEX:h.NO_INDEX;switch(r){case 10205:case 10209:case 10211:case 10212:m=a("err_tag"),v=""}return{title:m,keywords:_,description:v,canonicalHref:b,robotsContent:f,applicableDevice:"pc, mobile"}}const ge=[{processType:v.SERPProcessType.META_PATH,targetId:3,content:ue},{processType:v.SERPProcessType.JSONLD_PATH,targetId:3,content:function(e){var t,i;const{challengeInfo:o,seoProps:{itemList:n,metaParams:s}={}}=e,{title:r=""}=null!==(t=null==o?void 0:o.challenge)&&void 0!==t?t:{},l=`${y.o}${ee({tagName:r})}`,d=null!==(i=null==s?void 0:s.title)&&void 0!==i?i:`#${r} | TikTok`,c={"@type":"ItemPage","@id":l},p=A([{url:y.o,name:a},{url:l,name:d}]);return[[_.JsonldType.Page,c],[_.JsonldType.ItemList,null!=n?n:{}],[_.JsonldType.BreadcrumbList,p]]}}];var me=i(11838);const he=[{processType:v.SERPProcessType.META_PATH,targetId:117,content:function(e){var t,i;const{challengeInfo:o,statusCode:n,seoProps:a,t:r}=e,{preferredLanguage:l}=null!=a?a:{},d=O(e),{challenge:{title:c="",desc:p=""}={},stats:{viewCount:u=0}={}}=null!=o?o:{},{title:g,body:m}=null!==(t=null==o?void 0:o.challengeAnnouncement)&&void 0!==t?t:{},_=null!==(i=null==o?void 0:o.challenge.splitTitle)&&void 0!==i?i:null==a?void 0:a.splitTitle,v=`${w(null!=g?g:"")} ${w(null!=m?m:"")}`.trim(),y=`#${c}`,b=null!=_?_:y,f=I(l);let x=r("hashtag_SEO_title2",f({hashtag:y}));const S=[_,c,r("TikTok i18n keywords",f())].filter((e=>Boolean(e))).join(",");let C=`${r("hashtag_SEO_desc1",f({tagText:b,views:k(Number(u)),hashtag:y}))} ${v?`${v} `:""}${w(p)}`;const j=d&&c,P=`${s}${me.T2.amp({name:c})}`,T=j?h.INDEX:h.NO_INDEX;switch(n){case 10205:case 10209:case 10211:case 10212:x=r("err_tag"),C=""}return{title:x,keywords:S,description:C,canonicalHref:P,robotsContent:T,applicableDevice:"pc, mobile"}}},{processType:v.SERPProcessType.JSONLD_PATH,targetId:117,content:function(e){var t;const{challengeInfo:i,seoProps:{itemList:o}={}}=e,{title:n=""}=null!==(t=null==i?void 0:i.challenge)&&void 0!==t?t:{},s=`${y.o}${me.T2.amp({name:n})}`,r=`TikTok - #${n} | AMP`,l={"@type":"ItemPage","@id":s},d=A([{url:y.o,name:a},{url:s,name:r}]);return[[_.JsonldType.Page,l],[_.JsonldType.ItemList,null!=o?o:{}],[_.JsonldType.BreadcrumbList,d]]}}];function _e(e){var t;const{musicInfo:i,statusCode:o,t:n}=e,a=O(e),{music:{id:r="",title:l="",authorName:d="",scheduleSearchTime:c=0}={}}=null!=i?i:{},{videoCount:p}=null!==(t=null==i?void 0:i.stats)&&void 0!==t?t:{};let u,g=n("seo_serp_music_title",{musicName:l,authorName:d});u=l.toLowerCase().endsWith("song")?n("seo_serp_music_desc3",{musicName:l,authorName:d}):n("seo_serp_music_desc",{musicName:l,authorName:d});const m=n("seo_serp_music_desc1",{video_count:k(p)}),_=n("seo_serp_music_desc2",{musicName:l});let v="";v=p&&p>=1e3?`${u} ${m} ${_}`:`${u} ${_}`;let y=!0;if(0!==c){const e=Number(new Date);y=1e3*Number(c)<=e}const b=a&&l&&r,f=te({musicName:l,musicId:r}),x=`${s}${f}`,w=b&&y?h.INDEX:h.NO_INDEX;switch(o){case 10203:case 10218:g=n("err_sound"),v="";break;case 10219:g=n("err_sound_copy"),v=""}return{title:g,keywords:void 0,description:v,canonicalHref:x,robotsContent:w,applicableDevice:"pc, mobile"}}const ve=[{processType:v.SERPProcessType.META_PATH,targetId:4,content:_e},{processType:v.SERPProcessType.JSONLD_PATH,targetId:4,content:function(e){var t;const{musicInfo:i,seoProps:o,t:n}=e,{itemList:s,metaParams:r}=null!=o?o:{};if(!(null==i?void 0:i.music))return[];const{title:l="",id:d="",authorName:c=""}=null!==(t=i.music)&&void 0!==t?t:{},{title:p,description:u}=null!=r?r:{},g=te({musicName:l,musicId:d}),m=`${y.o}${g}`,h=null!=p?p:`${l}(${c}) | TikTok`,v={"@type":"ItemPage","@id":m},b=A([{url:y.o,name:a},{url:m,name:h}]),f=M(i.music,{description:u});return[[_.JsonldType.Page,v],[_.JsonldType.ItemList,null!=s?s:{}],[_.JsonldType.BreadcrumbList,b],[_.JsonldType.MusicRecording,f]]}}],ye=[{processType:v.SERPProcessType.META_PATH,targetId:116,content:function(e){const{language:t="en",t:i}=e;return{title:i("SEO_Recharge_title"),keywords:"recharge, coins recharge, get coins, TikTok, ティックトック, tik tok, tick tock, tic tok, tic toc, tictok, тик ток, ticktock",description:i("SEO_Recharge_desc"),robotsContent:h.INDEX,canonicalHref:`${s}/coin?lang=${t}`,applicableDevice:"pc, mobile"}}}],be=[{processType:v.SERPProcessType.META_PATH,targetId:111,content:function(e){const{language:t="en",t:i,contentInfo:o,eventName:n}=e;return{title:o?i("search_on_tiktok",{eventname:null==o?void 0:o.query,ns:"MT_Reflow"}):i("offline_title",{ns:"MT_Reflow"}),keywords:`${i("landing_page_key_word_1",{ns:"MT_Reflow"})},${null==o?void 0:o.query}`,description:o?i("outapp_copywriter",{eventname:null==o?void 0:o.query,ns:"MT_Reflow"}):i("expiration_reminder",{ns:"MT_Reflow"}),robotsContent:h.INDEX,canonicalHref:`https://www.tiktok.com/search/campaign/${n}?lang=${t}`,applicableDevice:"pc, mobile"}}}];function fe(e){const{keyword:t,t:i,detailResponse:o,isDiscovery:n}=e,{word:{content:a=""}={language:void 0}}=null!=o?o:{},s=a.replace(/-/g," ");return{title:i("seo_serp_expansion_title",{expansion_keywords:s}),keywords:`${s}, ${i("TikTok i18n keywords")}`,description:`${i("seo_serp_expansion_num1",{expansion_keywords:s})}`,canonicalHref:n?`${u}/${t}`:`${p}/${t}`,robotsContent:"index, follow",applicableDevice:"pc, mobile"}}const xe=[{processType:v.SERPProcessType.META_PATH,targetId:104,content:fe},{processType:v.SERPProcessType.JSONLD_PATH,targetId:104,content:function(e){const{keyword:t="",seoProps:{itemList:i}={},isDiscovery:o}=e,n=o?`${u}/${t}`:`${p}/${t}`,s={"@type":"ItemPage","@id":n},r=A([{url:y.o,name:a},{url:p,name:"Discover"},{url:n,name:t}]);return[[_.JsonldType.Page,s],[_.JsonldType.BreadcrumbList,r],[_.JsonldType.ItemList,null!=i?i:{}]]}}];function ke(e){return!!e&&e.originalItem}function we(e){return Boolean(e)&&!(null==e?void 0:e.originalItem)}const Se=(e,t)=>{var i,o,n;return{t,itemInfo:{itemStruct:Object.assign(Object.assign({},e),{author:{id:null!==(i=e.authorId)&&void 0!==i?i:"",uniqueId:null!==(o=e.author)&&void 0!==o?o:"",nickname:null!==(n=e.nickname)&&void 0!==n?n:"",secUid:e.authorSecId}})}}};function Ce(e,t){var i,o,n,a,s,r,l,d;return{"@type":"Answer",text:(null!==(o=null===(i=e.stickersOnItem)||void 0===i?void 0:i.map((e=>{var t;return null===(t=e.stickerText)||void 0===t?void 0:t.join(".")})))&&void 0!==o?o:[]).concat(null==e?void 0:e.desc).filter(Boolean).join(".")||(null!==(n=de(Se(e,t)).title)&&void 0!==n?n:""),dateCreated:new Date(1e3*Number(e.createTime)).toISOString(),upvoteCount:null!==(s=null===(a=e.stats)||void 0===a?void 0:a.diggCount)&&void 0!==s?s:0,url:`${y.o}${X({secUid:e.authorSecId,uniqueId:null!==(r=e.author)&&void 0!==r?r:"",videoId:e.id})}`,author:{"@type":"Person",alternateName:null!==(l=e.author)&&void 0!==l?l:"",name:null!==(d=e.nickname)&&void 0!==d?d:""}}}const je=[{processType:v.SERPProcessType.META_PATH,targetId:16,content:function(e){const{questionInfo:t,t:i}=e,o=O(e),{id:n="",content:a="",videoCount:s}=null!=t?t:{},r=o&&a&&n,l=r?i("SEO_qa_title_1",{question:a}):"",d=[i("TikTok i18n keywords")].join(","),c=r?i("SEO_qa_desc_1",{question:a,number:k(s)}):"",p=oe({questionContent:a,questionId:n});return{title:l,keywords:d,description:c,canonicalHref:`${y.o}${p}`,robotsContent:r?h.INDEX:h.NO_INDEX,applicableDevice:"pc, mobile"}}},{processType:v.SERPProcessType.JSONLD_PATH,targetId:16,content:function(e){var t,i,o,n,s;const{questionInfo:r,seoProps:l,t:d,answers:c}=e,{itemList:p,metaParams:u}=null!=l?l:{},{id:g="",content:m="",videoCount:h,creator:v,createTime:b}=null!=r?r:{},f=O(e)&&m&&g,{title:x}=null!=u?u:{},k=oe({questionContent:m,questionId:g}),w=`${y.o}${k}`,S=null!=x?x:`${m} | TikTok Q&A`,C={"@type":"ItemPage","@id":w},j=A(f?[{url:y.o,name:a},{url:w,name:S}]:[{url:y.o,name:a}]);let P={};if(f){const e=null===(t=c.filter(ke))||void 0===t?void 0:t[0],a=[m,null!==(i=null==e?void 0:e.desc)&&void 0!==i?i:""].join("."),r={"@type":"Question",name:m,text:a,answerCount:h,dateCreated:void 0===b?b:new Date(1e3*Number(b)).toISOString(),author:{"@type":"Person",name:null!==(o=null==v?void 0:v.nickname)&&void 0!==o?o:"",alternateName:null!==(n=null==v?void 0:v.uniqueId)&&void 0!==n?n:""}};if(0===c.length)P={mainEntity:Object.assign(Object.assign({},r),{suggestedAnswer:[]})};else{const t=null===(s=c.filter(we))||void 0===s?void 0:s[0],i=null!=t?t:e,o=Ce(i,d),n=c.filter((e=>we(e)&&e.id!==(null==t?void 0:t.id))).slice(0,10),a=n.length>0?n:[i];P={mainEntity:Object.assign(Object.assign({},r),{acceptedAnswer:o,suggestedAnswer:a.map((e=>Ce(e,d)))})}}}const T=[[_.JsonldType.Page,C],[_.JsonldType.ItemList,null!=p?p:{}],[_.JsonldType.BreadcrumbList,j]];return f&&T.push([_.JsonldType.QAPage,P]),T}}],Pe=[{processType:v.SERPProcessType.META_PATH,targetId:14,content:function(e){var t;const{language:i="en",t:o,user:n}=e,a=null!==(t=null==n?void 0:n.uniqueId)&&void 0!==t?t:"",r=[null==n?void 0:n.nickName,`@${a}`,"live","live room","tiktok search",o("TikTok i18n keywords")].join(", ");return{title:o("SEO_live_title",{username:a}),keywords:r,description:o("SEO_live_title",{username:a}),robotsContent:h.INDEX,canonicalHref:`${s}/live/producer?lang=${i}`,applicableDevice:"pc, mobile"}}}],Te=[{processType:v.SERPProcessType.META_PATH,targetId:15,content:function(e){const{t}=e;return{title:t("SEO_live_discover_title"),keywords:"live, live stream, TikTok, ティックトック, tik tok, tick tock, tic tok, tic toc, tictok, тик ток, ticktock",description:t("SEO_live_discover_desc"),robotsContent:h.INDEX,canonicalHref:`${s}/live`,applicableDevice:"pc, mobile"}}}],Oe=[{processType:v.SERPProcessType.META_PATH,targetId:12,content:function(e){var t,i,o,n;const{t:a,userInfo:s,LiveRoomInfo:r,event:l}=e,d=null!==(t=null==r?void 0:r.title)&&void 0!==t?t:"",c=null==r?void 0:r.status,p=null!==(o=null===(i=null==s?void 0:s.user)||void 0===i?void 0:i.uniqueId)&&void 0!==o?o:"",u=null===(n=null==s?void 0:s.user)||void 0===n?void 0:n.nickname,g=`${u} (@${p})`,m=[u,`@${p}`,"live","live room","tiktok search",a("TikTok i18n keywords")].join(", "),_=J({uniqueId:p}),v=`${y.o}${_}`,b=a("SEO_live_title",{username:g});let f=`${d?`${d}. `:""}${a("SEO_live_desc",{username:g})}`;return!(2===c)&&l&&(f=`${a("SEO_live_desc2",{event_name:null==l?void 0:l.title,username:g})}`),{title:b,keywords:m,description:f,robotsContent:h.INDEX,canonicalHref:v,applicableDevice:"pc, mobile"}}},{processType:v.SERPProcessType.JSONLD_PATH,targetId:12,content:function(e){var t,i,o,n;const{t:s,userInfo:r,seoProps:l,event:d}=e,{videoObject:c}=null!=l?l:{},p=null!==(i=null===(t=null==r?void 0:r.user)||void 0===t?void 0:t.uniqueId)&&void 0!==i?i:"",u=null!==(n=null===(o=null==r?void 0:r.user)||void 0===o?void 0:o.nickname)&&void 0!==n?n:"",g=J({uniqueId:p}),m=`${y.o}${g}`,h=K({uniqueId:p}),_=`${y.o}${h}`,v=V(p)?`${u} (@${p})`:`${u}`;return[["Event",d?{"@type":"Event",name:d.title,url:m,description:d.description,startDate:new Date(1e3*Number(d.startTime)).toISOString(),endDate:new Date(1e3*(Number(d.startTime)+Number(d.duration))).toISOString(),eventStatus:"http://schema.org/EventScheduled",eventAttendanceMode:"http://schema.org/OnlineEventAttendanceMode",location:{"@type":"VirtualLocation",url:m},Organizer:{"@type":"Organization",name:u,alternateName:p,url:_}}:{}],["BreadcrumbList",A([{url:y.o,name:a},{url:_,name:v},{url:m,name:"LIVE"}])],["VideoObject",null!=c?c:{}]]}}],Le=[{processType:v.SERPProcessType.META_PATH,targetId:17,content:function(e){const{mc_info:t,status_code:i,t:o}=e,{id_str:n="",name:a=""}=null!=t?t:{},r=0===i&&""!==a;let l=o("playlist_sharing_metatitle",{playlist_name:a});const d=[a,o("TikTok i18n keywords")].join(",");let c=o("playlist_sharing_metadescription",{playlist_name:a});return r||(l="",c=""),{title:l,keywords:d,description:c,canonicalHref:`${s}/playlist-music/${a}-${n}`,robotsContent:r?h.INDEX:h.NO_INDEX,applicableDevice:"pc, mobile"}}}],{JsonldType:Ie}=_,Ae=new Map([["animals",{titleI18NKey:"SEO_foryou_animals_title",descriptionI18NKey:"SEO_foryou_animals_desc"}],["beauty",{titleI18NKey:"SEO_foryou_beauty_title",descriptionI18NKey:"SEO_foryou_beauty_desc"}],["comedy",{titleI18NKey:"SEO_foryou_comedy_title",descriptionI18NKey:"SEO_foryou_comedy_desc"}],["dance",{titleI18NKey:"SEO_foryou_dance_title",descriptionI18NKey:"SEO_foryou_dance_desc"}],["food",{titleI18NKey:"SEO_foryou_food_title",descriptionI18NKey:"SEO_foryou_food_desc"}],["gaming",{titleI18NKey:"SEO_foryou_gaming_title",descriptionI18NKey:"SEO_foryou_gaming_desc"}],["sports",{titleI18NKey:"SEO_foryou_sports_title",descriptionI18NKey:"SEO_foryou_sports_desc"}]]);function Ee(e,t){return`/place/${t}-${e}`}function Me(e,t,i){const o=K({uniqueId:e});return t&&i?`${o}/collection/${t}-${i}`:o}const Re=[...ne,...re,...se,...ge,...he,...ae,...ve,...je,...le,...pe,...ce,...ye,...be,...xe,...Pe,...Te,...Oe,...Le,{processType:v.SERPProcessType.META_PATH,targetId:113,content:function(e){var t;const{language:i="en",t:o,topic:n}=e,{titleI18NKey:a="",descriptionI18NKey:r=""}=null!==(t=Ae.get(n))&&void 0!==t?t:{};return a&&r?{title:o(a),keywords:o("TikTok i18n keywords"),description:o(r),robotsContent:h.INDEX,canonicalHref:`${s}/topics/${n}?lang=${i}`,applicableDevice:"pc, mobile"}:{}}},{processType:v.SERPProcessType.JSONLD_PATH,targetId:113,content:function(e){const{seoProps:{itemList:t}={}}=e;return[[Ie.ItemList,null!=t?t:{}]]}},{processType:v.SERPProcessType.META_PATH,targetId:114,content:function(e){const{t,eventTitle:i="",eventId:o="",subscriberCount:n=""}=e;return{title:t("share_live_event_title",{"Event Topic":i}).replace("{Event Topic}",i),keywords:"live, live event, TikTok, ティックトック, tik tok, tick tock, tic tok, tic toc, tictok, тик ток, ticktock",description:t("share_live_event_desc",{number:n}),robotsContent:h.INDEX,canonicalHref:`${s}/live/event/${o}`,applicableDevice:"pc, mobile"}}},{processType:v.SERPProcessType.META_PATH,targetId:119,content:function(e){var t,i;const{t:o,mixInfo:n,statusCode:a}=e,s=0===a,r=`@${null===(t=null==n?void 0:n.creator)||void 0===t?void 0:t.uniqueId}`,l=null!==(i=null==n?void 0:n.name)&&void 0!==i?i:"Untitled playlist";return{title:o("playlist_share_title",{Playlist_name:l,username:r},`Playlist ${l} created by ${r}`),description:o("playlist_share_desc",{},"Enjoy a curated video list and find more videos on TikTok!"),canonicalHref:s?`${y.o}/${r}/playlist/${null==n?void 0:n.name}-${null==n?void 0:n.id}`:y.o,robotsContent:s?h.INDEX:h.NO_INDEX,applicableDevice:"mobile"}}},{processType:v.SERPProcessType.META_PATH,targetId:6,content:function(e){var t,i,o,n;const{stickerInfo:{sticker:a}={},t:s}=e;return a?{title:s("share_effect_title",{sticker_name:a.name}),description:s("share_sticker_desc",{sticker_desc:a.desc,number:k(null!==(i=null===(t=a.stickerStats)||void 0===t?void 0:t.useCount)&&void 0!==i?i:0),num:null!==(n=null===(o=a.stickerStats)||void 0===o?void 0:o.useCount)&&void 0!==n?n:0}),robotsContent:h.INDEX,canonicalHref:`${y.o}/sticker/${a.name}-${a.id}`,applicableDevice:"mobile"}:{title:s("share_sticker_preset"),description:"",robotsContent:h.NO_INDEX,applicableDevice:"mobile"}}},{processType:v.SERPProcessType.META_PATH,targetId:18,content:function(e){var t;const{poiInfo:i,statusCode:o,t:n}=e,{poi:{id:a="",name:r="",indexEnabled:l=!1}={}}=null!=i?i:{},{videoCount:d}=null!==(t=null==i?void 0:i.stats)&&void 0!==t?t:{};let c=`${r} | ${n("poidetails_tiktokplaces")}`,p=`${k(d)} ${n("videos_")}. ${n("poidetails_location_name_placehldtwo").replace("{ }",r)}`;const u=Ee(a,r),g=`${s}${u}`,m=l?h.INDEX:h.NO_INDEX;switch(o){case 205002:case 205001:c=n("poisuggest_placeuna_title_1"),p="";break;case 205003:c=n("err_feature_unavailable"),p=""}return{title:c,keywords:"",description:p,canonicalHref:g,robotsContent:m,applicableDevice:"pc"}}},{processType:v.SERPProcessType.JSONLD_PATH,targetId:18,content:function(e){var t;const{poiInfo:i,seoProps:o,t:n}=e,{itemList:s,metaParams:r}=null!=o?o:{};if(!(null==i?void 0:i.poi))return[];const{name:l="",id:d=""}=null!==(t=i.poi)&&void 0!==t?t:{},{title:c}=null!=r?r:{},p=Ee(d,l),u=`${y.o}${p}`,g=null!=c?c:`${l} | TikTok`,m={"@type":"ItemPage","@id":u},h=A([{url:y.o,name:a},{url:u,name:g}]);return[[_.JsonldType.Page,m],[_.JsonldType.ItemList,null!=s?s:{}],[_.JsonldType.BreadcrumbList,h]]}},{processType:v.SERPProcessType.META_PATH,targetId:121,content:function(e){const{t,collectionInfo:i}=e,{userName:o="",name:n="",collectionId:a=""}=null!=i?i:{},r=O(e),l=L(e),d=t("shared_collection_other_apps_title",void 0,"Collection %1$s created by %s").replace("%1$s",n).replace("%s",o),c=t("shared_collection_other_apps_description",void 0,"Watch amazing videos in this curated collection %1$s").replace("%1$s",n),p=r&&!l?h.INDEX:h.NO_INDEX,u=Me(o,n,String(a));return{title:d,keywords:void 0,description:c,robotsContent:p,canonicalHref:`${s}${u}`,applicableDevice:"pc, mobile"}}},{processType:v.SERPProcessType.JSONLD_PATH,targetId:121,content:function(e){if(!O(e))return[];const{collectionInfo:t,seoProps:i,t:o}=e,{itemList:n}=null!=i?i:{},{userName:s="",name:r="",collectionId:l}=null!=t?t:{},d=K({uniqueId:s}),c=`${y.o}${d}`,p=`${s} | TikTok`,u=Me(s,r,String(l)),g=`${y.o}${u}`,m=o("shared_collection_other_apps_title",void 0,"Collection %1$s created by %s").replace("%1$s",r).replace("%s",s),h={"@type":"ItemPage","@id":g},v=A([{url:y.o,name:a},{url:c,name:p},{url:g,name:null!=m?m:""}]);return[[_.JsonldType.Page,h],[_.JsonldType.BreadcrumbList,v],[_.JsonldType.ItemList,null!=n?n:{}]]}}],Fe=[]},80416:(e,t,i)=>{"use strict";i.d(t,{F:()=>a});var o,n=i(95872);!function(e){e.ClickInsight="click_insight",e.EnterInsightDetail="enter_insight_detail",e.VideoPlay="video_play",e.ProfileHoveShow="livesdk_web_profile_hover_show"}(o||(o={}));const a={handleClickAnalyticsButton:()=>{n.W.event("click_insight"),n.W.event("enter_insight_detail",{widget_name:null,sub_widget:null})},handleClickAnalyticsVideoCover:()=>{n.W.event("video_play",{enter_from:"insight_page",widget_name:"null",sub_widget:"null",enter_method:"video_card"})},handleProfileHoveShow:()=>{n.W.event("livesdk_web_profile_hover_show")}}},47871:(e,t,i)=>{"use strict";i.d(t,{C:()=>a});var o,n=i(95872);!function(e){e.ShowSnackbar="show_snackbar",e.ShowSnackbarAuto="show_snackbar_auto",e.ClickDownloadBar="click_download_bar",e.ClickGetForPC="click_get_for_pc",e.InstalWebApp="install_web_app",e.ClickGetApp="click_get_app_for_pc"}(o||(o={}));const a={handleShowSnack:e=>{const t=e?"show_snackbar_auto":"show_snackbar";n.W.event(t)},handleClickDownload:()=>{n.W.event("click_download_bar")},handleGetForPC:()=>{n.W.event("click_get_for_pc")},handleInstallApp:()=>{n.W.event("install_web_app")},handleClickGetApp:({enter_method:e})=>{n.W.event("click_get_app_for_pc",{enter_method:e})}}},78193:(e,t,i)=>{"use strict";i.d(t,{_:()=>a});var o,n=i(95872);!function(e){e.PageView="page_view",e.ClickToTop="click_to_top",e.Tap="tap",e.PageSlide="page_slide",e.GeneralClick="general_click"}(o||(o={}));const a={handlePageView:e=>{n.W.event("page_view",e)},handleToTop:()=>{n.W.event("click_to_top")},handleTap:e=>{n.W.event("tap",e)},handlePageSlide:()=>{n.W.event("page_slide")},handleGeneralClick:(e,t={})=>{n.W.event("general_click",Object.assign({section:e},t))}}},53120:(e,t,i)=>{"use strict";i.d(t,{Fx:()=>r});var o,n,a,s=i(95872);!function(e){e.Apple="apple",e.Amazon="amazon",e.Google="google",e.Download="download",e.Microsoft="microsoft"}(o||(o={})),function(e){e.Notify="download_app_notify",e.Confirm="download_app_confirm",e.Dismiss="download_app_dismiss",e.ClickAppStore="click_app_store",e.SwipeUpGuideShow="swipe_up_guide_show",e.SwipeUpGuideClose="swipe_up_guide_close"}(n||(n={})),function(e){e.XClose="x_close",e.ClickMask="click_mask",e.NotNow="not_now"}(a||(a={}));const r={handleClickAppStore:e=>{s.W.event("click_app_store",{channel:e,enter_from:"webapp_download_modal"})},handleDownloadShow:e=>{s.W.event("download_app_notify",e)},handleDownloadConfirm:e=>{s.W.event("download_app_confirm",e)},handleDownloadDismiss:e=>{s.W.event("download_app_dismiss",e)},handleNewUserGuideShow:e=>{s.W.event("swipe_up_guide_show",e)},handleNewUserGuideClose:e=>{s.W.event("swipe_up_guide_close",e)},tapDownloadConfirm:e=>{s.W.event("tap",e)}}},19813:(e,t,i)=>{"use strict";i.d(t,{W:()=>s});var o,n=i(95872),a=i(43139);!function(e){e.EnterTopicsPage="enter_topics_page",e.EnterTagDetail="enter_tag_detail",e.EnterMusicDetail="enter_music_detail",e.EnterDiscoveryPage="enter_discovery_page",e.EnterTrending="enter_homepage_hot",e.EnterUser="enter_personal_detail",e.EnterProfile="enter_personal_homepage",e.EnterVideo="enter_video_detail",e.EnterQuestion="enter_qa_detail_page",e.EnterPoi="enter_poi_detail",e.EnterSet="enter_setting_page",e.EnterFollowing="enter_homepage_follow",e.EnterSuicidePrevention="tns_show_ssh_tips_support_page",e.EnterLive="enter_live_detail",e.EnterBusiness="enter_business_suite",e.EnterAnalytics="click_insight",e.EnterLiveDiscover="enter_live_discover",e.EnterKeyboardShortcut="enter_keyboard_setting",e.EnterMessage="enter_homepage_message",e.EnterMusicPlaylist="enter_playlist_page",e.EnterQADetailPage="enter_qa_detail_page"}(o||(o={}));const s={handleEnterTagDetail:e=>{n.W.event("enter_tag_detail",e)},handleEnterMusicDetail:e=>{n.W.event("enter_music_detail",e)},handleDiscoveryPage:e=>{n.W.event("enter_discovery_page",e)},handleEnterTopic:e=>{n.W.event("enter_topics_page",e)},handleEnterTrending:e=>{n.W.event("enter_homepage_hot",e)},handleEnterUser:e=>{n.W.event("enter_personal_detail",e)},handleEnterProfile:e=>{n.W.event("enter_personal_homepage",e)},handleEnterVideo:e=>{n.W.event("enter_video_detail",e)},handleEnterQuestion:e=>{n.W.event("enter_qa_detail_page",e)},handleEnterSet:e=>{n.W.event("enter_setting_page",e)},handleEnterFollowing:e=>{n.W.event("enter_homepage_follow",e)},handleEnterSuicidePrevention:e=>{n.W.event("tns_show_ssh_tips_support_page",e)},handleEnterLive:e=>{n.W.event("enter_live_detail",e)},handleEnterBusiness:()=>{n.W.event("enter_business_suite")},handleEnterLiveDiscover:e=>{n.W.event("enter_live_discover",e)},handleEnterKeyboardShortcut:()=>{n.W.event("enter_keyboard_setting")},handleEnterMessage:e=>{n.W.event("enter_homepage_message",Object.assign({enter_method:"click_button"},e))},handleEnterMusicPlaylist:e=>{n.W.event("enter_live_discover",e)},handleEnterQADetailPage:e=>{n.W.event("enter_qa_detail_page",e)},handleEnterPoi:e=>{const{enter_method:t,play_mode:i,author_id:o,group_id:s,id:r,type:l,cityCode:d,countryCode:c,typeCode:p,isClaimed:u,ttTypeCode:g,ttTypeNameMedium:m,ttTypeNameSuper:h,ttTypeNameTiny:_}=e;n.W.event("enter_poi_detail",{enter_method:t,play_mode:i,author_id:o,group_id:s,poi_id:r,poi_detail_type:a.L7[null!=l?l:0],is_claimed:u?1:0,poi_city:d,poi_region_code:c,tt_poi_backend_type:`${h},${m},${_}|${g}`,poi_type_code:p})}}},17296:(e,t,i)=>{"use strict";i.d(t,{e:()=>s});var o,n,a=i(95872);!function(e){e.ClickEntry="feedback",e.Confirm="feedback_confirm",e.Continue="feedback_continue",e.Submit="feedback_submit"}(o||(o={})),function(e){e.Yes="yes",e.No="no"}(n||(n={}));const s={handleEnterFeedback:e=>{a.W.event("feedback",{feedback_type:e})},handleSubmitFeedback:()=>{a.W.event("feedback_submit")},handleFeedbackResponseClick:e=>{a.W.event("feedback_confirm",{enter_method:"click_"+(e?"yes":"no")})},handleNeedMoreHelpClick:()=>{a.W.event("feedback_continue")}}},30395:(e,t,i)=>{"use strict";i.d(t,{ZI:()=>d});var o=i(64047),n=i(57244),a=i(95872);var s,r,l;!function(e){e.ClickSignUp="click_sign_up",e.ClickLogin="click_login"}(s||(s={})),function(e){e.Qrcode="QRcode",e.Email="email",e.Username="handle",e.PhonePassword="phone",e.Sms="sms_verification",e.Repeat="repeatLogin",e.TWITTER="twitter",e.GOOGLE="google",e.FACEBOOK="facebook",e.INSTAGRAM="instagram",e.VK="vk",e.KAKAOTALK="kakaotalk",e.LINE="line",e.APPLE="apple"}(r||(r={})),function(e){e[e.Success=0]="Success",e[e.Failed=1]="Failed",e[e.Cancelled=2]="Cancelled"}(l||(l={}));let d=class{constructor(){this.setPlatform=e=>{this.platform=e},this.event=(e,t)=>{a.W.event(e,Object.assign({platform:this.platform},t))},this.loginNotify=()=>{a.W.event("login_notify")},this.LoginNotifyClose=e=>{a.W.commonParams.enter_from&&"unknown"!==a.W.commonParams.enter_from&&a.W.config({commonEventParams:{page_name:a.W.commonParams.enter_from}}),this.event("login_notify_close",e)},this.loginSubmit=e=>{this.event("login_submit",{enter_type:(null==e?void 0:e.signUp)?"click_sign_up":"click_login"})},this.loginSuccess=e=>{this.event("login_success",{enter_type:e.signUp?"click_sign_up":"click_login",is_register:e.is_register})},this.loginFailure=e=>{this.event("login_failure",{enter_type:e.signUp?"click_sign_up":"click_login",error_code:e.error_code})},this.thirdPartyLoginResult=e=>{this.event("monitor_login_thirdparty",e)},this.ageGateShow=()=>{this.event("age_gate_show",{enter_type:"click_sign_up"})},this.twoStepNotify=e=>{this.event("login_two_step_verification_notify",e)},this.twoStepSubmit=e=>{this.event("login_two_step_verification_submit",e)},this.twoStepResult=e=>{this.event("login_two_step_verification_result",e)},this.forceResetSubmit=()=>{this.event("forced_pwchange_submit")},this.forceResetSuccess=()=>{this.event("forced_pwchange_success")}}};d=(0,o.__decorate)([(0,n.G)()],d)},90012:(e,t,i)=>{"use strict";i.d(t,{R:()=>a});var o,n=i(95872);!function(e){e.EnterChatList="enter_chat_list",e.LeaveChatList="leave_chat_list",e.LeaveChat="leave_chat",e.DeleteChat="delete_chat",e.AcceptStrangerChat="accept_stranger_chat",e.ReportStrangerChat="report_stranger_chat",e.DeleteStrangerChat="delete_stranger_chat",e.SendMessage="send_message",e.FailSendMessage="fail_send_message",e.LikeMessage="like_message",e.DeleteMessage="delete_message",e.ReportMessage="report_message",e.ChatSettingClick="chat_setting_click",e.ChatMuteClick="chat_mute_click",e.ChatTopClick="chat_top_click",e.EnterStrangerChatList="enter_stranger_chat_list",e.ChangeMessagePermission="change_message_permission",e.ChangeBrandMessageStatus="change_brand_message_status",e.EnterChat="enter_chat",e.ShareHeadShow="share_head_show",e.ShareVideoToChat="share_video_to_chat",e.SearchContact="search_contact",e.ShareVideo="share_video"}(o||(o={}));const a={handleEnterChatList:e=>{n.W.event("enter_chat_list",{num:e})},handleSendMessage:e=>{n.W.event("send_message",e)},handleFailSendMessage:e=>{n.W.event("fail_send_message",e)},handleShareHeadShow:e=>{n.W.event("share_head_show",e)},handleShareVideoToChat:e=>{n.W.event("share_video_to_chat",e)},handleSearchContact:()=>{n.W.event("search_contact",{action_type:"share"})},handleLeaveChatList:()=>{n.W.event("leave_chat_list")},handleEnterStrangerChatList:()=>{n.W.event("enter_stranger_chat_list")},handleChatSettingClick:e=>{n.W.event("chat_setting_click",{conversation_id:e,chat_type:"private"})},handleChatMuteClick:({to_status:e,conversation_id:t})=>{n.W.event("chat_mute_click",{to_status:e,conversation_id:t,chat_type:"private"})},handleChatTopClick:({to_status:e,conversation_id:t})=>{n.W.event("chat_top_click",{to_status:e,conversation_id:t,chat_type:"private"})},handleDeleteChat:({is_stranger:e,conversation_id:t})=>{n.W.event("delete_chat",{is_stranger:e?1:0,conversation_id:t,chat_type:"private"})},handleEnterChat:({relation_tag:e,is_stranger:t,conversation_id:i,chat_type:o})=>{n.W.event("enter_chat",{relation_tag:e,is_stranger:t?1:0,conversation_id:i,chat_type:o})},handleAcceptStrangerChat:()=>{n.W.event("accept_stranger_chat")},handleDeleteMessage:e=>{n.W.event("delete_message",Object.assign(Object.assign({},e),{chat_type:"private"}))},handleReportMessage:e=>{n.W.event("report_message",Object.assign(Object.assign({},e),{chat_type:"private"}))},handleLikeMessage:({conversation_id:e,to_user_id:t})=>{n.W.event("like_message",{conversation_id:e,to_user_id:t,chat_type:"private"})},handleChangeMessagePermission:e=>{n.W.event("change_message_permission",{to_status:e})},handleChangeBrandMessageStatus:e=>{n.W.event("change_brand_message_status",{to_status:e})},handleLeaveChat:({relation_tag:e,is_stranger:t,conversation_id:i})=>{n.W.event("leave_chat",{relation_tag:e,is_stranger:t?1:0,conversation_id:i})}}},43139:(e,t,i)=>{"use strict";i.d(t,{L7:()=>s,B8:()=>r});var o,n,a=i(95872);!function(e){e.PoiAnchorShow="poi_anchor_show",e.PoiAnchorClick="poi_anchor_click"}(o||(o={})),function(e){e.OneColumn="one_column",e.BrowserMode="browser_mode",e.VideoDetail="video_detail",e.VideoAnchor="video_anchor",e.CommentAnchor="comment_anchor",e.ClickCaption="click_caption"}(n||(n={}));const s={1:"regional",2:"store",3:"independent"},r={handlePoiAnchorShow:e=>{a.W.event("poi_anchor_show",e)},handlePoiAnchorClick:e=>{a.W.event("poi_anchor_click",e)}}},42143:(e,t,i)=>{"use strict";i.d(t,{xq:()=>c});var o,n,a,s,r,l,d=i(95872);!function(e){e.Search="search",e.SearchResultShow="search_result_show",e.SearchResultShowVideo="search_result_show_video",e.SearchResultClick="search_result_click",e.SearchSessionFinish="search_session_finish",e.EmptySearch="empty_search",e.ClickSearch="click_search",e.EnterSearchPage="enter_search_page",e.TrendingGroupShow="trending_show",e.TrendingWordsShow="trending_words_show",e.TrendingWordsClick="trending_words_click",e.EnterSearch="enter_search"}(o||(o={})),function(e){e.ClickEnter="click_enter",e.ClickIcon="click_icon",e.ClickViewAll="click_view_all",e.Solved="_solved",e.ClickSearch="homepage_click_search"}(n||(n={})),function(e){e.EnrichSug="enrich_sug",e.NormalSug="normal_sug"}(a||(a={})),function(e){e.User="user",e.Video="video",e.General="general"}(s||(s={})),function(e){e.SearchHistory="search_history",e.SearchSug="search_sug",e.NormalSearch="normal_search"}(r||(r={})),function(e){e.NormalSearch="normal_search",e.SearchOuter="search_outer",e.SwitchTab="switch_tab",e.ClickMoreGeneralList="click_more_general_list"}(l||(l={}));const c={handleSugClick:e=>{d.W.event("trending_words_click",e)},handleSugImpression:e=>{d.W.event("trending_words_show",e)},handleSugGroupImpression:e=>{d.W.event("trending_show",e)},handleSearchEntry:()=>{d.W.event("enter_search")},handleSearchImpression:e=>{d.W.event("search_result_show",Object.assign(Object.assign({},e),{token_type:"person"}))},handleSearchVideoImpression:e=>{d.W.event("search_result_show_video",Object.assign({},e))},handleSearch:e=>{d.W.event("search",Object.assign(Object.assign({},e),{is_success:1}))},handleSearchResultClick:e=>{d.W.event("search_result_click",Object.assign({},e))},handleSearchSessionFinish:e=>{d.W.event("search_session_finish",e)},handleSearchResultEmpty:e=>{d.W.event("empty_search",Object.assign({},e))},handleClickSearch:({target:e="homepage_click_search"})=>{d.W.event("click_search",{target:e})},handleEnterSearchPage:({enter_method:e="homepage_click_search"})=>{d.W.event("enter_search_page",{enter_method:e})}}},66826:(e,t,i)=>{"use strict";i.d(t,{Y:()=>s});var o,n,a=i(95872);!function(e){e.AdsClick="ads_click"}(o||(o={})),function(e){e.ProfileImage="profile_image",e.UserName="user_name",e.HyperLink="hyperlink",e.SignUpButton="sign_up_button",e.VideoSection="video_section",e.CrossOut="cross_out",e.LikeButton="like_button",e.CommentButton="comment_button"}(n||(n={}));const s={handleAdsClick:(e,t="one_column")=>{const i=(e=>{switch(e){case"profile_image":case"user_name":case"hyperlink":case"video_section":case"sign_up_button":return 1;default:return 0}})(e);a.W.event("ads_click",{ads_type:"in_feed_ads",play_mode:t,cta_flag:i,section:e})}}},17919:(e,t,i)=>{"use strict";i.d(t,{p:()=>a});var o,n=i(95872);!function(e){e.SaveProfile="save_profile",e.ClickEditProfile="click_edit_profile",e.EditProfileNotifyShow="edit_profile_notify_show",e.CancelEditProfile="cancel_edit_profile",e.CancelEditProfileShow="cancel_edit_profile_show"}(o||(o={}));const a={handleSaveReport:e=>{n.W.event("save_profile",e)},handleClickEditProfile:e=>{n.W.event("click_edit_profile",e)},handleShowProfileTooltip:e=>{n.W.event("edit_profile_notify_show",e)},handleCancelEditProfile:e=>{n.W.event("cancel_edit_profile",e)},handleCloseProfileTooltip:e=>{n.W.event("cancel_edit_profile_show",e)}}},31222:(e,t,i)=>{"use strict";i.d(t,{KF:()=>r});var o,n=i(64047),a=i(57244),s=i(95872);!function(e){e.PageFCP="page_content_paint",e.FirstScreen="first_screen_video",e.FirstFrame="first_frame_video",e.InteractAddition="interact_additional_video_end",e.InteractExisted="interact_existed_video_end",e.RouteChange="video_route_change",e.InteractAdditionStart="interact_additional_video_start",e.InteractExistedStart="interact_existed_video_start",e.SwiperSlideTransitionEnd="swiper_slide_transition_end"}(o||(o={}));let r=class{constructor(){this.additionQueue=[],this.existedQueue=[],this.firstLoadReport=!1,this.shouldFirstLoadReportSkip=!1,this.firstFrameReport=!1,this.currentPageReport=!1,this.currentPage="",this.reportedCanPlayVideoSource="",this.reportedPlayingVideoSource="",this.reportedScrollPrevIndex=-1,this.reportedScrollCurrIndex=-1,this.slideTransitionExsitedQueue=[],this.emit=(e,t)=>{try{s.W.event(e,t)}catch(e){console.error(`Video Scene Evnet Tea Report Error: ${e}`)}},this.reportVideoPageFCP=e=>{this.emit("page_content_paint",e)},this.reportVideoFirstScreen=e=>{const{endTime:t,videoSource:i}=e;if(!this.firstLoadReport){if(this.firstLoadReport=!0,this.currentPageReport=!0,!this.checkIfCanReportFirstPlay()||this.shouldFirstLoadReportSkip)return;const e=()=>!(window&&!window.MediaSource)&&((null===window||void 0===window?void 0:window.MediaSource.isTypeSupported('video/mp4;codecs="hev1.1.6.L120.90"'))||(null===window||void 0===window?void 0:window.MediaSource.isTypeSupported('video/mp4;codecs="hev1.2.4.L120.90"'))||(null===window||void 0===window?void 0:window.MediaSource.isTypeSupported('video/mp4;codecs="hev1.3.E.L120.90"'))||(null===window||void 0===window?void 0:window.MediaSource.isTypeSupported('video/mp4;codecs="hev1.4.10.L120.90"'))),o=performance.timeOrigin||performance.timing.navigationStart,n={duration:Math.round(t-o),to_page:this.currentPage,can_use_hevc:e()?1:0};this.emit("first_screen_video",n),this.resetAddition(),this.setReportVideoSource(i,0)}},this.reportVideoFirstFrame=e=>{if(e&&!this.firstFrameReport){if(this.firstFrameReport=!0,!this.checkIfCanReportFirstFrame())return;const e=performance.timeOrigin||performance.timing.navigationStart,t={duration:Math.round(Date.now()-e),to_page:this.currentPage};this.emit("first_frame_video",t)}},this.reportVideoAddition=e=>{const t=this.additionQueue[0],{endTime:i,videoSource:o}=e;if(this.isEmptyEvent(t)||this.checkIfHasReported(o,0))return;const{startTime:n=0,situation:a="",from_page:s=""}=t,r=this.currentPage;if(!this.currentPageReport&&s!==r){this.currentPageReport=!0;const e={situation:a,from_page:s,to_page:r,duration:i-n};this.emit("interact_additional_video_end",e),this.resetAddition(),this.setReportVideoSource(o,0)}},this.reportVideoInteract=e=>{const t=this.existedQueue[0]||{},{startTime:i=0,situation:o="",from_page:n=""}=t,{endTime:a,videoSource:s}=e;if(this.isEmptyEvent(t)||this.checkIfHasReported(s,1)&&"open_browser_mode"!==o)return;const r={situation:o,from_page:n,to_page:this.currentPage,duration:a-i};this.emit("interact_existed_video_end",r),this.resetExist(),this.setReportVideoSource(s,1)},this.reportVideoAdditionStart=e=>{const{situation:t,startTime:i}=e;this.currentPageReport=!1,this.additionQueue=[{startTime:i,situation:t,from_page:this.currentPage}]},this.reportVideoInteractStart=e=>{var t;const i=this.existedQueue[0];if(!this.isEmptyEvent(i)){const{situation:o=""}=i;if((null!==(t=e.situation)&&void 0!==t?t:"").indexOf("one_column_scroll")>-1&&o.indexOf("browser_mode")>-1)return}const{startTime:o,situation:n,currVideoIndex:a,prevVideoIndex:s,enterMethod:r}=e;if(a&&a>0&&a===this.reportedScrollCurrIndex&&s===this.reportedScrollPrevIndex)return;const l=this.currentPage;this.existedQueue=[{startTime:o,situation:n,from_page:l}];const d={situation:n,from_page:this.currentPage,enter_method:r};this.emit("interact_existed_video_start",d),this.reportedScrollCurrIndex=null!=a?a:-1,this.reportedScrollPrevIndex=null!=s?s:-1},this.reportSlideTransitionStart=e=>{const{from_page:t,start_time:i,current_index:o}=e;this.slideTransitionExsitedQueue=[{from_page:t,start_time:i,current_index:o}]},this.reportSlideTransitionEnd=e=>{const t=this.slideTransitionExsitedQueue[0]||{},{from_page:i,start_time:o,current_index:n}=t,{from_page:a,end_time:s,current_index:r}=e;if(this.isEmptyEvent(t)||a!==i||r===n)return;const l={from_page:a,situation:r-n>0?"swiper_slide_next":"swiper_slide_prev",duration:s-o};this.emit("swiper_slide_transition_end",l),this.slideTransitionExsitedQueue=[]},this.updateCurrentPage=e=>{this.currentPage=e},this.setReportVideoSource=(e,t)=>{0===t?this.reportedCanPlayVideoSource=e:this.reportedPlayingVideoSource=e},this.setCurrentPageReport=e=>{this.currentPageReport=e},this.getCurrentPageReport=()=>this.currentPageReport,this.getFirstLoadReport=()=>this.firstLoadReport,this.getFirstFrameReport=()=>this.firstFrameReport,this.isEmptyEvent=e=>!e||0===Object.keys(e).length,this.checkIfCanReportFirstPlay=()=>l.indexOf(this.currentPage)>-1&&performance,this.checkIfCanReportFirstFrame=()=>d.indexOf(this.currentPage)>-1&&performance,this.checkIfHasReported=(e,t)=>(0===t?this.reportedCanPlayVideoSource:this.reportedPlayingVideoSource)===e,this.resetAddition=()=>this.additionQueue=[],this.resetExist=()=>this.existedQueue=[],this.handleUserChangeVideoOrPlayMode=()=>{this.shouldFirstLoadReportSkip=!0},this.handleRouteChange=e=>{this.currentPage&&e&&(this.shouldFirstLoadReportSkip=!0)}}};r=(0,n.__decorate)([(0,a.G)()],r);const l=["homepage_hot","homepage_hot_h5","homepage_following","others_homepage","challenge","single_song","video_detail","video_detail_h5"],d=["homepage_hot","homepage_follow","others_homepage","challenge","video_detail","single_song"];var c;!function(e){e.BrowserModeNext="browser_mode_next",e.BrowserModePrev="browser_mode_prev",e.OneColumnScrollNext="one_column_scroll_next",e.OneColumnScrollPrev="one_column_scroll_prev",e.OpenBrowserMode="open_browser_mode",e.AdditionFirstLoad="addition_first_load",e.SwiperSlideNext="swiper_slide_next",e.SwiperSlidePrev="swiper_slide_prev",e.ThreeColumnUserHover="three_column_user_hover",e.ThreeColumnUserTouch="three_column_user_touch",e.VideoDatailSelect="video_detail_select"}(c||(c={}))},79789:(e,t,i)=>{"use strict";i.d(t,{k:()=>I});var o,n,a,s,r,l,d=i(64047),c=i(57244),p=i(95872),u=i(90293);!function(e){e[e.HaveNothing=0]="HaveNothing",e[e.HaveMetaData=1]="HaveMetaData",e[e.HaveCurrentData=2]="HaveCurrentData",e[e.HaveFutureData=3]="HaveFutureData",e[e.HaveEnoughData=4]="HaveEnoughData"}(o||(o={})),function(e){e[e.Public=0]="Public",e[e.Self=1]="Self",e[e.Friend=2]="Friend"}(n||(n={})),function(e){e[e.PlayStop=0]="PlayStop",e[e.ResumePlaying=1]="ResumePlaying"}(a||(a={})),function(e){e.FeedRequest="feed_request",e.FeedRequestResponse="feed_request_response"}(s||(s={})),function(e){e.LoadMore="load_more"}(r||(r={})),function(e){e.PlayQuality="video_play_quality",e.PlayEnded="video_play_end",e.PlayFailed="video_play_failed",e.BlockStart="video_block_start",e.Block="video_block",e.Request="video_request",e.RequestResponse="video_request_response",e.FirstFrame="first_feed_show_time"}(l||(l={}));const g={0:"one_column",1:"three_column",2:"browser_mode",3:"swiper_mode",4:"video_detail",6:"pip",5:"fullscreen"},m=e=>e&&Array.isArray(e)?e.map((e=>{var t;return null!==(t=e.GearName)&&void 0!==t?t:"unknown"})):null,h=e=>e&&Array.isArray(e)?e.map((e=>`${e.QualityType}:${e.Bitrate}`)):null,_=()=>{var e,t;return{cpu_core:null!==(e=null===navigator||void 0===navigator?void 0:navigator.hardwareConcurrency)&&void 0!==e?e:0,memory_size:null!==(t=null===navigator||void 0===navigator?void 0:navigator.deviceMemory)&&void 0!==t?t:0}},v=e=>void 0!==e&&e.length>0?1e3*Math.round(e.end(0)-e.start(0)):0,y=(e,t)=>e?2:t?1:0,b=e=>{var t,i;return e?null!==(i=null===(t=(0,u.parse)(e).lr)||void 0===t?void 0:t.toString())&&void 0!==i?i:"none":"unknown"},f=(e="")=>{if(!e)return"";const t=e.match(/https?:\/\/([^/]+)\//i);let i="";return(null==t?void 0:t[1])&&(i=t[1]),i},x=e=>{if(!e||"string"!=typeof e)return 0;let t=0;try{const i=new RegExp("(\\?|&)expire=([^&]*)(&|$)"),o=e.match(i);if(null!==o)t=parseInt(o[2],10);else{const i=e.split("/");i.length>5&&8===i[4].length&&(t=parseInt(i[4],16))}return t>0?t<parseInt(String((new Date).getTime()/1e3),10)?1:2:0}catch(e){return 0}},k=e=>{var t;const{id:i,authorId:o,playMode:n,currentSrc:a="",forFriend:s=!1,secret:r=!1,play_url:l,awemeType:d,picCnt:c}=e;return{group_id:i,author_id:o,play_mode:null!==(t=g[n])&&void 0!==t?t:"others",logo_type:b(a),item_status:y(s,r),play_url:l,host:f(l),aweme_type:null!=d?d:0,pic_cnt:c}},w=(e,t)=>{const i=(e=>!e||/^(\d)*p$/i.test(`${e}`))(t);return i?e&&t?`${e}_${t}`:`unknownQuality_fromServer_${e}_${t}`:t},S=e=>{const{bitrate:t=-1,format:i="",codecType:o="",encodedType:n="",videoQuality:a="",definition:s="",encodeUserTag:r="",originalDefinition:l=""}=e;return{video_bitrate:t,video_format:i,codec_format:o,encoded_type:n,bitrate_quality:a,video_quality:String(w(a,s)),video_encodeUserTag:r,original_definition:l}},C=e=>{const{preload_size:t=-1,preload_time:i=-1,video_type:o="mp4",player_type:n="defaultPlayer"}=e;return{preload_size:t,preload_time:i,player_type:n,video_type:o}},j=e=>{const{totalWatchCount:t,foruWatchCount:i}=e;return{watch_count_total:t,watch_count_foru:i}};var P=i(69405);const T={isPause:null,isVideoLoaded:!1,isFirstPlayReported:!1,isFirstPlayEndReported:!1,isInPlaybackStage:!1,triggerPlayTimestamp:0,firstTriggerPlayTimestamp:0,loadStartTimestamp:0,blockStartTimestamp:0,blockStartProgress:0,playingStartTimestamp:0,pauseStartTimestamp:0,totalPauseDuration:0,volume:0,muted:!0,mutedStateChange:!1},O={currentSrc:"",duration:0,error:null,currentTime:0,readyState:0,buffered:{start:()=>0,end:()=>0,length:0},volume:0,muted:!0,mutedStateChange:!1};let L=1,I=class{constructor(){this.innerStates=Object.assign({},T),this.innerVideoAttributeStates=Object.assign({},O),this.isFirstFrameReported=!1,this.currentVideoId="",this.setCurrentVideoId=e=>{this.currentVideoId=e},this.resetState=()=>{this.innerStates=Object.assign({},T),this.currentVideoId="",this.isFirstFrameReported=!1,this.innerVideoAttributeStates=Object.assign({},O)},this.resetStateWhenSlideChange=()=>{this.innerStates=Object.assign({},T),this.innerVideoAttributeStates=Object.assign({},O)},this.reset=(e,t)=>{this.currentVideoId!==e&&(this.playEndEvent(t),this.blockEndEvent(Object.assign(Object.assign({},t),{endType:0})),this.innerStates=Object.assign({},T))},this.resetWhenSlideChange=e=>{this.playEndEvent(Object.assign(Object.assign({},e),this.innerVideoAttributeStates)),this.blockEndEvent(Object.assign(Object.assign(Object.assign({},e),{endType:0}),this.innerVideoAttributeStates)),this.innerVideoAttributeStates=Object.assign({},O)},this.handlePlay=()=>{this.innerStates.triggerPlayTimestamp=Date.now();const{firstTriggerPlayTimestamp:e}=this.innerStates;e||(this.innerStates.firstTriggerPlayTimestamp=Date.now())},this.handlePause=e=>{const{id:t}=e,{playingStartTimestamp:i,isPause:o}=this.innerStates;t&&i&&!o&&(this.innerStates.pauseStartTimestamp=Date.now()),this.innerStates.isPause=!0},this.handleTimeUpdate=e=>{const{triggerPlayTimestamp:t,isFirstPlayReported:i,pauseStartTimestamp:o}=this.innerStates,{currentTime:n=0,duration:a=0,codecType:s,volume:r=0,muted:l=!0,bitrateInfo:d,buffered:c,currentSrc:u,error:g,readyState:v}=e;if(this.innerVideoAttributeStates.duration=a,this.innerVideoAttributeStates.currentTime=n,this.innerVideoAttributeStates.buffered=c,this.innerVideoAttributeStates.currentSrc=u,this.innerVideoAttributeStates.error=g,this.innerVideoAttributeStates.readyState=v,!(n<=0)){if(!i&&0!==t){const i=Date.now()-t-1e3*n,o=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},k(e)),S(e)),C(e)),j(e)),_()),{duration:Math.round(i),video_duration:Math.round(1e3*a),is_bytevc1:(null!=s?s:"").indexOf("h265")>-1?1:0,muted:l?1:0,bitrate_set:m(d),quality_bitrate:h(d)});p.W.event("video_play_quality",o),this.innerStates.isFirstPlayReported=!0,this.innerStates.playingStartTimestamp=Date.now(),this.innerStates.volume=r,this.innerStates.muted=l}if(this.innerStates.mutedStateChange=this.innerStates.mutedStateChange||this.innerStates.muted!==l,this.innerStates.muted=l,!this.isFirstFrameReported&&performance&&this.firstFrameEvent(),this.innerStates.isPause){const e=o?Date.now()-o:0;this.innerStates.totalPauseDuration+=e}this.blockEndEvent(Object.assign(Object.assign({},e),{endType:1})),this.innerStates.isInPlaybackStage=!0,this.innerStates.isPause=!1}},this.handleEnded=()=>{this.innerStates.isInPlaybackStage=!1},this.handleError=e=>{const{isVideoLoaded:t,isInPlaybackStage:i}=this.innerStates,{error:o,codecType:n="",duration:a,play_url:s}=e,{code:r=0,message:l=""}=null!=o?o:{};if(t&&i){const t=s?x(s):-1,i=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},k(e)),S(e)),j(e)),_()),{error_code:String(r),error_info:l,is_bytevc1:n.indexOf("h265")>-1?1:0,duration:null!=a?a:0,isExpired:t});p.W.event("video_play_failed",i)}else this.responseEvent(e)},this.handleWaiting=e=>{const{currentTime:t=0,duration:i=0}=e,{isInPlaybackStage:o,blockStartTimestamp:n,isPause:a}=this.innerStates;if(0!==t&&t!==i&&o&&!1===a&&0===n){const i=Object.assign(Object.assign(Object.assign({},k(e)),j(e)),_());p.W.event("video_block_start",i),this.innerStates.blockStartTimestamp=Date.now(),this.innerStates.blockStartProgress=1e3*t}},this.handleLoadStart=e=>{const t=Object.assign(Object.assign(Object.assign(Object.assign({},k(e)),j(e)),_()),(0,P.G4)(e));p.W.event("video_request",t),this.innerStates.loadStartTimestamp=Date.now()},this.handleLoadedData=e=>{this.responseEvent(e),this.innerStates.isVideoLoaded=!0},this.videoFeedRequestEvent=()=>{p.W.event("feed_request",{request_method:"load_more"})},this.videoFeedResponseEvent=e=>{const{duration:t,list_length:i}=e,o={duration:t,is_success:i?"1":"0",request_method:"load_more",video_num:i};p.W.event("feed_request_response",o)},this.firstFrameEvent=()=>{const e=performance.timeOrigin,t={feed_total:e?Math.round(Date.now()-e):-1};p.W.event("first_feed_show_time",t),this.isFirstFrameReported=!0}}blockEndEvent(e){const{currentTime:t=0,codecType:i,endType:o,should_filter:n=!1}=e,{blockStartTimestamp:a,blockStartProgress:s,isInPlaybackStage:r,isVideoLoaded:l}=this.innerStates;if(l&&r&&0!==a&&(1e3*t!==s||0===o)){const r=Date.now()-a-(1e3*t-s),l=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},k(e)),S(e)),C(e)),_()),{duration:Math.round(r),is_bytevc1:(null!=i?i:"").indexOf("h265")>-1?1:0,end_type:o,position:Math.round(1e3*t),should_filter:n?"1":"0"});p.W.event("video_block",l),this.innerStates.blockStartTimestamp=0}}responseEvent(e){const{loadStartTimestamp:t}=this.innerStates,{error:i,videoQuality:o,definition:n,play_url:a}=e,s=a?x(a):-1,r=Date.now()-t,l=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},k(e)),_()),j(e)),{error_code:String(null==i?void 0:i.code),duration:r,is_success:i?"0":"1",video_quality:o&&n?`${o}_${n}`:""}),(0,P.G4)(e)),{isExpired:s});p.W.event("video_request_response",l)}playEndEvent(e){const{isFirstPlayReported:t,isFirstPlayEndReported:i,playingStartTimestamp:o,totalPauseDuration:n,firstTriggerPlayTimestamp:a,volume:s}=this.innerStates;if(!i){const{buffered:i,duration:r=0,currentTime:l=0,readyState:d,volume:c=0,muted:u}=e,g=o?Date.now()-o-n:0,m=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},k(e)),S(e)),C(e)),_()),{is_success:t?"1":"0",video_duration:isNaN(r)?0:Math.round(1e3*r),play_duration:Math.round(1e3*l),buffering:(null!=d?d:0)<=2?1:0,duration:g>=0?Math.round(g):0,wait_duration:o>0?null:Date.now()-a,cur_cache_duration:v(i),local_time_ms:Date.now(),volume_level:Number(c.toFixed(4)),volume_change:t?Number((c-s).toFixed(4)):0,muted:u?1:0,click_mute:this.innerStates.mutedStateChange?u?2:1:0,session_order:L++});p.W.event("video_play_end",m),this.innerStates.isFirstPlayEndReported=!0}}};I=(0,d.__decorate)([(0,c.G)()],I)},98224:(e,t,i)=>{"use strict";i.d(t,{W:()=>s});var o,n,a=i(95872);!function(e){e.RemovePhotosensitiveStatus="tns_remove_photosensitive_status",e.ShowMaskLayer="tns_show_mask_layer",e.ShowPhotosensitiveRemoved="tns_show_photosensitive_removed",e.MaskLayerClickSkip="tns_mask_layer_click_skip",e.MaskLayerClickWatch="tns_mask_layer_click_watch"}(o||(o={})),function(e){e.General="general",e.Photosensitive="photosensitive"}(n||(n={}));const s={handleRemovePhotosensitiveStatus:e=>{a.W.event("tns_remove_photosensitive_status",{status:e})},handleShowMaskLayer:e=>{a.W.event("tns_show_mask_layer",e)},handleShowPhotosensitiveRemoved:e=>{a.W.event("tns_show_photosensitive_removed",e)},handleMaskLayerClickSkip:e=>{a.W.event("tns_mask_layer_click_skip",e)},handleMaskLayerClickWatch:e=>{a.W.event("tns_mask_layer_click_watch",e)}}},69405:(e,t,i)=>{"use strict";i.d(t,{G4:()=>c,ec:()=>p});var o,n,a=i(64047),s=i(57244),r=i(90293),l=i(95872),d=i(17130);!function(e){e.Play="video_play",e.Finish="video_play_finish",e.Stop="play_time",e.SchedulePlay="schedule_video_play",e.ScheduleFinish="schedule_video_play_finish",e.ScheduleStop="schedule_video_play_time",e.PreviewVideoPlay="preview_video_play",e.PreviewVideoFinish="preview_video_play_finish",e.PreviewVideoStop="preview_play_time",e.Pause="video_pause"}(o||(o={})),function(e){e.ClickPause="click_pause",e.Slide="slide",e.Keyboard="keyboard"}(n||(n={}));const c=e=>{const{isAds:t,adsType:i}=e;return{is_ads:t,ads_type:i}};let p=class{constructor(){this.isFirstPlayReported=!1,this.isFirstPlayEndReported=!1,this.isPause=!1,this.startPlayTimestamp=0,this.enterMethod="",this.prevReportId="",this.videoFocusTime=0,this.isThreeColumnAuto=!1,this.isVideoDetail=!1,this.isDarkMode=!1,this.setEnterMethod=e=>{this.enterMethod=e},this.setIsDarkMode=e=>{this.isDarkMode=e},this.setIsThreeColumnAuto=e=>{this.isThreeColumnAuto=e},this.setIsVideoDetail=e=>{this.isVideoDetail=e},this.reset=()=>{this.isFirstPlayReported=!1,this.isFirstPlayEndReported=!1},this.updateVideoFocusTime=e=>{const{isPause:t,startPlayTimestamp:i}=this,{ttWebappFocusTime:o}=window;!t&&o&&(this.videoFocusTime+=o>i?e-o:e-i)},this.handlePlayTime=e=>{this.playTimeEvent(e)},this.handleTimeUpdate=(e,t=!1)=>{const{isFirstPlayReported:i,startPlayTimestamp:o,enterMethod:n}=this,{itemId:a,authorId:s,isScheduled:r,autoplayStatus:d=0,currentTime:p,searchId:u="",searchKeyword:g,searchResultId:m,questionId:h,playMode:_,isMute:v=!1,fromTab:y,hasSubtitle:b,captionsShowType:f,collectionId:x,collectionName:k,isPaidPartnership:w=!1,poiId:S,awemeType:C,picCnt:j}=e;if(!p)return;const P="1"===b?{has_subtitle:b,captions_show_type:f}:{has_subtitle:b};let T=null;if(!i){const i=Object.assign(Object.assign(Object.assign({group_id:a,author_id:s,play_mode:this.getPlayModeForTea(_),autoplay_status:d,enter_method:n,search_id:u,search_keyword:g,search_result_id:m,question_id:h,from_tab:y,is_dark:this.isDarkMode?"1":"0",collection_id:x,collection_name:k,poi_id:S,aweme_type:null!=C?C:0,pic_cnt:j},P),this.getExtraParams()),c(e)),o=r?"schedule_video_play":1===_?"preview_video_play":"video_play",p=t&&this.prevReportId===a;"video_play"===o&&(i.is_mute=v?"1":"0",i.is_partnership=w?"1":"0"),p||(T=o,l.W.event(o,i),this.isFirstPlayReported=!0,this.prevReportId=a)}return 0===o&&this.setStartPlay(),this.isPause=!1,T},this.handleEnded=e=>{this.playFinishEvent(e)},this.handlePause=e=>{const{currentTime:t,duration:i}=e;i!==t&&this.playTimeEvent(e),this.isPause=!0},this.handleWaiting=e=>{const{currentTime:t,duration:i}=e;0!==t&&t!==i&&this.playTimeEvent(e)},this.handleError=e=>{this.playTimeEvent(e)},this.triggerPause=e=>{if(!this.isPause){const{enter_method:t,playMode:i,aweme_type:o=0,pic_cnt:n}=e,a={enter_method:t,play_mode:this.getPlayModeForTea(i),aweme_type:o,pic_cnt:n};l.W.event("video_pause",a)}this.isPause=!0},this.triggerPlay=()=>{this.isPause=!1},this.handleAudioPlay=e=>{this.prevReportId=e}}getPlayModeForTea(e){let t="others";switch(e){case 2:t="browser_mode";break;case 0:t=this.isVideoDetail?"others":"one_column";break;case 1:t=this.isThreeColumnAuto?"list_auto":"list_mouse_trigger";break;case 3:t="swiper_mode";break;case 4:t="video_detail";break;case 6:t="pip";break;case 5:t="fullscreen"}return t}setStartPlay(){this.startPlayTimestamp=Date.now(),this.videoFocusTime=0}playFinishEvent(e){const{isFirstPlayEndReported:t,enterMethod:i}=this,{itemId:o,authorId:n,isScheduled:a,autoplayStatus:s=0,searchId:r="",searchKeyword:d,searchResultId:p,playMode:u,isMute:g,collectionId:m,collectionName:h,poiId:_,awemeType:v,picCnt:y}=e;if(!t){const t=Object.assign(Object.assign({group_id:o,author_id:n,play_mode:this.getPlayModeForTea(u),autoplay_status:s,enter_method:i,search_id:r,search_keyword:d,search_result_id:p,collection_id:m,collection_name:h,poi_id:_,aweme_type:null!=v?v:0,pic_cnt:y,is_dark:this.isDarkMode?"1":"0"},this.getExtraParams()),c(e));void 0!==g&&(t.is_mute=g?"1":"0");const b=a?"schedule_video_play_finish":1===u?"preview_video_play_finish":"video_play_finish";l.W.event(b,t),this.isFirstPlayEndReported=!0}}playTimeEvent(e){const{startPlayTimestamp:t,enterMethod:i,videoFocusTime:o}=this,{itemId:n,authorId:a,isScheduled:s,autoplayStatus:r=0,searchId:p="",searchKeyword:u,searchResultId:g,questionId:m,playMode:h,isMute:_,fromTab:v,hasSubtitle:y,captionsShowType:b,collectionId:f,collectionName:x,poiId:k,awemeType:w,picCnt:S}=e,{ttWebappFocusTime:C,ttWebappBlurTime:j}=window;let P=0;const T=Date.now();C?P=C<t?T-t:o+T-C:j&&(P=j>t?o:0);const O="1"===y?{has_subtitle:y,captions_show_type:b}:{has_subtitle:y};if(0!==t){const o=Object.assign(Object.assign(Object.assign(Object.assign({group_id:n,author_id:a,play_mode:this.getPlayModeForTea(h),autoplay_status:r,duration:Math.max(T-t,0),enter_method:i,search_id:p,search_keyword:u,search_result_id:g,question_id:m,focus_time:P,from_tab:v,is_dark:this.isDarkMode?"1":"0",collection_id:f,collection_name:x,poi_id:k,aweme_type:null!=w?w:0,pic_cnt:S},O),this.getExtraParams()),d.r.getScreenRatio()),c(e));void 0!==_&&(o.is_mute=_?"1":"0");const y=s?"schedule_video_play_time":1===h?"preview_play_time":"play_time";l.W.event(y,o),this.startPlayTimestamp=0}}getExtraParams(){var e;const{href:t,search:i}=window.location;return{is_from_webapp:null!==(e=(0,r.parse)(i).is_from_webapp)&&void 0!==e?e:"0",page_url:t}}};p=(0,a.__decorate)([(0,s.G)()],p)},17130:(e,t,i)=>{"use strict";i.d(t,{r:()=>a});var o,n=i(95872);!function(e){e.LoadMore="load_more",e.SlideUp="video_slide_up",e.SlideDown="video_slide_down",e.EnterBrowserMode="feed_enter",e.BrowserModeExit="feed_exit",e.BrowserAdjustSize="browser_size_adjust",e.CloseWindow="close_window",e.HotSlideUp="homepage_hot_slide_up",e.HotSlideDown="homepage_hot_slide_down"}(o||(o={}));const a={handleListMore:e=>{n.W.event("load_more",e)},handleVideoChange:(e,t)=>{const i="next"===t?"video_slide_up":"video_slide_down";n.W.event(i,e)},handleHotVideoChange:(e,t)=>{const i="next"===t?"homepage_hot_slide_up":"homepage_hot_slide_down";n.W.event(i,e)},handleEnterBrowser:e=>{n.W.event("feed_enter",e)},handleEnterBrowserOpt:e=>{n.W.event("feed_enter",e)},handleExitBrowser:e=>{n.W.event("feed_exit",e)},handleAdjustBrowserSize:e=>{n.W.event("browser_size_adjust",e)},handleCloseWindow:e=>{n.W.event("close_window",e)},getScreenRatio:()=>{const e=screen.height,t=screen.width,i=window.innerWidth,o=window.innerHeight;return{width:i,height:o,width_max:t,height_max:e,height_ratio:o/e,width_ratio:i/t}}}},24376:(e,t,i)=>{"use strict";i.d(t,{hw:()=>o,Gb:()=>n,lF:()=>a,HW:()=>s,vN:()=>r,m8:()=>l,eL:()=>d,WD:()=>c,a9:()=>p,Ji:()=>u});const o="webapp_launch_mode",n="webapp_original_traffic_type",a="webapp_extra_data",s="webapp_session_id",r="webapp_tiktok_open",l="webapp_tiktok_privious",d="others",c="direct",p=/h5_t|h5_m|landing_page|webapp/,u=/embed/},95872:(e,t,i)=>{"use strict";i.d(t,{W:()=>c});var o=i(63747),n=i.n(o),a=i(77966),s=i(24376),r=i(85782),l=i(41279),d=i(73726);const c=new class{constructor(e=i(62219).Z,t=[],o=!1,n={}){this.instance=e,this.missEventsCaches=t,this.initialized=o,this.baseConfig=n,this.commonEventParams={},this.exposedExperiments=new Set,this.webExperimentExposeCallback=(e,t)=>{t&&this.exposedExperiments.add(e)}}get commonParams(){return this.commonEventParams}get isOff(){return!1}get isDebugOn(){return!1}get initDimensionalData(){return this.dimensionalData||(this.dimensionalData=this.getDimensionalData()),this.dimensionalData}config(e){const{initConfig:t,commonHeaderConfig:i,commonEventParams:o}=e;if(this.initialized||this.init(t),i){const e=(0,r.pm)();this.baseConfig=n()(this.baseConfig,i,{evtParams:{page_name:o.page_name,enter_from:o.enter_from,object_id:e.object_id}}),this.instance.config(this.baseConfig)}o&&(this.commonEventParams=Object.assign(Object.assign({},this.commonEventParams),o))}beconEvent(e,t={}){if(this.initialized&&!this.isOff)try{this.instance.beconEvent(e,Object.assign(Object.assign({},this.commonEventParams),t))}catch(e){}}event(e,t={}){if(this.isOff)return;if(!this.initialized)return void this.missEventsCaches.push([e,t]);let i=Object.assign(Object.assign({},this.commonEventParams),t);try{this.isDebugOn&&(console.log(`[tea]: ${e}`),console.log(i)),this.instance.event(e,i),this.missEventsCaches.length&&(this.missEventsCaches.forEach((t=>{i=Object.assign(Object.assign({},this.commonEventParams),t[1]),this.instance.event(t[0],i),this.isDebugOn&&(console.log(`[tea]: send cached event-${e}`),console.log(i))})),this.missEventsCaches.length=0)}catch(e){}}setDomain(e){this.instance.setDomain(e),this.instance.event("reactive_domain")}resetStayDuration(e,t,i){this.instance.resetStayDuration(e,t,i)}getDimensionalData(){var e;const t=(0,r.pm)();"microsoft-store"!==t["app-install-source"]&&"app-info://platform/microsoft-store"!==document.referrer||(t.source="msft");const{traffic_type:i,referer_video_id:o,refer:n,source:c="",referer_url:p}=t,u=(null!==(e=new RegExp(`${location.origin}/(@?\\w+)`).exec(document.referrer))&&void 0!==e?e:[])[1],g=(0,a.W7)(navigator.userAgent)?"mobile":"pc",m=(0,l.R)(),h=(0,d.cf)();return(0,r.Gl)(t),this.dimensionalData={device:g,launch_mode:h,traffic_type:null!=i?i:m,source:s.a9.test(c)?"":c,referer_video_id:o,utm_source:t.utm_source,utm_medium:t.utm_medium,utm_campaign:t.utm_campaign,utm_term:t.utm_term,utm_content:t.utm_content,embed_source:t.embed_source,referer_url:p?decodeURIComponent(p):(null==n?void 0:n.replace(s.Ji,""))||u||document.referrer||s.WD},this.dimensionalData}getSessionId(e){let t=(0,r.St)(s.HW);return t||(t=e+Date.now().toString(),(0,r.D9)("webapp_session_id",t)),t}getLandingPage(e){const t=(0,r.St)(s.vN);return t?(this.commonEventParams.is_landing_page=0,t):(this.commonEventParams.is_landing_page=1,(0,r.D9)(s.vN,e),e)}getPreviousInfo(e){var t;let i={};try{i=JSON.parse(null!==(t=(0,r.St)(s.m8))&&void 0!==t?t:"null")||{}}catch(e){i={}}return location.href!==i.href||e!==i.pageName?((0,r.D9)(s.m8,JSON.stringify({href:location.href,pageName:e,twoPrev:i.pageName,twoPrevHref:i.href})),i.pageName):i.twoPrev}getVar(e,t){var i;const o=this.webExperimentExposeCallback.bind(null,e);return this.exposedExperiments.has(e)||this.instance.getVar(e,t,o),(null===(i=this.webExperiments)||void 0===i?void 0:i.values)&&this.webExperiments.values[e]||{}}getVarWithCb(e,t,i){this.instance.getVar(e,t,i)}initWebExperiments(){this.instance.getAllVars((e=>{this.webExperiments={values:e,isReady:!0}}))}init(e){var t;this.instance.init({site_name:"",enable_ttwebid:!0,channel_domain:e.channel_domain,app_id:e.id,enable_stay_duration:null===(t=e.enable_stay_duration)||void 0===t||t,channel_type:"tcpy",enable_ab_test:!0,ab_channel_domain:e.ab_channel_domain||e.channel_domain,commonParams:{page_type:!0}}),this.initialized=!0,this.instance.start(),this.initWebExperiments()}}},85782:(e,t,i)=>{"use strict";i.d(t,{pm:()=>n,Gl:()=>a,St:()=>s,D9:()=>r});var o=i(90293);function n(){if("undefined"==typeof document)return{};const e=(0,o.parse)(location.search,{arrayFormat:"bracket"});return Object.keys(e).forEach((t=>{var i,o;"string"!=typeof e[t]&&(e[t]=null!==(o=null===(i=e[t])||void 0===i?void 0:i[0])&&void 0!==o?o:"")})),e}function a(e){["utm_source","utm_medium","utm_campaign","utm_term","utm_content","referer_url","referer_video_id"].forEach((t=>{var i;e[t]&&r(t,null!==(i=e[t])&&void 0!==i?i:"")}))}function s(e,t=""){var i;try{return null!==(i=sessionStorage.getItem(e))&&void 0!==i?i:t}catch(e){return t}}function r(e,t){try{sessionStorage.setItem(e,t)}catch(e){}}},73726:(e,t,i)=>{"use strict";i.d(t,{cf:()=>r});var o=i(77966),n=i(24376),a=i(85782),s=i(41279);function r(e){var t;const i=null!=e?e:(0,a.pm)();"microsoft-store"!==i["app-install-source"]&&"app-info://platform/microsoft-store"!==(null===document||void 0===document?void 0:document.referrer)||(i.source="msft");const{lm:r,refer:l,source:d="",is_from_webapp:c,referer_url:p="",_r:u,previous_launch_mode:g,previous_langding_page:m}=i,h=(null!==(t=new RegExp(`${location.origin}/(@?\\w+)`).exec(document.referrer))&&void 0!==t?t:[])[1],_=(0,a.St)(n.hw,void 0),v="embed"===h||"embed"===l,y="creator_embed"===l,b="amp"===h||/^amp_\w+/.test(p);if(_&&!v&&!b&&!y)return _;const f=function({device:e,source:t,lm:i,siteOnePath:o,refer:n,refererUrl:a="",fromWebapp:s,queryR:r,trafficType:l,previousLaunchMode:d}){const c="embed"===o||"embed"===n,p="creator_embed"===n,u="music_embed"===n,g="hashtag_embed"===n,m="curated_embed"===n,h="trending_embed"===n,_="amp"===o||/^amp_\w+/.test(a);return d||("msft"===t?"msft":"twa"===t?"twa":"push"===t?"push":"undefined"!=typeof window&&(navigator.standalone||"pc"===e&&window.matchMedia("(display-mode: standalone), (display-mode: minimal-ui)").matches||"mobile"===e&&window.matchMedia("(display-mode: standalone), (display-mode: minimal-ui), (display-mode: fullscreen)").matches)?"pwa":"11"===i?"paid":c?"referral_embed":p?"referral_creator_embed":u?"referral_music_embed":g?"referral_hashtag_embed":h?"referral_trending_embed":m?"referral_curated_embed":_?"referral_amp":"tiktok_browse"===n?"referral_tiktok_browse":/google|yahoo|yandex|bing|naver|duckduckgo/gi.test(l)?"organic":"1"===r?"reflow":"webapp"===t||s?"webapp_reflow":n||a||"undefined"!=typeof document&&document.referrer?"referral":"direct")}({refer:l,device:(0,o.W7)(navigator.userAgent)?"mobile":"pc",refererUrl:p,lm:r,trafficType:(0,s.R)(),source:d,fromWebapp:c,siteOnePath:h,queryR:u,previousLaunchMode:g});return(0,a.D9)(n.hw,f),m&&(0,a.D9)(n.vN,m),g&&window.history.replaceState({},"",((e,t=!1)=>{const i=new URL(window.location.href);if(t){const{origin:e,pathname:t}=i;return`${e}${t}`}return e.forEach((e=>i.searchParams.delete(e))),i.href})(["previous_launch_mode","previous_langding_page"])),f}},41279:(e,t,i)=>{"use strict";i.d(t,{R:()=>a});var o=i(24376),n=i(85782);function a(e){var t;let i;const a="undefined"!=typeof window;if(a&&(e=null!=e?e:document.referrer,i=(0,n.St)(o.Gb)),!i){if(e){const n=/https?:\/\/.*(google|yahoo|yandex|bing|naver|duckduckgo|neeva|wikipedia|facebook|instagram|youtube|twitter|tiktok|buzzfeed|debate|greenlemon|cloudfront|multimedios|huffpost|sdpnoticias|pinterest|bluradio|eluniversal|elcomercio|insider|medialeaks|intheknow|distractify|telediario|msn|linkedin|discord|whatsapp|telegram|viber|reddit|twitch|snapchat|messenger).*\/?/;i=(null!==(t=e.match(n))&&void 0!==t?t:[])[1]||o.eL}else i="no_referrer";a&&(0,n.D9)(o.Gb,i)}return i}},88833:(e,t,i)=>{"use strict";i.d(t,{Q:()=>s});var o=i(93801),n=i(56460),a=i(36488);const s=(0,o.Z)(n.Z,{target:"e1aglo370"})((({theme:{direction:e}})=>(0,a.YJ)({direction:e,marginStart:"4px"})),"label:StyledVerifyBadge;")},99603:(e,t,i)=>{"use strict";i.d(t,{hb:()=>g,XU:()=>c,gh:()=>u});var o=i(13597),n=i.n(o),a=i(91051);const s={Positive:"rgba(11, 224, 155, 1)",Negative:"rgba(255, 76, 58, 1)",ToastDefault:"rgba(84, 84, 84, .92)",ToastNegative:"rgba(255, 76, 58, .92)",Secondary:"rgba(32, 213, 236, 1)",TUXSecondary2:"rgba(16, 162, 197, 1)",Positive2:"rgba(79, 171, 126, 1)",ConstTextInverse:"rgba(255, 255, 255, 1)",ConstTextInverse2:"rgba(255, 255, 255, .9)",ConstTextInverse3:"rgba(255, 255, 255, .75)",ConstTextInverse4:"rgba(255, 255, 255, .5)",ConstTextInverse5:"rgba(255, 255, 255, .34)",ConstTextPrimary:"rgba(22, 24, 35, 1)",ConstBGInverse:"rgba(0, 0, 0, 1)",ConstBGInverse2:"rgba(0, 0, 0, .6)",ConstBGInverse3:"rgba(37, 37, 37, .6)",ConstBGInverse4:"rgba(84, 84, 84, .5)",TUXBGCreation:"rgba(0, 0, 0, 1)",BGCreation2:"rgba(27, 27, 27, 1)",BGCreation5:"rgba(0, 0, 0, .15)",ConstBGMat:"rgba(255, 255, 255, .2)",ConstBGContainer:"rgba(255, 255, 255, .12)",ConstBGContainer2:"rgba(255, 255, 255, .08)",ConstBGContainer3:"rgba(255, 255, 255, .04)",ConstBGPlaceholderOpaque:"rgba(241, 241, 241, 1)",ConstBGInverseOpaque:"rgba(37, 37, 37, 1)",ConstBGInverse1:"rgba(56, 56, 56, .95)",ConstLineInverse:"rgba(255, 255, 255, .2)",ConstLineInverse2:"rgba(255, 255, 255, .12)",SDPrimary:"rgba(0, 0, 0, .8)",AssistColorYellow:"rgba(250, 206, 21, 1)",Primary:"rgba(255, 59, 92, 1)",Link:"rgba(255, 59, 92, 1)",Primary2:"rgba(255, 255, 255, .9)",TextPrimary:"rgba(255, 255, 255, .9)",TextSecondary:"rgba(255, 255, 255, .75)",TextTertiary:"rgba(255, 255, 255, .5)",TextQuaternary:"rgba(255, 255, 255, .34)",BGPrimary:"rgba(18, 18, 18, 1)",BGSecondary:"rgba(37, 37, 37, 1)",BGTertiary:"rgba(46, 46, 46, 1)",BGQuaternary:"rgba(56, 56, 56, 1)",BGQuinary:"rgba(75, 75, 75, 1)",BGSecondary2:"rgba(255, 255, 255, .08)",BGTertiary2:"rgba(255, 255, 255, .12)",BGPlaceholderDefault:"rgba(255, 255, 255, .08)",BGPlaceholderOpaque:"rgba(37, 37, 37, 1)",BGInput:"rgba(255, 255, 255, .12)",BGInput2:"rgba(255, 255, 255, .08)",BGView:"rgba(255, 255, 255, .04)",BGCreation3:"rgba(18, 18, 18, 1)",BGCreation4:"rgba(27, 27, 27, 1)",BGHover:"rgba(255, 255, 255, .9)",BGBrand:"rgba(254, 44, 85, .34)",LinePrimary:"rgba(255, 255, 255, 0)",LineSecondary:"rgba(255, 255, 255, .12)",LineInput:"rgba(255, 255, 255, .5)",LinePrimary2:"rgba(255, 255, 255, .2)",LineSecondary2:"rgba(255, 255, 255, 0)",TUXLineSecondary3:"rgba(255, 255, 255, .5)",LineDarker:"rgba(0, 0, 0, .6)",SDSecondary:"rgba(0, 0, 0, .68)",SDTertiary:"rgba(0, 0, 0, .5)",Secondary2:"rgba(0, 198, 233, 1.0)",Link2:"rgba(255, 59, 92, 1.0)",Link3:"rgba(255, 59, 92, 1.0)",TextTertiary2:"rgba(255, 255, 255, 0.75)",TextReverse:"rgba(255, 255, 255, 0.9)",TextReverse2:"rgba(255, 255, 255, 0.75)",TextReverse3:"rgba(255, 255, 255, 0.5)",TextReverse4:"rgba(255, 255, 255, 0.34)",BGPrimary2:"rgba(255, 255, 255, 0.04)",BGView2:"rgba(255, 255, 255, 0.0)",BGCreation:"rgba(18, 18, 18, 1.0)",BGInverse3:"rgba(37, 37, 37, 0.6)",BGReverse:"rgba(18, 18, 18, 1.0)",BGReverse2:"rgba(18, 18, 18, 0.9)",ShadowPrimary:"rgba(255,255, 255, 0.12)",ShadowSecondary:"rgba(0, 0, 0, 0.06)",LineSecondary3:"rgba(255, 255, 255, 0.0)",LineReverse2:"rgba(255, 255, 255, 0.12)",LineReverse3:"rgba(255, 255, 255, 0.0)",LineInverse:"rgba(255, 255, 255, 0.0)",TagGreenText:"rgba(178, 255, 217, 1.0)",TagGreenBG:"rgba(89, 128, 102, 1.0)",TagPurpleText:"rgba(255, 178, 217, 1.0)",TagPurpleBG:"rgba(128, 89, 108, 1.0)",TagBrownText:"rgba(255, 179, 179, 1.0)",TagBrownBG:"rgba(128, 89, 89, 1.0)",LiveColorStart:"rgba(255, 23, 100, 1.0)",LiveColorEnd:"rgba(237, 52, 149, 1.0)",ConstSecondary:"rgba(32, 213, 236, 1)",ConstSecondary2:"rgba(16, 162, 197, 1)",BGMessageIcon:"rgba(255, 255, 255, 0.08)",BGMessageOperateHover:"rgba(255, 255, 255, 0.12)",TextTertiaryAlt:"rgba(255, 255, 255, 0.6)"},r={Proxima:'"IBM Plex Sans", ProximaNova, Arial, Tahoma, PingFangSC, sans-serif',Sofia:'"IBM Plex Sans", SofiaPro, Arial, Tahoma, PingFangSC, sans-serif'},l={P0:{fontSize:"24px",lineHeight:"32px"},P1:{fontSize:"18px",lineHeight:"25px"},P2:{fontSize:"16px",lineHeight:"22px"},P3:{fontSize:"14px",lineHeight:"20px"},P4:{fontSize:"12px",lineHeight:"17px"},H0:{fontSize:"96px",lineHeight:"115px"},H1:{fontSize:"72px",lineHeight:"86px"},H2:{fontSize:"56px",lineHeight:"68px"},H3:{fontSize:"32px",lineHeight:"38px"},H4:{fontSize:"24px",lineHeight:"28px"},H5:{fontSize:"18px",lineHeight:"22px"},H6:{fontSize:"14px",lineHeight:"17px"}};var d;!function(e){e[e.Dark=0]="Dark",e[e.Bright=1]="Bright",e[e.System=2]="System"}(d||(d={}));const c={isMobile:!1,direction:"ltr",isDark:!1,colors:{Positive:"rgba(11, 224, 155, 1)",Negative:"rgba(255, 76, 58, 1)",ToastDefault:"rgba(84, 84, 84, .92)",ToastNegative:"rgba(255, 76, 58, .92)",Secondary:"rgba(32, 213, 236, 1)",TUXSecondary2:"rgba(16, 162, 197, 1)",Positive2:"rgba(79, 171, 126, 1)",ConstTextInverse:"rgba(255, 255, 255, 1)",ConstTextInverse2:"rgba(255, 255, 255, .9)",ConstTextInverse3:"rgba(255, 255, 255, .75)",ConstTextInverse4:"rgba(255, 255, 255, .5)",ConstTextInverse5:"rgba(255, 255, 255, .34)",ConstTextPrimary:"rgba(22, 24, 35, 1)",ConstBGInverse:"rgba(0, 0, 0, 1)",ConstBGInverse2:"rgba(0, 0, 0, .6)",ConstBGInverse3:"rgba(37, 37, 37, .6)",ConstBGInverse4:"rgba(84, 84, 84, .5)",TUXBGCreation:"rgba(0, 0, 0, 1)",BGCreation2:"rgba(27, 27, 27, 1)",BGCreation5:"rgba(0, 0, 0, .15)",ConstBGMat:"rgba(255, 255, 255, .2)",ConstBGContainer:"rgba(255, 255, 255, .12)",ConstBGContainer2:"rgba(255, 255, 255, .08)",ConstBGContainer3:"rgba(255, 255, 255, .04)",ConstBGPlaceholderOpaque:"rgba(241, 241, 241, 1)",ConstBGInverseOpaque:"rgba(37, 37, 37, 1)",ConstBGInverse1:"rgba(56, 56, 56, .95)",ConstLineInverse:"rgba(255, 255, 255, .2)",ConstLineInverse2:"rgba(255, 255, 255, .12)",SDPrimary:"rgba(0, 0, 0, .8)",AssistColorYellow:"rgba(250, 206, 21, 1)",Primary:"rgba(254, 44, 85, 1)",Link:"rgba(254, 44, 85, 1)",Primary2:"rgba(22, 24, 35, 1)",TextPrimary:"rgba(22, 24, 35, 1)",TextSecondary:"rgba(22, 24, 35, .75)",TextTertiary:"rgba(22, 24, 35, .5)",TextQuaternary:"rgba(22, 24, 35, .34)",BGPrimary:"rgba(255, 255, 255, 1)",BGSecondary:"rgba(255, 255, 255, 1)",BGTertiary:"rgba(255, 255, 255, 1)",BGQuaternary:"rgba(255, 255, 255, 1)",BGQuinary:"rgba(255, 255, 255, 1)",BGSecondary2:"rgba(255, 255, 255, 1)",BGTertiary2:"rgba(255, 255, 255, 1)",BGPlaceholderDefault:"rgba(22, 24, 35, .06)",BGPlaceholderOpaque:"rgba(241, 241, 241, 1)",BGInput:"rgba(22, 24, 35, .06)",BGInput2:"rgba(22, 24, 35, .06)",BGView:"rgba(22, 24, 35, .03)",BGCreation3:"rgba(248, 248, 248, 1)",BGCreation4:"rgba(255, 255, 255, 1)",BGHover:"rgba(22, 24, 35, .06)",BGBrand:"rgba(254, 44, 85, .06)",LinePrimary:"rgba(22, 24, 35, .2)",LineSecondary:"rgba(22, 24, 35, .12)",LineInput:"rgba(22, 24, 35, .5)",LinePrimary2:"rgba(22, 24, 35, .2)",LineSecondary2:"rgba(22, 24, 35, .12)",TUXLineSecondary3:"rgba(22, 24, 35, .12)",LineDarker:"rgba(22, 24, 35, .12)",SDSecondary:"rgba(0, 0, 0, .5)",SDTertiary:"rgba(0, 0, 0, .2)",Secondary2:"rgba(0, 198, 233, 1.0)",Link2:"rgba(254, 44, 85, 1.0)",Link3:"rgba(254, 44, 85, 1.0)",TextTertiary2:"rgba(22, 24, 35, 0.5)",TextReverse:"rgba(22, 24, 35, 1.0)",TextReverse2:"rgba(22, 24, 35, 0.75)",TextReverse3:"rgba(22, 24, 35, 0.5)",TextReverse4:"rgba(22, 24, 35, 0.34)",BGPrimary2:"rgba(255, 255, 255, 1.0)",BGView2:"rgba(22, 24, 35, 0.03)",BGCreation:"rgba(18, 18, 18, 1.0)",BGInverse3:"rgba(37, 37, 37, 0.6)",BGReverse:"rgba(255, 255, 255, 1.0)",BGReverse2:"rgba(255, 255, 255, 0.9)",ShadowPrimary:"rgba(0, 0, 0, 0.12)",ShadowSecondary:"rgba(0, 0, 0, 0.06)",LineSecondary3:"rgba(22, 24, 35, 0.03)",LineReverse2:"rgba(22, 24, 35, 0.12)",LineReverse3:"rgba(22, 24, 35, 0.12)",LineInverse:"rgba(22, 24, 35, 0.2)",TagGreenText:"rgba(89, 128, 108, 1.0)",TagGreenBG:"rgba(239, 245, 242, 1.0)",TagPurpleText:"rgba(128, 89, 121, 1.0)",TagPurpleBG:"rgba(246, 240, 245, 1.0)",TagBrownText:"rgba(128, 89, 89, 1.0)",TagBrownBG:"rgba(245, 240, 240, 1.0)",LiveColorStart:"rgba(255, 23, 100, 1.0)",LiveColorEnd:"rgba(237, 52, 149, 1.0)",ConstSecondary:"rgba(32, 213, 236, 1.0)",ConstSecondary2:"rgba(16, 162, 197, 1.0)",BGMessageIcon:"rgb(241, 241, 242)",BGMessageOperateHover:"rgba(196, 196, 196, .425)",TextTertiaryAlt:"rgba(22, 24, 35, 0.6)"},link:{color:"#0078d4",hoverColor:"#004578",activeColor:"#004578",focusColor:"#0078d4",visitedColor:"#0078d4"},selection:{background:"rgba(141, 214, 249, 0.35)"},text:{fontFamily:'"SofiaPro", PingFangSC, sans-serif',fontSize:"14px",color:"#000"},border:{radius:"3px"},boxShadowBase:"0 1.6px 3.6px 0 rgba(0,0,0,.132), 0 0.3px 0.9px 0 rgba(0,0,0,.108)",markdown:{blockquote:{color:"#4e7182",backgroundColor:"#eaf8ff"},inlineCode:{color:"hotpink",background:"rgba(70, 94, 105, 0.05)"}},typography:{P0:{fontSize:"24px",lineHeight:"32px"},P1:{fontSize:"18px",lineHeight:"25px"},P2:{fontSize:"16px",lineHeight:"22px"},P3:{fontSize:"14px",lineHeight:"20px"},P4:{fontSize:"12px",lineHeight:"17px"},H0:{fontSize:"96px",lineHeight:"115px"},H1:{fontSize:"72px",lineHeight:"86px"},H2:{fontSize:"56px",lineHeight:"68px"},H3:{fontSize:"32px",lineHeight:"38px"},H4:{fontSize:"24px",lineHeight:"28px"},H5:{fontSize:"18px",lineHeight:"22px"},H6:{fontSize:"14px",lineHeight:"17px"}},fontFamilies:{Proxima:"ProximaNova, Arial, Tahoma, PingFangSC, sans-serif",Sofia:"SofiaPro, Arial, Tahoma, PingFangSC, sans-serif"},fontWeights:{normal:400,medium:500,semiBold:600,bold:700}};function p(e,t){var i;const o=Object.create(null);for(const[n,a]of Object.entries(e)){const e=t[n];o[n]="object"==typeof e?p(a,e):null!==(i=t[n])&&void 0!==i?i:a}return o}function u(e){const{isDark:t,isMobile:i,lang:o}=e,n={};return t&&(n.colors=s,n.isDark=!0),i&&(n.typography=l),"vi-VN"===o?n.fontFamilies=r:"ar"!==o&&"he-IL"!==o&&"ur"!==o||(n.direction="rtl"),n.isMobile=i,p(c,n)}const g=(0,a.createContext)({value:!1,toggle:n()})},36488:(e,t,i)=>{"use strict";i.d(t,{Mz:()=>o,XP:()=>n,gi:()=>a,GI:()=>s,wj:()=>r,FC:()=>l,ZD:()=>d,Ph:()=>c,Cx:()=>p,f1:()=>g,YJ:()=>h,$K:()=>_,VZ:()=>v});const o=60,n=1150,a={":hover, :active, :link":{textDecoration:"none"}};function s({theme:e,typography:t,color:i,fontFamily:o,fontWeight:n,isLink:a=!1}){const s=a&&i?{":hover, :active, :link":{color:e.colors[i]}}:null;return[{color:i&&e.colors[i],fontFamily:o&&e.fontFamilies[o],fontWeight:n&&e.fontWeights[n]},t?e.typography[t]:void 0,s]}const r={textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},l=e=>({display:"-webkit-box",overflow:"hidden",textOverflow:"ellipsis",lineClamp:e,boxOrient:"vertical",WebkitLineClamp:e,WebkitBoxOrient:"vertical"}),d=({theme:e,isUiOptimise:t=!1})=>t?{backgroundColor:e.colors.ConstBGInverse4,":hover":{backgroundColor:e.colors.ConstBGInverse3}}:{},c={border:"none",background:"none",outline:"none",padding:0},p=e=>({position:"absolute",left:"0",[e]:"0",width:"100%",height:"1px",transform:"scaleY(0.5)"});var u;function g(...e){return e.map((({max:e,min:t,orientation:i,minAspectRatio:o,aspectRatio:n,maxAspectRatio:a,style:s={}})=>{if(!e&&!t&&!n)return{};let r="@media screen";return"number"==typeof t&&(r+=` and (min-width: ${t}px)`),"number"==typeof e&&(r+=` and (max-width: ${e}px)`),"string"==typeof i&&(r+=` and (orientation: ${i})`),"string"==typeof o&&(r+=` and (min-aspect-ratio: ${o})`),"string"==typeof n&&(r+=` and (aspect-ratio: ${n})`),"string"==typeof a&&(r+=` and (max-aspect-ratio: ${a})`),{[r]:s}}))}!function(e){e[e.Laptop=1920]="Laptop",e[e.HeaderWidth=1080]="HeaderWidth",e[e.NarrowLaptop=1072]="NarrowLaptop",e[e.Pad=768]="Pad",e[e.Phone=480]="Phone"}(u||(u={}));const m={ltr:{end:"right",start:"left",marginEnd:"marginRight",marginStart:"marginLeft",paddingEnd:"paddingRight",paddingStart:"paddingLeft"},rtl:{end:"left",start:"right",marginEnd:"marginLeft",marginStart:"marginRight",paddingEnd:"paddingLeft",paddingStart:"paddingRight"}};function h({direction:e,marginEnd:t,marginStart:i,end:o,start:n,textAlign:a,paddingEnd:s,paddingStart:r}){const l=m[e],d={};return a&&(d.textAlign=_(e,a)),t&&(d[l.marginEnd]=t),i&&(d[l.marginStart]=i),n&&(d[l.start]=n),o&&(d[l.end]=o),s&&(d[l.paddingEnd]=s),r&&(d[l.paddingStart]=r),d}function _(e,t){return m[e][t]}function v({theme:e,hover:t=e.colors.BGView,active:i=e.colors.BGInput}){return{transition:"background ease-in-out 200ms",":hover":{background:t},":active":{background:i}}}},75311:(e,t,i)=>{"use strict";i.d(t,{q:()=>g});var o,n=i(64047),a=i(11040),s=i(91051),r=i(7998);!function(e){e.Empty="rgba(18, 18, 18, 0.03)",e.Default="rgba(136, 136, 136, 0.5)"}(o||(o={}));const l=(0,r.Z)("span",{target:"e1e9er4e0"})((({shape:e,empty:t,isShowBackground:i})=>[{display:"inline-block",boxSizing:"border-box",margin:"0",padding:"0",fontFeatureSettings:'"tnum"',position:"relative",overflow:"hidden",color:"#fff",whiteSpace:"nowrap",textAlign:"center",verticalAlign:"middle",lineHeight:"32px",borderRadius:"square"===e?"0":"50%"},i?{backgroundColor:t?"rgba(18, 18, 18, 0.03)":"rgba(136, 136, 136, 0.5)"}:null]),"label:SpanAvatarContainer;"),d=(0,r.Z)("img",{target:"e1e9er4e1"})({width:"100%",height:"100%",objectFit:"cover"},"label:ImgAvatar;"),c=(0,r.Z)("svg",{target:"e1e9er4e2"})({width:"100%",height:"100%"},"label:SvgContainer;"),p={EMPTY:(0,a.jsx)(c,Object.assign({width:"300",height:"300",viewBox:"0 0 300 300",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true"},{children:(0,a.jsx)("rect",{cx:"150",cy:"150",fill:"#888",fillOpacity:".5"},void 0)}),void 0),NON_EMPTY:(0,a.jsxs)(c,Object.assign({width:"300",height:"300",viewBox:"0 0 300 300",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true"},{children:[(0,a.jsx)("rect",{cx:"150",cy:"150",fill:"#888",fillOpacity:".5"},void 0),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M58.74 269.054C74.383 234.242 109.361 210 150 210s75.617 24.242 91.26 59.054C215.978 288.463 184.336 300 150 300c-34.336 0-65.978-11.537-91.26-30.946z",fill:"#fff",fillOpacity:".75"},void 0),(0,a.jsx)("circle",{cx:"150",cy:"138",r:"55",fill:"#fff",fillOpacity:".75"},void 0)]}),void 0)},u=()=>!0,g=(0,s.memo)((function(e){const{src:t,empty:i=!1,backgroundImage:o,size:r=32,shape:c="circle",style:g={},onError:m=u,alt:h,imageLoading:_="lazy",e2eTag:v=""}=e,y=(0,n.__rest)(e,["src","empty","backgroundImage","size","shape","style","onError","alt","imageLoading","e2eTag"]),[b,f]=(0,s.useState)(!1),x=(0,s.useCallback)((e=>{var t;m&&f(null===(t=m(e))||void 0===t||t)}),[m]),k=t&&!b,w=i?"EMPTY":"NON_EMPTY";return(0,a.jsx)(l,Object.assign({shape:c,isShowBackground:Boolean(k),empty:i,style:Object.assign(Object.assign({},g),{width:r,height:r}),"data-e2e":v},y,{children:k?(0,a.jsx)(d,{loading:_,onError:x,onLoad:e.onLoad,alt:h,src:t},void 0):p[w]}),void 0)}))},41928:(e,t,i)=>{"use strict";i.d(t,{W:()=>h});var o=i(64047),n=i(11040),a=i(91051),s=i(96434),r=i(34103),l=i(7998);const d="rgb(208, 209, 211)",c=({theme:e,buttonTheme:t})=>{switch(t){case"default":return{borderWidth:"1px",borderStyle:"solid",borderRadius:"4px",color:e.colors.TextPrimary,borderColor:e.colors.LineSecondary2,backgroundColor:e.colors.BGSecondary2,":hover":{borderColor:d,backgroundColor:e.colors.BGCreation3},":active":{borderColor:d,backgroundColor:e.colors.BGMessageIcon},":disabled":{borderColor:"rgb(227, 227, 229)",backgroundColor:e.colors.BGSecondary2,color:e.colors.TextQuaternary}};case"line":return{borderWidth:"1px",borderStyle:"solid",borderRadius:"4px",color:e.colors.Primary,borderColor:e.colors.Primary,backgroundColor:e.colors.BGSecondary2,":hover":{backgroundColor:"rgba(254, 44, 85, 0.06)"},":active":{backgroundColor:"rgba(254, 44, 85, 0.16)"},":disabled":{borderColor:e.colors.LineSecondary2,backgroundColor:e.colors.BGSecondary2,color:e.colors.TextQuaternary,pointerEvents:"none"}};case"primary":return{borderRadius:"4px",border:"none",color:e.colors.ConstTextInverse,backgroundColor:e.colors.Primary,":hover":{background:"linear-gradient(0deg, rgba(0, 0, 0, 0.06), rgba(0, 0, 0, 0.06)), #FE2C55"},":active":{background:"linear-gradient(0deg, rgba(0, 0, 0, 0.12), rgba(0, 0, 0, 0.12)), #FE2C55"},":disabled":{border:"none",color:e.colors.TextQuaternary,backgroundColor:e.colors.BGInput2,pointerEvents:"none"}};case"round":return{borderRadius:"52px",border:"none",color:e.colors.ConstTextInverse,backgroundColor:e.colors.ToastDefault,":hover":{},":active":{},":disabled":{}};default:return{":hover":{},":active":{},":disabled":{}}}},p="ProximaNova, PingFangSC, sans-serif",u="SofiaPro, PingFangSC, sans-serif",g={largeNew:{minWidth:"120px",minHeight:"46px",fontSize:"16px",lineHeight:"22px",fontWeight:700,fontFamily:p},large:{minWidth:"168px",minHeight:"48px",fontSize:"18px",lineHeight:"25px",fontWeight:600,fontFamily:u},medium:{minWidth:"164px",minHeight:"36px",fontSize:"18px",lineHeight:"25px",fontWeight:600,fontFamily:u},small:{minWidth:"106px",minHeight:"28px",fontSize:"16px",lineHeight:"22px",fontWeight:600,fontFamily:p},tiny:{minWidth:"96px",minHeight:"28px",fontFamily:p,fontSize:"14px",lineHeight:"17px",fontWeight:600}},m=(0,l.Z)("button",{shouldForwardProp:e=>(0,r.Z)(e)&&"loading"!==e,target:"ehk74z00"})((({buttonTheme:e="default",size:t="large",theme:i,loading:o=!1})=>[c({theme:i,buttonTheme:e}),g[t],{display:"flex",position:"relative",alignItems:"center",justifyContent:"center",padding:"6px 8px",userSelect:"none",cursor:"pointer",boxSizing:"border-box",":focus":{outline:"none"}},Object.assign({},o?{color:"transparent",pointerEvents:"none"}:{})]),"label:Button;"),h=(0,a.memo)((function(e){var{buttonTheme:t,size:i,type:a="button",loading:r=!1,loadingTheme:l="primary",loadingSize:d="medium",children:c,e2eTag:p}=e,u=(0,o.__rest)(e,["buttonTheme","size","type","loading","loadingTheme","loadingSize","children","e2eTag"]);return(0,n.jsxs)(m,Object.assign({type:a,buttonTheme:t,loading:r,size:i,"data-e2e":p},u,{children:[c,r&&(0,n.jsx)(s.$,{style:{position:"absolute",top:"50%",transform:"translateY(-50%)"},theme:l,size:d},void 0)]}),void 0)}))},96434:(e,t,i)=>{"use strict";i.d(t,{$:()=>u});var o=i(11040),n=i(74820),a=i(91051),s=i(28327),r=i(7998);const l=(0,r.Z)("div",{target:"ef2t4c20"})((({center:e})=>({display:"flex",flexDirection:"column",alignItems:e?"center":"flex-start"})),"label:DivContainer;"),d=(0,s.F4)({"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}),c=(0,r.Z)("svg",{target:"ef2t4c21"})({margin:"0 !important",fill:"none",animation:`${d} 1s linear infinite`},"label:SvgBox;"),p={small:16,medium:18,large:20},u=(0,a.memo)((function({theme:e="primary",size:t="medium",center:i=!1,style:s={},fill:r=""}){const{colors:d}=(0,n.u)(),u=(0,a.useMemo)((()=>{const{BGCreation:t,BGPrimary:i,Primary:o}=d;return r||{white:t,primary:i,transparent:o}[e]}),[d,r,e]),g="string"==typeof t?p[t]:t,m=Object.assign(Object.assign({},s),{width:g,height:g});return(0,o.jsx)(l,Object.assign({center:i,style:m},{children:(0,o.jsx)(c,Object.assign({width:g,height:g,viewBox:"0 0 18 18",xmlns:"http://www.w3.org/2000/svg"},{children:(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",fill:u,d:"M0 9C0 4.02944 4.02944 0 9 0C13.9706 0 18 4.02944 18 9C18 9.82843 17.3284 10.5 16.5 10.5C15.6716 10.5 15 9.82843 15 9C15 5.68629 12.3137 3 9 3C5.68629 3 3 5.68629 3 9C3 12.3137 5.68629 15 9 15C10.415 15 11.7119 14.512 12.7375 13.6941C13.3852 13.1775 14.329 13.2838 14.8455 13.9315C15.3621 14.5792 15.2558 15.5229 14.6081 16.0395C13.0703 17.266 11.1188 18 9 18C4.02944 18 0 13.9706 0 9Z"},void 0)}),void 0)}),void 0)}))},99116:(e,t,i)=>{"use strict";i.d(t,{g:()=>y,B:()=>x});var o=i(64047),n=i(11040),a=i(91051),s=i(32667),r=i(28327),l=i(7998);const d=36,c=(0,r.F4)({"25%":{cx:100,r:1.2*d},"50%":{cx:140,r:d},"75%":{cx:100,r:.6*d},"100%":{cx:60,r:d}}),p=(0,r.F4)({"25%":{cx:100,r:24},"50%":{cx:60,r:d},"75%":{cx:100,r:1.2*d},"100%":{cx:140,r:d}});var u;!function(e){e[e.Red=0]="Red",e[e.Green=1]="Green",e[e.Black=2]="Black"}(u||(u={}));const g={strokeWidth:0,r:d,cy:99},m={0:{fill:"#fe2c55",cx:128,animation:`${p} 1s cubic-bezier(.05, 0, 1, 1) infinite`},1:{fill:"#3af2ff",cx:60,animation:`${c} 1s cubic-bezier(.05, 0, 1, 1) infinite`},2:{fill:"#0f0f0f",cx:60,animation:`${c} 1s cubic-bezier(.05, 0, 1, 1) infinite`}},h=(0,l.Z)("circle",{target:"e1ugmybf0"})((({circleType:e,isBlack:t})=>[g,m[e],t?{fill:"#000"}:null]),"label:Circle;"),_=(0,l.Z)("svg",{target:"e1ugmybf1"})({display:"block"},(({center:e})=>e?{margin:"6px auto"}:null),"label:SvgContainer;"),v={default:48,small:32},y=(0,a.memo)((0,a.forwardRef)((function(e,t){var{size:i=48,center:a=!1,maskKey:s=Date.now()}=e,r=(0,o.__rest)(e,["size","center","maskKey"]);const l="string"==typeof i?v[i]:i;return(0,n.jsxs)(_,Object.assign({center:a,preserveAspectRatio:"none",viewBox:"0 0 200 200",width:l,height:l},r,{ref:t},{children:[(0,n.jsxs)("defs",{children:[(0,n.jsxs)("mask",Object.assign({id:`redhole-${s}`},{children:[(0,n.jsx)("rect",{width:"100%",height:"100%",fill:"white"},void 0),(0,n.jsx)(h,{circleType:0,isBlack:!0},void 0)]}),void 0),(0,n.jsxs)("mask",Object.assign({id:`greenhole-${s}`},{children:[(0,n.jsx)("rect",{width:"100%",height:"100%",fill:"white"},void 0),(0,n.jsx)(h,{circleType:1,isBlack:!0},void 0)]}),void 0)]},void 0),(0,n.jsx)(h,{strokeWidth:2,stroke:"#3AF2FF",circleType:2},void 0),(0,n.jsx)(h,{circleType:1,mask:`url(#redhole-${s})`},void 0),(0,n.jsx)(h,{circleType:0,mask:`url(#greenhole-${s})`},void 0)]}),void 0)})));let b=null;function f(e){var t;return b||(b=document.createElement("div"),b.style.cssText="display: inline-block; position: fixed; left: calc(50% - 15px); top: 38%;",(e&&null!==(t=document.querySelector(e))&&void 0!==t?t:document.body).appendChild(b)),b}const x={show:e=>s.render((0,n.jsx)(y,{size:30},void 0),f(e)),hide:()=>b?s.unmountComponentAtNode(f()):void 0}},94215:(e,t,i)=>{"use strict";i.d(t,{Od:()=>y,N0:()=>x,Bp:()=>b,kQ:()=>f,Xu:()=>k});var o=i(64047),n=i(11040),a=i(28327),s=i(7998),r=i(36488);const l=(0,a.F4)({"0%":{backgroundPositionX:"200%"},"100%":{backgroundPositionX:"-150%"}}),d=(0,s.Z)("div",{target:"e12rwi320"})((({theme:{colors:e}})=>({backgroundColor:e.BGPlaceholderDefault,borderRadius:"4px",backgroundImage:"linear-gradient(90deg, rgba(22, 24, 35, 0) 0%, rgba(22, 24, 35, .04) 50%, rgba(22, 24, 35, 0) 100%)",backgroundSize:"200% 100%",backgroundRepeat:"no-repeat",width:"100%",height:"100%"})),"label:DivBaseComponent;"),c=(0,s.Z)("div",{target:"e12rwi321"})({width:"100%"},"label:DivComponent;"),p=(0,s.Z)(d,{target:"e12rwi322"})({borderRadius:"100%",animation:`${l} cubic-bezier(0, 0, 1, 1) 1.5s infinite`},"label:StyledAvatar;"),u=(0,s.Z)(d,{target:"e12rwi323"})({height:"16px",width:"40%",animation:`${l} cubic-bezier(0, 0, 1, 1) 1.5s infinite`},"label:StyledTitle;"),g=(0,s.Z)(d,{target:"e12rwi324"})((({theme:e})=>[{backgroundColor:"transparent",backgroundImage:"unset"},(0,r.YJ)({direction:e.direction})]),"label:StyledParagraph;"),m=(0,s.Z)(d,{target:"e12rwi325"})((({shrinkLastLine:e=!0})=>({height:"12px",animation:`${l} cubic-bezier(0, 0, 1, 1) 1.5s infinite`,":last-child":{width:e?"60%":"100%",marginTop:"12px"},":not(:last-child)":{marginBottom:"8px"}})),"label:StyledParagraphLine;"),h=(0,s.Z)(d,{target:"e12rwi326"})({minHeight:"100px",animation:`${l} cubic-bezier(0, 0, 1, 1) 1.5s infinite`},"label:StyledVideoCover;"),_=(0,s.Z)(d,{target:"e12rwi327"})({height:"36px",width:"164px",animation:`${l} cubic-bezier(0, 0, 1, 1) 1.5s infinite`},"label:StyledButton;"),v=(0,s.Z)(d,{target:"e12rwi328"})({height:"36px",width:"164px",animation:`${l} cubic-bezier(0, 0, 1, 1) 1.5s infinite`},"label:StyledTextBox;");function y(e){const{children:t,style:i,className:a}=e,s=(0,o.__rest)(e,["children","style","className"]);return(0,n.jsx)(c,Object.assign({style:i,className:a},s,{children:t}),void 0)}function b(e){const{lines:t=2,shrinkLastLine:i=!0,style:a,className:s}=e,r=(0,o.__rest)(e,["lines","shrinkLastLine","style","className"]),l=[];for(let e=0;e<t;++e)l.push((0,n.jsx)(m,{shrinkLastLine:i},e));return(0,n.jsx)(g,Object.assign({style:a,className:s},r,{children:l}),void 0)}function f(e){const{style:t,className:i}=e,a=(0,o.__rest)(e,["style","className"]);return(0,n.jsx)(u,Object.assign({style:t,className:i},a),void 0)}function x(e){const{style:t,className:i}=e,a=(0,o.__rest)(e,["style","className"]);return(0,n.jsx)(p,Object.assign({style:t,className:i},a),void 0)}function k(e){const{style:t,className:i}=e,a=(0,o.__rest)(e,["style","className"]);return(0,n.jsx)(h,Object.assign({style:t,className:i},a),void 0)}y.Paragraph=b,y.Title=f,y.Avatar=x,y.VideoCover=k,y.Button=function(e){const{style:t,className:i}=e,a=(0,o.__rest)(e,["style","className"]);return(0,n.jsx)(_,Object.assign({style:t,className:i},a),void 0)},y.TextBox=function(e){const{style:t,className:i}=e,a=(0,o.__rest)(e,["style","className"]);return(0,n.jsx)(v,Object.assign({style:t,className:i},a),void 0)}},24930:(e,t,i)=>{"use strict";i.d(t,{r:()=>c});var o=i(64047),n=i(11040),a=i(91051),s=i(7998);const r=(0,s.Z)("div",{target:"eoeunh00"})((({checked:e,backgroundColor:t,width:i,height:o,theme:{colors:n}})=>({position:"relative",width:null!=i?i:"44px",height:null!=o?o:"24px",left:"0",top:"0",background:null!=t?t:e?"#0be09b":n.LineSecondary,borderRadius:"100px",transition:"all 0.4s cubic-bezier(0.075, 0.82, 0.165, 1)",":hover":{background:null!=t?t:e?"linear-gradient(0deg, rgba(0, 0, 0, .08), rgba(0, 0, 0, .08)), #0be09b":"rgba(22, 24, 35, 0.16)"}})),"label:DivSwitchWrapper;"),l=(0,s.Z)("span",{target:"eoeunh01"})((({checked:e,height:t,width:i,backgroundColor:o,left:n})=>({position:"absolute",display:"flex",justifyContent:"center",alignItems:"center",width:null!=i?i:"20px",height:null!=t?t:"20px",left:n,top:"50%",transform:e?"translate(-100%, -50%);":"translateY(-50%)",borderRadius:"100px",background:null!=o?o:"#fff",boxShadow:"0 1px 2px rgba(0, 0, 0, 0.15)",transition:"all 0.4s cubic-bezier(0.075, 0.82, 0.165, 1)"})),"label:SpanSwitchIcon;"),d=(0,s.Z)("button",{target:"eoeunh02"})((({theme:{colors:e,typography:t,fontFamilies:i}})=>[t.P2,{border:"none",background:"none",outline:"none",padding:0,position:"relative",overflow:"visible",display:"inline-flex",alignItems:"center",color:e.TextPrimary,fontFamily:i.Proxima,cursor:"pointer",":disabled":{cursor:"not-allowed",opacity:.34},"&:focus-visible":{outline:"2px solid #5E9ED6"}}]),"label:ButtonSwitchContainer;"),c=function(e){var{className:t,style:i={},size:s="medium",width:c=44,height:p=24,padding:u=2,indicatorSize:g=20,indicatorColor:m,indicatorCheckedColor:h,indicatorUnCheckedColor:_,indicatorIcon:v,indicatorCheckedIcon:y,indicatorUnCheckedIcon:b,backgroundColor:f,backgroundCheckedColor:x,backgroundUnCheckedColor:k,content:w="",disabled:S=!1,checked:C,defaultChecked:j=!1,e2eData:P,ariaLabel:T,onChange:O}=e,L=(0,o.__rest)(e,["className","style","size","width","height","padding","indicatorSize","indicatorColor","indicatorCheckedColor","indicatorUnCheckedColor","indicatorIcon","indicatorCheckedIcon","indicatorUnCheckedIcon","backgroundColor","backgroundCheckedColor","backgroundUnCheckedColor","content","disabled","checked","defaultChecked","e2eData","ariaLabel","onChange"]);const[I,A]=(0,a.useState)(null!=C?C:j),E=null!=C?C:I,M=(0,a.useCallback)((e=>{null==e||e.stopPropagation(),null==O||O(!E,e),A(!E)}),[O,E]);return(0,a.useEffect)((()=>{A(null!=C?C:j)}),[j,C]),(0,n.jsx)(d,Object.assign({"data-e2e":P,type:"button",role:"switch",disabled:S,onClick:M,style:i,"aria-checked":E,"aria-label":T},L,{children:(0,n.jsx)(r,Object.assign({checked:E,backgroundColor:E?null!=x?x:f:null!=k?k:f,width:`${c}px`,height:`${p}px`},{children:(0,n.jsx)(l,Object.assign({checked:E,backgroundColor:E?null!=h?h:m:null!=_?_:m,width:`${g}px`,height:`${g}px`,left:E?`calc(100% - ${u}px)`:`${u}px`},{children:E?null!=y?y:v:null!=b?b:v}),void 0)}),void 0)}),void 0)}},55198:(e,t,i)=>{"use strict";i.d(t,{h:()=>b});var o=i(11040),n=(i(29985),i(47883)),a=i(58126),s=i(28327),r=i(7998);const l=(0,s.F4)({"0%":{transform:"translateY(0%)",transformOrigin:"0 0",opacity:"1"},"100%":{transform:"translateY(-100%)",transformOrigin:"0 0",opacity:"0"}}),d=(0,s.F4)({"0%":{transform:"translateY(-100%)",transformOrigin:"0 0",opacity:"0"},"100%":{transform:"translateY(0%)",transformOrigin:"0 0",opacity:"1"}}),c=(0,a.iv)({"&-enter":{opacity:"0"},"&-enter-active":{animationName:d,animationDuration:"0.3s"},"&-leave-active":{animationName:l,animationDuration:"0.3s"}}),p=(0,a.iv)({fontFamily:"ProximaNova, PingFangSC, sans-serif",fontWeight:600,position:"fixed",top:"16px",left:"0px",color:"#fff",zIndex:2003,width:"100%",pointerEvents:"none",userSelect:"none","&-notice":{padding:"8px 0",textAlign:"center",":first-of-type":{marginTop:"-8px"}},"&-notice-content":{backgroundColor:"rgba(84, 84, 84, 0.92)",display:"inline-block",padding:"10px 8px",pointerEvents:"all",maxWidth:"100%",borderRadius:"2px"}}),u={auto:{},full:{width:"100vw",borderRadius:"0"},padding:{width:"calc(100vw - 40px)",margin:"0 auto"},half:{width:"50vw"}},g=(0,r.Z)("div",{target:"e1wz89c90"})((({widthType:e="auto",isRTL:t})=>[u[e],{direction:t?"rtl":"ltr"}]),"label:DivMessageContainer;");let m,h=[],_=1;const v={prefixCls:p,transitionName:c,style:{top:void 0},getContainer:void 0,maxCount:void 0,type:"default"},y={success:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTE3Ljg0MDQgNi44NTk4NkMxOC4wMzc3IDYuNjYyMDcgMTguMzU4NyA2LjY2NDI1IDE4LjU1MzMgNi44NjQ3MUwxOS40NTc0IDcuNzk2MjlDMTkuNjQ3NSA3Ljk5MjE3IDE5LjY0NTQgOC4zMDQzMiAxOS40NTI2IDguNDk3NTlMMTAuNTU4MiAxNy40MTYzQzEwLjEwNSAxNy44NzA3IDkuMzczMzMgMTcuODU5NiA4LjkzMzY2IDE3LjM5MTZMNC44MzY4MSAxMy4wMzA2QzQuNjQ5OTEgMTIuODMxNyA0LjY1NzExIDEyLjUxOTYgNC44NTI5OSAxMi4zMjk1TDUuNzgzNzQgMTEuNDI2MUM1Ljk4NDE4IDExLjIzMTUgNi4zMDUxNCAxMS4yMzg5IDYuNDk2MzkgMTEuNDQyNUw5Ljc4MjE0IDE0Ljk0MDFMMTcuODQwNCA2Ljg1OTg2WiIgZmlsbD0iIzBCRTA5QiIvPgo8L3N2Zz4K",fail:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjYiIGhlaWdodD0iMjYiIHZpZXdCb3g9IjAgMCAyNiAyNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgY2xpcC1wYXRoPSJ1cmwoI2NsaXAwKSI+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMTEuNDY4IDEzTDcuMjAwNCA4LjczMjM4QzYuOTg4ODYgOC41MjA4NSA2Ljk4ODg2IDguMTc3ODggNy4yMDA0IDcuOTY2MzVMNy45NjY0MyA3LjIwMDMyQzguMTc3OTcgNi45ODg3OCA4LjUyMDkzIDYuOTg4NzggOC43MzI0NiA3LjIwMDMyTDEzLjAwMDEgMTEuNDY3OUwxNy4yNjc3IDcuMjAwMzJDMTcuNDc5MiA2Ljk4ODc4IDE3LjgyMjIgNi45ODg3OCAxOC4wMzM3IDcuMjAwMzJMMTguNzk5OCA3Ljk2NjM1QzE5LjAxMTMgOC4xNzc4OCAxOS4wMTEzIDguNTIwODUgMTguNzk5OCA4LjczMjM4TDE0LjUzMjEgMTNMMTguNzk5OCAxNy4yNjc2QzE5LjAxMTMgMTcuNDc5MiAxOS4wMTEzIDE3LjgyMjEgMTguNzk5OCAxOC4wMzM3TDE4LjAzMzcgMTguNzk5N0MxNy44MjIyIDE5LjAxMTIgMTcuNDc5MiAxOS4wMTEyIDE3LjI2NzcgMTguNzk5N0wxMy4wMDAxIDE0LjUzMjFMOC43MzI0NiAxOC43OTk3QzguNTIwOTMgMTkuMDExMiA4LjE3Nzk3IDE5LjAxMTIgNy45NjY0MyAxOC43OTk3TDcuMjAwNCAxOC4wMzM3QzYuOTg4ODYgMTcuODIyMSA2Ljk4ODg2IDE3LjQ3OTIgNy4yMDA0IDE3LjI2NzZMMTEuNDY4IDEzWiIgZmlsbD0iI0ZGNEMzQSIvPgo8L2c+CjxkZWZzPgo8Y2xpcFBhdGggaWQ9ImNsaXAwIj4KPHJlY3Qgd2lkdGg9IjI2IiBoZWlnaHQ9IjI2IiBmaWxsPSJ3aGl0ZSIvPgo8L2NsaXBQYXRoPgo8L2RlZnM+Cjwvc3ZnPgo="},b={open:function(e){const t=void 0!==e.duration?e.duration:3,i=e.key||_++,a=new Promise((a=>{var s;const r={key:i,duration:t,className:e.className,content:(0,o.jsxs)(g,Object.assign({isRTL:e.isRTL,widthType:e.widthType,"data-e2e":e.e2eTag,style:Object.assign({display:"flex",justifyContent:"center",alignItems:"center"},null!==(s=e.style)&&void 0!==s?s:{})},{children:[e.type&&"default"!==e.type&&(0,o.jsx)("img",{src:y[e.type],style:Object.assign({width:"24px",height:"24px"},e.isRTL?{marginLeft:"8px"}:{marginRight:"8px"})},void 0),(0,o.jsx)("span",{children:e.content},void 0)]}),void 0),onClose:()=>("function"==typeof e.onClose&&e.onClose(),a(!0))};var l;e.getContainer?n.Z.newInstance(Object.assign(Object.assign({},v),{style:{position:"absolute",top:void 0},getContainer:e.getContainer}),(e=>{e.notice(r),h.push(e)})):(l=e=>{e.notice(r)},m?l(m):n.Z.newInstance(Object.assign({},v),(e=>{m?l(m):(m=e,l(e),h.push(e))})))})),s=()=>{m&&m.removeNotice(i)};return s.then=(e,t)=>a.then(e,t),s.promise=a,s},destroy(){m&&(m.destroy(),m=null),h.length>0&&(h.forEach((e=>e.destroy())),h=[])}}},64176:(e,t,i)=>{"use strict";i.d(t,{u:()=>y});var o=i(64047),n=i(11040),a=i(74820),s=i(91051),r=i(58126),l=i(69062);const d={white:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzYiIGhlaWdodD0iOCIgdmlld0JveD0iMCAwIDM2IDgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMCA4TDYuNjg2MjkgOEM4LjgwODAyIDggMTAuODQyOSA3LjE1NzE0IDEyLjM0MzEgNS42NTY4NUwxNy4yOTI5IDAuNzA3MTA2QzE3LjY4MzQgMC4zMTY1ODIgMTguMzE2NiAwLjMxNjU4MiAxOC43MDcxIDAuNzA3MTA3TDIzLjY1NjkgNS42NTY4NkMyNS4xNTcxIDcuMTU3MTUgMjcuMTkyIDggMjkuMzEzNyA4TDM2IDhMMCA4WiIgZmlsbD0id2hpdGUiLz4KPC9zdmc+",black:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzYiIGhlaWdodD0iOCIgdmlld0JveD0iMCAwIDM2IDgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0wIDhoNi42ODZhOCA4IDAgMCAwIDUuNjU3LTIuMzQzbDQuOTUtNC45NWExIDEgMCAwIDEgMS40MTQgMGw0Ljk1IDQuOTVBOCA4IDAgMCAwIDI5LjMxNCA4SDM2IDB6IiBmaWxsPSIjNTQ1NDU0IiBmaWxsLW9wYWNpdHk9Ii45MiIvPjwvc3ZnPg==",blue:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzYiIGhlaWdodD0iOCIgdmlld0JveD0iMCAwIDM2IDgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0wIDhoNi42ODZhOCA4IDAgMCAwIDUuNjU3LTIuMzQzbDQuOTUtNC45NWExIDEgMCAwIDEgMS40MTQgMGw0Ljk1IDQuOTVBOCA4IDAgMCAwIDI5LjMxNCA4SDM2IDB6IiBmaWxsPSIjMTBBMkM1Ii8+PC9zdmc+",border:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAAAQCAYAAAC1MDndAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAADOSURBVHgB7deLDYIwGATgvxswQkdgAxnBERyBETpKncARcAPdoCPIBuc11pgYNaBF2sKXXICEAL1QHkq+AKDiQodsmU1YT0nP7Jkzc/TbSqle5sLSGsZifh3TSKp4cZo54P+6pIt5xottmQum58/RSo5wu5scpuP8OSRnHEDFnBCfP2YlpUDcB7iVEkUqyUqp8Pt0K2tavRJKchjPFV/OHca/3fy+WpaEA64x/DupliXiwHcDysnzIzAWFmA+lGNk9bYkI6uHMN0cEvu3ugKLPi0ttJ0IVQAAAABJRU5ErkJggg=="},c={white:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzYiIGhlaWdodD0iOCIgdmlld0JveD0iMCAwIDM2IDgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMCA4TDYuNjg2MjkgOEM4LjgwODAyIDggMTAuODQyOSA3LjE1NzE0IDEyLjM0MzEgNS42NTY4NUwxNy4yOTI5IDAuNzA3MTA2QzE3LjY4MzQgMC4zMTY1ODIgMTguMzE2NiAwLjMxNjU4MiAxOC43MDcxIDAuNzA3MTA3TDIzLjY1NjkgNS42NTY4NkMyNS4xNTcxIDcuMTU3MTUgMjcuMTkyIDggMjkuMzEzNyA4TDM2IDhMMCA4WiIgZmlsbD0id2hpdGUiLz4KPC9zdmc+",black:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzYiIGhlaWdodD0iOCIgdmlld0JveD0iMCAwIDM2IDgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMCA4TDYuNjg2MjkgOEM4LjgwODAyIDggMTAuODQyOSA3LjE1NzE0IDEyLjM0MzEgNS42NTY4NUwxNy4yOTI5IDAuNzA3MTA2QzE3LjY4MzQgMC4zMTY1ODIgMTguMzE2NiAwLjMxNjU4MiAxOC43MDcxIDAuNzA3MTA3TDIzLjY1NjkgNS42NTY4NkMyNS4xNTcxIDcuMTU3MTUgMjcuMTkyIDggMjkuMzEzNyA4TDM2IDhMMCA4WiIgZmlsbD0iIzI1MjUyNSIvPgo8L3N2Zz4K",blue:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzYiIGhlaWdodD0iOCIgdmlld0JveD0iMCAwIDM2IDgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0wIDhoNi42ODZhOCA4IDAgMCAwIDUuNjU3LTIuMzQzbDQuOTUtNC45NWExIDEgMCAwIDEgMS40MTQgMGw0Ljk1IDQuOTVBOCA4IDAgMCAwIDI5LjMxNCA4SDM2IDB6IiBmaWxsPSIjMTBBMkM1Ii8+PC9zdmc+",border:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAAAQCAYAAAC1MDndAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAADOSURBVHgB7deLDYIwGATgvxswQkdgAxnBERyBETpKncARcAPdoCPIBuc11pgYNaBF2sKXXICEAL1QHkq+AKDiQodsmU1YT0nP7Jkzc/TbSqle5sLSGsZifh3TSKp4cZo54P+6pIt5xottmQum58/RSo5wu5scpuP8OSRnHEDFnBCfP2YlpUDcB7iVEkUqyUqp8Pt0K2tavRJKchjPFV/OHca/3fy+WpaEA64x/DupliXiwHcDysnzIzAWFmA+lGNk9bYkI6uHMN0cEvu3ugKLPi0ttJ0IVQAAAABJRU5ErkJggg=="},p="rotate(180deg)",u="rotate(90deg)",g="rotate(-90deg)",m={bottom:{top:"-8px",left:"50%",marginLeft:"-18px"},bottomLeft:{top:"-8px",left:"25%",marginLeft:"-18px"},bottomRight:{top:"-8px",right:"25%",marginRight:"-18px"},left:{transform:u,right:"-22px",top:"50%",marginTop:"-5px"},leftBottom:{transform:u,right:"-22px",bottom:"25%",marginTop:"5px"},leftTop:{transform:u,right:"-22px",top:"25%"},right:{transform:g,left:"-22px",top:"50%",marginTop:"-5px"},rightBottom:{transform:g,left:"-22px",bottom:"25%",marginTop:"5px"},rightTop:{transform:g,left:"-22px",top:"25%"},top:{transform:p,bottom:"-8px",left:"50%",marginLeft:"-18px"},topLeft:{transform:p,bottom:"-8px",left:"25%",marginLeft:"-18px"},topRight:{transform:p,bottom:"-8px",right:"25%",marginRight:"-18px"}};function h({tooltipTheme:e,themeCtx:{colors:t,isDark:i}}){return"black"===e?{padding:"7.5px 12px",backgroundColor:t.ToastDefault,color:t.ConstTextInverse}:"white"===e?{backgroundColor:i?t.ToastDefault:t.BGPrimary,color:t.TextPrimary,padding:0}:"blue"===e?{backgroundColor:t.ConstSecondary2,color:t.ConstTextInverse,padding:0}:null}const _=({themeCtx:e,themeCtx:{fontFamilies:t},tooltipTheme:i="black",withPadding:o=!0,arrow:n=!0,rtl:a=!1,placement:s="top",arrowStyle:l={}})=>(0,r.iv)({fontFamily:t.Proxima,boxSizing:"border-box",margin:"0",padding:"0",color:"rgba(0, 0, 0, 0.65)",fontSize:"14px",listStyle:"none",fontFeatureSettings:'"tnum"',position:"absolute",zIndex:1060,display:"block",maxWidth:"250px",visibility:"visible","&-hidden":{display:"none"}},function({themeCtx:e,tooltipTheme:t,withPadding:i}){const{fontWeights:o,typography:n}=e;return{"&-inner":(0,r.iv)({textAlign:"left",textDecoration:"none",borderRadius:"8px",fontWeight:o.semiBold},n.P2,h({themeCtx:e,tooltipTheme:t}),i&&{padding:"8px"})}}({themeCtx:e,tooltipTheme:i,withPadding:o}),function({arrow:e,tooltipTheme:t,placement:i,themeCtx:o,arrowStyle:n}){return{"&-arrow":(0,r.iv)({display:e?"block":"none",position:"absolute",width:"36px",height:"8px",backgroundImage:o.isDark?`url(${c[t]})`:`url(${d[t]})`},m[i],n)}}({themeCtx:e,tooltipTheme:i,placement:s,arrow:n,arrowStyle:l}),a&&{direction:"rtl","& *":{direction:"rtl"}}),v=e=>{var{className:t,themeCtx:i,tooltipTheme:a,withPadding:s,rtl:d,arrow:c,prefixCls:p,placement:u,arrowStyle:g}=e,m=(0,o.__rest)(e,["className","themeCtx","tooltipTheme","withPadding","rtl","arrow","prefixCls","placement","arrowStyle"]);return(0,n.jsx)(l.Z,Object.assign({prefixCls:(0,r.cx)(t,_({themeCtx:i,tooltipTheme:a,withPadding:s,rtl:d,arrow:c,placement:u,arrowStyle:g})),placement:u},m),void 0)},y=(0,s.memo)((function(e){var{children:t,fullscreenAdjust:i=!1,placement:r="top",align:l={}}=e,d=(0,o.__rest)(e,["children","fullscreenAdjust","placement","align"]);const c=(0,a.u)(),p=((e,t={})=>(0,s.useMemo)((()=>{let i;switch(e){case"top":case"topLeft":case"topRight":i=[0,-10];break;case"bottom":case"bottomLeft":case"bottomRight":i=[0,10];break;case"leftTop":case"left":case"leftBottom":i=[-10,0];break;default:i=[10,0]}return Object.assign({offset:i},t)}),[t,e]))(r,l);return i?(0,n.jsx)(v,Object.assign({},d,{getTooltipContainer:"undefined"==typeof document?void 0:()=>{var e,t,i,o,n,a,s;return null!==(s=null!==(n=null!==(i=null!==(e=document.fullscreenElement)&&void 0!==e?e:null===(t=document)||void 0===t?void 0:t.webkitCurrentFullScreenElement)&&void 0!==i?i:null===(o=document)||void 0===o?void 0:o.mozFullScreenElement)&&void 0!==n?n:null===(a=document)||void 0===a?void 0:a.msFullscreenElement)&&void 0!==s?s:document.body},destroyTooltipOnHide:{keepParent:!1},themeCtx:c,placement:r,align:p},{children:t}),void 0):(0,n.jsx)(v,Object.assign({},d,{themeCtx:c,placement:r,align:p},{children:t}),void 0)}))},32863:(e,t,i)=>{"use strict";e.exports=i.p+"b3dd0b7f20ed0c4384f1.png"},59126:(e,t,i)=>{"use strict";e.exports=i.p+"25b0d4f3e6779acb114f.png"},6998:(e,t,i)=>{"use strict";e.exports=i.p+"1db62e2b736e1cc835a3.png"},25555:(e,t,i)=>{"use strict";e.exports=i.p+"f1596f39e85631c052c4.png"},22745:(e,t,i)=>{"use strict";e.exports=i.p+"b5b0c8fab7d18dff2e2a.png"},24400:(e,t,i)=>{"use strict";e.exports=i.p+"2097820e1be2c7a06bf8.png"},11723:(e,t,i)=>{"use strict";e.exports=i.p+"a028a67e740da091b89b.png"},40567:(e,t,i)=>{"use strict";e.exports=i.p+"0433f99adc0a040142f6.png"},60871:(e,t,i)=>{"use strict";e.exports=i.p+"d60c66b9f5dc9647f3a3.png"},4825:(e,t,i)=>{"use strict";e.exports=i.p+"c287bca871661e22ee8a.png"},50121:(e,t,i)=>{"use strict";e.exports=i.p+"47624c235266dedd8e4d.png"},21145:(e,t,i)=>{"use strict";e.exports=i.p+"863338800afbd636244a.png"},39198:(e,t,i)=>{"use strict";e.exports=i.p+"113990b20fae6f3bb49b.png"},92326:(e,t,i)=>{"use strict";e.exports=i.p+"f0008e2854620a01f652.png"},27545:(e,t,i)=>{"use strict";e.exports=i.p+"45636daedb8648c2e33c.png"},66185:(e,t,i)=>{"use strict";e.exports=i.p+"5fa49876a48136384338.png"},27051:(e,t,i)=>{"use strict";e.exports=i.p+"d8db931296c3e5645b1e.png"},93394:(e,t,i)=>{"use strict";e.exports=i.p+"045b2fc7c278b9a30dd0.png"},76957:(e,t,i)=>{"use strict";e.exports=i.p+"b39f863c2f9173bc73db.png"},19891:(e,t,i)=>{"use strict";e.exports=i.p+"c65e7ef361482406e0ea.gif"},34994:(e,t,i)=>{"use strict";e.exports=i.p+"b6d3cc69d3525571aef0.gif"},24112:(e,t,i)=>{"use strict";e.exports=i.p+"c4c40812758dc8175106.png"},11580:(e,t,i)=>{"use strict";e.exports=i.p+"0dbff97a224480a207b4.png"},36011:()=>{},97936:()=>{}},e=>{e.O(0,[800,6169,1815,8040,8136,1192,5294,118,4736],(()=>(75470,e(e.s=75470)))),e.O()}]);