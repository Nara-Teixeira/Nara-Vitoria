"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[627],{74577:(e,t,i)=>{i.d(t,{D:()=>n});var o=i(91051);function n(e,t){const{onClick:i,onDoubleClick:n}=e(),r=(0,o.useRef)(0),a=(0,o.useRef)(!1);return(0,o.useCallback)((e=>{r.current&&window.clearTimeout(r.current),a.current?null==n||n(e):(a.current=!0,window.setTimeout((()=>{a.current=!1}),300),r.current=window.setTimeout((()=>{null==i||i(e)}),300))}),t)}},93179:(e,t,i)=>{i.d(t,{Qi:()=>p}),i(11040);var o=i(9236),n=i(91051),r=i(5570),a=i(270),l=i(33642),s=i(24421),d=i(34579),c=i(17133);const u=["video","user"];function p({onShow:e,reportTarget:t}){const{showModal:i}=(0,a.J)(),p=(0,o.qj)(d.bg),{abTestVersion:h}=(0,l.m7)((0,c.Lh)((()=>["abTestVersion"]),[]));return{handleShowReport:(0,n.useCallback)((o=>{null==e||e(o),i(),u.includes(t.report_type)&&"v3"===(0,s.xX)(h,"reasons_api_version")?p.setReasonsAPIVersion(3):p.setReasonsAPIVersion(2),p.showReport(t),r.y.handleShowReport({object_type:t.report_type,type:t.report_type,object_id:t.object_id,play_mode:t.play_mode,poi_id:t.poi_id,aweme_type:t.aweme_type,pic_cnt:t.pic_cnt})}),[p,e,t,i])}}},19092:(e,t,i)=>{i.d(t,{l:()=>li});var o=i(11040),n=i(9236),r=i(91051),a=i(48319),l=i(270),s=i(34579),d=i(80827),c=i(26378),u=i(45274),p=i(83488),h=i(32273),v=i(85640),g=i(63175),m=i(16926),b=i(55198),x=i(10410),y=i(32913);const f=(0,y.Z)("div",{target:"eyl260m0"})((({theme:e})=>({minHeight:"226px",width:"400px",background:e.colors.BGPrimary,borderRadius:"8px",boxShadow:"0px 2px 12px rgba(0, 0, 0, 0.12)",padding:"32px"})),"label:DivWapper;"),_=(0,y.Z)("div",{target:"eyl260m1"})((({theme:e})=>({minHeight:"32px",width:"100%",textAlign:"center",lineHeight:"32px",fontSize:"24px",color:e.colors.TextPrimary})),"label:DivTitle;"),j=(0,y.Z)("div",{target:"eyl260m2"})((({theme:e})=>({margin:"16px 0px 24px",width:"100%",textAlign:"center",lineHeight:"22px",fontSize:"16px",color:e.colors.TextSecondary})),"label:DivDetail;"),k=(0,y.Z)("div",{target:"eyl260m3"})({display:"flex",justifyContent:"space-between"},"label:DivContain;"),w=(0,y.Z)("button",{target:"eyl260m4"})((({theme:e,active:t})=>({width:"164px",height:"46px",flex:"0 1 auto",borderRadius:"4px",padding:"12px 0px",textAlign:"center",fontSize:"16px",cursor:"pointer",lineHeight:"16px",color:t?e.colors.Primary:e.colors.TextPrimary,backgroundColor:e.colors.BGSecondary2,border:` 1px solid ${t?e.colors.Primary:e.colors.TextPrimary}`})),"label:ButtonC;"),S=e=>{var t,i,a;const l=(0,h.Q)(),d=(0,m.fz)(x.K),{onClose:c}=e,u=(0,n.mp)(s.bg,{selector:e=>{const{UserData:t,reportTarget:i}=e;return{UserData:t,reportTarget:i}},dependencies:[]}),p=(0,r.useCallback)((e=>{var t,i;d.blockUser({sec_user_id:null!==(i=null===(t=u.reportTarget)||void 0===t?void 0:t.secUid)&&void 0!==i?i:"",block_type:1}).subscribe((e=>{0===e.status_code&&(c(),b.h.open({content:l("Blocked"),duration:3,widthType:"half"}))}))}),[c,null===(t=u.reportTarget)||void 0===t?void 0:t.secUid,d,l]);return(0,o.jsxs)(f,{children:[(0,o.jsx)(_,{children:l("Web_report_block_who",{username:null===(i=u.reportTarget)||void 0===i?void 0:i.nickname})},void 0),(0,o.jsx)(j,{children:l("Web_report_block_detail",{username:null===(a=u.reportTarget)||void 0===a?void 0:a.nickname})},void 0),(0,o.jsxs)(k,{children:[(0,o.jsx)(w,Object.assign({active:!1,onClick:e.onClose},{children:l("copyright_check_post_popup_cancel")}),void 0),(0,o.jsx)(w,Object.assign({active:!0,onClick:p},{children:l("webdm_block")}),void 0)]},void 0)]},void 0)};var C,P=i(74820),T=i(53364),I=i(73271),D=i(55726),O=i(99116);function R(){return R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},R.apply(this,arguments)}const M=function(e){return r.createElement("svg",R({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 20",width:"1em",height:"1em"},e),C||(C=r.createElement("path",{fill:"#161823",fillRule:"evenodd",d:"M16.667 10c0 .918-.53 1.919-1.73 2.76C13.74 13.595 12 14.165 10 14.165c-2.001 0-3.741-.57-4.937-1.407-1.2-.84-1.73-1.841-1.73-2.76 0-.917.53-1.918 1.73-2.759C6.26 6.404 8 5.833 10 5.833c2.001 0 3.741.57 4.937 1.407 1.2.84 1.73 1.842 1.73 2.76zm1.666 0c0 3.222-3.73 5.833-8.333 5.833-4.602 0-8.333-2.611-8.333-5.833S5.397 4.167 10 4.167c4.602 0 8.333 2.611 8.333 5.833zm-7.083 0a1.25 1.25 0 11-2.5 0 1.25 1.25 0 012.5 0zm1.667 0a2.917 2.917 0 11-5.834 0 2.917 2.917 0 015.834 0z",clipRule:"evenodd"})))};var B;function L(){return L=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},L.apply(this,arguments)}const Z=function(e){return r.createElement("svg",L({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 20",width:"1em",height:"1em"},e),B||(B=r.createElement("path",{fill:"#161823",fillRule:"evenodd",d:"M8.473 3.488a1.25 1.25 0 011.944 1.04v10.943a1.25 1.25 0 01-1.944 1.04L4.331 13.75H2.5c-.69 0-1.25-.56-1.25-1.25v-5c0-.69.56-1.25 1.25-1.25h1.831l4.142-2.762zm.277 1.819l-3.704 2.47a.833.833 0 01-.463.14H2.917v4.166h1.666c.165 0 .326.049.463.14l3.704 2.47V5.307zm5 4.693c0-1.017-.405-1.94-1.063-2.616a.455.455 0 01-.042-.604l.529-.644a.393.393 0 01.576-.045A5.403 5.403 0 0115.417 10c0 1.536-.64 2.924-1.667 3.909a.393.393 0 01-.576-.046l-.53-.643a.455.455 0 01.043-.604A3.736 3.736 0 0013.75 10zm1.673-5.396a.438.438 0 00.038.597A6.645 6.645 0 0117.501 10c0 1.884-.782 3.585-2.04 4.799a.438.438 0 00-.038.597l.54.634c.149.175.413.197.58.04A8.312 8.312 0 0019.167 10c0-2.393-1.01-4.55-2.624-6.07a.401.401 0 00-.58.04l-.54.634z",clipRule:"evenodd"})))};var E;function F(){return F=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},F.apply(this,arguments)}const z=function(e){return r.createElement("svg",F({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 20",width:"1em",height:"1em"},e),E||(E=r.createElement("path",{fill:"#161823",fillRule:"evenodd",d:"M10.724 17.896c-.497.27-1.145.346-1.752-.02a3.015 3.015 0 01-1.462-2.584v-2.08H3.977a2.29 2.29 0 01-2.284-2.631l1.005-6.552a2.29 2.29 0 012.284-1.945H15.38a2.515 2.515 0 012.53 2.176.833.833 0 01.007.112v5.096a.833.833 0 01-.008.111c-.163 1.206-1.203 2.276-2.529 2.257h-1.4l-2.211 4.9c-.21.468-.573.904-1.045 1.16zm3.55-7.724h1.127c.365.006.765-.312.85-.77V4.438a.85.85 0 00-.86-.689h-1.117v6.424zM12.61 3.749H4.968a.624.624 0 00-.624.53v.001L3.34 10.83a.623.623 0 00.624.718h4.38c.46 0 .833.372.833.832v2.912a1.35 1.35 0 00.675 1.168h.003a.184.184 0 00.075-.027.816.816 0 00.319-.376l.002-.004 2.36-5.228V3.75z",clipRule:"evenodd"})))};var A=i(17133),U=i(21407);const V=(0,y.Z)("label",{target:"e1d46yfg0"})((({theme:e})=>({display:"flex",fontFamily:e.fontFamilies.Proxima,fontWeight:e.fontWeights.normal,fontSize:"16px",color:e.colors.TextPrimary,cursor:"pointer"})),"label:LabelCheckbox;"),W=(0,y.Z)("div",{target:"e1d46yfg1"})((({size:e})=>({color:"#fff",position:"relative",height:`${e}px`,lineHeight:`${e}px`})),"label:DivCheckboxSymbol;"),H=(0,y.Z)("input",{target:"e1d46yfg2"})((({selected:e,bordertype:t,theme:i,size:o})=>Object.assign(Object.assign({appearance:"none",width:`${o}px`,height:`${o}px`,border:`1.5px solid ${i.colors.LineSecondary}`,margin:"0 10px -2.5px 0"},e?{border:"none",backgroundColor:i.colors.Primary}:{}),"radio"===t?{borderRadius:"50%"}:{borderRadius:"2px"})),"label:InputCheckbox;"),q=(0,y.Z)("div",{target:"e1d46yfg3"})({pointerEvents:"none",position:"absolute",top:"2px",left:"3px",width:"15px",height:"15px"},"label:DivCheckboxIcon;"),N=(0,r.memo)((function({id:e,value:t,label:i,onChange:n,bordertype:a="radio",style:l={},size:s=22}){const d=(0,r.useCallback)((e=>{n&&n(e.target.checked)}),[n]);return(0,o.jsxs)(V,Object.assign({htmlFor:e,style:l},{children:[(0,o.jsxs)(W,Object.assign({size:s,className:"checkbox-symbol"+(t?" selected":"")},{children:[(0,o.jsx)(H,{bordertype:a,selected:t,id:e,checked:t,type:"checkbox",size:s,onChange:d},void 0),t&&(0,o.jsx)(q,{children:(0,o.jsx)(U.Z,{width:16,height:16},void 0)},void 0)]}),void 0),i]}),void 0)}));var G=i(36488);const $=(0,y.Z)("form",{target:"ezqf9p60"})((({theme:e})=>[(0,G.GI)({theme:e,typography:"H6"}),{zIndex:2,background:e.colors.BGPrimary,borderRadius:"8px",overflow:"hidden",width:"700px",margin:0}]),"label:FormReport;"),Y=(0,y.Z)("div",{target:"ezqf9p61"})((({theme:e})=>({width:"400px",zIndex:2,background:e.colors.BGPrimary,borderRadius:"8px",overflow:"hidden",margin:0})),"label:DivFormBox;"),Q=(0,y.Z)("div",{target:"ezqf9p62"})({display:"flex",alignItems:"center",padding:"24px 24px 16px",height:"72px"},"label:DivFormHeader;"),J=(0,y.Z)("div",{target:"ezqf9p63"})({cursor:"pointer",padding:"6px",height:"32px"},"label:DivBackButton;"),K=(0,y.Z)("div",{target:"ezqf9p64"})({cursor:"pointer",padding:"9px",height:"32px"},"label:DivCloseButton;"),X=(0,y.Z)("h4",{target:"ezqf9p65"})((({theme:e})=>({fontSize:"20px",lineHeight:"32px",color:e.colors.TextPrimary,fontFamily:e.fontFamilies.Proxima,fontWeight:e.fontWeights.bold,textAlign:"rtl"===e.direction?"right":"left",flex:1})),"label:H4FormTitle;");X.defaultProps=Object.assign(Object.assign({},X.defaultProps),{"data-e2e":"report-card-title"});const ee=(0,y.Z)("div",{target:"ezqf9p66"})((({theme:e})=>({borderTop:`1px solid ${e.colors.LineSecondary}`,height:"50vh",overflowY:"auto",overflowX:"hidden",padding:"16px 16px 0px"})),"label:DivRadioWrapper;"),te=(0,y.Z)("div",{target:"ezqf9p67"})((({theme:e})=>({paddingBottom:"8px",paddingLeft:"8px",color:e.colors.TextSecondary,height:"22px",lineHeight:"22px"})),"label:DivSelectText;"),ie=(0,y.Z)("div",{target:"ezqf9p68"})((({theme:e})=>({color:e.colors.TextPrimary,lineHeight:"22px",fontSize:"16px",userSelect:"none"})),"label:DivReasonText;"),oe=(0,y.Z)("label",{target:"ezqf9p69"})((({theme:e})=>({boxSizing:"border-box",minHeight:"54px",display:"flex",flex:"1 1 100%",flexDirection:"row",alignItems:"center",cursor:"pointer",position:"relative",wordBreak:"break-all",justifyContent:"space-between",padding:"8px",borderRadius:"8px",":hover":{background:e.colors.BGPlaceholderOpaque}})),"label:LabelRadio;");oe.defaultProps=Object.assign(Object.assign({},oe.defaultProps),{"data-e2e":"report-card-reason"});const ne=(0,y.Z)("div",{target:"ezqf9p610"})({position:"absolute",left:"50%",top:"50%",transform:"translate(-50% , -50%)"},"label:DivMMid;"),re=(0,y.Z)("div",{target:"ezqf9p611"})((({theme:e})=>({padding:"8px",color:e.colors.TextPrimary,fontSize:"18px",lineHeight:"24px"})),"label:DivTitle;"),ae=(0,y.Z)("div",{target:"ezqf9p612"})((({theme:e})=>({padding:"4px 4px 10px 8px",color:e.colors.TextSecondary,fontSize:"16px",lineHeight:"22px"})),"label:DivSubTitle;"),le=(0,y.Z)("li",{target:"ezqf9p613"})((({theme:e})=>({padding:"6px 6px 6px 0px",color:e.colors.TextSecondary,fontSize:"16px",lineHeight:"22px"})),"label:LiItem;"),se=(0,y.Z)("div",{target:"ezqf9p614"})((({theme:e})=>({position:"absolute",bottom:"0",left:"0",height:"84px",width:"100%",borderTop:`0.5px solid ${e.colors.LinePrimary2}`,backgroundColor:e.colors.BGPrimary})),"label:DivFooter;"),de=(0,y.Z)("button",{target:"ezqf9p615"})((({theme:e})=>({height:"36px",padding:"7px 16px",lineHeight:"22px",fontSize:"16px",position:"absolute",cursor:"pointer",top:"24px",right:"24px",color:e.colors.ConstTextInverse,background:e.colors.Primary,border:"none",borderRadius:"4px",":disabled":{background:e.colors.BGPlaceholderDefault,color:e.colors.TextQuaternary}})),"label:ButtonSubmit;"),ce=(0,y.Z)("div",{target:"ezqf9p616"})((({theme:e,top:t})=>({height:"72px",width:"72px",margin:"32px auto 24px",borderRadius:"36px",background:e.colors.BGView,padding:`${t}px 20px`})),"label:DivIconRoundBg;"),ue=(0,y.Z)("div",{target:"ezqf9p617"})((({theme:e})=>({margin:"0px auto 16px",padding:"0 32px",color:e.colors.TextPrimary,textAlign:"center",lineHeight:"32px",fontSize:"24px"})),"label:DivFinishTitle;"),pe=(0,y.Z)("div",{target:"ezqf9p618"})((({theme:e})=>({margin:"0px auto 24px",padding:"0 32px",color:e.colors.TextSecondary,textAlign:"center",lineHeight:"22px",fontSize:"16px"})),"label:DivFinishContent;"),he=(0,y.Z)("button",{target:"ezqf9p619"})((({theme:e})=>({width:"336px",height:"46px",background:e.colors.Primary,margin:"0 32px 32px",borderRadius:"4px",textAlign:"center",lineHeight:"46px",fontSize:"16px",color:e.colors.ConstTextInverse,border:"none",cursor:"pointer"})),"label:ButtonFinish;"),ve=(0,y.Z)("div",{target:"e9ly1o60"})((({theme:e})=>({width:"400px",minHeight:"394px",background:e.colors.BGPrimary,borderRadius:"8px",overflow:"hidden"})),"label:DivWapper;"),ge=(0,y.Z)("div",{target:"e9ly1o61"})((({theme:e})=>({width:"100%",padding:"32px",textAlign:"center",lineHeight:"32px",fontSize:"24px",color:e.colors.TextPrimary})),"label:DivTitle;"),me=(0,y.Z)("div",{target:"e9ly1o62"})({display:"inline-block",verticalAlign:"middle",marginRight:"8px"},"label:DivIcon;"),be=(0,y.Z)("div",{target:"e9ly1o63"})((({theme:e})=>({height:"52px",margin:"0 33px",position:"relative",textAlign:"center",lineHeight:"52px",fontSize:"16px",color:e.colors.TextPrimary,borderBottom:`solid 1px ${e.colors.LineSecondary}`})),"label:DivRow;"),xe=(0,y.Z)("div",{target:"e9ly1o64"})((({theme:e})=>({height:"32px",paddingTop:"12px",marginBottom:"110px",textAlign:"center",lineHeight:"20px",fontSize:"14px",color:e.colors.Negative})),"label:DivReminder;"),ye=(0,y.Z)("div",{target:"e9ly1o65"})({height:"100%",float:"left",paddingLeft:"32px"},"label:DivReasonText;"),fe=(0,y.Z)("div",{target:"e9ly1o66"})({display:"flex",justifyContent:"space-between",position:"absolute",bottom:"0",width:"100%",padding:"32px"},"label:DivContain;"),_e=(0,y.Z)("button",{target:"e9ly1o67"})((({theme:e,active:t,cancel:i})=>({width:"164px",height:"46px",flex:"0 1 auto",borderRadius:"4px",padding:"12px 0px",textAlign:"center",fontSize:"16px",cursor:"pointer",lineHeight:"16px",color:i?e.colors.TextPrimary:t?e.colors.ConstTextInverse:e.colors.TextQuaternary,backgroundColor:i?e.colors.BGSecondary2:t?e.colors.Primary:e.colors.BGInput2,border:i?`1px solid ${e.colors.LineSecondary2}`:"none"})),"label:ButtonC;"),je=(0,y.Z)("div",{target:"e9ly1o68"})((({top:e})=>({textAlign:"center",margin:`${e}px auto 0px`})),"label:DivMid;"),ke=(0,y.Z)("div",{target:"e9ly1o69"})({position:"absolute",top:"18px",left:"0px",height:"20px",lineHeight:"20px"},"label:DivSvg;"),we=(0,y.Z)("button",{target:"e9ly1o610"})((({theme:e})=>({width:"240px",height:"44px",margin:"80px auto 0px",border:`1px solid ${e.colors.LineSecondary2}`,borderRadius:"2px",textAlign:"center",cursor:"pointer",color:e.colors.TextPrimary,fontSize:"16px",lineHeight:"22px",padding:"11px 0px",background:e.colors.BGTertiary2,display:"block"})),"label:ButtonRetry;"),Se=20,Ce=e=>{var t,i,a,l,d;const c=(0,h.Q)(),{colors:u}=(0,P.u)(),[p,v]=(0,r.useState)(!1),[g,m]=(0,r.useState)([]),[b,x]=(0,r.useState)(!1),y=(0,n.qj)(s.bg),f=(0,n.mp)(s.bg,{selector:e=>{const{lastStatus:t,requesting:i,loading:o,PageState:n,PageStateData:r,UserData:a,reportTarget:l}=e;return{lastStatus:t,requesting:i,loading:o,PageState:n,PageStateData:r,UserData:a,reportTarget:l}},dependencies:[]}),_=(0,r.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),f.reportTarget&&y.getReasons(f.reportTarget)}),[y,f.reportTarget]),j=(0,r.useCallback)((e=>t=>{t.preventDefault(),t.stopPropagation();const i=g.indexOf(e);if(i>-1){const e=[...g];e.splice(i,1),m(e),v(e.length>0)}else{const t=[...g,e];m(t),x(0===t.length),v(t.length>0)}}),[g]),{region:k="",user:w}=null!==(t=(0,A.Lh)((()=>["region","user"]),[]))&&void 0!==t?t:{},S=(0,r.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),g.length>0?y.postReport({reason:g,extraData:null,region:k,uid:null==w?void 0:w.uid}):x(!0)}),[y,g,k,null==w?void 0:w.uid]),C=e=>0===e?(0,o.jsx)(ke,{children:(0,o.jsx)(M,{width:Se,height:Se},void 0)},void 0):1===e?(0,o.jsx)(ke,{children:(0,o.jsx)(Z,{width:Se,height:Se},void 0)},void 0):(0,o.jsx)(ke,{children:(0,o.jsx)(z,{width:Se,height:Se},void 0)},void 0);return(0,o.jsx)(ve,{children:f.loading?(0,o.jsx)(ne,{children:(0,o.jsx)(O.g,{},void 0)},void 0):0===(null===(a=null===(i=f.PageStateData)||void 0===i?void 0:i.reasons)||void 0===a?void 0:a.length)?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(je,Object.assign({top:57},{children:(0,o.jsx)(T.Z,{width:72,height:72},void 0)}),void 0),(0,o.jsx)(je,Object.assign({top:20,style:{fontSize:"18px",lineHeight:"24px",color:u.TextPrimary}},{children:c("pm_mt_live_page_sth_wrong")}),void 0),(0,o.jsx)(je,Object.assign({top:12,style:{fontSize:"16px",lineHeight:"22px",color:u.TextSecondary}},{children:c("pm_mt_live_page_try_again")}),void 0),(0,o.jsxs)(we,Object.assign({onClick:_},{children:[(0,o.jsx)(I.Z,{width:14,height:14,style:{verticalAlign:"middle",marginRight:"8px"}},void 0),c("report_inbox_retry_btn")]}),void 0)]},void 0):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(ge,{children:c("km_report_question")},void 0),null===(d=null===(l=f.PageStateData)||void 0===l?void 0:l.reasons)||void 0===d?void 0:d.map(((e,t)=>(0,o.jsxs)(be,Object.assign({onClick:j(e.reason_type)},{children:[C(t),(0,o.jsx)(ye,{children:e.text},void 0),(0,o.jsx)(N,{style:{position:"absolute",right:"-22px",top:"15px"},bordertype:"checkbox",label:"",value:g.includes(e.reason_type)},void 0)]}),e.reason_type))),b?(0,o.jsxs)(xe,{children:[(0,o.jsx)(me,{children:(0,o.jsx)(D.Z,{width:14,height:14},void 0)},void 0),(0,o.jsx)("span",{children:c("km_pick_reason")},void 0)]},void 0):null,(0,o.jsxs)(fe,{children:[(0,o.jsx)(_e,Object.assign({cancel:!0,active:!1,onClick:e.onClose},{children:c("copyright_check_post_popup_cancel")}),void 0),(0,o.jsx)(_e,Object.assign({cancel:!1,active:p,onClick:S},{children:c("choosepassword_button")}),void 0)]},void 0)]},void 0)},void 0)};var Pe=i(84656),Te=i.n(Pe),Ie=i(33761),De=i(1662),Oe=i(21236);const Re=(0,y.Z)("div",{target:"e1fkwyf80"})({position:"fixed",left:0,top:0,right:0,bottom:0,zIndex:1001},"label:DivPreviewImageContainer;"),Me=(0,y.Z)("div",{target:"e1fkwyf81"})((({theme:e})=>({position:"absolute",left:0,top:0,right:0,bottom:0,background:e.colors.SDPrimary})),"label:DivMaskContainer;"),Be=(0,y.Z)("div",{target:"e1fkwyf82"})({position:"absolute",zIndex:1,left:0,top:0,right:0,bottom:0},"label:DivImageContainer;"),Le=(0,y.Z)("div",{target:"e1fkwyf83"})({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"692px",height:"810px",backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundSize:"contain"},"label:DivPreviewImage;"),Ze=(0,y.Z)("div",{target:"e1fkwyf84"})((({theme:e})=>({position:"absolute",top:"20px",right:"20px",width:"48px",height:"48px",borderRadius:"24px",backgroundColor:e.colors.ConstTextInverse5,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",":hover":{opacity:.7}})),"label:DivIconClose;"),Ee={position:"absolute",top:"50%",transform:"translateY(-50%)",width:"48px",height:"48px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",opacity:.5,":hover":{opacity:1}},Fe=(0,y.Z)("div",{target:"e1fkwyf85"})(Object.assign(Object.assign({},Ee),{left:"32px"}),"label:DivIconPrev;"),ze=(0,y.Z)("div",{target:"e1fkwyf86"})(Object.assign(Object.assign({},Ee),{left:"auto",right:"32px"}),"label:DivIconNext;"),Ae=(0,r.memo)((function({imgList:e,defaultIndex:t,onClose:i}){const[n,a]=(0,r.useState)(t>e.length-1?e.length-1:t<0?0:t),{showModal:s,hideModal:d}=(0,l.J)();(0,r.useEffect)((()=>(s(),()=>{d()})),[s,d]);const p=(0,r.useCallback)((()=>{null==i||i()}),[i]),h=(0,r.useCallback)((()=>a((e=>e-1))),[]),v=(0,r.useCallback)((()=>a((e=>e+1))),[]);return(0,o.jsxs)(Re,{children:[(0,o.jsx)(Me,{},void 0),(0,o.jsxs)(Be,{children:[(0,o.jsx)(Le,{style:{backgroundImage:`url(${e[n]})`}},void 0),(0,o.jsx)(Ze,Object.assign({onClick:p},{children:(0,o.jsx)(Ie.Z,{height:24,width:24,fill:"#fff"},void 0)}),void 0),n>0&&(0,o.jsx)(Fe,Object.assign({onClick:h},{children:(0,o.jsx)(u.Z,{height:30,width:30,fill:"#fff"},void 0)}),void 0),n<e.length-1&&(0,o.jsx)(ze,Object.assign({onClick:v},{children:(0,o.jsx)(c.Z,{height:30,width:30,fill:"#fff"},void 0)}),void 0)]},void 0)]},void 0)})),Ue=(0,y.Z)("div",{target:"e183km5u0"})((({theme:e})=>({fontFamily:e.fontFamilies.Proxima,fontWeight:e.fontWeights.normal,display:"flex",flexWrap:"wrap"})),"label:DivUploadImageContainer;"),Ve=(0,y.Z)("div",{target:"e183km5u1"})((({theme:e,size:t})=>({boxSizing:"border-box",width:`${t}px`,height:`${t}px`,display:"flex",alignItems:"center",flexDirection:"column",background:e.colors.BGInput,borderRadius:"2px",overflow:"hidden",cursor:"pointer",paddingTop:(t-30)/2+"px"})),"label:DivImageUploadElement;"),We=(0,y.Z)("div",{target:"e183km5u2"})((({theme:e,size:t})=>({width:`${t}px`,height:`${t}px`,marginRight:"12px",position:"relative",borderRadius:"2px",overflow:"hidden",cursor:"pointer",":before":{content:'""',position:"absolute",width:"200%",height:"200%",borderRadius:"4px",border:`1px solid ${e.colors.LineSecondary}`,transform:"scale(.5)",left:"-50%",top:"-50%",boxSizing:"border-box"},img:{objectFit:"cover",zIndex:3,transform:"translateZ(10px)"}})),"label:DivImageItem;"),He=(0,y.Z)("span",{target:"e183km5u3"})({position:"absolute",display:"flex",boxSizing:"border-box",padding:"5px",top:0,right:0,width:"16px",height:"16px",background:"rgba(22, 24, 35, 0.75)",borderBottomLeftRadius:"2px",cursor:"pointer"},"label:SpanClose;"),qe=(0,y.Z)("span",{target:"e183km5u4"})((({theme:e})=>({fontSize:"12px",lineHeight:"15px",color:e.colors.TextTertiary,marginTop:"4px"})),"label:SpanImageNumber;"),Ne=(0,y.Z)("input",{target:"e183km5u5"})({display:"none",width:0,height:0},"label:InputImage;"),Ge=(0,y.Z)("div",{target:"e183km5u6"})({position:"absolute",left:"50%",top:"50%",transform:"translate(-50% , -50%)"},"label:DivMid;");let $e=0;const Ye=Number(1048576),Qe=(e,t)=>e>=5242880?t?.1:.2:e>=1572864?t?.3:.5:e>=524288?t?.4:.6:t?.6:.8,Je=(0,r.memo)((function({max:e,onChange:t,size:i=72}){const n=(0,m.fz)(Oe.r),[a,l]=(0,r.useState)([]),[s,d]=(0,r.useState)(0),[c,u]=(0,r.useState)(!1),p=(0,r.useRef)([]),{colors:h}=(0,P.u)(),v=(0,r.useCallback)((t=>{const i=[],o=t.target.files,n=e-a.length;if(o){const e=o.length>n?n:o.length;for(let t=0;t<e;t++)if(o[t].type.match("image")){const n=new FileReader;n.readAsDataURL(o[t]),n.onload=t=>{i.push({id:$e++,uri:t.target.result,uploaded:!1}),i.length===e&&l((e=>[...e,...i]))},p.current.push(o[t])}t.target.value=""}}),[e,a.length]),g=(0,r.useCallback)((e=>()=>{d(e),u(!0)}),[]),b=(0,r.useCallback)((e=>{const t=p.current[e];new(Te())(t,{quality:Qe(t.size),convertSize:Ye,success:i=>{p.current[e]=i,i.with=t.width,i.height=t.height,n.uploadImage([i]).subscribe((t=>{const o=[...a];o[e]=Object.assign(Object.assign(Object.assign({},o[e]),t.data[0]),{size:i.size,uploaded:!0}),l(o)}))}})}),[a,p,n]),x=e=>()=>{const t=a.slice();t.splice(e,1),l(t),p.current.splice(e,1)},y=(0,r.useCallback)((()=>{u(!1)}),[]);return(0,r.useEffect)((()=>{a.forEach(((e,t)=>{!1===a[t].uploaded&&b(t)})),t(a)}),[a,t,b]),(0,o.jsxs)("div",{children:[(0,o.jsxs)(Ue,{children:[a.map(((e,t)=>(0,o.jsxs)(We,Object.assign({size:i},{children:[(0,o.jsx)("img",{src:e.uri,width:i,height:i,style:e.uploaded?{}:{filter:"blur(1px)"},onClick:g(t)},void 0),(0,o.jsx)(He,Object.assign({className:"close",onClick:x(t)},{children:(0,o.jsx)(Ie.Z,{width:7,height:7,fill:"#fff"},void 0)}),void 0),e.uploaded?null:(0,o.jsx)(Ge,{children:(0,o.jsx)(O.g,{size:20},void 0)},void 0)]}),e.id))),c&&(0,o.jsx)(Ae,{defaultIndex:s,imgList:a.map((e=>e.uri)),onClose:y},void 0),e<=a.length?null:(0,o.jsx)("label",Object.assign({htmlFor:"upload-image-file"},{children:(0,o.jsxs)(Ve,Object.assign({size:i},{children:[(0,o.jsx)(De.Z,{height:30,width:30,fill:h.TextTertiary},void 0),(0,o.jsxs)(qe,Object.assign({className:"img-number"},{children:[a.length,"/",e]}),void 0)]}),void 0)}),void 0)]},void 0),(0,o.jsx)(Ne,{multiple:!0,className:"file-input",accept:"image/png,image/jpeg,image/jpg,image/bmp",type:"file",onChange:v,id:"upload-image-file"},void 0)]},void 0)}));const Ke=(0,y.Z)("div",{target:"egyld0v0"})({height:"580px",padding:"0px",overflowY:"auto",overflowX:"hidden",paddingBottom:"84px"},"label:DivKopigContainer;"),Xe=(0,y.Z)("div",{target:"egyld0v1"})({display:"flex",flexDirection:"column",alignItems:"stretch",padding:"0px"},"label:DivScrollContainer;"),et=(0,y.Z)("div",{target:"egyld0v2"})({display:"flex",flexDirection:"row",justifyContent:"center",boxSizing:"border-box",padding:"16px 24px 12px"},"label:DivSectionHeader;"),tt=(0,y.Z)("div",{target:"egyld0v3"})((({theme:e})=>({display:"flex",flexDirection:"row",boxSizing:"border-box",fontSize:"16px",padding:"16px 24px",lineHeight:"22px",color:e.colors.TextSecondary,backgroundColor:e.colors.BGView,marginBottom:"8px"})),"label:DivSectionLine;"),it=(0,y.Z)("span",{target:"egyld0v4"})((({theme:e})=>({flex:1,fontSize:"18px",lineHeight:"24px",fontFamily:e.fontFamilies.Proxima,fontWeight:e.fontWeights.semiBold,color:e.colors.TextPrimary})),"label:SpanSectionTitle;"),ot=(0,y.Z)("span",{target:"egyld0v5"})((({theme:e})=>({fontSize:"16px",lineHeight:"22px",color:e.colors.TextSecondary})),"label:SpanWordCount;"),nt=e=>({borderStyle:"none",borderColor:"transparent",boxShadow:"none",outline:"none",margin:"0px 24px",borderRadius:"4px",fontSize:"16px",fontFamily:e.fontFamilies.Proxima,fontWeight:e.fontWeights.normal,color:e.colors.TextPrimary,":placeholder":{color:e.colors.TextTertiary}}),rt=(0,y.Z)("textarea",{target:"egyld0v6"})((({theme:e})=>Object.assign(Object.assign({},nt(e)),{resize:"none",height:"80px",backgroundColor:e.colors.BGPrimary})),"label:TextareaDescription;"),at=(0,y.Z)("input",{target:"egyld0v7"})((({theme:e})=>Object.assign(Object.assign({},nt(e)),{borderBottom:`1px solid ${e.colors.LineSecondary}`,height:"40px",backgroundColor:e.colors.BGPrimary})),"label:InputSignature;"),lt=(0,y.Z)("div",{target:"egyld0v8"})({margin:"4px 24px"},"label:DivImageUploader;"),st=(0,y.Z)("div",{target:"egyld0v9"})((({theme:e})=>({marginTop:"4px",fontFamily:e.fontFamilies.Proxima,fontWeight:e.fontWeights.normal,fontSize:"12px",color:e.colors.Primary})),"label:DivFileSizeWarning;"),dt=(0,y.Z)("div",{target:"egyld0v10"})({fontSize:"16px",lineHeight:"24px",padding:"16px 24px 0"},"label:DivCheckboxConfirm;"),ct=(0,y.Z)("div",{target:"egyld0v11"})((({theme:e})=>({marginTop:"20px",padding:"0px 24px",fontSize:"14px",lineHeight:"20px",color:e.colors.TextSecondary})),"label:DivInfo;"),ut=(0,r.memo)((function(){var e,t;const i=(0,h.Q)(),a=(0,n.qj)(s.bg),l=(0,n.mp)(s.bg,{selector:e=>{const{UserData:t,PreState:i,reasonsAPIVersion:o,PageState:n,reasons:r}=e;return{UserData:t,PreState:i,reasonsAPIVersion:o,PageState:n,reasons:r}},dependencies:[]}),[d,c]=(0,r.useState)(""),[u,p]=(0,r.useState)([]),[v,g]=(0,r.useState)(""),[m,b]=(0,r.useState)(!1),[x,y]=(0,r.useState)(!1),[f,_]=(0,r.useState)(!1),[j,k]=(0,r.useState)(!1),w=(0,r.useMemo)((()=>{var e,t,i,o,n,r,a;return 3===l.reasonsAPIVersion&&(null===(e=l.UserData)||void 0===e?void 0:e.selectedReason).reason_code?null!==(o=null===(i=null===(t=l.UserData)||void 0===t?void 0:t.selectedReason)||void 0===i?void 0:i.reason_code)&&void 0!==o?o:0:null!==(a=null===(r=null===(n=l.UserData)||void 0===n?void 0:n.selectedReason)||void 0===r?void 0:r.reason_type)&&void 0!==a?a:0}),[l.reasonsAPIVersion]);(0,r.useEffect)((()=>{const e=u.some((e=>!0!==e.uploaded));8===l.PageState||!e&&!x&&m&&v.length>0?_(!0):_(!1)}),[d,u,v,m,x]);const S=(0,r.useCallback)((e=>{y(!1);for(const t of e)t.size&&t.size>20971520&&y(!0);p(e)}),[]),C=(0,r.useCallback)((e=>{e.stopPropagation()}),[]),P=(0,r.useCallback)((e=>c(e.target.value)),[]),T=(0,r.useCallback)((e=>g(e.target.value)),[]),I=(0,r.useCallback)((e=>b(e)),[]),D=(0,r.useCallback)((e=>k(e)),[]),{region:O="",user:R}=null!==(e=(0,A.Lh)((()=>["region","user"]),[]))&&void 0!==e?e:{},M=(0,r.useMemo)((()=>{var e,t,i,o;if(3===l.reasonsAPIVersion){const i=JSON.parse(null!==(t=null===(e=l.UserData.selectedReason)||void 0===e?void 0:e.option)&&void 0!==t?t:"{}");return"tags"in i&&i.tags.includes("avia")}return 8===(null===(o=null===(i=l.UserData)||void 0===i?void 0:i.selectedReason)||void 0===o?void 0:o.special_type)}),[l.UserData.selectedReason,l.reasonsAPIVersion]),B=(0,r.useCallback)((()=>{var e,t,i;const o=function(e,t){for(const t of e)if(9014===t.reason_code)return t;return null}(null!==(e=l.reasons)&&void 0!==e?e:[]);o&&(a.setUserData({selectedReason:o,HistoryReason:[...null!==(t=l.UserData.HistoryReason)&&void 0!==t?t:[],o]}),a.handleNextReason({nextReason:null!==(i=o.next_reason)&&void 0!==i?i:[],reason_id:o.reason_code}),a.setPageState(0))}),[]),L=(0,r.useCallback)((e=>{if(j)return e.preventDefault(),e.stopPropagation(),void B();if(e.preventDefault(),e.stopPropagation(),w&&f){const e={is_netzdg:1,report_desc:d,uri:u.map((e=>e.url)).join(","),report_signature:v};a.postReport({reason:w,extraData:e,region:O,uid:null==R?void 0:R.uid})}}),[d,u,v,w,f,a,j,O,null==R?void 0:R.uid]);return(0,o.jsxs)(Ke,{children:[(0,o.jsxs)(Xe,{children:[(0,o.jsx)(tt,{children:`${i("Web_report_reason_select")} ${null===(t=l.UserData.selectedReason)||void 0===t?void 0:t.text}`},void 0),(0,o.jsxs)(et,{children:[(0,o.jsx)(it,{children:i("Web_report_description")},void 0),(0,o.jsxs)(ot,{children:[d.length,"/",200]},void 0)]},void 0),(0,o.jsx)(rt,{rows:5,maxLength:200,placeholder:i("Please provide as much detail as possible"),value:d,onChange:P,onKeyDown:C},void 0),(0,o.jsxs)(lt,{children:[(0,o.jsx)(Je,{max:4,onChange:S},void 0),x&&(0,o.jsx)(st,{children:i("attachment_upload_limit")},void 0)]},void 0),8===l.PageState?(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(dt,{children:(0,o.jsx)(N,{label:i("Web_report_description_NetzDG"),value:j,onChange:D},void 0)},void 0)},void 0):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(et,{children:(0,o.jsx)(it,{children:i("Signature")},void 0)},void 0),(0,o.jsx)(at,{placeholder:i("Sign_here"),value:v,maxLength:100,onChange:T,onKeyDown:C},void 0),(0,o.jsx)(dt,{children:(0,o.jsx)(N,{label:i("Report_confirmation"),value:m,onChange:I},void 0)},void 0)]},void 0),M&&(0,o.jsx)(ct,{children:i("avia_law_false_report_warning")},void 0),(0,o.jsx)(ct,{children:i("Web_report_description_tips")},void 0)]},void 0),(0,o.jsx)(se,{children:(0,o.jsx)(de,Object.assign({disabled:!f,onClick:L},{children:i("Submit")}),void 0)},void 0)]},void 0)})),pt=(0,y.Z)("div",{target:"e10dth7g0"})((({top:e})=>({textAlign:"center",margin:`${e}px auto 0px`})),"label:DivMid;"),ht=(0,y.Z)("button",{target:"e10dth7g1"})((({theme:e})=>({width:"240px",height:"44px",margin:"133px auto 0px",border:`1px solid ${e.colors.LineSecondary2}`,borderRadius:"2px",textAlign:"center",cursor:"pointer",color:e.colors.TextPrimary,fontSize:"16px",lineHeight:"22px",padding:"11px 0px",background:e.colors.BGTertiary2,display:"block"})),"label:ButtonRetry;");var vt=i(85712),gt=i.n(vt);const mt=()=>{var e,t,i,a,l;const d=(0,h.Q)(),{isRTL:p}=(0,g.Y)(),{user:v,region:m=""}=null!==(e=(0,A.Lh)((()=>["user","region"]),[]))&&void 0!==e?e:{},b=(0,n.qj)(s.bg),{colors:x}=(0,P.u)(),y=(0,n.mp)(s.bg,{selector:e=>{const{lastStatus:t,requesting:i,loading:o,PageState:n,PageStateData:r,UserData:a,reportTarget:l,reasonsAPIVersion:s}=e;return{lastStatus:t,requesting:i,loading:o,PageState:n,PageStateData:r,UserData:a,reportTarget:l,reasonsAPIVersion:s}},dependencies:[]}),f=(0,r.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),y.reportTarget&&b.getReasons(y.reportTarget)}),[b,y.reportTarget]),_=e=>3===y.reasonsAPIVersion&&e.reason_code?e.reason_code:e.reason_type,j=(0,r.useCallback)((e=>t=>{var i,o,n,r,a,l,d,c,u,p,h,g,x,f,j,k,w,S,C,P,T,I,D,O,R,M,B,L,Z,E,F,z,A;t.preventDefault(),t.stopPropagation();let U=null===(o=null===(i=y.PageStateData)||void 0===i?void 0:i.reasons)||void 0===o?void 0:o.find((t=>_(t)===e));if(U&&b.setUserData({selectedReason:U,HistoryReason:[...null!==(n=y.UserData.HistoryReason)&&void 0!==n?n:[],U]}),U)if(3===y.reasonsAPIVersion){U=U;const e=Boolean(v),t=null!==(r=U.next_reason)&&void 0!==r?r:[],i=JSON.parse(null!==(a=U.option)&&void 0!==a?a:"{}"),{action:o,tags:n}=i;if(n&&gt()(n)&&n.length>0)for(const t of n)if([s.yG.webappNeedLoginLegal,s.yG.webappNeedLoginNetzdg,s.yG.webappNeedLoginAvia].includes(t)){let i=null;switch(t){case s.yG.webappNeedLoginLegal:i=(0,s.yM)({reportTarget:y.reportTarget});break;case s.yG.webappNeedLoginNetzdg:(!e&&"video"===(null===(l=y.reportTarget)||void 0===l?void 0:l.report_type)||!e&&"comment"===(null===(d=y.reportTarget)||void 0===d?void 0:d.report_type))&&(i=(0,s.Hx)({reportTarget:y.reportTarget}));break;case s.yG.webappNeedLoginAvia:(!e&&"video"===(null===(c=y.reportTarget)||void 0===c?void 0:c.report_type)||!e&&"comment"===(null===(u=y.reportTarget)||void 0===u?void 0:u.report_type))&&(i=(0,s.g0)({reportTarget:y.reportTarget}))}if(i)return void window.open(i,"_blank","noopener,noreferrer")}if(t.length>0)b.handleNextReason({nextReason:null!==(p=U.next_reason)&&void 0!==p?p:[],reason_id:U.reason_code});else switch(o.action_type){case"jumpToUrl":const e=function(e,t){var i;const o={},n=function(e){if("string"==typeof e){let t={};try{t=JSON.parse(e)}catch(e){return{}}return t}return e}(e);for(const[e]of Object.entries(n)){const r=n[e];if("string"==typeof r){const n=r.split(".");let a=t;for(;n.length>0&&void 0!==a;)a=a[null!==(i=n.shift())&&void 0!==i?i:""];o[e]=a}}return o}(null!==(g=null===(h=null==o?void 0:o.action_params)||void 0===h?void 0:h.body_content)&&void 0!==g?g:{},null!==(x=y.reportTarget)&&void 0!==x?x:{}),t=`https://tiktok.com/@${null===(f=y.reportTarget)||void 0===f?void 0:f.owner_id}/video/${null===(j=y.reportTarget)||void 0===j?void 0:j.object_id}`,i=Object.assign(Object.assign({},e),{reporturl:t,url_type:null===(k=y.reportTarget)||void 0===k?void 0:k.report_type,report_id:"user"===(null===(w=y.reportTarget)||void 0===w?void 0:w.report_type)?null===(S=y.reportTarget)||void 0===S?void 0:S.owner_id:null===(C=y.reportTarget)||void 0===C?void 0:C.object_id}),n=function(e,t){const i=function(e){const t=[];for(const[i]of Object.entries(e)){const o=`${i}=${encodeURIComponent(e[i])}`;t.push(o)}return t.join("&")}(t);return e.indexOf("?")>-1?`${e}&${i}`:`${e}?${i}`}(null!==(P=o.action_params.url)&&void 0!==P?P:"",i);window.open(n,"_blank","noopener,noreferrer");break;case"submit":(null===(I=null===(T=y.UserData)||void 0===T?void 0:T.selectedReason)||void 0===I?void 0:I.reason_code)&&b.postReport({reason:null===(O=null===(D=y.UserData)||void 0===D?void 0:D.selectedReason)||void 0===O?void 0:O.reason_code,extraData:null,region:m,uid:null==v?void 0:v.uid});break;default:const r=o.action_params.route_path||"Desc";b.handleNextForm(s.Ly[r])}}else{U=U;const e=Boolean(v);let t=null;switch(U.special_type){case 2:t=(0,s.yM)({reportTarget:y.reportTarget});break;case 6:(!e&&"video"===(null===(R=y.reportTarget)||void 0===R?void 0:R.report_type)||!e&&"comment"===(null===(M=y.reportTarget)||void 0===M?void 0:M.report_type))&&(t=(0,s.Hx)({reportTarget:y.reportTarget}));break;case 8:(!e&&"video"===(null===(B=y.reportTarget)||void 0===B?void 0:B.report_type)||!e&&"comment"===(null===(L=y.reportTarget)||void 0===L?void 0:L.report_type))&&(t=(0,s.g0)({reportTarget:y.reportTarget}))}if(t)return b.popHistoryReason(),void window.open(t,"_blank","noopener,noreferrer");!U||Boolean(null===(Z=U.next_reason)||void 0===Z?void 0:Z.length)?b.handleNextReason({nextReason:null!==(E=U.next_reason)&&void 0!==E?E:[],reason_id:U.reason_type}):[1,4].includes(U.special_type)&&(null===(F=y.PageStateData)||void 0===F?void 0:F.reasons)&&U.reason_type!==(null===(z=y.PageStateData)||void 0===z?void 0:z.reasons[0]).reason_type?b.handleNextForm(3):y.UserData.HistoryReason&&[...s.wC,...s.T].includes(null===(A=y.UserData.HistoryReason[0])||void 0===A?void 0:A.reason_type)||[8].includes(U.special_type)?b.handleNextForm(2):b.handleNextForm(1)}}),[y.PageStateData,b,y.UserData.HistoryReason,v,y.reportTarget]);return(0,o.jsx)(ee,{children:y.loading?(0,o.jsx)(ne,{children:(0,o.jsx)(O.g,{},void 0)},void 0):0===(null===(i=null===(t=y.PageStateData)||void 0===t?void 0:t.reasons)||void 0===i?void 0:i.length)?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(pt,Object.assign({top:57},{children:(0,o.jsx)(T.Z,{width:72,height:72},void 0)}),void 0),(0,o.jsx)(pt,Object.assign({top:20,style:{fontSize:"18px",lineHeight:"24px",color:x.TextPrimary}},{children:d("pm_mt_live_page_sth_wrong")}),void 0),(0,o.jsx)(pt,Object.assign({top:12,style:{fontSize:"16px",lineHeight:"22px",color:x.TextSecondary}},{children:d("pm_mt_live_page_try_again")}),void 0),(0,o.jsxs)(ht,Object.assign({onClick:f},{children:[(0,o.jsx)(I.Z,{width:14,height:14,style:{verticalAlign:"middle",marginRight:"8px"}},void 0),d("report_inbox_retry_btn")]}),void 0)]},void 0):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(te,{children:d("Please select a scenario")},void 0),null===(l=null===(a=y.PageStateData)||void 0===a?void 0:a.reasons)||void 0===l?void 0:l.map((e=>{var t,i,n,r;if(3===y.reasonsAPIVersion){const o=JSON.parse(null!==(t=e.option)&&void 0!==t?t:"{}").tags||[];if(o.includes("hideWebappReason"))return null;if(o.includes("flattenReasonList")){const t=null!==(i=e.next_reason)&&void 0!==i?i:[];if(t.length>0){const i=[...null!==(r=null===(n=y.PageStateData)||void 0===n?void 0:n.reasons)&&void 0!==r?r:[]],o=i.findIndex((t=>t.reason_code===e.reason_code));i.splice(o,1),i.push(...t),b.setReasons(i)}return null}}return(0,o.jsxs)(oe,Object.assign({onClick:j(_(e))},{children:[(0,o.jsx)(ie,{children:e.text},void 0),p?(0,o.jsx)(u.Z,{style:{color:x.TextTertiary},width:20,height:20},void 0):(0,o.jsx)(c.Z,{style:{color:x.TextTertiary},width:20,height:20},void 0)]}),_(e))}))]},void 0)},void 0)};var bt=i(64260),xt=i(62960);const yt=(0,y.Z)("div",{target:"eshtx6u0"})((({theme:e})=>({borderTop:`1px solid ${e.colors.LineSecondary}`,margin:"0 15px",paddingTop:"30px"})),"label:DivUserBlockSection;"),ft=(0,y.Z)("div",{target:"eshtx6u1"})((({theme:e})=>({fontSize:"13px",lineHeight:"17px",color:e.colors.TextTertiary,paddingLeft:"12px"})),"label:DivUserBlockTitle;"),_t=(0,y.Z)("div",{target:"eshtx6u2"})({marginTop:"13px",height:"46px",paddingLeft:"12px",marginBottom:"24px"},"label:DivUserBlock;"),jt=(0,y.Z)("div",{target:"eshtx6u3"})((({theme:e})=>({width:"46px",height:"46px",marginRight:"13px",display:"inline-block",float:"left",backgroundColor:e.colors.BGInput,padding:"11px",borderRadius:"50%"})),"label:DivUserBlockIcon;"),kt=(0,y.Z)("div",{target:"eshtx6u4"})((({theme:e})=>({lineHeight:"46px",height:"46px",fontSize:"15px",color:e.colors.TextPrimary,display:"inline-block",float:"left"})),"label:DivUserBlockName;"),wt=({onClose:e})=>{var t,i,a,l,d;const c=(0,h.Q)(),u=(0,n.qj)(s.bg),{colors:p}=(0,P.u)(),v=(0,n.mp)(s.bg,{selector:e=>{const{UserData:t,reportTarget:i,reasonsAPIVersion:o}=e;return{reportTarget:i,UserData:t,reasonsAPIVersion:o}},dependencies:[]}),[g,m]=(0,r.useState)();(0,r.useEffect)((()=>{var e,t;3===v.reasonsAPIVersion&&m(JSON.parse(null!==(t=null===(e=v.UserData.selectedReason)||void 0===e?void 0:e.option)&&void 0!==t?t:"{}"))}),[v.reasonsAPIVersion]);const b=(0,r.useCallback)((()=>{e()}),[e]),x=(0,r.useCallback)((()=>{u.handleNextForm(4)}),[u]),{submitresult:y}=v.UserData,{title:f="Thanks",content:_="We’ll review your report and if there is a violation of our Community Guidelines, we’ll take appropriate action.",button:j="Done",success:k=!0}=null!=y?y:{};return(0,o.jsxs)("div",{children:[(0,o.jsx)(ce,Object.assign({top:k?25:20},{children:k?(0,o.jsx)(U.Z,{width:32,height:22,style:{color:p.Positive}},void 0):(0,o.jsx)(bt.Z,{width:32,height:32},void 0)}),void 0),(0,o.jsx)(ue,{children:null!==(t=c(f))&&void 0!==t?t:f},void 0),(0,o.jsx)(pe,{children:_},void 0),"user"===(null===(i=v.reportTarget)||void 0===i?void 0:i.report_type)&&3!==v.reasonsAPIVersion||3===v.reasonsAPIVersion&&"user"===(null===(a=v.reportTarget)||void 0===a?void 0:a.report_type)&&!(null==g?void 0:g.tags.includes("hideBlockUser"))?(0,o.jsxs)(yt,Object.assign({onClick:x},{children:[(0,o.jsx)(ft,{children:c("Web_report_you_can_also")},void 0),(0,o.jsxs)(_t,{children:[(0,o.jsx)(jt,{children:(0,o.jsx)(xt.Z,{width:24,height:24},void 0)},void 0),(0,o.jsxs)(kt,{children:[c("webdm_block")," ",null===(l=v.reportTarget)||void 0===l?void 0:l.nickname]},void 0)]},void 0)]}),void 0):null,(0,o.jsx)(he,Object.assign({onClick:b},{children:null!==(d=c(j))&&void 0!==d?d:j}),void 0)]},void 0)},St=()=>{var e,t,i,a,l,d,c,u,p,v,g,m;const b=(0,h.Q)(),x=(0,n.qj)(s.bg),y=(0,n.mp)(s.bg,{selector:e=>{const{UserData:t,reportTarget:i,reasonsAPIVersion:o}=e;return{UserData:t,reportTarget:i,reasonsAPIVersion:o}},dependencies:[]}),{region:f="",user:_}=null!==(e=(0,A.Lh)((()=>["region","user"]),[]))&&void 0!==e?e:{},[j,k]=(0,r.useState)({title:"",subtitle:"",introduction:""}),[w,S]=(0,r.useState)(),C=(0,r.useCallback)((e=>{var t,i,o,n,r,a,l,s;e.preventDefault(),e.stopPropagation(),3!==y.reasonsAPIVersion&&(null===(i=null===(t=y.UserData)||void 0===t?void 0:t.selectedReason)||void 0===i?void 0:i.reason_type)?x.postReport({reason:null===(n=null===(o=y.UserData)||void 0===o?void 0:o.selectedReason)||void 0===n?void 0:n.reason_type,extraData:null,region:f,uid:null==_?void 0:_.uid}):(null===(a=null===(r=y.UserData)||void 0===r?void 0:r.selectedReason)||void 0===a?void 0:a.reason_code)&&x.postReport({reason:null===(s=null===(l=y.UserData)||void 0===l?void 0:l.selectedReason)||void 0===s?void 0:s.reason_code,extraData:null,region:f,uid:null==_?void 0:_.uid})}),[x,null===(i=null===(t=y.UserData)||void 0===t?void 0:t.selectedReason)||void 0===i?void 0:i.reason_type,null===(l=null===(a=y.UserData)||void 0===a?void 0:a.selectedReason)||void 0===l?void 0:l.reason_code,f,null==_?void 0:_.uid]);return(0,r.useEffect)((()=>{if(y.UserData.selectedReason){const e=JSON.parse(y.UserData.selectedReason.option)||{};3===y.reasonsAPIVersion?S(e):k(e.intro||{})}}),[]),(0,o.jsx)(ee,{children:3!==y.reasonsAPIVersion?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(re,{children:j.title},void 0),(0,o.jsx)(ae,{children:j.subtitle},void 0),(0,o.jsx)("ul",Object.assign({style:{margin:"0px",paddingInlineStart:"26px",paddingBottom:"84px"}},{children:(j.introduction||"").split("\n").map((e=>(0,o.jsx)(le,{children:(0,o.jsx)("span",{children:e},void 0)},e)))}),void 0),(0,o.jsx)(se,{children:(0,o.jsx)(de,Object.assign({onClick:C},{children:b("Submit")}),void 0)},void 0)]},void 0):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(re,{children:null===(c=null===(d=null==w?void 0:w.action)||void 0===d?void 0:d.action_params)||void 0===c?void 0:c.title_text},void 0),(0,o.jsx)(ae,{children:null===(p=null===(u=null==w?void 0:w.action)||void 0===u?void 0:u.action_params)||void 0===p?void 0:p.subtitle_text},void 0),(0,o.jsx)("ul",Object.assign({style:{margin:"0px",paddingInlineStart:"26px",paddingBottom:"84px"}},{children:(null!==(m=null===(g=null===(v=null==w?void 0:w.action)||void 0===v?void 0:v.action_params)||void 0===g?void 0:g.desc_text)&&void 0!==m?m:[]).map((e=>(0,o.jsx)(le,{children:(0,o.jsx)("span",{children:e},void 0)},e)))}),void 0),(0,o.jsx)(se,{children:(0,o.jsx)(de,Object.assign({onClick:C},{children:b("Submit")}),void 0)},void 0)]},void 0)},void 0)};var Ct=i(88146),Pt=i(19380),Tt=i(45712);const It=(0,i(28327).F4)({"0%":{transform:"rotate(0deg)"},"50%":{transform:"rotate(180deg)"},"100%":{transform:"rotate(360deg)"}}),Dt=(0,y.Z)("div",{target:"e1n5v3jy0"})({animation:`${It} 1s ease-out infinite`,width:"16px",height:"16px"},"label:DivRotate;"),Ot=(0,y.Z)("input",{target:"e1n5v3jy1"})((({theme:e})=>({borderTop:"0px",borderLeft:"0px",borderRight:"0px",borderBottom:`1px solid ${e.colors.LineSecondary}`,fontSize:"16px",width:"100%",padding:"14px 0px",lineHeight:"22px",outline:"none",marginTop:"14px",background:e.colors.BGPrimary,color:e.colors.TextPrimary})),"label:InputUser;"),Rt=(0,y.Z)("div",{target:"e1n5v3jy2"})((({theme:e})=>({padding:"8px 0px",borderBottom:`1px solid ${e.colors.LineSecondary}`})),"label:DivUserCC;"),Mt=(0,y.Z)("div",{target:"e1n5v3jy3"})({width:"100%",height:"64px",position:"relative"},"label:DivC;"),Bt=(0,y.Z)("div",{target:"e1n5v3jy4"})({height:"48px",position:"relative"},"label:DivUserInfo;"),Lt=(0,y.Z)("img",{target:"e1n5v3jy5"})({width:"48px",height:"48px",borderRadius:"50%",position:"absolute",left:"0",top:"0"},"label:ImgUserAvator;"),Zt=(0,y.Z)("div",{target:"e1n5v3jy6"})((({theme:e})=>({position:"absolute",left:"60px",top:"0px",height:"25px",lineHeight:"25px",fontSize:"18px",color:e.colors.TextPrimary})),"label:DivUserName;"),Et=(0,y.Z)("div",{target:"e1n5v3jy7"})((({theme:e})=>({position:"absolute",left:"60px",top:"27px",height:"20px",lineHeight:"20px",fontSize:"14px",color:e.colors.TextPrimary})),"label:DivUserId;"),Ft=(0,y.Z)("div",{target:"e1n5v3jy8"})({position:"absolute",right:"16px",bottom:"16px",width:"16px",height:"16px"},"label:DivCbutton;"),zt=(0,y.Z)("li",{target:"e1n5v3jy9"})((({theme:e})=>({width:"100%",height:"64px",padding:"8px 16px",":hover":{background:e.colors.BGPlaceholderOpaque}})),"label:LiUser;"),At=(0,y.Z)("ul",{target:"e1n5v3jy10"})((({theme:e})=>({position:"relative",margin:"0px",width:"100%",maxHeight:"360px",overflowY:"scroll",padding:"0px",background:e.colors.BGSecondary,boxShadow:e.isDark?"":"0px 2px 12px rgba(0, 0, 0, 0.12)",borderRadius:"8px",zIndex:22})),"label:UlUser;");let Ut=null;const Vt=(0,r.memo)((function({onChange:e}){const t=(0,h.Q)(),i=(0,m.fz)(Tt.o),[n,a]=(0,r.useState)(!1),[l,s]=(0,r.useState)(""),[d,c]=(0,r.useState)(null),[u,p]=(0,r.useState)([]),[v,g]=(0,r.useState)(!1),[b,x]=(0,r.useState)(0),[y,f]=(0,r.useState)(!0),_=(0,r.useCallback)((t=>{d&&(c(null),x(0),s(""),p([]),e(null))}),[d,e]),j=(0,r.useCallback)((t=>i=>{i.preventDefault(),i.stopPropagation(),c(t),a(!1),e(t)}),[e]),k=(0,r.useCallback)(((e,t)=>{!v&&y&&(g(!0),i.getUserSearch({keyword:e,cursor:t}).subscribe((e=>{var i;if(g(!1),0===e.status_code||203===e.status_code){f(Boolean(e.has_more));const{user_list:o}=e,n=null!==(i=null==o?void 0:o.map((e=>({uid:e.user_info.uid,nickname:e.user_info.nickname,username:e.user_info.unique_id,avatar:e.user_info.avatar_thumb.url_list.find((e=>e.indexOf(".jpeg")>-1))||e.user_info.avatar_thumb.url_list[0],isVerify:Boolean(e.user_info.custom_verify||e.user_info.verify_info_tt||e.user_info.enterprise_verify_reason)}))))&&void 0!==i?i:[],r=[...0===t?[]:u,...n];x(r.length),p(r),a(!0)}})))}),[v,y,i,u]),w=(0,r.useCallback)((e=>{const t=e.target.value;s(t),Ut&&clearTimeout(Ut),Ut=setTimeout((()=>{t&&k(t,0)}),1e3)}),[k]),S=(0,r.useCallback)((e=>{const t=e.target;t.scrollHeight-t.scrollTop===t.clientHeight&&!v&&k(l,b)}),[l,b,k,v]);return(0,o.jsxs)("div",{children:[(0,o.jsxs)(Mt,{children:[d?(0,o.jsx)(Rt,{children:(0,o.jsxs)(Bt,{children:[(0,o.jsx)(Lt,{src:d.avatar},void 0),(0,o.jsxs)(Zt,{children:[(0,o.jsx)("span",Object.assign({style:{paddingRight:"4px"}},{children:d.nickname}),void 0),d.isVerify?(0,o.jsx)(Ct.Z,{style:{verticalAlign:"middle"},width:14,height:14,"data-e2e":"user-bluev"},void 0):null]},void 0),(0,o.jsx)(Et,{children:d.username},void 0)]},void 0)},void 0):(0,o.jsx)(Ot,{value:l,placeholder:t("Web_report_account_impersonated_search"),onChange:w},void 0),(0,o.jsx)(Ft,Object.assign({onClick:_},{children:d?(0,o.jsx)(Pt.Z,{style:{fontSize:16}},void 0):v?(0,o.jsx)(Dt,{children:(0,o.jsx)(I.Z,{style:{fontSize:16}},void 0)},void 0):null}),void 0)]},void 0),n?(0,o.jsx)(At,Object.assign({onScroll:S},{children:u.map((e=>(0,o.jsx)(zt,{children:(0,o.jsxs)(Bt,Object.assign({onClick:j(e)},{children:[(0,o.jsx)(Lt,{src:e.avatar},void 0),(0,o.jsxs)(Zt,{children:[(0,o.jsx)("span",Object.assign({style:{paddingRight:"4px"}},{children:e.nickname}),void 0),e.isVerify?(0,o.jsx)(Ct.Z,{style:{verticalAlign:"middle"},width:14,height:14,"data-e2e":"user-bluev"},void 0):null]},void 0),(0,o.jsx)(Et,{children:e.username},void 0)]}),void 0)},e.username)))}),void 0):null]},void 0)})),Wt=(0,y.Z)("div",{target:"e1xsicpb0"})((({theme:e})=>({borderTop:`1px solid ${e.colors.LineSecondary}`,height:"65vh",overflowY:"hidden",overflowX:"hidden"})),"label:DivRadioWrapper;"),Ht=(0,y.Z)("div",{target:"e1xsicpb1"})((({theme:e})=>({height:"54px",width:"100%",backgroundColor:e.colors.BGView,padding:"16px 24px",color:e.colors.TextSecondary,fontSize:"16px",lineHeight:"22px"})),"label:DivReport;"),qt=(0,y.Z)("div",{target:"e1xsicpb2"})((({theme:e})=>({marginTop:"24px",fontSize:"18px",lineHeight:"24px",height:"24px",padding:"0 24px",color:e.colors.TextPrimary})),"label:DivUTitle;"),Nt=(0,y.Z)("div",{target:"e1xsicpb3"})((({theme:e})=>({marginTop:"10px",fontSize:"16px",lineHeight:"22px",height:"22px",color:e.colors.TextTertiary,padding:"0 24px"})),"label:DivUSubTitle;"),Gt=(0,y.Z)("div",{target:"e1xsicpb4"})((({theme:e})=>({position:"absolute",bottom:"96px",left:"0",width:"100%",fontSize:"14px",lineHeight:"20px",color:e.colors.TextSecondary,padding:"0 24px"})),"label:DivDesc;"),$t=(0,y.Z)("div",{target:"e1xsicpb5"})({marginTop:"12px",padding:"0px 24px"},"label:DivUser;"),Yt=()=>{var e,t,i;const a=(0,h.Q)(),l=(0,n.qj)(s.bg),[d,c]=(0,r.useState)(null),[u,p]=(0,r.useState)(!0),v=(0,n.mp)(s.bg,{selector:e=>{const{UserData:t,reasonsAPIVersion:i}=e;return{UserData:t,reasonsAPIVersion:i}},dependencies:[]}),g=(0,r.useMemo)((()=>{var e,t,i,o,n,r,a;return 3===v.reasonsAPIVersion&&(null===(e=v.UserData)||void 0===e?void 0:e.selectedReason).reason_code?null!==(o=null===(i=null===(t=v.UserData)||void 0===t?void 0:t.selectedReason)||void 0===i?void 0:i.reason_code)&&void 0!==o?o:0:null!==(a=null===(r=null===(n=v.UserData)||void 0===n?void 0:n.selectedReason)||void 0===r?void 0:r.reason_type)&&void 0!==a?a:0}),[v.reasonsAPIVersion]),m=(0,r.useCallback)((e=>{e?(p(!1),c(e)):(p(!0),c(null))}),[]),{region:b="",user:x}=null!==(e=(0,A.Lh)((()=>["region","user"]),[]))&&void 0!==e?e:{},y=(0,r.useCallback)((e=>{if(e.preventDefault(),e.stopPropagation(),v.UserData.selectedReason&&d){const e={related_username:d.username,related_ttid:d.uid};l.postReport({reason:g,extraData:e,region:b,uid:null==x?void 0:x.uid})}}),[v.UserData.selectedReason,d,l,b,null==x?void 0:x.uid]);let f="";if(v.UserData.HistoryReason){const e=(null===(t=v.UserData.HistoryReason)||void 0===t?void 0:t.length)||2;e>=2&&(f=(null===(i=v.UserData.HistoryReason[e-2])||void 0===i?void 0:i.text)||"")}return(0,o.jsxs)(Wt,{children:[(0,o.jsxs)(Ht,{children:[a("Web_report_reason_select"),f]},void 0),(0,o.jsx)(qt,{children:a("Web_report_account_impersonated")},void 0),(0,o.jsx)(Nt,{children:a("Web_report_account_impersonated_description")},void 0),(0,o.jsx)($t,{children:(0,o.jsx)(Vt,{onChange:m},void 0)},void 0),(0,o.jsx)(Gt,{children:a("Web_report_description_tips")},void 0),(0,o.jsx)(se,{children:(0,o.jsx)(de,Object.assign({disabled:u,onClick:y},{children:a("Submit")}),void 0)},void 0)]},void 0)},Qt=(0,y.Z)("div",{target:"e11o6rhn0"})({height:"580px",padding:"0px",overflowY:"auto",overflowX:"hidden",paddingBottom:"84px"},"label:DivKopigContainer;"),Jt=(0,y.Z)("div",{target:"e11o6rhn1"})({display:"flex",flexDirection:"column",alignItems:"stretch",padding:"0px"},"label:DivScrollContainer;"),Kt=(0,y.Z)("div",{target:"e11o6rhn2"})({display:"flex",flexDirection:"row",justifyContent:"center",boxSizing:"border-box",padding:"16px 24px 12px"},"label:DivSectionHeader;"),Xt=(0,y.Z)("div",{target:"e11o6rhn3"})((({theme:e})=>({display:"flex",flexDirection:"row",boxSizing:"border-box",fontSize:"16px",padding:"16px 24px",lineHeight:"22px",color:e.colors.TextSecondary,backgroundColor:e.colors.BGView,marginBottom:"8px"})),"label:DivSectionLine;"),ei=(0,y.Z)("span",{target:"e11o6rhn4"})((({theme:e})=>({flex:1,fontSize:"18px",lineHeight:"24px",fontFamily:e.fontFamilies.Proxima,fontWeight:e.fontWeights.semiBold,color:e.colors.TextPrimary})),"label:SpanSectionTitle;"),ti=(0,y.Z)("span",{target:"e11o6rhn5"})((({theme:e})=>({fontSize:"16px",lineHeight:"22px",color:e.colors.TextSecondary})),"label:SpanWordCount;"),ii=(0,y.Z)("textarea",{target:"e11o6rhn6"})((({theme:e})=>Object.assign(Object.assign({},(e=>({borderStyle:"none",borderColor:"transparent",boxShadow:"none",outline:"none",margin:"0px 24px",borderRadius:"4px",fontSize:"16px",fontFamily:e.fontFamilies.Proxima,fontWeight:e.fontWeights.normal,color:e.colors.TextPrimary,":placeholder":{color:e.colors.TextTertiary}}))(e)),{resize:"none",height:"80px",backgroundColor:e.colors.BGPrimary})),"label:TextareaDescription;"),oi=(0,y.Z)("div",{target:"e11o6rhn8"})({margin:"4px 24px"},"label:DivImageUploader;"),ni=(0,y.Z)("div",{target:"e11o6rhn9"})((({theme:e})=>({marginTop:"4px",fontFamily:e.fontFamilies.Proxima,fontWeight:e.fontWeights.normal,fontSize:"12px",color:e.colors.Primary})),"label:DivFileSizeWarning;"),ri=(0,r.memo)((function(){var e,t,i,a,l,d,c,u;const p=(0,h.Q)(),v=(0,n.qj)(s.bg),g=(0,n.mp)(s.bg,{selector:e=>{const{UserData:t,PreState:i,reasonsAPIVersion:o}=e;return{UserData:t,PreState:i,reasonsAPIVersion:o}},dependencies:[]}),[m,b]=(0,r.useState)(""),[x,y]=(0,r.useState)([]),[f,_]=(0,r.useState)(!1),[j,k]=(0,r.useState)(!1),{region:w="",user:S}=null!==(e=(0,A.Lh)((()=>["region","user"]),[]))&&void 0!==e?e:{},C=null===(a=JSON.parse(null!==(i=null===(t=g.UserData.selectedReason)||void 0===t?void 0:t.option)&&void 0!==i?i:"").tags)||void 0===a?void 0:a.includes("requireDesc"),P=null===(c=JSON.parse(null!==(d=null===(l=g.UserData.selectedReason)||void 0===l?void 0:l.option)&&void 0!==d?d:"").tags)||void 0===c?void 0:c.includes("requireImage"),T=(0,r.useMemo)((()=>{var e,t,i,o,n,r,a;return 3===g.reasonsAPIVersion&&(null===(e=g.UserData)||void 0===e?void 0:e.selectedReason).reason_code?null!==(o=null===(i=null===(t=g.UserData)||void 0===t?void 0:t.selectedReason)||void 0===i?void 0:i.reason_code)&&void 0!==o?o:0:null!==(a=null===(r=null===(n=g.UserData)||void 0===n?void 0:n.selectedReason)||void 0===r?void 0:r.reason_type)&&void 0!==a?a:0}),[g.reasonsAPIVersion]);(0,r.useEffect)((()=>{var e,t;(null!==(e=C&&0===m.length)&&void 0!==e?e:P&&(null!==(t=0===x.length)&&void 0!==t?t:f))?k(!1):k(!0)}),[m,x,f]);const I=(0,r.useCallback)((e=>{_(!1);for(const t of e)t.size&&t.size>20971520&&_(!0);y(e)}),[]),D=(0,r.useCallback)((e=>{e.stopPropagation()}),[]),O=(0,r.useCallback)((e=>b(e.target.value)),[]),R=(0,r.useCallback)((e=>{if(e.preventDefault(),e.stopPropagation(),T&&j){const e={report_desc:m,uri:x.map((e=>e.url)).join(",")};v.postReport({reason:T,extraData:e,region:w,uid:null==S?void 0:S.uid})}}),[m,x,T,j,v]);return(0,o.jsxs)(Qt,{children:[(0,o.jsxs)(Jt,{children:[(0,o.jsx)(Xt,{children:`${p("Web_report_reason_select")} ${null===(u=g.UserData.selectedReason)||void 0===u?void 0:u.text}`},void 0),(0,o.jsxs)(Kt,{children:[(0,o.jsx)(ei,{children:p("Web_report_description")},void 0),(0,o.jsxs)(ti,{children:[m.length,"/",200]},void 0)]},void 0),(0,o.jsx)(ii,{rows:5,maxLength:200,placeholder:p("Please provide as much detail as possible"),value:m,onChange:O,onKeyDown:D},void 0),(0,o.jsxs)(oi,{children:[(0,o.jsx)(Je,{max:4,onChange:I},void 0),f&&(0,o.jsx)(ni,{children:p("attachment_upload_limit")},void 0)]},void 0)]},void 0),(0,o.jsx)(se,{children:(0,o.jsx)(de,Object.assign({disabled:!j,onClick:R},{children:p("Submit")}),void 0)},void 0)]},void 0)})),ai=(0,r.memo)((function({onClose:e,visible:t=!1}){const i=(0,h.Q)(),{isRTL:a}=(0,g.Y)(),l=(0,n.qj)(s.bg),m=(0,n.mp)(s.bg,{selector:e=>{const{PageState:t,PreState:i}=e;return{PageState:t,PreState:i}},dependencies:[]}),b=(0,r.useCallback)((()=>{e()}),[e]),x=(0,r.useCallback)((()=>{l.resetState()}),[l]),y=(0,r.useCallback)((()=>{l.handlePrevStep()}),[l]),f=i("Report"),_=m.PreState.length>0,j=()=>0===m.PageState?(0,o.jsx)(mt,{},void 0):1===m.PageState?(0,o.jsx)(St,{},void 0):5===m.PageState?(0,o.jsx)(wt,{onClose:b},void 0):3===m.PageState?(0,o.jsx)(Yt,{},void 0):2===m.PageState||8===m.PageState?(0,o.jsx)(ut,{},void 0):4===m.PageState?(0,o.jsx)(S,{onClose:b},void 0):6===m.PageState?(0,o.jsx)(Ce,{onClose:b},void 0):7===m.PageState?(0,o.jsx)(ri,{},void 0):void 0,k="undefined"!=typeof document&&document.fullscreenElement;return(0,r.useEffect)((()=>{k&&!t&&l.resetState()}),[l,k,t]),"undefined"!=typeof document&&document.fullscreenElement?(0,o.jsx)(v.u_,Object.assign({parentRef:document.fullscreenElement,visible:t,onClose:b,maskCloseable:6===m.PageState,keyboardCloseable:!1},{children:[0,1,2,3,7].includes(m.PageState)?(0,o.jsxs)($,Object.assign({"data-e2e":"report-form"},{children:[(0,o.jsxs)(Q,Object.assign({isBackable:_},{children:[_&&(0,o.jsx)(J,Object.assign({onClick:y},{children:a?(0,o.jsx)(c.Z,{width:20,height:20},void 0):(0,o.jsx)(u.Z,{width:20,height:20},void 0)}),void 0),(0,o.jsx)(X,Object.assign({"data-e2e":"report-title"},{children:f}),void 0),(0,o.jsx)(K,Object.assign({"data-e2e":"report-card-cancel",onClick:b},{children:(0,o.jsx)(p.Z,{width:14,height:14},void 0)}),void 0)]}),void 0),j()]}),void 0):(0,o.jsx)(Y,Object.assign({"data-e2e":"report-form"},{children:j()}),void 0)}),void 0):(0,o.jsx)(d.AR,Object.assign({compact:!0,isOpen:t,onClose:b,onCloseComplete:x,closeOnBackdropClick:6===m.PageState,closeOnEsc:!1},{children:[0,1,2,3,7,8].includes(m.PageState)?(0,o.jsxs)($,Object.assign({"data-e2e":"report-form"},{children:[(0,o.jsxs)(Q,Object.assign({isBackable:_},{children:[_&&(0,o.jsx)(J,Object.assign({onClick:y},{children:a?(0,o.jsx)(c.Z,{width:20,height:20},void 0):(0,o.jsx)(u.Z,{width:20,height:20},void 0)}),void 0),(0,o.jsx)(X,Object.assign({"data-e2e":"report-title"},{children:f}),void 0),(0,o.jsx)(K,Object.assign({"data-e2e":"report-card-cancel",onClick:b},{children:(0,o.jsx)(p.Z,{width:14,height:14},void 0)}),void 0)]}),void 0),j()]}),void 0):(0,o.jsx)(Y,Object.assign({"data-e2e":"report-form"},{children:j()}),void 0)}),void 0)}));function li(e){const t=function(t){const i=function({onClose:e}={}){const{hideModal:t}=(0,l.J)(),[i,a]=(0,n.b7)(s.bg,{selector:({showing:e})=>e,dependencies:[]}),d=(0,r.useCallback)((()=>{null==e||e(),t(),a.hideReport()}),[a,t,e]);return(0,o.jsx)(ai,{onClose:d,visible:i},void 0)}();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e,Object.assign({},t),void 0),i]},void 0)};return t.displayName=`WithReport(${(0,a.i)(e)})`,t}},54006:(e,t,i)=>{i.d(t,{S:()=>n});var o=i(91051);function n(e){const{direction:t="ltr",progressRef:i,circleRef:n,barRef:r,initialPercent:a=0,seekCallback:l,draggingPercentCb:s,draggingStateCb:d,progressReportCallback:c}=e,[u,p]=(0,o.useState)(a),h=(0,o.useRef)(0),v=(0,o.useRef)(null),g=(0,o.useCallback)(((e,t="original")=>{if("number"!=typeof e||e!=e)return;const i=Math.min(1,Math.max(0,e));p(i),("dragging"!==t&&"stop"!==t||i!==v.current)&&(null==s||s(i),v.current=i)}),[s]),m=(0,o.useCallback)(((e,o="original")=>{if(!n.current||!i.current||!r.current)return;let a;e.stopPropagation(),null==l||l();const s="vertical"===t?i.current.getBoundingClientRect().height:i.current.getBoundingClientRect().width,{x:d,y:u,width:p,height:v}=i.current.getBoundingClientRect();switch(t){case"vertical":a=u+v-e.clientY;break;case"rtl":a=d+p-e.clientX;break;default:a=e.clientX-d}if("start"===o)switch(t){case"vertical":{const e=r.current.getBoundingClientRect().height;h.current=Math.min(1,Math.max(0,e/s));break}default:{const e=r.current.getBoundingClientRect().width;h.current=Math.min(1,Math.max(0,e/s));break}}else{if("stop"===o){const e=Math.min(1,Math.max(0,a/s)),t=h.current;null==c||c(t,e)}g(a/s,o)}}),[n,i,r,l,t,g,c]),b=(0,o.useCallback)(((e,t=!1,i=null)=>{var o;const n=null!==i?i:null!==(o=v.current)&&void 0!==o?o:u,r=n+e;let a;a=r>1||r<0?t?r>1?r-1:r+1:Math.min(1,Math.max(0,n+e)):r,null==c||c(n,a),g(a,"original")}),[u,g,c]),x=(0,o.useRef)((e=>{null==d||d(!0),e.preventDefault(),m(e,"dragging")})),y=(0,o.useRef)((e=>{document.removeEventListener("mouseup",y.current),document.removeEventListener("mousemove",x.current),m(e,"stop"),null==d||d(!1)})),f=(0,o.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),m(e,"start"),document.addEventListener("mouseup",y.current),document.addEventListener("mousemove",x.current)}),[m]);return{percent:u,bindDrag:f,seek:m,seekByDelta:b,update:p}}},16134:(e,t,i)=>{i.d(t,{j:()=>c});var o=i(86254),n=i.n(o);const r="object"==typeof HTMLElement?function(e){return e instanceof HTMLElement}:function(e){return e&&"object"==typeof e&&1===e.nodeType&&"string"==typeof e.nodeName},a=[],l=[];let s;function d(e,t){var i;let o;const{defaultView:n}=e.ownerDocument;let r=t;return(null==n?void 0:n.getComputedStyle)?(r=t.replace(/([A-Z])/g,"-$1").toLowerCase(),n.getComputedStyle(e,null).getPropertyValue(r)):e.currentStyle?(r=t.replace(/-(\w)/g,(function(e,t){return t.toUpperCase()})),o=null===(i=e.currentStyle)||void 0===i?void 0:i[r],o):""}const c={bind:function(e,t){if(r(e))if("undefined"!=typeof ResizeObserver){const i=new ResizeObserver(t);i.observe(e),l.push({el:e,observer:i})}else{const i={el:e,callback:t,style:{width:d(e,"width"),height:d(e,"height")}};a.push(i),s||(s&&clearInterval(s),s=setInterval((function(){var e;for(const t of a){const i=t.el,o={width:d(i,"width"),height:d(i,"height")};n()(o,t.style)||(t.style={width:o.width,height:o.height},null===(e=t.callback)||void 0===e||e.call(t))}}),200))}},remove:function(e,t){if("undefined"==typeof ResizeObserver){for(let i=0;i<a.length;i++)if(a[i].el===e&&a[i].callback===t){a.splice(i,1);break}0===a.length&&(s&&clearInterval(s),s=null)}else for(let t=0;t<l.length;t++)if(l[t].el===e){l[t].observer.unobserve(e),l[t].observer.disconnect(),l.splice(t,1);break}}}},48581:(e,t,i)=>{i.d(t,{s:()=>o});const o=()=>({filter:"drop-shadow(0px 1px 1px rgba(0 0 0 / 12%))"})},96082:(e,t,i)=>{i.d(t,{mB:()=>o,xo:()=>n,Yr:()=>a});const o=e=>10229===e||10230===e,n=e=>isNaN(e)?"00:00":`${`0${Math.floor(e/60%60)}`.slice(-2)}:${`0${Math.floor(e%60)}`.slice(-2)}`,r=new Map([[2,"adapt_lowest_1080p"],[3,"adapt_lower_1080p"],[4,"adapt_1080p"],[7,"adapt_lowest_1440p"],[10,"normal_720p"],[11,"low_720p"],[12,"adapt_high_720p"],[13,"adapt_higher_720p"],[14,"adapt_lower_720p"],[15,"adapt_lowest_720p"],[16,"higher_720p"],[17,"highest_720p"],[18,"adapt_720p"],[19,"adapt_low_720p"],[191,"lower_720p"],[20,"normal_540p"],[21,"adapt_lower_540p"],[22,"adapt_high_540p"],[23,"adapt_higher_540p"],[24,"lower_540p"],[25,"lowest_540p"],[26,"higher_540p"],[27,"highest_540p"],[28,"adapt_540p"],[29,"adapt_lowest_540p"],[291,"adapt_low_540p"],[30,"normal_480p"],[31,"low_480p"],[32,"high_480p"],[33,"medium_480p"],[34,"lower_480p"],[35,"lowest_480p"],[36,"higher_480p"],[37,"highest_480p"],[38,"adapt_480p"],[39,"adapt_lower_480p"],[391,"adapt_high_480p"],[40,"normal_360p"],[41,"low_360p"],[42,"high_360p"],[43,"medium_360p"],[44,"lower_360p"],[45,"lowest_360p"],[46,"higher_360p"],[47,"highest_360p"],[48,"adapt_360p"],[49,"adapt_lowest_360p"],[50,"adapt_high_360p"]]),a=(e,t)=>{if(!e)return t;if(String(e).indexOf("xgpreload_config")>-1)return e;if(!r.has(Number(e))){const t=String(e).match(/^([a-zA-Z]*)+_([0-9]+)_0$/i);return t?`${t[1]}_${t[2]}p`:`unknown_${e}`}return r.get(Number(e))}},22143:(e,t,i)=>{i.d(t,{B:()=>v});var o=i(91051),n=i(32667),r=i(32370),a=i(11040),l=i(28327),s=i(32913),d=i(62676);const c=(0,s.Z)("div",{target:"exhfy940"})({pointerEvents:"none",position:"fixed",zIndex:1e3},"label:DivDoubleTapContainer;"),u=(0,l.F4)({"0%":{opacity:"1",transform:"scale(1.18)"},"14%":{opacity:"1",transform:"scale(.9)"},"21%":{opacity:"1",transform:"scale(1)"},"58%":{opacity:"1",transform:"scale(1)"},"100%":{opacity:"0",transform:"scale(1.93)"}}),p=(0,s.Z)(d.Z,{target:"exhfy941"})({animation:`${u} 1400ms`,width:"120px",height:"120px"},"label:StyledLikeIcon;"),h=function({x:e,y:t}){const i=Math.floor(61*Math.random()-30);return(0,a.jsx)(c,Object.assign({style:{left:e-60,top:t-60,transform:`rotate(${i}deg)`}},{children:(0,a.jsx)(p,{},void 0)}),void 0)};class v{constructor(e,t){this.x=e,this.y=t,this.el=document.createElement("div")}emit(){var e;try{(null!==(e=document[r.H.fullscreenElement])&&void 0!==e?e:document.body).appendChild(this.el),(0,n.render)((0,o.createElement)(h,{x:this.x,y:this.y}),this.el),window.setTimeout((()=>{this.destroy()}),1400)}catch(e){console.error(e)}}destroy(){var e;try{(0,n.unmountComponentAtNode)(this.el),(null!==(e=document[r.H.fullscreenElement])&&void 0!==e?e:document.body).removeChild(this.el)}catch(e){console.error(e)}}}},38863:(e,t,i)=>{i.d(t,{p:()=>m});var o=i(11040),n=i(91051),r=i(32273),a=i(45949),l=i(16134),s=i(32913),d=i(36488);const c=(0,s.Z)("div",{target:"e1mzilcj0"})((({needPaddingBottom:e})=>({display:"flex",width:"100%",overflow:"hidden",position:"relative",paddingBottom:e?"26px":"unset"})),"label:DivWrapper;"),u=(0,s.Z)("div",{target:"e1mzilcj1"})((({lineClamp:e,lineHeight:t,marginTop:i,theme:{colors:o}})=>({width:"100%",overflow:"hidden",textOverflow:"ellipsis",display:"box",WebkitLineClamp:e,WebkitBoxOrient:"vertical",span:{display:"inline"},"*":{fill:o.Primary2},":before":{content:'""',height:`calc(100% - ${t}px)`,float:"right",width:0,marginTop:`${i}px`}})),"label:DivText;"),p=(0,s.Z)("button",{target:"e1mzilcj2"})((({theme:e})=>[(0,d.GI)({theme:e,typography:"P2",fontWeight:"semiBold",color:"TextPrimary"}),{border:"none",outline:"none",background:"none",cursor:"pointer"}]),"label:ButtonExpand;"),h=(0,s.Z)(p,{target:"e1mzilcj3"})((({theme:{direction:e}})=>[(0,d.YJ)({direction:e,start:0}),{position:"absolute",bottom:0,padding:0}]),"label:StyledButtonBottom;"),v=(0,s.Z)("div",{target:"e1mzilcj4"})((({btnShow:e,lineHeight:t,theme:{direction:i}})=>({float:"rtl"===i?"left":"right",clear:"both",cursor:"pointer",display:e?"flex":"none",alignItems:"center",lineHeight:`${t}px`})),"label:DivBtnWrapper;"),g=(0,s.Z)("div",{target:"e1mzilcj5"})((({isUnfold:e,maxHeight:t})=>e?{overflowY:"auto",maxHeight:t,scrollbarWidth:"none","::-webkit-scrollbar":{width:4}}:{}),"label:DivOverflowContainer;"),m=(0,n.memo)((({children:e,lineClamp:t=2,overflowLineNum:i=0,onlyKey:s="",maxLine:d=999,btnOnClick:m,lineHeight:b=22,fontSize:x,showExpandButton:y=!0,btnStyle:f,expandBtnText:_})=>{const j=(0,r.Q)(),[k,w]=(0,n.useState)(!1),[S,C]=(0,n.useState)(!1),[P,T]=(0,n.useState)(t),[I,D]=(0,n.useState)("unset"),O=(0,n.useRef)(null),R=(0,n.useCallback)((()=>{setTimeout((()=>{var e,i,o;if(null==O?void 0:O.current)if(S)D("unset");else{const n=null!==(e=O.current.scrollHeight)&&void 0!==e?e:0,r=null!==(i=O.current.clientHeight)&&void 0!==i?i:0,a=null!==(o=O.current.offsetHeight)&&void 0!==o?o:0,l=n-r>15||n>=b*t+15||a>=b*t+15;w(l),l&&D(t*b+"px")}}),0)}),[S,b,t]),M=(0,n.useCallback)((e=>{(0,a.NS)(e),T((e=>e===t?d:t)),C((e=>!e)),m&&m(S)}),[m,S,t,d]),B=(0,n.useMemo)((()=>x?(b-x)/2:0),[x,b]);(0,n.useEffect)((()=>(O.current&&l.j.bind(O.current,R),()=>{O.current&&l.j.remove(O.current,R)})),[R]);const L=j(S?"pc_web_less_btn":"pc_web_more_btn");(0,n.useEffect)((()=>{C(!1),T(t),w(!1),R()}),[s]);const Z=b*i+"px",E=S&&i>0;return(0,o.jsxs)(c,Object.assign({needPaddingBottom:E},{children:[(0,o.jsxs)(u,Object.assign({ref:O,lineClamp:P,lineHeight:b,marginTop:B,style:{maxHeight:I}},{children:[(0,o.jsx)(v,Object.assign({btnShow:k,lineHeight:b},{children:y&&!E&&(0,o.jsx)(p,Object.assign({style:f,type:"button",onClick:M},{children:null!=_?_:L}),void 0)}),void 0),i>0?(0,o.jsx)(g,Object.assign({isUnfold:S,maxHeight:Z},{children:e}),void 0):e]}),void 0),E&&(0,o.jsx)(h,Object.assign({style:f,type:"button",onClick:M},{children:null!=_?_:L}),void 0)]}),void 0)}))},39043:(e,t,i)=>{i.d(t,{C:()=>b});var o,n=i(11040),r=i(91051),a=i(21041),l=i(95872);!function(e){e.ClickPartnershipTag="click_partnership_tag"}(o||(o={}));var s=i(19813),d=i(45313),c=i(32273),u=i(76126),p=i(33111),h=i(58854),v=i(32913),g=i(36488);const m=(0,v.Z)("p",{target:"ejymp3n0"})((({theme:e,theme:{colors:t},isMobile:i,isGray:o})=>i?[(0,g.GI)({theme:e,fontFamily:"Proxima",typography:"P3"}),{display:"inline-block",alignSelf:"flex-start",marginTop:"-4px",marginBottom:"8px",fontSize:"15px",fontWeight:400},o?{padding:"1px 5px",background:"rgba(255, 255, 255, 0.34)",borderRadius:"2px",fontWeight:600,textShadow:"0 0 16px rgba(0, 0, 0, .34)"}:null]:[(0,g.GI)({theme:e,fontFamily:"Proxima",typography:"P2"}),{display:"inline-block",alignSelf:"flex-start",marginTop:"8px",marginBottom:"unset",fontSize:"16px",fontWeight:400},o?{padding:"1px 4px",background:t.BGInput2,borderRadius:"2px",color:t.TextTertiary,fontWeight:600}:null]),"label:PPaidPartnership;"),b=(0,r.memo)((function({item:e,style:t}){var i,o;const v=(0,c.Q)(),{isMobile:g}=null!==(i=(0,h.h)((()=>["isMobile"]),[]))&&void 0!==i?i:{},b=(0,r.useCallback)((()=>{var t,i,o,n,r;r={group_id:null!==(t=e.id)&&void 0!==t?t:"",author_id:null!==(i=e.authorId)&&void 0!==i?i:"",partnership_tag:null!==(o=e.BAInfo)&&void 0!==o?o:""},l.W.event("click_partnership_tag",r),s.W.handleEnterUser({to_user_name:null!==(n=e.BAInfo)&&void 0!==n?n:"",enter_method:"click_partnership_tag"})}),[e.id,e.authorId,e.BAInfo]),x=(0,a.TH)(),y=(0,u.C)({to:{pathname:(0,d.yl)({uniqueId:null!==(o=null==e?void 0:e.BAInfo)&&void 0!==o?o:""})},location:x});return 2===(null==e?void 0:e.adLabelVersion)?(null==e?void 0:e.BAInfo)?(0,n.jsx)(p.v,Object.assign({to:y,onClick:b,style:{textDecoration:"none",color:"inherit"}},{children:(0,n.jsx)(m,Object.assign({isMobile:g,isGray:!0,style:t},{children:`${v("bc_new_disclosure")} @${null==e?void 0:e.BAInfo}`}),void 0)}),void 0):(0,n.jsx)(m,Object.assign({isMobile:g,isGray:!0,style:t},{children:v("bc_new_disclosure")}),void 0):null}))},32144:(e,t,i)=>{i.d(t,{L:()=>E});var o=i(11040),n=i(9236),r=i(91051),a=i(21041),l=i(51950),s=i(43139),d=i(45949),c=i(33642),u=i(48304),p=i(17133),h=i(64047),v=i(73566),g=i(48185),m=i(19630),b=i(20948),x=i(11348),y=i(82346),f=i(56979),_=i(60595),j=i(49584),k=i(68854),w=i(12167),S=i(19813),C=i(57244),P=i(48936);let T=class{constructor(e){this.fetch=e}getPoiDetail(e){return this.fetch.get("/api/poi/detail/",{query:e,baseUrlType:2})}};T=(0,h.__decorate)([(0,C.G)(),(0,h.__metadata)("design:paramtypes",[P.r])],T);let I=class extends v.D{constructor(e){super(),this.service=e,this.defaultState={poi:{}}}setPoiInfo(e,t){t&&(e.poi[t.id]=t)}getPoiInfo(e){return e.pipe((0,b.M)(this.state$),(0,j.z)((([{poiId:e="",language:t,teaParams:i,callback:o},{poi:n}])=>n[e]?(i&&(S.W.handleEnterPoi(Object.assign(Object.assign({},i),n[e])),null==o||o()),x.E):this.service.getPoiDetail({poiId:e,language:t}).pipe((0,k.K)((()=>(0,y.of)({statusCode:-1}))),(0,f.U)((e=>{var t,n;const{statusCode:r,poiInfo:a}=e;return 0===r?(i&&(S.W.handleEnterPoi(Object.assign(Object.assign({},i),null!==(t=null==a?void 0:a.poi)&&void 0!==t?t:{id:"",name:""})),null==o||o()),this.getActions().setPoiInfo(null===(n=null==e?void 0:e.poiInfo)||void 0===n?void 0:n.poi)):this.noop()})),(0,w.R)(this.dispose$)))))}};(0,h.__decorate)([(0,g.cQ)(),(0,h.__metadata)("design:type",_.y)],I.prototype,"dispose$",void 0),(0,h.__decorate)([(0,g.lF)(),(0,h.__metadata)("design:type",Function),(0,h.__metadata)("design:paramtypes",[Object,Object]),(0,h.__metadata)("design:returntype",void 0)],I.prototype,"setPoiInfo",null),(0,h.__decorate)([(0,g.Qm)(),(0,h.__metadata)("design:type",Function),(0,h.__metadata)("design:paramtypes",[_.y]),(0,h.__metadata)("design:returntype",void 0)],I.prototype,"getPoiInfo",null),I=(0,h.__decorate)([(0,m.Y)("PoisModule"),(0,h.__metadata)("design:paramtypes",[T])],I);var D=i(32913),O=i(73487),R=i(36488);const M={0:600,2:700,4:400},B=(0,D.Z)("div",{target:"e65hkrg0"})({height:"24px",marginTop:"4px"},"label:DivPoiAnchor;"),L=(0,D.Z)(O.rU,{target:"e65hkrg1"})({display:"inline-flex",alignItems:"center",textDecoration:"none",":hover":{textDecoration:"none"}},"label:StyledLink;"),Z=(0,D.Z)("p",{target:"e65hkrg2"})((({theme:{direction:e},playMode:t})=>[{fontSize:"16px",fontWeight:M[t],"&:hover":{textDecoration:"underline"}},R.wj,(0,R.YJ)({direction:e,marginStart:"8px"})]),"label:PPoiName;"),E=function({info:e,playMode:t,teaParams:i}){const{id:h,name:v,fatherPoiName:g}=(0,c.m7)(e),{language:m}=(0,c.m7)((0,p.Lh)((()=>["language"]),[])),b=(0,n.qj)(I),x=(0,a.k6)(),y=(0,u.iz)(h,v),f=Boolean(e),_=(0,r.useMemo)((()=>0===t?"one_column":4===t?"video_detail":"browser_mode"),[t]),j=(0,r.useMemo)((()=>({enter_method:_,anchor_id:h,anchor_name:v,author_id:i.author_id})),[h,v,_,i]);(0,r.useEffect)((()=>{f&&s.B8.handlePoiAnchorShow(j)}),[f]);const k=(0,r.useCallback)((e=>{(0,d.NS)(e),s.B8.handlePoiAnchorClick(j),b.getPoiInfo({poiId:h,language:m,teaParams:Object.assign(Object.assign({},i),{enter_method:"click_caption",play_mode:_}),callback(){x.push(y)}})}),[j,b,_,x,h,m,y,i]);return f?(0,o.jsx)(B,Object.assign({"data-e2e":"poi-anchor"},{children:(0,o.jsxs)(L,Object.assign({to:y,onClick:k},{children:[(0,o.jsx)(l.N,{size:16},void 0),(0,o.jsxs)(Z,Object.assign({playMode:t},{children:[v,g&&` · ${g}`]}),void 0)]}),void 0)}),void 0):null}},3995:(e,t,i)=>{i.d(t,{C:()=>$});var o,n,r=i(11040),a=i(91051),l=i(88956),s=i(21090),d=i(21446),c=i(95872),u=i(90293);!function(e){e.PhotoSlide="multi_photo_slide"}(o||(o={})),function(e){e.ManualClick="manual_click",e.Auto="auto",e.Keyboard="keyboard"}(n||(n={}));const p=(e,t)=>{const{itemId:i,authorId:o,autoplayStatus:n=0,searchId:r="",searchKeyword:a,searchResultId:l,questionId:s,isMute:d=!1,fromTab:p,collectionId:h,collectionName:v,isPaidPartnership:g=!1,poiId:m,duration:b,awemeType:x,picCnt:y}=t,f=Object.assign({group_id:i,author_id:o,autoplay_status:n,search_id:r,search_keyword:a,search_result_id:l,question_id:s,from_tab:p,collection_id:h,collection_name:v,poi_id:m,duration:b,aweme_type:null!=x?x:0,pic_cnt:y},(()=>{var e;const{href:t,search:i}=window.location;return{is_from_webapp:null!==(e=(0,u.parse)(i).is_from_webapp)&&void 0!==e?e:"0",page_url:t}})());f.is_mute=d?"1":"0",f.is_partnership=g?"1":"0",c.W.event(e,f)},h=e=>{c.W.event("multi_photo_slide",e)};var v=i(69405),g=i(9236),m=i(16926),b=i(79789),x=i(31222),y=i(40340),f=i(64047),_=i(73566),j=i(48185),k=i(19630),w=i(60595),S=i(20948),C=i(56979);let P=class extends _.D{constructor(){super(...arguments),this.defaultState={currentVideo:null}}setCurrentVideo(e,t){e.currentVideo=t.currentVideo}updateVideo(e){return e.pipe((0,S.M)(this.state$),(0,C.U)((([e])=>this.getActions().setCurrentVideo(e))))}};(0,f.__decorate)([(0,j.lF)(),(0,f.__metadata)("design:type",Function),(0,f.__metadata)("design:paramtypes",[Object,Object]),(0,f.__metadata)("design:returntype",void 0)],P.prototype,"setCurrentVideo",null),(0,f.__decorate)([(0,j.Qm)(),(0,f.__metadata)("design:type",Function),(0,f.__metadata)("design:paramtypes",[w.y]),(0,f.__metadata)("design:returntype",void 0)],P.prototype,"updateVideo",null),P=(0,f.__decorate)([(0,k.Y)("SMobileVideoPlayer")],P);var T,I=i(40112),D=i(33642),O=i(8838),R=i(68852);!function(e){e.NoInteract="failed because the user didn't interact with the document first.",e.SafariNoInteract="The request is not allowed by the user agent or the platform in the current context"}(T||(T={}));const M=e=>({buffered:null==e?void 0:e.buffered,currentSrc:null==e?void 0:e.currentSrc,currentTime:null==e?void 0:e.currentTime,duration:null==e?void 0:e.duration,readyState:null==e?void 0:e.readyState,error:null==e?void 0:e.error,volume:null==e?void 0:e.volume,muted:null==e?void 0:e.muted}),B=(0,a.memo)((0,a.forwardRef)((function(e,t){var{playProgress:i,muteSetting:o,onUnmount:n,onEnded:l,onWaiting:s,onError:d,disableDownload:c=!1,itemMute:u=!1}=e,p=(0,f.__rest)(e,["playProgress","muteSetting","onUnmount","onEnded","onWaiting","onError","disableDownload","itemMute"]);const h=(0,a.useRef)(null),v=(0,a.useRef)(!1),[{mute:m,volume:b},{setMute:x,setMuteSetting:y}]=(0,g.b7)(R.x,{selector:e=>({mute:e.muteSetting||e.mute,volume:e.volume}),dependencies:[]}),_=(0,g.mp)(R.x,{selector:e=>e.playing,dependencies:[]});(0,a.useImperativeHandle)(t,(()=>{const e=h.current;return{play:null==e?void 0:e.play.bind(e),pause:null==e?void 0:e.pause.bind(e),onTimeUpdate:t=>{null==e||e.addEventListener("timeupdate",(()=>{var i,o;const n=null!==(i=e.currentTime)&&void 0!==i?i:0,r=null!==(o=e.duration)&&void 0!==o?o:0;t(n/r,n,r)}))},onCanPlay:t=>{null==e||e.addEventListener("canplay",t)},getPlayerAttributes:()=>M(e)}}));const j=(0,a.useCallback)(((e=0)=>(0,f.__awaiter)(this,void 0,void 0,(function*(){var t,i,o;if(!(e>=3))try{yield null===(t=h.current)||void 0===t?void 0:t.play()}catch(t){const n=null!==(i=null==t?void 0:t.message)&&void 0!==i?i:"";(null!==(o=n.match("failed because the user didn't interact with the document first."))&&void 0!==o?o:n.match("The request is not allowed by the user agent or the platform in the current context"))?(x(!0),setTimeout((()=>{j(e+1)}),0)):j(e+1),null==d||d(t)}}))),[x]);(0,a.useEffect)((()=>{h.current&&(h.current.volume=b)}),[b]),(0,a.useEffect)((()=>{y(o),j(),h.current&&Math.abs(h.current.currentTime-i)>.2&&(h.current.currentTime=i)}),[o,i,y,j]),(0,a.useEffect)((()=>{var e;_?v.current&&(v.current=!1,j()):(v.current=!0,null===(e=h.current)||void 0===e||e.pause())}),[_,j]),(0,a.useEffect)((()=>{const e=h.current;return()=>{null==n||n(M(e))}}),[]),(0,a.useEffect)((()=>{c&&(h.current.oncontextmenu=e=>(e.preventDefault(),!1))}),[c,h]);const k=(0,a.useCallback)((e=>{null==s||s(e)}),[s]),w=(0,a.useCallback)((e=>{null==l||l(e),j()}),[l,j]);return(0,r.jsx)("audio",Object.assign({ref:h},p,{muted:u||m,playsInline:!0,autoPlay:!0,onEnded:w,onWaiting:k}),void 0)})));let L=class extends _.D{constructor(){super(...arguments),this.defaultState={mobileDefaultMute:!1,forcePause:!1,canRetry:!0,muteSettingChangedByUser:!1}}setMobileDefaultMute(e,t){e.mobileDefaultMute=t}setForcePause(e,t){e.forcePause=t}setCanRetry(e,t){e.canRetry=t}setMuteSettingChangedByUser(e,t){e.muteSettingChangedByUser=t}};var Z;(0,f.__decorate)([(0,j.lF)(),(0,f.__metadata)("design:type",Function),(0,f.__metadata)("design:paramtypes",[Object,Boolean]),(0,f.__metadata)("design:returntype",void 0)],L.prototype,"setMobileDefaultMute",null),(0,f.__decorate)([(0,j.lF)(),(0,f.__metadata)("design:type",Function),(0,f.__metadata)("design:paramtypes",[Object,Boolean]),(0,f.__metadata)("design:returntype",void 0)],L.prototype,"setForcePause",null),(0,f.__decorate)([(0,j.lF)(),(0,f.__metadata)("design:type",Function),(0,f.__metadata)("design:paramtypes",[Object,Boolean]),(0,f.__metadata)("design:returntype",void 0)],L.prototype,"setCanRetry",null),(0,f.__decorate)([(0,j.lF)(),(0,f.__metadata)("design:type",Function),(0,f.__metadata)("design:paramtypes",[Object,Boolean]),(0,f.__metadata)("design:returntype",void 0)],L.prototype,"setMuteSettingChangedByUser",null),L=(0,f.__decorate)([(0,k.Y)("SMobileBasicPlayer")],L),function(e){e.NoInteract="failed because the user didn't interact with the document first.",e.SafariNoInteract="The request is not allowed by the user agent or the platform in the current context"}(Z||(Z={}));const E=e=>({buffered:null==e?void 0:e.buffered,currentSrc:null==e?void 0:e.currentSrc,currentTime:null==e?void 0:e.currentTime,duration:null==e?void 0:e.duration,readyState:null==e?void 0:e.readyState,error:null==e?void 0:e.error,volume:null==e?void 0:e.volume,muted:null==e?void 0:e.muted}),F=(0,a.memo)((0,a.forwardRef)((function(e,t){var{playProgress:i,muteSetting:o,onUnmount:n,onEnded:l,onWaiting:s,onError:d,disableDownload:c=!1,itemMute:u=!1}=e,p=(0,f.__rest)(e,["playProgress","muteSetting","onUnmount","onEnded","onWaiting","onError","disableDownload","itemMute"]);const h=(0,a.useRef)(null),[{mute:v},{setMobileDefaultMute:m,setForcePause:b}]=(0,g.b7)(L,{selector:e=>({mute:e.muteSettingChangedByUser||e.mobileDefaultMute,forcePause:e.forcePause,canRetry:e.canRetry}),dependencies:[]});(0,a.useImperativeHandle)(t,(()=>{const e=h.current;return{play:null==e?void 0:e.play.bind(e),pause:null==e?void 0:e.pause.bind(e),onTimeUpdate:t=>{null==e||e.addEventListener("timeupdate",(()=>{var i,o;const n=null!==(i=e.currentTime)&&void 0!==i?i:0,r=null!==(o=e.duration)&&void 0!==o?o:0;t(n/r,n,r)}))},onCanPlay:t=>{null==e||e.addEventListener("canplay",t)},getPlayerAttributes:()=>E(e)}}));const x=(0,a.useCallback)((()=>(0,f.__awaiter)(this,void 0,void 0,(function*(){var e,t,i;try{yield null===(t=null===(e=h.current)||void 0===e?void 0:e.play)||void 0===t?void 0:t.call(e)}catch(e){return null==d||d(e),null!==(i=e.message)&&void 0!==i?i:""}return""}))),[d]),y=(0,a.useCallback)((()=>{x().then((e=>{(e.match("failed because the user didn't interact with the document first.")||e.match("The request is not allowed by the user agent or the platform in the current context"))&&(b(!1),m(!0))}))}),[b,m,x]);(0,a.useEffect)((()=>{h.current&&y()}),[y]),(0,a.useEffect)((()=>{const e=h.current;return()=>{null==n||n(E(e))}}),[]),(0,a.useEffect)((()=>{c&&(h.current.oncontextmenu=e=>(e.preventDefault(),!1))}),[c,h]);const _=(0,a.useCallback)((e=>{null==s||s(e)}),[s]),j=(0,a.useCallback)((e=>{null==l||l(e),x()}),[l,x]);return(0,r.jsx)("audio",Object.assign({ref:h},p,{muted:u||v,playsInline:!0,autoPlay:!0,onEnded:j,onWaiting:_}),void 0)})));var z=i(58854);const A=(0,a.memo)((0,a.forwardRef)((function({playUrl:e,id:t,teaParams:i,index:o,mode:n,itemMute:l,onAudioPause:s,onAudioPlaying:d,onAudioPlay:c,onAudioEnded:u,onAudioError:p,onTimeUpdate:h},f){var _;const{isAndroid:j=!1,isMobile:k=!1}=null!==(_=(0,z.h)((()=>["isMobile","isAndroid"]),[]))&&void 0!==_?_:{},{currentVideo:w,playProgress:S}=(0,g.mp)(y.f),{currentVideo:C}=(0,g.mp)(P),T=(0,a.useRef)(null),R=(0,a.useRef)(null),M=(0,m.fz)(v.ec),L=(0,m.fz)(b.k),Z=(0,m.fz)(x.KF),[E,A]=(0,a.useState)(!1),U=(0,a.useCallback)((()=>{var e,t;null===(t=null===(e=T.current)||void 0===e?void 0:e.play)||void 0===t||t.call(e)}),[]),V=(0,a.useCallback)((()=>{var e,t;null===(t=null===(e=T.current)||void 0===e?void 0:e.pause)||void 0===t||t.call(e)}),[]),W=(0,a.useMemo)((()=>{if(k){if(!C)return!1;const{id:e,index:i}=C;return!j||e===t&&i===o}if(!w)return!1;const{id:e,index:i,mode:r}=w;return e===t&&i===o&&r===n}),[k,w,t,o,n,C,j]);(0,a.useImperativeHandle)(f,(()=>({play:()=>{U(),R.current=!0},pause:()=>{V(),R.current=!1},onTimeUpdate:e=>{var t;null===(t=T.current)||void 0===t||t.onTimeUpdate(e)},get currentTime(){var e,t;return null!==(t=null===(e=T.current)||void 0===e?void 0:e.getPlayerAttributes().currentTime)&&void 0!==t?t:0},get duration(){var e,t;return null!==(t=null===(e=T.current)||void 0===e?void 0:e.getPlayerAttributes().duration)&&void 0!==t?t:0},get currentCanPlay(){return W&&E}})),[U,V,W,E]),(0,a.useEffect)((()=>{W||A(!1)}),[W]);const H=(0,I.Mz)();(0,a.useEffect)((()=>{const e=null===R.current||R.current;H&&e?U():V()}),[H,U,V,M,W,n]);const q=(0,a.useCallback)((()=>{var o;const r=(0,D.m7)(null===(o=T.current)||void 0===o?void 0:o.getPlayerAttributes()),{bitrate:a,author_id:l,format:s,encodedType:d,videoQuality:c,encodeUserTag:u,codecType:p,definition:h,secret:v,forFriend:g,aweme_type:m,pic_cnt:b}=i;return Object.assign({id:t,authorId:l,playMode:n,bitrate:a,format:s,encodedType:d,videoQuality:c,encodeUserTag:u,codecType:p,definition:h,secret:v,forFriend:g,play_url:e,awemeType:m,picCnt:b},null!=r?r:{})}),[t,n,i,e]),{handlePauseWithLoading:N,handlePlayingWithLoading:G}=(0,I.Fk)({isCurrentVideo:W}),$=(0,a.useCallback)((()=>{L.handleLoadStart(q())}),[L,q]),Y=(0,a.useCallback)((e=>{null==c||c(e)}),[c]),Q=(0,a.useCallback)((()=>{var e;const{currentTime:t=0,duration:i=0}=(0,D.m7)(null===(e=T.current)||void 0===e?void 0:e.getPlayerAttributes());L.handleTimeUpdate(q()),null==h||h(t/i)}),[L,q,h]),J=(0,a.useCallback)((e=>{null==s||s(e),N()}),[s,N]),K=(0,a.useCallback)((t=>{null==d||d(t),G(),Z.reportVideoInteract({endTime:Date.now(),videoSource:e})}),[d,G,Z,e]),X=(0,a.useCallback)((e=>{null==u||u(e),L.handleEnded()}),[u,L]);return(0,a.useEffect)((()=>()=>{L.resetWhenSlideChange(Object.assign({},q()))}),[e]),W?k?(0,r.jsx)(F,{ref:T,c:!0,muteSetting:l||O.PA[n].forceMute,defaultMute:O.PA[n].defaultMute,playProgress:null!=S?S:0,src:e,onTimeUpdate:Q,onError:p,onPause:J,onPlay:Y,onPlaying:K,onEnded:X,onLoadStart:$},void 0):(0,r.jsx)(B,{ref:T,c:!0,muteSetting:l||O.PA[n].forceMute,defaultMute:O.PA[n].defaultMute,playProgress:null!=S?S:0,src:e,onTimeUpdate:Q,onError:p,onPause:J,onPlay:Y,onPlaying:K,onEnded:X,onLoadStart:$},void 0):null})));var U=i(63175),V=i(32913);const W=(0,V.Z)("div",{target:"e10jea830"})((({isMobile:e})=>e?{position:"absolute",top:"0",width:"100vw",height:"100%",pointerEvents:"none",opacity:"1"}:{width:"100%",height:"100%",objectFit:"cover",backgroundColor:"black"}),"label:DivPhotoVideoContainer;"),H=(0,V.Z)("div",{target:"e10jea831"})({width:"100%",height:"100%"},"label:DivSwiperContainer;"),q=(0,V.Z)("img",{target:"e10jea832"})({height:"100%",width:"100%",objectFit:"contain"},"label:ImgPhotoSlide;");var N=i(78772);const G={delay:1700,disableOnInteraction:!1},$=(0,a.memo)((0,a.forwardRef)((function({show:e=!0,item:t,mode:i=4,index:o,teaParams:n,onAudioPlay:c,onAudioError:u,onTimeUpdate:b},x){var y,f,_,j,k;const{isMobile:w=!1}=null!==(y=(0,z.h)((()=>["isMobile"]),[]))&&void 0!==y?y:{},{isRTL:S}=(0,U.Y)(),C=S?"rtl":"ltr",P=(0,a.useRef)(!1),T=(0,a.useRef)(0),I=(0,a.useRef)(0),O=(0,m.fz)(v.ec),M=null!==(_=null===(f=null==t?void 0:t.music)||void 0===f?void 0:f.playUrl)&&void 0!==_?_:"",B=null!==(k=null===(j=null==t?void 0:t.imagePost)||void 0===j?void 0:j.images)&&void 0!==k?k:[],{video:{duration:L,volumeInfo:Z},id:E,itemMute:F=!1,authorId:V=""}=(0,D.m7)(t),$=(0,a.useMemo)((()=>[""]),[]),Y=(0,a.useRef)(null),Q=(0,a.useRef)(null),J=(0,a.useRef)(!1),K=(0,a.useRef)([]),{aweme_type:X,pic_cnt:ee}=(0,N.K$)(t),te=(0,a.useCallback)((()=>{var e;const t=null===(e=Q.current)||void 0===e?void 0:e.autoplay;null==t||t.start(),O.triggerPlay()}),[O]),ie=(0,a.useCallback)((e=>{var t;const o=null===(t=Q.current)||void 0===t?void 0:t.autoplay;null==o||o.stop(),O.triggerPause({aweme_type:X,pic_cnt:ee,enter_method:e,playMode:i})}),[X,i,ee,O]);(0,a.useImperativeHandle)(x,(()=>({audio:{play:()=>{var e,t;null===(t=null===(e=Y.current)||void 0===e?void 0:e.play)||void 0===t||t.call(e)},pause:()=>{var e,t;null===(t=null===(e=Y.current)||void 0===e?void 0:e.pause)||void 0===t||t.call(e)},onTimeUpdate:e=>{var t,i;null===(i=null===(t=Y.current)||void 0===t?void 0:t.onTimeUpdate)||void 0===i||i.call(t,e)},get currentTime(){var e,t;return null!==(t=null===(e=Y.current)||void 0===e?void 0:e.currentTime)&&void 0!==t?t:0},get duration(){var e,t;return null!==(t=null===(e=Y.current)||void 0===e?void 0:e.duration)&&void 0!==t?t:0},get currentCanPlay(){var e,t;return null!==(t=null===(e=Y.current)||void 0===e?void 0:e.currentCanPlay)&&void 0!==t&&t}},swiper:{play:te,pause:ie,slidePrev:e=>{var t,i,o;if(J.current)return;const n=null!==(i=null===(t=Q.current)||void 0===t?void 0:t.activeIndex)&&void 0!==i?i:0;null===(o=Q.current)||void 0===o||o.slidePrev(),I.current===T.current&&(I.current=Number(new Date)),h({group_id:E,author_id:V,enter_method:e,aweme_type:150,pic_cnt:B.length,pic_location:n-2,action_type:"left",first_manual_click_duration:I.current-T.current})},slideNext:e=>{var t,i,o;if(J.current)return;const n=null!==(i=null===(t=Q.current)||void 0===t?void 0:t.activeIndex)&&void 0!==i?i:0;null===(o=Q.current)||void 0===o||o.slideNext(),I.current===T.current&&(I.current=Number(new Date)),h({group_id:E,author_id:V,enter_method:e,aweme_type:150,pic_cnt:B.length,pic_location:n===B.length?0:n,action_type:"right",first_manual_click_duration:I.current-T.current})},slideToLoop:e=>{var t;null===(t=Q.current)||void 0===t||t.slideToLoop(e)},onActiveIndexChange:e=>{K.current.push(e)},get paused(){var e,t;return!(null===(t=null===(e=Q.current)||void 0===e?void 0:e.autoplay)||void 0===t?void 0:t.running)}}})));const{mute:oe}=(0,g.mp)(R.x),ne=(0,a.useMemo)((()=>Object.assign(Object.assign({},n),{aweme_type:X,pic_cnt:ee})),[X,ee,n]),re=(0,a.useMemo)((()=>{const{group_id:e="",author_id:t="",is_scheduled:o,search_id:r,search_keyword:a,search_result_id:l,question_id:s,collection_id:d,collection_name:c,isPaidPartnership:u,poi_id:p}=n||{};return{itemId:e,authorId:t,isScheduled:Boolean(o),autoplayStatus:1,searchId:r,searchKeyword:a,searchResultId:l,questionId:s,playMode:i,isMute:oe,collectionId:d,collectionName:c,isPaidPartnership:Boolean(u),poiId:p,awemeType:X,picCnt:ee}}),[X,i,oe,ee,n]),ae=(0,a.useMemo)((()=>Object.assign(Object.assign({},re),{currentTime:0,duration:0})),[re]),le=(0,a.useCallback)((()=>{T.current=Number(new Date),I.current=T.current,p("video_play",ae),O.handleAudioPlay(E),O.triggerPlay()}),[E,ae,O]),se=(0,a.useCallback)((()=>{const e=Number(new Date)-T.current;ae.duration=e,p("play_time",ae)}),[ae]),de=(0,a.useCallback)((e=>{P.current||e.activeIndex===B.length&&(p("video_play_finish",ae),P.current=!0)}),[B.length,ae]),ce=(0,a.useCallback)((()=>{J.current=!0}),[]),ue=(0,a.useCallback)((()=>{J.current=!1}),[]),pe=(0,a.useCallback)((e=>{h({group_id:E,author_id:V,enter_method:"auto",aweme_type:150,pic_cnt:B.length,pic_location:e.activeIndex===B.length+1?0:e.activeIndex-1,action_type:"right"})}),[V,E,B]),[he,ve]=(0,a.useState)(!1);return(0,a.useEffect)((()=>ve(!0)),[]),he?(0,r.jsxs)(W,Object.assign({isMobile:w},{children:[(0,r.jsx)("link",{rel:"stylesheet",href:s},void 0),e&&(0,r.jsx)(H,{children:B.length>0?(0,r.jsx)(d.tq,Object.assign({loop:!0,onSwiper:e=>{Q.current=e,K.current.forEach((t=>e.on("activeIndexChange",t)))},style:{height:"100%",zIndex:0},speed:800,dir:C,modules:[l.pt],autoplay:G,preventClicks:!1,preventClicksPropagation:!1,onAfterInit:le,onDestroy:se,onSlideNextTransitionEnd:de,onSlideChangeTransitionStart:ce,onSlideChangeTransitionEnd:ue,onAutoplay:pe},{children:B.map((e=>{var t,i;return(0,r.jsx)(d.o5,Object.assign({style:{height:"100%"}},{children:(0,r.jsx)(q,{src:(null!==(t=e.imageURL.urlList)&&void 0!==t?t:$)[0]},void 0)}),(null!==(i=e.imageURL.urlList)&&void 0!==i?i:$)[0])}))}),void 0):null},void 0),(0,r.jsx)(A,{ref:Y,index:o,id:E,mode:i,duration:L,playUrl:M,teaParams:ne,volumeInfo:Z,itemMute:F,onAudioPlay:c,onAudioError:u,onTimeUpdate:b,preload:"metadata",playsInline:!0},void 0)]}),void 0):null})))},83014:(e,t,i)=>{i.d(t,{V:()=>r});var o=i(91051),n=i(71300);const r=()=>{const e=(0,o.useRef)(-1),[t,i]=(0,o.useState)(!1),r=(0,n.HX)();return{showing:t&&!r,handleItemEnter:(0,o.useCallback)((()=>{e.current=window.setTimeout((()=>{i(!0)}),1e3)}),[]),handleItemLeave:(0,o.useCallback)((()=>{window.clearTimeout(e.current),i(!1)}),[]),handleCardEnter:(0,o.useCallback)((()=>{window.clearTimeout(e.current),i(!0)}),[]),handleCardLeave:(0,o.useCallback)((()=>{e.current=window.setTimeout((()=>{i(!1)}),500)}),[])}}},67301:(e,t,i)=>{i.d(t,{W:()=>h});var o=i(11040),n=i(74820),r=i(39556),a=i(91051),l=i(91283),s=i(32273),d=i(32913),c=i(36488);const u=(0,d.Z)("div",{target:"e4cyjsy0"})((({theme:e,justifyContent:t})=>[(0,c.GI)({theme:e,fontFamily:"Proxima",color:"ConstTextInverse"}),{background:e.colors.BGInverse3,display:"flex",justifyContent:t,alignItems:"center"}]),"label:DivScheduleItemWarn;");function p(e){const t=(0,r.unix)(e).format("YYYY-M-D-H:mm"),[i,n,a,l]=t.split("-");return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("span",{children:" "},void 0),(0,o.jsx)("span",{children:i},void 0),(0,o.jsx)("span",{children:"-"},void 0),(0,o.jsx)("span",{children:n},void 0),(0,o.jsx)("span",{children:"-"},void 0),(0,o.jsx)("span",{children:a},void 0),(0,o.jsx)("span",{children:" "},void 0),(0,o.jsx)("span",{children:l},void 0)]},void 0)}const h=(0,a.memo)((function({height:e,fontSize:t,scheduledTime:i,iconSize:r,iconMargin:a,className:d,isTextAlignStart:c=!1}){const{direction:h}=(0,n.u)(),v=(0,s.Q)();return(0,o.jsxs)(u,Object.assign({justifyContent:c?"center":void 0,className:d,style:{fontSize:t,height:e,lineHeight:e}},{children:[(0,o.jsx)(l.Z,{width:r,height:r,style:{["ltr"===h?"marginRight":"marginLeft"]:a}},void 0),v("scheduled_for"),p(i)]}),void 0)}))},41140:(e,t,i)=>{i.d(t,{M:()=>l});var o=i(64047),n=i(73566),r=i(48185),a=i(19630);let l=class extends n.D{constructor(){super(...arguments),this.defaultState={}}setVideoInfo(e,t){var i;const{videoId:o,videoPercent:n,duration:r,currentTime:a}=t,l=Object.assign({},null!==(i=e[o])&&void 0!==i?i:{},{videoPercent:n,duration:r,currentTime:a});e[o]?Object.keys(l).forEach((t=>{e[o][t]=l[t]})):(Object.keys(e).forEach((t=>delete e[t])),e[o]=l)}};(0,o.__decorate)([(0,r.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],l.prototype,"setVideoInfo",null),l=(0,o.__decorate)([(0,a.Y)("SeekBarModule")],l)},69972:(e,t,i)=>{i.d(t,{wu:()=>r,AZ:()=>a,SD:()=>l,cl:()=>s,ky:()=>d,z5:()=>c,no:()=>u,qf:()=>p});var o=i(32913),n=(i(23790),i(36488));const r=(0,o.Z)("div",{target:"ehlq8k30"})({position:"relative",padding:"16px 0"},"label:DivContainer;"),a=(0,o.Z)("div",{target:"ehlq8k31"})({display:"flex",flexDirection:"row",alignItems:"center"},"label:DivFlexCenterRow;"),l=(0,o.Z)(a,{target:"ehlq8k32"})({justifyContent:"space-between"},"label:StyledWrapper;"),s=(0,o.Z)("div",{target:"ehlq8k33"})((({theme:e})=>[(0,n.GI)({theme:e,typography:"P3",color:"TextSecondary"}),{display:"flex",flexDirection:"row",marginTop:"16px",boxSizing:"border-box",border:`1px solid ${e.colors.LineSecondary2}`,borderRadius:"8px",overflow:"hidden"}]),"label:DivCopyLinkContainer;"),d=(0,o.Z)("p",{target:"ehlq8k34"})(n.wj,(({theme:e})=>({flex:"1 1 auto",paddingTop:"7px",paddingBottom:"5px",backgroundColor:e.colors.BGInput})),(({theme:{direction:e}})=>(0,n.YJ)({direction:e,paddingStart:"12px",paddingEnd:"0"})),"label:PCopyLinkText;");d.defaultProps=Object.assign(Object.assign({},d.defaultProps),{"data-e2e":"browse-video-link"});const c=(0,o.Z)("button",{target:"ehlq8k36"})((({theme:e})=>[n.Ph,{color:e.colors.TextPrimary,fontWeight:e.fontWeights.bold,flex:"0 0 auto",cursor:"pointer",backgroundColor:e.colors.BGInput2,padding:"7px 18px",":hover":{backgroundColor:e.colors.BGView},":active":{backgroundColor:e.colors.BGInput}}]),"label:ButtonCopyLink;");c.defaultProps=Object.assign(Object.assign({},c.defaultProps),{"data-e2e":"browse-copy"});const u=(0,o.Z)("button",{target:"ehlq8k37"})((({theme:{colors:e}})=>[n.Ph,{position:"relative",display:"flex",width:"24px",height:"24px",justifyContent:"center",alignItems:"center",borderRadius:"50%",cursor:"pointer",color:e.TextPrimary,":hover":{backgroundColor:"rgba(22, 24, 35, 0.1)"},":active":{backgroundColor:"rgba(22, 24, 35, 0.1)"}}]),"label:ButtonShare;"),p=(0,o.Z)("div",{target:"ehlq8k38"})((({theme:e})=>[(0,n.GI)({theme:e,fontWeight:"semiBold",typography:"P2"}),{width:"280px",padding:"8px 0px",maxHeight:448,overflow:"auto","::-webkit-scrollbar":{width:"6px"},"::-webkit-scrollbar-thumb":{borderRadius:"3px",background:"rgba(0, 0, 0, 0.15)"}}]),"label:DivShareWrapper;");p.defaultProps=Object.assign(Object.assign({},p.defaultProps),{"data-e2e":"feed-share-group"})},8826:(e,t,i)=>{i.d(t,{Q:()=>x});var o=i(11040),n=i(9236),r=i(91051),a=i(80827),l=i(86032),s=i(32273),d=i(23745),c=i(32913),u=i(56529),p=i(36488);const h=(0,c.Z)("button",{target:"ef0ywbl0"})(p.Ph,(({theme:e})=>[(0,p.YJ)({direction:e.direction,end:"26px"}),(0,p.GI)({theme:e,fontFamily:"Proxima",fontWeight:"semiBold",color:"TextPrimary",typography:"P3"})]),{display:"flex",justifyContent:"center",alignItems:"center",height:"20px",cursor:"pointer",":hover":{textDecoration:"underline"}},"label:ButtonDelete;"),v=(0,c.Z)(u.Z,{target:"ef0ywbl1"})((({theme:{direction:e}})=>(0,p.YJ)({direction:e,marginEnd:6})),"label:StyledTrashBin;"),g=(0,c.Z)("p",{target:"ef0ywbl2"})((({theme:e})=>(0,p.GI)({theme:e,typography:"H4",fontWeight:"bold"})),{padding:"36px 32px",textAlign:"center",width:"332px"},"label:PDeleteTitle;"),m=(0,c.Z)("button",{target:"ef0ywbl3"})(p.Ph,(({theme:{colors:e}})=>({width:"100%",height:"48px",fontSize:"16px",lineHeight:"48px",borderTop:`1px solid ${e.LineSecondary}`,cursor:"pointer"})),"label:ButtonConfirm;"),b=(0,c.Z)(m,{target:"ef0ywbl4"})((({theme:{colors:e}})=>({color:e.TextSecondary})),"label:StyledButtonCancel;"),x=function({video:e}){const[t,i]=(0,r.useState)(!1),c=(0,s.Q)(),u=(0,n.qj)(d.O),p=(0,r.useCallback)((()=>{i(!0),l.o.handleScheduleConfirm(e.id)}),[e.id]),x=(0,r.useCallback)((()=>{u.postScheduleDelete(e.id),i(!1)}),[u,e.id]),y=(0,r.useCallback)((()=>{i(!1),l.o.handleScheduleDelete("cancel")}),[]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(h,Object.assign({type:"button",onClick:p},{children:[(0,o.jsx)(v,{width:18.33,height:18.33},void 0),c("delete")]}),void 0),(0,o.jsxs)(a.AR,Object.assign({closeOnBackdropClick:!1,compact:!0,closeOnEsc:!1,isOpen:t,onClose:y},{children:[(0,o.jsx)(g,{children:c("delete_confirm")},void 0),(0,o.jsx)(m,Object.assign({"data-e2e":"video-modal-delete",type:"button",onClick:x},{children:c("delete")}),void 0),(0,o.jsx)(b,Object.assign({"data-e2e":"video-modal-cancel",type:"button",onClick:y},{children:c("cancel_settings")}),void 0)]}),void 0)]},void 0)}},94759:(e,t,i)=>{i.d(t,{C:()=>be});var o=i(11040),n=i(74820),r=i(91051),a=i(86032),l=i(32273),s=i(39696),d=i(48088),c=i(25615),u=i.n(c),p=i(80827),h=i(24930),v=i(28327),g=i(32913),m=i(88194),b=i(36488);const x=(0,g.Z)("div",{target:"e1rwytmq0"})((({theme:e})=>[(0,b.GI)({theme:e,typography:"H6",fontFamily:"Proxima"}),{position:"relative",userSelect:"none"}]),"label:DivContainer;"),y=(0,g.Z)("div",{target:"e1rwytmq1"})((({theme:{colors:e}})=>({display:"flex",flexDirection:"row",alignItems:"center",padding:"12px",borderRadius:"2px",border:`1px solid ${e.LineSecondary2}`,cursor:"pointer"})),"label:DivSelectionContainer;"),f=(0,g.Z)("p",{target:"e1rwytmq2"})(b.wj,{flex:"1 1 auto"},"label:PSelected;"),_=(0,g.Z)(m.Z,{target:"e1rwytmq3"})({width:24,height:24,flex:"0 0 24px"},"label:StyledChevronDown;"),j=(0,g.Z)("div",{target:"e1rwytmq4"})({position:"fixed",left:0,right:0,top:0,bottom:0},"label:DivSelectMask;"),k=(0,v.F4)({from:{opacity:"0",transform:"scale(0.6, 0.6)"},"70%":{opacity:"1",transform:"scale(1.01, 1.01)"},to:{opacity:"1",transform:"scale(1, 1)",animationTimingFunction:"cubic-bezier(0.215, 0.61, 0.355, 1)"}}),w=(0,g.Z)("ul",{target:"e1rwytmq5"})((({theme:{colors:e}})=>({position:"absolute",left:0,right:0,margin:0,padding:0,listStyle:"none",border:`1px solid ${e.LineSecondary}`,background:e.BGPrimary,boxShadow:`0px 2px 8px ${e.ShadowPrimary}`,animation:`${k} 100ms normal`,transformOrigin:"center top",zIndex:1})),"label:UlOptionsContainer;"),S=(0,g.Z)("li",{target:"e1rwytmq6"})((({theme:{colors:e}})=>({cursor:"pointer",padding:"8px 12px",":hover":{background:e.BGView}})),"label:LiOptionsItem;"),C=(0,g.Z)("p",{target:"e1rwytmq7"})(b.wj,"label:POptionsTitle;"),P=(0,g.Z)("p",{target:"e1rwytmq8"})(b.wj,(({theme:e})=>(0,b.GI)({theme:e,typography:"P4",color:"TextTertiary"})),"label:POptionsDesc;");function T({value:e,options:t,e2eData:i,itemE2eData:n,onChange:a,placeholder:l}){var s,d;const[c,u]=(0,r.useState)(!1),p=t.find((({value:t})=>t===e)),h=(0,r.useCallback)((()=>{u(!0)}),[]),v=(0,r.useCallback)((()=>{u(!1)}),[]),g=(0,r.useCallback)((e=>()=>{null==a||a(e),v()}),[v,a]);return(0,o.jsxs)(x,{children:[(0,o.jsxs)(y,Object.assign({"data-e2e":i,onClick:h},{children:[(0,o.jsx)(f,{children:null!==(d=null!==(s=null==p?void 0:p.title)&&void 0!==s?s:null==p?void 0:p.value)&&void 0!==d?d:l},void 0),(0,o.jsx)(_,{width:24,height:24},void 0)]}),void 0),c&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(j,{onClick:v},void 0),(0,o.jsx)(w,{children:t.map((({value:e,key:t,title:i,desc:r})=>{const a=String(null!=i?i:e);return(0,o.jsxs)(S,Object.assign({"data-e2e":n,title:a,onClick:g(e)},{children:[(0,o.jsx)(C,{children:i},void 0),r&&(0,o.jsx)(P,{children:r},void 0)]}),null!=t?t:String(e))}))},void 0)]},void 0)]},void 0)}var I,D,O=i(88683),R=i(9236),M=i(38310),B=i(64047),L=i(73566),Z=i(48185),E=i(19630),F=i(60595),z=i(93859),A=i(56979),U=i(49584),V=i(20948),W=i(95872);!function(e){e.PrivateAccountPop="private_account_pop",e.PrivateAccountPopClick="private_account_pop_click",e.CookieBannerShow="cookie_banner_show",e.CookieBannerEnterPolicy="enter_cookie_policy",e.ChangeCookieSetting="change_cookie_setting",e.ClickCookiePolicy="click_cookie_policy",e.ClickCookieSettings="click_cookie_settings"}(I||(I={})),function(e){e.ClickBannerAccept="click_banner_accept",e.ClickBannerDecline="click_banner_decline",e.ClickPolicy="click_banner_cookie_policy",e.ClickSettings="click_banner_cookie_settings"}(D||(D={}));var H,q,N=i(87930),G=i(21005),$=i(55017);!function(e){e[e.Show=0]="Show",e[e.CanNotModify=1]="CanNotModify",e[e.Hide=2]="Hide"}(H||(H={})),function(e){e[e.NoRestriction=0]="NoRestriction",e[e.Compliance=1]="Compliance",e[e.FamilyPairing=2]="FamilyPairing",e[e.PrivateAccount=3]="PrivateAccount"}(q||(q={}));let Y=class extends L.D{constructor(e){super(),this.service=e,this.defaultState={isPrivateBannerShowing:!1,videoPrivateSetting:{duet:{show_type:0,res_type:0},stitch:{show_type:0,res_type:0}}}}setIsPrivateBannerShowing(e,t){e.isPrivateBannerShowing=t}handleShowPrivateBanner(e){return e.pipe((0,z.b)((e=>{e&&W.W.event("private_account_pop")})),(0,A.U)((e=>this.getActions().setIsPrivateBannerShowing(e))))}handlePrivateBannerClose(e){return e.pipe((0,z.b)((()=>{var e;e="ok",W.W.event("private_account_pop_click",{result:e})})),(0,U.z)((()=>this.service.postPrivateBannerAck())),(0,z.b)((e=>{(0,N.k)(e.statusCode,[0])})),(0,A.U)((e=>0===e.statusCode?this.getActions().setIsPrivateBannerShowing(!1):this.noop())),(0,G.n)({}))}setVideoPrivateSetting(e,t){e.videoPrivateSetting=t}getVideoPrivateSetting(e){return e.pipe((0,V.M)(this.state$),(0,U.z)((([e,t])=>this.service.getVideoPrivateSetting().pipe((0,A.U)((e=>{var i,o,n,r;const{private_settings:a}=e;return this.getActions().setVideoPrivateSetting({duet:{show_type:null!==(i=null==a?void 0:a.video_privacy.duet.show_type)&&void 0!==i?i:t.videoPrivateSetting.duet.show_type,res_type:null!==(o=null==a?void 0:a.video_privacy.duet.res_type)&&void 0!==o?o:t.videoPrivateSetting.duet.res_type},stitch:{show_type:null!==(n=null==a?void 0:a.video_privacy.stitch.show_type)&&void 0!==n?n:t.videoPrivateSetting.stitch.show_type,res_type:null!==(r=null==a?void 0:a.video_privacy.stitch.res_type)&&void 0!==r?r:t.videoPrivateSetting.stitch.res_type}})}))))),(0,G.n)({}))}};(0,B.__decorate)([(0,Z.lF)(),(0,B.__metadata)("design:type",Function),(0,B.__metadata)("design:paramtypes",[Object,Boolean]),(0,B.__metadata)("design:returntype",void 0)],Y.prototype,"setIsPrivateBannerShowing",null),(0,B.__decorate)([(0,Z.Qm)(),(0,B.__metadata)("design:type",Function),(0,B.__metadata)("design:paramtypes",[F.y]),(0,B.__metadata)("design:returntype",void 0)],Y.prototype,"handleShowPrivateBanner",null),(0,B.__decorate)([(0,Z.Qm)(),(0,B.__metadata)("design:type",Function),(0,B.__metadata)("design:paramtypes",[F.y]),(0,B.__metadata)("design:returntype",void 0)],Y.prototype,"handlePrivateBannerClose",null),(0,B.__decorate)([(0,Z.lF)(),(0,B.__metadata)("design:type",Function),(0,B.__metadata)("design:paramtypes",[Object,Object]),(0,B.__metadata)("design:returntype",void 0)],Y.prototype,"setVideoPrivateSetting",null),(0,B.__decorate)([(0,Z.Qm)(),(0,B.__metadata)("design:type",Function),(0,B.__metadata)("design:paramtypes",[F.y]),(0,B.__metadata)("design:returntype",void 0)],Y.prototype,"getVideoPrivateSetting",null),Y=(0,B.__decorate)([(0,E.Y)("Compliance"),(0,B.__metadata)("design:paramtypes",[$.n])],Y);var Q=i(23745);const J=(0,g.Z)("div",{target:"e1i2llgv1"})({padding:"32px",width:"332px"},"label:DivContentWrapper;"),K=(0,g.Z)("h2",{target:"e1i2llgv2"})((({theme:e})=>(0,b.GI)({theme:e,typography:"H4"})),{marginTop:"4px",textAlign:"center"},"label:H2Title;"),X=(0,g.Z)("p",{target:"e1i2llgv3"})((({theme:e})=>(0,b.GI)({theme:e,typography:"P2",fontWeight:"semiBold",fontFamily:"Proxima"})),{marginTop:"24px",marginBottom:"8px"},"label:PDesc;"),ee=(0,g.Z)("div",{target:"e1i2llgv4"})({marginTop:"16px"},"label:DivSwitchGroupContainer;"),te=(0,g.Z)("div",{target:"e1i2llgv5"})({display:"flex",flexDirection:"row",alignItems:"center",height:"40px"},"label:DivSwitchItemContainer;"),ie=(0,g.Z)("span",{target:"e1i2llgv6"})((({theme:e,disabled:t})=>[(0,b.GI)({theme:e,typography:"P2",fontWeight:"semiBold",color:t?"TextQuaternary":"TextPrimary"}),(0,b.YJ)({direction:e.direction,marginEnd:"12px"}),{flex:"1 1 auto"}]),"label:SpanSwitchText;"),oe=(0,g.Z)("p",{target:"e1i2llgv7"})((({theme:e})=>(0,b.GI)({theme:e,fontFamily:"Proxima",typography:"P4",color:"TextQuaternary"})),{marginTop:"4px"},"label:PHint;"),ne=(0,g.Z)("button",{target:"e1i2llgv8"})(b.Ph,(({theme:{colors:e}})=>({width:"100%",height:"48px",fontSize:"16px",lineHeight:"48px",borderTop:`1px solid ${e.LineSecondary}`,cursor:"pointer",color:e.TextPrimary})),"label:ButtonSave;"),re=function(e){const{videoId:t,visible:i,onClose:n=u()}=e,a=(0,l.Q)(),s=function(e){return(0,R.mp)(M.A,{selector:t=>t[e],dependencies:[e]})}(t),d=(0,O.pu)(null==s?void 0:s.author),{handleChange:c,optionsList:h,visibilityValue:v}=function({item:e,author:t}){const i=(0,l.Q)(),o=(0,R.qj)(Q.O),{forFriend:n,secret:a,id:s="",adAuthorization:d}=null!=e?e:{},{privateAccount:c}=null!=t?t:{};return{visibilityValue:(0,r.useMemo)((()=>n?"3":a?"2":"1"),[n,a]),optionsList:(0,r.useMemo)((()=>d?[{title:i("who_can_view_public"),desc:i("public_desc"),value:"1"},{title:i("new_video_status"),desc:i("pull_video_expl_available_for_ads"),value:"2"}]:[{title:i(c?"who_can_view_followers":"who_can_view_public"),desc:i(c?"followers_desc_for_private":"public_desc"),value:"1"},{title:i("who_can_view_friends"),desc:i("followers_desc"),value:"3"},{title:i("video_label_private"),desc:i("private_desc"),value:"2"}]),[d,c,i]),handleChange:(0,r.useCallback)((e=>{o.postModifyVisibility({aweme_id:s,type:e})}),[o,s])}}({item:s,author:d}),{comment:g,duet:m,stitch:b,hintTextKey:x}=function({item:e}){const[{isEnableDuet:t,isEnableStitch:i,isShowSafetyHint:o},n]=(0,R.b7)(Y,{selector:e=>({isEnableDuet:0===e.videoPrivateSetting.duet.show_type,isEnableStitch:0===e.videoPrivateSetting.stitch.show_type,isShowSafetyHint:1===e.videoPrivateSetting.duet.res_type||1===e.videoPrivateSetting.stitch.res_type}),dependencies:[]}),a=1===(null==e?void 0:e.duetDisplay)||1===(null==e?void 0:e.stitchDisplay),l=3!==(null==e?void 0:e.itemCommentStatus),s=Boolean(null==e?void 0:e.duetEnabled)&&!a,d=Boolean(null==e?void 0:e.stitchEnabled)&&!a,c=Number(null==e?void 0:e.video.duration)>=61,u=(0,R.qj)(Q.O),p=(0,r.useMemo)((()=>o?"setting_disabled_16":a?"duet_stitch_minor":c?"hint2":"hint1"),[c,o,a]);(0,r.useEffect)((()=>{n.getVideoPrivateSetting()}),[n]);const h=(0,r.useCallback)((t=>{var i;u.postUserSetting({field:"item_comment",aweme_id:null!==(i=null==e?void 0:e.id)&&void 0!==i?i:"",private_setting:t?0:3})}),[null==e?void 0:e.id,u]),v=(0,r.useCallback)((t=>i=>{var o;u.postDuetOrStitchChange({aweme_id:null!==(o=null==e?void 0:e.id)&&void 0!==o?o:"",type:t,enable:i?0:1})}),[null==e?void 0:e.id,u]);return{comment:{checked:l,onChange:h},duet:{checked:s,disabled:c||!t||a,onChange:v("item_duet")},stitch:{checked:d,disabled:c||!i||a,onChange:v("item_stitch")},hintTextKey:p}}({item:s,author:d});return(0,o.jsxs)(p.AR,Object.assign({e2eData:"video-setting-list",compact:!0,isOpen:i,onClose:n},{children:[(0,o.jsxs)(J,{children:[(0,o.jsx)(K,{children:a("privacy_set")},void 0),(0,o.jsx)(X,{children:a("view_access")},void 0),(0,o.jsx)(T,{e2eData:"video-setting-choose",itemE2eData:"video-watch-list",value:v,options:h,onChange:c},void 0),(0,o.jsxs)(ee,{children:[(0,o.jsx)(ae,Object.assign({e2eData:"video-setting-comment",text:a("allow_comment")},g),void 0),(0,o.jsx)(ae,Object.assign({e2eData:"video-setting-duet",text:a("allow_duet")},m),void 0),(0,o.jsx)(ae,Object.assign({e2eData:"video-setting-stitch",text:a("allow_stitch")},b),void 0)]},void 0),(0,o.jsx)(oe,{children:a(x)},void 0)]},void 0),(0,o.jsx)(ne,Object.assign({"data-e2e":"video-setting-down",onClick:e.onClose},{children:a("privacy_settings_done")}),void 0)]}),void 0)},ae=function(e){const{disabled:t,checked:i,text:n,e2eData:r}=e;return(0,o.jsxs)(te,{children:[(0,o.jsx)(ie,{children:n},void 0),(0,o.jsx)(h.r,{e2eData:r,checked:i,onChange:e.onChange,disabled:t},void 0)]},void 0)};var le=i(58948);const se=(0,g.Z)("div",{target:"e161jvwg0"})({position:"relative",flex:"0 0 24px",width:"24px",height:"24px"},"label:DivActionContainer;"),de=(0,g.Z)(le.Z,{target:"e161jvwg1"})({width:24,height:24,cursor:"pointer"},"label:StyledEllipsisHorizontal;"),ce=(0,g.Z)("ul",{target:"e161jvwg2"})((({theme:e})=>(0,b.GI)({theme:e,typography:"P2",fontWeight:"semiBold",fontFamily:"Proxima"})),{listStyle:"none",margin:"0",padding:"8px 16px",whiteSpace:"nowrap",minWidth:"200px"},"label:UlPopupContainer;"),ue=(0,g.Z)("li",{target:"e161jvwg3"})((({theme:{colors:e}})=>({position:"relative",padding:"13px",":last-of-type::before":{content:'""',position:"absolute",left:0,top:0,width:"100%",height:"1px",background:e.LineSecondary,transform:"scaleY(0.5)"}})),"label:LiPopupItem;"),pe=(0,g.Z)("button",{target:"e161jvwg4"})(b.Ph,(({theme:{colors:e}})=>({cursor:"pointer",color:e.TextPrimary,":hover":{color:e.Primary}})),"label:ButtonAction;"),he=(0,g.Z)("p",{target:"e1qpteip0"})((({theme:e})=>(0,b.GI)({theme:e,typography:"H4",fontWeight:"bold"})),{padding:"36px 32px",textAlign:"center",width:"332px"},"label:PDeleteTitle;"),ve=(0,g.Z)("button",{target:"e1qpteip1"})(b.Ph,(({theme:{colors:e}})=>({width:"100%",height:"48px",fontSize:"16px",lineHeight:"48px",borderTop:`1px solid ${e.LineSecondary}`,cursor:"pointer",color:e.TextSecondary})),"label:ButtonConfirm;"),ge=(0,g.Z)(ve,{target:"e1qpteip2"})((({theme:{colors:e}})=>({color:e.TextSecondary})),"label:StyledButtonCancel;"),me=function(e){const{visible:t,onClose:i=u(),videoId:n}=e,s=(0,l.Q)(),d=(0,R.qj)(Q.O),c=(0,r.useCallback)((()=>{d.postVideoDelete({aweme_id:n,target:n}),null==i||i()}),[d,i,n]),h=(0,r.useCallback)((()=>{a.o.handleVideoDelete("cancel"),null==i||i()}),[i]);return(0,o.jsxs)(p.AR,Object.assign({e2eData:"video-delete-modal",isOpen:t,compact:!0,onClose:i},{children:[(0,o.jsx)(he,{children:s("delete_confirm")},void 0),(0,o.jsx)(ve,Object.assign({"data-e2e":"video-modal-delete",type:"button",onClick:c},{children:s("delete")}),void 0),(0,o.jsx)(ge,Object.assign({"data-e2e":"video-modal-cancel",type:"button",onClick:h},{children:s("cancel_settings")}),void 0)]}),void 0)},be=function({videoId:e}){const{direction:t}=(0,n.u)(),i="ltr"===t?"bottomRight":"bottomLeft",c=(0,l.Q)(),{active:u,handleMouseEnter:p,handleMouseLeave:h}=(0,d.R)(),[v,g]=(0,r.useState)(!1),m=(0,r.useCallback)((()=>{g(!0)}),[]),b=(0,r.useCallback)((()=>{g(!1)}),[]),[x,y]=(0,r.useState)(!1),f=(0,r.useCallback)((()=>{y(!0),a.o.handleClickDeleteVideo({group_id:e})}),[e]),_=(0,r.useCallback)((()=>{y(!1)}),[]),{colors:j}=(0,n.u)();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(se,Object.assign({"data-e2e":"video-setting",onMouseEnter:p,onMouseLeave:h},{children:[(0,o.jsx)(de,{},void 0),(0,o.jsx)(s.G,Object.assign({backgroundColor:j.BGSecondary,placement:i,active:u,margin:-11,arrowMargin:10},{children:(0,o.jsxs)(ce,{children:[(0,o.jsx)(ue,Object.assign({"data-e2e":"video-privacy-settings"},{children:(0,o.jsx)(pe,Object.assign({onClick:m,type:"button"},{children:c("privacy_set")}),void 0)}),void 0),(0,o.jsx)(ue,Object.assign({"data-e2e":"video-delete"},{children:(0,o.jsx)(pe,Object.assign({onClick:f,type:"button"},{children:c("delete")}),void 0)}),void 0)]},void 0)}),void 0)]}),void 0),(0,o.jsx)(re,{videoId:e,visible:v,onClose:b},void 0),(0,o.jsx)(me,{visible:x,onClose:_,videoId:e},void 0)]},void 0)}},19294:(e,t,i)=>{i.d(t,{_:()=>Re});var o=i(11040),n=i(9236),r=i(91051),a=i(21041),l=i(86029),s=i(5389),d=i(42626),c=i(90298),u=i(55198),p=i(64176),h=i(32273),v=i(45949),g=i(22597),m=i(32370),b=i(55383),x=i(17133);const y=(0,i(80936).ZP)({resolved:{},chunkName:()=>"editor",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>Promise.all([i.e(5932),i.e(4620),i.e(773),i.e(1483),i.e(1189)]).then(i.bind(i,16034)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>16034});var f=i(81748),_=i(32913),j=i(36488);const k=(0,_.Z)("div",{target:"exl80ic0"})((({theme:{colors:e}})=>({width:"100%",height:"100%",display:"flex",flexDirection:"column-reverse",backgroundColor:e.BGPrimary})),"label:DivEmojiSuggestionContainer;"),w=(0,_.Z)("ul",{target:"exl80ic1"})((({theme:{colors:e}})=>({listStyleType:"none",margin:0,padding:0,order:1,flex:"0 0 38px",borderTop:`1px solid ${e.LineSecondary}`,display:"flex",flexDirection:"row"})),"label:UlNavContainer;"),S=(0,_.Z)("div",{target:"exl80ic2"})((({theme:{colors:e}})=>({order:2,flex:"1 1 100%",overflowY:"scroll",scrollbarWidth:"none","::-webkit-scrollbar":{width:4},"::-webkit-scrollbar-track":{marginTop:8},"::-webkit-scrollbar-thumb":{borderRadius:2,backgroundColor:e.LineSecondary},":hover::-webkit-scrollbar-thumb":{backgroundColor:e.TextQuaternary}})),"label:DivPanelContainer;"),C=(0,_.Z)("ul",{target:"exl80ic3"})({listStyleType:"none",margin:0,padding:0,width:"100%",height:"100%",display:"flex",flexWrap:"wrap"},"label:UlPanelList;"),P=(0,_.Z)("li",{target:"exl80ic4"})((({theme:e,theme:{colors:t},isActive:i})=>[(0,j.GI)({theme:e,color:"ConstBGInverse",typography:"H4"}),{listStyleType:"none",flex:"0 0 auto",width:40,height:40,lineHeight:"46px",margin:"5px 6px",cursor:"pointer",textAlign:"center",backgroundColor:i?t.BGInput:t.BGPrimary,borderRadius:8,":hover":{backgroundColor:t.BGInput}}]),"label:LiItem;"),T=(0,r.memo)((function({emojis:e,onSelect:t}){const i=(0,r.useRef)(-1),n=(0,r.useCallback)((e=>{const t=e.target;if("li"===t.nodeName.toLocaleLowerCase()){const e=t.getAttribute("data-index");i.current=e?Number(e):-1}}),[]),a=(0,r.useCallback)((o=>{(0,v.NS)(o);const n=i.current;-1!==n&&t(e[n].emoji)}),[e,t]);return(0,o.jsx)(C,Object.assign({onMouseOver:n,onClick:a},{children:e.map(((e,t)=>(0,o.jsx)(P,Object.assign({"data-index":t,isActive:!1},{children:e.emoji}),e.alias)))}),void 0)})),I=[{name:"basic",data:f.Z,iconIndex:11}],D=(0,r.memo)((function(e){const[t,i]=(0,r.useState)(0),n=(0,r.useCallback)((e=>{(0,v.NS)(e);const t=e.target;if("li"===t.nodeName.toLocaleLowerCase()){const e=t.getAttribute("data-index");i(e?Number(e):0)}}),[]);return(0,o.jsxs)(k,{children:[(0,o.jsx)(w,Object.assign({onClick:n},{children:I.map((({name:e,data:i,iconIndex:n},r)=>(0,o.jsx)(P,Object.assign({"data-index":r,isActive:r===t},{children:i[n].emoji}),e)))}),void 0),(0,o.jsx)(S,Object.assign({"data-e2e":"comment-emoji-group"},{children:(0,o.jsx)(T,{emojis:I[t].data,onSelect:e.onSelect},I[t].name)}),void 0)]},void 0)}));var O=i(10315),R=i(74820),M=i(68457),B=i(33642),L=i(4776),Z=i(64047),E=i(73566),F=i(48185),z=i(19630),A=i(82346),U=i(15608),V=i(11348),W=i(60595),H=i(20948),q=i(49584),N=i(53095),G=i(10026),$=i(5549),Y=i(35435),Q=i(56979),J=i(68854),K=i(21005),X=i(57244),ee=i(48936);let te=class{constructor(e){this.fetch=e}fetchAtDefaultList(){return this.fetch.get("/api/at/default/list/",{query:{cursor:0,count:25}})}fetchRecentContactList(e){return this.fetch.get("/api/mention/recent/contact/list/v1/",{query:{mentionType:3,secUid:e}})}fetchSearchList(e,t){return this.fetch.get("/api/comment/search/sug/user/",{query:{keyword:e,count:30,mention_type:3,uid_filter_list:t}})}};te=(0,Z.__decorate)([(0,X.G)(),(0,Z.__metadata)("design:paramtypes",[ee.r])],te);let ie=class extends E.D{constructor(e){super(),this.service=e,this.defaultState={keyword:"",loading:!1,isFetchError:!1,defaultResult:{list:[]},searchResult:{list:[],hasMore:!0,uidFilterList:""},activeList:[],activeItem:{index:null,isActivatedByMouse:!1},recentCount:0}}setKeyword(e,t){e.keyword=t}setLoading(e,t){e.loading=t}setFetchError(e,t){e.isFetchError=t,t&&(e.searchResult.hasMore=!1)}setActiveList(e,t){e.activeList=t}setActiveItem(e,t){const{index:i,isActivatedByMouse:o=!1}=t;e.activeItem.index=i,e.activeItem.isActivatedByMouse=o}activePrev(e){const{activeItem:t,activeList:i}=e,{index:o}=t;if(null===o)return;const{length:n}=i;0!==n&&(e.activeItem.index=Math.max(0,o-1),e.activeItem.isActivatedByMouse=!1)}activeNext(e){const{activeItem:t,activeList:i}=e,{index:o}=t;if(null===o)return;const{length:n}=i;0!==n&&(e.activeItem.index=Math.min(o+1,n-1),e.activeItem.isActivatedByMouse=!1)}setDefaultList(e,t){e.defaultResult.list=t,e.activeList=t}setSearchResult(e,t){e.searchResult=t,0===t.list.length?e.activeList=e.defaultResult.list:e.activeList=t.list}setRecentCount(e,t){e.recentCount=t}fetchDefaultResult(e){return e.pipe((0,H.M)(this.state$),(0,q.z)((([{secUid:e},t])=>t.defaultResult.list.length>0?(0,A.of)(this.getActions().setActiveItem({index:-1}),this.getActions().setKeyword(""),this.getActions().setActiveList(t.defaultResult.list)):(0,U.D)([this.service.fetchRecentContactList(e),this.service.fetchAtDefaultList()]).pipe((0,N.z)((([e,t])=>{const{statusCode:i,userList:o=[]}=e,{status_code:n,user_list:r=[],block_results:a=[]}=t;if(0===i||0===n){const e=r.map((e=>(0,B.yk)(e))).map((e=>(a.some((t=>((e,t)=>{var i,o;if(e.uid===t.id)return t.blockType=null===(o=null===(i=e.user_blocked_results)||void 0===i?void 0:i[0])||void 0===o?void 0:o.block_type,!0})(t,e))),e)));return(0,A.of)(this.getActions().setRecentCount(o.length),this.getActions().setDefaultList(function(e,t){let i=t;return e.forEach((e=>{i=i.filter((t=>e.uniqueId!==t.uniqueId))})),[...e,...i]}(o,e)))}return(0,A.of)(this.getActions().setFetchError(!0))})),(0,G.O)(this.getActions().setLoading(!0),this.getActions().setFetchError(!1),this.getActions().setActiveItem({index:null})),(0,$.l)(this.getActions().setLoading(!1),this.getActions().setActiveItem({index:-1}),this.getActions().setKeyword("")),(0,K.n)({})))))}fetchSearchResult(e){return e.pipe((0,H.M)(this.state$),(0,Y.w)((([e,t])=>{const{keyword:i,searchResult:{uidFilterList:o,list:n,hasMore:r}}=t,a=e===i,l=a?o:"";return""===e||a&&!r?V.E:this.service.fetchSearchList(e,l).pipe((0,Q.U)((e=>{const{statusCode:t,userList:i=[],hasMore:o}=e;if(0===t||403===t||203===t){const e=a?[...n,...i]:i,t=encodeURIComponent(JSON.stringify(e.map((e=>e.id))));return this.getActions().setSearchResult({list:e,hasMore:1===o,uidFilterList:t})}return this.getActions().setFetchError(!0)})),(0,G.O)(this.getActions().setLoading(!a),this.getActions().setFetchError(!1),this.getActions().setActiveItem({index:a?t.activeItem.index:null})),(0,$.l)(this.getActions().setLoading(!1),this.getActions().setKeyword(e),this.getActions().setActiveItem({index:a?t.activeItem.index:-1})),(0,J.K)((()=>(0,A.of)(this.getActions().setLoading(!1),this.getActions().setFetchError(!0)))))})))}};(0,Z.__decorate)([(0,F.lF)(),(0,Z.__metadata)("design:type",Function),(0,Z.__metadata)("design:paramtypes",[Object,String]),(0,Z.__metadata)("design:returntype",void 0)],ie.prototype,"setKeyword",null),(0,Z.__decorate)([(0,F.lF)(),(0,Z.__metadata)("design:type",Function),(0,Z.__metadata)("design:paramtypes",[Object,Boolean]),(0,Z.__metadata)("design:returntype",void 0)],ie.prototype,"setLoading",null),(0,Z.__decorate)([(0,F.lF)(),(0,Z.__metadata)("design:type",Function),(0,Z.__metadata)("design:paramtypes",[Object,Boolean]),(0,Z.__metadata)("design:returntype",void 0)],ie.prototype,"setFetchError",null),(0,Z.__decorate)([(0,F.lF)(),(0,Z.__metadata)("design:type",Function),(0,Z.__metadata)("design:paramtypes",[Object,Array]),(0,Z.__metadata)("design:returntype",void 0)],ie.prototype,"setActiveList",null),(0,Z.__decorate)([(0,F.lF)(),(0,Z.__metadata)("design:type",Function),(0,Z.__metadata)("design:paramtypes",[Object,Object]),(0,Z.__metadata)("design:returntype",void 0)],ie.prototype,"setActiveItem",null),(0,Z.__decorate)([(0,F.lF)(),(0,Z.__metadata)("design:type",Function),(0,Z.__metadata)("design:paramtypes",[Object]),(0,Z.__metadata)("design:returntype",void 0)],ie.prototype,"activePrev",null),(0,Z.__decorate)([(0,F.lF)(),(0,Z.__metadata)("design:type",Function),(0,Z.__metadata)("design:paramtypes",[Object]),(0,Z.__metadata)("design:returntype",void 0)],ie.prototype,"activeNext",null),(0,Z.__decorate)([(0,F.lF)(),(0,Z.__metadata)("design:type",Function),(0,Z.__metadata)("design:paramtypes",[Object,Array]),(0,Z.__metadata)("design:returntype",void 0)],ie.prototype,"setDefaultList",null),(0,Z.__decorate)([(0,F.lF)(),(0,Z.__metadata)("design:type",Function),(0,Z.__metadata)("design:paramtypes",[Object,Object]),(0,Z.__metadata)("design:returntype",void 0)],ie.prototype,"setSearchResult",null),(0,Z.__decorate)([(0,F.lF)(),(0,Z.__metadata)("design:type",Function),(0,Z.__metadata)("design:paramtypes",[Object,Number]),(0,Z.__metadata)("design:returntype",void 0)],ie.prototype,"setRecentCount",null),(0,Z.__decorate)([(0,F.Qm)(),(0,Z.__metadata)("design:type",Function),(0,Z.__metadata)("design:paramtypes",[W.y]),(0,Z.__metadata)("design:returntype",void 0)],ie.prototype,"fetchDefaultResult",null),(0,Z.__decorate)([(0,F.Qm)(),(0,Z.__metadata)("design:type",Function),(0,Z.__metadata)("design:paramtypes",[W.y]),(0,Z.__metadata)("design:returntype",void 0)],ie.prototype,"fetchSearchResult",null),ie=(0,Z.__decorate)([(0,z.Y)("MentionSuggestionUserModule"),(0,Z.__metadata)("design:paramtypes",[te])],ie);var oe=i(88833),ne=i(75311);const re=(0,_.Z)("div",{target:"e16bf9xh0"})((({theme:{colors:e}})=>({width:"100%",height:"100%",overflowX:"hidden",overflowY:"scroll",backgroundColor:e.BGPrimary,scrollbarWidth:"none","::-webkit-scrollbar":{width:0}})),"label:DivContainer;"),ae=(0,_.Z)("div",{target:"e16bf9xh1"})({display:"flex",flexDirection:"column",alignItems:"center"},"label:DivNotItemContainer;"),le=(0,_.Z)("p",{target:"e16bf9xh2"})((({theme:e})=>(0,j.GI)({theme:e,color:"TextTertiary",typography:"H6"})),{flex:"1 1 auto",margin:"18px auto"},"label:PLoadingText;"),se=(0,_.Z)("p",{target:"e16bf9xh3"})((({theme:e})=>(0,j.GI)({theme:e,color:"TextTertiary",typography:"H5"})),{flex:"1 1 auto",marginTop:106},"label:PErrorText;"),de=(0,_.Z)("p",{target:"e16bf9xh4"})((({theme:e})=>(0,j.GI)({theme:e,color:"Primary",typography:"H6"})),{flex:"1 1 auto",margin:"11px auto",cursor:"pointer"},"label:PRetryText;"),ce=(0,_.Z)("div",{target:"e16bf9xh5"})((({theme:{colors:e},isDisabled:t})=>({height:"100%",padding:"4px 0",margin:"0 16px",display:"flex",cursor:t?"default":"pointer",borderBottom:`1px solid ${e.LineSecondary}`})),"label:DivItemContainer;"),ue=(0,_.Z)("div",{target:"e16bf9xh6"})((({theme:{colors:e},isActive:t,isDisabled:i})=>({height:48,backgroundColor:t?e.BGView:e.BGPrimary,opacity:i?.34:1})),"label:DivItemBackground;"),pe=(0,_.Z)("div",{target:"e16bf9xh7"})([{flex:"1 1 auto",overflow:"hidden"},({theme:{direction:e}})=>(0,j.YJ)({direction:e,marginStart:8})],"label:DivInfoContainer;"),he=(0,_.Z)("p",{target:"e16bf9xh8"})([{display:"flex",alignItems:"center"}],"label:PMentionInfoLine;"),ve=(0,_.Z)("span",{target:"e16bf9xh9"})((({theme:e})=>(0,j.GI)({theme:e,fontWeight:"semiBold",typography:"P3"})),j.wj,"label:SpanInfoNickname;"),ge=(0,_.Z)("span",{target:"e16bf9xh10"})((({theme:e})=>(0,j.GI)({theme:e,fontWeight:"normal",typography:"P4"})),j.wj,"label:SpanInfoUniqueId;"),me=(0,_.Z)("span",{target:"e16bf9xh11"})({margin:"0px 4px"},"label:SpanInfoDot;"),be=(0,_.Z)("span",{target:"e16bf9xh12"})({fontSize:"10px"},"label:SpanInfoVerify;"),xe=(0,_.Z)("span",{target:"e16bf9xh13"})((({theme:e})=>(0,j.GI)({theme:e,color:"TextTertiary",fontWeight:"semiBold",typography:"P4"})),{verticalAlign:"middle",flexShrink:0},"label:SpanInfoFollowing;"),ye=(0,r.memo)((function({isActive:e,index:t,user:i}){var a;const l=(0,h.Q)(),{user:s}=null!==(a=(0,x.Lh)((()=>["user"]),[]))&&void 0!==a?a:{},{nickname:d,uniqueId:c,verified:u,relation:p,avatarThumb:v,blockType:g}=i,m=(0,r.useMemo)((()=>1===p||2===p),[p]),b=1===g||c===(null==s?void 0:s.uniqueId),{setActiveItem:y}=(0,n.qj)(ie),f=(0,r.useCallback)((()=>{y({index:t,isActivatedByMouse:!0})}),[y,t]);return(0,o.jsx)(ue,Object.assign({"data-e2e":"comment-at-list",isActive:e,isDisabled:b,onMouseEnter:f},{children:(0,o.jsxs)(ce,Object.assign({isDisabled:b},{children:[(0,o.jsx)(ne.q,{size:40,src:v,style:{flex:"0 0 40px"}},void 0),(0,o.jsxs)(pe,{children:[(0,o.jsxs)(he,{children:[(0,o.jsx)(ve,Object.assign({"data-e2e":"comment-at-nickname"},{children:d}),void 0),u&&(0,o.jsx)(be,{children:(0,o.jsx)(oe.Q,{},void 0)},void 0),m&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(me,{children:"·"},void 0),(0,o.jsx)(xe,{children:l("Following")},void 0)]},void 0)]},void 0),(0,o.jsx)(he,{children:(0,o.jsx)(ge,Object.assign({"data-e2e":"comment-at-uniqueid"},{children:c}),void 0)},void 0)]},void 0)]}),void 0)}),void 0)}));var fe=i(96434);const _e=(0,r.memo)((function({keyword:e="",onSelect:t}){var i;const a=(0,h.Q)(),{colors:l}=(0,R.u)(),{user:s}=null!==(i=(0,x.Lh)((()=>["user"]),[]))&&void 0!==i?i:{},{secUid:c=""}=(0,B.m7)(s),[{loading:u,isFetchError:p,activeList:g,activeItem:m,recentCount:b},{fetchDefaultResult:y,fetchSearchResult:f}]=(0,n.b7)(ie),{index:_}=m,j=(0,r.useRef)(null),k=(0,r.useRef)([]);(0,r.useEffect)((()=>{y({secUid:c})}),[y,c]),(0,r.useEffect)((()=>{""===e?y({secUid:c}):f(e)}),[e,c,y,f]),(0,r.useEffect)((()=>{const{index:e,isActivatedByMouse:t}=m;t||function(e,t){if(null===t||-1===t||null===e.current)return;const i=48*t,o=48*(t+1),n=e.current.clientHeight,{scrollTop:r}=e.current;i<r?e.current.scrollTop=i:o>n+r&&(e.current.scrollTop=o-n)}(j,e)}),[m]);const w=(0,r.useCallback)((()=>""!==e&&f(e)),[f,e]);(0,L.s)({elemRef:j,onHitBottom:w,bottomThreshold:96});const S=(0,r.useCallback)((t=>{(0,v.NS)(t),""===e?y({secUid:c}):f(e)}),[c,y,f,e]),C=(0,r.useCallback)((e=>{(0,v.NS)(e),null==t||t()}),[t]),P=(0,r.useCallback)((t=>{g.slice(t,t+5).forEach(((i,o)=>{if(k.current[t+o])return;const{blockType:n,uniqueId:r,id:a,relation:l}=i,c=1===n||r===(null==s?void 0:s.uniqueId);let u="all_user";!e&&t+o<b?u="recent":1===l?u="following":2===l&&(u="friends"),d.y.handleMentionItemShow({to_user_id:a,user_type:u,search_keyword:e,is_valid:c?"0":"1"}),k.current[t+o]=!0}))}),[g,null==s?void 0:s.uniqueId,e,b]),T=(0,M.fB)((e=>{const{scrollTop:t}=e.target,i=Math.floor(t/48);P(i)}),[P],50);return(0,r.useEffect)((()=>{P(0)}),[P]),u?(0,o.jsx)(re,{children:(0,o.jsxs)(ae,{children:[(0,o.jsx)(fe.$,{size:26,fill:l.TextTertiary,style:{marginTop:80,flex:"1 1 auto"}},void 0),(0,o.jsx)(le,{children:a("comment_at_search")},void 0)]},void 0)},void 0):p?(0,o.jsx)(re,{children:(0,o.jsxs)(ae,{children:[(0,o.jsx)(se,{children:a("comment_at_load")},void 0),(0,o.jsx)(de,Object.assign({onClick:S},{children:a("comment_at_tryagain")}),void 0)]},void 0)},void 0):(0,o.jsx)(re,Object.assign({ref:j,onClick:C,onScroll:T},{children:g.map(((e,t)=>(0,o.jsx)(ye,{user:e,index:t,isActive:_===t},t)))}),void 0)})),je=(0,_.Z)("div",{target:"e1rzzhjk0"})({display:"flex",flexDirection:"row",alignItems:"flex-end"},"label:DivCommentContainer;"),ke=(0,_.Z)("div",{target:"e1rzzhjk1"})({flex:"1 1 auto"},"label:DivLayoutContainer;"),we=(0,_.Z)("div",{target:"e1rzzhjk2"})((({theme:{colors:e},isFocus:t,isInVideoDetail:i})=>({position:"relative",display:"flex",flexDirection:"row",alignItems:"flex-end",backgroundColor:e.BGInput,boxSizing:"border-box",border:"1px solid",borderColor:t?e.LinePrimary:"transparent",borderRadius:8,padding:i?"0 9px 0 16px":"0 9px"})),"label:DivInputAreaContainer;");we.defaultProps=Object.assign(Object.assign({},we.defaultProps),{"data-e2e":"comment-input"});const Se=(0,_.Z)("div",{target:"e1rzzhjk3"})((({isInVideoDetail:e=!1})=>({flex:"1 1 auto",height:"auto",margin:e?"11px 0":"10px 0"})),(({theme:{direction:e}})=>(0,j.YJ)({direction:e,marginEnd:8})),"label:DivInputEditorContainer;");function Ce({theme:e,isActive:t=!1,isInVideoDetail:i=!1}){return[{flex:"0 0 32px",width:32,height:32,padding:5,margin:i?"7px 3px":3,cursor:"pointer",backgroundColor:t?e.colors.ShadowPrimary:"transparent",borderRadius:8,":hover":{backgroundColor:e.colors.ShadowPrimary},svg:{width:"100%",height:"100%"}}]}Se.defaultProps=Object.assign(Object.assign({},Se.defaultProps),{"data-e2e":"comment-text"});const Pe=(0,_.Z)("div",{target:"e1rzzhjk4"})(Ce,"label:DivMentionButton;");Pe.defaultProps=Object.assign(Object.assign({},Pe.defaultProps),{"data-e2e":"comment-at-icon"});const Te=(0,_.Z)("div",{target:"e1rzzhjk5"})(Ce,"label:DivEmojiButton;");Te.defaultProps=Object.assign(Object.assign({},Te.defaultProps),{"data-e2e":"comment-emoji-icon"});const Ie=(0,_.Z)("div",{target:"e1rzzhjk6"})((({theme:e,isActive:t,isInVideoDetail:i=!1})=>[(0,j.GI)({theme:e,color:t?"Primary":"TextQuaternary",typography:"H6",fontWeight:"semiBold"}),{cursor:t?"pointer":"default",flex:"0 0 48px",fontSize:i?"16px":"14px",lineHeight:i?"48px":"39px",textAlign:(0,j.$K)(e.direction,"end")},(0,j.YJ)({direction:e.direction,marginEnd:4})]),"label:DivPostButton;");Ie.defaultProps=Object.assign(Object.assign({},Ie.defaultProps),{"data-e2e":"comment-post"});const De=(0,_.Z)("div",{target:"e1rzzhjk7"})((({display:e,theme:{colors:t,direction:i}})=>[{position:"absolute",width:280,height:256,top:-256,borderRadius:8,overflow:"hidden",backgroundColor:t.BGPrimary,boxShadow:`${t.ShadowPrimary} 0px 4px 16px 0px`,display:e?"block":"none"},(0,j.YJ)({direction:i,start:44})]),"label:DivMentionSuggestionContainer;"),Oe=(0,_.Z)("div",{target:"e1rzzhjk9"})((({theme:{colors:e,direction:t}})=>[{position:"absolute",width:368,height:300,top:-300,borderRadius:8,overflow:"hidden",backgroundColor:e.BGPrimary,boxShadow:`${e.ShadowPrimary} 0px 4px 16px 0px`,outline:0,zIndex:1},(0,j.YJ)({direction:t,end:12})]),"label:DivEmojiPanelContainer;"),Re=(0,r.memo)((function({itemId:e,disable:t,teaParams:i,onBlur:f=(()=>{}),onFocus:_=(()=>{})}){var j;const{user:k}=null!==(j=(0,x.Lh)((()=>["user"]),[]))&&void 0!==j?j:{},[{activeItem:w,activeList:S},{activePrev:C,activeNext:P}]=(0,n.b7)(ie,{selector:({activeItem:e,activeList:t})=>({activeItem:e,activeList:t}),dependencies:[]}),{index:T}=w,[{isInputEmpty:I,isInputFocus:R},{publishComment:M,setNeedResetKeyword:B,setIsInputFocus:L}]=(0,n.b7)(O.p,{selector:e=>({isInputEmpty:e.isInputEmpty,isInputFocus:e.isInputFocus}),dependencies:[]}),[Z,E]=(0,r.useState)(null),[F,z]=(0,r.useState)(!1),A=(0,r.useRef)(null),U=(0,h.Q)(),[V,W]=(0,r.useState)(!1);(0,r.useEffect)((()=>{W(!0)}),[]);const H=(0,r.useCallback)((e=>{var t;(0,v.NS)(e),null===(t=A.current)||void 0===t||t.handleInsertMentionTrigger(),d.y.handleSearchAt(Object.assign({enter_method:"button"},i))}),[i]),q=(0,r.useCallback)((e=>{"@"===e&&d.y.handleSearchAt(Object.assign({enter_method:"input"},i))}),[i]),N=(0,r.useCallback)((()=>{var e;if(null===Z||null===T)return;const t=S[T];t&&(1!==t.blockType?t.uniqueId!==(null==k?void 0:k.uniqueId)?(null===(e=A.current)||void 0===e||e.handleSelectUser(t),d.y.handleSelectAt(Object.assign(Object.assign({},i),{to_user_id:t.id}))):u.h.open({content:U("no_at_me"),duration:3,widthType:"half",getContainer:m.Z}):u.h.open({content:U("mention_privacy_toast_cant_mention"),duration:3,widthType:"half",getContainer:m.Z}))}),[T,S,Z,U,i,k]),G=(0,r.useCallback)((e=>{var t,o,n;null===(t=A.current)||void 0===t||t.handleSelectEmoji(e),z(!1),d.y.handleEmojiSelect(Object.assign({enter_method:"button",emoji_code:null===(n=e,o=[...n].map((e=>`${e.codePointAt(0)}`)))||void 0===o?void 0:o[0]},i))}),[i]),$=(0,r.useCallback)((e=>{var t;(0,v.NS)(e),z(!F),E(null),null===(t=A.current)||void 0===t||t.focus()}),[F]),Y=(0,r.useCallback)((t=>()=>{var o,n;if(!I){const r=null!==(n=null===(o=A.current)||void 0===o?void 0:o.getTextInfo())&&void 0!==n?n:{inputText:"",textExtra:[]};M(Object.assign(Object.assign({awemeId:e},r),{teaParams:Object.assign({enter_method:t},i)}))}}),[I,e,M,i]),Q=(0,r.useCallback)((()=>{L(!0),_()}),[_]),J=(0,r.useCallback)((()=>{L(!1),f(),c.V.handleCloseText({group_id:i.group_id})}),[f,i.group_id]),K=(0,r.useCallback)((()=>{c.V.handleEnterText({group_id:i.group_id})}),[i.group_id]),X=(0,b.J)({upHandler:C,downHandler:P,confirmHandler:N});(0,r.useEffect)((()=>{const e=()=>{F&&z(!1),B(!0)};return document.addEventListener("click",e),()=>{document.removeEventListener("click",e)}}),[F,B]);const{pathname:ee}=(0,a.TH)(),te=(0,g.cQ)(ee);return(0,o.jsxs)(je,{children:[(0,o.jsx)(ke,{children:(0,o.jsxs)(we,Object.assign({isInVideoDetail:te,isFocus:R,onKeyDown:X,onFocus:Q,onBlur:J,onClick:K},{children:[(0,o.jsx)(Se,Object.assign({isInVideoDetail:te},{children:V?(0,o.jsx)(y,{ref:A,disable:t,onKeywordChange:E,onPost:Y("input"),onInputTrigger:q},void 0):null}),void 0),(0,o.jsx)(p.u,Object.assign({fullscreenAdjust:!0,overlay:U("comment_tray_at")},{children:(0,o.jsx)(Pe,Object.assign({isInVideoDetail:te,onClick:H},{children:(0,o.jsx)(l.Z,{},void 0)}),void 0)}),void 0),(0,o.jsx)(p.u,Object.assign({fullscreenAdjust:!0,overlay:U("comment_tray_emoji")},{children:(0,o.jsx)(Te,Object.assign({isInVideoDetail:te,isActive:F,onClick:$},{children:(0,o.jsx)(s.Z,{},void 0)}),void 0)}),void 0),null!==Z&&!F&&(0,o.jsx)(De,Object.assign({"data-e2e":"comment-at-user",display:S.length>0},{children:(0,o.jsx)(_e,{keyword:Z,onSelect:N},void 0)}),void 0),F&&(0,o.jsx)(Oe,Object.assign({"data-e2e":"comment-emoji-list"},{children:(0,o.jsx)(D,{onSelect:G},void 0)}),void 0)]}),void 0)},void 0),(0,o.jsx)(Ie,Object.assign({isInVideoDetail:te,isActive:!I,onClick:Y("button")},{children:U("comment_tray_btn")}),void 0)]},void 0)}))},72767:(e,t,i)=>{i.d(t,{$:()=>Ke});var o=i(11040),n=i(9236),r=i(91051),a=i(21041),l=i(32273),s=i(29025),d=i(32258),c=i(99116),u=i(87930),p=i(31014),h=i(13006),v=i(42626),g=i(88833),m=i(55198),b=i(75311),x=i(45313),y=i(99087),f=i(87458),_=i(32370),j=i(33642),k=i(3148),w=i(71300),S=i(50894),C=i(9472),P=i(83014),T=i(26641),I=i(17133),D=i(66599),O=i(38310),R=i(10315),M=i(74820),B=i(98160),L=i(56529),Z=i(45949),E=i(85640),F=i(39696),z=i(48088),A=i(93179),U=i(85945),V=i(8710),W=i(32913),H=i(36488);const q=(0,W.Z)("div",{target:"ezxoskx0"})((({theme:e})=>(0,H.GI)({theme:e,typography:"P4",color:"TextTertiary"})),{width:"20px",display:"flex",flexDirection:"column",alignItems:"center",cursor:"pointer"},"label:DivLikeWrapper;"),N=(0,W.Z)(q,{target:"ezxoskx1"})((({theme:e})=>(0,H.YJ)({direction:e.direction,marginStart:"24px"})),{width:"unset",height:"20px",display:"inline-flex",flexDirection:"row",alignItems:"center",cursor:"pointer",verticalAlign:"bottom"},"label:StyledLikeWrapper;"),G=(0,W.Z)("span",{target:"ezxoskx2"})((({theme:e})=>(0,H.GI)({theme:e,typography:"P4"})),(({theme:e})=>(0,H.YJ)({direction:e.direction,marginStart:"4px"})),"label:SpanCount;");G.defaultProps=Object.assign(Object.assign({},G.defaultProps),{"data-e2e":"comment-like-count"});const $=(0,r.memo)((function(e){const{count:t,liked:i}=e,{colors:n}=(0,M.u)(),r=i?(0,o.jsx)(U.Z,{width:20,height:20,fill:n.Primary},void 0):(0,o.jsx)(V.Z,{width:20,height:20},void 0);return(0,o.jsxs)(q,Object.assign({onClick:e.onClick},{children:[(0,o.jsx)("div",Object.assign({"data-e2e":"comment-like-icon"},{children:r}),void 0),(0,o.jsx)(G,Object.assign({style:{marginLeft:0,marginRight:0}},{children:(0,j.BT)(t)}),void 0)]}),void 0)})),Y=(0,r.memo)((function(e){const{count:t,liked:i,isUIOptimization:n}=e,{colors:r}=(0,M.u)(),a=i?(0,o.jsx)(U.Z,{width:20,height:20,fill:r.Primary},void 0):(0,o.jsx)(V.Z,{width:20,height:20},void 0);return(0,o.jsxs)(N,Object.assign({onClick:e.onClick},{children:[a,(0,o.jsx)(G,Object.assign({style:{color:n?r.TextTertiaryAlt:r.TextPrimary,fontSize:"14px"}},{children:(0,j.BT)(t)}),void 0)]}),void 0)}));var Q=i(58948);const J=(0,W.Z)("div",{target:"esns4rh0"})((({theme:{direction:e}})=>[(0,H.YJ)({direction:e,marginStart:"18px",paddingEnd:"2px"}),{width:"24px",flex:"0 0 24px",paddingTop:"24px",display:"flex",flexDirection:"column",alignItems:"center"}]),"label:DivActionContainer;"),K=(0,W.Z)("div",{target:"esns4rh1"})({position:"relative",display:"none"},"label:DivMoreContainer;"),X=(0,W.Z)(Q.Z,{target:"esns4rh2"})({width:"24px",height:"24px",cursor:"pointer",display:"block"},"label:StyledMoreIcon;");X.defaultProps=Object.assign(Object.assign({},X.defaultProps),{"data-e2e":"comment-more-icon"});const ee=(0,W.Z)("div",{target:"esns4rh3"})((({theme:e})=>(0,H.GI)({theme:e,typography:"P2",fontWeight:"bold",fontFamily:"Proxima"})),{padding:"8px 16px",minWidth:"200px"},"label:DivPopupContainer;"),te=(0,W.Z)("p",{target:"esns4rh4"})((({theme:{colors:e}})=>({display:"flex",alignItems:"center",padding:"12px 0",whiteSpace:"nowrap",cursor:"pointer","&:not(:last-of-type)":{borderBottom:`1px solid ${e.LineSecondary}`},":hover":{color:e.Primary}})),"label:PActionItem;"),ie=(0,W.Z)("span",{target:"esns4rh5"})((({theme:{direction:e}})=>(0,H.YJ)({direction:e,marginStart:"12px"})),"label:SpanActionText;"),oe=(0,W.Z)("div",{target:"esns4rh6"})((({theme:e})=>(0,H.GI)({theme:e,typography:"H4",fontFamily:"Sofia",fontWeight:"bold"})),{padding:"28px 24px",textAlign:"center"},"label:DivModalContentContainer;"),ne=(0,W.Z)("div",{target:"esns4rh7"})({display:"flex",flexDirection:"column"},"label:DivButtonContainer;"),re=(0,W.Z)("button",{target:"esns4rh8"})(H.Ph,(({primary:e,theme:t})=>[(0,H.GI)({theme:t,typography:"H6",color:e?"TextPrimary":"TextTertiary",fontWeight:e?"semiBold":"normal"}),{height:"48px",lineHeight:"48px",cursor:"pointer",":first-of-type":{"::before":{content:'""',width:"100%",height:"1px",display:"block",background:t.colors.LineSecondary,transform:"scaleY(0,5)"},"::after":{content:'""',width:"100%",height:"1px",display:"block",background:t.colors.LineSecondary,transform:"scaleY(0,5)"}}}]),"label:ButtonAction;"),ae=function(e){const{itemId:t,cid:i,count:a,liked:s,onDelete:d,isShowReport:c,isShowDelete:u,inDetailPage:h=!1}=e,v=(0,l.Q)(),{direction:g}=(0,M.u)(),{active:m,handleMouseEnter:b,handleMouseLeave:x}=(0,z.R)(),y=function({itemId:e,cid:t,onShow:i}){var o;const r=(0,n.mp)(T.G,{selector:e=>e.lang,dependencies:[]}),a=(0,n.mp)(O.A,{selector:t=>{var i,o;return null!==(o=null===(i=t[e])||void 0===i?void 0:i.author)&&void 0!==o?o:""},dependencies:[e]}),l=(0,n.mp)(p.r,{dependencies:[t],selector:e=>e[t]}),s=(0,n.mp)(D.z,{dependencies:[null==l?void 0:l.user],selector:e=>{var t,i;return null===(i=e.users[null!==(t=null==l?void 0:l.user)&&void 0!==t?t:""])||void 0===i?void 0:i.secUid}}),d=(0,n.mp)(O.A,{selector:t=>t[e],dependencies:[e]}),c=(0,n.mp)(D.z,{selector:e=>{var t;return e.users[null!==(t=null==d?void 0:d.author)&&void 0!==t?t:""]},dependencies:[null==d?void 0:d.author]}),{handleShowReport:u}=(0,A.Qi)({onShow:i,reportTarget:{lang:r,report_type:"comment",comment_with_emoji:/\[(\w+)\]/g.test(null!==(o=null==l?void 0:l.text)&&void 0!==o?o:"")?1:0,object_id:t,owner_id:null!=s?s:"",object_owner_id:null!=s?s:"",video_owner_id:a,video_id:e,video_owner:c}});return u}({itemId:t,cid:i,onShow:Z.NS}),[f,j]=(0,r.useState)(!1),k=(0,r.useCallback)((()=>{j(!0)}),[]),w=(0,r.useCallback)((()=>{d(),j(!1)}),[d]),S=(0,r.useCallback)((()=>{j(!1)}),[]),C="ltr"===g?"bottomRight":"bottomLeft",{colors:P}=(0,M.u)(),I=(0,_.Z)();return(0,o.jsxs)(J,{children:[(0,o.jsxs)(K,Object.assign({onMouseEnter:b,onMouseLeave:x},{children:[(0,o.jsx)("div",Object.assign({"data-e2e":"comment-more-icon"},{children:(0,o.jsx)(X,{},void 0)}),void 0),(0,o.jsx)(F.G,Object.assign({backgroundColor:P.BGSecondary,active:m,placement:C,margin:h?2:-6},{children:(0,o.jsxs)(ee,{children:[c&&(0,o.jsxs)(te,Object.assign({onClick:y,"data-e2e":"comment-report"},{children:[(0,o.jsx)(B.Z,{width:24,height:24},void 0),(0,o.jsx)(ie,{children:v("Report")},void 0)]}),void 0),u&&(0,o.jsxs)(te,Object.assign({"data-e2e":"comment-delete",onClick:k},{children:[(0,o.jsx)(L.Z,{width:24,height:24},void 0),(0,o.jsx)(ie,{children:v("comment_delete_btn")},void 0)]}),void 0)]},void 0)}),void 0)]}),void 0),h?null:(0,o.jsx)($,{count:a,liked:s,onClick:e.onLike},void 0),u&&(0,o.jsx)(E.u_,Object.assign({visible:f,keyboardCloseable:!1,maskCloseable:!1,parentRef:I},{children:(0,o.jsxs)("div",Object.assign({"data-e2e":"comment-delete-modal",style:{width:310}},{children:[(0,o.jsx)(oe,{children:v("comment_delete_des")},void 0),(0,o.jsxs)(ne,{children:[(0,o.jsx)(re,Object.assign({"data-e2e":"comment-modal-delete",primary:!0,onClick:w},{children:v("comment_delete_confirm")}),void 0),(0,o.jsx)(re,Object.assign({"data-e2e":"comment-modal-cancel",onClick:S},{children:v("comment_delete_cancel")}),void 0)]},void 0)]}),void 0)}),void 0)]},void 0)};var le=i(28327),se=i(15679);const de={boxShadow:"0 2px 12px rgb(0 0 0 / 12%)",padding:"8px 16px",margin:"-8px -16px 8px",borderRadius:"8px"},ce={boxShadow:"none",padding:"0",margin:"0 0 16px"},ue=(0,le.F4)({"0%":ce,"10%":de,"90%":de,"100%":ce}),pe=(0,W.Z)("div",{target:"e1g2efjf0"})((({isUIOptimization:e})=>({display:"flex",flexDirection:"row",alignItems:"flex-start",marginBottom:e?"12px":"16px",position:"relative",":hover":{[`${K}`]:{display:"block"},[`${J}`]:{paddingTop:"0"}}})),(({highlighted:e})=>e?{animationName:ue,animationDuration:"3s"}:null),"label:DivCommentContentContainer;"),he=(0,W.Z)("div",{target:"e1g2efjf1"})({flex:"1 1 auto"},"label:DivContentContainer;"),ve=(0,W.Z)("span",{target:"e1g2efjf2"})((({theme:{colors:e},isCreator:t})=>({fontSize:"16px",color:t?e.Primary:e.TextTertiary})),"label:SpanIdentity;"),ge=(0,W.Z)("span",{target:"e1g2efjf3"})((({theme:e})=>(0,H.GI)({theme:e,fontFamily:"Proxima"})),"label:SpanUserNameText;"),me=(0,W.Z)(se.D,{target:"e1g2efjf4"})((({theme:e})=>(0,H.GI)({theme:e,typography:"P1",fontFamily:"Sofia",fontWeight:"bold"})),H.gi,{[`:hover ${ge}`]:{textDecoration:"underline"}},"label:StyledUserLinkName;"),be=(0,W.Z)(se.D,{target:"e1g2efjf5"})((({theme:{direction:e},isInDetailPage:t})=>[{":hover":{[`~ ${he} ${me} ${ge}`]:{textDecoration:"underline"}}},(0,H.YJ)({direction:e,marginEnd:t?"16px":"12px"})]),"label:StyledUserLinkAvatar;"),xe=(0,W.Z)("p",{target:"e1g2efjf6"})((({theme:e})=>(0,H.GI)({theme:e,typography:"P2"})),{whiteSpace:"pre-line",wordBreak:"break-word",marginBottom:"6px"},"label:PCommentText;"),ye=(0,W.Z)("p",{target:"e1g2efjf8"})((({theme:e,isUIOptimization:t})=>(0,H.GI)({theme:e,typography:"P3",color:t?"TextTertiaryAlt":"TextTertiary"})),"label:PCommentSubContent;"),fe=({inDetailPage:e,isUIOptimization:t})=>t?"TextTertiaryAlt":e?"TextPrimary":"TextTertiary",_e=(0,W.Z)("span",{target:"e1g2efjf9"})({cursor:"pointer"},(({theme:e,inDetailPage:t=!1,isUIOptimization:i=!1})=>(0,H.GI)({theme:e,fontWeight:t?"semiBold":"normal",color:fe({inDetailPage:t,isUIOptimization:i})})),(({theme:{direction:e}})=>(0,H.YJ)({direction:e,marginStart:24})),"label:SpanReplyButton;"),je=(0,W.Z)(se.D,{target:"e1g2efjf10"})((({theme:{colors:e}})=>({display:"inline-block",direction:"ltr",color:e.Primary,cursor:"pointer",":hover":{color:e.Primary},"&:-webkit-any-link":{color:e.Primary}})),"label:StyledUserLinkContent;"),ke=(0,W.Z)(xe,{target:"exi6j8f0"})((({theme:e})=>(0,H.GI)({theme:e,typography:"P3"})),"label:StyledPCommentTextForSwiper;"),we=(0,r.memo)((e=>{const{isInVideoFeedRedesign:t}=(0,s.y7)(),i=t?ke:xe;return(0,o.jsx)(i,Object.assign({},e),void 0)}));var Se;!function(e){e[e.PlainText=0]="PlainText",e[e.User=1]="User"}(Se||(Se={}));const Ce=(0,r.memo)((function({commentItem:e,e2eTag:t,onLinkClick:i}){const{text:n,text_extra:a}=e,s=((0,l.Q)(),(0,r.useMemo)((()=>function(e,t){if(!t||0===t.length)return[{type:0,text:e}];const i=[];let o=0;return t.forEach((({start:t,end:n,sec_uid:r,user_id:a})=>{o!==t&&i.push({type:0,text:e.substring(o,t)}),i.push({type:1,text:e.substring(t,n),uid:a,secUid:r}),o=n})),i.push({type:0,text:e.substring(o,e.length)}),i}(n,a)),[n,a]));return(0,o.jsxs)(we,Object.assign({"data-e2e":t},{children:["",s.map((({text:e,type:t,uid:n,secUid:r},a)=>0===t?(0,o.jsx)("span",{children:e},a):1===t?(0,o.jsx)(je,Object.assign({uniqueId:null!=r?r:"",secUid:r,isInBrowserMode:!0,onLinkClick:i,teaParams:{to_user_id:null!=n?n:"",enter_method:"comment"}},{children:e}),a):null))]}),void 0)}));var Pe;!function(e){e[e.Level1=1]="Level1",e[e.Level2=2]="Level2"}(Pe||(Pe={}));const Te={1:40,2:24};var Ie;!function(e){e[e.Creator=1]="Creator",e[e.Following=2]="Following",e[e.Friends=8]="Friends"}(Ie||(Ie={}));const De={1:"creator",2:"following_acc",8:"friends_acc"},Oe={1:"comment-creator",2:"comment-following",8:"comment-friends"},Re=(0,r.memo)((function({parentCid:e,item:t,level:i,disableReply:l,index:c,subIndex:M,teaParams:B,onLinkClick:L,inDetailPage:Z=!1}){var E;const{t:F,timeTranslator:z}=(0,f.e)(),A=(0,n.mp)(p.r,{selector:e=>e[t.cid],dependencies:[t.cid]}),U=(0,n.mp)(D.z,{selector:e=>{var t;return e.users[null!==(t=null==A?void 0:A.user)&&void 0!==t?t:""]},dependencies:[null==A?void 0:A.user]}),{loginUserId:V,loginUserUid:W}=(0,n.mp)(T.G,{selector:e=>{var t,i,o,n;return{loginUserId:null===(i=null===(t=e.appContext)||void 0===t?void 0:t.user)||void 0===i?void 0:i.uniqueId,loginUserUid:null===(n=null===(o=e.appContext)||void 0===o?void 0:o.user)||void 0===n?void 0:n.uid}},dependencies:[]}),{videoAuthorId:H,teaAuthorId:q,videoAuthorSecId:N}=(0,n.mp)(O.A,{selector:e=>{var t,i,o,n,r,a,l;return{videoAuthorId:null===(i=e[null!==(t=null==A?void 0:A.aweme_id)&&void 0!==t?t:""])||void 0===i?void 0:i.author,teaAuthorId:null!==(r=null===(n=e[null!==(o=null==A?void 0:A.aweme_id)&&void 0!==o?o:""])||void 0===n?void 0:n.authorId)&&void 0!==r?r:"",videoAuthorSecId:null===(l=e[null!==(a=null==A?void 0:A.aweme_id)&&void 0!==a?a:""])||void 0===l?void 0:l.authorSecId}},dependencies:[]}),G=(0,n.qj)(d.x),{setReply:$}=(0,n.qj)(R.p),{showing:Q,handleCardEnter:J,handleCardLeave:K,handleItemEnter:X,handleItemLeave:ee}=(0,P.V)(),te=(0,r.useMemo)((()=>Z&&1===i?48:Te[i]),[i,Z]),ie=(0,r.useCallback)((()=>{if(!A)return;const{aweme_id:e,cid:t}=A;G.handleCommentLike({itemId:e,cid:t,teaAuthorId:q})}),[G,A,q]),oe=(0,S.X)({action:ie,modalConfig:{query:{enter_method:"click_like_comment"}}}),{region:ne=""}=null!==(E=(0,I.Lh)((()=>["region"]),[]))&&void 0!==E?E:{},re=(0,r.useCallback)((()=>{if(!A)return;const{aweme_id:t,cid:i}=A;G.handleCommentDelete({itemId:t,cid:i,parentCid:e,index:c,subIndex:M})}),[G,A,c,M,e]),le=(0,r.useCallback)((()=>{const{nickname:e=""}=null!=U?U:{},{cid:t="",reply_id:o=""}=null!=A?A:{};$({nickname:e,replyId:1===i?t:o,replyToReplyId:1===i?"0":t,position:c})}),[U,A,$,i,c]),se=(0,S.X)({action:le,modalConfig:{query:{enter_method:"click_reply_comment"}}}),de=(0,r.useCallback)((e=>{const t=h.SV.includes(ne);if(!W||!t||!A)return;const{cid:i,aweme_id:o,text:n}=A;e.stopPropagation();const r=(0,x.fH)({uniqueId:null!=H?H:"",secUid:null!=N?N:"",videoId:o}),a=(0,y.n)(i);if(!a)return;const l=`${window.location.host}${r}?cid=${a}`,s=document.createElement("input");s.style.fontSize="16px",document.body.appendChild(s),s.value=l,s.select(),s.setSelectionRange(0,l.length),document.execCommand&&document.execCommand("copy"),s.remove(),m.h.open({content:F("WebApp_comment_copyurl_id"),duration:1,style:{width:"560px"},getContainer:_.Z}),v.y.handleCopyCommentUrl({copy:i,comment:n,group_id:o,user_id:W})}),[ne,W,H,N,A,F]),ce=(0,r.useMemo)((()=>{var e;return Object.assign(Object.assign({},B),{to_user_id:null!==(e=null==U?void 0:U.id)&&void 0!==e?e:"",enter_method:"comment"})}),[null==U?void 0:U.id,B]),{state:ue}=(0,a.TH)(),{id:xe}=(0,j.m7)(k.To.getItem("highlight_comment")),fe=(0,w.HX)(),je=(null==ue?void 0:ue.cid)===t.cid||xe===t.cid&&fe,{isUIOptimization:ke}=(0,s.iA)();if(!A||!U)return(0,u.G)(["commentItem","user"]);const{avatarThumb:we,nickname:Se,verified:Pe,uniqueId:Ie,secUid:Re}=U,{label_type:Me,create_time:Be,aweme_id:Le,cid:Ze,digg_count:Ee,user_digged:Fe}=A,ze=z(1e3*Number(Be)),Ae=Boolean(V)&&H===V,Ue=Boolean(V)&&Ie===V,Ve=!Ue,We=Ae||Ue;return(0,o.jsxs)(pe,Object.assign({isUIOptimization:ke&&Z,id:t.cid,highlighted:je},{children:[(0,o.jsx)(be,Object.assign({style:{flex:`0 0 ${te}px`},uniqueId:Ie,secUid:Re,isInDetailPage:Z,onMouseEnter:X,onMouseLeave:ee,isInBrowserMode:!0,teaParams:ce,"data-e2e":`comment-avatar-${i}`,onLinkClick:L},{children:(0,o.jsx)(b.q,{size:te,src:we},void 0)}),void 0),(0,o.jsxs)(he,{children:[(0,o.jsxs)(me,Object.assign({uniqueId:Ie,secUid:Re,onMouseEnter:X,onMouseLeave:ee,isInBrowserMode:!0,teaParams:ce,onLinkClick:L},{children:[(0,o.jsxs)(ge,Object.assign({"data-e2e":`comment-username-${i}`},{children:[Se," ",Pe&&(0,o.jsx)(g.Q,{"data-e2e":`comment-bluev-${i}`},void 0)]}),void 0),Me&&Boolean(De[Me])&&(0,o.jsxs)(o.Fragment,{children:["·"," ",(0,o.jsx)(ve,Object.assign({isCreator:1===Me,"data-e2e":`${Oe[Me]}-${i}`},{children:F(De[Me])}),void 0)]},void 0)]}),void 0),(0,o.jsx)(Ce,{onLinkClick:L,commentItem:A,e2eTag:`comment-level-${i}`},void 0),(0,o.jsxs)(ye,Object.assign({isUIOptimization:ke&&Z},{children:[(0,o.jsx)("span",Object.assign({"data-e2e":`comment-time-${i}`,onClick:de},{children:ze}),void 0),Z?(0,o.jsx)(Y,{isUIOptimization:ke,count:Ee,liked:Boolean(Fe),onClick:oe},void 0):null,!l&&(0,o.jsx)(_e,Object.assign({isUIOptimization:ke&&Z,inDetailPage:Z,onClick:se,"data-e2e":`comment-reply-${i}`},{children:F("comment_reply_btn")}),void 0)]}),void 0)]},void 0),(0,o.jsx)(ae,{itemId:Le,cid:Ze,inDetailPage:Z,count:Ee,liked:Boolean(Fe),onLike:oe,onDelete:re,isShowDelete:We,isShowReport:Ve},void 0),Q&&(0,o.jsx)(C.C,{uniqueId:Ie,onMouseEnter:J,onMouseLeave:K},void 0)]}),void 0)}));var Me=i(67949);const Be=(0,W.Z)("div",{target:"eo72wou0"})({marginBottom:"16px"},"label:DivCommentItemContainer;"),Le=(0,W.Z)("div",{target:"eo72wou1"})((({theme:{direction:e}})=>(0,H.YJ)({direction:e,paddingStart:52})),"label:DivReplyContainer;"),Ze=(0,W.Z)("div",{target:"eo72wou2"})({display:"flex",flexDirection:"row",justifyContent:"space-between",position:"relative"},(({isUnfold:e,hasMore:t,theme:{direction:i,colors:o}})=>e?[t?(0,H.YJ)({direction:i,paddingStart:"52px"}):null,{"::before":Object.assign({content:'""',position:"absolute",top:"50%",width:"36px",height:"1px",background:o.LineSecondary,transform:"scaleY(0.5)"},(0,H.YJ)({direction:i,start:"0"}))}]:null),"label:DivReplyActionContainer;"),Ee=(0,W.Z)(Me.Z,{target:"eo72wou3"})((({reversed:e,theme:{direction:t}})=>[(0,H.YJ)({direction:t,marginStart:"6px"}),{width:"14px",height:"14px",verticalAlign:"middle",transform:e?"rotate(180deg)":"none"}]),"label:StyledChevronDownFill;"),Fe=(0,W.Z)("p",{target:"eo72wou4"})((({theme:e})=>(0,H.GI)({theme:e,color:"TextTertiary",typography:"P3",fontWeight:"semiBold"})),{cursor:"pointer",":hover":{textDecoration:"underline"}},"label:PReplyActionText;"),ze=(0,r.memo)((function({item:e,disableReply:t,index:i,onHideReply:a,teaParams:s,onLinkClick:h,inDetailPage:v=!1}){var g,m;const b=(0,l.Q)(),x=(0,n.qj)(d.x),y=(0,n.mp)(p.r,{selector:t=>t[e.cid],dependencies:[e.cid]}),f=(0,r.useCallback)((()=>{y&&x.handleShowMoreReply({itemId:y.aweme_id,cid:y.cid})}),[x,y]),_=(0,r.useRef)(null),j=(0,r.useCallback)((()=>{var e,t;y&&(null==a||a(null!==(t=null===(e=_.current)||void 0===e?void 0:e.scrollHeight)&&void 0!==t?t:0),x.handleCollapseReply({itemId:y.aweme_id,cid:y.cid}))}),[x,y,a]),k=(0,r.useMemo)((()=>{var t,i,n,r,a,l;if(!y)return null;if(null===(t=e.replyCache)||void 0===t?void 0:t.loading)return(0,o.jsx)(Ze,{children:(0,o.jsx)(c.g,{center:!0,size:"small"},void 0)},void 0);const s=null!==(n=null===(i=e.reply_comment)||void 0===i?void 0:i.length)&&void 0!==n?n:0,d=Number(null!==(r=y.reply_comment_total)&&void 0!==r?r:0)-s;if(!d)return null;if(!e.replyCache||!(null===(a=e.reply_comment)||void 0===a?void 0:a.length))return(0,o.jsx)(Ze,{children:(0,o.jsxs)(Fe,Object.assign({onClick:f,"data-e2e":"view-more-1"},{children:[b("view_more_replies",{num:d}),(0,o.jsx)(Ee,{},void 0)]}),void 0)},void 0);const u=e.replyCache.hasMore||e.replyCache.comments.length>e.reply_comment.length;return Number(null===(l=e.reply_comment)||void 0===l?void 0:l.length)>0?(0,o.jsxs)(Ze,Object.assign({isUnfold:!0,hasMore:u},{children:[(0,o.jsx)(Fe,Object.assign({onClick:f,"data-e2e":"view-more-2"},{children:Boolean(u)&&(0,o.jsxs)(o.Fragment,{children:[b("view_more_comm"),(0,o.jsx)(Ee,{},void 0)]},void 0)}),void 0),(0,o.jsxs)(Fe,Object.assign({onClick:j,"data-e2e":"comment-hide"},{children:[b("hide"),(0,o.jsx)(Ee,{reversed:!0},void 0)]}),void 0)]}),void 0):null}),[j,f,y,e.replyCache,null===(g=e.reply_comment)||void 0===g?void 0:g.length,b]);return y?(0,o.jsxs)(Be,{children:[(0,o.jsx)(Re,{inDetailPage:v,item:e,disableReply:t,index:i,level:1,teaParams:s,onLinkClick:h},void 0),Boolean(y.reply_comment_total)&&(0,o.jsxs)(Le,Object.assign({ref:_},{children:[null===(m=e.reply_comment)||void 0===m?void 0:m.map(((n,r)=>(0,o.jsx)(Re,{parentCid:e.cid,item:n,disableReply:t,index:i,subIndex:r,level:2,teaParams:s,onLinkClick:h,inDetailPage:v},n.cid))),k]}),void 0)]},void 0):(0,u.G)(["item"])})),Ae=(0,le.F4)({"0%":{backgroundPositionX:"200%"},"100%":{backgroundPositionX:"-150%"}}),Ue=(0,W.Z)("div",{target:"eht1nyc0"})({width:"100%",marginTop:"16px",display:"flex",flexDirection:"column"},"label:DivCommentItemSkeletonContainer;"),Ve=(0,W.Z)("div",{target:"eht1nyc1"})({width:"100%",marginBottom:"24px",display:"flex",alignItems:"flex-start"},"label:DivCommentItemSkeleton;"),We=(0,W.Z)("div",{target:"eht1nyc2"})((({theme:e})=>({width:"40px",height:"40px",borderRadius:"100px",backgroundColor:e.colors.BGPlaceholderDefault,flexShrink:0,backgroundImage:"linear-gradient(90deg, rgba(22, 24, 35, 0) 0%, rgba(22, 24, 35, .04) 50%, rgba(22, 24, 35, 0) 100%)",backgroundSize:"200% 100%",backgroundRepeat:"no-repeat",animation:`${Ae} cubic-bezier(0, 0, 1, 1) 1.5s infinite`})),"label:DivCommentItemSkeletonAvatar;"),He=(0,W.Z)("div",{target:"eht1nyc3"})({width:"100%",display:"flex",flexDirection:"column"},(({theme:{direction:e}})=>(0,H.YJ)({direction:e,marginStart:"20px"})),"label:DivCommentItemSkeletonInfo;"),qe=(0,W.Z)("div",{target:"eht1nyc4"})((({width:e="100%",height:t="24px",marginTop:i="0px",theme:o})=>({width:e,height:t,marginTop:i,backgroundColor:o.colors.BGPlaceholderDefault,backgroundImage:"linear-gradient(90deg, rgba(22, 24, 35, 0) 0%, rgba(22, 24, 35, .04) 50%, rgba(22, 24, 35, 0) 100%)",backgroundSize:"200% 100%",backgroundRepeat:"no-repeat",animation:`${Ae} cubic-bezier(0, 0, 1, 1) 1.5s infinite`})),"label:DivCommentItemSkeletonLine;"),Ne=(0,r.memo)((function({num:e=3}){const t=[];for(let i=0;i<e;i++)t.push(i);return(0,o.jsx)(Ue,{children:t.map((e=>(0,o.jsxs)(Ve,{children:[(0,o.jsx)(We,{},void 0),(0,o.jsxs)(He,{children:[(0,o.jsx)(qe,{width:"160px"},void 0),(0,o.jsx)(qe,{height:"20px",marginTop:"4px"},void 0),(0,o.jsx)(qe,{height:"12px",marginTop:"8px",width:"96px"},void 0)]},void 0)]},e)))},void 0)})),Ge=e=>{const[t,i]=(0,n.b7)(d.x,{selector:t=>{var i;return null!==(i=t[e])&&void 0!==i?i:{awemeId:void 0,cursor:"0",comments:[],hasMore:!0,loading:!1}},dependencies:[e]}),{comments:o,hasMore:a,loading:l}=t;(0,r.useEffect)((()=>{e&&0===o.length&&a&&!l&&i.fetchComment({aweme_id:e,cursor:0})}),[i,o.length,a,e,l])},$e=(0,W.Z)("div",{target:"ekjxngi0"})((({theme:e,empty:t=!1,inDetailPage:i=!1})=>({paddingTop:t?"":"16px",width:"100%",padding:i?"none":t?"0 32px":"24px 32px",boxSizing:"border-box",backgroundColor:i?"":e.colors.BGCreation3,borderTop:i||t?"none":`1px solid ${e.colors.LinePrimary2}`,borderBottom:i?"none":`1px solid ${e.colors.LinePrimary2}`,overflowY:"auto",overflowX:"hidden",flexGrow:1,position:"relative",paddingBottom:i?"30px":""})),"label:DivCommentListContainer;"),Ye=(0,W.Z)("div",{target:"ekjxngi2"})((({theme:e,marginTop:t})=>[(0,H.GI)({theme:e,typography:"P3",fontWeight:"normal",color:"TextTertiary"}),{marginTop:t?"40px":0,width:"100%",padding:"0 16px",boxSizing:"border-box",display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",top:"50%",transform:"translateY(-50%)"}]),"label:DivEmpty;"),Qe=(0,W.Z)($e,{target:"e1u1vkmc0"})((({theme:{colors:e}})=>({borderTop:"none",padding:"16px",margin:0,background:e.BGCreation3,border:"none"})),"label:StyledDivCommentListContainerForSwiper;"),Je=(0,r.memo)((0,r.forwardRef)(((e,t)=>{const{isInVideoFeedRedesign:i}=(0,s.y7)(),n=i?Qe:$e;return(0,o.jsx)(n,Object.assign({},e,{ref:t}),void 0)}))),Ke=(0,r.memo)((0,r.forwardRef)((function({itemId:e,disableReply:t,teaParams:i,onLinkClick:c,inDetailPage:u=!1,hasMore:p=!0,prefetchId1:h="",prefetchId2:v=""},g){var m,b;const x=(0,n.mp)(d.x,{selector:t=>{var i;return null!==(i=t[e])&&void 0!==i?i:{awemeId:void 0,cursor:"0",comments:[],hasMore:!0,loading:!0}},dependencies:[e]}),y=(0,a.TH)(),f=(0,l.Q)(),{isVideoDetailUIOptimization:_}=(0,s.iA)();(e=>{const[{hasMore:t,loading:i,comments:o},a]=(0,n.b7)(d.x,{selector:t=>{var i;return null!==(i=t[e])&&void 0!==i?i:{awemeId:void 0,cursor:"0",comments:[],hasMore:!0,loading:!1}},dependencies:[e]});(0,r.useEffect)((()=>{e&&0===o.length&&t&&!i&&a.fetchComment({aweme_id:e,cursor:0})}),[o.length,a,t,e,i])})(e),Ge(h),Ge(v);const j=(0,r.useMemo)((()=>{var e;if(!x||!(null===(e=x.comments)||void 0===e?void 0:e.length)&&x.loading&&p)return(0,o.jsx)(Ne,{num:9},void 0);const n=[];return x.comments.forEach(((e,r)=>{var a;const l=(0,o.jsx)(ze,{item:e,disableReply:t,index:r,teaParams:i,onLinkClick:c,inDetailPage:u},e.cid);(null===(a=y.state)||void 0===a?void 0:a.cid)===e.cid?n.unshift(l):n.push(l)})),n.length?(0,o.jsxs)(o.Fragment,{children:[n,x.loading&&(0,o.jsx)(Ne,{num:1},void 0)]},void 0):(0,o.jsx)(Ye,Object.assign({marginTop:u},{children:f("comment_panel_zero")}),void 0)}),[x,p,t,i,c,u,null===(m=y.state)||void 0===m?void 0:m.cid,f]),k=(0,r.useMemo)((()=>_?{paddingTop:"16px"}:{}),[_]);return(0,o.jsx)(Je,Object.assign({style:k,inDetailPage:u,ref:g,empty:0===(null===(b=null==x?void 0:x.comments)||void 0===b?void 0:b.length)},{children:j}),void 0)})))},74891:(e,t,i)=>{i.d(t,{EN:()=>a,OH:()=>l,Gg:()=>s,hh:()=>d,TK:()=>c,Is:()=>u,Vk:()=>p,i3:()=>h});var o=i(32913),n=i(36488),r=i(67301);const a=(0,o.Z)("div",{target:"e1mecfx00"})({flex:"0 0 544px",width:"544px",display:"flex",flexDirection:"column",padding:"32px 0 0"},"label:DivContentContainer;"),l=(0,o.Z)("div",{target:"e1mecfx01"})({padding:"0 32px",overflow:"visible",display:"flex",flexDirection:"column",flexShrink:0},"label:DivMainContent;"),s=(0,o.Z)(r.W,{target:"e1mecfx02"})((({theme:{colors:e}})=>({marginTop:"9px",marginBottom:"17px",background:"transparent",color:e.TextSecondary})),"label:StyledScheduleTime;"),d=(0,o.Z)("div",{target:"e1mecfx03"})((({theme:{colors:e}})=>({width:"100%",padding:"0 32px",boxSizing:"border-box",backgroundColor:e.BGCreation3,borderTop:"none",borderBottom:"1px solid rgba(18, 18, 18, 0.12)",overflowX:"hidden",flexGrow:1})),"label:DivCommentContainerPolyfill;"),c=(0,o.Z)("div",{target:"e1mecfx04"})((({theme:{colors:e}})=>({flex:"0 0 auto",backgroundColor:e.BGPrimary,margin:"0 30px",padding:"21px 0"})),"label:DivBottomCommentContainer;"),u=(0,o.Z)("div",{target:"e1mecfx05"})((({theme:e})=>[(0,n.GI)({theme:e,typography:"P2",color:"TextSecondary"}),{flex:"1 1 0px",display:"flex",alignItems:"center",justifyContent:"center"}]),"label:DivErrorMessage;"),p=(0,o.Z)("div",{target:"e1mecfx06"})((({theme:e,isUIOptimization:t})=>[(0,n.GI)({theme:e,fontWeight:"semiBold",color:t?"TextQuaternary":"Primary"}),{height:"100%",background:t?e.colors.BGInput:e.colors.BGPlaceholderOpaque,borderRadius:t?"8px":"2px",padding:"14px 16px",fontSize:"16px",cursor:"pointer",textAlign:t?"center":"unset"}]),"label:DivLoginBar;"),h=(0,o.Z)("h1",{target:"e1mecfx07"})({marginBottom:"8px",fontWeight:"700",fontSize:"20px",lineHeight:"24px"},"label:H1PhotoTitle;")},4668:(e,t,i)=>{i.d(t,{J:()=>pe});var o=i(64047),n=i(11040),r=i(74820),a=i(9236),l=i(16926),s=i(91051),d=i(33761),c=i(19380),u=i(66833),p=i(90012),h=i(68457),v=i(32273),g=i(78772),m=i(32370),b=i(85640),x=i(63175),y=i(26641),f=i(66599),_=i(38310),j=i(55198),k=i(78658),w=i(32913),S=i(29993),C=i(88146),P=i(78094),T=i(11377),I=i(36488),D=i(99116),O=i(41928);const R=(0,w.Z)("div",{target:"e140z3d00"})({position:"relative",width:400},"label:DivSendMessagePanelContainer;"),M=(0,w.Z)("div",{target:"e140z3d01"})((({theme:{direction:e}})=>[{position:"absolute",top:36,cursor:"pointer"},(0,I.YJ)({direction:e,end:32})]),"label:DivCloseButtonWrapper;"),B=(0,w.Z)("h2",{target:"e140z3d02"})((({theme:e,theme:{direction:t}})=>[(0,I.GI)({theme:e,fontFamily:"Proxima",typography:"P0",fontWeight:"bold"}),{padding:"32px 0 0"},(0,I.YJ)({direction:t,paddingStart:32,paddingEnd:62})]),"label:H2ModalTitle;"),L=(0,w.Z)("div",{target:"e140z3d03"})((({theme:e})=>({display:"flex",alignItems:"center",width:336,height:36,margin:"24px 32px 0",borderRadius:"4px",backgroundColor:e.colors.BGPlaceholderDefault})),"label:DivSearchContainer;"),Z=(0,w.Z)(S.Z,{target:"e140z3d04"})((({theme:{direction:e}})=>[(0,I.YJ)({direction:e,marginStart:16,marginEnd:12})]),"label:StyledMagnifyingGlass;"),E=(0,w.Z)("input",{target:"e140z3d05"})((({theme:e,theme:{colors:t}})=>[(0,I.GI)({theme:e,fontFamily:"Proxima",typography:"P2"}),{width:240,height:22,border:"none",outline:"none",background:"transparent",color:t.TextPrimary,caretColor:t.Primary,"::placeholder":{color:t.TextTertiary}}]),"label:InputUser;"),F=(0,w.Z)("div",{target:"e140z3d06"})((({theme:{direction:e}})=>[{width:16,height:16,cursor:"pointer"},(0,I.YJ)({direction:e,marginStart:8})]),"label:DivClearButton;"),z=(0,w.Z)("div",{target:"e140z3d07"})({minHeight:200,marginTop:24},"label:DivUserListContainer;"),A=(0,w.Z)("p",{target:"e140z3d08"})((({theme:e})=>[(0,I.GI)({theme:e,fontFamily:"Proxima",typography:"P1",color:"TextQuaternary"}),{marginTop:74,textAlign:"center"}]),"label:PNoResult;"),U=(0,w.Z)(D.g,{target:"e140z3d09"})({width:36,height:36,margin:"6px auto 12px"},"label:StyledLoading;"),V=(0,w.Z)("p",{target:"e140z3d010"})((({theme:e,theme:{direction:t}})=>[(0,I.GI)({theme:e,fontFamily:"Proxima",typography:"P4",color:"TextTertiary"}),{marginBottom:4,fontSize:"13px"},(0,I.YJ)({direction:t,marginStart:32})]),"label:PUserTitle;"),W=(0,w.Z)("div",{target:"e140z3d011"})((({long:e,isSearching:t})=>({position:"relative",boxSizing:"border-box",overflowY:"auto",width:"100%",minHeight:t?e?578:472:200,maxHeight:e?578:472,paddingBottom:e?210:102,"::-webkit-scrollbar":{display:"none"}})),"label:DivUserListInnerContainer;"),H=(0,w.Z)("div",{target:"e140z3d012"})((({theme:e})=>({boxSizing:"border-box",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",padding:"8px 32px",cursor:"pointer",":hover":{backgroundColor:e.colors.BGView}})),"label:DivUserItemContainer;"),q=(0,w.Z)("div",{target:"e140z3d013"})({display:"flex",flex:1,alignItems:"center",height:48},"label:DivUserItem;"),N=(0,w.Z)("div",{target:"e140z3d014"})((({theme:{direction:e}})=>(0,I.YJ)({direction:e,marginStart:12})),"label:DivRightPart;"),G=(0,w.Z)("div",{target:"e140z3d015"})([{display:"flex",alignItems:"center"}],"label:DivNicknameContainer;"),$=(0,w.Z)("span",{target:"e140z3d016"})((({theme:e})=>[(0,I.GI)({theme:e,fontFamily:"Proxima",typography:"P1",fontWeight:"bold"}),{maxWidth:220},I.wj]),"label:SpanNickname;"),Y=(0,w.Z)(C.Z,{target:"e140z3d017"})((({theme:{direction:e}})=>[{flexShrink:0},(0,I.YJ)({direction:e,marginStart:4})]),"label:StyledVerifiedBadgeColor;"),Q=(0,w.Z)("p",{target:"e140z3d018"})((({theme:e})=>[(0,I.GI)({theme:e,fontFamily:"Proxima",typography:"P3",color:"TextTertiary"}),{maxWidth:240,marginTop:2},I.wj]),"label:PUniqueId;"),J=(0,w.Z)("div",{target:"e140z3d019"})((({theme:{direction:e}})=>[{flexShrink:0,width:22,height:22},(0,I.YJ)({direction:e,marginStart:12})]),"label:DivCheckboxContainer;"),K=(0,w.Z)("div",{target:"e140z3d020"})((({theme:{colors:e}})=>({position:"absolute",bottom:0,left:0,right:0,padding:"12px 32px 32px 32px",backgroundColor:e.BGPrimary,borderRadius:"0 0 8px 8px",":before":{position:"absolute",top:0,left:0,right:0,content:'""',transform:"scaleY(.5)",width:"100%",height:1,backgroundColor:e.LineReverse2}})),"label:DivSendContainer;"),X=(0,w.Z)(O.W,{target:"e140z3d021"})({width:336,height:46,marginTop:12},"label:StyledSendButton;"),ee=(0,w.Z)("div",{target:"e140z3d022"})({display:"flex",marginTop:12},"label:DivMessageContainer;"),te=(0,w.Z)("textarea",{target:"e140z3d023"})((({theme:e,theme:{direction:t,colors:i}})=>[(0,I.GI)({theme:e,fontFamily:"Proxima",typography:"P2"}),{display:"block",width:268,height:98,border:"none",resize:"none",outline:"none",wordBreak:"break-word",overflowWrap:"break-word",backgroundColor:i.BGPrimary,color:i.TextPrimary,caretColor:i.Primary,"::placeholder":{color:i.TextTertiary}},(0,I.YJ)({direction:t,marginEnd:12})]),"label:Textarea;"),ie=(0,w.Z)("img",{target:"e140z3d024"})({width:56,height:74},"label:ImgCover;"),oe=(0,w.Z)("div",{target:"e140z3d025"})((({theme:e,theme:{direction:t}})=>[{display:"flex",alignItems:"center",width:336,padding:"12px 0 12px",margin:"16px 32px 0",borderRadius:"4px",backgroundColor:e.colors.BGView},(0,I.YJ)({direction:t,paddingStart:16,paddingEnd:4})]),"label:DivTipContainer;"),ne=(0,w.Z)(P.Z,{target:"e140z3d026"})({width:24,height:24,flexShrink:0},"label:StyledPersonArrowLeftRight;"),re=(0,w.Z)(T.Z,{target:"e140z3d027"})({width:24,height:24,flexShrink:0},"label:StyledTwoPerson;"),ae=(0,w.Z)("p",{target:"e140z3d028"})((({theme:e,theme:{direction:t}})=>[(0,I.GI)({theme:e,fontFamily:"Proxima",typography:"P4",color:"TextSecondary"}),{fontSize:"13px"},(0,I.YJ)({direction:t,marginStart:12})]),"label:PTip;");var le=i(75311),se=i(84095),de=i(33642);const ce=(0,s.forwardRef)((function({uniqueId:e,isSelected:t=!1,searchValue:i="",selectedCount:o,onUserSelected:r},l){const d=(0,a.mp)(f.z,{selector:t=>t.users[e],dependencies:[e]}),c=(0,s.useRef)(null);(0,s.useImperativeHandle)(l,(()=>({get offsetTop(){var e,t;return null!==(t=null===(e=c.current)||void 0===e?void 0:e.offsetTop)&&void 0!==t?t:0}})),[]);const u=(0,s.useCallback)((()=>{o>=15&&!t||r(d,!t)}),[t,d,o,r]),{avatarThumb:p,nickname:h="",verified:v}=(0,de.m7)(d),g=h.toLocaleLowerCase().indexOf(i.toLocaleLowerCase()),m=-1===g?0:i.length;if(!e||!d)return null;const b=h.slice(0,g),x=h.slice(g,g+m),y=h.slice(g+m);return(0,n.jsxs)(H,Object.assign({ref:c,onClick:u},{children:[(0,n.jsxs)(q,{children:[(0,n.jsx)(le.q,{size:48,src:p},void 0),(0,n.jsxs)(N,{children:[(0,n.jsxs)(G,{children:[(0,n.jsx)($,{children:(0,n.jsxs)("span",{children:[b,(0,n.jsx)("span",Object.assign({style:{color:"#fe2c55"}},{children:x}),void 0),y]},void 0)},void 0),v&&(0,n.jsx)(Y,{width:14,height:14,style:{verticalAlign:"middle",marginLeft:4}},void 0)]},void 0),(0,n.jsx)(Q,{children:e},void 0)]},void 0)]},void 0),(0,n.jsx)(J,{children:(0,n.jsx)(se.X,{size:22,isCircle:!1,value:t},void 0)},void 0)]}),void 0)}));var ue;!function(e){e.RECENT="recent",e.FOLLOWING="following"}(ue||(ue={}));const pe=(0,s.memo)((function({visible:e,videoId:t,onClose:i}){const w=(0,v.Q)(),S=(0,a.mp)(y.G,{dependencies:[],selector:e=>{var t;return null===(t=e.appContext)||void 0===t?void 0:t.user}}),C=(0,a.mp)(_.A,{selector:e=>e[t],dependencies:[t]}),{video:P,forFriend:T,author:I="",authorId:D=""}=(0,s.useMemo)((()=>null!=C?C:{}),[C]),[O,H]=(0,a.b7)(f.z,{selector:e=>e.users[I],dependencies:[t]}),{privateAccount:q,nickname:N}=(0,s.useMemo)((()=>null!=O?O:{}),[O]),[{recentUserList:G,recentUserNameList:$,recentUidList:Y,followingUser:Q,isFollowingLoading:J,isSendMessageLoading:le},se]=(0,a.b7)(k.O),de=(0,l.fz)(u.p),ue=(0,s.useRef)({recent:!1,following:!1}),pe=(0,s.useRef)({recent:{list:[],hasShown:[]},following:{list:[],hasShown:[]}}),he=(0,s.useCallback)(((e,t)=>i=>{pe.current[t].list[e]=i}),[]),{isRTL:ve}=(0,x.Y)(),{colors:ge}=(0,r.u)(),[me,be]=(0,s.useState)(""),[xe,ye]=(0,s.useState)(""),[fe,_e]=(0,s.useState)([]),[je,ke]=(0,s.useState)([]),[we,Se]=(0,s.useState)([]),Ce=fe.length,Pe=G.length,{list:Te,nicknameList:Ie,uidList:De,hasMore:Oe}=Q,Re=Te.length,Me=Ce>0,Be=""!==me,Le=q||T;(0,s.useEffect)((()=>{e||(be(""),ye(""),_e([]),se.setSendMessageStatus({isFailed:!1,isLoading:!1}))}),[e,se]),(0,s.useEffect)((()=>{if(!Re&&Oe){if(S){const{uid:e,avatarUri:t,nickName:i}=S,n=(0,o.__rest)(S,["uid","avatarUri","nickName"]),r=Object.assign({id:e,nickname:i,verified:!1,relation:0,avatarThumb:t[0],avatarMedium:t[0],avatarLarger:t[0]},n);H.setUser(r),se.updateFollowingUserList({list:[S.uniqueId],nicknameList:[i],uidList:[e],hasMore:!0,maxCursor:0,minCursor:0})}se.getFollowingUserListWithCanShare({count:90})}}),[]),(0,s.useEffect)((()=>{Promise.resolve().then((()=>{const e=pe.current.recent,t=pe.current.following;if(Pe&&!ue.current.recent&&(ue.current.recent=!0,G.slice(0,5).forEach(((t,i)=>{var o,n;(null!==(n=null===(o=e.list[i])||void 0===o?void 0:o.offsetTop)&&void 0!==n?n:1/0)<354&&(p.R.handleShareHeadShow({user_type:"recent",rank_index:i,is_self:t===(null==S?void 0:S.uniqueId)?1:0,to_user_id:Y[i]}),e.hasShown[i]=!0)}))),Re&&!ue.current.following){if(1===Re&&Oe)return;ue.current.following=!0,Te.slice(0,5).forEach(((e,i)=>{var o,n;(null!==(n=null===(o=t.list[i])||void 0===o?void 0:o.offsetTop)&&void 0!==n?n:1/0)<354&&(p.R.handleShareHeadShow({user_type:"following",rank_index:i,is_self:e===(null==S?void 0:S.uniqueId)?1:0,to_user_id:De[i]}),t.hasShown[i]=!0)}))}})).catch((()=>{}))}),[null==S?void 0:S.uniqueId,Te,Re,G,Pe,Y,De,Oe]),(0,s.useEffect)((()=>{if(!me)return;const e=[],t=[],i=me.toLocaleLowerCase();$.forEach(((t,o)=>{(t.toLocaleLowerCase().indexOf(i)>-1||G[o].toLocaleLowerCase().indexOf(i)>-1)&&e.push(G[o])})),Ie.forEach(((o,n)=>{e.indexOf(Te[n])<0&&(o.toLocaleLowerCase().indexOf(i)>-1||Te[n].toLocaleLowerCase().indexOf(i)>-1)&&t.push(Te[n])})),ke(e),Se(t)}),[me,$,G,Te,Ie]);const Ze=(0,s.useCallback)((()=>{i()}),[i]),Ee=(0,g.K$)(C),Fe=(0,s.useCallback)(((e,t)=>{var i;if(t)e&&_e([...fe,e]),de.handleShare(Object.assign({platform:"chat_head",group_id:P.id,author_id:D,poi_id:null===(i=null==C?void 0:C.poi)||void 0===i?void 0:i.id},Ee));else{let t=-1;fe.some(((i,o)=>{if(i.uniqueId===(null==e?void 0:e.uniqueId))return t=o,!0})),t>-1&&(fe.splice(t,1),_e([...fe]))}}),[fe,de,P.id,D,C]),ze=(0,s.useCallback)((e=>{const{value:t}=e.target;be(t)}),[]),Ae=(0,s.useCallback)((()=>{p.R.handleSearchContact()}),[]),Ue=(0,s.useCallback)((()=>{be("")}),[]),Ve=(0,s.useCallback)((e=>{const{value:t}=e.target;ye(t)}),[]),We=function({selectedUserList:e,messageText:t,videoId:i}){const[{conversationMap:o},n]=(0,a.b7)(k.O),r=(0,a.mp)(y.G,{dependencies:[],selector:e=>{var t;return null===(t=e.appContext)||void 0===t?void 0:t.user}}),l=(0,a.mp)(_.A,{selector:e=>e[i],dependencies:[i]});return(0,s.useCallback)((()=>{var a;const{authorId:s="",nickname:d,authorSecId:c,avatarThumb:u,video:h}=null!=l?l:{},v=[];let g=!1;e.forEach((e=>{(null==e?void 0:e.id)===(null==r?void 0:r.uid)&&(g=!0),v.push(null==e?void 0:e.id)})),p.R.handleShareVideoToChat({platform:"chat_head",is_self:g?1:0,group_id:null!==(a=null==h?void 0:h.id)&&void 0!==a?a:"",author_id:s,is_with_text:t.trim()?1:0,chat_cnt:e.length,to_user_id:String(v)}),n.setSendMessageStatus({isLoading:!0,isFailed:!1}),e.forEach((e=>{var r;const{id:a,relation:l}=e,p=Boolean(null==o?void 0:o[a]),v=null===(r=null==o?void 0:o[a])||void 0===r?void 0:r.id;n.sendMessage({convId:v,uid:a,relation:l,type:8,content:{aweType:800,itemId:i,uid:s,secUID:c,content_thumb:{url_list:[u],uri:u},content_name:d,cover_url:{url_list:[null==h?void 0:h.cover],uri:null==h?void 0:h.cover},cover_width:null==h?void 0:h.width,cover_height:null==h?void 0:h.height},hasConversation:p}),t.trim()&&n.sendMessage({convId:v,uid:a,relation:l,type:7,content:{aweType:0,text:t},hasConversation:p})}))}),[l,e,t,n,null==r?void 0:r.uid,o,i])}({selectedUserList:fe,messageText:xe,videoId:t});!function({selectedUserList:e,messageText:t,handleSuccess:i,isRTL:o}){const n=(0,v.Q)(),[{isSendMessageFailed:r,successSentMessageCount:l},d]=(0,a.b7)(k.O),c=e.length;(0,s.useEffect)((()=>{var a,s,u,p;if(r&&(j.h.open({content:n("support_webapp_sharing_error_message"),duration:3,widthType:"half",getContainer:m.Z}),d.setSendMessageStatus({isLoading:!1,isFailed:!1,successCount:0})),0!==l&&l===c*(t.trim()?2:1)){const t=null!==(s=null===(a=e[c-1])||void 0===a?void 0:a.nickname)&&void 0!==s?s:"",r=null!==(p=null===(u=e[c-2])||void 0===u?void 0:u.nickname)&&void 0!==p?p:"";switch(c){case 1:j.h.open({content:n("support_webapp_sharing_sent_toast_1",{username:t}),type:"success",duration:3,widthType:"half",isRTL:o,getContainer:m.Z});break;case 2:j.h.open({content:n("support_webapp_sharing_sent_toast_2",{username:t,username2:r}),type:"success",duration:3,widthType:"half",isRTL:o,getContainer:m.Z});break;default:j.h.open({content:n("support_webapp_sharing_sent_toast_3",{username:t,number:c-1}),type:"success",duration:3,widthType:"half",isRTL:o,getContainer:m.Z})}d.setSendMessageStatus({isLoading:!1,successCount:0}),i()}}),[r,l,e,t,c,n,d,i,o])}({selectedUserList:fe,messageText:xe,handleSuccess:()=>{i()},isRTL:ve});const He=(0,h.fB)((e=>{if(Be)return;const t=e.target,{scrollHeight:i,scrollTop:o,clientHeight:n}=t;i-o===n&&!J&&Oe&&se.getFollowingUserListWithCanShare({count:30});const r=pe.current.recent,a=pe.current.following;r.list.forEach(((e,t)=>{var i;r.hasShown[t]||(null!==(i=null==e?void 0:e.offsetTop)&&void 0!==i?i:1/0)<o+n&&(p.R.handleShareHeadShow({user_type:"recent",rank_index:t,is_self:G[t]===(null==S?void 0:S.uniqueId)?1:0,to_user_id:Y[t]}),r.hasShown[t]=!0)})),a.list.forEach(((e,t)=>{var i;a.hasShown[t]||(null!==(i=null==e?void 0:e.offsetTop)&&void 0!==i?i:1/0)<o+n&&(p.R.handleShareHeadShow({user_type:"following",rank_index:t,is_self:Te[t]===(null==S?void 0:S.uniqueId)?1:0,to_user_id:De[t]}),a.hasShown[t]=!0)}))}),[J,Oe,se,G,null==S?void 0:S.uniqueId,Te,Be,Y,De],100),qe=(0,s.useCallback)(((e,t,i)=>{const o=fe.some((t=>t.uniqueId===e));return(0,n.jsx)(ce,{uniqueId:e,isSelected:o,searchValue:me,selectedCount:Ce,onUserSelected:Fe,ref:he(t,i)},t)}),[me,Ce,fe,he,Fe]),Ne=(0,m.Z)();return(0,n.jsx)(b.u_,Object.assign({parentRef:Ne,visible:e,maskCloseable:!1},{children:(0,n.jsxs)(R,{children:[(0,n.jsx)(M,Object.assign({onClick:Ze},{children:(0,n.jsx)(d.Z,{width:24,height:24},void 0)}),void 0),(0,n.jsx)(B,{children:w("support_webapp_sharing_option_button")},void 0),Le&&(0,n.jsxs)(oe,{children:[q?(0,n.jsx)(re,{fill:ge.TextSecondary},void 0):(0,n.jsx)(ne,{fill:ge.TextSecondary},void 0),(0,n.jsx)(ae,{children:w(q?"support_webapp_sharing_toast_2":"support_webapp_sharing_toast_1",{username:N})},void 0)]},void 0),(0,n.jsxs)(L,{children:[(0,n.jsx)(Z,{width:24,height:24,fill:Be?ge.TextPrimary:ge.TextReverse4},void 0),(0,n.jsx)(E,{value:me,placeholder:w("support_webapp_sharing_searchbar_ghosttext"),onChange:ze,onClick:Ae},void 0),Be&&(0,n.jsx)(F,Object.assign({onClick:Ue},{children:(0,n.jsx)(c.Z,{width:16,height:16,fill:ge.TextReverse4},void 0)}),void 0)]},void 0),(0,n.jsx)(z,{children:(0,n.jsx)(W,Object.assign({long:Me,isSearching:Be,onScroll:He},{children:(()=>{if(Be){const e=je.length>0||we.length>0;return(0,n.jsxs)(n.Fragment,{children:[je.map(((e,t)=>qe(e,t,"recent"))),we.map(((e,t)=>qe(e,t,"following"))),!e&&(0,n.jsx)(A,{children:w("support_webapp_sharing_search_results")},void 0)]},void 0)}return(0,n.jsxs)(n.Fragment,{children:[0!==Pe&&(0,n.jsx)(V,{children:w("support_webapp_sharing_recent")},void 0),G.map(((e,t)=>qe(e,t,"recent"))),(0,n.jsx)(V,Object.assign({style:{marginTop:Pe?12:0}},{children:w("support_webapp_sharing_following")}),void 0),Te.map(((e,t)=>qe(e,t,"following"))),J&&(0,n.jsx)(U,{},void 0)]},void 0)})()}),void 0)},void 0),(0,n.jsxs)(K,{children:[Me&&(0,n.jsxs)(ee,{children:[(0,n.jsx)(te,{value:xe,placeholder:w("support_webapp_sharing_write_a_message"),maxLength:6e3,onChange:Ve},void 0),(0,n.jsx)(ie,{src:null==P?void 0:P.cover},void 0)]},void 0),(0,n.jsxs)(X,Object.assign({buttonTheme:"primary",disabled:!Me,onClick:We,loading:le},{children:[w("support_webapp_sharing_send_button"),Ce>1?`(${Ce})`:""]}),void 0)]},void 0)]},void 0)}),void 0)}))},8996:(e,t,i)=>{i.d(t,{g:()=>x});var o,n=i(11040),r=i(9236),a=i(91051),l=i(84530),s=i(80420),d=i(65315),c=i(32273),u=i(17133);!function(e){e.GeneralSensitive="general_sensitive",e.PhotoSensitive="photo_sensitive",e.PhotoSensitiveDenied="photo_sensitive_denied"}(o||(o={}));const p={general_sensitive:"masklayer_general_title",photo_sensitive:"photosensitive_masklayer_title",photo_sensitive_denied:"photosensitive_masklayer_removed"},h={general_sensitive:["masklayer_general_body"],photo_sensitive:["photosensitive_masklayer_body1","photosensitive_masklayer_body2"],photo_sensitive_denied:["photosensitive_masklayer_removed_body1","photosensitive_masklayer_removed_body3"]},v={general_sensitive:"masklayer_general_skip",photo_sensitive:"photosensitive_masklayer_watch",photo_sensitive_denied:""},g={general_sensitive:"masklayer_general_watch",photo_sensitive:"photosensitive_masklayer_skipall",photo_sensitive_denied:""};var m;!function(e){e[e.Reported=1]="Reported",e[e.Dislike=2]="Dislike",e[e.General=3]="General",e[e.Photosensitive=4]="Photosensitive"}(m||(m={}));var b=i(38554);const x=({playMode:e,item:t,smallSizeIcon:i=!1})=>{var o;const m=(0,c.Q)(),{user:x}=null!==(o=(0,u.Lh)((()=>["user"]),[]))&&void 0!==o?o:{},{photoSensitiveVideosSetting:y,uid:f}=null!=x?x:{},{photoSensitiveVideosSetting:_}=(0,r.mp)(b.P);return(0,a.useMemo)((()=>{const{maskType:o,authorId:r}=t,a=3===o,c=4===o;if(!c&&!a)return{showVideoMask:!1};if(c&&(2===y||2===_||r===f&&0!==y))return{showVideoMask:!1};let u;u=a?"general_sensitive":1===_?"photo_sensitive_denied":"photo_sensitive";const b=m(p[u]),x=h[u].map((e=>m(e))).join(""),j=((e,t,i)=>{let o=null,r=48;switch(e){case"general_sensitive":r=0===t?36:53,r=i?24:r,o=(0,n.jsx)(l.Z,{width:r,height:r,fill:"rgba(255, 255, 255, .75)"},void 0);break;case"photo_sensitive":r=0===t?32:48,r=i?24:r,o=(0,n.jsx)(s.Z,{width:r,height:r,fill:"#fff"},void 0);break;case"photo_sensitive_denied":r=0===t?32:48,r=i?24:r,o=(0,n.jsx)(d.Z,{width:r,height:r,fill:"#0BE09B"},void 0)}return o})(u,e,i),k=m(((e,t)=>2===t||3===t||4===t||0===t&&"photo_sensitive"===e?v[e]:"")(u,e)),w=m(((e,t)=>2===t||3===t||4===t||0===t&&"general_sensitive"===e?g[e]:"")(u,e));return{showVideoMask:!0,maskType:u,videoMaskTitle:b,videoMaskDesc:x,icon:j,videoMaskFirstButtonText:k,videoMaskSecondButtonText:w}}),[t,y,_,f,m,e,i])}},17643:(e,t,i)=>{i.d(t,{ex:()=>a,by:()=>l,Tp:()=>s,gI:()=>d,DK:()=>c,X4:()=>u,lO:()=>h,Wu:()=>g,yW:()=>m,uc:()=>b,N:()=>x,Vz:()=>y,u:()=>f,vZ:()=>_});var o=i(32913),n=i(36488),r=i(41928);const a=(0,o.Z)("div",{target:"e4uoj5v0"})((({theme:e,playMode:t})=>[4===t?{borderRadius:"4px",overflow:"hidden"}:{},{position:"absolute",zIndex:3===t||4===t?0:1,width:"100%",height:"100%",left:"0",top:"0",backdropFilter:"blur(50px)",backgroundColor:e.colors.SDSecondary},2===t?{left:"-80px",right:"-80px",width:"unset"}:null]),"label:DivVideoMask;"),l=(0,o.Z)("div",{target:"e4uoj5v1"})((({playMode:e})=>[4!==e?{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",maxWidth:"515px"}:{},{width:2===e?"calc(100% - 160px)":"100%",padding:0===e?"32px":"48px",paddingTop:4===e?"100px":""},3===e?{width:"463px"}:{}]),"label:DivVideoMaskContainer;"),s=(0,o.Z)("div",{target:"e4uoj5v2"})({display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},"label:DivVideoMaskInfo;"),d=(0,o.Z)("div",{target:"e4uoj5v3"})((({theme:e,playMode:t})=>({display:"flex",justifyContent:"center",alignItems:"center",width:0===t?"72px":"106px",height:0===t?"72px":"106px",borderRadius:"50%",backgroundColor:e.colors.ConstBGContainer2,color:e.colors.Positive})),"label:DivVideoMaskIcon;"),c=(0,o.Z)("p",{target:"e4uoj5v4"})((({theme:e,theme:{colors:t},playMode:i})=>[(0,n.GI)({theme:e,fontFamily:"Proxima",fontWeight:"semiBold"}),{fontSize:0===i?"17px":"24px",lineHeight:0===i?"20px":"32px",textAlign:"center",color:t.ConstTextInverse2,marginTop:0===i?"20px":"24px"}]),"label:PVideoMaskTitle;"),u=(0,o.Z)("p",{target:"e4uoj5v5"})((({theme:e,playMode:t})=>[(0,n.GI)({theme:e,typography:0===t?"H6":"P1",fontFamily:"Proxima",fontWeight:"normal"}),{maxWidth:"400px",textAlign:"center",color:"rgba(255, 255, 255, .75)",marginTop:0===t?"12px":"16px"}]),"label:PVideoMaskDesc;"),p=(e,t)=>{switch(e){case 0:return t?"20px":"80px";case 4:return"56px";default:return"180px"}},h=(0,o.Z)("div",{target:"e4uoj5v6"})((({playMode:e,horizontal:t})=>[{marginTop:p(e,t)},4===e?{display:"flex",flexDirection:"column",alignItems:"center"}:{}]),"label:DivBtnWrapper;");function v(e){const{theme:t,second:i,playMode:o}=e;return[n.wj,4===o?{maxWidth:"400px"}:{},(0,n.GI)({theme:t,typography:"P1",fontFamily:"Proxima",fontWeight:"semiBold"}),{display:"block",minWidth:"unset",width:"100%",height:0===o?"36px":"56px",marginBottom:i?"0":"8px",background:i?t.colors.ConstBGContainer:t.colors.Primary},i?{"&:hover":{background:t.colors.ConstBGContainer2},"&:active":{background:t.colors.ConstBGContainer3}}:null,0===o?{fontSize:"14px",lineHeight:"17px"}:null]}const g=(0,o.Z)(r.W,{target:"e4uoj5v7"})((e=>v(e)),"label:StyledButtonFirst;"),m=(0,o.Z)(r.W,{target:"e4uoj5v8"})((e=>v(e)),"label:StyledButtonSecond;"),b=(0,o.Z)("div",{target:"e4uoj5v9"})({background:"rgba(0, 0, 0, 0.5)",backdropFilter:"blur(25px)",display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",left:0,top:0,right:0,bottom:0,userSelect:"none"},"label:DivMaskContainer;"),x=(0,o.Z)("div",{target:"e4uoj5v10"})((({horizontal:e})=>({width:e?"240px":"160px",display:"flex",flexDirection:"column",alignItems:"center"})),"label:DivMaskInfo;"),y=(0,o.Z)("div",{target:"e4uoj5v11"})({width:"48px",height:"48px",marginBottom:"8px",borderRadius:"48px",background:"rgba(255, 255, 255, 0.12)",display:"flex",alignItems:"center",justifyContent:"center"},"label:DivMaskIcon;"),f=(0,o.Z)("p",{target:"e4uoj5v12"})((({theme:e})=>({fontSize:"16px",lineHeight:"24px",fontWeight:"600",marginBottom:"2px",color:e.colors.ConstTextInverse2,textAlign:"center"})),"label:PMaskTitle;"),_=(0,o.Z)("p",{target:"e4uoj5v13"})((({theme:e})=>({fontSize:"14px",lineHeight:"22px",color:e.colors.ConstTextInverse3,textAlign:"center"})),"label:PMaskDesc;")},51985:(e,t,i)=>{i.d(t,{a:()=>l});var o=i(11040),n=i(91051),r=i(45949),a=i(17643);const l=(0,n.memo)((e=>{const{playMode:t,style:i,icon:l,title:s,desc:d,horizontal:c=!1,firstButtonText:u,secondButtonText:p,canClickPropagation:h=!1,children:v,onClickFirstButton:g,onClickSecondButton:m}=e,b=Boolean(u),x=Boolean(p),y=(0,n.useCallback)((e=>{!h&&(0,r.NS)(e)}),[h]);return(0,o.jsxs)(a.ex,Object.assign({playMode:t,onClick:y,style:i},{children:[(0,o.jsxs)(a.by,Object.assign({playMode:t},{children:[(0,o.jsxs)(a.Tp,{children:[Boolean(l)&&(0,o.jsx)(a.gI,Object.assign({playMode:t},{children:l}),void 0),Boolean(s)&&(0,o.jsx)(a.DK,Object.assign({playMode:t},{children:s}),void 0),Boolean(d)&&(0,o.jsx)(a.X4,Object.assign({playMode:t},{children:d}),void 0)]},void 0),(0,o.jsxs)(a.lO,Object.assign({horizontal:c,playMode:t},{children:[b&&(0,o.jsx)(a.Wu,Object.assign({type:"button",buttonTheme:"primary",playMode:t,onClick:g},{children:u}),void 0),x&&(0,o.jsx)(a.yW,Object.assign({type:"button",buttonTheme:"primary",playMode:t,second:!0,onClick:m},{children:p}),void 0)]}),void 0)]}),void 0),v]}),void 0)}))},91139:(e,t,i)=>{i.d(t,{N:()=>p});var o,n=i(64047),r=i(11040),a=i(9236),l=i(91051),s=i(4180),d=i(68852),c=i(21103);!function(e){e.NoInteract="failed because the user didn't interact with the document first.",e.SafariNoInteract="The request is not allowed by the user agent or the platform in the current context"}(o||(o={}));const u=e=>({buffered:null==e?void 0:e.buffered,currentSrc:null==e?void 0:e.currentSrc,currentTime:null==e?void 0:e.currentTime,duration:null==e?void 0:e.duration,readyState:null==e?void 0:e.readyState,error:null==e?void 0:e.error,volume:null==e?void 0:e.volume,muted:null==e?void 0:e.muted}),p=(0,l.memo)((0,l.forwardRef)((function(e,t){var{playProgress:i,horizontal:o,muteSetting:p,onUnmount:h,onEnded:v,onWaiting:g,disableDownload:m=!1,itemMute:b=!1}=e,x=(0,n.__rest)(e,["playProgress","horizontal","muteSetting","onUnmount","onEnded","onWaiting","disableDownload","itemMute"]);const y=(0,l.useRef)(null),f=(0,l.useRef)(!1),[{mute:_,volume:j},{setMute:k,setMuteSetting:w}]=(0,a.b7)(d.x,{selector:e=>({mute:e.muteSetting||e.mute,volume:e.volume}),dependencies:[]}),S=(0,a.mp)(d.x,{selector:e=>e.playing,dependencies:[]});(0,l.useImperativeHandle)(t,(()=>{const e=y.current;return{play:null==e?void 0:e.play.bind(e),pause:null==e?void 0:e.pause.bind(e),seek:t=>{if(e){const{duration:i}=e;e.currentTime=i*t}},seekTime:t=>{e&&(e.currentTime=t)},onSeeked:t=>{null==e||e.addEventListener("seeked",t)},onSeeking:t=>{null==e||e.addEventListener("seeking",t)},onTimeUpdate:t=>{null==e||e.addEventListener("timeupdate",(()=>{var i,o;const n=null!==(i=e.currentTime)&&void 0!==i?i:0,r=null!==(o=e.duration)&&void 0!==o?o:0;t(n/r,n,r)}))},onCanPlay:t=>{null==e||e.addEventListener("canplay",t)},getPlayerAttributes:()=>u(e)}}));const C=(0,l.useCallback)(((e=0)=>(0,n.__awaiter)(this,void 0,void 0,(function*(){var t,i,o;if(!(e>=3))try{yield null===(t=y.current)||void 0===t?void 0:t.play()}catch(t){const n=null!==(i=null==t?void 0:t.message)&&void 0!==i?i:"";(null!==(o=n.match("failed because the user didn't interact with the document first."))&&void 0!==o?o:n.match("The request is not allowed by the user agent or the platform in the current context"))?(k(!0),setTimeout((()=>{C(e+1)}),0)):C(e+1)}}))),[k]);(0,l.useEffect)((()=>{y.current&&(y.current.volume=j)}),[j]),(0,l.useEffect)((()=>{w(p),C(),y.current&&Math.abs(y.current.currentTime-i)>.2&&(y.current.currentTime=i)}),[p,i,w,C]),(0,l.useEffect)((()=>{var e;S?f.current&&(f.current=!1,C()):(f.current=!0,null===(e=y.current)||void 0===e||e.pause())}),[S,C]),(0,l.useEffect)((()=>{const e=y.current;return()=>{null==h||h(u(e))}}),[]);const P=(0,l.useCallback)((e=>{s.s.handleContextMenu({is_menu_show:m?0:1}),m&&e.preventDefault()}),[m]);(0,l.useEffect)((()=>{const e=y.current;return null==e||e.addEventListener("contextmenu",P),()=>{null==e||e.removeEventListener("contextmenu",P)}}),[y,P]);const T=(0,l.useCallback)((e=>{null==g||g(e)}),[g]),I=(0,l.useCallback)((e=>{null==v||v(e),C()}),[v,C]);return(0,r.jsx)(c.Ex,Object.assign({horizontal:o,ref:y},x,{muted:b||_,playsInline:!0,autoPlay:!0,onEnded:I,onWaiting:T}),void 0)})))},52939:(e,t,i)=>{i.d(t,{S:()=>pe});var o=i(11040),n=i(91051),r=i(29025),a=i(9236),l=i(16926),s=i(69405),d=i(79789),c=i(31222),u=i(40340),p=i(68852),h=i(40112),v=i(33642),g=i(8838),m=i(78772),b=i(91139),x=i(21103);const y=(0,n.memo)((0,n.forwardRef)((function({poster:e,lazyLoading:t=!0,horizontal:i,playUrl:r,id:y,teaParams:f,index:_,mode:j,itemMute:k,desc:w,onVideoPause:S,onVideoPlaying:C,onVideoPlay:P,onVideoEnded:T,onVideoError:I,e2eTag:D,onTimeUpdate:O,subtitleStruct:R,disableDownload:M=!0,posterStyle:B},L){const{currentVideo:Z,playProgress:E}=(0,a.mp)(u.f),{updateVVTime:F}=(0,a.qj)(u.f),z=(0,n.useRef)(null),A=(0,n.useRef)(null),U=(0,l.fz)(s.ec),V=(0,l.fz)(d.k),W=(0,l.fz)(c.KF),[H,q]=(0,n.useState)(!1),N=(0,n.useCallback)((()=>{var e,t;null===(t=null===(e=z.current)||void 0===e?void 0:e.play)||void 0===t||t.call(e)}),[]),G=(0,n.useCallback)((()=>{var e,t;null===(t=null===(e=z.current)||void 0===e?void 0:e.pause)||void 0===t||t.call(e)}),[]),$=(0,n.useMemo)((()=>{if(!Z)return!1;const{id:e,index:t,mode:i}=Z;return e===y&&t===_&&i===j}),[y,_,j,Z]);(0,n.useImperativeHandle)(L,(()=>({play:()=>{N(),A.current=!0},pause:()=>{G(),A.current=!1,U.triggerPause({enter_method:"click_pause",playMode:j})},seek:e=>{var t;null===(t=z.current)||void 0===t||t.seek(e)},seekTime:e=>{var t;null===(t=z.current)||void 0===t||t.seekTime(e)},onSeeked:e=>{var t;null===(t=z.current)||void 0===t||t.onSeeked(e)},onSeeking:e=>{var t;null===(t=z.current)||void 0===t||t.onSeeking(e)},onTimeUpdate:e=>{var t;null===(t=z.current)||void 0===t||t.onTimeUpdate(e)},getFullscreen:()=>{},exitFullscreen:()=>{},replay:()=>{N(),A.current=!0},get currentTime(){var e,t;return null!==(t=null===(e=z.current)||void 0===e?void 0:e.getPlayerAttributes().currentTime)&&void 0!==t?t:0},get duration(){var e,t;return null!==(t=null===(e=z.current)||void 0===e?void 0:e.getPlayerAttributes().duration)&&void 0!==t?t:0},get currentCanPlay(){return $&&H}})),[N,G,U,j,$,H]),(0,n.useEffect)((()=>{$||q(!1)}),[$]);const Y=(0,h.Mz)();(0,n.useEffect)((()=>{const e=null===A.current||A.current;Y&&e?N():(G(),$&&!Y&&U.triggerPause({enter_method:"switch_tab",playMode:j}))}),[Y,N,G,U,$,j]);const Q=(0,m.S1)(y),J=(0,n.useCallback)((()=>{var e;const t=(0,v.m7)(null===(e=z.current)||void 0===e?void 0:e.getPlayerAttributes()),{bitrate:i,author_id:o,format:n,encodedType:a,videoQuality:l,encodeUserTag:s,codecType:d,definition:c,secret:u,forFriend:p}=f;return Object.assign(Object.assign({id:y,authorId:o,playMode:j,bitrate:i,format:n,encodedType:a,videoQuality:l,encodeUserTag:s,codecType:d,definition:c,secret:u,forFriend:p,play_url:r},null!=t?t:{}),Q)}),[y,j,f,r,Q]),{mute:K}=(0,a.mp)(p.x),X=(0,n.useMemo)((()=>{const{group_id:e="",author_id:t="",is_scheduled:i,search_id:o,search_keyword:n,search_result_id:r,question_id:a,collection_id:l,collection_name:s,isPaidPartnership:d,poi_id:c}=f||{};return Object.assign({itemId:e,authorId:t,isScheduled:Boolean(i),autoplayStatus:1,searchId:o,searchKeyword:n,searchResultId:r,questionId:a,playMode:j,isMute:K,collectionId:l,collectionName:s,isPaidPartnership:Boolean(d),poiId:c},Q)}),[j,K,f,Q]),ee=(0,n.useCallback)((()=>{var e;const{currentTime:t=0,duration:i=0}=(0,v.m7)(null===(e=z.current)||void 0===e?void 0:e.getPlayerAttributes());return Object.assign(Object.assign({},X),{currentTime:t,duration:i})}),[X]),{loading:te,handleCanPlayWithLoading:ie,handlePauseWithLoading:oe,handlePlayingWithLoading:ne,handleWaitingWithLoading:re}=(0,h.Fk)({isCurrentVideo:$}),ae=(0,n.useCallback)((()=>{V.handleLoadStart(J())}),[V,J]),le=(0,n.useCallback)((()=>{V.handleLoadedData(J())}),[V,J]),se=(0,n.useCallback)((()=>{ie(),q(!0),W.getCurrentPageReport()||(W.reportVideoFirstScreen({endTime:Date.now(),videoSource:r}),W.reportVideoAddition({endTime:Date.now(),videoSource:r}))}),[ie,r,W]),de=(0,n.useCallback)((e=>{V.handlePlay(),null==P||P(e)}),[V,P]),ce=(0,n.useCallback)((()=>{var e;const{currentTime:t=0,duration:i=0}=(0,v.m7)(null===(e=z.current)||void 0===e?void 0:e.getPlayerAttributes()),o=U.handleTimeUpdate(ee());V.handleTimeUpdate(J()),"video_play"===o&&F(),W.getFirstFrameReport()||W.reportVideoFirstFrame(t),null==O||O(t/i)}),[U,ee,V,J,W,O,F]),ue=(0,h.ru)(),pe=(0,n.useCallback)((e=>{null==I||I(e),ue(e),U.handleError(X),V.handleError(J())}),[I,ue,U,X,V,J]),he=(0,n.useCallback)((e=>{null==S||S(e),oe(),V.handlePause(J()),U.handlePause(ee())}),[S,oe,V,J,U,ee]),ve=(0,n.useCallback)((e=>{null==C||C(e),ne(),W.reportVideoInteract({endTime:Date.now(),videoSource:r})}),[C,ne,W,r]),ge=(0,n.useCallback)((()=>{re(),U.handleWaiting(ee()),V.handleWaiting(J())}),[re,U,ee,V,J]),me=(0,n.useCallback)((e=>{null==T||T(e),U.handleEnded(X),V.handleEnded()}),[T,U,X,V]),be=(0,n.useCallback)((e=>{U.handlePlayTime(X),V.reset(y,Object.assign(Object.assign({},J()),e))}),[y,U,X,V,J]);(0,n.useEffect)((()=>{$||null==S||S({})}),[$,S]);const xe=i||2===j||3===j||4===j||6===j||5===j;return(0,o.jsxs)(x.wu,Object.assign({horizontal:i,mode:j},{children:[e?(0,o.jsx)(x.TF,{horizontal:xe,mode:j,src:e,alt:w,loading:t?"lazy":"eager",style:B},void 0):null,$&&(0,o.jsxs)(x.Kp,Object.assign({"data-e2e":D},{children:[(0,o.jsx)(b.N,{ref:z,c:!0,horizontal:xe,muteSetting:k||g.PA[j].forceMute,defaultMute:g.PA[j].defaultMute,playProgress:null!=E?E:0,src:r,onUnmount:be,onLoadStart:ae,onLoadedData:le,onTimeUpdate:ce,onError:pe,onCanPlay:se,onPause:he,onPlay:de,onPlaying:ve,onWaiting:ge,onEnded:me,disableDownload:M},void 0),te&&(0,o.jsx)(x.Nm,{},void 0),4!==j&&6!==j||!R?null:(0,o.jsx)("track",{default:!0,kind:"subtitles",srclang:R.language,src:R.url},void 0)]}),void 0)]}),void 0)})));var f=i(64047),_=i(25615),j=i.n(_),k=i(4180),w=i(51177),S=i(87024),C=i(22130),P=i.n(C),T=i(12480),I=i(88656),D=i(63453),O=i(13576);const R={mp4Preloader:null},M=e=>e?Array.isArray(e)?e.map((e=>({src:e}))):"string"==typeof e?e:[]:[],B="TT-vCache";let L=!0;const Z=(e,t,i)=>!Array.isArray(e)||e.length<1?[]:e.map((e=>{var o,n;return{bitrate:e.Bitrate,definition:null!==(o=e.GearName)&&void 0!==o?o:i,duration:t,url:M(null===(n=e.PlayAddr)||void 0===n?void 0:n.UrlList)}})),E={width:"100%",height:"100%",controls:!1,closeVideoClick:!0,closeVideoDblclick:!0,closeVideoTouch:!0,closePlayerBlur:!0,closeControlsBlur:!0,closeFocusVideoFocus:!0,closePlayVideoFocus:!0,closeVideoStopPropagation:!0,ignores:["play","start"]};class F{constructor(e){this.element=this.initPlayer(e),this.uuid=F.generateUUID()}static generateUUID(){return this.UUIDBase++,this.UUIDPrefix+this.UUIDBase}style(){}initPlayer(e){const t=(e=>{var t,i,o;const{id:n,mode:r,preloadUrlsList:a,url:l,volume:s,playbackRate:d,onAutoplayFailed:c,disableDownload:u,videoDuration:p,bitrateConfig:h,bitrateInfo:v,useBitrate:g,defaultDefinition:m,xgplayerInitHost:b,shouldUseVideoNormalization:x,defaultBitrate:y,videoOrder:f=[{property:"QualityType",detail:[10,28]},{property:"Bitrate",order:"desc"}],autoPlay:_=!0}=e,j=`xgwrapper-${r}-${n}`;let k=[];try{const e=(e,t)=>e[f[0].property]!==t[f[0].property]?"Bitrate"===f[0].property?"desc"===f[0].order?t.Bitrate-e.Bitrate:e.Bitrate-t.Bitrate:f[0].detail.indexOf(e[f[0].property])>=0&&f[0].detail.indexOf(t[f[0].property])>=0?f[0].detail.indexOf(e[f[0].property])-f[0].detail.indexOf(t[f[0].property]):f[0].detail.indexOf(e[f[0].property])>=0?-1:1:e[f[1].property]!==t[f[1].property]?"Bitrate"===f[1].property?"desc"===f[1].order?t.Bitrate-e.Bitrate:e.Bitrate-t.Bitrate:f[1].detail.indexOf(e[f[1].property])>=0&&f[1].detail.indexOf(t[f[1].property])>=0?f[1].detail.indexOf(e[f[1].property])-f[1].detail.indexOf(t[f[1].property]):f[1].detail.indexOf(e[f[1].property])>=0?-1:1:1;v&&v.length>0&&(k=v.sort(e))}catch(e){console.error("bitrateInfo is empty")}const{group1:S,group2:C}=b;function P(e){try{if(!e)return"";const{host:t}=new URL(e);return S.filter((e=>e===t)).length>0?"anonymous":C.filter((e=>e===t)).length>0?"use-credentials":""}catch(e){return""}}const F=k&&(null==k?void 0:k.length)>0&&(null===(t=k[0].PlayAddr)||void 0===t?void 0:t.UrlList)&&(null===(i=k[0].PlayAddr)||void 0===i?void 0:i.UrlList.length)>0?k[0].PlayAddr.UrlList[0]:l,z=P(F),A=x,U="use-credentials"===z?{credentials:"include"}:{},V=!!_&&L,W=Object.assign({url:F,id:j,autoplay:V,vid:`${B}-${n}`,plugins:g?[O.Z,D.Z]:[D.Z],volume:s,playbackRate:d,defaultDefinition:m,defaultBitrate:y,duration:p,definition:{list:Z(k,p,m)},bitrateselector:h,Mp4EncryptPlayer:{reqOptions:Object.assign({},U),getRequestOptionsCallback:e=>"use-credentials"===P(e.url)?{credentials:"include"}:{},minBufferLength:10,maxBufferLength:30,needPreloadRangeList:!0,needPreloadCheck:!0,needAutoBitrate:!0,removeBufferLen:60,resumePlayWaterLevel:2,segmentMinDuration:10,xhrSetup(e){e.withCredentials=!0}},videoConfig:{crossorigin:A?z:""}},E);let H;R&&(H=R.mp4Preloader,H||(H=D.D.registerPreloader({preloadTime:10,segmentMinDuration:10,preloadCacheType:1,preloadMaxCacheCount:5,minBufferLength:10,reqOptions:Object.assign({},U),getRequestOptionsCallback:e=>"use-credentials"===P(e.url)?{credentials:"include"}:{}},g?O.Z:null)));const q=new T.ZP(W);if(q._videoType="mp4",q._playerType="xgplayer",H&&(q.preloader=H),q.on("PRELOAD_INFO",(e=>{const t=(0,w.Ld)();null==t||t.setPreloadCacheInfo(n,e)})),a&&a.length>0){const e=((e,t)=>{const i=[];return e.forEach(((e,o)=>{const n=((e,t,i)=>{if(!Array.isArray(e)||e.length<1)return{};const o=e[0].id;return{order:t,data:{vid:`${B}-${o}`,payload:e.map((e=>({url:M(e.url),definition:e.definition,bitrate:e.bitrate,duration:e.duration}))),preloadTime:i}}})(e,o,t);i.push(n)})),i})(a,10);H.addPreloaderList(e)}return u&&(null===(o=q.video)||void 0===o||o.addEventListener("contextmenu",(e=>{(e=e||window.event).preventDefault&&e.preventDefault(),e.stopPropagation?e.stopPropagation():(e.returnValue=!1,e.cancelBubble=!0)}),!1)),q.on("playCatch",(e=>{q._videoType=e,q._playerType="defaultPlayer",q._needFilterFallbackCase=!0})),q.on(I.lB,(()=>{null==c||c(),setTimeout((()=>{try{q.play()}catch(e){console.error("handle xgplayer autoplay error...")}}),0)})),q._resetNeedFilterFallbackCase=()=>{q._needFilterFallbackCase=!1},L=!1,q})(e);return this.element=t,t}get currentTime(){var e,t;return null!==(t=null===(e=this.element)||void 0===e?void 0:e.currentTime)&&void 0!==t?t:0}set currentTime(e){this.element&&(this.element.currentTime=e)}get isCanplay(){return this.element.isCanplay}get duration(){return this.element.duration}get volume(){return this.element.volume}set volume(e){this.element.volume=e}get muted(){var e;return null===(e=this.element)||void 0===e?void 0:e.muted}set muted(e){this.element.muted=e}get playbackRate(){return this.element.playbackRate}set playbackRate(e){this.element.playbackRate=e}bindEvent(e,t){var i;null===(i=this.element)||void 0===i||i.on(e,t)}removeEvent(e,t){var i;null===(i=this.element)||void 0===i||i.off(e,t)}access(){}load(e){this.element&&(this.element.src=e)}demux(){}decode(){}render(){}seek(e){if(this.element){const{duration:t}=this.element;this.element.currentTime=t*e}}seekTime(e){this.element&&(this.element.currentTime=e)}play(){return this.element.play()}pause(){var e;null===(e=this.element)||void 0===e||e.pause()}getFullscreen(e){var t;return(0,f.__awaiter)(this,void 0,void 0,(function*(){yield null===(t=this.element)||void 0===t?void 0:t.getFullscreen(e)}))}exitFullscreen(e){var t;return(0,f.__awaiter)(this,void 0,void 0,(function*(){yield null===(t=this.element)||void 0===t?void 0:t.exitFullscreen(e)}))}release(){var e,t;(null===(e=this.element)||void 0===e?void 0:e.destroy)&&(null===(t=this.element)||void 0===t||t.destroy())}}F.UUIDBase=0,F.UUIDPrefix="PLAYER_";const z=F;var A=i(95872);const U=e=>{A.W.event("vodkit_video_error",e)},V=e=>{A.W.event("vodkit_score",e)},W=e=>(Object.keys(e).forEach((t=>null===e[t]&&void 0!==e[t]&&delete e[t])),e),H=class{constructor(){this.timeID=null,this.func=null}repeat(e,t){this.timeID=1,this.repeatInterval(e,t)}repeatInterval(e,t){this.timeID&&(null===this.func&&(this.func=e),this.func===e&&(this.timeID&&window.clearTimeout(this.timeID),this.timeID=null,this.timeID=window.setTimeout((()=>{e(),this.repeatInterval(e,t)}),t)))}clear(){this.timeID&&window.clearTimeout(this.timeID),this.timeID=null}},q=({startUpTimeSecond:e,isEBVS:t})=>t?-1:Number((4/(4+e)*100).toFixed(1)),N=({isEBVS:e,rebufferCount:t,rebufferPercentage:i})=>{if(e)return-1;const o=(1/Math.sqrt(1+Math.pow(t/2,2))*100+100*Math.pow(Math.E,-10*i))/2;return Number(o.toFixed(1))};var G=i(13795);let $;const Y=$||("undefined"!=typeof window&&(null===window||void 0===window?void 0:window.SlardarLite)&&($=(0,G.F)({bid:"tiktok_web_playback",env:"production",release:"0.0.1"}),$.start()),$);var Q=i(7887),J=i.n(Q);const K=()=>{if("undefined"==typeof window)return!1;{const e=null===window||void 0===window?void 0:window.MediaSource=(null===window||void 0===window?void 0:window.MediaSource)||(null===window||void 0===window?void 0:window.WebKitMediaSource);return e&&"function"==typeof e.isTypeSupported}},X=J()((()=>!!(null===window||void 0===window?void 0:window.MediaSource)&&((null===window||void 0===window?void 0:window.MediaSource.isTypeSupported('video/mp4;codecs="hev1.1.6.L120.90"'))||(null===window||void 0===window?void 0:window.MediaSource.isTypeSupported('video/mp4;codecs="hev1.2.4.L120.90"'))||(null===window||void 0===window?void 0:window.MediaSource.isTypeSupported('video/mp4;codecs="hev1.3.E.L120.90"'))||(null===window||void 0===window?void 0:window.MediaSource.isTypeSupported('video/mp4;codecs="hev1.4.10.L120.90"'))))),ee=J()((()=>(0,f.__awaiter)(void 0,void 0,void 0,(function*(){const e=yield navigator.mediaCapabilities.decodingInfo({type:"file",video:{contentType:'video/mp4; codecs="hev1.1.6.L120.90"',width:1920,height:1080,bitrate:1e4,framerate:30}}),t=yield navigator.mediaCapabilities.decodingInfo({type:"file",video:{contentType:'video/mp4;codecs="hev1.2.4.L120.90"',width:1920,height:1080,bitrate:1e4,framerate:30}});return e.supported||t.supported}))));"undefined"!=typeof window&&(window.CTHUN_SLARDAR=Y);class te{constructor(e){var t;this.getUrlInfo=()=>{try{if("undefined"!=typeof window){const e=window.location.href;return e?new URL(e):null}return null}catch(e){return null}},this.getBandWidth=e=>{0===this.bandWidth&&(this.bandWidth=e)},this.resetMetrics=()=>{this.pauseCounter=0,this.isCurrentVideo=!1,this.bufferCounter=0,this.loadStartTime=0,this.videoRequestTime=0,this.videoPlaybackTime=0,this.videoFirstPlayTime=0,this.videoFirstPlayingTime=0,this.videoInitTime=0,this.videoLoadedDataTime=0,this.videoPlaybackComplete=!1,this.startupAttempt=0,this.canPlayTime=0,this.totalPlayTime=0,this.videoBufferTime=0,this.videoBufferCounter=0,this.videoSeekingTime=0,this.videoWidth=0,this.videoHeight=0,this.videoPlayerWidth=0,this.videoPlayerHeight=0,this.isPaused=!0,this.isWaiting=!1,this.isSeeking=!1,this.isPlaying=!1,this.totalPlayTimeTimer=new H,this.duration=0,this.HEVCSupported=!1,this.playerType="default",this.playMode="single",this.videoMetaDataTime=0,this.status="normal",this.endedCounter=0,this.currentIndex=-1,this.isFirstView=!1,this.chunkSize=0,this.bandWidth=0,this.requestTime=0,this.instances=1,this.networkInfo=-1},this.resetMultiMetrics=()=>{this.pauseCounter=0,this.isCurrentVideo=!1,this.bufferCounter=0,this.loadStartTime=1,this.videoRequestTime=0,this.videoPlaybackTime=0,this.videoFirstPlayTime=0,this.videoFirstPlayingTime=0,this.videoInitTime=0,this.videoLoadedDataTime=0,this.videoPlaybackComplete=!1,this.startupAttempt=0,this.canPlayTime=1,this.totalPlayTime=0,this.videoBufferTime=0,this.videoBufferCounter=0,this.videoSeekingTime=0,this.isPaused=!0,this.isWaiting=!1,this.isSeeking=!1,this.isPlaying=!1,this.totalPlayTimeTimer=new H,this.videoMetaDataTime=0,this.endedCounter=0,this.isFirstView=!1,this.bandWidth=0},this.addChunkSize=e=>{this.chunkSize+=e},this.addRequestTime=e=>{this.requestTime+=e},this.commonCategory=()=>({playerType:this.playerType,status:this.status,project:this.project,host:this.urlInfo?this.urlInfo.host:"unknown",path:this.urlInfo?this.urlInfo.pathname:"unknown",swipeUp:this.swipeUp}),this.handleTotalTimerCounter=()=>{(this.isCurrentVideo||"single"===this.playMode)&&(this.totalPlayTime+=50),(this.isCurrentVideo||"single"===this.playMode)&&(!this.isVideoStartPlaying||this.isPlaying||this.isSeeking||this.isPaused||!this.isWaiting||(this.videoBufferTime+=50),!this.isVideoStartPlaying||this.isPlaying||this.isWaiting||!this.isSeeking||this.isPaused||(this.videoSeekingTime+=50),!this.isVideoStartPlaying||!this.isPlaying||this.isWaiting||this.isSeeking||this.isPaused||(this.videoPlaybackTime+=50))},this.clearTotalPlayTimer=()=>{this.totalPlayTimeTimer.clear()},this.handleLoadedMetadata=e=>{0===this.videoMetaDataTime&&(this.videoMetaDataTime=performance.now());const t=null==e?void 0:e.videoWidth,i=null==e?void 0:e.videoHeight;this.videoWidth=t,this.videoHeight=i,this.videoPlayerWidth=null==e?void 0:e.offsetWidth,this.videoPlayerHeight=null==e?void 0:e.offsetHeight},this.handleLoadStart=()=>{0===this.loadStartTime&&(this.loadStartTime=performance.now())},this.handleLoadedData=e=>{0===this.videoLoadedDataTime&&(this.duration=null==e?void 0:e.duration,this.videoLoadedDataTime=performance.now())},this.handlePlay=()=>{0!==this.videoFirstPlayTime||!this.isCurrentVideo&&"single"!==this.playMode||(this.videoFirstPlayTime=performance.now())},this.handlePlaying=()=>{0!==this.videoFirstPlayingTime||!this.isCurrentVideo&&"single"!==this.playMode||(this.videoFirstPlayingTime=performance.now(),this.totalPlayTimeTimer.repeat(this.handleTotalTimerCounter,50)),this.isPlaying=!0,this.isPaused=!1,this.isWaiting=!1,this.isSeeking=!1},this.playerDowngrade=()=>{this.status="downgrade"},this.handleError=e=>{var t;this.isPlaying=!1,this.isPaused=!1,this.isWaiting=!1,this.isSeeking=!1;const i=null===(t=null==e?void 0:e.error)||void 0===t?void 0:t.code;let o="";i&&(Y.sendEvent({name:"score",metrics:this.errorMetrics,categories:Object.assign({scoreMode:"ERROR",src:null==e?void 0:e.src},this.commonCategory())}),V(W(Object.assign(Object.assign(Object.assign(Object.assign({},this.errorMetrics),{src:e.src}),this.commonCategory()),{scoreMode:"ERROR"}))),i===MediaError.MEDIA_ERR_ABORTED?(Y.sendEvent({name:"abortedError",metrics:this.errorMetrics,categories:Object.assign(Object.assign({},this.commonCategory()),{scoreMode:"ERROR",content:this.isVideoStartPlaying?"videoPlaybackFailure":"videoRequestFailure"})}),o=this.isVideoStartPlaying?"videoPlaybackFailure":"videoRequestFailure"):i===MediaError.MEDIA_ERR_NETWORK?(Y.sendEvent({name:"networkError",metrics:this.errorMetrics,categories:Object.assign(Object.assign({},this.commonCategory()),{scoreMode:"ERROR",content:"videoRequestFailure"})}),o="videoRequestFailure"):i===MediaError.MEDIA_ERR_DECODE?(Y.sendEvent({name:"decodeError",metrics:this.errorMetrics,categories:Object.assign(Object.assign({scoreMode:"ERROR"},this.commonCategory()),{content:this.isVideoStartPlaying?"videoPlaybackFailure":"videoStartupFailure"}),level:"error"}),o=this.isVideoStartPlaying?"videoPlaybackFailure":"videoStartupFailure"):i===MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED&&(Y.sendEvent({name:"srcNotSupported",metrics:this.errorMetrics,categories:Object.assign(Object.assign({scoreMode:"ERROR"},this.commonCategory()),{content:this.isVideoStartPlaying?"videoPlaybackFailure":"videoStartupFailure"}),level:"error"}),o=this.isVideoStartPlaying?"videoPlaybackFailure":"videoStartupFailure"),Y.sendEvent({name:"videoError",metrics:this.errorMetrics,categories:Object.assign(Object.assign({scoreMode:"ERROR"},this.commonCategory()),{content:o,code:i}),level:"error"}),U(W(Object.assign(Object.assign({content:o,scoreMode:"ERROR",code:i},this.commonCategory()),this.errorMetrics))))},this.handleAbort=()=>{this.isPlaying=!1,this.isPaused=!1,this.isWaiting=!1,this.isSeeking=!1,0===this.videoFirstPlayingTime&&Y.sendEvent({name:"aborted",metrics:{duration:this.duration},categories:Object.assign(Object.assign({},this.commonCategory()),{content:"exitBeforeVideoStart"}),level:"warn"})},this.handleStalled=()=>{this.isPlaying=!1,this.isPaused=!1,this.isWaiting=!1,this.isSeeking=!1,Y.sendEvent({name:"videoError",metrics:this.errorMetrics,categories:Object.assign(Object.assign({scoreMode:"ERROR"},this.commonCategory()),{content:this.isVideoStartPlaying?"videoPlaybackFailure":"videoRequestFailure",code:2e3}),level:"error"}),U(W(Object.assign(Object.assign({content:this.isVideoStartPlaying?"videoPlaybackFailure":"videoRequestFailure",scoreMode:"ERROR"},this.commonCategory()),this.errorMetrics)))},this.handleEnded=()=>{this.videoPlaybackComplete=!0,this.endedCounter+=1},this.handleCanPlay=()=>{0===this.canPlayTime&&(this.canPlayTime=performance.now())},this.handleWaiting=()=>{this.isPlaying=!1,this.isPaused=!1,this.isSeeking=!1,this.isWaiting=!0,this.videoPlaybackTime>0&&(this.isCurrentVideo||"single"===this.playMode)&&(this.videoBufferCounter+=1)},this.handlePause=()=>{this.isPaused=!0,this.isPlaying=!1,this.isSeeking=!1,this.isWaiting=!1},this.handleSeeking=()=>{this.isSeeking=!0,this.isPaused=!1,this.isPlaying=!1,this.isWaiting=!1},this.handleSeeked=()=>{this.isSeeking=!1},this.viewReport=()=>{Y.sendEvent({name:"view",metrics:{},categories:Object.assign({},this.commonCategory())})},this.calculateAllScore=()=>{const e=(({isEBVS:e,videoPlayerWidth:t,videoWidth:i})=>{if(e)return-1;const o=t-i>=0?(t-i)/i:0,n=100*Math.pow(Math.E,-.33*o);return Number(n.toFixed(1))})({isEBVS:this.isEBVS,videoPlayerWidth:this.videoPlayerWidth,videoWidth:this.videoWidth}),t=N({isEBVS:this.isEBVS,rebufferCount:this.realBufferCounter,rebufferPercentage:this.videoBufferTime/this.totalPlayTime}),i=q({startUpTimeSecond:this.videoStartUpTime/1e3,isEBVS:this.isEBVS}),o=(({isLoadstart:e,isEBVS:t})=>e?t?50:100:0)({isEBVS:this.isEBVS,isLoadstart:this.loadStartTime>0});return{qualityScore:e,smoothnessScore:t,startupTimeScore:i,totalScore:Number((o*(.05*e+.25*t+.7*i)/100).toFixed(1)),playbackSuccessScore:o}},this.downloadErrorReport=e=>{var t;Y.sendEvent({name:"downloadError",metrics:{},categories:Object.assign({code:e.code?String(e.code):"",name:e.name,src:e.url,range:null!==(t=e.range)&&void 0!==t?t:""},this.commonCategory())})},this.checkIosHevc=()=>(0,f.__awaiter)(this,void 0,void 0,(function*(){const e=yield ee();Y.sendEvent({name:"IOSHEVC",metrics:{supported:e?1:0},categories:Object.assign({},this.commonCategory())})})),this.pauseCounter=0,this.isCurrentVideo=!1,this.bufferCounter=0,this.loadStartTime=0,this.videoRequestTime=0,this.videoPlaybackTime=0,this.videoFirstPlayTime=0,this.videoFirstPlayingTime=0,this.videoInitTime=0,this.videoLoadedDataTime=0,this.videoPlaybackComplete=!1,this.startupAttempt=0,this.canPlayTime=0,this.totalPlayTime=0,this.videoBufferTime=0,this.videoBufferCounter=0,this.videoSeekingTime=0,this.videoWidth=0,this.videoHeight=0,this.videoPlayerWidth=0,this.videoPlayerHeight=0,this.isPaused=!0,this.isWaiting=!1,this.isSeeking=!1,this.isPlaying=!1,this.totalPlayTimeTimer=new H,this.duration=0,this.HEVCSupported=!1,this.playerType="default",this.playMode="single",this.videoMetaDataTime=0,this.status="normal",this.endedCounter=0,this.currentIndex=-1,this.isFirstView=!0,this.urlInfo=this.getUrlInfo(),this.project=null!==(t=e.project)&&void 0!==t?t:"unknown",this.chunkSize=0,this.bandWidth=0,this.requestTime=0,this.instances=1,this.networkInfo=-1,this.swipeUp=!0}get videoFirstFrameTime(){return this.videoLoadedDataTime-this.loadStartTime>0?this.videoLoadedDataTime-this.loadStartTime:0}get videoStartUpTime(){return Math.max(this.videoFirstPlayingTime-this.videoFirstPlayTime,0)}get shouldUpLoad(){return 0!==this.videoFirstPlayTime||0!==this.loadStartTime}get isVideoStartPlaying(){return 0!==this.videoFirstPlayingTime}get videoPlaybackTimeRatio(){return this.totalPlayTime>0?Number((this.videoPlaybackTime/this.totalPlayTime).toFixed(6)):null}get videoRebufferingFrequency(){return this.realBufferCounter>0?Number((this.realBufferCounter/(this.videoPlaybackTime/1e3/60)).toFixed(6)):0}get videoRestartTime(){return this.videoSeekingTime}get videoRestartTimeRatio(){return 0!==this.totalPlayTime?Number((this.videoRestartTime/this.totalPlayTime).toFixed(6)):null}get videoRebufferingTimeRatio(){return 0!==this.totalPlayTime?Number((this.videoBufferTime/this.totalPlayTime).toFixed(6)):null}get isEBVS(){return 0===this.videoFirstPlayingTime&&this.shouldUpLoad}get errorScore(){return(({videoBufferTime:e,totalPlayTime:t,rebufferCount:i,isEBVS:o,videoStartUpTime:n})=>({qualityScore:null,smoothnessScore:e&&t?N({isEBVS:o,rebufferCount:i,rebufferPercentage:e/t}):null,startupTimeScore:n?q({isEBVS:o,startUpTimeSecond:n/1e3}):null,totalScore:0,playbackSuccessScore:0}))({videoBufferTime:this.videoBufferTime,totalPlayTime:this.totalPlayTime,rebufferCount:this.realBufferCounter,isEBVS:this.isEBVS,videoStartUpTime:this.videoStartUpTime})}get errorMetrics(){const{qualityScore:e,smoothnessScore:t,startupTimeScore:i,totalScore:o,playbackSuccessScore:n}=this.errorScore;return{duration:this.duration,qualityScore:e,smoothnessScore:t,startupTimeScore:i,totalScore:o,playbackSuccessScore:n}}get realBufferCounter(){return this.videoBufferCounter-this.endedCounter}createMetrics(){return{videoRestartTimeRatio:this.videoRestartTimeRatio,videoRestartTime:this.videoRestartTime,videoRebufferingFrequency:this.videoRebufferingFrequency,videoPlaybackTime:this.videoPlaybackTime,videoPlaybackTimeRatio:this.videoPlaybackTimeRatio,videoStartUpTime:this.videoStartUpTime,videoFirstFrameTime:this.videoFirstFrameTime,videoRequestTime:Math.max(this.canPlayTime-this.loadStartTime,0),videoRequestMetaDataTime:Math.max(this.videoMetaDataTime-this.loadStartTime,0),videoWidth:this.videoWidth,videoHeight:this.videoHeight,videoRebufferingTime:this.videoBufferTime,videoRebufferingCount:this.realBufferCounter,videoRebufferingTimeRatio:this.videoRebufferingTimeRatio,videoPlayingTotalTime:this.totalPlayTime,videoDuration:this.duration,event:"slide",cpuCore:navigator.hardwareConcurrency,instances:this.instances}}handleDataBeforeSend(){this.loadStartTime=Math.round(this.loadStartTime),this.videoRequestTime=Math.round(this.videoRequestTime),this.videoPlaybackTime=Math.round(this.videoPlaybackTime),this.videoFirstPlayTime=Math.round(this.videoFirstPlayTime),this.videoFirstPlayingTime=Math.round(this.videoFirstPlayingTime),this.videoInitTime=Math.round(this.videoInitTime),this.videoLoadedDataTime=Math.round(this.videoLoadedDataTime),this.canPlayTime=Math.round(this.canPlayTime),this.totalPlayTime=Math.round(this.totalPlayTime),this.videoBufferTime=Math.round(this.videoBufferTime),this.videoSeekingTime=Math.round(this.videoSeekingTime),this.videoMetaDataTime=Math.round(this.videoMetaDataTime)}slardarVideoFinishedReport(e,t,i){var o,n,r,a,l,s,d,c;const u=e,p={videoPlaybackComplete:this.videoPlaybackComplete?"complete":"incomplete",videoMinResolution:String(Math.min(this.videoWidth,this.videoHeight)),currentIndex:String(this.currentIndex),deviceMemory:String(null!==(o=null===navigator||void 0===navigator?void 0:navigator.deviceMemory)&&void 0!==o?o:0),effectiveType:null!==(r=null===(n=null===navigator||void 0===navigator?void 0:navigator.connection)||void 0===n?void 0:n.effectiveType)&&void 0!==r?r:"unknown",isFirstView:this.isFirstView},{qualityScore:h,playbackSuccessScore:v,smoothnessScore:g,startupTimeScore:m,totalScore:b}=this.calculateAllScore(),x={};-1===h||-1===g||-1===m?this.isEBVS?(Object.assign(x,{playbackSuccessScore:50}),Object.assign(u,x),Object.assign(p,{scoreMode:"EBVS"})):Object.assign(p,{scoreMode:"UNKNOWN"}):(Object.assign(x,{qualityScore:h,smoothnessScore:g,startupTimeScore:m,totalScore:b,playbackSuccessScore:v}),Object.assign(u,x),Object.assign(p,{scoreMode:"NORMAL"})),t&&Object.assign(u,{bitrate:t.bitrate,memoryUsage:null!==(s=null===(l=null===(a=null===window||void 0===window?void 0:window.performance)||void 0===a?void 0:a.memory)||void 0===l?void 0:l.usedJSHeapSize)&&void 0!==s?s:null}),this.chunkSize>0&&Object.assign(u,{chunkSize:this.chunkSize}),this.bandWidth>0&&Object.assign(u,{bandwidth:this.bandWidth}),this.requestTime>0&&Object.assign(u,{requestTime:this.requestTime});const y={downlink:null!==(c=null===(d=null===navigator||void 0===navigator?void 0:navigator.connection)||void 0===d?void 0:d.downlink)&&void 0!==c?c:-1,networkInfo:this.networkInfo};var f;Object.assign(u,y),t&&Object.assign(p,Object.assign(Object.assign({format:t.format,videoQuality:t.videoQuality,codecType:t.codecType,definition:t.definition,encodedType:t.encodedType,isMseSupported:K(),isHEVCSupported:X()},this.commonCategory()),i)),0!==this.videoFirstPlayTime&&(Y.sendEvent({name:"score",metrics:x,categories:Object.assign(Object.assign({},this.commonCategory()),{scoreMode:"NORMAL"})}),Y.sendEvent({name:"slide",metrics:u,categories:p,extra:{author_id:t?t.author_id:null,group_id:t?t.group_id:null}}),V(W(Object.assign(Object.assign(Object.assign({},x),this.commonCategory()),{scoreMode:"NORMAL"}))),f=W(Object.assign(Object.assign(Object.assign({},u),p),{isHEVCSupported:X()?1:0,isMseSupported:K()?1:0})),A.W.event("vodkit_video_slide",f))}}var ie=i(46034),oe=i(5817),ne=i.n(oe);Object.freeze({});const re="undefined"==typeof window||"undefined"==typeof document?null:new class{constructor(){this.engine=null}init(e,t,i,o){this.engine=new ie.Z({meta:Object.assign(Object.assign({},e),{targetLufs:o}),processorName:"mammon-worklet-processor",processorUrl:"https://sf16-website-login.neutral.ttwstatic.com/obj/tiktok_web_login_static/tiktok/webapp/main/webapp-desktop/mammon-worklet-processor.min.js",needPcmData:!1},null),this.engine.attachPlayer(t.video),this.engine.on("ready",(e=>{var t;t={vid:i,muted:e.muted,volume:e.volume,peak:e.peak,loudness:e.loudness,state:e.state,connectState:e.connectState},A.W.event("volume_norm_ready",t)})),this.engine.on("error",(e=>{var t;t={vid:i,muted:e.muted,volume:e.volume,peak:e.peak,loudness:e.loudness,error:e.error,state:e.state,connectState:e.connectState},A.W.event("volume_norm_error",t)}))}isSupported(){return ie.Z.isSupported()}resume(){this.engine&&this.engine.resume()}detach(){this.engine&&this.engine.detachPlayer()}isInit(){return Boolean(this.engine)}updateMeta(e,t,i){const{peak:o,loudness:n}=t;this.engine&&o&&n&&(this.engine.attachPlayer(e.video),this.engine.updateMeta({peak:o,loudness:n,targetLufs:i}))}testPcmData(){const e=ne();console.log(e)}};var ae;!function(e){e.NoInteract="failed because the user didn't interact with the document first.",e.SafariNoInteract="The request is not allowed by the user agent or the platform in the current context",e.AbortRequest="new load request"}(ae||(ae={}));const le=(e,t)=>{var i,o,n,r,a,l,s,d,c,u,p,h,v,g,m,b,x,y,f,_,j;const k=null!==(n=null===(o=null===(i=null==e?void 0:e.element)||void 0===i?void 0:i.video)||void 0===o?void 0:o.error)&&void 0!==n?n:null,w=null===(a=null===(r=null==e?void 0:e.element)||void 0===r?void 0:r.video)||void 0===a?void 0:a.buffered,S=null!==(s=null===(l=null==e?void 0:e.element)||void 0===l?void 0:l._needFilterFallbackCase)&&void 0!==s&&s,C=null==e?void 0:e.currentTime,P=S&&C>0,T=null===(d=null==e?void 0:e.element)||void 0===d?void 0:d._resetNeedFilterFallbackCase,I=null===(c=null==e?void 0:e.element)||void 0===c?void 0:c._videoType,D=null===(u=null==e?void 0:e.element)||void 0===u?void 0:u._playerType,O=null===(p=null==e?void 0:e.element)||void 0===p?void 0:p.curDefinition;return{buffered:w,currentTime:C,ended:null===(h=null==e?void 0:e.element)||void 0===h?void 0:h.ended,currentSrc:null!=t?t:null===(v=null==e?void 0:e.element)||void 0===v?void 0:v.currentSrc,duration:null==e?void 0:e.duration,readyState:null===(m=null===(g=null==e?void 0:e.element)||void 0===g?void 0:g.video)||void 0===m?void 0:m.readyState,networkState:null===(x=null===(b=null==e?void 0:e.element)||void 0===b?void 0:b.video)||void 0===x?void 0:x.networkState,error:k?{code:null==k?void 0:k.code,message:null!==(f=null===(y=null==e?void 0:e.element)||void 0===y?void 0:y.error)&&void 0!==f?f:(null==k?void 0:k.message)||"UNKNOWN_ERROR_MESSAGE",MEDIA_ERR_ABORTED:1,MEDIA_ERR_NETWORK:2,MEDIA_ERR_DECODE:3,MEDIA_ERR_SRC_NOT_SUPPORTED:4}:null,videoType:I,playerType:D,needFilterFallbackCase:P,resetNeedFilterFallbackCase:T,volume:null==e?void 0:e.volume,muted:null==e?void 0:e.muted,videoBitrate:null==O?void 0:O.bitrate,videoQuality:null==O?void 0:O.definition,play_url:null!==(j=null===(_=null==e?void 0:e.element)||void 0===_?void 0:_.currentSrc)&&void 0!==j?j:t}},se=(0,n.memo)((0,n.forwardRef)((function({id:e,url:t,mode:i,muteSetting:o,playProgress:r,duration:l,playbackRate:s=1,onLoadStart:d,onLoadedData:c,onCanPlay:u,onPause:h,onPlay:v,onPlaying:g,onTimeUpdate:m,onWaiting:b,onEnded:x,onError:y,onUnmount:_,onVideoChange:j,onContextMenu:k,subtitleStruct:w,disableDownload:C,bitrateInfo:T,useBitrate:I,volumeInfo:D,defaultDefinition:O,bitrateConfig:R,normalizationVid:M,preloadUrlsList:B,preloader:L,defaultBitrate:Z=-1,xgplayerInitHost:E,videoOrder:F,teaParams:A,autoPlay:U,autoReplay:V=!0},W){const[H,q]=(0,n.useState)(!1),N=(0,n.useRef)(!1),G=(0,n.useRef)(null),$=E||{group1:["v16-webapp.tiktok.com","v16m-webapp.tiktokcdn-us.com"],group2:["v16-webapp-prime.tiktok.com","v16-webapp-prime.us.tiktok.com","v19-webapp-prime.us.tiktok.com"]},Y=(0,n.useMemo)((()=>{const e="v1"!==M;if(window.location.host.match("localhost"))return!1;const i=(null===navigator||void 0===navigator?void 0:navigator.hardwareConcurrency)||1,{group1:o,group2:n}=$,r=function(e){try{if(!e)return"";const{host:t}=new URL(e);return o.filter((e=>e===t)).length>0?"anonymous":n.filter((e=>e===t)).length>0?"use-credentials":""}catch(e){return""}}(t);return!!(e&&(null==re?void 0:re.isSupported())&&i>4&&r)}),[window.location.href]),Q=(0,n.useMemo)((()=>new te({project:"webapp-desktop"})),[]),[{mute:J,volume:K},{setMute:X,setMuteSetting:ee}]=(0,a.b7)(p.x,{selector:e=>({mute:e.muteSetting||e.mute,volume:e.volume}),dependencies:[]});(0,n.useEffect)((()=>{const o=new z({id:e,url:t,mode:i,volume:K,playbackRate:s,preloadUrlsList:B,disableDownload:C,useBitrate:I,videoDuration:null!=l?l:0,bitrateInfo:T,bitrateConfig:R,defaultDefinition:O,defaultBitrate:Z,onAutoplayFailed:()=>{X(!0)},xgplayerInitHost:$,shouldUseVideoNormalization:Y||!1,videoOrder:F,autoPlay:U});Q.videoFirstPlayTime=performance.now(),Q.playerType="xgplayer",Q.playMode="single",0===Q.videoInitTime&&(Q.videoInitTime=performance.now()),Q.viewReport(),o&&(G.current=o,q(!0))}),[e,t,i,L,X,I,O]);const ie=(0,a.mp)(p.x,{selector:e=>e.playing,dependencies:[]});(0,n.useImperativeHandle)(W,(()=>{const e=G.current;return{play:()=>(0,f.__awaiter)(this,void 0,void 0,(function*(){var t;re&&Y&&void 0!==(null==D?void 0:D.Peak)&&(null==re||re.resume());try{(null==e?void 0:e.isCanplay)?yield null==e?void 0:e.play():null===(t=null==e?void 0:e.element)||void 0===t||t.once("canplay",(()=>(0,f.__awaiter)(this,void 0,void 0,(function*(){yield null==e?void 0:e.play()}))))}catch(e){console.error("Video play error: ",e)}})),pause:()=>{try{null==e||e.pause()}catch(e){console.error("Video pause error: ",e)}},seek:t=>{if(e){const i=e.duration;i&&(e.currentTime=i*t)}},seekTime:t=>{null==e||e.seekTime(t)},onSeeked:t=>{null==e||e.bindEvent("seeked",t)},onSeeking:t=>{null==e||e.bindEvent("seeking",t)},onTimeUpdate:t=>{null==e||e.bindEvent("timeupdate",(()=>{var i,o;const n=null!==(i=null==e?void 0:e.currentTime)&&void 0!==i?i:0,r=null!==(o=null==e?void 0:e.duration)&&void 0!==o?o:0;t(n/r,n,r)}))},getFullscreen:t=>(0,f.__awaiter)(this,void 0,void 0,(function*(){yield null==e?void 0:e.getFullscreen(t)})),exitFullscreen:t=>(0,f.__awaiter)(this,void 0,void 0,(function*(){yield null==e?void 0:e.exitFullscreen(t)})),onCanPlay:t=>{null==e||e.bindEvent("canplay",t)},getPlayerAttributes:()=>le(e,t),replay:()=>{var t,i;(null===(t=null==e?void 0:e.element)||void 0===t?void 0:t.replay)&&(null===(i=e.element)||void 0===i||i.replay())}}}));const oe=(0,n.useCallback)(((e=0)=>(0,f.__awaiter)(this,void 0,void 0,(function*(){var t,i,o,n,r,a;if(!(e>=3))try{(null===(t=G.current)||void 0===t?void 0:t.isCanplay)?yield null===(i=G.current)||void 0===i?void 0:i.play():null===(n=null===(o=G.current)||void 0===o?void 0:o.element)||void 0===n||n.once("canplay",(()=>(0,f.__awaiter)(this,void 0,void 0,(function*(){var e;yield null===(e=G.current)||void 0===e?void 0:e.play()}))))}catch(t){const i=null!==(r=t.message)&&void 0!==r?r:"",o=i.indexOf("new load request")>-1,n=null!==(a=i.match("failed because the user didn't interact with the document first."))&&void 0!==a?a:i.match("The request is not allowed by the user agent or the platform in the current context");if(o)return;n?(X(!0),setTimeout((()=>{oe(e+1)}),0)):oe(e+1)}}))),[X]),ne=(0,n.useCallback)((()=>{var e,t,i;try{(null===(t=null===(e=G.current)||void 0===e?void 0:e.element)||void 0===t?void 0:t.replay)&&(null===(i=G.current.element)||void 0===i||i.replay())}catch(e){setTimeout((()=>{X(!0)}),0)}}),[X]);(0,n.useEffect)((()=>{var e;H&&(null===(e=G.current)||void 0===e?void 0:e.element)&&(re&&Y&&void 0!==(null==D?void 0:D.Peak)&&(null==re||re.resume()),G.current.muted=J,G.current.volume=K,G.current.playbackRate=s)}),[H,J,s,K]),(0,n.useEffect)((()=>{const e=G.current;ee(o),U&&H&&oe(),(null==e?void 0:e.element)&&Math.abs(e.currentTime-r)>.2&&(e.currentTime=r)}),[U,o,r,oe,ee,H]);const ae=(0,n.useCallback)((e=>{H&&(null==b||b(e),Q.handleWaiting())}),[H,b]);(0,n.useEffect)((()=>{var t;const i=null===(t=G.current)||void 0===t?void 0:t.element;if(void 0!==(null==D?void 0:D.Peak)&&void 0!==(null==D?void 0:D.Loudness)&&H&&Y&&i){const t={peak:D.Peak,loudness:D.Loudness};let o=-12;switch(M){case"v2":default:o=-12;break;case"v3":o=-14;break;case"v4":o=-16}(null==re?void 0:re.isInit())?re.updateMeta(i,t,o):null==re||re.init(t,i,e,o)}}),[t,H,e,M]);const se=(0,n.useCallback)((e=>{H&&(Q.handleEnded(),null==x||x(e),V&&ne())}),[H,x,ne,V]),de=(0,n.useCallback)((()=>{Q.handleLoadStart(),null==d||d()}),[Q,d]),ce=(0,n.useCallback)((e=>{var t,i;H&&(null===(t=G.current)||void 0===t?void 0:t.element)&&Q.handleLoadedData(null===(i=null==G?void 0:G.current)||void 0===i?void 0:i.element.video),null==c||c(e)}),[H,Q,c]),ue=(0,n.useCallback)((()=>{null==m||m()}),[m]),pe=(0,n.useCallback)((e=>{var t,i;H&&(null===(t=G.current)||void 0===t?void 0:t.element)&&Q.handleError(null===(i=null==G?void 0:G.current)||void 0===i?void 0:i.element.video),null==y||y(e)}),[Q,y]),he=(0,n.useCallback)((()=>{Q.handleCanPlay(),null==u||u()}),[Q,u]),ve=(0,n.useCallback)((e=>{Q.handlePause(),null==h||h(e)}),[Q,h]),ge=(0,n.useCallback)((e=>{Q.handlePlay(),null==v||v(e)}),[Q,v]),me=(0,n.useCallback)((e=>{Q.handlePlaying(),null==g||g(e)}),[Q,g]),be=(0,n.useCallback)((()=>{Q.handleSeeking()}),[Q]),xe=(0,n.useCallback)((()=>{Q.handleSeeked()}),[Q]),ye=(0,n.useCallback)((()=>{Q.handleStalled()}),[Q]),fe=(0,n.useCallback)((()=>{Q.handleAbort()}),[Q]),_e=(0,n.useCallback)((()=>{var e,t;(null===(e=G.current)||void 0===e?void 0:e.element)&&Q.handleLoadedMetadata(null===(t=null==G?void 0:G.current)||void 0===t?void 0:t.element.video)}),[Q]),je=(0,n.useCallback)((e=>{null==k||k(e)}),[k]),ke=(0,n.useMemo)((()=>new Map([["loadstart",de],["loadeddata",ce],["timeupdate",ue],["error",pe],["canplay",he],["pause",ve],["play",ge],["playing",me],["waiting",ae],["ended",se],["seeking",be],["seeked",xe],["stalled",ye],["abort",fe]])),[se,ae]);return(0,n.useEffect)((()=>{var e,t,i,o,n,r,a;if(H){for(const[t,i]of ke)null===(e=G.current)||void 0===e||e.bindEvent(t,null!=i?i:P());return null===(o=null===(i=null===(t=G.current)||void 0===t?void 0:t.element)||void 0===i?void 0:i.video)||void 0===o||o.addEventListener("loadedmetadata",_e),null===(a=null===(r=null===(n=G.current)||void 0===n?void 0:n.element)||void 0===r?void 0:r.video)||void 0===a||a.addEventListener("contextmenu",je),()=>{var e,t,i,o,n,r,a,l;if(null===(e=G.current)||void 0===e?void 0:e.element){for(const[e,i]of ke)null===(t=G.current)||void 0===t||t.removeEvent(e,null!=i?i:P());null===(n=null===(o=null===(i=G.current)||void 0===i?void 0:i.element)||void 0===o?void 0:o.video)||void 0===n||n.removeEventListener("loadedmetadata",_e),null===(l=null===(a=null===(r=G.current)||void 0===r?void 0:r.element)||void 0===a?void 0:a.video)||void 0===l||l.removeEventListener("contextmenu",je)}}}}),[H,ke]),(0,n.useEffect)((()=>{var e;ie?N.current&&U&&(N.current=!1,oe()):(N.current=!0,null===(e=G.current)||void 0===e||e.pause())}),[U,ie,oe]),(0,n.useEffect)((()=>()=>{_(le(G.current,t))}),[]),(0,n.useEffect)((()=>()=>{var e,t,i,o,n;Q.shouldUpLoad&&(Q.clearTotalPlayTimer(),Q.handleDataBeforeSend(),Q.slardarVideoFinishedReport(Q.createMetrics(),A,{playerMode:"single"})),Q.resetMetrics(),q(!1),(null===(t=null===(e=G.current)||void 0===e?void 0:e.element)||void 0===t?void 0:t.cancelPreloadTask)&&(null===(o=null===(i=G.current)||void 0===i?void 0:i.element)||void 0===o||o.cancelPreloadTask()),null===(n=G.current)||void 0===n||n.release(),G.current=null,null==j||j(!1)}),[e,t,i,j]),(0,S.tZ)("div",Object.assign({id:`xgwrapper-${i}-${e}`,className:"xgplayer-container"},{children:4===i&&w?(0,S.tZ)("track",{default:!0,kind:"subtitles",srclang:w.language,src:w.url}):null}))})));var de=i(96082),ce=i(58854);const ue=(0,n.memo)((0,n.forwardRef)((function({poster:e,lazyLoading:t=!0,horizontal:i,playUrl:b,id:y,teaParams:_,index:S,mode:C,itemMute:P,desc:T,duration:I,playbackRate:D=1,onVideoPause:O=j(),onVideoPlaying:R=j(),onVideoPlay:M,onVideoEnded:B,onVideoError:L,onTimeUpdate:Z,onVideoInit:E=j(),e2eTag:F,subtitleStruct:z,disableDownload:A=!0,volumeInfo:U=j(),useBitrate:V,bitrateInfo:W,bitrate:H,posterStyle:q,playModeForTea:N,autoPlay:G=!0,autoReplay:$=!0},Y){const{currentVideo:Q,playProgress:J}=(0,a.mp)(u.f),K=(0,l.fz)(s.ec),X=(0,l.fz)(d.k),ee=(0,l.fz)(c.KF),te=(0,n.useRef)(null),ie=(0,n.useRef)(null),[oe,ne]=(0,n.useState)(!1),[re,ae]=(0,n.useState)(b),le=null!=N?N:C;(0,n.useEffect)((()=>{const{id:e,mode:t}=null!=Q?Q:{};e===y&&C===t||ae(b)}),[Q,y,C,b]);const ue=(0,n.useCallback)((()=>{var e,t;try{null===(t=null===(e=te.current)||void 0===e?void 0:e.play)||void 0===t||t.call(e)}catch(e){}}),[]),pe=(0,n.useCallback)((()=>{var e,t;null===(t=null===(e=te.current)||void 0===e?void 0:e.pause)||void 0===t||t.call(e)}),[]),he=(0,n.useMemo)((()=>{if(!Q)return!1;const{id:e,index:t,mode:i}=Q;return e===y&&t===S&&i===C}),[y,S,C,Q]);(0,n.useImperativeHandle)(Y,(()=>({play:()=>{ue(),ie.current=!0},pause:()=>{pe(),ie.current=!1,K.triggerPause({enter_method:"click_pause",playMode:le})},seek:e=>{var t;null===(t=te.current)||void 0===t||t.seek(e)},seekTime:e=>{var t;null===(t=te.current)||void 0===t||t.seekTime(e)},onSeeked:e=>{var t;null===(t=te.current)||void 0===t||t.onSeeked(e)},onSeeking:e=>{var t;null===(t=te.current)||void 0===t||t.onSeeking(e)},onTimeUpdate:e=>{var t;null===(t=te.current)||void 0===t||t.onTimeUpdate(e)},getFullscreen:e=>{var t;null===(t=te.current)||void 0===t||t.getFullscreen(e)},exitFullscreen:e=>{var t;null===(t=te.current)||void 0===t||t.exitFullscreen(e)},replay:()=>{var e;null===(e=te.current)||void 0===e||e.replay()},get currentTime(){var e,t;return null!==(t=null===(e=te.current)||void 0===e?void 0:e.getPlayerAttributes().currentTime)&&void 0!==t?t:0},get duration(){var e,t;return null!==(t=null===(e=te.current)||void 0===e?void 0:e.getPlayerAttributes().duration)&&void 0!==t?t:0},get currentCanPlay(){return he&&oe}})),[oe,he,pe,ue,K,le]),(0,n.useEffect)((()=>{he||ne(!1)}),[he]);const ve=(0,h.Mz)();(0,n.useEffect)((()=>{var e;const t=null===ie.current||ie.current,{ended:i}=(0,v.m7)(null===(e=te.current)||void 0===e?void 0:e.getPlayerAttributes());ve&&t&&G&&(!i||$)?ue():(pe(),he&&!ve&&K.triggerPause({enter_method:"switch_tab",playMode:le}))}),[G,ve,ue,pe,K,he,le,$]);const ge=(0,m.S1)(y),me=(0,n.useMemo)((()=>{var e;const{videoQuality:t}=(0,v.m7)(null===(e=te.current)||void 0===e?void 0:e.getPlayerAttributes()),{definition:i}=_;return(0,de.Yr)(t,i)}),[_]),be=(0,n.useCallback)((()=>{var e;const t=(0,v.m7)(null===(e=te.current)||void 0===e?void 0:e.getPlayerAttributes()),{videoBitrate:i,videoQuality:o}=t,n=(0,f.__rest)(t,["videoBitrate","videoQuality"]),{bitrate:r,author_id:a,format:l,encodedType:s,videoQuality:d,encodeUserTag:c,codecType:u,secret:p,forFriend:h,definition:g}=_;return Object.assign(Object.assign({id:y,authorId:a,playMode:le,bitrate:null!=i?i:r,format:l,encodedType:s,videoQuality:d,encodeUserTag:c,codecType:u,definition:me,secret:p,forFriend:h,originalDefinition:g},null!=n?n:{}),ge)}),[y,_,me,le,ge]),{mute:xe}=(0,a.mp)(p.x),ye=(0,n.useMemo)((()=>{const{group_id:e,author_id:t,is_scheduled:i,search_id:o,search_keyword:n,search_result_id:r,question_id:a,collection_id:l,collection_name:s,isPaidPartnership:d,poi_id:c}=_;return Object.assign({itemId:e,authorId:t,isScheduled:Boolean(i),autoplayStatus:1,searchId:o,searchKeyword:n,searchResultId:r,questionId:a,playMode:le,isMute:xe,collectionId:l,collectionName:s,isPaidPartnership:Boolean(d),poiId:c},ge)}),[xe,_,le,ge]),fe=(0,n.useCallback)((()=>{var e;const{currentTime:t=0,duration:i=0}=(0,v.m7)(null===(e=te.current)||void 0===e?void 0:e.getPlayerAttributes());return Object.assign(Object.assign({},ye),{currentTime:t,duration:i})}),[ye]),{loading:_e,handleCanPlayWithLoading:je,handlePauseWithLoading:ke,handlePlayingWithLoading:we,handleWaitingWithLoading:Se}=(0,h.Fk)({isCurrentVideo:he}),Ce=(0,n.useCallback)((()=>{X.handleLoadStart(be())}),[X,be]),Pe=(0,n.useCallback)((()=>{X.handleLoadedData(be())}),[X,be]),Te=(0,n.useCallback)((()=>{je(),ne(!0),null==E||E(!0),ee.getCurrentPageReport()||(ee.reportVideoFirstScreen({endTime:Date.now(),videoSource:re}),ee.reportVideoAddition({endTime:Date.now(),videoSource:re}))}),[je,E,ee,re]),Ie=(0,n.useCallback)((e=>{X.handlePlay(),null==M||M(e)}),[X,M]),De=(0,n.useCallback)((()=>{var e;const{currentTime:t=0,duration:i=0,needFilterFallbackCase:o,resetNeedFilterFallbackCase:n,videoType:r,playerType:a}=(0,v.m7)(null===(e=te.current)||void 0===e?void 0:e.getPlayerAttributes()),l=(0,w.Ld)(),{byteLength:s,duration:d}=l.getPreloadCacheInfo(y);K.handleTimeUpdate(fe()),X.handleTimeUpdate(Object.assign(Object.assign({},be()),{preload_size:s,preload_time:d,video_type:r,player_type:a,should_filter:o,bitrateInfo:W})),ee.getFirstFrameReport()||ee.reportVideoFirstFrame(t),o&&(null==n||n()),null==Z||Z(t/i)}),[K,fe,X,be,ee,Z,y,W]),Oe=(0,h.A4)(),Re=(0,n.useCallback)((e=>{var t;null==L||L(e),Oe(null===(t=te.current)||void 0===t?void 0:t.getPlayerAttributes()),K.handleError(ye),X.handleError(be())}),[L,Oe,K,ye,X,be]),Me=(0,n.useCallback)((e=>{O(e),ke(),X.handlePause(be()),K.handlePause(fe())}),[O,ke,X,be,K,fe]),Be=(0,n.useCallback)((e=>{R(e),we(),ee.reportVideoInteract({endTime:Date.now(),videoSource:re})}),[R,we,ee,re]),Le=(0,n.useCallback)((()=>{var e,t;Se();const i=be(),{buffered:o,currentTime:n=0,duration:r=0}=i,a=(null!==(e=null==o?void 0:o.length)&&void 0!==e?e:0)>0&&null!==(t=null==o?void 0:o.start(0))&&void 0!==t?t:0;Math.abs(a-n)<.5||Math.abs(r-n)<.5||(K.handleWaiting(fe()),X.handleWaiting(be()))}),[fe,be,Se,K,X]),Ze=(0,n.useCallback)((e=>{null==B||B(e),K.handleEnded(ye),X.handleEnded()}),[B,K,ye,X]),Ee=(0,n.useCallback)((e=>{const t=(0,w.Ld)(),{byteLength:i,duration:o}=t.getPreloadCacheInfo(y);K.handlePlayTime(ye),X.reset(y,Object.assign(Object.assign(Object.assign({},be()),e),{preload_size:i,preload_time:o}))}),[be,y,K,ye,X]),Fe=(0,n.useCallback)((()=>{k.s.handleContextMenu({is_menu_show:A?0:1})}),[A]);(0,n.useEffect)((()=>{he||null==O||O({})}),[he,O]);const ze=(0,n.useCallback)((()=>{null==E||E()}),[E]),Ae=i||2===C||3===C||4===C||6===C||5===C,Ue=(0,n.useMemo)((()=>{const{videoQuality:e,definition:t}=_;return e&&t?`${e}_${t.substring(0,t.length-1)}_0`:"unknown_definition_from_xgpreload_config"}),[_]),{bitrateConfig:Ve}=(0,v.m7)((0,ce.h)((()=>["bitrateConfig"]),[])),{normalizationVid:We,playbackNormalizePath:He}=(0,r.FH)(),qe=(0,l.fz)(w.Re),Ne=qe.getPreloadUrls(),Ge=(0,h.vN)(Ne,Ue),{xgplayerInitHost:$e}=(0,r.Yf)(),{videoOrder:Ye}=(0,r.PT)();return(0,o.jsxs)(x.wu,Object.assign({horizontal:i,mode:C},{children:[e?(0,o.jsx)(x.TF,{horizontal:Ae,mode:C,src:e,alt:T,loading:t?"lazy":"eager",style:q},void 0):null,he&&(0,o.jsxs)(x.Kp,Object.assign({horizontal:Ae,"data-e2e":F},{children:[(0,o.jsx)(se,{ref:te,id:y,url:re,playbackRate:D,mode:C,muteSetting:P||g.PA[C].forceMute,defaultMute:g.PA[C].defaultMute,playProgress:null!=J?J:0,duration:I,onUnmount:Ee,onLoadStart:Ce,onLoadedData:Pe,onTimeUpdate:De,onError:Re,onCanPlay:Te,onPause:Me,onPlay:Ie,onPlaying:Be,onWaiting:Le,onEnded:Ze,onVideoChange:ze,onContextMenu:Fe,subtitleStruct:z,disableDownload:A,volumeInfo:U,useBitrate:V,bitrateInfo:W,defaultDefinition:Ue,bitrateConfig:Ve,preloader:qe,normalizationVid:We,playbackNormalizePath:He,preloadUrlsList:Ge,xgplayerInitHost:$e,defaultBitrate:H,videoOrder:Ye,teaParams:_,autoPlay:G,autoReplay:$},void 0),_e&&(0,o.jsx)(x.Nm,{},void 0)]}),void 0)]}),void 0)}))),pe=(0,n.memo)((0,n.forwardRef)((function(e,t){const i=(0,n.useRef)(null);(0,n.useImperativeHandle)(t,(()=>({play:()=>{var e,t;(null===(e=i.current)||void 0===e?void 0:e.play)&&(null===(t=i.current)||void 0===t||t.play())},pause:()=>{var e,t;(null===(e=i.current)||void 0===e?void 0:e.pause)&&(null===(t=i.current)||void 0===t||t.pause())},seek:e=>{var t,o;(null===(t=i.current)||void 0===t?void 0:t.seek)&&(null===(o=i.current)||void 0===o||o.seek(e))},seekTime:e=>{var t,o;(null===(t=i.current)||void 0===t?void 0:t.seekTime)&&(null===(o=i.current)||void 0===o||o.seekTime(e))},onSeeked:e=>{var t,o;(null===(t=i.current)||void 0===t?void 0:t.onSeeked)&&(null===(o=i.current)||void 0===o||o.onSeeked(e))},onSeeking:e=>{var t,o;(null===(t=i.current)||void 0===t?void 0:t.onSeeking)&&(null===(o=i.current)||void 0===o||o.onSeeking(e))},onTimeUpdate:e=>{var t,o;(null===(t=i.current)||void 0===t?void 0:t.onTimeUpdate)&&(null===(o=i.current)||void 0===o||o.onTimeUpdate(e))},getFullscreen:e=>{var t;null===(t=i.current)||void 0===t||t.getFullscreen(e)},exitFullscreen:e=>{var t;null===(t=i.current)||void 0===t||t.exitFullscreen(e)},replay:()=>{var e,t;(null===(e=i.current)||void 0===e?void 0:e.replay)&&(null===(t=i.current)||void 0===t||t.replay())},get currentTime(){var e,t;return null!==(t=null===(e=i.current)||void 0===e?void 0:e.currentTime)&&void 0!==t?t:0},get duration(){var e,t;return null!==(t=null===(e=i.current)||void 0===e?void 0:e.duration)&&void 0!==t?t:0},get currentCanPlay(){var e,t;return null!==(t=null===(e=i.current)||void 0===e?void 0:e.currentCanPlay)&&void 0!==t&&t}})));const{isUseNativePlayer:a,isUseAdaptBitrate:l}=(0,r.It)();return a?(0,o.jsx)(y,Object.assign({},e,{ref:i}),void 0):(0,o.jsx)(ue,Object.assign({},e,{useBitrate:l,ref:i}),void 0)})))},21103:(e,t,i)=>{i.d(t,{wu:()=>r,TF:()=>a,Kp:()=>l,Nm:()=>s,Ex:()=>d});var o=i(32913),n=i(99116);const r=(0,o.Z)("div",{target:"e1yey0rl0"})((({horizontal:e,mode:t,theme:{colors:i}})=>[{width:"100%",height:"100%",overflow:"hidden",position:"relative",backgroundColor:i.BGPlaceholderDefault,backgroundSize:e?"contain":"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},2===t||1===t||3===t||5===t?{display:"flex",alignItems:"center",justifyContent:"center"}:null]),"label:DivContainer;"),a=(0,o.Z)("img",{target:"e1yey0rl1"})((({horizontal:e,mode:t})=>2!==t&&3!==t&&4!==t&&5!==t?{width:"100%",height:"100%",objectFit:"cover"}:{width:"100%",height:"100%",objectFit:e?"contain":"cover"}),"label:ImgPoster;"),l=(0,o.Z)("div",{target:"e1yey0rl2"})((({horizontal:e=!0})=>({position:"absolute",left:0,top:0,width:"100%",height:"100%","& .xgplayer video":{display:"block",width:"100%",height:"100%",objectFit:e?"contain":"cover"}})),"label:DivBasicPlayerWrapper;"),s=(0,o.Z)(n.g,{target:"e1yey0rl3"})({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},"label:StyledLoading;"),d=(0,o.Z)("video",{target:"e1yey0rl4"})((({horizontal:e})=>({display:"block",width:"100%",height:"100%",objectFit:e?"contain":"cover"})),"label:VideoBasic;")},43929:(e,t,i)=>{i.d(t,{Q:()=>s});var o=i(9236),n=i(93179),r=i(26641),a=i(66599),l=i(78772);function s({item:e,onShow:t}){var i,s,d,c;const{lang:u}=(0,o.mp)(r.G,{selector:e=>({lang:e.lang}),dependencies:[]}),p=(0,o.mp)(a.z,{selector:t=>{var i,o,n;return null!==(n=null===(o=t.users[null!==(i=null==e?void 0:e.author)&&void 0!==i?i:""])||void 0===o?void 0:o.id)&&void 0!==n?n:""},dependencies:[null==e?void 0:e.author]}),h=(0,o.mp)(a.z,{selector:t=>{var i;return t.users[null!==(i=null==e?void 0:e.author)&&void 0!==i?i:""]},dependencies:[null==e?void 0:e.author]}),v=(0,l.K$)(e),{handleShowReport:g}=(0,n.Qi)({onShow:t,reportTarget:Object.assign({lang:u,object_id:null!==(i=null==e?void 0:e.id)&&void 0!==i?i:"",owner_id:p,object_owner_id:p,nickname:null!==(s=null==e?void 0:e.nickname)&&void 0!==s?s:null==e?void 0:e.author,video_id:null!==(d=null==e?void 0:e.id)&&void 0!==d?d:"",video_owner:h,report_type:"video",poi_id:null===(c=null==e?void 0:e.poi)||void 0===c?void 0:c.id},v)});return g}},13006:(e,t,i)=>{i.d(t,{SV:()=>o});const o=["AT","BE","BG","HR","CY","CZ","DE","DK","EE","EL","FI","FR","GB","GR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","SE","NO","IS","LI"]},90298:(e,t,i)=>{i.d(t,{V:()=>r});var o,n=i(95872);!function(e){e.EnterText="enter_text",e.CloseText="close_text"}(o||(o={}));const r={handleEnterText:e=>{n.W.event("enter_text",e)},handleCloseText:e=>{n.W.event("close_text",e)}}},4180:(e,t,i)=>{i.d(t,{s:()=>r});var o,n=i(95872);!function(e){e.RightClickVideo="right_click_video"}(o||(o={}));const r={handleContextMenu:e=>{n.W.event("right_click_video",e)}}},63553:(e,t,i)=>{i.d(t,{Z:()=>a});var o,n=i(64047),r=i(95872);!function(e){e.ShowProgressBar="show_progress_bar",e.ClickProgressBar="click_progress_bar"}(o||(o={}));const a={handleSeekBarAutoShow:e=>{r.W.event("show_progress_bar",Object.assign(Object.assign({},e),{show_method:"preview"}))},handleSeekBarClick:e=>{var{fromPercent:t,toPercent:i,video_length:o}=e,a=(0,n.__rest)(e,["fromPercent","toPercent","video_length"]);const l=i>t?"front":"back",s=o*t,d=o*i;r.W.event("click_progress_bar",Object.assign({action_type:l,seek_from:s,seek_to:d,video_length:o},a))}}},84095:(e,t,i)=>{i.d(t,{X:()=>p});var o=i(11040),n=i(91051),r=i(35417),a=i(7998),l=i(36488);const s=(0,a.Z)("label",{target:"e8efyri0"})((({theme:e})=>({display:"flex",fontFamily:e.fontFamilies.Proxima,fontWeight:e.fontWeights.normal,fontSize:"14px",color:e.colors.TextPrimary,cursor:"pointer"})),"label:LabelCheckbox;"),d=(0,a.Z)("div",{target:"e8efyri1"})({color:"#fff",position:"relative"},"label:DivCheckboxSymbol;"),c=(0,a.Z)("input",{target:"e8efyri2"})((({selected:e,theme:t,theme:{direction:i}})=>[Object.assign({appearance:"none",border:`1.5px solid ${t.colors.LineSecondary}`,margin:"0 0 -2.5px 0",cursor:"pointer"},e?{border:"none",backgroundColor:t.colors.Primary}:{}),(0,l.YJ)({direction:i,marginEnd:4})]),"label:InputCheckbox;"),u=(0,a.Z)("div",{target:"e8efyri3"})((({theme:{direction:e}})=>[{pointerEvents:"none",position:"absolute",top:"3px"},(0,l.YJ)({direction:e,start:3})]),"label:DivCheckboxIcon;"),p=(0,n.memo)((function({id:e,value:t,label:i,size:a=16,isCircle:l=!0,disabled:p,style:h,e2eTag:v,onChange:g}){const m=a,b=a-6,x=(0,n.useCallback)((e=>{null==g||g(e.target.checked)}),[g]);return(0,o.jsxs)(s,Object.assign({htmlFor:e,style:h,"data-e2e":v},{children:[(0,o.jsxs)(d,Object.assign({className:"checkbox-symbol"+(t?" selected":"")},{children:[(0,o.jsx)(c,{style:{width:m,height:m,borderRadius:l?m/2:0},selected:t,id:e,checked:t,type:"checkbox",disabled:p,onChange:x},void 0),t&&(0,o.jsx)(u,Object.assign({style:{width:b,height:b}},{children:(0,o.jsx)(r.Z,{width:b,height:b},void 0)}),void 0)]}),void 0),i]}),void 0)}))},81748:(e,t,i)=>{i.d(t,{Z:()=>o});const o=[{emoji:"😀",alias:"grinning"},{emoji:"😃",alias:"smiley"},{emoji:"😄",alias:"smile"},{emoji:"😁",alias:"grin"},{emoji:"😆",alias:"laughing"},{emoji:"😅",alias:"sweat_smile"},{emoji:"🤣",alias:"rofl"},{emoji:"😂",alias:"joy"},{emoji:"🙂",alias:"slightly_smiling_face"},{emoji:"🙃",alias:"upside_down_face"},{emoji:"😉",alias:"wink"},{emoji:"😊",alias:"blush"},{emoji:"😇",alias:"innocent"},{emoji:"😍",alias:"heart_eyes"},{emoji:"😘",alias:"kissing_heart"},{emoji:"😗",alias:"kissing"},{emoji:"😚",alias:"kissing_closed_eyes"},{emoji:"😙",alias:"kissing_smiling_eyes"},{emoji:"😋",alias:"yum"},{emoji:"😛",alias:"stuck_out_tongue"},{emoji:"😜",alias:"stuck_out_tongue_winking_eye"},{emoji:"😝",alias:"stuck_out_tongue_closed_eyes"},{emoji:"🤑",alias:"money_mouth_face"},{emoji:"🤗",alias:"hugs"},{emoji:"🤔",alias:"thinking"},{emoji:"🤐",alias:"zipper_mouth_face"},{emoji:"😐",alias:"neutral_face"},{emoji:"😑",alias:"expressionless"},{emoji:"😶",alias:"no_mouth"},{emoji:"😏",alias:"smirk"},{emoji:"😒",alias:"unamused"},{emoji:"🙄",alias:"roll_eyes"},{emoji:"😬",alias:"grimacing"},{emoji:"🤥",alias:"lying_face"},{emoji:"😌",alias:"relieved"},{emoji:"😔",alias:"pensive"},{emoji:"😪",alias:"sleepy"},{emoji:"🤤",alias:"drooling_face"},{emoji:"😴",alias:"sleeping"},{emoji:"😷",alias:"mask"},{emoji:"🤒",alias:"face_with_thermometer"},{emoji:"🤕",alias:"face_with_head_bandage"},{emoji:"🤢",alias:"nauseated_face"},{emoji:"🤧",alias:"sneezing_face"},{emoji:"😵",alias:"dizzy_face"},{emoji:"🤠",alias:"cowboy_hat_face"},{emoji:"😎",alias:"sunglasses"},{emoji:"🤓",alias:"nerd_face"},{emoji:"😕",alias:"confused"},{emoji:"😟",alias:"worried"},{emoji:"🙁",alias:"slightly_frowning_face"},{emoji:"😮",alias:"open_mouth"},{emoji:"😯",alias:"hushed"},{emoji:"😲",alias:"astonished"},{emoji:"😳",alias:"flushed"},{emoji:"😦",alias:"frowning"},{emoji:"😧",alias:"anguished"},{emoji:"😨",alias:"fearful"},{emoji:"😰",alias:"cold_sweat"},{emoji:"😥",alias:"disappointed_relieved"},{emoji:"😢",alias:"cry"},{emoji:"😭",alias:"sob"},{emoji:"😱",alias:"scream"},{emoji:"😖",alias:"confounded"},{emoji:"😣",alias:"persevere"},{emoji:"😞",alias:"disappointed"},{emoji:"😓",alias:"sweat"},{emoji:"😩",alias:"weary"},{emoji:"😫",alias:"tired_face"},{emoji:"😤",alias:"triumph"},{emoji:"😡",alias:"rage"},{emoji:"😠",alias:"angry"},{emoji:"😈",alias:"smiling_imp"},{emoji:"👿",alias:"imp"},{emoji:"💀",alias:"skull"},{emoji:"💩",alias:"hankey"},{emoji:"🤡",alias:"clown_face"},{emoji:"👹",alias:"japanese_ogre"},{emoji:"👺",alias:"japanese_goblin"},{emoji:"👻",alias:"ghost"},{emoji:"👽",alias:"alien"},{emoji:"👾",alias:"space_invader"},{emoji:"🤖",alias:"robot"},{emoji:"😺",alias:"smiley_cat"},{emoji:"😸",alias:"smile_cat"},{emoji:"😹",alias:"joy_cat"},{emoji:"😻",alias:"heart_eyes_cat"},{emoji:"😼",alias:"smirk_cat"},{emoji:"😽",alias:"kissing_cat"},{emoji:"🙀",alias:"scream_cat"},{emoji:"😿",alias:"crying_cat_face"},{emoji:"😾",alias:"pouting_cat"}]}}]);