"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[492],{46976:(e,t,n)=>{function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function r(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}n.d(t,{I:()=>g}),n(17021),n(60199),n(34895),n(9776),n(3495),n(36195),n(62180),n(99795),n(96935),n(49979),n(64001),n(84240),n(60100),n(94609),n(14643);n(35537),n(47754),n(434),n(64822),n(8415),n(60386),n(80177),n(67353),n(56441),n(53139),n(1933),n(59605),n(27435),n(95377),n(69610),n(98083),n(35827),n(9903),n(51018),n(34659),n(43170),n(3708),n(78900),n(10391),n(34721),n(72153),n(51680);var s=Math.pow(2,32);function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(e[t]<<8)+(e[t+1]||0)}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(e[t]<<24>>>0)+(e[t+1]<<16)+(e[t+2]<<8)+(e[t+3]||0)}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return u(e,t)*s+u(e,t+4)}n(71339),n(68068),n(9441),n(15324);var l,d,f,h="undefined"!=typeof window,v=h&&navigator.userAgent.toLocaleLowerCase(),p=(h&&/^((?!chrome|android).)*safari/.test(v),h&&v.includes("firefox")),m=h&&v.includes("android"),y=function(){function e(){i(this,e)}return r(e,null,[{key:"getRateIndexByRate",value:function(t){return e.FREQ.indexOf(t)}},{key:"parseADTS",value:function(t,n){for(var i=t.length,a=0;a+2<i&&(255!==t[a]||240!=(246&t[a+1]));)a++;if(!(a>=i)){var r=a,s=[],o=(60&t[a+2])>>>2,u=e.FREQ[o];if(!u)throw new Error("Invalid sampling index: ".concat(o));for(var c,l,d=1+((192&t[a+2])>>>6),f=(1&t[a+2])<<2|(192&t[a+3])>>>6,h=e._getConfig(o,f,d),v=h.config,p=h.codec,m=0,y=e.getFrameDuration(u);a+7<i;)if(255===t[a]&&240==(246&t[a+1])){if(i-a<(l=(3&t[a+3])<<11|t[a+4]<<3|(224&t[a+5])>>5))break;c=2*(1&~t[a+1]),s.push({pts:n+m*y,data:t.subarray(a+7+c,a+l)}),m++,a+=l}else a++;return{skip:r,remaining:a>=i?void 0:t.subarray(a),frames:s,samplingFrequencyIndex:o,sampleRate:u,objectType:d,channelCount:f,codec:p,config:v,originCodec:"mp4a.40.".concat(d)}}}},{key:"parseAudioSpecificConfig",value:function(t){if(t.length){var n=t[0]>>>3,i=(7&t[0])<<1|t[1]>>>7,a=(120&t[1])>>>3,r=e.FREQ[i];if(!r)throw new Error("Invalid sampling index: ".concat(i));var s=e._getConfig(i,a,n);return{samplingFrequencyIndex:i,sampleRate:r,objectType:n,channelCount:a,config:s.config,codec:s.codec,originCodec:"mp4a.40.".concat(n)}}}},{key:"getFrameDuration",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:9e4;return 1024*t/e}},{key:"_getConfig",value:function(e,t,n){var i,a,r=[];return p?e>=6?(i=5,a=e-3):(i=2,a=e):m?(i=2,a=e):(i=2===n||5===n?n:5,a=e,e>=6?a=e-3:1===t&&(i=2,a=e)),r[0]=i<<3,r[0]|=(14&e)>>1,r[1]=(1&e)<<7,r[1]|=t<<3,5===i&&(r[1]|=(14&a)>>1,r[2]=(1&a)<<7,r[2]|=8,r[3]=0),{config:r,codec:"mp4a.40.".concat(i)}}},{key:"getSilentFrame",value:function(e,t){if("mp4a.40.2"===e){if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}}}]),e}();f=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],(d="FREQ")in(l=y)?Object.defineProperty(l,d,{value:f,enumerable:!0,configurable:!0,writable:!0}):l.FREQ=f;var g=function(){function e(){i(this,e)}return r(e,null,[{key:"findBox",value:function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=[];if(!t)return a;for(var r=0,s="",o=0;t.length>7;){if(r=u(t),s=String.fromCharCode.apply(null,t.subarray(4,8)),o=8,1===r?(r=c(t,8),o+=8):r||(r=t.length),!n[0]||s===n[0]){var l=t.subarray(0,r);if(!(n.length<2))return e.findBox(l.subarray(o),n.slice(1),i+o);a.push({start:i,size:r,headerSize:o,type:s,data:l})}i+=r,t=t.subarray(r)}return a}},{key:"tfhd",value:function(e){return _(e,!0,(function(e,t){e.trackId=u(t);var n=4,i=1&e.flags,a=2&e.flags,r=8&e.flags,s=16&e.flags,o=32&e.flags;i&&(n+=4,e.baseDataOffset=u(t,n),n+=4),a&&(e.sampleDescriptionIndex=u(t,n),n+=4),r&&(e.defaultSampleDuration=u(t,n),n+=4),s&&(e.defaultSampleSize=u(t,n),n+=4),o&&(e.defaultSampleFlags=u(t,n))}))}},{key:"sidx",value:function(e){return _(e,!0,(function(e,t){var n=0;e.reference_ID=u(t,n),n+=4,e.timescale=u(t,n),n+=4,0===e.version?(e.earliest_presentation_time=u(t,n),n+=4,e.first_offset=u(t,n),n+=4):(e.earliest_presentation_time=c(t,n),n+=8,e.first_offset=c(t,n),n+=8),n+=2,e.references=[];var i=o(t,n);n+=2;for(var a=0;a<i;a++){var r={};e.references.push(r);var s=u(t,n);n+=4,r.reference_type=s>>31&1,r.referenced_size=2147483647&s,r.subsegment_duration=u(t,n),s=u(t,n+=4),n+=4,r.starts_with_SAP=s>>31&1,r.SAP_type=s>>28&7,r.SAP_delta_time=268435455&s}}))}},{key:"moov",value:function(t){return _(t,!1,(function(t,n,i){t.mvhd=e.mvhd(e.findBox(n,["mvhd"],i)[0]),t.trak=e.findBox(n,["trak"],i).map((function(t){return e.trak(t)})),t.pssh=e.pssh(e.findBox(n,["pssh"],i)[0])}))}},{key:"mvhd",value:function(e){return _(e,!0,(function(e,t){var n=0;1===e.version?(e.timescale=u(t,16),e.duration=c(t,20),n+=28):(e.timescale=u(t,8),e.duration=u(t,12),n+=16),e.nextTrackId=u(t,n+76)}))}},{key:"trak",value:function(t){return _(t,!1,(function(t,n,i){t.tkhd=e.tkhd(e.findBox(n,["tkhd"],i)[0]),t.mdia=e.mdia(e.findBox(n,["mdia"],i)[0])}))}},{key:"tkhd",value:function(e){return _(e,!0,(function(e,t){var n=0;1===e.version?(e.trackId=u(t,16),e.duration=c(t,24),n+=32):(e.trackId=u(t,8),e.duration=u(t,16),n+=20),e.width=u(t,n+52),e.height=u(t,n+56)}))}},{key:"mdia",value:function(t){return _(t,!1,(function(t,n,i){t.mdhd=e.mdhd(e.findBox(n,["mdhd"],i)[0]),t.hdlr=e.hdlr(e.findBox(n,["hdlr"],i)[0]),t.minf=e.minf(e.findBox(n,["minf"],i)[0])}))}},{key:"mdhd",value:function(e){return _(e,!0,(function(e,t){var n=0;1===e.version?(e.timescale=u(t,16),e.duration=c(t,20),n+=28):(e.timescale=u(t,8),e.duration=u(t,12),n+=16);var i=o(t,n);e.language=String.fromCharCode(96+(i>>10&31),96+(i>>5&31),96+(31&i))}))}},{key:"hdlr",value:function(e){return _(e,!0,(function(e,t){0===e.version&&(e.handlerType=String.fromCharCode.apply(null,t.subarray(4,8)))}))}},{key:"minf",value:function(t){return _(t,!1,(function(t,n,i){t.vmhd=e.vmhd(e.findBox(n,["vmhd"],i)[0]),t.smhd=e.smhd(e.findBox(n,["smhd"],i)[0]),t.stbl=e.stbl(e.findBox(n,["stbl"],i)[0])}))}},{key:"vmhd",value:function(e){return _(e,!0,(function(e,t){e.graphicsmode=o(t),e.opcolor=[o(t,2),o(t,4),o(t,6)]}))}},{key:"smhd",value:function(e){return _(e,!0,(function(e,t){e.balance=o(t)}))}},{key:"stbl",value:function(t){return _(t,!1,(function(t,n,i){t.stsd=e.stsd(e.findBox(n,["stsd"],i)[0]),t.stts=e.stts(e.findBox(n,["stts"],i)[0]),t.ctts=e.ctts(e.findBox(n,["ctts"],i)[0]),t.stsc=e.stsc(e.findBox(n,["stsc"],i)[0]),t.stsz=e.stsz(e.findBox(n,["stsz"],i)[0]),t.stco=e.stco(e.findBox(n,["stco"],i)[0]),t.stco||(t.co64=e.co64(e.findBox(n,["co64"],i)[0]),t.stco=t.co64),t.stss=e.stss(e.findBox(n,["stss"],i)[0]),t.senc=e.senc(e.findBox(n,["senc"],i)[0])}))}},{key:"senc",value:function(e){return _(e,!0,(function(e,t){var n=0,i=u(t,n);n+=4,e.samples=[];for(var a=0;a<i;a++){var r={};if(r.InitializationVector=[t[n],t[n+1],t[n+2],t[n+3],t[n+4],t[n+5],t[n+6],t[n+7]],n+=8,2&e.flags){r.subsamples=[];var s=o(t,n);n+=2;for(var c=0;c<s;c++){var l={};l.BytesOfClearData=o(t,n),n+=2,l.BytesOfProtectedData=u(t,n),n+=4,r.subsamples.push(l)}}e.samples.push(r)}}))}},{key:"pssh",value:function(e){return _(e,!0,(function(e,t){for(var n=[],i=[],a=0,r=0;r<16;r++)i.push(S(t[a+r]));if(a+=16,e.version>0){var s=u(t,a);a+=4;for(var o=0;o<(""+s).length;o++)for(var c=0;c<16;c++){var l=t[a];a+=1,n.push(S(l))}}var d=u(t,a);e.data_size=d,a+=4,e.kid=n,e.system_id=i,e.buffer=t}))}},{key:"stsd",value:function(t){return _(t,!0,(function(t,n,i){t.entryCount=u(n),t.entries=e.findBox(n.subarray(4),[],i+4).map((function(t){switch(t.type){case"avc1":case"avc2":case"avc3":case"avc4":return e.avc1(t);case"hvc1":case"hev1":return e.hvc1(t);case"mp4a":return e.mp4a(t);case"alaw":case"ulaw":return e.alaw(t);case"enca":return _(t,!1,(function(t,n,i){t.channelCount=o(n,16),t.samplesize=o(n,18),t.sampleRate=u(n,24)/65536,n=n.subarray(28),t.sinf=e.sinf(e.findBox(n,["sinf"],i)[0]),t.esds=e.esds(e.findBox(n,["esds"],i)[0])}));case"encv":return _(t,!1,(function(t,n,i){t.width=o(n,24),t.height=o(n,26),t.horizresolution=u(n,28),t.vertresolution=u(n,32),n=n.subarray(78),t.sinf=e.sinf(e.findBox(n,["sinf"],i)[0]),t.avcC=e.avcC(e.findBox(n,["avcC"],i)[0]),t.hvcC=e.hvcC(e.findBox(n,["hvcC"],i)[0]),t.pasp=e.pasp(e.findBox(n,["pasp"],i)[0])}))}})).filter(Boolean)}))}},{key:"tenc",value:function(e){return _(e,!1,(function(e,t){var n=6;e.default_IsEncrypted=t[n],n+=1,e.default_IV_size=t[n],n+=1,e.default_KID=[];for(var i=0;i<16;i++)e.default_KID.push(S(t[n])),n+=1}))}},{key:"schi",value:function(t){return _(t,!1,(function(t,n,i){t.tenc=e.tenc(e.findBox(n,["tenc"],i)[0])}))}},{key:"sinf",value:function(t){return _(t,!1,(function(t,n,i){t.schi=e.schi(e.findBox(n,["schi"],i)[0]),t.frma=e.frma(e.findBox(n,["frma"],i)[0])}))}},{key:"frma",value:function(e){return _(e,!1,(function(e,t){e.data_format="";for(var n=0;n<4;n++)e.data_format+=String.fromCharCode(t[n])}))}},{key:"avc1",value:function(t){return _(t,!1,(function(t,n,i){var a=b(t,n),r=n.subarray(a);i+=a,t.avcC=e.avcC(e.findBox(r,["avcC"],i)[0]),t.pasp=e.pasp(e.findBox(r,["pasp"],i)[0])}))}},{key:"avcC",value:function(e){return _(e,!1,(function(e,t){e.configurationVersion=t[0],e.AVCProfileIndication=t[1],e.profileCompatibility=t[2],e.AVCLevelIndication=t[3],e.codec=function(e){for(var t,n="avc1.",i=0;i<3;i++)(t=e[i].toString(16)).length<2&&(t="0".concat(t)),n+=t;return n}([t[1],t[2],t[3]]),e.lengthSizeMinusOne=3&t[4],e.spsLength=31&t[5],e.sps=[];for(var n=6,i=0;i<e.spsLength;i++){var a=o(t,n);n+=2,e.sps.push(t.subarray(n,n+a)),n+=a}e.ppsLength=t[n],n+=1,e.pps=[];for(var r=0;r<e.ppsLength;r++){var s=o(t,n);n+=2,e.pps.push(t.subarray(n,n+=s)),n+=s}}))}},{key:"hvc1",value:function(t){return _(t,!1,(function(t,n,i){var a=b(t,n),r=n.subarray(a);i+=a,t.hvcC=e.hvcC(e.findBox(r,["hvcC"],i)[0]),t.pasp=e.pasp(e.findBox(r,["pasp"],i)[0])}))}},{key:"hvcC",value:function(e){return _(e,!1,(function(t,n){t.data=e.data,t.codec="hev1.1.6.L93.B0",t.configurationVersion=n[0];var i=n[1];t.generalProfileSpace=i>>6,t.generalTierFlag=(32&i)>>5,t.generalProfileIdc=31&i,t.generalProfileCompatibility=u(n,2),t.generalConstraintIndicatorFlags=n.subarray(6,12),t.generalLevelIdc=n[12],t.avgFrameRate=o(n,19),t.numOfArrays=n[22],t.vps=[],t.sps=[],t.pps=[];for(var a=23,r=0,s=0,c=0,l=0;l<t.numOfArrays;l++){r=63&n[a],s=o(n,a+1),a+=3;for(var d,f=[],h=0;h<s;h++)c=o(n,a),a+=2,f.push(n.subarray(a,a+c)),a+=c;if(32===r)(d=t.vps).push.apply(d,f);else if(33===r){var v;(v=t.sps).push.apply(v,f)}else if(34===r){var p;(p=t.pps).push.apply(p,f)}}}))}},{key:"pasp",value:function(e){return _(e,!1,(function(e,t){e.hSpacing=u(t),e.vSpacing=u(t,4)}))}},{key:"mp4a",value:function(t){return _(t,!1,(function(t,n,i){var a=x(t,n);t.esds=e.esds(e.findBox(n.subarray(a),["esds"],i+a)[0])}))}},{key:"esds",value:function(e){return _(e,!0,(function(e,t){e.codec="mp4a.";for(var n=0,i=0,a=0,r=0;t.length;){for(r=t[n=0],i=t[n+1],n+=2;128&i;)a=(127&i)<<7,i=t[n],n+=1;if(a+=127&i,3===r)t=t.subarray(n+3);else{if(4!==r){if(5===r){var s=e.config=t.subarray(n,n+a),o=(248&s[0])>>3;return 31===o&&s.length>=2&&(o=32+((7&s[0])<<3)+((224&s[1])>>5)),e.objectType=o,e.codec+=o.toString(16),void("."===e.codec[e.codec.length-1]&&(e.codec=e.codec.substring(0,e.codec.length-1)))}return void("."===e.codec[e.codec.length-1]&&(e.codec=e.codec.substring(0,e.codec.length-1)))}e.codec+=(t[n].toString(16)+".").padStart(3,"0"),t=t.subarray(n+13)}}}))}},{key:"alaw",value:function(e){return _(e,!1,(function(e,t){x(e,t)}))}},{key:"stts",value:function(e){return _(e,!0,(function(e,t){for(var n=u(t),i=[],a=4,r=0;r<n;r++)i.push({count:u(t,a),delta:u(t,a+4)}),a+=8;e.entryCount=n,e.entries=i}))}},{key:"ctts",value:function(e){return _(e,!0,(function(e,t){var n=u(t),i=[],a=4;if(1===e.version)for(var r=0;r<n;r++)i.push({count:u(t,a),offset:u(t,a+4)}),a+=8;else for(var s=0;s<n;s++)i.push({count:u(t,a),offset:-(1+~u(t,a+4))}),a+=8;e.entryCount=n,e.entries=i}))}},{key:"stsc",value:function(e){return _(e,!0,(function(e,t){for(var n=u(t),i=[],a=4,r=0;r<n;r++)i.push({firstChunk:u(t,a),samplesPerChunk:u(t,a+4),sampleDescriptionIndex:u(t,a+8)}),a+=12;e.entryCount=n,e.entries=i}))}},{key:"stsz",value:function(e){return _(e,!0,(function(e,t){var n=u(t),i=u(t,4),a=[];if(!n)for(var r=8,s=0;s<i;s++)a.push(u(t,r)),r+=4;e.sampleSize=n,e.sampleCount=i,e.entrySizes=a}))}},{key:"stco",value:function(e){return _(e,!0,(function(e,t){for(var n=u(t),i=[],a=4,r=0;r<n;r++)i.push(u(t,a)),a+=4;e.entryCount=n,e.entries=i}))}},{key:"co64",value:function(e){return _(e,!0,(function(e,t){for(var n=u(t),i=[],a=4,r=0;r<n;r++)i.push(c(t,a)),a+=8;e.entryCount=n,e.entries=i}))}},{key:"stss",value:function(e){return _(e,!0,(function(e,t){for(var n=u(t),i=[],a=4,r=0;r<n;r++)i.push(u(t,a)),a+=4;e.entryCount=n,e.entries=i}))}},{key:"moof",value:function(t){return _(t,!1,(function(t,n,i){t.mfhd=e.mfhd(e.findBox(n,["mfhd"],i)[0]),t.traf=e.findBox(n,["traf"],i).map((function(t){return e.traf(t)}))}))}},{key:"mfhd",value:function(e){return _(e,!0,(function(e,t){e.sequenceNumber=u(t)}))}},{key:"traf",value:function(t){return _(t,!1,(function(t,n,i){t.tfhd=e.tfhd(e.findBox(n,["tfhd"],i)[0]),t.tfdt=e.tfdt(e.findBox(n,["tfdt"],i)[0]),t.trun=e.trun(e.findBox(n,["trun"],i)[0])}))}},{key:"trun",value:function(e){return _(e,!0,(function(e,t){var n=e.version,i=e.flags,a=t.length,r=e.sampleCount=u(t),s=4;if(a>s&&1&i&&(e.dataOffset=-(1+~u(t,s)),s+=4),a>s&&4&i&&(e.firstSampleFlags=u(t,s),s+=4),e.samples=[],a>s)for(var o,c=0;c<r;c++)o={},256&i&&(o.duration=u(t,s),s+=4),512&i&&(o.size=u(t,s),s+=4),1024&i&&(o.flags=u(t,s),s+=4),2048&i&&(o.cts=n?-(1+~u(t,s+4)):u(t,s),s+=4),e.samples.push(o)}))}},{key:"tfdt",value:function(e){return _(e,!0,(function(e,t){1===e.version?e.baseMediaDecodeTime=c(t):e.baseMediaDecodeTime=u(t)}))}},{key:"probe",value:function(t){return!!e.findBox(t,["ftyp"])}},{key:"parseSampleFlags",value:function(e){return{isLeading:(12&e[0])>>>2,dependsOn:3&e[0],isDependedOn:(192&e[1])>>>6,hasRedundancy:(48&e[1])>>>4,paddingValue:(14&e[1])>>>1,isNonSyncSample:1&e[1],degradationPriority:e[2]<<8|e[3]}}},{key:"moovToTrack",value:function(e,t,n){var i,a,r=e.trak;if(r&&r.length){var s=r.find((function(e){var t,n;return"vide"===(null===(t=e.mdia)||void 0===t||null===(n=t.hdlr)||void 0===n?void 0:n.handlerType)})),o=r.find((function(e){var t,n;return"soun"===(null===(t=e.mdia)||void 0===t||null===(n=t.hdlr)||void 0===n?void 0:n.handlerType)}));if(s&&t){var u,c,l,d,f,h,v,p=t;null!=(null===(u=s.tkhd)||void 0===u?void 0:u.trackId)&&(p.id=s.tkhd.trackId),p.tkhdDuration=s.tkhd.duration,p.mvhdDurtion=e.mvhd.duration,p.mvhdTimecale=e.mvhd.timescale,p.timescale=p.formatTimescale=s.mdia.mdhd.timescale,p.duration=s.mdia.mdhd.duration||p.mvhdDurtion/p.mvhdTimecale*p.timescale;var m,g,k,b,x,_,w,S,A=s.mdia.minf.stbl.stsd.entries[0];if(p.width=A.width,p.height=A.height,A.pasp&&(p.sarRatio=[A.pasp.hSpacing,A.pasp.vSpacing]),A.hvcC)p.codecType="hevc",p.codec=A.hvcC.codec,p.vps=A.hvcC.vps,p.sps=A.hvcC.sps,p.pps=A.hvcC.pps,p.hvcC=A.hvcC.data;else{if(!A.avcC)throw new Error("unknown video stsd entry");p.codec=A.avcC.codec,p.sps=A.avcC.sps,p.pps=A.avcC.pps}p.present=!0,p.ext={},p.ext.stss=null===(c=s.mdia)||void 0===c||null===(l=c.minf)||void 0===l||null===(d=l.stbl)||void 0===d?void 0:d.stss,p.ext.ctts=null===(f=s.mdia)||void 0===f||null===(h=f.minf)||void 0===h||null===(v=h.stbl)||void 0===v?void 0:v.ctts,A&&"encv"===A.type&&(p.isVideoEncryption=!0,A.default_KID=null===(m=A.sinf)||void 0===m||null===(g=m.schi)||void 0===g?void 0:g.tenc.default_KID,A.default_IsEncrypted=null===(k=A.sinf)||void 0===k||null===(b=k.schi)||void 0===b?void 0:b.tenc.default_IsEncrypted,A.default_IV_size=null===(x=A.sinf)||void 0===x||null===(_=x.schi)||void 0===_?void 0:_.tenc.default_IV_size,p.videoSenc=s.mdia.minf.stbl.senc&&s.mdia.minf.stbl.senc.samples,A.data_format=null===(w=A.sinf)||void 0===w||null===(S=w.frma)||void 0===S?void 0:S.data_format,p.useEME=e.useEME,p.kidValue=e.kidValue,p.pssh=e.pssh,p.encv=A)}if(o&&n){var B,C,E,T,I,D,z,U,R,V=n;null!=(null===(B=o.tkhd)||void 0===B?void 0:B.trackId)&&(V.id=o.tkhd.trackId),V.tkhdDuration=o.tkhd.duration,V.mvhdDurtion=e.mvhd.duration,V.mvhdTimecale=e.mvhd.timescale,V.timescale=V.formatTimescale=o.mdia.mdhd.timescale,V.duration=o.mdia.mdhd.duration||V.mvhdDurtion/V.mvhdTimecale*V.timescale;var P,M,O,L,F,N,q,j,H=o.mdia.minf.stbl.stsd.entries[0];switch(V.sampleSize=H.sampleSize,V.sampleRate=H.sampleRate,V.channelCount=H.channelCount,V.present=!0,H.type){case"alaw":V.codecType=V.codec="g7110a",V.sampleRate=8e3;break;case"ulaw":V.codecType=V.codec="g7110m",V.sampleRate=8e3;break;default:V.sampleDuration=y.getFrameDuration(V.sampleRate,V.timescale),V.sampleRateIndex=y.getRateIndexByRate(V.sampleRate),V.objectType=(null===(i=H.esds)||void 0===i?void 0:i.objectType)||2,H.esds&&(V.config=Array.from(H.esds.config)),V.codec=(null===(a=H.esds)||void 0===a?void 0:a.codec)||"mp4a.40.2"}V.sampleDuration=y.getFrameDuration(V.sampleRate,V.timescale),V.objectType=(null===(C=H.esds)||void 0===C?void 0:C.objectType)||2,H.esds&&(H.esds.config?V.config=Array.from(H.esds.config):console.warn("esds config is null")),V.codec=(null===(E=H.esds)||void 0===E?void 0:E.codec)||"mp4a.40.2",V.sampleRateIndex=y.getRateIndexByRate(V.sampleRate),V.ext={},V.ext.stss=null===(T=o.mdia)||void 0===T||null===(I=T.minf)||void 0===I||null===(D=I.stbl)||void 0===D?void 0:D.stss,V.ext.ctts=null===(z=o.mdia)||void 0===z||null===(U=z.minf)||void 0===U||null===(R=U.stbl)||void 0===R?void 0:R.ctts,V.present=!0,H&&"enca"===H.type&&(V.isAudioEncryption=!0,H.data_format=null===(P=H.sinf)||void 0===P||null===(M=P.frma)||void 0===M?void 0:M.data_format,H.default_KID=null===(O=H.sinf)||void 0===O||null===(L=O.schi)||void 0===L?void 0:L.tenc.default_KID,H.default_IsEncrypted=null===(F=H.sinf)||void 0===F||null===(N=F.schi)||void 0===N?void 0:N.tenc.default_IsEncrypted,H.default_IV_size=null===(q=H.sinf)||void 0===q||null===(j=q.schi)||void 0===j?void 0:j.tenc.default_IV_size,V.audioSenc=o.mdia.minf.stbl.senc&&o.mdia.minf.stbl.senc.samples,V.useEME=e.useEME,V.kidValue=e.kidValue,V.enca=H)}if(n&&(n.isVideoEncryption=!!t&&t.isVideoEncryption),t&&(t.isAudioEncryption=!!n&&n.isAudioEncryption),null!=t&&t.encv||null!=n&&n.enca){var Z,K,Q=null==t||null===(Z=t.encv)||void 0===Z?void 0:Z.default_KID,J=null==n||null===(K=n.enca)||void 0===K?void 0:K.default_KID,Y=Q||J?(Q||J).join(""):null;t&&(t.kid=Y),n&&(n.kid=Y)}return t&&(t.flags=3841),n&&(n.flags=1793),{videoTrack:t,audioTrack:n}}}},{key:"evaluateDefaultDuration",value:function(e,t,n){var i,a=null==t||null===(i=t.samples)||void 0===i?void 0:i.length;return a?1024*a/t.timescale*e.timescale/n:1024}},{key:"moofToSamples",value:function(t,n,i){var a={};return t.mfhd&&(n&&(n.sequenceNumber=t.mfhd.sequenceNumber),i&&(i.sequenceNumber=t.mfhd.sequenceNumber)),t.traf.forEach((function(t){var r=t.tfhd,s=t.tfdt,o=t.trun;if(r&&o){s&&(n&&n.id===r.trackId&&(n.baseMediaDecodeTime=s.baseMediaDecodeTime),i&&i.id===r.trackId&&(i.baseMediaDecodeTime=s.baseMediaDecodeTime));var u=r.defaultSampleSize||0,c=r.defaultSampleDuration||e.evaluateDefaultDuration(n,i,o.samples.length||o.sampleCount),l=o.dataOffset||0,d=0,f=-1;if(!o.samples.length&&o.sampleCount){a[r.trackId]=[];for(var h=0;h<o.sampleCount;h++)a[r.trackId].push({offset:l,dts:d,duration:c,size:u}),d+=c,l+=u}else a[r.trackId]=o.samples.map((function(e,t){return(e={offset:l,dts:d,pts:d+(e.cts||0),duration:e.duration||c,size:e.size||u,gopId:f,keyframe:0===t||null!==e.flags&&void 0!==e.flags&&(65536&e.flags)>>>0!=65536}).keyframe&&(f++,e.gopId=f),d+=e.duration,l+=e.size,e}))}})),a}},{key:"moovToSamples",value:function(e){var t=e.trak;if(t&&t.length){var n=t.find((function(e){var t,n;return"vide"===(null===(t=e.mdia)||void 0===t||null===(n=t.hdlr)||void 0===n?void 0:n.handlerType)})),i=t.find((function(e){var t,n;return"soun"===(null===(t=e.mdia)||void 0===t||null===(n=t.hdlr)||void 0===n?void 0:n.handlerType)}));if(n||i){var a,r;if(n){var s,o,u=null===(s=n.mdia)||void 0===s||null===(o=s.minf)||void 0===o?void 0:o.stbl;if(!u)return;var c=u.stts,l=u.stsc,d=u.stsz,f=u.stco,h=u.stss,v=u.ctts;if(!(c&&l&&d&&f&&h))return;a=k(c,l,d,f,v,h)}if(i){var p,m,y,g=null===(p=i.mdia)||void 0===p||null===(m=p.minf)||void 0===m?void 0:m.stbl;if(!g)return;var b=null===(y=i.mdia.mdhd)||void 0===y?void 0:y.timescale,x=g.stts,_=g.stsc,w=g.stsz,S=g.stco;if(!(b&&x&&_&&w&&S))return;r=k(x,_,w,S)}return{videoSamples:a,audioSamples:r}}}}}]),e}();function k(e,t,n,i,a,r){var s,o,u,c=[],l=null==a?void 0:a.entries,d=t.entries,f=i.entries,h=n.entrySizes,v=null==r?void 0:r.entries;v&&(s={},v.forEach((function(e){s[e-1]=!0}))),l&&(o=[],l.forEach((function(e){for(var t=e.count,n=e.offset,i=0;i<t;i++)o.push(n)})));var p=-1,m=0,y=0,g=0,k=0,b=0,x=d[0].samplesPerChunk,_=d[1]?d[1].firstChunk-1:1/0;return e.entries.forEach((function(e){for(var t=e.count,i=e.delta,a=0;a<t;a++)u={dts:m,duration:i,size:h[y]||n.sampleSize,offset:f[g]+b,index:y},v&&(u.keyframe=s[y],u.keyframe&&p++,u.gopId=p),o&&y<o.length&&(u.pts=u.dts+o[y]),c.push(u),m+=i,++y<x?b+=u.size:(g++,b=0,g>=_&&(k++,_=d[k+1]?d[k+1].firstChunk-1:1/0),x+=d[k].samplesPerChunk)})),c}function b(e,t){return e.dataReferenceIndex=o(t,6),e.width=o(t,24),e.height=o(t,26),e.horizresolution=u(t,28),e.vertresolution=u(t,32),e.frameCount=o(t,40),e.depth=o(t,74),78}function x(e,t){return e.dataReferenceIndex=o(t,6),e.channelCount=o(t,16),e.sampleSize=o(t,18),e.sampleRate=u(t,24)/65536,28}function _(e,t,n){if(e){if(e.size!==e.data.length)throw new Error("box ".concat(e.type," size !== data.length"));var i={start:e.start,size:e.size,headerSize:e.headerSize,type:e.type};return t&&(i.version=e.data[e.headerSize],i.flags=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(e[t]<<16)+(e[t+1]<<8)+(e[t+2]||0)}(e.data,e.headerSize+1),i.headerSize+=4),n(i,e.data.subarray(i.headerSize),i.start+i.headerSize),i}}var w=function(e,t,n){for(var i=String(n),a=t>>0,r=Math.ceil(a/i.length),s=[],o=String(e);r--;)s.push(i);return s.join("").substring(0,a-o.length)+o},S=function(){for(var e=[],t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return n.forEach((function(t){e.push(w(Number(t).toString(16),2,0))})),e[0]}},99548:(e,t,n)=>{function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function r(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,r=[],s=!0,o=!1;try{for(n=n.call(e);!(s=(i=n.next()).done)&&(r.push(i.value),!t||r.length!==t);s=!0);}catch(e){o=!0,a=e}finally{try{s||null==n.return||n.return()}finally{if(o)throw a}}return r}}(e,t)||c(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||c(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}n.d(t,{PA:()=>i,qH:()=>r,_x:()=>s,ZQ:()=>o,u:()=>u})},24552:(e,t,n)=>{n.d(t,{yQ:()=>r,Vc:()=>i,_e:()=>a});var i={VIDEO:"video",AUDIO:"audio",METADATA:"metadata"},a={AVC:"avc",HEVC:"hevc"},r={AAC:"aac",G711PCMA:"g7110a",G711PCMU:"g7110m"}},2180:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(99548);function a(e){for(var t=0,n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];i.forEach((function(e){t+=e.length}));var r=new e(t),s=0;return i.forEach((function(e){r.set(e,s),s+=e.length})),r}n(3495),n(94609),n(9776),n(35537),n(47754),n(434),n(64822),n(8415),n(60386),n(80177),n(67353),n(56441),n(53139),n(1933),n(59605),n(27435),n(95377),n(69610),n(98083),n(35827),n(9903),n(51018),n(34659),n(43170),n(3708),n(78900),n(10391),n(34721),n(72153),n(51680);var r=function(){function e(){(0,i.PA)(this,e),this.buffer=new Uint8Array(0)}return(0,i.qH)(e,[{key:"write",value:function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];n.forEach((function(t){t?e.buffer=a(Uint8Array,e.buffer,t):window.console.warn(t)}))}}],[{key:"writeUint16",value:function(e){return new Uint8Array([e>>8&255,255&e])}},{key:"writeUint32",value:function(e){return new Uint8Array([e>>24,e>>16&255,e>>8&255,255&e])}}]),e}()},67366:(e,t,n)=>{n.d(t,{N:()=>l});var i=n(99548),a=(n(71339),n(14643),n(3495),n(94609),n(9776),n(35537),n(47754),n(434),n(64822),n(8415),n(60386),n(80177),n(67353),n(56441),n(53139),n(1933),n(59605),n(27435),n(95377),n(69610),n(98083),n(35827),n(9903),n(51018),n(34659),n(43170),n(3708),n(78900),n(10391),n(34721),n(72153),n(51680),n(62180),n(49979),n(29832),n(34895),n(36195),n(68333),n(60199),n(24552)),r=n(18046),s=n(2180),o=Math.pow(2,32)-1,u=function(){function e(){(0,i.PA)(this,e)}return(0,i.qH)(e,null,[{key:"box",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var a=8+(n=n.filter(Boolean)).reduce((function(e,t){return e+t.byteLength}),0),r=new Uint8Array(a);r[0]=a>>24&255,r[1]=a>>16&255,r[2]=a>>8&255,r[3]=255&a,r.set(e,4);var s=8;return n.forEach((function(e){r.set(e,s),s+=e.byteLength})),r}},{key:"ftyp",value:function(t){return t.find((function(e){return e.type===a.Vc.VIDEO&&e.codecType===a._e.HEVC}))?e.FTYPHEV1:e.FTYPAVC1}},{key:"initSegment",value:function(t){var n=e.ftyp(t);return(0,r.gJ)(n,e.moov(t))}},{key:"pssh",value:function(t){var n=new Uint8Array([1,0,0,0].concat([16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75],[0,0,0,1],(0,r.Qc)(t.kid),[0,0,0,0]));return e.box(e.types.pssh,n)}},{key:"moov",value:function(t){if(t[0].useEME&&(t[0].encv||t[0].enca)){t[0].pssh||(t[0].pssh={kid:t[0].kid});var n=this.pssh(t[0].pssh);return e.box.apply(e,[e.types.moov,e.mvhd(t[0].mvhdDurtion||t[0].duration,t[0].mvhdTimecale||t[0].timescale),e.mvex(t)].concat((0,i.u)(t.map((function(t){return e.trak(t)}))),[n]))}return e.box.apply(e,[e.types.moov,e.mvhd(t[0].mvhdDurtion||t[0].duration,t[0].mvhdTimecale||t[0].timescale)].concat((0,i.u)(t.map((function(t){return e.trak(t)}))),[e.mvex(t)]))}},{key:"mvhd",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:9e4,i=e.box(e.types.mvhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,n>>24&255,n>>16&255,n>>8&255,255&n,t>>24&255,t>>16&255,t>>8&255,255&t,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]));return i}},{key:"trak",value:function(t){return e.box(e.types.trak,e.tkhd(t.id,t.tkhdDuration||0,t.width,t.height),e.mdia(t))}},{key:"tkhd",value:function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=e.box(e.types.tkhd,new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,t>>24&255,t>>16&255,t>>8&255,255&t,0,0,0,0,n>>24&255,n>>16&255,n>>8&255,255&n,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,i>>8&255,255&i,0,0,a>>8&255,255&a,0,0]));return r}},{key:"mdia",value:function(t){return e.box(e.types.mdia,e.mdhd(t.duration,t.timescale),e.hdlr(t.type),e.minf(t))}},{key:"mdhd",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:9e4,i=e.box(e.types.mdhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,n>>24&255,n>>16&255,n>>8&255,255&n,t>>24&255,t>>16&255,t>>8&255,255&t,85,196,0,0]));return i}},{key:"hdlr",value:function(t){return e.box(e.types.hdlr,e.HDLR_TYPES[t])}},{key:"minf",value:function(t){return e.box(e.types.minf,t.type===a.Vc.VIDEO?e.VMHD:e.SMHD,e.DINF,e.stbl(t))}},{key:"stbl",value:function(t){var n=[];return t&&t.ext&&t.ext.stss&&n.push(e.stss(t.ext.stss.entries)),e.box(e.types.stbl,e.stsd(t),e.STTS,n[0],e.STSC,e.STSZ,e.STCO)}},{key:"stsd",value:function(t){var n;return n="audio"===t.type?t.useEME&&t.enca?e.enca(t):e.mp4a(t):t.useEME&&t.encv?e.encv(t):e.avc1hev1(t),e.box(e.types.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),n)}},{key:"enca",value:function(t){var n=t.enca.channelCount,i=t.enca.sampleRate,a=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,n,0,16,0,0,0,0,i>>8&255,255&i,0,0]),r=e.esds(t.config),s=e.sinf(t.enca);return e.box(e.types.enca,a,r,s)}},{key:"encv",value:function(t){var n,a,r=t.sps.length>0?t.sps[0]:[],s=t.pps.length>0?t.pps[0]:[],o=t.width,u=t.height,c=t.sarRatio[0],l=t.sarRatio[1],d=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,o>>8&255,255&o,u>>8&255,255&u,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),f=new Uint8Array((n=(a=[1,r[1],r[2],r[3],255,225,r.length>>>8&255,255&r.length]).concat.apply(a,(0,i.u)(r)).concat([1,s.length>>>8&255,255&s.length])).concat.apply(n,(0,i.u)(s))),h=new Uint8Array([0,0,88,57,0,15,200,192,0,4,86,72]),v=e.sinf(t.encv),p=new Uint8Array([c>>24,c>>16&255,c>>8&255,255&c,l>>24,l>>16&255,l>>8&255,255&l]);return e.box(e.types.encv,d,e.box(e.types.avcC,f),e.box(e.types.btrt,h),v,e.box(e.types.pasp,p))}},{key:"schi",value:function(t){var n=new Uint8Array([]),i=e.tenc(t);return e.box(e.types.schi,n,i)}},{key:"tenc",value:function(t){var n=new Uint8Array([0,0,0,0,0,0,255&t.default_IsEncrypted,255&t.default_IV_size].concat((0,r.Qc)(t.default_KID)));return e.box(e.types.tenc,n)}},{key:"sinf",value:function(t){var n=new Uint8Array([]),i=new Uint8Array([t.data_format.charCodeAt(0),t.data_format.charCodeAt(1),t.data_format.charCodeAt(2),t.data_format.charCodeAt(3)]),a=new Uint8Array([0,0,0,0,99,101,110,99,0,1,0,0]),r=e.schi(t);return e.box(e.types.sinf,n,e.box(e.types.frma,i),e.box(e.types.schm,a),r)}},{key:"avc1hev1",value:function(t){var n=t.codecType===a._e.HEVC,i=n?e.types.hvc1:e.types.avc1,r=n?e.hvcC(t):e.avcC(t),s=[new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,t.width>>8&255,255&t.width,t.height>>8&255,255&t.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),r];return n?s.push(e.box(e.types.fiel,new Uint8Array([1,0]))):t.sarRatio&&t.sarRatio.length>1&&s.push(e.pasp(t.sarRatio)),e.box.apply(e,[i].concat(s))}},{key:"avcC",value:function(t){var n,a,r,s=[],o=[];return t.sps.forEach((function(e){r=e.byteLength,s.push(r>>>8&255),s.push(255&r),s.push.apply(s,(0,i.u)(e))})),t.pps.forEach((function(e){r=e.byteLength,o.push(r>>>8&255),o.push(255&r),o.push.apply(o,(0,i.u)(e))})),e.box(e.types.avcC,new Uint8Array((n=(a=[1,s[3],s[4],s[5],255,224|t.sps.length]).concat.apply(a,s).concat([t.pps.length])).concat.apply(n,o)))}},{key:"hvcC",value:function(t){var n=t.hvcC;if(n instanceof ArrayBuffer||n instanceof Uint8Array)return n;var a,r=t.vps,s=t.sps,o=t.pps;if(n){var u=n.generalProfileCompatibilityFlags,c=n.generalConstraintIndicatorFlags,l=(r.length&&1)+(s.length&&1)+(o.length&&1);a=[1,n.generalProfileSpace<<6|n.generalTierFlag<<5|n.generalProfileIdc,u>>>24,u>>>16,u>>>8,u,c[0],c[1],c[2],c[3],c[4],c[5],n.generalLevelIdc,240,0,252,252|n.chromaFormatIdc,248|n.bitDepthLumaMinus8,248|n.bitDepthChromaMinus8,0,0,n.numTemporalLayers<<3|n.temporalIdNested<<2|3,l];var d=function(e){var t;a.push(e.length>>8,e.length),(t=a).push.apply(t,(0,i.u)(e))};r.length&&(a.push(160,0,r.length),r.forEach(d)),s.length&&(a.push(161,0,s.length),s.forEach(d)),o.length&&(a.push(162,0,o.length),o.forEach(d))}else a=[1,1,96,0,0,0,144,0,0,0,0,0,93,240,0,252,253,248,248,0,0,15,3,160,0,1,0,24,64,1,12,1,255,255,1,96,0,0,3,0,144,0,0,3,0,0,3,0,93,153,152,9,161,0,1,0,45,66,1,1,1,96,0,0,3,0,144,0,0,3,0,0,3,0,93,160,2,128,128,45,22,89,153,164,147,43,154,128,128,128,130,0,0,3,0,2,0,0,3,0,50,16,162,0,1,0,7,68,1,193,114,180,98,64];return e.box(e.types.hvcC,new Uint8Array(a))}},{key:"pasp",value:function(t){var n=(0,i.ZQ)(t,2),a=n[0],r=n[1];return e.box(e.types.pasp,new Uint8Array([a>>24,a>>16&255,a>>8&255,255&a,r>>24,r>>16&255,r>>8&255,255&r]))}},{key:"mp4a",value:function(t){return e.box(e.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,t.sampleRate>>8&255,255&t.sampleRate,0,0]),t.config.length?e.esds(t.config):void 0)}},{key:"esds",value:function(t){var n=t.length;return e.box(e.types.esds,new Uint8Array([0,0,0,0,3,23+n,0,0,0,4,15+n,64,21,0,6,0,0,0,218,192,0,0,218,192,5].concat([n]).concat(t).concat([6,1,2])))}},{key:"mvex",value:function(t){return e.box.apply(e,[e.types.mvex].concat((0,i.u)(t.map((function(t){return e.trex(t.id)})))))}},{key:"trex",value:function(t){return e.box(e.types.trex,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}},{key:"trex1",value:function(t){return e.box(e.types.trex,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t,0,0,0,1,0,0,2,0,0,0,0,0,0,1,0,0]))}},{key:"trex2",value:function(t){return e.box(e.types.trex,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t,0,0,0,1,0,0,4,0,0,0,0,0,2,0,0,0]))}},{key:"moof",value:function(t){return e.box.apply(e,[e.types.moof,e.mfhd(t[0].samples?t[0].samples[0].gopId:0)].concat((0,i.u)(t.map((function(t){return e.traf(t)})))))}},{key:"mfhd",value:function(t){return e.box(e.types.mfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))}},{key:"traf",value:function(t){var n=e.tfhd(t.id),i=e.tfdt(t,t.baseMediaDecodeTime);if(t.useEME&&(t.isVideoEncryption||t.isAudioEncryption)){if(t.isVideoEncryption){if(t.isVideo){var a=e.saiz(t),r=e.saio(t),s=e.trun1(t),o=e.senc(t);return e.box(e.types.traf,n,i,a,r,s,o)}if(t.isAudioEncryption){var u=e.sbgp(),c=e.saiz(t),l=e.saio(t),d=e.senc(t),f=e.trun1(t);return e.box(e.types.traf,n,i,u,c,l,d,f)}var h=e.sbgp(),v=e.trun1(t);return e.box(e.types.traf,n,i,h,v)}if(t.isVideo){var p=e.trun1(t);return e.box(e.types.traf,n,i,p)}var m=e.sbgp(),y=e.saiz(t),g=e.saio(t),k=e.senc(t),b=e.trun1(t);return e.box(e.types.traf,n,i,m,y,g,k,b)}var x=e.sdtp(t);return e.box(e.types.traf,n,i,x,e.trun(t.samples,x.byteLength+76))}},{key:"sdtp",value:function(t){var n=new s.Z;return t.samples.forEach((function(e){n.write(new Uint8Array(t.isVideo?[e.keyframe?32:16]:[16]))})),e.box(e.types.sdtp,this.extension(0,0),n.buffer)}},{key:"trun1",value:function(t){var n=new s.Z,i=s.Z.writeUint32(t.samples.length),a=null;if(t.isVideo){var r=t.videoSencLength;a=s.Z.writeUint32(16*t.samples.length+r+149),!t.isVideoEncryption&&t.isAudioEncryption&&(a=s.Z.writeUint32(16*t.samples.length+92))}else{var o=12*t.samples.length+124;t.isAudioEncryption&&(o=12*t.samples.length+8*t.audioSenc.length+177),a=s.Z.writeUint32(o)}return t.samples.forEach((function(e){n.write(s.Z.writeUint32(e.duration)),n.write(s.Z.writeUint32(e.size)),n.write(s.Z.writeUint32(e.keyframe?33554432:65536)),t.isVideo&&n.write(s.Z.writeUint32(e.cts?e.cts:0))})),e.box(e.types.trun,this.extension(0,t.flags),i,a,n.buffer)}},{key:"senc",value:function(t){var n=new s.Z,i=t.samples.length,a=t.isVideo?16:8,r=t.isVideo?2:0,o=[],u=0;return t.isVideo?(o=t.videoSenc,u=t.videoSencLength):o=t.audioSenc,u=u||a*i,n.write(s.Z.writeUint32(16+u),e.types.senc,this.extension(0,r)),n.write(s.Z.writeUint32(i)),o.forEach((function(e){for(var t=0;t<e.InitializationVector.length;t++)n.write(new Uint8Array([e.InitializationVector[t]]));e.subsamples&&e.subsamples.length&&(n.write(s.Z.writeUint16(e.subsamples.length)),e.subsamples.forEach((function(e){n.write(s.Z.writeUint16(e.BytesOfClearData)),n.write(s.Z.writeUint32(e.BytesOfProtectedData))})))})),n.buffer}},{key:"saio",value:function(t){var n=12*t.samples.length+141;!t.isVideo&&t.isAudioEncryption&&(n=149);var i=new Uint8Array([1,0,0,0,0,0,0,1,0,0,0,0,n>>24&255,n>>16&255,n>>8&255,255&n]);return e.box(e.types.saio,i)}},{key:"saiz",value:function(t){var n=t.samples.length,i=new Uint8Array([0,0,0,0,16,n>>24&255,n>>16&255,n>>8&255,255&n]);return e.box(e.types.saiz,i)}},{key:"sbgp",value:function(){var t=new Uint8Array([114,111,108,108,0,0,0,1,0,0,1,25,0,0,0,1]);return e.box(e.types.sbgp,this.extension(0,0),t)}},{key:"extension",value:function(e,t){return new Uint8Array([e,t>>16&255,t>>8&255,255&t])}},{key:"tfhd",value:function(t){return e.box(e.types.tfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))}},{key:"tfdt",value:function(t,n){var i=Math.floor(n/(o+1)),a=Math.floor(n%(o+1));return t.useEME&&(t.isVideoEncryption||t.isAudioEncryption)?e.box(e.types.tfdt,new Uint8Array([0,0,0,0,a>>24,a>>16&255,a>>8&255,255&a])):e.box(e.types.tfdt,new Uint8Array([1,0,0,0,i>>24,i>>16&255,i>>8&255,255&i,a>>24,a>>16&255,a>>8&255,255&a]))}},{key:"trun",value:function(t,n){var i=t.length,a=12+16*i;n+=8+a;var r=new Uint8Array(a);r.set([0,0,15,1,i>>>24&255,i>>>16&255,i>>>8&255,255&i,n>>>24&255,n>>>16&255,n>>>8&255,255&n],0);for(var s=0;s<i;s++){var o=t[s],u=o.duration,c=o.size,l=o.flag,d=void 0===l?{}:l,f=o.cts,h=void 0===f?0:f;r.set([u>>>24&255,u>>>16&255,u>>>8&255,255&u,c>>>24&255,c>>>16&255,c>>>8&255,255&c,d.isLeading<<2|(null===d.dependsOn||void 0===d.dependsOn?1:d.dependsOn),d.isDependedOn<<6|d.hasRedundancy<<4|d.paddingValue<<1|(null===d.isNonSyncSample||void 0===d.isNonSyncSample?1:d.isNonSyncSample),61440&d.degradationPriority,15&d.degradationPriority,h>>>24&255,h>>>16&255,h>>>8&255,255&h],12+16*s)}return e.box(e.types.trun,r)}},{key:"moovMP4",value:function(t){return e.box.apply(e,[e.types.moov,e.mvhd(t[0].duration,t[0].timescale)].concat((0,i.u)(t.map((function(t){return e.trackMP4(t)})))))}},{key:"trackMP4",value:function(t){return e.box(e.types.trak,e.tkhd(t.id,t.duration,t.width,t.height),e.mdiaMP4(t))}},{key:"mdiaMP4",value:function(t){return e.box(e.types.mdia,e.mdhd(t.duration,t.timescale),e.hdlr(t.type),e.minfMP4(t))}},{key:"minfMP4",value:function(t){return e.box(e.types.minf,t.type===a.Vc.VIDEO?e.VMHD:e.SMHD,e.DINF,e.stblMP4(t))}},{key:"stblMP4",value:function(t){var n=t.ext,i=[e.stsd(t),e.stts(n.stts),e.stsc(n.stsc),e.stsz(n.stsz),e.stco(n.stco)];return n.stss.length&&i.push(e.stss(n.stss)),n.ctts.length&&i.push(e.ctts(n.ctts)),e.box.apply(e,[e.types.stbl].concat(i))}},{key:"stts",value:function(t){var n=t.length,i=new Uint8Array(8*n),a=0;return t.forEach((function(e){var t=e.value,n=e.count;i.set([n>>24,n>>16&255,n>>8&255,255&n,t>>24,t>>16&255,t>>8&255,255&t],a),a+=8})),e.box(e.types.stts,(0,r.gJ)(new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n]),i))}},{key:"stsc",value:function(t){var n=t.length,i=new Uint8Array(12*n),a=0;return t.forEach((function(e){var t=e.firstChunk,n=e.samplesPerChunk,r=e.sampleDescIndex;i.set([t>>24,t>>16&255,t>>8&255,255&t,n>>24,n>>16&255,n>>8&255,255&n,r>>24,r>>16&255,r>>8&255,255&r],a),a+=12})),e.box(e.types.stsc,(0,r.gJ)(new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n]),i))}},{key:"stsz",value:function(t){var n=t.length,i=new Uint8Array(4*n),a=0;return t.forEach((function(e){i.set([e>>24,e>>16&255,e>>8&255,255&e],a),a+=4})),e.box(e.types.stsz,(0,r.gJ)(new Uint8Array([0,0,0,0,0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n]),i))}},{key:"stco",value:function(t){var n=t.length,i=new Uint8Array(4*n),a=0;return t.forEach((function(e){i.set([e>>24,e>>16&255,e>>8&255,255&e],a),a+=4})),e.box(e.types.stco,(0,r.gJ)(new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n]),i))}},{key:"stss",value:function(t){var n=t.length,i=new Uint8Array(4*n),a=0;return t.forEach((function(e){i.set([e>>24,e>>16&255,e>>8&255,255&e],a),a+=4})),e.box(e.types.stss,(0,r.gJ)(new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n]),i))}},{key:"ctts",value:function(t){var n=t.length,i=new Uint8Array(8*n),a=0;return t.forEach((function(e){var t=e.value,n=e.count;i.set([n>>24,n>>16&255,n>>8&255,255&n,t>>24,t>>16&255,t>>8&255,255&t],a),a+=8})),e.box(e.types.ctts,(0,r.gJ)(new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n]),i))}},{key:"styp",value:function(){return e.box(e.types.styp,new Uint8Array([109,115,100,104,0,0,0,0,109,115,100,104,109,115,105,120]))}},{key:"sidx",value:function(t){var n=t.timescale,i=t.samples[0].duration,a=i*t.samples.length,r=t.samples[0].sampleOffset*i,s=8;t.samples.forEach((function(e){s+=e.size}));var o=0;if(t.isVideo){var u,c=0;t.videoSenc&&(u=t.videoSenc),t.isVideo&&u.forEach((function(e){c+=8,e.subsamples&&e.subsamples.length&&(c+=2,c+=6*e.subsamples.length)})),t.videoSencLength=c,o=s+141+16*t.samples.length+c,t.useEME&&t.isAudioEncryption&&!t.isVideoEncryption&&(o=s+16*t.samples.length+84)}else o=s+116+12*t.samples.length,t.useEME&&t.isAudioEncryption&&(o=s+169+12*t.samples.length+8*t.audioSenc.length);var l=new Uint8Array([0,0,0,0,0,0,0,255&t.id,n>>24&255,n>>16&255,n>>8&255,255&n,r>>24&255,r>>16&255,r>>8&255,255&r,0,0,0,0,0,0,0,1,0,o>>16&255,o>>8&255,255&o,a>>24&255,a>>16&255,a>>8&255,255&a,144,0,0,0]);return e.box(e.types.sidx,l)}},{key:"mdat",value:function(t){return e.box(e.types.mdat,t)}}]),e}();(0,i._x)(u,"types",["avc1","avcC","hvc1","hvcC","dinf","dref","esds","ftyp","hdlr","mdat","mdhd","mdia","mfhd","minf","moof","moov","mp4a","mvex","mvhd","pasp","stbl","stco","stsc","stsd","stsz","stts","tfdt","tfhd","traf","trak","trex","tkhd","vmhd","smhd","ctts","stss","styp","pssh","sidx","sbgp","saiz","saio","senc","trun","encv","enca","sinf","btrt","frma","tenc","schm","schi","mehd","fiel","sdtp"].reduce((function(e,t){return e[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)],e}),Object.create(null))),(0,i._x)(u,"HDLR_TYPES",{video:new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),audio:new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0])}),(0,i._x)(u,"FTYPAVC1",u.box(u.types.ftyp,new Uint8Array([105,115,111,109,0,0,0,1,105,115,111,109,97,118,99,49]))),(0,i._x)(u,"FTYPHEV1",u.box(u.types.ftyp,new Uint8Array([105,115,111,109,0,0,0,1,105,115,111,109,104,101,118,49]))),(0,i._x)(u,"DINF",u.box(u.types.dinf,u.box(u.types.dref,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1])))),(0,i._x)(u,"VMHD",u.box(u.types.vmhd,new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]))),(0,i._x)(u,"SMHD",u.box(u.types.smhd,new Uint8Array([0,0,0,0,0,0,0,0]))),(0,i._x)(u,"StblTable",new Uint8Array([0,0,0,0,0,0,0,0])),(0,i._x)(u,"STTS",u.box(u.types.stts,u.StblTable)),(0,i._x)(u,"STSC",u.box(u.types.stsc,u.StblTable)),(0,i._x)(u,"STSZ",u.box(u.types.stsz,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]))),(0,i._x)(u,"STCO",u.box(u.types.stco,u.StblTable));var c=n(97623),l=function(){function e(t,n,a){(0,i.PA)(this,e),this.videoTrack=t,this.audioTrack=n;var r=/Chrome\/([^.]+)/.exec(navigator.userAgent);this.forceFirstIDR=r&&Number(r[1])<50,this.log=new c.Y("FMP4Remuxer",!a||!a.openLog||!a.openLog)}return(0,i.qH)(e,[{key:"remux",value:function(){var e,t,n,i,a,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0],s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=this.videoTrack,c=this.audioTrack,l=o.exist(),d=c.exist(),f=[];return r&&(s&&s.initMerge?(l&&f.push(this.videoTrack),d&&f.push(this.audioTrack),n=u.initSegment(f)):(l&&(e=u.initSegment([this.videoTrack])),d&&(t=u.initSegment([this.audioTrack])))),l&&o.hasSample()&&(i=this._remuxVideo()),d&&c.hasSample()&&(a=this._remuxAudio()),o.samples=[],c.samples=[],{initSegment:n,videoInitSegment:e,audioInitSegment:t,videoSegment:i,audioSegment:a}}},{key:"_remuxVideo",value:function(){var e=this.videoTrack;this.forceFirstIDR&&(e.samples[0].flag={dependsOn:2,isNonSyncSample:0});var t=e.samples,n=0;t.forEach((function(e){n+=e.units.reduce((function(e,t){return e+t.byteLength}),0),n+=4*e.units.length}));for(var i,a=new Uint8Array(n),s=new DataView(a.buffer),o=function(e,n,r,o){o=t[e];var u=0;o.units.forEach((function(e){s.setUint32(r,e.byteLength),r+=4,a.set(e,r),r+=e.byteLength,u+=4+e.byteLength})),o.size=u,d=r,i=o},c=0,l=t.length,d=0;c<l;c++)o(c,0,d,i);var f=u.mdat(a),h=u.moof([e]);return(0,r.gJ)(h,f)}},{key:"_remuxAudio",value:function(){var e=this.audioTrack,t=new Uint8Array(e.samples.reduce((function(e,t){return e+t.size}),0));e.samples.reduce((function(e,n){return t.set(n.data,e),e+n.size}),0);var n=u.mdat(t),i=u.moof([e]);return(0,r.gJ)(i,n)}},{key:"reset",value:function(){this.videoTrack.reset(),this.audioTrack.reset()}}]),e}()},97623:(e,t,n)=>{n.d(t,{Y:()=>a});var i=n(99548),a=(n(96761),n(29832),function(){function e(t,n){(0,i.PA)(this,e),this.name=t||"",this._prefix="[".concat(this.name,"]"),e.disabled=n}return(0,i.qH)(e,[{key:"debug",value:function(){var t;if(!e.disabled){for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];(t=console).debug.apply(t,[this._prefix].concat(i))}}},{key:"log",value:function(){var t;if(!e.disabled){for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];(t=console).log.apply(t,[this._prefix].concat(i))}}},{key:"warn",value:function(){var t;if(!e.disabled){for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];(t=console).warn.apply(t,[this._prefix].concat(i))}}},{key:"error",value:function(){var t;if(!e.disabled){for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];(t=console).error.apply(t,[this._prefix].concat(i))}}},{key:"table",value:function(){var t;e.disabled||(console.group(this._prefix),(t=console).table.apply(t,arguments),console.groupEnd())}}],[{key:"enable",value:function(){e.disabled=!1}},{key:"disable",value:function(){e.disabled=!0}}]),e}());(0,i._x)(a,"disabled",!0)},69596:(e,t,n)=>{n.d(t,{_:()=>D});var i=n(99548),a=(n(3495),n(94609),n(9776),n(35537),n(47754),n(434),n(64822),n(8415),n(60386),n(80177),n(67353),n(56441),n(53139),n(1933),n(59605),n(27435),n(95377),n(69610),n(98083),n(35827),n(9903),n(51018),n(34659),n(43170),n(3708),n(78900),n(10391),n(34721),n(72153),n(51680),n(17021),n(24552)),r=function(){function e(){(0,i.PA)(this,e),(0,i._x)(this,"id",1),(0,i._x)(this,"type",a.Vc.VIDEO),(0,i._x)(this,"codecType",a._e.AVC),(0,i._x)(this,"pid",-1),(0,i._x)(this,"hvcC",void 0),(0,i._x)(this,"codec",""),(0,i._x)(this,"timescale",0),(0,i._x)(this,"formatTimescale",0),(0,i._x)(this,"sequenceNumber",0),(0,i._x)(this,"baseMediaDecodeTime",0),(0,i._x)(this,"baseDts",0),(0,i._x)(this,"duration",0),(0,i._x)(this,"warnings",[]),(0,i._x)(this,"samples",[]),(0,i._x)(this,"pps",[]),(0,i._x)(this,"sps",[]),(0,i._x)(this,"vps",[]),(0,i._x)(this,"fpsNum",0),(0,i._x)(this,"fpsDen",0),(0,i._x)(this,"sarRatio",[]),(0,i._x)(this,"width",0),(0,i._x)(this,"height",0),(0,i._x)(this,"nalUnitSize",4),(0,i._x)(this,"present",!1),(0,i._x)(this,"isVideoEncryption",!1),(0,i._x)(this,"isAudioEncryption",!1),(0,i._x)(this,"isVideo",!0),(0,i._x)(this,"kid",null),(0,i._x)(this,"pssh",null),(0,i._x)(this,"ext",void 0)}return(0,i.qH)(e,[{key:"reset",value:function(){this.sequenceNumber=this.width=this.height=this.fpsDen=this.fpsNum=this.duration=this.baseMediaDecodeTime=this.timescale=0,this.codec="",this.present=!1,this.pid=-1,this.pps=[],this.sps=[],this.vps=[],this.sarRatio=[],this.samples=[],this.warnings=[],this.hvcC=null}},{key:"exist",value:function(){return!!(this.pps.length&&this.sps.length&&this.codec)}},{key:"hasSample",value:function(){return!!this.samples.length}},{key:"isEncryption",get:function(){return this.isVideoEncryption}}]),e}(),s=function(){function e(){(0,i.PA)(this,e),(0,i._x)(this,"id",2),(0,i._x)(this,"type",a.Vc.AUDIO),(0,i._x)(this,"codecType",a.yQ.AAC),(0,i._x)(this,"pid",-1),(0,i._x)(this,"codec",""),(0,i._x)(this,"sequenceNumber",0),(0,i._x)(this,"sampleDuration",0),(0,i._x)(this,"timescale",0),(0,i._x)(this,"formatTimescale",0),(0,i._x)(this,"baseMediaDecodeTime",0),(0,i._x)(this,"duration",0),(0,i._x)(this,"warnings",[]),(0,i._x)(this,"samples",[]),(0,i._x)(this,"baseDts",0),(0,i._x)(this,"sampleSize",16),(0,i._x)(this,"sampleRate",0),(0,i._x)(this,"channelCount",0),(0,i._x)(this,"objectType",0),(0,i._x)(this,"sampleRateIndex",0),(0,i._x)(this,"config",[]),(0,i._x)(this,"present",!1),(0,i._x)(this,"isVideoEncryption",!1),(0,i._x)(this,"isAudioEncryption",!1),(0,i._x)(this,"kid",null),(0,i._x)(this,"ext",void 0)}return(0,i.qH)(e,[{key:"reset",value:function(){this.sequenceNumber=0,this.timescale=0,this.sampleDuration=0,this.sampleRate=0,this.channelCount=0,this.baseMediaDecodeTime=0,this.present=!1,this.pid=-1,this.codec="",this.samples=[],this.config=[],this.warnings=[]}},{key:"exist",value:function(){return!!(this.sampleRate&&this.channelCount&&this.codec&&this.codecType===a.yQ.AAC)}},{key:"hasSample",value:function(){return!!this.samples.length}},{key:"isEncryption",get:function(){return this.isAudioEncryption}}]),e}(),o=function(){function e(t,n,a){(0,i.PA)(this,e),(0,i._x)(this,"flag",{}),(0,i._x)(this,"keyframe",!1),(0,i._x)(this,"gopId",0),(0,i._x)(this,"duration",0),(0,i._x)(this,"size",0),(0,i._x)(this,"units",[]),(0,i._x)(this,"chromaFormat",420),this.originPts=this.pts=t,this.originDts=this.dts=n,a&&(this.units=a)}return(0,i.qH)(e,[{key:"cts",get:function(){return this.pts-this.dts}},{key:"setToKeyframe",value:function(){this.keyframe=!0,this.flag.dependsOn=2,this.flag.isNonSyncSample=0}}]),e}(),u=(0,i.qH)((function e(t,n,a,r){(0,i.PA)(this,e),(0,i._x)(this,"duration",1024),(0,i._x)(this,"flag",{dependsOn:2,isNonSyncSample:0}),(0,i._x)(this,"keyframe",!0),this.originPts=this.pts=this.dts=t,this.data=n,this.size=n.byteLength,this.sampleOffset=r,a&&(this.duration=a)})),c=function(){function e(){(0,i.PA)(this,e),(0,i._x)(this,"id",3),(0,i._x)(this,"type",a.Vc.METADATA),(0,i._x)(this,"timescale",0),(0,i._x)(this,"flvScriptSamples",[]),(0,i._x)(this,"seiSamples",[])}return(0,i.qH)(e,[{key:"exist",value:function(){return!(!this.flvScriptSamples.length&&!this.seiSamples.length||!this.timescale)}},{key:"reset",value:function(){this.timescale=0,this.flvScriptSamples=[],this.seiSamples=[]}},{key:"hasSample",value:function(){return!(!this.flvScriptSamples.length&&!this.seiSamples.length)}}]),e}(),l=n(18046),d=(n(60199),n(34895),n(36195),n(62180),n(99795),n(96935),n(49979),n(64001),n(84240),n(60100),n(14643),n(71339),n(68068),n(9441),n(15324),"undefined"!=typeof window),f=d&&navigator.userAgent.toLocaleLowerCase(),h=(d&&/^((?!chrome|android).)*safari/.test(f),d&&f.includes("firefox")),v=d&&f.includes("android"),p=function(){function e(){(0,i.PA)(this,e)}return(0,i.qH)(e,null,[{key:"getRateIndexByRate",value:function(t){return e.FREQ.indexOf(t)}},{key:"parseADTS",value:function(t,n){for(var i=t.length,a=0;a+2<i&&(255!==t[a]||240!=(246&t[a+1]));)a++;if(!(a>=i)){var r=a,s=[],o=(60&t[a+2])>>>2,u=e.FREQ[o];if(!u)throw new Error("Invalid sampling index: ".concat(o));for(var c,l,d=1+((192&t[a+2])>>>6),f=(1&t[a+2])<<2|(192&t[a+3])>>>6,h=e._getConfig(o,f,d),v=h.config,p=h.codec,m=0,y=e.getFrameDuration(u);a+7<i;)if(255===t[a]&&240==(246&t[a+1])){if(i-a<(l=(3&t[a+3])<<11|t[a+4]<<3|(224&t[a+5])>>5))break;c=2*(1&~t[a+1]),s.push({pts:n+m*y,data:t.subarray(a+7+c,a+l)}),m++,a+=l}else a++;return{skip:r,remaining:a>=i?void 0:t.subarray(a),frames:s,samplingFrequencyIndex:o,sampleRate:u,objectType:d,channelCount:f,codec:p,config:v,originCodec:"mp4a.40.".concat(d)}}}},{key:"parseAudioSpecificConfig",value:function(t){if(t.length){var n=t[0]>>>3,i=(7&t[0])<<1|t[1]>>>7,a=(120&t[1])>>>3,r=e.FREQ[i];if(r){var s=e._getConfig(i,a,n);return{samplingFrequencyIndex:i,sampleRate:r,objectType:n,channelCount:a,config:s.config,codec:s.codec,originCodec:"mp4a.40.".concat(n)}}}}},{key:"getFrameDuration",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:9e4;return 1024*t/e}},{key:"_getConfig",value:function(e,t,n){var i,a,r=[];return h?e>=6?(i=5,a=e-3):(i=2,a=e):v?(i=2,a=e):(i=2===n||5===n?n:5,a=e,e>=6?a=e-3:1===t&&(i=2,a=e)),r[0]=i<<3,r[0]|=(14&e)>>1,r[1]=(1&e)<<7,r[1]|=t<<3,5===i&&(r[1]|=(14&a)>>1,r[2]=(1&a)<<7,r[2]|=8,r[3]=0),{config:r,codec:"mp4a.40.".concat(i)}}},{key:"getSilentFrame",value:function(e,t){if("mp4a.40.2"===e){if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}}}]),e}();(0,i._x)(p,"FREQ",[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350]);var m=function(){function e(){(0,i.PA)(this,e)}return(0,i.qH)(e,null,[{key:"findBox",value:function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=[];if(!t)return a;for(var r=0,s="",o=0;t.length>7;){if(r=(0,l.Bh)(t),s=String.fromCharCode.apply(null,t.subarray(4,8)),o=8,1===r?(r=(0,l.h9)(t,8),o+=8):r||(r=t.length),!n[0]||s===n[0]){var u=t.subarray(0,r);if(!(n.length<2))return e.findBox(u.subarray(o),n.slice(1),i+o);a.push({start:i,size:r,headerSize:o,type:s,data:u})}i+=r,t=t.subarray(r)}return a}},{key:"tfhd",value:function(e){return b(e,!0,(function(e,t){e.trackId=(0,l.Bh)(t);var n=4,i=1&e.flags,a=2&e.flags,r=8&e.flags,s=16&e.flags,o=32&e.flags;i&&(n+=4,e.baseDataOffset=(0,l.Bh)(t,n),n+=4),a&&(e.sampleDescriptionIndex=(0,l.Bh)(t,n),n+=4),r&&(e.defaultSampleDuration=(0,l.Bh)(t,n),n+=4),s&&(e.defaultSampleSize=(0,l.Bh)(t,n),n+=4),o&&(e.defaultSampleFlags=(0,l.Bh)(t,n))}))}},{key:"sidx",value:function(e){return b(e,!0,(function(e,t){var n=0;e.reference_ID=(0,l.Bh)(t,n),n+=4,e.timescale=(0,l.Bh)(t,n),n+=4,0===e.version?(e.earliest_presentation_time=(0,l.Bh)(t,n),n+=4,e.first_offset=(0,l.Bh)(t,n),n+=4):(e.earliest_presentation_time=(0,l.h9)(t,n),n+=8,e.first_offset=(0,l.h9)(t,n),n+=8),n+=2,e.references=[];var i=(0,l.i4)(t,n);n+=2;for(var a=0;a<i;a++){var r={};e.references.push(r);var s=(0,l.Bh)(t,n);n+=4,r.reference_type=s>>31&1,r.referenced_size=2147483647&s,r.subsegment_duration=(0,l.Bh)(t,n),n+=4,s=(0,l.Bh)(t,n),n+=4,r.starts_with_SAP=s>>31&1,r.SAP_type=s>>28&7,r.SAP_delta_time=268435455&s}}))}},{key:"moov",value:function(t){return b(t,!1,(function(t,n,i){t.mvhd=e.mvhd(e.findBox(n,["mvhd"],i)[0]),t.trak=e.findBox(n,["trak"],i).map((function(t){return e.trak(t)})),t.pssh=e.pssh(e.findBox(n,["pssh"],i)[0])}))}},{key:"mvhd",value:function(e){return b(e,!0,(function(e,t){var n=0;1===e.version?(e.timescale=(0,l.Bh)(t,16),e.duration=(0,l.h9)(t,20),n+=28):(e.timescale=(0,l.Bh)(t,8),e.duration=(0,l.Bh)(t,12),n+=16),e.nextTrackId=(0,l.Bh)(t,n+76)}))}},{key:"trak",value:function(t){return b(t,!1,(function(t,n,i){t.tkhd=e.tkhd(e.findBox(n,["tkhd"],i)[0]),t.mdia=e.mdia(e.findBox(n,["mdia"],i)[0])}))}},{key:"tkhd",value:function(e){return b(e,!0,(function(e,t){var n=0;1===e.version?(e.trackId=(0,l.Bh)(t,16),e.duration=(0,l.h9)(t,24),n+=32):(e.trackId=(0,l.Bh)(t,8),e.duration=(0,l.Bh)(t,16),n+=20),e.width=(0,l.Bh)(t,n+52),e.height=(0,l.Bh)(t,n+56)}))}},{key:"mdia",value:function(t){return b(t,!1,(function(t,n,i){t.mdhd=e.mdhd(e.findBox(n,["mdhd"],i)[0]),t.hdlr=e.hdlr(e.findBox(n,["hdlr"],i)[0]),t.minf=e.minf(e.findBox(n,["minf"],i)[0])}))}},{key:"mdhd",value:function(e){return b(e,!0,(function(e,t){var n=0;1===e.version?(e.timescale=(0,l.Bh)(t,16),e.duration=(0,l.h9)(t,20),n+=28):(e.timescale=(0,l.Bh)(t,8),e.duration=(0,l.Bh)(t,12),n+=16);var i=(0,l.i4)(t,n);e.language=String.fromCharCode(96+(i>>10&31),96+(i>>5&31),96+(31&i))}))}},{key:"hdlr",value:function(e){return b(e,!0,(function(e,t){0===e.version&&(e.handlerType=String.fromCharCode.apply(null,t.subarray(4,8)))}))}},{key:"minf",value:function(t){return b(t,!1,(function(t,n,i){t.vmhd=e.vmhd(e.findBox(n,["vmhd"],i)[0]),t.smhd=e.smhd(e.findBox(n,["smhd"],i)[0]),t.stbl=e.stbl(e.findBox(n,["stbl"],i)[0])}))}},{key:"vmhd",value:function(e){return b(e,!0,(function(e,t){e.graphicsmode=(0,l.i4)(t),e.opcolor=[(0,l.i4)(t,2),(0,l.i4)(t,4),(0,l.i4)(t,6)]}))}},{key:"smhd",value:function(e){return b(e,!0,(function(e,t){e.balance=(0,l.i4)(t)}))}},{key:"stbl",value:function(t){return b(t,!1,(function(t,n,i){var a,r,s;t.stsd=e.stsd(e.findBox(n,["stsd"],i)[0]),t.stts=e.stts(e.findBox(n,["stts"],i)[0]),t.ctts=e.ctts(e.findBox(n,["ctts"],i)[0]),t.stsc=e.stsc(e.findBox(n,["stsc"],i)[0]),t.stsz=e.stsz(e.findBox(n,["stsz"],i)[0]),t.stco=e.stco(e.findBox(n,["stco"],i)[0]),t.stco||(t.co64=e.co64(e.findBox(n,["co64"],i)[0]),t.stco=t.co64);var o=null===(a=t.stsd.entries[0])||void 0===a||null===(r=a.sinf)||void 0===r||null===(s=r.schi)||void 0===s?void 0:s.tenc.default_IV_size;t.stss=e.stss(e.findBox(n,["stss"],i)[0]),t.senc=e.senc(e.findBox(n,["senc"],i)[0],o)}))}},{key:"senc",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8;return b(e,!0,(function(e,n){var i=0,a=(0,l.Bh)(n,i);i+=4,e.samples=[];for(var r=0;r<a;r++){for(var s={InitializationVector:[]},o=0;o<t;o++)s.InitializationVector[o]=n[i+o];if(i+=t,2&e.flags){s.subsamples=[];var u=(0,l.i4)(n,i);i+=2;for(var c=0;c<u;c++){var d={};d.BytesOfClearData=(0,l.i4)(n,i),i+=2,d.BytesOfProtectedData=(0,l.Bh)(n,i),i+=4,s.subsamples.push(d)}}e.samples.push(s)}}))}},{key:"pssh",value:function(e){return b(e,!0,(function(e,t){for(var n=[],i=[],a=0,r=0;r<16;r++)i.push(_(t[a+r]));if(a+=16,e.version>0){var s=(0,l.Bh)(t,a);a+=4;for(var o=0;o<(""+s).length;o++)for(var u=0;u<16;u++){var c=t[a];a+=1,n.push(_(c))}}var d=(0,l.Bh)(t,a);e.data_size=d,a+=4,e.kid=n,e.system_id=i,e.buffer=t}))}},{key:"stsd",value:function(t){return b(t,!0,(function(t,n,i){t.entryCount=(0,l.Bh)(n),t.entries=e.findBox(n.subarray(4),[],i+4).map((function(t){switch(t.type){case"avc1":case"avc2":case"avc3":case"avc4":return e.avc1(t);case"hvc1":case"hev1":return e.hvc1(t);case"mp4a":return e.mp4a(t);case"alaw":case"ulaw":return e.alaw(t);case"enca":return b(t,!1,(function(t,n,i){t.channelCount=(0,l.i4)(n,16),t.samplesize=(0,l.i4)(n,18),t.sampleRate=(0,l.Bh)(n,24)/65536,n=n.subarray(28),t.sinf=e.sinf(e.findBox(n,["sinf"],i)[0]),t.esds=e.esds(e.findBox(n,["esds"],i)[0])}));case"encv":return b(t,!1,(function(t,n,i){t.width=(0,l.i4)(n,24),t.height=(0,l.i4)(n,26),t.horizresolution=(0,l.Bh)(n,28),t.vertresolution=(0,l.Bh)(n,32),n=n.subarray(78),t.sinf=e.sinf(e.findBox(n,["sinf"],i)[0]),t.avcC=e.avcC(e.findBox(n,["avcC"],i)[0]),t.hvcC=e.hvcC(e.findBox(n,["hvcC"],i)[0]),t.pasp=e.pasp(e.findBox(n,["pasp"],i)[0])}))}})).filter(Boolean)}))}},{key:"tenc",value:function(e){return b(e,!1,(function(e,t){var n=6;e.default_IsEncrypted=t[n],n+=1,e.default_IV_size=t[n],n+=1,e.default_KID=[];for(var i=0;i<16;i++)e.default_KID.push(_(t[n])),n+=1}))}},{key:"schi",value:function(t){return b(t,!1,(function(t,n,i){t.tenc=e.tenc(e.findBox(n,["tenc"],i)[0])}))}},{key:"sinf",value:function(t){return b(t,!1,(function(t,n,i){t.schi=e.schi(e.findBox(n,["schi"],i)[0]),t.frma=e.frma(e.findBox(n,["frma"],i)[0])}))}},{key:"frma",value:function(e){return b(e,!1,(function(e,t){e.data_format="";for(var n=0;n<4;n++)e.data_format+=String.fromCharCode(t[n])}))}},{key:"avc1",value:function(t){return b(t,!1,(function(t,n,i){var a=g(t,n),r=n.subarray(a);i+=a,t.avcC=e.avcC(e.findBox(r,["avcC"],i)[0]),t.pasp=e.pasp(e.findBox(r,["pasp"],i)[0])}))}},{key:"avcC",value:function(e){return b(e,!1,(function(e,t){e.configurationVersion=t[0],e.AVCProfileIndication=t[1],e.profileCompatibility=t[2],e.AVCLevelIndication=t[3],e.codec=(0,l.dB)([t[1],t[2],t[3]]),e.lengthSizeMinusOne=3&t[4],e.spsLength=31&t[5],e.sps=[];for(var n=6,i=0;i<e.spsLength;i++){var a=(0,l.i4)(t,n);n+=2,e.sps.push(t.subarray(n,n+a)),n+=a}e.ppsLength=t[n],n+=1,e.pps=[];for(var r=0;r<e.ppsLength;r++){var s=(0,l.i4)(t,n);n+=2,e.pps.push(t.subarray(n,n+=s)),n+=s}}))}},{key:"hvc1",value:function(t){return b(t,!1,(function(t,n,i){var a=g(t,n),r=n.subarray(a);i+=a,t.hvcC=e.hvcC(e.findBox(r,["hvcC"],i)[0]),t.pasp=e.pasp(e.findBox(r,["pasp"],i)[0])}))}},{key:"hvcC",value:function(e){return b(e,!1,(function(t,n){t.data=e.data,t.codec="hev1.1.6.L93.B0",t.configurationVersion=n[0];var i=n[1];t.generalProfileSpace=i>>6,t.generalTierFlag=(32&i)>>5,t.generalProfileIdc=31&i,t.generalProfileCompatibility=(0,l.Bh)(n,2),t.generalConstraintIndicatorFlags=n.subarray(6,12),t.generalLevelIdc=n[12],t.avgFrameRate=(0,l.i4)(n,19),t.numOfArrays=n[22],t.vps=[],t.sps=[],t.pps=[];for(var a=23,r=0,s=0,o=0,u=0;u<t.numOfArrays;u++){r=63&n[a],s=(0,l.i4)(n,a+1),a+=3;for(var c,d=[],f=0;f<s;f++)o=(0,l.i4)(n,a),a+=2,d.push(n.subarray(a,a+o)),a+=o;if(32===r)(c=t.vps).push.apply(c,d);else if(33===r){var h;(h=t.sps).push.apply(h,d)}else if(34===r){var v;(v=t.pps).push.apply(v,d)}}}))}},{key:"pasp",value:function(e){return b(e,!1,(function(e,t){e.hSpacing=(0,l.Bh)(t),e.vSpacing=(0,l.Bh)(t,4)}))}},{key:"mp4a",value:function(t){return b(t,!1,(function(t,n,i){var a=k(t,n);t.esds=e.esds(e.findBox(n.subarray(a),["esds"],i+a)[0])}))}},{key:"esds",value:function(e){return b(e,!0,(function(e,t){e.codec="mp4a.";for(var n=0,i=0,a=0,r=0;t.length;){for(r=t[n=0],i=t[n+1],n+=2;128&i;)a=(127&i)<<7,i=t[n],n+=1;if(a+=127&i,3===r)t=t.subarray(n+3);else{if(4!==r){if(5===r){var s=e.config=t.subarray(n,n+a),o=(248&s[0])>>3;return 31===o&&s.length>=2&&(o=32+((7&s[0])<<3)+((224&s[1])>>5)),e.objectType=o,e.codec+=o.toString(16),void("."===e.codec[e.codec.length-1]&&(e.codec=e.codec.substring(0,e.codec.length-1)))}return void("."===e.codec[e.codec.length-1]&&(e.codec=e.codec.substring(0,e.codec.length-1)))}e.codec+=(t[n].toString(16)+".").padStart(3,"0"),t=t.subarray(n+13)}}}))}},{key:"alaw",value:function(e){return b(e,!1,(function(e,t){k(e,t)}))}},{key:"stts",value:function(e){return b(e,!0,(function(e,t){for(var n=(0,l.Bh)(t),i=[],a=4,r=0;r<n;r++)i.push({count:(0,l.Bh)(t,a),delta:(0,l.Bh)(t,a+4)}),a+=8;e.entryCount=n,e.entries=i}))}},{key:"ctts",value:function(e){return b(e,!0,(function(e,t){var n=(0,l.Bh)(t),i=[],a=4;if(1===e.version)for(var r=0;r<n;r++)i.push({count:(0,l.Bh)(t,a),offset:(0,l.Bh)(t,a+4)}),a+=8;else for(var s=0;s<n;s++)i.push({count:(0,l.Bh)(t,a),offset:-(1+~(0,l.Bh)(t,a+4))}),a+=8;e.entryCount=n,e.entries=i}))}},{key:"stsc",value:function(e){return b(e,!0,(function(e,t){for(var n=(0,l.Bh)(t),i=[],a=4,r=0;r<n;r++)i.push({firstChunk:(0,l.Bh)(t,a),samplesPerChunk:(0,l.Bh)(t,a+4),sampleDescriptionIndex:(0,l.Bh)(t,a+8)}),a+=12;e.entryCount=n,e.entries=i}))}},{key:"stsz",value:function(e){return b(e,!0,(function(e,t){var n=(0,l.Bh)(t),i=(0,l.Bh)(t,4),a=[];if(!n)for(var r=8,s=0;s<i;s++)a.push((0,l.Bh)(t,r)),r+=4;e.sampleSize=n,e.sampleCount=i,e.entrySizes=a}))}},{key:"stco",value:function(e){return b(e,!0,(function(e,t){for(var n=(0,l.Bh)(t),i=[],a=4,r=0;r<n;r++)i.push((0,l.Bh)(t,a)),a+=4;e.entryCount=n,e.entries=i}))}},{key:"co64",value:function(e){return b(e,!0,(function(e,t){for(var n=(0,l.Bh)(t),i=[],a=4,r=0;r<n;r++)i.push((0,l.h9)(t,a)),a+=8;e.entryCount=n,e.entries=i}))}},{key:"stss",value:function(e){return b(e,!0,(function(e,t){for(var n=(0,l.Bh)(t),i=[],a=4,r=0;r<n;r++)i.push((0,l.Bh)(t,a)),a+=4;e.entryCount=n,e.entries=i}))}},{key:"moof",value:function(t){return b(t,!1,(function(t,n,i){t.mfhd=e.mfhd(e.findBox(n,["mfhd"],i)[0]),t.traf=e.findBox(n,["traf"],i).map((function(t){return e.traf(t)}))}))}},{key:"mfhd",value:function(e){return b(e,!0,(function(e,t){e.sequenceNumber=(0,l.Bh)(t)}))}},{key:"traf",value:function(t){return b(t,!1,(function(t,n,i){t.tfhd=e.tfhd(e.findBox(n,["tfhd"],i)[0]),t.tfdt=e.tfdt(e.findBox(n,["tfdt"],i)[0]),t.trun=e.trun(e.findBox(n,["trun"],i)[0])}))}},{key:"trun",value:function(e){return b(e,!0,(function(e,t){var n=e.version,i=e.flags,a=t.length,r=e.sampleCount=(0,l.Bh)(t),s=4;if(a>s&&1&i&&(e.dataOffset=-(1+~(0,l.Bh)(t,s)),s+=4),a>s&&4&i&&(e.firstSampleFlags=(0,l.Bh)(t,s),s+=4),e.samples=[],a>s)for(var o,u=0;u<r;u++)o={},256&i&&(o.duration=(0,l.Bh)(t,s),s+=4),512&i&&(o.size=(0,l.Bh)(t,s),s+=4),1024&i&&(o.flags=(0,l.Bh)(t,s),s+=4),2048&i&&(o.cts=n?-(1+~(0,l.Bh)(t,s+4)):(0,l.Bh)(t,s),s+=4),e.samples.push(o)}))}},{key:"tfdt",value:function(e){return b(e,!0,(function(e,t){1===e.version?e.baseMediaDecodeTime=(0,l.h9)(t):e.baseMediaDecodeTime=(0,l.Bh)(t)}))}},{key:"probe",value:function(t){return!!e.findBox(t,["ftyp"])}},{key:"parseSampleFlags",value:function(e){return{isLeading:(12&e[0])>>>2,dependsOn:3&e[0],isDependedOn:(192&e[1])>>>6,hasRedundancy:(48&e[1])>>>4,paddingValue:(14&e[1])>>>1,isNonSyncSample:1&e[1],degradationPriority:e[2]<<8|e[3]}}},{key:"moovToTrack",value:function(e,t,n){var i,r,s=e.trak;if(s&&s.length){var o=s.find((function(e){var t,n;return"vide"===(null===(t=e.mdia)||void 0===t||null===(n=t.hdlr)||void 0===n?void 0:n.handlerType)})),u=s.find((function(e){var t,n;return"soun"===(null===(t=e.mdia)||void 0===t||null===(n=t.hdlr)||void 0===n?void 0:n.handlerType)}));if(o&&t){var c,l,d,f,h,v,m,y=t;null!=(null===(c=o.tkhd)||void 0===c?void 0:c.trackId)&&(y.id=o.tkhd.trackId),y.tkhdDuration=o.tkhd.duration,y.mvhdDurtion=e.mvhd.duration,y.mvhdTimecale=e.mvhd.timescale,y.timescale=y.formatTimescale=o.mdia.mdhd.timescale,y.duration=o.mdia.mdhd.duration||y.mvhdDurtion/y.mvhdTimecale*y.timescale;var g,k,b,x,_,w,S,A,B=o.mdia.minf.stbl.stsd.entries[0];if(y.width=B.width,y.height=B.height,B.pasp&&(y.sarRatio=[B.pasp.hSpacing,B.pasp.vSpacing]),B.hvcC)y.codecType=a._e.HEVC,y.codec=B.hvcC.codec,y.vps=B.hvcC.vps,y.sps=B.hvcC.sps,y.pps=B.hvcC.pps,y.hvcC=B.hvcC.data;else{if(!B.avcC)throw new Error("unknown video stsd entry");y.codec=B.avcC.codec,y.sps=B.avcC.sps,y.pps=B.avcC.pps}y.present=!0,y.ext={},y.ext.stss=null===(l=o.mdia)||void 0===l||null===(d=l.minf)||void 0===d||null===(f=d.stbl)||void 0===f?void 0:f.stss,y.ext.ctts=null===(h=o.mdia)||void 0===h||null===(v=h.minf)||void 0===v||null===(m=v.stbl)||void 0===m?void 0:m.ctts,B&&"encv"===B.type&&(y.isVideoEncryption=!0,B.default_KID=null===(g=B.sinf)||void 0===g||null===(k=g.schi)||void 0===k?void 0:k.tenc.default_KID,B.default_IsEncrypted=null===(b=B.sinf)||void 0===b||null===(x=b.schi)||void 0===x?void 0:x.tenc.default_IsEncrypted,B.default_IV_size=null===(_=B.sinf)||void 0===_||null===(w=_.schi)||void 0===w?void 0:w.tenc.default_IV_size,y.videoSenc=o.mdia.minf.stbl.senc&&o.mdia.minf.stbl.senc.samples,B.data_format=null===(S=B.sinf)||void 0===S||null===(A=S.frma)||void 0===A?void 0:A.data_format,y.useEME=e.useEME,y.kidValue=e.kidValue,y.pssh=e.pssh,y.encv=B)}if(u&&n){var C,E,T,I,D,z,U,R,V,P=n;null!=(null===(C=u.tkhd)||void 0===C?void 0:C.trackId)&&(P.id=u.tkhd.trackId),P.tkhdDuration=u.tkhd.duration,P.mvhdDurtion=e.mvhd.duration,P.mvhdTimecale=e.mvhd.timescale,P.timescale=P.formatTimescale=u.mdia.mdhd.timescale,P.duration=u.mdia.mdhd.duration||P.mvhdDurtion/P.mvhdTimecale*P.timescale;var M,O,L,F,N,q,j,H,Z=u.mdia.minf.stbl.stsd.entries[0];switch(P.sampleSize=Z.sampleSize,P.sampleRate=Z.sampleRate,P.channelCount=Z.channelCount,P.present=!0,Z.type){case"alaw":P.codecType=P.codec=a.yQ.G711PCMA,P.sampleRate=8e3;break;case"ulaw":P.codecType=P.codec=a.yQ.G711PCMU,P.sampleRate=8e3;break;default:P.sampleDuration=p.getFrameDuration(P.sampleRate,P.timescale),P.sampleRateIndex=p.getRateIndexByRate(P.sampleRate),P.objectType=(null===(i=Z.esds)||void 0===i?void 0:i.objectType)||2,Z.esds&&(P.config=Array.from(Z.esds.config)),P.codec=(null===(r=Z.esds)||void 0===r?void 0:r.codec)||"mp4a.40.2"}P.sampleDuration=p.getFrameDuration(P.sampleRate,P.timescale),P.objectType=(null===(E=Z.esds)||void 0===E?void 0:E.objectType)||2,Z.esds&&(Z.esds.config?P.config=Array.from(Z.esds.config):console.warn("esds config is null")),P.codec=(null===(T=Z.esds)||void 0===T?void 0:T.codec)||"mp4a.40.2",P.sampleRateIndex=p.getRateIndexByRate(P.sampleRate),P.ext={},P.ext.stss=null===(I=u.mdia)||void 0===I||null===(D=I.minf)||void 0===D||null===(z=D.stbl)||void 0===z?void 0:z.stss,P.ext.ctts=null===(U=u.mdia)||void 0===U||null===(R=U.minf)||void 0===R||null===(V=R.stbl)||void 0===V?void 0:V.ctts,P.present=!0,Z&&"enca"===Z.type&&(P.isAudioEncryption=!0,Z.data_format=null===(M=Z.sinf)||void 0===M||null===(O=M.frma)||void 0===O?void 0:O.data_format,Z.default_KID=null===(L=Z.sinf)||void 0===L||null===(F=L.schi)||void 0===F?void 0:F.tenc.default_KID,Z.default_IsEncrypted=null===(N=Z.sinf)||void 0===N||null===(q=N.schi)||void 0===q?void 0:q.tenc.default_IsEncrypted,Z.default_IV_size=null===(j=Z.sinf)||void 0===j||null===(H=j.schi)||void 0===H?void 0:H.tenc.default_IV_size,P.audioSenc=u.mdia.minf.stbl.senc&&u.mdia.minf.stbl.senc.samples,P.useEME=e.useEME,P.kidValue=e.kidValue,P.enca=Z)}if(n&&(n.isVideoEncryption=!!t&&t.isVideoEncryption),t&&(t.isAudioEncryption=!!n&&n.isAudioEncryption),null!=t&&t.encv||null!=n&&n.enca){var K,Q,J=null==t||null===(K=t.encv)||void 0===K?void 0:K.default_KID,Y=null==n||null===(Q=n.enca)||void 0===Q?void 0:Q.default_KID,G=J||Y?(J||Y).join(""):null;t&&(t.kid=G),n&&(n.kid=G)}return t&&(t.flags=3841),n&&(n.flags=1793),{videoTrack:t,audioTrack:n}}}},{key:"evaluateDefaultDuration",value:function(e,t,n){var i,a=null==t||null===(i=t.samples)||void 0===i?void 0:i.length;return a?1024*a/t.timescale*e.timescale/n:1024}},{key:"moofToSamples",value:function(t,n,i){var a={};return t.mfhd&&(n&&(n.sequenceNumber=t.mfhd.sequenceNumber),i&&(i.sequenceNumber=t.mfhd.sequenceNumber)),t.traf.forEach((function(t){var r=t.tfhd,s=t.tfdt,o=t.trun;if(r&&o){s&&(n&&n.id===r.trackId&&(n.baseMediaDecodeTime=s.baseMediaDecodeTime),i&&i.id===r.trackId&&(i.baseMediaDecodeTime=s.baseMediaDecodeTime));var u=r.defaultSampleSize||0,c=r.defaultSampleDuration||e.evaluateDefaultDuration(n,i,o.samples.length||o.sampleCount),l=o.dataOffset||0,d=0,f=-1;if(!o.samples.length&&o.sampleCount){a[r.trackId]=[];for(var h=0;h<o.sampleCount;h++)a[r.trackId].push({offset:l,dts:d,duration:c,size:u}),d+=c,l+=u}else a[r.trackId]=o.samples.map((function(e,t){return(e={offset:l,dts:d,pts:d+(e.cts||0),duration:e.duration||c,size:e.size||u,gopId:f,keyframe:0===t||null!==e.flags&&void 0!==e.flags&&(65536&e.flags)>>>0!=65536}).keyframe&&(f++,e.gopId=f),d+=e.duration,l+=e.size,e}))}})),a}},{key:"moovToSamples",value:function(e){var t=e.trak;if(t&&t.length){var n=t.find((function(e){var t,n;return"vide"===(null===(t=e.mdia)||void 0===t||null===(n=t.hdlr)||void 0===n?void 0:n.handlerType)})),i=t.find((function(e){var t,n;return"soun"===(null===(t=e.mdia)||void 0===t||null===(n=t.hdlr)||void 0===n?void 0:n.handlerType)}));if(n||i){var a,r;if(n){var s,o,u=null===(s=n.mdia)||void 0===s||null===(o=s.minf)||void 0===o?void 0:o.stbl;if(!u)return;var c=u.stts,l=u.stsc,d=u.stsz,f=u.stco,h=u.stss,v=u.ctts;if(!(c&&l&&d&&f&&h))return;a=y(c,l,d,f,v,h)}if(i){var p,m,g,k=null===(p=i.mdia)||void 0===p||null===(m=p.minf)||void 0===m?void 0:m.stbl;if(!k)return;var b=null===(g=i.mdia.mdhd)||void 0===g?void 0:g.timescale,x=k.stts,_=k.stsc,w=k.stsz,S=k.stco;if(!(b&&x&&_&&w&&S))return;r=y(x,_,w,S)}return{videoSamples:a,audioSamples:r}}}}}]),e}();function y(e,t,n,i,a,r){var s,o,u,c=[],l=null==a?void 0:a.entries,d=t.entries,f=i.entries,h=n.entrySizes,v=null==r?void 0:r.entries;v&&(s={},v.forEach((function(e){s[e-1]=!0}))),l&&(o=[],l.forEach((function(e){for(var t=e.count,n=e.offset,i=0;i<t;i++)o.push(n)})));var p=-1,m=0,y=0,g=0,k=0,b=0,x=d[0].samplesPerChunk,_=d[1]?d[1].firstChunk-1:1/0;return e.entries.forEach((function(e){for(var t=e.count,i=e.delta,a=0;a<t;a++)u={dts:m,duration:i,size:h[y]||n.sampleSize,offset:f[g]+b,index:y},v&&(u.keyframe=s[y],u.keyframe&&p++,u.gopId=p),o&&y<o.length&&(u.pts=u.dts+o[y]),c.push(u),m+=i,++y<x?b+=u.size:(g++,b=0,g>=_&&(k++,_=d[k+1]?d[k+1].firstChunk-1:1/0),x+=d[k].samplesPerChunk)})),c}function g(e,t){return e.dataReferenceIndex=(0,l.i4)(t,6),e.width=(0,l.i4)(t,24),e.height=(0,l.i4)(t,26),e.horizresolution=(0,l.Bh)(t,28),e.vertresolution=(0,l.Bh)(t,32),e.frameCount=(0,l.i4)(t,40),e.depth=(0,l.i4)(t,74),78}function k(e,t){return e.dataReferenceIndex=(0,l.i4)(t,6),e.channelCount=(0,l.i4)(t,16),e.sampleSize=(0,l.i4)(t,18),e.sampleRate=(0,l.Bh)(t,24)/65536,28}function b(e,t,n){if(e){if(e.size!==e.data.length)throw new Error("box ".concat(e.type," size !== data.length"));var i={start:e.start,size:e.size,headerSize:e.headerSize,type:e.type};return t&&(i.version=e.data[e.headerSize],i.flags=(0,l.sV)(e.data,e.headerSize+1),i.headerSize+=4),n(i,e.data.subarray(i.headerSize),i.start+i.headerSize),i}}var x=function(e,t,n){for(var i=String(n),a=t>>0,r=Math.ceil(a/i.length),s=[],o=String(e);r--;)s.push(i);return s.join("").substring(0,a-o.length)+o},_=function(){for(var e=[],t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return n.forEach((function(t){e.push(x(Number(t).toString(16),2,0))})),e[0]},w=n(97623),S=n(28108),A=n(75091),B=n(80558),C=n(98504),E=n(86947),T=n(2180),I={decryptWordArray:function(e,t,n){var i=S.pU.parse(t),a=S.pU.parse((0,l.mw)(n)),r=S.Ic.create(new Uint8Array(e)),s=B.e.decrypt(A.Qt.create({ciphertext:r}),i,{iv:a,mode:C.M,padding:E.g});return I.wordArrayToUint8Array(s)},wordArrayToUint8Array:function(e){for(var t=e.sigBytes,n=e.words,i=new Uint8Array(t),a=0,r=0;a!==t;){var s=n[r++];if(i[a++]=(4278190080&s)>>>24,a===t)break;if(i[a++]=(16711680&s)>>>16,a===t)break;if(i[a++]=(65280&s)>>>8,a===t)break;i[a++]=255&s}return i},decoderAESCTRData:function(e,t){if(e.videoSenc){var n=e.kidValue,i=e.videoSenc;e.samples.forEach((function(t,a){var r=i[a],s=t.data,o=[],u=[],c=r.InitializationVector;if(r.subsamples&&r.subsamples.length)r.subsamples.forEach((function(e){var t=e.BytesOfClearData+e.BytesOfProtectedData,n=s.slice(0,t);o.push(n.slice(0,e.BytesOfClearData)),u.push(n.slice(e.BytesOfClearData)),s=s.slice(t)}));else{var l=t.size;o.push(s.slice(0,0)),u.push(s.slice(0,l)),s=s.slice(l)}var d=new T.Z;d.write.apply(d,u);var f=I.decryptWordArray(d.buffer,n,c),h=new T.Z;o.forEach((function(e,t){var n=u[t].length,i=f.slice(0,n);h.write(e),h.write(i),f=f.slice(n)})),e.samples[a].data=h.buffer}))}if(t.audioSenc){var a=t.kidValue,r=t.audioSenc;t.samples.forEach((function(e,n){var i=r[n],s=I.decryptWordArray(e.data,a,i.InitializationVector);t.samples[n].data=s}))}}},D=function(){function e(t,n,a,o){var u=this;(0,i.PA)(this,e),(0,i._x)(this,"_videoSamples",[]),(0,i._x)(this,"_audioSamples",[]),(0,i._x)(this,"_lastRemainBuffer",[]),(0,i._x)(this,"_lastRemainBufferStartPos",0),this.videoTrack=new r,this.audioTrack=new s,this.metadataTrack=a||new c,this.log=new w.Y("MP4Demuxer",!o||!o.openLog||!o.openLog),t&&t.forEach((function(e){var t;(t=u._videoSamples).push.apply(t,(0,i.u)(e.frames))})),n&&n.forEach((function(e){var t;(t=u._audioSamples).push.apply(t,(0,i.u)(e.frames))}))}return(0,i.qH)(e,[{key:"parseSamples",value:function(e){if(!e)throw new Error("moov is required");if(this.videoTrack.codec||this.audioTrack.codec||(m.moovToTrack(e,this.videoTrack,this.audioTrack),this.videoSenc=this.videoTrack.videoSenc,this.audioSenc=this.audioTrack.audioSenc),!this._audioSamples.length&&!this._videoSamples.length){var t=m.moovToSamples(e);if(!t)throw new Error("cannot parse samples from moov box");this._videoSamples=t.videoSamples||[],this._audioSamples=t.audioSamples||[]}}},{key:"demux",value:function(e,t,n,i,a){this.parseSamples(a);var r,s,c,d=this.videoTrack,f=this.audioTrack;if(d.samples=[],f.samples=[],n){for(var h,v=0,p=n[0],m=n[1];p<=m;p++){if(!(r=this._videoSamples[p]))throw new Error("cannot found video frame #".concat(p));c=r.offset-t,s=e.subarray(c,c+r.size),(h=new o(r.pts||r.dts,r.dts)).duration=r.duration,h.gopId=r.gopId,r.keyframe&&h.setToKeyframe();for(var y=0,g=s.length-1;y<g;)v=(0,l.Bh)(s,y),y+=4,h.units.push(s.subarray(y,y+v)),y+=v;d.samples.push(h)}d.baseMediaDecodeTime=d.samples[0].dts}if(i){for(var k=i[0],b=i[1];k<=b;k++){if(!(r=this._audioSamples[k]))throw new Error("cannot found video frame #".concat(k));c=r.offset-t,s=e.subarray(c,c+r.size),f.samples.push(new u(r.dts,s,r.duration))}f.baseMediaDecodeTime=f.samples[0].dts}return{videoTrack:d,audioTrack:f,metadataTrack:this.metadataTrack}}},{key:"demuxPart",value:function(e,t,n,i,a,r,s){if(this.parseSamples(a),this.videoTrack.useEME=r,this.audioTrack.useEME=r,this._lastRemainBuffer&&this._lastRemainBuffer.byteLength>0&&t>this._lastRemainBufferStartPos&&t<=this._lastRemainBufferStartPos+this._lastRemainBuffer.byteLength)for(var c=0;c<20;)try{var d=this._lastRemainBuffer.subarray(0,t-this._lastRemainBufferStartPos),f=new Uint8Array(e.byteLength+d.byteLength);f.set(d,0),f.set(new Uint8Array(e),d.byteLength),e=f,t-=d.byteLength,this._lastRemainBuffer=null,this._lastRemainBufferStartPos=0;break}catch(e){if(!(c<20))throw new Error("new Uint8Array error:,"+e.errorMessage);c++}var h,v,p,m=this.videoTrack,y=this.audioTrack;m.samples=[],y.samples=[],m.videoSenc=null,y.audioSenc=null;var g=0,k=0;if(this._videoSamples.length>0&&n.length>0){for(var b,x=e.byteLength+t,_=n[0];_<=n[1];_++){if(!(h=this._videoSamples[_]))throw new Error("cannot found video frame #".concat(_));h.offset>=t&&h.offset+h.size<=x&&(g=(p=h.offset-t)+h.size,v=e.subarray(p,g),(b=new o(h.pts||h.dts,h.dts)).duration=h.duration,b.gopId=h.gopId,b.sampleOffset=h.index,h.keyframe&&b.setToKeyframe(),b.data=v,b.size=h.size,m.samples.push(b))}m.samples.length>0&&(m.gopId=m.samples[0].gopId,m.baseMediaDecodeTime=m.samples[0].dts,m.startPts=m.samples[0].pts/m.timescale,m.endPts=m.samples[m.samples.length-1].pts/m.timescale,this.videoSenc&&(m.videoSenc=this.videoSenc.slice(m.samples[0].sampleOffset,m.samples[0].sampleOffset+m.samples.length),m.kidValue=s))}if(this._audioSamples.length>0&&i.length>0){for(var w=i[0];w<=i[1];w++){if(!(h=this._audioSamples[w]))throw new Error("cannot found video frame #".concat(w));h.offset>=t&&h.offset+h.size<=e.byteLength+t&&(k=(p=h.offset-t)+h.size,v=e.subarray(p,k),y.samples.push(new u(h.dts,v,h.duration,h.index)))}y.samples.length>0&&(y.gopId=y.samples[0].gopId||m.gopId,y.baseMediaDecodeTime=y.samples[0].dts,y.startPts=y.samples[0].pts/y.timescale,y.endPts=y.samples[y.samples.length-1].pts/y.timescale,this.audioSenc&&(y.audioSenc=this.audioSenc.slice(y.samples[0].sampleOffset,y.samples[0].sampleOffset+y.samples.length),y.kidValue=s))}this.decoderData(m,y);for(var S=0,A=0;A<m.samples.length;A++)for(var B=0,C=m.samples[A].data,E=C.length-1;B<E;)S=(0,l.Bh)(C,B),B+=4,m.samples[A].units.push(C.subarray(B,B+S)),B+=S;return this._lastRemainBuffer=e.subarray(Math.max(g,k)),this._lastRemainBuffer.byteLength>0?this._lastRemainBufferStartPos=t+e.byteLength-this._lastRemainBuffer.byteLength:this._lastRemainBufferStartPos=0,{videoTrack:m,audioTrack:y,metadataTrack:this.metadataTrack}}},{key:"reset",value:function(){this._videoSamples=[],this._audioSamples=[],this._lastRemainBuffer=null,this._lastRemainBufferStartPos=0,this.videoTrack.reset(),this.audioTrack.reset(),this.metadataTrack.reset()}},{key:"decoderData",value:function(e,t){e.useEME||t.useEME||I.decoderAESCTRData(e,t)}}],[{key:"probe",value:function(e){return m.probe(e)}}]),e}()},18046:(e,t,n)=>{function i(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t=t.filter(Boolean);var i=new Uint8Array(t.reduce((function(e,t){return e+t.byteLength}),0)),a=0;return t.forEach((function(e){i.set(e,a),a+=e.byteLength})),i}n.d(t,{gJ:()=>i,mw:()=>l,dB:()=>c,Qc:()=>d,i4:()=>r,sV:()=>s,Bh:()=>o,h9:()=>u}),n(62180),n(3495),n(9776),n(35537),n(47754),n(434),n(64822),n(8415),n(60386),n(80177),n(67353),n(56441),n(53139),n(1933),n(59605),n(27435),n(95377),n(69610),n(98083),n(35827),n(9903),n(51018),n(34659),n(43170),n(3708),n(78900),n(10391),n(34721),n(72153),n(51680),n(94609),n(96935),n(34895),n(17021),n(14643),n(60100);var a=Math.pow(2,32);function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(e[t]<<8)+(e[t+1]||0)}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(e[t]<<16)+(e[t+1]<<8)+(e[t+2]||0)}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(e[t]<<24>>>0)+(e[t+1]<<16)+(e[t+2]<<8)+(e[t+3]||0)}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return o(e,t)*a+o(e,t+4)}function c(e){for(var t,n="avc1.",i=0;i<3;i++)(t=e[i].toString(16)).length<2&&(t="0".concat(t)),n+=t;return n}function l(e){var t="";if(e.forEach((function(e){t+=function(e){return("0"+Number(e).toString(16)).slice(-2).toUpperCase()}(e)})),t.length<=32)for(var n=32-t.length,i=0;i<n;i++)t+="0";return t}function d(e){if(!Array.isArray(e)){for(var t=[],n="",i=0;i<e.length;i++)i%2&&(n=e[i-1]+e[i],t.push(parseInt(n,16)),n="");return t}return e.map((function(e){return parseInt(e,16)}))}}}]);